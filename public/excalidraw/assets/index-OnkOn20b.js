var kW=Object.defineProperty;var LW=(e,t,n)=>t in e?kW(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var F=(e,t,n)=>(LW(e,typeof t!="symbol"?t+"":t,n),n);function DW(e,t){for(var n=0;n<t.length;n++){const i=t[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in e)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(e,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var _a=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function al(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var xL={exports:{}},b6={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NW=Symbol.for("react.transitional.element"),OW=Symbol.for("react.fragment");function CL(e,t,n){var i=null;if(n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),"key"in t){n={};for(var r in t)r!=="key"&&(n[r]=t[r])}else n=t;return t=n.ref,{$$typeof:NW,type:e,key:i,ref:t!==void 0?t:null,props:n}}b6.Fragment=OW;b6.jsx=CL;b6.jsxs=CL;xL.exports=b6;var X4=xL.exports;const ge=X4.Fragment,g=X4.jsx,P=X4.jsxs;var AL={exports:{}},We={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j4=Symbol.for("react.transitional.element"),PW=Symbol.for("react.portal"),FW=Symbol.for("react.fragment"),BW=Symbol.for("react.strict_mode"),zW=Symbol.for("react.profiler"),HW=Symbol.for("react.consumer"),VW=Symbol.for("react.context"),$W=Symbol.for("react.forward_ref"),GW=Symbol.for("react.suspense"),XW=Symbol.for("react.memo"),ML=Symbol.for("react.lazy"),dS=Symbol.iterator;function jW(e){return e===null||typeof e!="object"?null:(e=dS&&e[dS]||e["@@iterator"],typeof e=="function"?e:null)}var RL={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},kL=Object.assign,LL={};function Vh(e,t,n){this.props=e,this.context=t,this.refs=LL,this.updater=n||RL}Vh.prototype.isReactComponent={};Vh.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Vh.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function DL(){}DL.prototype=Vh.prototype;function Y4(e,t,n){this.props=e,this.context=t,this.refs=LL,this.updater=n||RL}var W4=Y4.prototype=new DL;W4.constructor=Y4;kL(W4,Vh.prototype);W4.isPureReactComponent=!0;var fS=Array.isArray,dn={H:null,A:null,T:null,S:null},NL=Object.prototype.hasOwnProperty;function K4(e,t,n,i,r,s){return n=s.ref,{$$typeof:j4,type:e,key:t,ref:n!==void 0?n:null,props:s}}function YW(e,t){return K4(e.type,t,void 0,void 0,void 0,e.props)}function Z4(e){return typeof e=="object"&&e!==null&&e.$$typeof===j4}function WW(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var hS=/\/+/g;function Ty(e,t){return typeof e=="object"&&e!==null&&e.key!=null?WW(""+e.key):t.toString(36)}function gS(){}function KW(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(gS,gS):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function tf(e,t,n,i,r){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"bigint":case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case j4:case PW:o=!0;break;case ML:return o=e._init,tf(o(e._payload),t,n,i,r)}}if(o)return r=r(e),o=i===""?"."+Ty(e,0):i,fS(r)?(n="",o!=null&&(n=o.replace(hS,"$&/")+"/"),tf(r,t,n,"",function(c){return c})):r!=null&&(Z4(r)&&(r=YW(r,n+(r.key==null||e&&e.key===r.key?"":(""+r.key).replace(hS,"$&/")+"/")+o)),t.push(r)),1;o=0;var a=i===""?".":i+":";if(fS(e))for(var l=0;l<e.length;l++)i=e[l],s=a+Ty(i,l),o+=tf(i,t,n,s,r);else if(l=jW(e),typeof l=="function")for(e=l.call(e),l=0;!(i=e.next()).done;)i=i.value,s=a+Ty(i,l++),o+=tf(i,t,n,s,r);else if(s==="object"){if(typeof e.then=="function")return tf(KW(e),t,n,i,r);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return o}function Sp(e,t,n){if(e==null)return e;var i=[],r=0;return tf(e,i,"","",function(s){return t.call(n,s,r++)}),i}function ZW(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var mS=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function qW(){}We.Children={map:Sp,forEach:function(e,t,n){Sp(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Sp(e,function(){t++}),t},toArray:function(e){return Sp(e,function(t){return t})||[]},only:function(e){if(!Z4(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};We.Component=Vh;We.Fragment=FW;We.Profiler=zW;We.PureComponent=Y4;We.StrictMode=BW;We.Suspense=GW;We.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=dn;We.act=function(){throw Error("act(...) is not supported in production builds of React.")};We.cache=function(e){return function(){return e.apply(null,arguments)}};We.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var i=kL({},e.props),r=e.key,s=void 0;if(t!=null)for(o in t.ref!==void 0&&(s=void 0),t.key!==void 0&&(r=""+t.key),t)!NL.call(t,o)||o==="key"||o==="__self"||o==="__source"||o==="ref"&&t.ref===void 0||(i[o]=t[o]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var a=Array(o),l=0;l<o;l++)a[l]=arguments[l+2];i.children=a}return K4(e.type,r,void 0,void 0,s,i)};We.createContext=function(e){return e={$$typeof:VW,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:HW,_context:e},e};We.createElement=function(e,t,n){var i,r={},s=null;if(t!=null)for(i in t.key!==void 0&&(s=""+t.key),t)NL.call(t,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(r[i]=t[i]);var o=arguments.length-2;if(o===1)r.children=n;else if(1<o){for(var a=Array(o),l=0;l<o;l++)a[l]=arguments[l+2];r.children=a}if(e&&e.defaultProps)for(i in o=e.defaultProps,o)r[i]===void 0&&(r[i]=o[i]);return K4(e,s,void 0,void 0,null,r)};We.createRef=function(){return{current:null}};We.forwardRef=function(e){return{$$typeof:$W,render:e}};We.isValidElement=Z4;We.lazy=function(e){return{$$typeof:ML,_payload:{_status:-1,_result:e},_init:ZW}};We.memo=function(e,t){return{$$typeof:XW,type:e,compare:t===void 0?null:t}};We.startTransition=function(e){var t=dn.T,n={};dn.T=n;try{var i=e(),r=dn.S;r!==null&&r(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(qW,mS)}catch(s){mS(s)}finally{dn.T=t}};We.unstable_useCacheRefresh=function(){return dn.H.useCacheRefresh()};We.use=function(e){return dn.H.use(e)};We.useActionState=function(e,t,n){return dn.H.useActionState(e,t,n)};We.useCallback=function(e,t){return dn.H.useCallback(e,t)};We.useContext=function(e){return dn.H.useContext(e)};We.useDebugValue=function(){};We.useDeferredValue=function(e,t){return dn.H.useDeferredValue(e,t)};We.useEffect=function(e,t){return dn.H.useEffect(e,t)};We.useId=function(){return dn.H.useId()};We.useImperativeHandle=function(e,t,n){return dn.H.useImperativeHandle(e,t,n)};We.useInsertionEffect=function(e,t){return dn.H.useInsertionEffect(e,t)};We.useLayoutEffect=function(e,t){return dn.H.useLayoutEffect(e,t)};We.useMemo=function(e,t){return dn.H.useMemo(e,t)};We.useOptimistic=function(e,t){return dn.H.useOptimistic(e,t)};We.useReducer=function(e,t,n){return dn.H.useReducer(e,t,n)};We.useRef=function(e){return dn.H.useRef(e)};We.useState=function(e){return dn.H.useState(e)};We.useSyncExternalStore=function(e,t,n){return dn.H.useSyncExternalStore(e,t,n)};We.useTransition=function(){return dn.H.useTransition()};We.version="19.0.0";AL.exports=We;var N=AL.exports;const se=al(N),QW=DW({__proto__:null,default:se},[N]);var OL={exports:{}},y6={},PL={exports:{}},FL={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(H,$){var j=H.length;H.push($);e:for(;0<j;){var X=j-1>>>1,K=H[X];if(0<r(K,$))H[X]=$,H[j]=K,j=X;else break e}}function n(H){return H.length===0?null:H[0]}function i(H){if(H.length===0)return null;var $=H[0],j=H.pop();if(j!==$){H[0]=j;e:for(var X=0,K=H.length,le=K>>>1;X<le;){var we=2*(X+1)-1,he=H[we],Ve=we+1,Ye=H[Ve];if(0>r(he,j))Ve<K&&0>r(Ye,he)?(H[X]=Ye,H[Ve]=j,X=Ve):(H[X]=he,H[we]=j,X=we);else if(Ve<K&&0>r(Ye,j))H[X]=Ye,H[Ve]=j,X=Ve;else break e}}return $}function r(H,$){var j=H.sortIndex-$.sortIndex;return j!==0?j:H.id-$.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,h=!1,m=!1,p=!1,b=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;function v(H){for(var $=n(c);$!==null;){if($.callback===null)i(c);else if($.startTime<=H)i(c),$.sortIndex=$.expirationTime,t(l,$);else break;$=n(c)}}function _(H){if(p=!1,v(H),!m)if(n(l)!==null)m=!0,G();else{var $=n(c);$!==null&&V(_,$.startTime-H)}}var S=!1,M=-1,w=5,T=-1;function A(){return!(e.unstable_now()-T<w)}function I(){if(S){var H=e.unstable_now();T=H;var $=!0;try{e:{m=!1,p&&(p=!1,E(M),M=-1),h=!0;var j=f;try{t:{for(v(H),d=n(l);d!==null&&!(d.expirationTime>H&&A());){var X=d.callback;if(typeof X=="function"){d.callback=null,f=d.priorityLevel;var K=X(d.expirationTime<=H);if(H=e.unstable_now(),typeof K=="function"){d.callback=K,v(H),$=!0;break t}d===n(l)&&i(l),v(H)}else i(l);d=n(l)}if(d!==null)$=!0;else{var le=n(c);le!==null&&V(_,le.startTime-H),$=!1}}break e}finally{d=null,f=j,h=!1}$=void 0}}finally{$?R():S=!1}}}var R;if(typeof y=="function")R=function(){y(I)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,L=D.port2;D.port1.onmessage=I,R=function(){L.postMessage(null)}}else R=function(){b(I,0)};function G(){S||(S=!0,R())}function V(H,$){M=b(function(){H(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(H){H.callback=null},e.unstable_continueExecution=function(){m||h||(m=!0,G())},e.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<H?Math.floor(1e3/H):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(H){switch(f){case 1:case 2:case 3:var $=3;break;default:$=f}var j=f;f=$;try{return H()}finally{f=j}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(H,$){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var j=f;f=H;try{return $()}finally{f=j}},e.unstable_scheduleCallback=function(H,$,j){var X=e.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?X+j:X):j=X,H){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=j+K,H={id:u++,callback:$,priorityLevel:H,startTime:j,expirationTime:K,sortIndex:-1},j>X?(H.sortIndex=j,t(c,H),n(l)===null&&H===n(c)&&(p?(E(M),M=-1):p=!0,V(_,j-X))):(H.sortIndex=K,t(l,H),m||h||(m=!0,G())),H},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(H){var $=f;return function(){var j=f;f=$;try{return H.apply(this,arguments)}finally{f=j}}}})(FL);PL.exports=FL;var JW=PL.exports,BL={exports:{}},nr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eK=N;function zL(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function ml(){}var qi={d:{f:ml,r:function(){throw Error(zL(522))},D:ml,C:ml,L:ml,m:ml,X:ml,S:ml,M:ml},p:0,findDOMNode:null},tK=Symbol.for("react.portal");function nK(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:tK,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}var T1=eK.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function E6(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}nr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=qi;nr.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(zL(299));return nK(e,t,null,n)};nr.flushSync=function(e){var t=T1.T,n=qi.p;try{if(T1.T=null,qi.p=2,e)return e()}finally{T1.T=t,qi.p=n,qi.d.f()}};nr.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,qi.d.C(e,t))};nr.prefetchDNS=function(e){typeof e=="string"&&qi.d.D(e)};nr.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,i=E6(n,t.crossOrigin),r=typeof t.integrity=="string"?t.integrity:void 0,s=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?qi.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:i,integrity:r,fetchPriority:s}):n==="script"&&qi.d.X(e,{crossOrigin:i,integrity:r,fetchPriority:s,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};nr.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=E6(t.as,t.crossOrigin);qi.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&qi.d.M(e)};nr.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,i=E6(n,t.crossOrigin);qi.d.L(e,n,{crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};nr.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=E6(t.as,t.crossOrigin);qi.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else qi.d.m(e)};nr.requestFormReset=function(e){qi.d.r(e)};nr.unstable_batchedUpdates=function(e,t){return e(t)};nr.useFormState=function(e,t,n){return T1.H.useFormState(e,t,n)};nr.useFormStatus=function(){return T1.H.useHostTransitionStatus()};nr.version="19.0.0";function HL(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(HL)}catch(e){console.error(e)}}HL(),BL.exports=nr;var ii=BL.exports;const iK=al(ii);/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zn=JW,VL=N,rK=ii;function ne(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function $L(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}var sK=Symbol.for("react.element"),Ip=Symbol.for("react.transitional.element"),t1=Symbol.for("react.portal"),gf=Symbol.for("react.fragment"),GL=Symbol.for("react.strict_mode"),H7=Symbol.for("react.profiler"),oK=Symbol.for("react.provider"),XL=Symbol.for("react.consumer"),wa=Symbol.for("react.context"),q4=Symbol.for("react.forward_ref"),V7=Symbol.for("react.suspense"),$7=Symbol.for("react.suspense_list"),Q4=Symbol.for("react.memo"),Sl=Symbol.for("react.lazy"),jL=Symbol.for("react.offscreen"),aK=Symbol.for("react.memo_cache_sentinel"),pS=Symbol.iterator;function Ig(e){return e===null||typeof e!="object"?null:(e=pS&&e[pS]||e["@@iterator"],typeof e=="function"?e:null)}var lK=Symbol.for("react.client.reference");function G7(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===lK?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case gf:return"Fragment";case t1:return"Portal";case H7:return"Profiler";case GL:return"StrictMode";case V7:return"Suspense";case $7:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case wa:return(e.displayName||"Context")+".Provider";case XL:return(e._context.displayName||"Context")+".Consumer";case q4:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Q4:return t=e.displayName||null,t!==null?t:G7(e.type)||"Memo";case Sl:t=e._payload,e=e._init;try{return G7(e(t))}catch{}}return null}var je=VL.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Qt=Object.assign,Sy,US;function n1(e){if(Sy===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Sy=t&&t[1]||"",US=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Sy+e+US}var Iy=!1;function xy(e,t){if(!e||Iy)return"";Iy=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var d=function(){throw Error()};if(Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(h){var f=h}Reflect.construct(e,[],d)}else{try{d.call()}catch(h){f=h}e.call(d.prototype)}}else{try{throw Error()}catch(h){f=h}(d=e())&&typeof d.catch=="function"&&d.catch(function(){})}}catch(h){if(h&&f&&typeof h.stack=="string")return[h.stack,f.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=i.DetermineComponentFrameRoot(),o=s[0],a=s[1];if(o&&a){var l=o.split(`
`),c=a.split(`
`);for(r=i=0;i<l.length&&!l[i].includes("DetermineComponentFrameRoot");)i++;for(;r<c.length&&!c[r].includes("DetermineComponentFrameRoot");)r++;if(i===l.length||r===c.length)for(i=l.length-1,r=c.length-1;1<=i&&0<=r&&l[i]!==c[r];)r--;for(;1<=i&&0<=r;i--,r--)if(l[i]!==c[r]){if(i!==1||r!==1)do if(i--,r--,0>r||l[i]!==c[r]){var u=`
`+l[i].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=i&&0<=r);break}}}finally{Iy=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?n1(n):""}function cK(e){switch(e.tag){case 26:case 27:case 5:return n1(e.type);case 16:return n1("Lazy");case 13:return n1("Suspense");case 19:return n1("SuspenseList");case 0:case 15:return e=xy(e.type,!1),e;case 11:return e=xy(e.type.render,!1),e;case 1:return e=xy(e.type,!0),e;default:return""}}function bS(e){try{var t="";do t+=cK(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function $h(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function YL(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function yS(e){if($h(e)!==e)throw Error(ne(188))}function uK(e){var t=e.alternate;if(!t){if(t=$h(e),t===null)throw Error(ne(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return yS(r),e;if(s===i)return yS(r),t;s=s.sibling}throw Error(ne(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(ne(189))}}if(n.alternate!==i)throw Error(ne(190))}if(n.tag!==3)throw Error(ne(188));return n.stateNode.current===n?e:t}function WL(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=WL(e),t!==null)return t;e=e.sibling}return null}var i1=Array.isArray,qt=rK.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Su={pending:!1,data:null,method:null,action:null},X7=[],mf=-1;function jo(e){return{current:e}}function ci(e){0>mf||(e.current=X7[mf],X7[mf]=null,mf--)}function ln(e,t){mf++,X7[mf]=e.current,e.current=t}var Lo=jo(null),f0=jo(null),Wl=jo(null),E2=jo(null);function v2(e,t){switch(ln(Wl,t),ln(f0,e),ln(Lo,null),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)&&(t=t.namespaceURI)?EI(t):0;break;default:if(e=e===8?t.parentNode:t,t=e.tagName,e=e.namespaceURI)e=EI(e),t=oO(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ci(Lo),ln(Lo,t)}function th(){ci(Lo),ci(f0),ci(Wl)}function j7(e){e.memoizedState!==null&&ln(E2,e);var t=Lo.current,n=oO(t,e.type);t!==n&&(ln(f0,e),ln(Lo,n))}function _2(e){f0.current===e&&(ci(Lo),ci(f0)),E2.current===e&&(ci(E2),w0._currentValue=Su)}var Y7=Object.prototype.hasOwnProperty,J4=Zn.unstable_scheduleCallback,Cy=Zn.unstable_cancelCallback,dK=Zn.unstable_shouldYield,fK=Zn.unstable_requestPaint,Do=Zn.unstable_now,hK=Zn.unstable_getCurrentPriorityLevel,KL=Zn.unstable_ImmediatePriority,ZL=Zn.unstable_UserBlockingPriority,w2=Zn.unstable_NormalPriority,gK=Zn.unstable_LowPriority,qL=Zn.unstable_IdlePriority,mK=Zn.log,pK=Zn.unstable_setDisableYieldValue,ym=null,Dr=null;function UK(e){if(Dr&&typeof Dr.onCommitFiberRoot=="function")try{Dr.onCommitFiberRoot(ym,e,void 0,(e.current.flags&128)===128)}catch{}}function Fl(e){if(typeof mK=="function"&&pK(e),Dr&&typeof Dr.setStrictMode=="function")try{Dr.setStrictMode(ym,e)}catch{}}var Nr=Math.clz32?Math.clz32:EK,bK=Math.log,yK=Math.LN2;function EK(e){return e>>>=0,e===0?32:31-(bK(e)/yK|0)|0}var xp=128,Cp=4194304;function Qc(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function v6(e,t){var n=e.pendingLanes;if(n===0)return 0;var i=0,r=e.suspendedLanes,s=e.pingedLanes,o=e.warmLanes;e=e.finishedLanes!==0;var a=n&134217727;return a!==0?(n=a&~r,n!==0?i=Qc(n):(s&=a,s!==0?i=Qc(s):e||(o=a&~o,o!==0&&(i=Qc(o))))):(a=n&~r,a!==0?i=Qc(a):s!==0?i=Qc(s):e||(o=n&~o,o!==0&&(i=Qc(o)))),i===0?0:t!==0&&t!==i&&!(t&r)&&(r=i&-i,o=t&-t,r>=o||r===32&&(o&4194176)!==0)?t:i}function Em(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function vK(e,t){switch(e){case 1:case 2:case 4:case 8:return t+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function QL(){var e=xp;return xp<<=1,!(xp&4194176)&&(xp=128),e}function JL(){var e=Cp;return Cp<<=1,!(Cp&62914560)&&(Cp=4194304),e}function Ay(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vm(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function _K(e,t,n,i,r,s){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var a=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=o&~n;0<n;){var u=31-Nr(n),d=1<<u;a[u]=0,l[u]=-1;var f=c[u];if(f!==null)for(c[u]=null,u=0;u<f.length;u++){var h=f[u];h!==null&&(h.lane&=-536870913)}n&=~d}i!==0&&eD(e,i,0),s!==0&&r===0&&e.tag!==0&&(e.suspendedLanes|=s&~(o&~t))}function eD(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-Nr(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|n&4194218}function tD(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-Nr(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}function nD(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function iD(){var e=qt.p;return e!==0?e:(e=window.event,e===void 0?32:pO(e.type))}function wK(e,t){var n=qt.p;try{return qt.p=e,t()}finally{qt.p=n}}var Nc=Math.random().toString(36).slice(2),Fi="__reactFiber$"+Nc,br="__reactProps$"+Nc,Gh="__reactContainer$"+Nc,W7="__reactEvents$"+Nc,TK="__reactListeners$"+Nc,SK="__reactHandles$"+Nc,ES="__reactResources$"+Nc,h0="__reactMarker$"+Nc;function ev(e){delete e[Fi],delete e[br],delete e[W7],delete e[TK],delete e[SK]}function fu(e){var t=e[Fi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Gh]||n[Fi]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=_I(e);e!==null;){if(n=e[Fi])return n;e=_I(e)}return t}e=n,n=e.parentNode}return null}function Xh(e){if(e=e[Fi]||e[Gh]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function r1(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(ne(33))}function Pf(e){var t=e[ES];return t||(t=e[ES]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function ri(e){e[h0]=!0}var rD=new Set,sD={};function Ud(e,t){nh(e,t),nh(e+"Capture",t)}function nh(e,t){for(sD[e]=t,e=0;e<t.length;e++)rD.add(t[e])}var Ba=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),IK=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),vS={},_S={};function xK(e){return Y7.call(_S,e)?!0:Y7.call(vS,e)?!1:IK.test(e)?_S[e]=!0:(vS[e]=!0,!1)}function AU(e,t,n){if(xK(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function Ap(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function ea(e,t,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+i)}}function Qr(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function oD(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function CK(e){var t=oD(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function T2(e){e._valueTracker||(e._valueTracker=CK(e))}function aD(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=oD(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function S2(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var AK=/[\n"\\]/g;function ts(e){return e.replace(AK,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function K7(e,t,n,i,r,s,o,a){e.name="",o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?e.type=o:e.removeAttribute("type"),t!=null?o==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Qr(t)):e.value!==""+Qr(t)&&(e.value=""+Qr(t)):o!=="submit"&&o!=="reset"||e.removeAttribute("value"),t!=null?Z7(e,o,Qr(t)):n!=null?Z7(e,o,Qr(n)):i!=null&&e.removeAttribute("value"),r==null&&s!=null&&(e.defaultChecked=!!s),r!=null&&(e.checked=r&&typeof r!="function"&&typeof r!="symbol"),a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?e.name=""+Qr(a):e.removeAttribute("name")}function lD(e,t,n,i,r,s,o,a){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(e.type=s),t!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||t!=null))return;n=n!=null?""+Qr(n):"",t=t!=null?""+Qr(t):n,a||t===e.value||(e.value=t),e.defaultValue=t}i=i??r,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=a?e.checked:!!i,e.defaultChecked=!!i,o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(e.name=o)}function Z7(e,t,n){t==="number"&&S2(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Ff(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+Qr(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,i&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function cD(e,t,n){if(t!=null&&(t=""+Qr(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+Qr(n):""}function uD(e,t,n,i){if(t==null){if(i!=null){if(n!=null)throw Error(ne(92));if(i1(i)){if(1<i.length)throw Error(ne(93));i=i[0]}n=i}n==null&&(n=""),t=n}n=Qr(t),e.defaultValue=n,i=e.textContent,i===n&&i!==""&&i!==null&&(e.value=i)}function ih(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var MK=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function wS(e,t,n){var i=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,n):typeof n!="number"||n===0||MK.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function dD(e,t,n){if(t!=null&&typeof t!="object")throw Error(ne(62));if(e=e.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var r in t)i=t[r],t.hasOwnProperty(r)&&n[r]!==i&&wS(e,r,i)}else for(var s in t)t.hasOwnProperty(s)&&wS(e,s,t[s])}function tv(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var RK=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),kK=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function MU(e){return kK.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var q7=null;function nv(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var pf=null,Bf=null;function TS(e){var t=Xh(e);if(t&&(e=t.stateNode)){var n=e[br]||null;e:switch(e=t.stateNode,t.type){case"input":if(K7(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+ts(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=i[br]||null;if(!r)throw Error(ne(90));K7(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<n.length;t++)i=n[t],i.form===e.form&&aD(i)}break e;case"textarea":cD(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&Ff(e,!!n.multiple,t,!1)}}}var My=!1;function fD(e,t,n){if(My)return e(t,n);My=!0;try{var i=e(t);return i}finally{if(My=!1,(pf!==null||Bf!==null)&&(R6(),pf&&(t=pf,e=Bf,Bf=pf=null,TS(t),e)))for(t=0;t<e.length;t++)TS(e[t])}}function g0(e,t){var n=e.stateNode;if(n===null)return null;var i=n[br]||null;if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ne(231,t,typeof n));return n}var Q7=!1;if(Ba)try{var xg={};Object.defineProperty(xg,"passive",{get:function(){Q7=!0}}),window.addEventListener("test",xg,xg),window.removeEventListener("test",xg,xg)}catch{Q7=!1}var Bl=null,iv=null,RU=null;function hD(){if(RU)return RU;var e,t=iv,n=t.length,i,r="value"in Bl?Bl.value:Bl.textContent,s=r.length;for(e=0;e<n&&t[e]===r[e];e++);var o=n-e;for(i=1;i<=o&&t[n-i]===r[s-i];i++);return RU=r.slice(e,1<i?1-i:void 0)}function kU(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Mp(){return!0}function SS(){return!1}function yr(e){function t(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Mp:SS,this.isPropagationStopped=SS,this}return Qt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Mp)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Mp)},persist:function(){},isPersistent:Mp}),t}var bd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_6=yr(bd),_m=Qt({},bd,{view:0,detail:0}),LK=yr(_m),Ry,ky,Cg,w6=Qt({},_m,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rv,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Cg&&(Cg&&e.type==="mousemove"?(Ry=e.screenX-Cg.screenX,ky=e.screenY-Cg.screenY):ky=Ry=0,Cg=e),Ry)},movementY:function(e){return"movementY"in e?e.movementY:ky}}),IS=yr(w6),DK=Qt({},w6,{dataTransfer:0}),NK=yr(DK),OK=Qt({},_m,{relatedTarget:0}),Ly=yr(OK),PK=Qt({},bd,{animationName:0,elapsedTime:0,pseudoElement:0}),FK=yr(PK),BK=Qt({},bd,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),zK=yr(BK),HK=Qt({},bd,{data:0}),xS=yr(HK),VK={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$K={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},GK={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function XK(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=GK[e])?!!t[e]:!1}function rv(){return XK}var jK=Qt({},_m,{key:function(e){if(e.key){var t=VK[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=kU(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?$K[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rv,charCode:function(e){return e.type==="keypress"?kU(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?kU(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),YK=yr(jK),WK=Qt({},w6,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),CS=yr(WK),KK=Qt({},_m,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rv}),ZK=yr(KK),qK=Qt({},bd,{propertyName:0,elapsedTime:0,pseudoElement:0}),QK=yr(qK),JK=Qt({},w6,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),eZ=yr(JK),tZ=Qt({},bd,{newState:0,oldState:0}),nZ=yr(tZ),iZ=[9,13,27,32],sv=Ba&&"CompositionEvent"in window,S1=null;Ba&&"documentMode"in document&&(S1=document.documentMode);var rZ=Ba&&"TextEvent"in window&&!S1,gD=Ba&&(!sv||S1&&8<S1&&11>=S1),AS=" ",MS=!1;function mD(e,t){switch(e){case"keyup":return iZ.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pD(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Uf=!1;function sZ(e,t){switch(e){case"compositionend":return pD(t);case"keypress":return t.which!==32?null:(MS=!0,AS);case"textInput":return e=t.data,e===AS&&MS?null:e;default:return null}}function oZ(e,t){if(Uf)return e==="compositionend"||!sv&&mD(e,t)?(e=hD(),RU=iv=Bl=null,Uf=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return gD&&t.locale!=="ko"?null:t.data;default:return null}}var aZ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function RS(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!aZ[e.type]:t==="textarea"}function UD(e,t,n,i){pf?Bf?Bf.push(i):Bf=[i]:pf=i,t=H2(t,"onChange"),0<t.length&&(n=new _6("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var I1=null,m0=null;function lZ(e){iO(e,0)}function T6(e){var t=r1(e);if(aD(t))return e}function kS(e,t){if(e==="change")return t}var bD=!1;if(Ba){var Dy;if(Ba){var Ny="oninput"in document;if(!Ny){var LS=document.createElement("div");LS.setAttribute("oninput","return;"),Ny=typeof LS.oninput=="function"}Dy=Ny}else Dy=!1;bD=Dy&&(!document.documentMode||9<document.documentMode)}function DS(){I1&&(I1.detachEvent("onpropertychange",yD),m0=I1=null)}function yD(e){if(e.propertyName==="value"&&T6(m0)){var t=[];UD(t,m0,e,nv(e)),fD(lZ,t)}}function cZ(e,t,n){e==="focusin"?(DS(),I1=t,m0=n,I1.attachEvent("onpropertychange",yD)):e==="focusout"&&DS()}function uZ(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return T6(m0)}function dZ(e,t){if(e==="click")return T6(t)}function fZ(e,t){if(e==="input"||e==="change")return T6(t)}function hZ(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Br=typeof Object.is=="function"?Object.is:hZ;function p0(e,t){if(Br(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Y7.call(t,r)||!Br(e[r],t[r]))return!1}return!0}function NS(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function OS(e,t){var n=NS(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=NS(n)}}function ED(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ED(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function vD(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=S2(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=S2(e.document)}return t}function ov(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function gZ(e,t){var n=vD(t);t=e.focusedElem;var i=e.selectionRange;if(n!==t&&t&&t.ownerDocument&&ED(t.ownerDocument.documentElement,t)){if(i!==null&&ov(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!n.extend&&s>i&&(r=i,i=s,s=r),r=OS(t,s);var o=OS(t,i);r&&o&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),s>i?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var mZ=Ba&&"documentMode"in document&&11>=document.documentMode,bf=null,J7=null,x1=null,e3=!1;function PS(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;e3||bf==null||bf!==S2(i)||(i=bf,"selectionStart"in i&&ov(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),x1&&p0(x1,i)||(x1=i,i=H2(J7,"onSelect"),0<i.length&&(t=new _6("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=bf)))}function Yc(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var yf={animationend:Yc("Animation","AnimationEnd"),animationiteration:Yc("Animation","AnimationIteration"),animationstart:Yc("Animation","AnimationStart"),transitionrun:Yc("Transition","TransitionRun"),transitionstart:Yc("Transition","TransitionStart"),transitioncancel:Yc("Transition","TransitionCancel"),transitionend:Yc("Transition","TransitionEnd")},Oy={},_D={};Ba&&(_D=document.createElement("div").style,"AnimationEvent"in window||(delete yf.animationend.animation,delete yf.animationiteration.animation,delete yf.animationstart.animation),"TransitionEvent"in window||delete yf.transitionend.transition);function yd(e){if(Oy[e])return Oy[e];if(!yf[e])return e;var t=yf[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in _D)return Oy[e]=t[n];return e}var wD=yd("animationend"),TD=yd("animationiteration"),SD=yd("animationstart"),pZ=yd("transitionrun"),UZ=yd("transitionstart"),bZ=yd("transitioncancel"),ID=yd("transitionend"),xD=new Map,FS="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function oo(e,t){xD.set(e,t),Ud(t,[e])}var Zr=[],Ef=0,av=0;function S6(){for(var e=Ef,t=av=Ef=0;t<e;){var n=Zr[t];Zr[t++]=null;var i=Zr[t];Zr[t++]=null;var r=Zr[t];Zr[t++]=null;var s=Zr[t];if(Zr[t++]=null,i!==null&&r!==null){var o=i.pending;o===null?r.next=r:(r.next=o.next,o.next=r),i.pending=r}s!==0&&CD(n,r,s)}}function I6(e,t,n,i){Zr[Ef++]=e,Zr[Ef++]=t,Zr[Ef++]=n,Zr[Ef++]=i,av|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function lv(e,t,n,i){return I6(e,t,n,i),I2(e)}function fc(e,t){return I6(e,null,null,t),I2(e)}function CD(e,t,n){e.lanes|=n;var i=e.alternate;i!==null&&(i.lanes|=n);for(var r=!1,s=e.return;s!==null;)s.childLanes|=n,i=s.alternate,i!==null&&(i.childLanes|=n),s.tag===22&&(e=s.stateNode,e===null||e._visibility&1||(r=!0)),e=s,s=s.return;r&&t!==null&&e.tag===3&&(s=e.stateNode,r=31-Nr(n),s=s.hiddenUpdates,e=s[r],e===null?s[r]=[t]:e.push(t),t.lane=n|536870912)}function I2(e){if(50<B1)throw B1=0,_3=null,Error(ne(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var vf={},BS=new WeakMap;function ns(e,t){if(typeof e=="object"&&e!==null){var n=BS.get(e);return n!==void 0?n:(t={value:e,source:t,stack:bS(t)},BS.set(e,t),t)}return{value:e,source:t,stack:bS(t)}}var _f=[],wf=0,x2=null,C2=0,Jr=[],es=0,Iu=null,Ta=1,Sa="";function Jc(e,t){_f[wf++]=C2,_f[wf++]=x2,x2=e,C2=t}function AD(e,t,n){Jr[es++]=Ta,Jr[es++]=Sa,Jr[es++]=Iu,Iu=e;var i=Ta;e=Sa;var r=32-Nr(i)-1;i&=~(1<<r),n+=1;var s=32-Nr(t)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Ta=1<<32-Nr(t)+r|n<<r|i,Sa=s+e}else Ta=1<<s|n<<r|i,Sa=e}function cv(e){e.return!==null&&(Jc(e,1),AD(e,1,0))}function uv(e){for(;e===x2;)x2=_f[--wf],_f[wf]=null,C2=_f[--wf],_f[wf]=null;for(;e===Iu;)Iu=Jr[--es],Jr[es]=null,Sa=Jr[--es],Jr[es]=null,Ta=Jr[--es],Jr[es]=null}var Zi=null,yi=null,vt=!1,ks=null,So=!1,t3=Error(ne(519));function Hu(e){var t=Error(ne(418,""));throw U0(ns(t,e)),t3}function zS(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[Fi]=e,t[br]=i,n){case"dialog":tt("cancel",t),tt("close",t);break;case"iframe":case"object":case"embed":tt("load",t);break;case"video":case"audio":for(n=0;n<E0.length;n++)tt(E0[n],t);break;case"source":tt("error",t);break;case"img":case"image":case"link":tt("error",t),tt("load",t);break;case"details":tt("toggle",t);break;case"input":tt("invalid",t),lD(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),T2(t);break;case"select":tt("invalid",t);break;case"textarea":tt("invalid",t),uD(t,i.value,i.defaultValue,i.children),T2(t)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||i.suppressHydrationWarning===!0||sO(t.textContent,n)?(i.popover!=null&&(tt("beforetoggle",t),tt("toggle",t)),i.onScroll!=null&&tt("scroll",t),i.onScrollEnd!=null&&tt("scrollend",t),i.onClick!=null&&(t.onclick=L6),t=!0):t=!1,t||Hu(e)}function HS(e){for(Zi=e.return;Zi;)switch(Zi.tag){case 3:case 27:So=!0;return;case 5:case 13:So=!1;return;default:Zi=Zi.return}}function Ag(e){if(e!==Zi)return!1;if(!vt)return HS(e),vt=!0,!1;var t=!1,n;if((n=e.tag!==3&&e.tag!==27)&&((n=e.tag===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||A3(e.type,e.memoizedProps)),n=!n),n&&(t=!0),t&&yi&&Hu(e),HS(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ne(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(n=e.data,n==="/$"){if(t===0){yi=Vs(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++;e=e.nextSibling}yi=null}}else yi=Zi?Vs(e.stateNode.nextSibling):null;return!0}function wm(){yi=Zi=null,vt=!1}function U0(e){ks===null?ks=[e]:ks.push(e)}var C1=Error(ne(460)),MD=Error(ne(474)),n3={then:function(){}};function VS(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Rp(){}function RD(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Rp,Rp),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,e===C1?Error(ne(483)):e;default:if(typeof t.status=="string")t.then(Rp,Rp);else{if(e=Yt,e!==null&&100<e.shellSuspendCounter)throw Error(ne(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var r=t;r.status="fulfilled",r.value=i}},function(i){if(t.status==="pending"){var r=t;r.status="rejected",r.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,e===C1?Error(ne(483)):e}throw A1=t,C1}}var A1=null;function $S(){if(A1===null)throw Error(ne(459));var e=A1;return A1=null,e}var zf=null,b0=0;function kp(e){var t=b0;return b0+=1,zf===null&&(zf=[]),RD(zf,e,t)}function Mg(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Lp(e,t){throw t.$$typeof===sK?Error(ne(525)):(e=Object.prototype.toString.call(t),Error(ne(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function GS(e){var t=e._init;return t(e._payload)}function kD(e){function t(E,y){if(e){var v=E.deletions;v===null?(E.deletions=[y],E.flags|=16):v.push(y)}}function n(E,y){if(!e)return null;for(;y!==null;)t(E,y),y=y.sibling;return null}function i(E){for(var y=new Map;E!==null;)E.key!==null?y.set(E.key,E):y.set(E.index,E),E=E.sibling;return y}function r(E,y){return E=ql(E,y),E.index=0,E.sibling=null,E}function s(E,y,v){return E.index=v,e?(v=E.alternate,v!==null?(v=v.index,v<y?(E.flags|=33554434,y):v):(E.flags|=33554434,y)):(E.flags|=1048576,y)}function o(E){return e&&E.alternate===null&&(E.flags|=33554434),E}function a(E,y,v,_){return y===null||y.tag!==6?(y=Wy(v,E.mode,_),y.return=E,y):(y=r(y,v),y.return=E,y)}function l(E,y,v,_){var S=v.type;return S===gf?u(E,y,v.props.children,_,v.key):y!==null&&(y.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Sl&&GS(S)===y.type)?(y=r(y,v.props),Mg(y,v),y.return=E,y):(y=PU(v.type,v.key,v.props,null,E.mode,_),Mg(y,v),y.return=E,y)}function c(E,y,v,_){return y===null||y.tag!==4||y.stateNode.containerInfo!==v.containerInfo||y.stateNode.implementation!==v.implementation?(y=Ky(v,E.mode,_),y.return=E,y):(y=r(y,v.children||[]),y.return=E,y)}function u(E,y,v,_,S){return y===null||y.tag!==7?(y=Cu(v,E.mode,_,S),y.return=E,y):(y=r(y,v),y.return=E,y)}function d(E,y,v){if(typeof y=="string"&&y!==""||typeof y=="number"||typeof y=="bigint")return y=Wy(""+y,E.mode,v),y.return=E,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ip:return v=PU(y.type,y.key,y.props,null,E.mode,v),Mg(v,y),v.return=E,v;case t1:return y=Ky(y,E.mode,v),y.return=E,y;case Sl:var _=y._init;return y=_(y._payload),d(E,y,v)}if(i1(y)||Ig(y))return y=Cu(y,E.mode,v,null),y.return=E,y;if(typeof y.then=="function")return d(E,kp(y),v);if(y.$$typeof===wa)return d(E,Dp(E,y),v);Lp(E,y)}return null}function f(E,y,v,_){var S=y!==null?y.key:null;if(typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint")return S!==null?null:a(E,y,""+v,_);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ip:return v.key===S?l(E,y,v,_):null;case t1:return v.key===S?c(E,y,v,_):null;case Sl:return S=v._init,v=S(v._payload),f(E,y,v,_)}if(i1(v)||Ig(v))return S!==null?null:u(E,y,v,_,null);if(typeof v.then=="function")return f(E,y,kp(v),_);if(v.$$typeof===wa)return f(E,y,Dp(E,v),_);Lp(E,v)}return null}function h(E,y,v,_,S){if(typeof _=="string"&&_!==""||typeof _=="number"||typeof _=="bigint")return E=E.get(v)||null,a(y,E,""+_,S);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Ip:return E=E.get(_.key===null?v:_.key)||null,l(y,E,_,S);case t1:return E=E.get(_.key===null?v:_.key)||null,c(y,E,_,S);case Sl:var M=_._init;return _=M(_._payload),h(E,y,v,_,S)}if(i1(_)||Ig(_))return E=E.get(v)||null,u(y,E,_,S,null);if(typeof _.then=="function")return h(E,y,v,kp(_),S);if(_.$$typeof===wa)return h(E,y,v,Dp(y,_),S);Lp(y,_)}return null}function m(E,y,v,_){for(var S=null,M=null,w=y,T=y=0,A=null;w!==null&&T<v.length;T++){w.index>T?(A=w,w=null):A=w.sibling;var I=f(E,w,v[T],_);if(I===null){w===null&&(w=A);break}e&&w&&I.alternate===null&&t(E,w),y=s(I,y,T),M===null?S=I:M.sibling=I,M=I,w=A}if(T===v.length)return n(E,w),vt&&Jc(E,T),S;if(w===null){for(;T<v.length;T++)w=d(E,v[T],_),w!==null&&(y=s(w,y,T),M===null?S=w:M.sibling=w,M=w);return vt&&Jc(E,T),S}for(w=i(w);T<v.length;T++)A=h(w,E,T,v[T],_),A!==null&&(e&&A.alternate!==null&&w.delete(A.key===null?T:A.key),y=s(A,y,T),M===null?S=A:M.sibling=A,M=A);return e&&w.forEach(function(R){return t(E,R)}),vt&&Jc(E,T),S}function p(E,y,v,_){if(v==null)throw Error(ne(151));for(var S=null,M=null,w=y,T=y=0,A=null,I=v.next();w!==null&&!I.done;T++,I=v.next()){w.index>T?(A=w,w=null):A=w.sibling;var R=f(E,w,I.value,_);if(R===null){w===null&&(w=A);break}e&&w&&R.alternate===null&&t(E,w),y=s(R,y,T),M===null?S=R:M.sibling=R,M=R,w=A}if(I.done)return n(E,w),vt&&Jc(E,T),S;if(w===null){for(;!I.done;T++,I=v.next())I=d(E,I.value,_),I!==null&&(y=s(I,y,T),M===null?S=I:M.sibling=I,M=I);return vt&&Jc(E,T),S}for(w=i(w);!I.done;T++,I=v.next())I=h(w,E,T,I.value,_),I!==null&&(e&&I.alternate!==null&&w.delete(I.key===null?T:I.key),y=s(I,y,T),M===null?S=I:M.sibling=I,M=I);return e&&w.forEach(function(D){return t(E,D)}),vt&&Jc(E,T),S}function b(E,y,v,_){if(typeof v=="object"&&v!==null&&v.type===gf&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Ip:e:{for(var S=v.key;y!==null;){if(y.key===S){if(S=v.type,S===gf){if(y.tag===7){n(E,y.sibling),_=r(y,v.props.children),_.return=E,E=_;break e}}else if(y.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Sl&&GS(S)===y.type){n(E,y.sibling),_=r(y,v.props),Mg(_,v),_.return=E,E=_;break e}n(E,y);break}else t(E,y);y=y.sibling}v.type===gf?(_=Cu(v.props.children,E.mode,_,v.key),_.return=E,E=_):(_=PU(v.type,v.key,v.props,null,E.mode,_),Mg(_,v),_.return=E,E=_)}return o(E);case t1:e:{for(S=v.key;y!==null;){if(y.key===S)if(y.tag===4&&y.stateNode.containerInfo===v.containerInfo&&y.stateNode.implementation===v.implementation){n(E,y.sibling),_=r(y,v.children||[]),_.return=E,E=_;break e}else{n(E,y);break}else t(E,y);y=y.sibling}_=Ky(v,E.mode,_),_.return=E,E=_}return o(E);case Sl:return S=v._init,v=S(v._payload),b(E,y,v,_)}if(i1(v))return m(E,y,v,_);if(Ig(v)){if(S=Ig(v),typeof S!="function")throw Error(ne(150));return v=S.call(v),p(E,y,v,_)}if(typeof v.then=="function")return b(E,y,kp(v),_);if(v.$$typeof===wa)return b(E,y,Dp(E,v),_);Lp(E,v)}return typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint"?(v=""+v,y!==null&&y.tag===6?(n(E,y.sibling),_=r(y,v),_.return=E,E=_):(n(E,y),_=Wy(v,E.mode,_),_.return=E,E=_),o(E)):n(E,y)}return function(E,y,v,_){try{b0=0;var S=b(E,y,v,_);return zf=null,S}catch(w){if(w===C1)throw w;var M=ss(29,w,null,E.mode);return M.lanes=_,M.return=E,M}finally{}}}var Vu=kD(!0),LD=kD(!1),rh=jo(null),A2=jo(0);function XS(e,t){e=Va,ln(A2,e),ln(rh,t),Va=e|t.baseLanes}function i3(){ln(A2,Va),ln(rh,rh.current)}function dv(){Va=A2.current,ci(rh),ci(A2)}var ms=jo(null),No=null;function Rl(e){var t=e.alternate;ln(jn,jn.current&1),ln(ms,e),No===null&&(t===null||rh.current!==null||t.memoizedState!==null)&&(No=e)}function DD(e){if(e.tag===22){if(ln(jn,jn.current),ln(ms,e),No===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(No=e)}}else kl()}function kl(){ln(jn,jn.current),ln(ms,ms.current)}function Ia(e){ci(ms),No===e&&(No=null),ci(jn)}var jn=jo(0);function M2(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var yZ=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},EZ=Zn.unstable_scheduleCallback,vZ=Zn.unstable_NormalPriority,Xn={$$typeof:wa,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function fv(){return{controller:new yZ,data:new Map,refCount:0}}function Tm(e){e.refCount--,e.refCount===0&&EZ(vZ,function(){e.controller.abort()})}var M1=null,r3=0,sh=0,Hf=null;function _Z(e,t){if(M1===null){var n=M1=[];r3=0,sh=Nv(),Hf={status:"pending",value:void 0,then:function(i){n.push(i)}}}return r3++,t.then(jS,jS),t}function jS(){if(--r3===0&&M1!==null){Hf!==null&&(Hf.status="fulfilled");var e=M1;M1=null,sh=0,Hf=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function wZ(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var r=0;r<n.length;r++)(0,n[r])(t)},function(r){for(i.status="rejected",i.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),i}var YS=je.S;je.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&_Z(e,t),YS!==null&&YS(e,t)};var xu=jo(null);function hv(){var e=xu.current;return e!==null?e:Yt.pooledCache}function LU(e,t){t===null?ln(xu,xu.current):ln(xu,t.pool)}function ND(){var e=hv();return e===null?null:{parent:Xn._currentValue,pool:e}}var hc=0,Ke=null,Lt=null,Ln=null,R2=!1,Vf=!1,$u=!1,k2=0,y0=0,$f=null,TZ=0;function _n(){throw Error(ne(321))}function gv(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Br(e[n],t[n]))return!1;return!0}function mv(e,t,n,i,r,s){return hc=s,Ke=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,je.H=e===null||e.memoizedState===null?Ed:Oc,$u=!1,s=n(i,r),$u=!1,Vf&&(s=PD(t,n,i,r)),OD(e),s}function OD(e){je.H=Fo;var t=Lt!==null&&Lt.next!==null;if(hc=0,Ln=Lt=Ke=null,R2=!1,y0=0,$f=null,t)throw Error(ne(300));e===null||oi||(e=e.dependencies,e!==null&&N2(e)&&(oi=!0))}function PD(e,t,n,i){Ke=e;var r=0;do{if(Vf&&($f=null),y0=0,Vf=!1,25<=r)throw Error(ne(301));if(r+=1,Ln=Lt=null,e.updateQueue!=null){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}je.H=vd,s=t(n,i)}while(Vf);return s}function SZ(){var e=je.H,t=e.useState()[0];return t=typeof t.then=="function"?Sm(t):t,e=e.useState()[0],(Lt!==null?Lt.memoizedState:null)!==e&&(Ke.flags|=1024),t}function pv(){var e=k2!==0;return k2=0,e}function Uv(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function bv(e){if(R2){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}R2=!1}hc=0,Ln=Lt=Ke=null,Vf=!1,y0=k2=0,$f=null}function ar(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ln===null?Ke.memoizedState=Ln=e:Ln=Ln.next=e,Ln}function Pn(){if(Lt===null){var e=Ke.alternate;e=e!==null?e.memoizedState:null}else e=Lt.next;var t=Ln===null?Ke.memoizedState:Ln.next;if(t!==null)Ln=t,Lt=e;else{if(e===null)throw Ke.alternate===null?Error(ne(467)):Error(ne(310));Lt=e,e={memoizedState:Lt.memoizedState,baseState:Lt.baseState,baseQueue:Lt.baseQueue,queue:Lt.queue,next:null},Ln===null?Ke.memoizedState=Ln=e:Ln=Ln.next=e}return Ln}var x6;x6=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function Sm(e){var t=y0;return y0+=1,$f===null&&($f=[]),e=RD($f,e,t),t=Ke,(Ln===null?t.memoizedState:Ln.next)===null&&(t=t.alternate,je.H=t===null||t.memoizedState===null?Ed:Oc),e}function C6(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Sm(e);if(e.$$typeof===wa)return Bi(e)}throw Error(ne(438,String(e)))}function yv(e){var t=null,n=Ke.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var i=Ke.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(r){return r.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=x6(),Ke.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=aK;return t.index++,n}function za(e,t){return typeof t=="function"?t(e):t}function DU(e){var t=Pn();return Ev(t,Lt,e)}function Ev(e,t,n){var i=e.queue;if(i===null)throw Error(ne(311));i.lastRenderedReducer=n;var r=e.baseQueue,s=i.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}t.baseQueue=r=s,i.pending=null}if(s=e.baseState,r===null)e.memoizedState=s;else{t=r.next;var a=o=null,l=null,c=t,u=!1;do{var d=c.lane&-536870913;if(d!==c.lane?(dt&d)===d:(hc&d)===d){var f=c.revertLane;if(f===0)l!==null&&(l=l.next={lane:0,revertLane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),d===sh&&(u=!0);else if((hc&f)===f){c=c.next,f===sh&&(u=!0);continue}else d={lane:0,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(a=l=d,o=s):l=l.next=d,Ke.lanes|=f,mc|=f;d=c.action,$u&&n(s,d),s=c.hasEagerState?c.eagerState:n(s,d)}else f={lane:d,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(a=l=f,o=s):l=l.next=f,Ke.lanes|=d,mc|=d;c=c.next}while(c!==null&&c!==t);if(l===null?o=s:l.next=a,!Br(s,e.memoizedState)&&(oi=!0,u&&(n=Hf,n!==null)))throw n;e.memoizedState=s,e.baseState=o,e.baseQueue=l,i.lastRenderedState=s}return r===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function Py(e){var t=Pn(),n=t.queue;if(n===null)throw Error(ne(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,s=t.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=e(s,o.action),o=o.next;while(o!==r);Br(s,t.memoizedState)||(oi=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,i]}function FD(e,t,n){var i=Ke,r=Pn(),s=vt;if(s){if(n===void 0)throw Error(ne(407));n=n()}else n=t();var o=!Br((Lt||r).memoizedState,n);if(o&&(r.memoizedState=n,oi=!0),r=r.queue,vv(HD.bind(null,i,r,e),[e]),r.getSnapshot!==t||o||Ln!==null&&Ln.memoizedState.tag&1){if(i.flags|=2048,oh(9,zD.bind(null,i,r,n,t),{destroy:void 0},null),Yt===null)throw Error(ne(349));s||hc&60||BD(i,t,n)}return n}function BD(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ke.updateQueue,t===null?(t=x6(),Ke.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function zD(e,t,n,i){t.value=n,t.getSnapshot=i,VD(t)&&$D(e)}function HD(e,t,n){return n(function(){VD(t)&&$D(e)})}function VD(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Br(e,n)}catch{return!0}}function $D(e){var t=fc(e,2);t!==null&&Qi(t,e,2)}function s3(e){var t=ar();if(typeof e=="function"){var n=e;if(e=n(),$u){Fl(!0);try{n()}finally{Fl(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:za,lastRenderedState:e},t}function GD(e,t,n,i){return e.baseState=n,Ev(e,Lt,typeof i=="function"?i:za)}function IZ(e,t,n,i,r){if(M6(e))throw Error(ne(485));if(e=t.action,e!==null){var s={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(o){s.listeners.push(o)}};je.T!==null?n(!0):s.isTransition=!1,i(s),n=t.pending,n===null?(s.next=t.pending=s,XD(t,s)):(s.next=n.next,t.pending=n.next=s)}}function XD(e,t){var n=t.action,i=t.payload,r=e.state;if(t.isTransition){var s=je.T,o={};je.T=o;try{var a=n(r,i),l=je.S;l!==null&&l(o,a),WS(e,t,a)}catch(c){o3(e,t,c)}finally{je.T=s}}else try{s=n(r,i),WS(e,t,s)}catch(c){o3(e,t,c)}}function WS(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){KS(e,t,i)},function(i){return o3(e,t,i)}):KS(e,t,n)}function KS(e,t,n){t.status="fulfilled",t.value=n,jD(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,XD(e,n)))}function o3(e,t,n){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=n,jD(t),t=t.next;while(t!==i)}e.action=null}function jD(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function YD(e,t){return t}function WD(e,t){if(vt){var n=Yt.formState;if(n!==null){e:{var i=Ke;if(vt){if(yi){t:{for(var r=yi,s=So;r.nodeType!==8;){if(!s){r=null;break t}if(r=Vs(r.nextSibling),r===null){r=null;break t}}s=r.data,r=s==="F!"||s==="F"?r:null}if(r){yi=Vs(r.nextSibling),i=r.data==="F!";break e}}Hu(i)}i=!1}i&&(t=n[0])}}return n=ar(),n.memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:YD,lastRenderedState:t},n.queue=i,n=dN.bind(null,Ke,i),i.dispatch=n,i=s3(!1),s=Sv.bind(null,Ke,!1,i.queue),i=ar(),r={state:t,dispatch:null,action:e,pending:null},i.queue=r,n=IZ.bind(null,Ke,r,s,n),r.dispatch=n,i.memoizedState=e,[t,n,!1]}function KD(e){var t=Pn();return ZD(t,Lt,e)}function ZD(e,t,n){t=Ev(e,t,YD)[0],e=DU(za)[0],t=typeof t=="object"&&t!==null&&typeof t.then=="function"?Sm(t):t;var i=Pn(),r=i.queue,s=r.dispatch;return n!==i.memoizedState&&(Ke.flags|=2048,oh(9,xZ.bind(null,r,n),{destroy:void 0},null)),[t,s,e]}function xZ(e,t){e.action=t}function qD(e){var t=Pn(),n=Lt;if(n!==null)return ZD(t,n,e);Pn(),t=t.memoizedState,n=Pn();var i=n.queue.dispatch;return n.memoizedState=e,[t,i,!1]}function oh(e,t,n,i){return e={tag:e,create:t,inst:n,deps:i,next:null},t=Ke.updateQueue,t===null&&(t=x6(),Ke.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function QD(){return Pn().memoizedState}function NU(e,t,n,i){var r=ar();Ke.flags|=e,r.memoizedState=oh(1|t,n,{destroy:void 0},i===void 0?null:i)}function A6(e,t,n,i){var r=Pn();i=i===void 0?null:i;var s=r.memoizedState.inst;Lt!==null&&i!==null&&gv(i,Lt.memoizedState.deps)?r.memoizedState=oh(t,n,s,i):(Ke.flags|=e,r.memoizedState=oh(1|t,n,s,i))}function ZS(e,t){NU(8390656,8,e,t)}function vv(e,t){A6(2048,8,e,t)}function JD(e,t){return A6(4,2,e,t)}function eN(e,t){return A6(4,4,e,t)}function tN(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function nN(e,t,n){n=n!=null?n.concat([e]):null,A6(4,4,tN.bind(null,t,e),n)}function _v(){}function iN(e,t){var n=Pn();t=t===void 0?null:t;var i=n.memoizedState;return t!==null&&gv(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function rN(e,t){var n=Pn();t=t===void 0?null:t;var i=n.memoizedState;if(t!==null&&gv(t,i[1]))return i[0];if(i=e(),$u){Fl(!0);try{e()}finally{Fl(!1)}}return n.memoizedState=[i,t],i}function wv(e,t,n){return n===void 0||hc&1073741824?e.memoizedState=t:(e.memoizedState=n,e=jN(),Ke.lanes|=e,mc|=e,n)}function sN(e,t,n,i){return Br(n,t)?n:rh.current!==null?(e=wv(e,n,i),Br(e,t)||(oi=!0),e):hc&42?(e=jN(),Ke.lanes|=e,mc|=e,t):(oi=!0,e.memoizedState=n)}function oN(e,t,n,i,r){var s=qt.p;qt.p=s!==0&&8>s?s:8;var o=je.T,a={};je.T=a,Sv(e,!1,t,n);try{var l=r(),c=je.S;if(c!==null&&c(a,l),l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=wZ(l,i);R1(e,t,u,Or(e))}else R1(e,t,i,Or(e))}catch(d){R1(e,t,{then:function(){},status:"rejected",reason:d},Or())}finally{qt.p=s,je.T=o}}function CZ(){}function a3(e,t,n,i){if(e.tag!==5)throw Error(ne(476));var r=aN(e).queue;oN(e,r,t,Su,n===null?CZ:function(){return lN(e),n(i)})}function aN(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Su,baseState:Su,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:za,lastRenderedState:Su},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:za,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function lN(e){var t=aN(e).next.queue;R1(e,t,{},Or())}function Tv(){return Bi(w0)}function cN(){return Pn().memoizedState}function uN(){return Pn().memoizedState}function AZ(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Or();e=Kl(n);var i=Zl(t,e,n);i!==null&&(Qi(i,t,n),L1(i,t,n)),t={cache:fv()},e.payload=t;return}t=t.return}}function MZ(e,t,n){var i=Or();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},M6(e)?fN(t,n):(n=lv(e,t,n,i),n!==null&&(Qi(n,e,i),hN(n,t,i)))}function dN(e,t,n){var i=Or();R1(e,t,n,i)}function R1(e,t,n,i){var r={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(M6(e))fN(t,r);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,Br(a,o))return I6(e,t,r,0),Yt===null&&S6(),!1}catch{}finally{}if(n=lv(e,t,r,i),n!==null)return Qi(n,e,i),hN(n,t,i),!0}return!1}function Sv(e,t,n,i){if(i={lane:2,revertLane:Nv(),action:i,hasEagerState:!1,eagerState:null,next:null},M6(e)){if(t)throw Error(ne(479))}else t=lv(e,n,i,2),t!==null&&Qi(t,e,2)}function M6(e){var t=e.alternate;return e===Ke||t!==null&&t===Ke}function fN(e,t){Vf=R2=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function hN(e,t,n){if(n&4194176){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,tD(e,n)}}var Fo={readContext:Bi,use:C6,useCallback:_n,useContext:_n,useEffect:_n,useImperativeHandle:_n,useLayoutEffect:_n,useInsertionEffect:_n,useMemo:_n,useReducer:_n,useRef:_n,useState:_n,useDebugValue:_n,useDeferredValue:_n,useTransition:_n,useSyncExternalStore:_n,useId:_n};Fo.useCacheRefresh=_n;Fo.useMemoCache=_n;Fo.useHostTransitionStatus=_n;Fo.useFormState=_n;Fo.useActionState=_n;Fo.useOptimistic=_n;var Ed={readContext:Bi,use:C6,useCallback:function(e,t){return ar().memoizedState=[e,t===void 0?null:t],e},useContext:Bi,useEffect:ZS,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,NU(4194308,4,tN.bind(null,t,e),n)},useLayoutEffect:function(e,t){return NU(4194308,4,e,t)},useInsertionEffect:function(e,t){NU(4,2,e,t)},useMemo:function(e,t){var n=ar();t=t===void 0?null:t;var i=e();if($u){Fl(!0);try{e()}finally{Fl(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=ar();if(n!==void 0){var r=n(t);if($u){Fl(!0);try{n(t)}finally{Fl(!1)}}}else r=t;return i.memoizedState=i.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},i.queue=e,e=e.dispatch=MZ.bind(null,Ke,e),[i.memoizedState,e]},useRef:function(e){var t=ar();return e={current:e},t.memoizedState=e},useState:function(e){e=s3(e);var t=e.queue,n=dN.bind(null,Ke,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:_v,useDeferredValue:function(e,t){var n=ar();return wv(n,e,t)},useTransition:function(){var e=s3(!1);return e=oN.bind(null,Ke,e.queue,!0,!1),ar().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=Ke,r=ar();if(vt){if(n===void 0)throw Error(ne(407));n=n()}else{if(n=t(),Yt===null)throw Error(ne(349));dt&60||BD(i,t,n)}r.memoizedState=n;var s={value:n,getSnapshot:t};return r.queue=s,ZS(HD.bind(null,i,s,e),[e]),i.flags|=2048,oh(9,zD.bind(null,i,s,n,t),{destroy:void 0},null),n},useId:function(){var e=ar(),t=Yt.identifierPrefix;if(vt){var n=Sa,i=Ta;n=(i&~(1<<32-Nr(i)-1)).toString(32)+n,t=":"+t+"R"+n,n=k2++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=TZ++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},useCacheRefresh:function(){return ar().memoizedState=AZ.bind(null,Ke)}};Ed.useMemoCache=yv;Ed.useHostTransitionStatus=Tv;Ed.useFormState=WD;Ed.useActionState=WD;Ed.useOptimistic=function(e){var t=ar();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Sv.bind(null,Ke,!0,n),n.dispatch=t,[e,t]};var Oc={readContext:Bi,use:C6,useCallback:iN,useContext:Bi,useEffect:vv,useImperativeHandle:nN,useInsertionEffect:JD,useLayoutEffect:eN,useMemo:rN,useReducer:DU,useRef:QD,useState:function(){return DU(za)},useDebugValue:_v,useDeferredValue:function(e,t){var n=Pn();return sN(n,Lt.memoizedState,e,t)},useTransition:function(){var e=DU(za)[0],t=Pn().memoizedState;return[typeof e=="boolean"?e:Sm(e),t]},useSyncExternalStore:FD,useId:cN};Oc.useCacheRefresh=uN;Oc.useMemoCache=yv;Oc.useHostTransitionStatus=Tv;Oc.useFormState=KD;Oc.useActionState=KD;Oc.useOptimistic=function(e,t){var n=Pn();return GD(n,Lt,e,t)};var vd={readContext:Bi,use:C6,useCallback:iN,useContext:Bi,useEffect:vv,useImperativeHandle:nN,useInsertionEffect:JD,useLayoutEffect:eN,useMemo:rN,useReducer:Py,useRef:QD,useState:function(){return Py(za)},useDebugValue:_v,useDeferredValue:function(e,t){var n=Pn();return Lt===null?wv(n,e,t):sN(n,Lt.memoizedState,e,t)},useTransition:function(){var e=Py(za)[0],t=Pn().memoizedState;return[typeof e=="boolean"?e:Sm(e),t]},useSyncExternalStore:FD,useId:cN};vd.useCacheRefresh=uN;vd.useMemoCache=yv;vd.useHostTransitionStatus=Tv;vd.useFormState=qD;vd.useActionState=qD;vd.useOptimistic=function(e,t){var n=Pn();return Lt!==null?GD(n,Lt,e,t):(n.baseState=e,[e,n.queue.dispatch])};function Fy(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:Qt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var l3={isMounted:function(e){return(e=e._reactInternals)?$h(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=Or(),r=Kl(i);r.payload=t,n!=null&&(r.callback=n),t=Zl(e,r,i),t!==null&&(Qi(t,e,i),L1(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=Or(),r=Kl(i);r.tag=1,r.payload=t,n!=null&&(r.callback=n),t=Zl(e,r,i),t!==null&&(Qi(t,e,i),L1(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Or(),i=Kl(n);i.tag=2,t!=null&&(i.callback=t),t=Zl(e,i,n),t!==null&&(Qi(t,e,n),L1(t,e,n))}};function qS(e,t,n,i,r,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,s,o):t.prototype&&t.prototype.isPureReactComponent?!p0(n,i)||!p0(r,s):!0}function QS(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&l3.enqueueReplaceState(t,t.state,null)}function Gu(e,t){var n=t;if("ref"in t){n={};for(var i in t)i!=="ref"&&(n[i]=t[i])}if(e=e.defaultProps){n===t&&(n=Qt({},n));for(var r in e)n[r]===void 0&&(n[r]=e[r])}return n}var L2=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function gN(e){L2(e)}function mN(e){console.error(e)}function pN(e){L2(e)}function D2(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function JS(e,t,n){try{var i=e.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function c3(e,t,n){return n=Kl(n),n.tag=3,n.payload={element:null},n.callback=function(){D2(e,t)},n}function UN(e){return e=Kl(e),e.tag=3,e}function bN(e,t,n,i){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var s=i.value;e.payload=function(){return r(s)},e.callback=function(){JS(t,n,i)}}var o=n.stateNode;o!==null&&typeof o.componentDidCatch=="function"&&(e.callback=function(){JS(t,n,i),typeof r!="function"&&(Ql===null?Ql=new Set([this]):Ql.add(this));var a=i.stack;this.componentDidCatch(i.value,{componentStack:a!==null?a:""})})}function RZ(e,t,n,i,r){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=n.alternate,t!==null&&Im(t,n,r,!0),n=ms.current,n!==null){switch(n.tag){case 13:return No===null?T3():n.alternate===null&&yn===0&&(yn=3),n.flags&=-257,n.flags|=65536,n.lanes=r,i===n3?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([i]):t.add(i),qy(e,i,r)),!1;case 22:return n.flags|=65536,i===n3?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([i]):n.add(i)),qy(e,i,r)),!1}throw Error(ne(435,n.tag))}return qy(e,i,r),T3(),!1}if(vt)return t=ms.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=r,i!==t3&&(e=Error(ne(422),{cause:i}),U0(ns(e,n)))):(i!==t3&&(t=Error(ne(423),{cause:i}),U0(ns(t,n))),e=e.current.alternate,e.flags|=65536,r&=-r,e.lanes|=r,i=ns(i,n),r=c3(e.stateNode,i,r),Gy(e,r),yn!==4&&(yn=2)),!1;var s=Error(ne(520),{cause:i});if(s=ns(s,n),P1===null?P1=[s]:P1.push(s),yn!==4&&(yn=2),t===null)return!0;i=ns(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=r&-r,n.lanes|=e,e=c3(n.stateNode,i,e),Gy(n,e),!1;case 1:if(t=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(Ql===null||!Ql.has(s))))return n.flags|=65536,r&=-r,n.lanes|=r,r=UN(r),bN(r,e,n,i),Gy(n,r),!1}n=n.return}while(n!==null);return!1}var yN=Error(ne(461)),oi=!1;function mi(e,t,n,i){t.child=e===null?LD(t,null,n,i):Vu(t,e.child,n,i)}function eI(e,t,n,i,r){n=n.render;var s=t.ref;if("ref"in i){var o={};for(var a in i)a!=="ref"&&(o[a]=i[a])}else o=i;return Xu(t),i=mv(e,t,n,o,s,r),a=pv(),e!==null&&!oi?(Uv(e,t,r),Ha(e,t,r)):(vt&&a&&cv(t),t.flags|=1,mi(e,t,i,r),t.child)}function tI(e,t,n,i,r){if(e===null){var s=n.type;return typeof s=="function"&&!Mv(s)&&s.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=s,EN(e,t,s,i,r)):(e=PU(n.type,null,i,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!Iv(e,r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:p0,n(o,i)&&e.ref===t.ref)return Ha(e,t,r)}return t.flags|=1,e=ql(s,i),e.ref=t.ref,e.return=t,t.child=e}function EN(e,t,n,i,r){if(e!==null){var s=e.memoizedProps;if(p0(s,i)&&e.ref===t.ref)if(oi=!1,t.pendingProps=i=s,Iv(e,r))e.flags&131072&&(oi=!0);else return t.lanes=e.lanes,Ha(e,t,r)}return u3(e,t,n,i,r)}function vN(e,t,n){var i=t.pendingProps,r=i.children,s=(t.stateNode._pendingVisibility&2)!==0,o=e!==null?e.memoizedState:null;if(k1(e,t),i.mode==="hidden"||s){if(t.flags&128){if(i=o!==null?o.baseLanes|n:n,e!==null){for(r=t.child=e.child,s=0;r!==null;)s=s|r.lanes|r.childLanes,r=r.sibling;t.childLanes=s&~i}else t.childLanes=0,t.child=null;return nI(e,t,i,n)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&LU(t,o!==null?o.cachePool:null),o!==null?XS(t,o):i3(),DD(t);else return t.lanes=t.childLanes=536870912,nI(e,t,o!==null?o.baseLanes|n:n,n)}else o!==null?(LU(t,o.cachePool),XS(t,o),kl(),t.memoizedState=null):(e!==null&&LU(t,null),i3(),kl());return mi(e,t,r,n),t.child}function nI(e,t,n,i){var r=hv();return r=r===null?null:{parent:Xn._currentValue,pool:r},t.memoizedState={baseLanes:n,cachePool:r},e!==null&&LU(t,null),i3(),DD(t),e!==null&&Im(e,t,i,!0),null}function k1(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=2097664);else{if(typeof n!="function"&&typeof n!="object")throw Error(ne(284));(e===null||e.ref!==n)&&(t.flags|=2097664)}}function u3(e,t,n,i,r){return Xu(t),n=mv(e,t,n,i,void 0,r),i=pv(),e!==null&&!oi?(Uv(e,t,r),Ha(e,t,r)):(vt&&i&&cv(t),t.flags|=1,mi(e,t,n,r),t.child)}function iI(e,t,n,i,r,s){return Xu(t),t.updateQueue=null,n=PD(t,i,n,r),OD(e),i=pv(),e!==null&&!oi?(Uv(e,t,s),Ha(e,t,s)):(vt&&i&&cv(t),t.flags|=1,mi(e,t,n,s),t.child)}function rI(e,t,n,i,r){if(Xu(t),t.stateNode===null){var s=vf,o=n.contextType;typeof o=="object"&&o!==null&&(s=Bi(o)),s=new n(i,s),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=l3,t.stateNode=s,s._reactInternals=t,s=t.stateNode,s.props=i,s.state=t.memoizedState,s.refs={},xv(t),o=n.contextType,s.context=typeof o=="object"&&o!==null?Bi(o):vf,s.state=t.memoizedState,o=n.getDerivedStateFromProps,typeof o=="function"&&(Fy(t,n,o,i),s.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(o=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),o!==s.state&&l3.enqueueReplaceState(s,s.state,null),N1(t,i,s,r),D1(),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){s=t.stateNode;var a=t.memoizedProps,l=Gu(n,a);s.props=l;var c=s.context,u=n.contextType;o=vf,typeof u=="object"&&u!==null&&(o=Bi(u));var d=n.getDerivedStateFromProps;u=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function",a=t.pendingProps!==a,u||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a||c!==o)&&QS(t,s,i,o),Il=!1;var f=t.memoizedState;s.state=f,N1(t,i,s,r),D1(),c=t.memoizedState,a||f!==c||Il?(typeof d=="function"&&(Fy(t,n,d,i),c=t.memoizedState),(l=Il||qS(t,n,l,i,f,c,o))?(u||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=c),s.props=i,s.state=c,s.context=o,i=l):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{s=t.stateNode,p3(e,t),o=t.memoizedProps,u=Gu(n,o),s.props=u,d=t.pendingProps,f=s.context,c=n.contextType,l=vf,typeof c=="object"&&c!==null&&(l=Bi(c)),a=n.getDerivedStateFromProps,(c=typeof a=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==d||f!==l)&&QS(t,s,i,l),Il=!1,f=t.memoizedState,s.state=f,N1(t,i,s,r),D1();var h=t.memoizedState;o!==d||f!==h||Il||e!==null&&e.dependencies!==null&&N2(e.dependencies)?(typeof a=="function"&&(Fy(t,n,a,i),h=t.memoizedState),(u=Il||qS(t,n,u,i,f,h,l)||e!==null&&e.dependencies!==null&&N2(e.dependencies))?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,h,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,h,l)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=h),s.props=i,s.state=h,s.context=l,i=u):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),i=!1)}return s=i,k1(e,t),i=(t.flags&128)!==0,s||i?(s=t.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:s.render(),t.flags|=1,e!==null&&i?(t.child=Vu(t,e.child,null,r),t.child=Vu(t,null,n,r)):mi(e,t,n,r),t.memoizedState=s.state,e=t.child):e=Ha(e,t,r),e}function sI(e,t,n,i){return wm(),t.flags|=256,mi(e,t,n,i),t.child}var By={dehydrated:null,treeContext:null,retryLane:0};function zy(e){return{baseLanes:e,cachePool:ND()}}function Hy(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=os),e}function _N(e,t,n){var i=t.pendingProps,r=!1,s=(t.flags&128)!==0,o;if((o=s)||(o=e!==null&&e.memoizedState===null?!1:(jn.current&2)!==0),o&&(r=!0,t.flags&=-129),o=(t.flags&32)!==0,t.flags&=-33,e===null){if(vt){if(r?Rl(t):kl(),vt){var a=yi,l;if(l=a){e:{for(l=a,a=So;l.nodeType!==8;){if(!a){a=null;break e}if(l=Vs(l.nextSibling),l===null){a=null;break e}}a=l}a!==null?(t.memoizedState={dehydrated:a,treeContext:Iu!==null?{id:Ta,overflow:Sa}:null,retryLane:536870912},l=ss(18,null,null,0),l.stateNode=a,l.return=t,t.child=l,Zi=t,yi=null,l=!0):l=!1}l||Hu(t)}if(a=t.memoizedState,a!==null&&(a=a.dehydrated,a!==null))return a.data==="$!"?t.lanes=16:t.lanes=536870912,null;Ia(t)}return a=i.children,i=i.fallback,r?(kl(),r=t.mode,a=f3({mode:"hidden",children:a},r),i=Cu(i,r,n,null),a.return=t,i.return=t,a.sibling=i,t.child=a,r=t.child,r.memoizedState=zy(n),r.childLanes=Hy(e,o,n),t.memoizedState=By,i):(Rl(t),d3(t,a))}if(l=e.memoizedState,l!==null&&(a=l.dehydrated,a!==null)){if(s)t.flags&256?(Rl(t),t.flags&=-257,t=Vy(e,t,n)):t.memoizedState!==null?(kl(),t.child=e.child,t.flags|=128,t=null):(kl(),r=i.fallback,a=t.mode,i=f3({mode:"visible",children:i.children},a),r=Cu(r,a,n,null),r.flags|=2,i.return=t,r.return=t,i.sibling=r,t.child=i,Vu(t,e.child,null,n),i=t.child,i.memoizedState=zy(n),i.childLanes=Hy(e,o,n),t.memoizedState=By,t=r);else if(Rl(t),a.data==="$!"){if(o=a.nextSibling&&a.nextSibling.dataset,o)var c=o.dgst;o=c,i=Error(ne(419)),i.stack="",i.digest=o,U0({value:i,source:null,stack:null}),t=Vy(e,t,n)}else if(oi||Im(e,t,n,!1),o=(n&e.childLanes)!==0,oi||o){if(o=Yt,o!==null){if(i=n&-n,i&42)i=1;else switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=64;break;case 268435456:i=134217728;break;default:i=0}if(i=i&(o.suspendedLanes|n)?0:i,i!==0&&i!==l.retryLane)throw l.retryLane=i,fc(e,i),Qi(o,e,i),yN}a.data==="$?"||T3(),t=Vy(e,t,n)}else a.data==="$?"?(t.flags|=128,t.child=e.child,t=jZ.bind(null,e),a._reactRetry=t,t=null):(e=l.treeContext,yi=Vs(a.nextSibling),Zi=t,vt=!0,ks=null,So=!1,e!==null&&(Jr[es++]=Ta,Jr[es++]=Sa,Jr[es++]=Iu,Ta=e.id,Sa=e.overflow,Iu=t),t=d3(t,i.children),t.flags|=4096);return t}return r?(kl(),r=i.fallback,a=t.mode,l=e.child,c=l.sibling,i=ql(l,{mode:"hidden",children:i.children}),i.subtreeFlags=l.subtreeFlags&31457280,c!==null?r=ql(c,r):(r=Cu(r,a,n,null),r.flags|=2),r.return=t,i.return=t,i.sibling=r,t.child=i,i=r,r=t.child,a=e.child.memoizedState,a===null?a=zy(n):(l=a.cachePool,l!==null?(c=Xn._currentValue,l=l.parent!==c?{parent:c,pool:c}:l):l=ND(),a={baseLanes:a.baseLanes|n,cachePool:l}),r.memoizedState=a,r.childLanes=Hy(e,o,n),t.memoizedState=By,i):(Rl(t),n=e.child,e=n.sibling,n=ql(n,{mode:"visible",children:i.children}),n.return=t,n.sibling=null,e!==null&&(o=t.deletions,o===null?(t.deletions=[e],t.flags|=16):o.push(e)),t.child=n,t.memoizedState=null,n)}function d3(e,t){return t=f3({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function f3(e,t){return GN(e,t,0,null)}function Vy(e,t,n){return Vu(t,e.child,null,n),e=d3(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function oI(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),g3(e.return,t,n)}function $y(e,t,n,i,r){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function wN(e,t,n){var i=t.pendingProps,r=i.revealOrder,s=i.tail;if(mi(e,t,i.children,n),i=jn.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&oI(e,n,t);else if(e.tag===19)oI(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}switch(ln(jn,i),r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&M2(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),$y(t,!1,r,n,s);break;case"backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&M2(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}$y(t,!0,n,null,s);break;case"together":$y(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ha(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),mc|=t.lanes,!(n&t.childLanes))if(e!==null){if(Im(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(ne(153));if(t.child!==null){for(e=t.child,n=ql(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ql(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Iv(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&N2(e)))}function kZ(e,t,n){switch(t.tag){case 3:v2(t,t.stateNode.containerInfo),Ll(t,Xn,e.memoizedState.cache),wm();break;case 27:case 5:j7(t);break;case 4:v2(t,t.stateNode.containerInfo);break;case 10:Ll(t,t.type,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(Rl(t),t.flags|=128,null):n&t.child.childLanes?_N(e,t,n):(Rl(t),e=Ha(e,t,n),e!==null?e.sibling:null);Rl(t);break;case 19:var r=(e.flags&128)!==0;if(i=(n&t.childLanes)!==0,i||(Im(e,t,n,!1),i=(n&t.childLanes)!==0),r){if(i)return wN(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),ln(jn,jn.current),i)break;return null;case 22:case 23:return t.lanes=0,vN(e,t,n);case 24:Ll(t,Xn,e.memoizedState.cache)}return Ha(e,t,n)}function TN(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)oi=!0;else{if(!Iv(e,n)&&!(t.flags&128))return oi=!1,kZ(e,t,n);oi=!!(e.flags&131072)}else oi=!1,vt&&t.flags&1048576&&AD(t,C2,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var i=t.elementType,r=i._init;if(i=r(i._payload),t.type=i,typeof i=="function")Mv(i)?(e=Gu(i,e),t.tag=1,t=rI(null,t,i,e,n)):(t.tag=0,t=u3(null,t,i,e,n));else{if(i!=null){if(r=i.$$typeof,r===q4){t.tag=11,t=eI(null,t,i,e,n);break e}else if(r===Q4){t.tag=14,t=tI(null,t,i,e,n);break e}}throw t=G7(i)||i,Error(ne(306,t,""))}}return t;case 0:return u3(e,t,t.type,t.pendingProps,n);case 1:return i=t.type,r=Gu(i,t.pendingProps),rI(e,t,i,r,n);case 3:e:{if(v2(t,t.stateNode.containerInfo),e===null)throw Error(ne(387));var s=t.pendingProps;r=t.memoizedState,i=r.element,p3(e,t),N1(t,s,null,n);var o=t.memoizedState;if(s=o.cache,Ll(t,Xn,s),s!==r.cache&&m3(t,[Xn],n,!0),D1(),s=o.element,r.isDehydrated)if(r={element:s,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){t=sI(e,t,s,n);break e}else if(s!==i){i=ns(Error(ne(424)),t),U0(i),t=sI(e,t,s,n);break e}else for(yi=Vs(t.stateNode.containerInfo.firstChild),Zi=t,vt=!0,ks=null,So=!0,n=LD(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(wm(),s===i){t=Ha(e,t,n);break e}mi(e,t,s,n)}t=t.child}return t;case 26:return k1(e,t),e===null?(n=TI(t.type,null,t.pendingProps,null))?t.memoizedState=n:vt||(n=t.type,e=t.pendingProps,i=V2(Wl.current).createElement(n),i[Fi]=t,i[br]=e,vi(i,n,e),ri(i),t.stateNode=i):t.memoizedState=TI(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return j7(t),e===null&&vt&&(i=t.stateNode=lO(t.type,t.pendingProps,Wl.current),Zi=t,So=!0,yi=Vs(i.firstChild)),i=t.pendingProps.children,e!==null||vt?mi(e,t,i,n):t.child=Vu(t,null,i,n),k1(e,t),t.child;case 5:return e===null&&vt&&((r=i=yi)&&(i=lq(i,t.type,t.pendingProps,So),i!==null?(t.stateNode=i,Zi=t,yi=Vs(i.firstChild),So=!1,r=!0):r=!1),r||Hu(t)),j7(t),r=t.type,s=t.pendingProps,o=e!==null?e.memoizedProps:null,i=s.children,A3(r,s)?i=null:o!==null&&A3(r,o)&&(t.flags|=32),t.memoizedState!==null&&(r=mv(e,t,SZ,null,null,n),w0._currentValue=r),k1(e,t),mi(e,t,i,n),t.child;case 6:return e===null&&vt&&((e=n=yi)&&(n=cq(n,t.pendingProps,So),n!==null?(t.stateNode=n,Zi=t,yi=null,e=!0):e=!1),e||Hu(t)),null;case 13:return _N(e,t,n);case 4:return v2(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Vu(t,null,i,n):mi(e,t,i,n),t.child;case 11:return eI(e,t,t.type,t.pendingProps,n);case 7:return mi(e,t,t.pendingProps,n),t.child;case 8:return mi(e,t,t.pendingProps.children,n),t.child;case 12:return mi(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,Ll(t,t.type,i.value),mi(e,t,i.children,n),t.child;case 9:return r=t.type._context,i=t.pendingProps.children,Xu(t),r=Bi(r),i=i(r),t.flags|=1,mi(e,t,i,n),t.child;case 14:return tI(e,t,t.type,t.pendingProps,n);case 15:return EN(e,t,t.type,t.pendingProps,n);case 19:return wN(e,t,n);case 22:return vN(e,t,n);case 24:return Xu(t),i=Bi(Xn),e===null?(r=hv(),r===null&&(r=Yt,s=fv(),r.pooledCache=s,s.refCount++,s!==null&&(r.pooledCacheLanes|=n),r=s),t.memoizedState={parent:i,cache:r},xv(t),Ll(t,Xn,r)):(e.lanes&n&&(p3(e,t),N1(t,null,null,n),D1()),r=e.memoizedState,s=t.memoizedState,r.parent!==i?(r={parent:i,cache:i},t.memoizedState=r,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=r),Ll(t,Xn,i)):(i=s.cache,Ll(t,Xn,i),i!==r.cache&&m3(t,[Xn],n,!0))),mi(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(ne(156,t.tag))}var h3=jo(null),_d=null,xa=null;function Ll(e,t,n){ln(h3,t._currentValue),t._currentValue=n}function Ma(e){e._currentValue=h3.current,ci(h3)}function g3(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function m3(e,t,n,i){var r=e.child;for(r!==null&&(r.return=e);r!==null;){var s=r.dependencies;if(s!==null){var o=r.child;s=s.firstContext;e:for(;s!==null;){var a=s;s=r;for(var l=0;l<t.length;l++)if(a.context===t[l]){s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),g3(s.return,n,e),i||(o=null);break e}s=a.next}}else if(r.tag===18){if(o=r.return,o===null)throw Error(ne(341));o.lanes|=n,s=o.alternate,s!==null&&(s.lanes|=n),g3(o,n,e),o=null}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===e){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}}function Im(e,t,n,i){e=null;for(var r=t,s=!1;r!==null;){if(!s){if(r.flags&524288)s=!0;else if(r.flags&262144)break}if(r.tag===10){var o=r.alternate;if(o===null)throw Error(ne(387));if(o=o.memoizedProps,o!==null){var a=r.type;Br(r.pendingProps.value,o.value)||(e!==null?e.push(a):e=[a])}}else if(r===E2.current){if(o=r.alternate,o===null)throw Error(ne(387));o.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(e!==null?e.push(w0):e=[w0])}r=r.return}e!==null&&m3(t,e,n,i),t.flags|=262144}function N2(e){for(e=e.firstContext;e!==null;){if(!Br(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Xu(e){_d=e,xa=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Bi(e){return SN(_d,e)}function Dp(e,t){return _d===null&&Xu(e),SN(e,t)}function SN(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},xa===null){if(e===null)throw Error(ne(308));xa=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else xa=xa.next=t;return n}var Il=!1;function xv(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function p3(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Kl(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Zl(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,fn&2){var r=i.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),i.pending=t,t=I2(e),CD(e,null,n),t}return I6(e,i,t,n),I2(e)}function L1(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194176)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,tD(e,n)}}function Gy(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=t:s=s.next=t}else r=s=t;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,callbacks:i.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var U3=!1;function D1(){if(U3){var e=Hf;if(e!==null)throw e}}function N1(e,t,n,i){U3=!1;var r=e.updateQueue;Il=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=e.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,u=c=l=null,a=s;do{var f=a.lane&-536870913,h=f!==a.lane;if(h?(dt&f)===f:(i&f)===f){f!==0&&f===sh&&(U3=!0),u!==null&&(u=u.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});e:{var m=e,p=a;f=t;var b=n;switch(p.tag){case 1:if(m=p.payload,typeof m=="function"){d=m.call(b,d,f);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=p.payload,f=typeof m=="function"?m.call(b,d,f):m,f==null)break e;d=Qt({},d,f);break e;case 2:Il=!0}}f=a.callback,f!==null&&(e.flags|=64,h&&(e.flags|=8192),h=r.callbacks,h===null?r.callbacks=[f]:h.push(f))}else h={lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=h,l=d):u=u.next=h,o|=f;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;h=a,a=h.next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}while(!0);u===null&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,s===null&&(r.shared.lanes=0),mc|=o,e.lanes=o,e.memoizedState=d}}function IN(e,t){if(typeof e!="function")throw Error(ne(191,e));e.call(t)}function xN(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)IN(n[e],t)}function xm(e,t){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var r=i.next;n=r;do{if((n.tag&e)===e){i=void 0;var s=n.create,o=n.inst;i=s(),o.destroy=i}n=n.next}while(n!==r)}}catch(a){Ft(t,t.return,a)}}function gc(e,t,n){try{var i=t.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var s=r.next;i=s;do{if((i.tag&e)===e){var o=i.inst,a=o.destroy;if(a!==void 0){o.destroy=void 0,r=t;var l=n;try{a()}catch(c){Ft(r,l,c)}}}i=i.next}while(i!==s)}}catch(c){Ft(t,t.return,c)}}function CN(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{xN(t,n)}catch(i){Ft(e,e.return,i)}}}function AN(e,t,n){n.props=Gu(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){Ft(e,t,i)}}function hu(e,t){try{var n=e.ref;if(n!==null){var i=e.stateNode;switch(e.tag){case 26:case 27:case 5:var r=i;break;default:r=i}typeof n=="function"?e.refCleanup=n(r):n.current=r}}catch(s){Ft(e,t,s)}}function Cr(e,t){var n=e.ref,i=e.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(r){Ft(e,t,r)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){Ft(e,t,r)}else n.current=null}function MN(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(r){Ft(e,e.return,r)}}function aI(e,t,n){try{var i=e.stateNode;iq(i,e.type,n,t),i[br]=t}catch(r){Ft(e,e.return,r)}}function RN(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27||e.tag===4}function Xy(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||RN(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==27&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function b3(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=L6));else if(i!==4&&i!==27&&(e=e.child,e!==null))for(b3(e,t,n),e=e.sibling;e!==null;)b3(e,t,n),e=e.sibling}function O2(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&i!==27&&(e=e.child,e!==null))for(O2(e,t,n),e=e.sibling;e!==null;)O2(e,t,n),e=e.sibling}var pa=!1,bn=!1,jy=!1,lI=typeof WeakSet=="function"?WeakSet:Set,ni=null,cI=!1;function LZ(e,t){if(e=e.containerInfo,x3=j2,e=vD(e),ov(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=e,f=null;t:for(;;){for(var h;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===e)break t;if(f===n&&++c===r&&(a=o),f===s&&++u===i&&(l=o),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(C3={focusedElem:e,selectionRange:n},j2=!1,ni=t;ni!==null;)if(t=ni,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ni=e;else for(;ni!==null;){switch(t=ni,s=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&s!==null){e=void 0,n=t,r=s.memoizedProps,s=s.memoizedState,i=n.stateNode;try{var m=Gu(n.type,r,n.elementType===n.type);e=i.getSnapshotBeforeUpdate(m,s),i.__reactInternalSnapshotBeforeUpdate=e}catch(p){Ft(n,n.return,p)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)M3(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":M3(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(ne(163))}if(e=t.sibling,e!==null){e.return=t.return,ni=e;break}ni=t.return}return m=cI,cI=!1,m}function kN(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:na(e,n),i&4&&xm(5,n);break;case 1:if(na(e,n),i&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(a){Ft(n,n.return,a)}else{var r=Gu(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(a){Ft(n,n.return,a)}}i&64&&CN(n),i&512&&hu(n,n.return);break;case 3:if(na(e,n),i&64&&(i=n.updateQueue,i!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{xN(i,e)}catch(a){Ft(n,n.return,a)}}break;case 26:na(e,n),i&512&&hu(n,n.return);break;case 27:case 5:na(e,n),t===null&&i&4&&MN(n),i&512&&hu(n,n.return);break;case 12:na(e,n);break;case 13:na(e,n),i&4&&NN(e,n);break;case 22:if(r=n.memoizedState!==null||pa,!r){t=t!==null&&t.memoizedState!==null||bn;var s=pa,o=bn;pa=r,(bn=t)&&!o?El(e,n,(n.subtreeFlags&8772)!==0):na(e,n),pa=s,bn=o}i&512&&(n.memoizedProps.mode==="manual"?hu(n,n.return):Cr(n,n.return));break;default:na(e,n)}}function LN(e){var t=e.alternate;t!==null&&(e.alternate=null,LN(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&ev(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var kn=null,Tr=!1;function ta(e,t,n){for(n=n.child;n!==null;)DN(e,t,n),n=n.sibling}function DN(e,t,n){if(Dr&&typeof Dr.onCommitFiberUnmount=="function")try{Dr.onCommitFiberUnmount(ym,n)}catch{}switch(n.tag){case 26:bn||Cr(n,t),ta(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:bn||Cr(n,t);var i=kn,r=Tr;for(kn=n.stateNode,ta(e,t,n),n=n.stateNode,t=n.attributes;t.length;)n.removeAttributeNode(t[0]);ev(n),kn=i,Tr=r;break;case 5:bn||Cr(n,t);case 6:r=kn;var s=Tr;if(kn=null,ta(e,t,n),kn=r,Tr=s,kn!==null)if(Tr)try{e=kn,i=n.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)}catch(o){Ft(n,t,o)}else try{kn.removeChild(n.stateNode)}catch(o){Ft(n,t,o)}break;case 18:kn!==null&&(Tr?(t=kn,n=n.stateNode,t.nodeType===8?r8(t.parentNode,n):t.nodeType===1&&r8(t,n),I0(t)):r8(kn,n.stateNode));break;case 4:i=kn,r=Tr,kn=n.stateNode.containerInfo,Tr=!0,ta(e,t,n),kn=i,Tr=r;break;case 0:case 11:case 14:case 15:bn||gc(2,n,t),bn||gc(4,n,t),ta(e,t,n);break;case 1:bn||(Cr(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"&&AN(n,t,i)),ta(e,t,n);break;case 21:ta(e,t,n);break;case 22:bn||Cr(n,t),bn=(i=bn)||n.memoizedState!==null,ta(e,t,n),bn=i;break;default:ta(e,t,n)}}function NN(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{I0(e)}catch(n){Ft(t,t.return,n)}}function DZ(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new lI),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new lI),t;default:throw Error(ne(435,e.tag))}}function Yy(e,t){var n=DZ(e);t.forEach(function(i){var r=YZ.bind(null,e,i);n.has(i)||(n.add(i),i.then(r,r))})}function Xr(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i],s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 27:case 5:kn=a.stateNode,Tr=!1;break e;case 3:kn=a.stateNode.containerInfo,Tr=!0;break e;case 4:kn=a.stateNode.containerInfo,Tr=!0;break e}a=a.return}if(kn===null)throw Error(ne(160));DN(s,o,r),kn=null,Tr=!1,s=r.alternate,s!==null&&(s.return=null),r.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)ON(t,e),t=t.sibling}var Ms=null;function ON(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Xr(t,e),jr(e),i&4&&(gc(3,e,e.return),xm(3,e),gc(5,e,e.return));break;case 1:Xr(t,e),jr(e),i&512&&(bn||n===null||Cr(n,n.return)),i&64&&pa&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var r=Ms;if(Xr(t,e),jr(e),i&512&&(bn||n===null||Cr(n,n.return)),i&4){var s=n!==null?n.memoizedState:null;if(i=e.memoizedState,n===null)if(i===null)if(e.stateNode===null){e:{i=e.type,n=e.memoizedProps,r=r.ownerDocument||r;t:switch(i){case"title":s=r.getElementsByTagName("title")[0],(!s||s[h0]||s[Fi]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=r.createElement(i),r.head.insertBefore(s,r.querySelector("head > title"))),vi(s,i,n),s[Fi]=e,ri(s),i=s;break e;case"link":var o=II("link","href",r).get(i+(n.href||""));if(o){for(var a=0;a<o.length;a++)if(s=o[a],s.getAttribute("href")===(n.href==null?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){o.splice(a,1);break t}}s=r.createElement(i),vi(s,i,n),r.head.appendChild(s);break;case"meta":if(o=II("meta","content",r).get(i+(n.content||""))){for(a=0;a<o.length;a++)if(s=o[a],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){o.splice(a,1);break t}}s=r.createElement(i),vi(s,i,n),r.head.appendChild(s);break;default:throw Error(ne(468,i))}s[Fi]=e,ri(s),i=s}e.stateNode=i}else xI(r,e.type,e.stateNode);else e.stateNode=SI(r,i,e.memoizedProps);else s!==i?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,i===null?xI(r,e.type,e.stateNode):SI(r,i,e.memoizedProps)):i===null&&e.stateNode!==null&&aI(e,e.memoizedProps,n.memoizedProps)}break;case 27:if(i&4&&e.alternate===null){r=e.stateNode,s=e.memoizedProps;try{for(var l=r.firstChild;l;){var c=l.nextSibling,u=l.nodeName;l[h0]||u==="HEAD"||u==="BODY"||u==="SCRIPT"||u==="STYLE"||u==="LINK"&&l.rel.toLowerCase()==="stylesheet"||r.removeChild(l),l=c}for(var d=e.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);vi(r,d,s),r[Fi]=e,r[br]=s}catch(m){Ft(e,e.return,m)}}case 5:if(Xr(t,e),jr(e),i&512&&(bn||n===null||Cr(n,n.return)),e.flags&32){r=e.stateNode;try{ih(r,"")}catch(m){Ft(e,e.return,m)}}i&4&&e.stateNode!=null&&(r=e.memoizedProps,aI(e,r,n!==null?n.memoizedProps:r)),i&1024&&(jy=!0);break;case 6:if(Xr(t,e),jr(e),i&4){if(e.stateNode===null)throw Error(ne(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(m){Ft(e,e.return,m)}}break;case 3:if(BU=null,r=Ms,Ms=$2(t.containerInfo),Xr(t,e),Ms=r,jr(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{I0(t.containerInfo)}catch(m){Ft(e,e.return,m)}jy&&(jy=!1,PN(e));break;case 4:i=Ms,Ms=$2(e.stateNode.containerInfo),Xr(t,e),jr(e),Ms=i;break;case 12:Xr(t,e),jr(e);break;case 13:Xr(t,e),jr(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Lv=Do()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Yy(e,i)));break;case 22:if(i&512&&(bn||n===null||Cr(n,n.return)),l=e.memoizedState!==null,c=n!==null&&n.memoizedState!==null,u=pa,d=bn,pa=u||l,bn=d||c,Xr(t,e),bn=d,pa=u,jr(e),t=e.stateNode,t._current=e,t._visibility&=-3,t._visibility|=t._pendingVisibility&2,i&8192&&(t._visibility=l?t._visibility&-2:t._visibility|1,l&&(t=pa||bn,n===null||c||t||nf(e)),e.memoizedProps===null||e.memoizedProps.mode!=="manual"))e:for(n=null,t=e;;){if(t.tag===5||t.tag===26||t.tag===27){if(n===null){c=n=t;try{if(r=c.stateNode,l)s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none";else{o=c.stateNode,a=c.memoizedProps.style;var h=a!=null&&a.hasOwnProperty("display")?a.display:null;o.style.display=h==null||typeof h=="boolean"?"":(""+h).trim()}}catch(m){Ft(c,c.return,m)}}}else if(t.tag===6){if(n===null){c=t;try{c.stateNode.nodeValue=l?"":c.memoizedProps}catch(m){Ft(c,c.return,m)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,Yy(e,n))));break;case 19:Xr(t,e),jr(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Yy(e,i)));break;case 21:break;default:Xr(t,e),jr(e)}}function jr(e){var t=e.flags;if(t&2){try{if(e.tag!==27){e:{for(var n=e.return;n!==null;){if(RN(n)){var i=n;break e}n=n.return}throw Error(ne(160))}switch(i.tag){case 27:var r=i.stateNode,s=Xy(e);O2(e,s,r);break;case 5:var o=i.stateNode;i.flags&32&&(ih(o,""),i.flags&=-33);var a=Xy(e);O2(e,a,o);break;case 3:case 4:var l=i.stateNode.containerInfo,c=Xy(e);b3(e,c,l);break;default:throw Error(ne(161))}}}catch(u){Ft(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function PN(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;PN(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function na(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)kN(e,t.alternate,t),t=t.sibling}function nf(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:gc(4,t,t.return),nf(t);break;case 1:Cr(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&AN(t,t.return,n),nf(t);break;case 26:case 27:case 5:Cr(t,t.return),nf(t);break;case 22:Cr(t,t.return),t.memoizedState===null&&nf(t);break;default:nf(t)}e=e.sibling}}function El(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,r=e,s=t,o=s.flags;switch(s.tag){case 0:case 11:case 15:El(r,s,n),xm(4,s);break;case 1:if(El(r,s,n),i=s,r=i.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(c){Ft(i,i.return,c)}if(i=s,r=i.updateQueue,r!==null){var a=i.stateNode;try{var l=r.shared.hiddenCallbacks;if(l!==null)for(r.shared.hiddenCallbacks=null,r=0;r<l.length;r++)IN(l[r],a)}catch(c){Ft(i,i.return,c)}}n&&o&64&&CN(s),hu(s,s.return);break;case 26:case 27:case 5:El(r,s,n),n&&i===null&&o&4&&MN(s),hu(s,s.return);break;case 12:El(r,s,n);break;case 13:El(r,s,n),n&&o&4&&NN(r,s);break;case 22:s.memoizedState===null&&El(r,s,n),hu(s,s.return);break;default:El(r,s,n)}t=t.sibling}}function Cv(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&Tm(n))}function Av(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Tm(e))}function pl(e,t,n,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)FN(e,t,n,i),t=t.sibling}function FN(e,t,n,i){var r=t.flags;switch(t.tag){case 0:case 11:case 15:pl(e,t,n,i),r&2048&&xm(9,t);break;case 3:pl(e,t,n,i),r&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Tm(e)));break;case 12:if(r&2048){pl(e,t,n,i),e=t.stateNode;try{var s=t.memoizedProps,o=s.id,a=s.onPostCommit;typeof a=="function"&&a(o,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(l){Ft(t,t.return,l)}}else pl(e,t,n,i);break;case 23:break;case 22:s=t.stateNode,t.memoizedState!==null?s._visibility&4?pl(e,t,n,i):O1(e,t):s._visibility&4?pl(e,t,n,i):(s._visibility|=4,rf(e,t,n,i,(t.subtreeFlags&10256)!==0)),r&2048&&Cv(t.alternate,t);break;case 24:pl(e,t,n,i),r&2048&&Av(t.alternate,t);break;default:pl(e,t,n,i)}}function rf(e,t,n,i,r){for(r=r&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var s=e,o=t,a=n,l=i,c=o.flags;switch(o.tag){case 0:case 11:case 15:rf(s,o,a,l,r),xm(8,o);break;case 23:break;case 22:var u=o.stateNode;o.memoizedState!==null?u._visibility&4?rf(s,o,a,l,r):O1(s,o):(u._visibility|=4,rf(s,o,a,l,r)),r&&c&2048&&Cv(o.alternate,o);break;case 24:rf(s,o,a,l,r),r&&c&2048&&Av(o.alternate,o);break;default:rf(s,o,a,l,r)}t=t.sibling}}function O1(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,i=t,r=i.flags;switch(i.tag){case 22:O1(n,i),r&2048&&Cv(i.alternate,i);break;case 24:O1(n,i),r&2048&&Av(i.alternate,i);break;default:O1(n,i)}t=t.sibling}}var s1=8192;function Hd(e){if(e.subtreeFlags&s1)for(e=e.child;e!==null;)BN(e),e=e.sibling}function BN(e){switch(e.tag){case 26:Hd(e),e.flags&s1&&e.memoizedState!==null&&_q(Ms,e.memoizedState,e.memoizedProps);break;case 5:Hd(e);break;case 3:case 4:var t=Ms;Ms=$2(e.stateNode.containerInfo),Hd(e),Ms=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=s1,s1=16777216,Hd(e),s1=t):Hd(e));break;default:Hd(e)}}function zN(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Rg(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];ni=i,VN(i,e)}zN(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)HN(e),e=e.sibling}function HN(e){switch(e.tag){case 0:case 11:case 15:Rg(e),e.flags&2048&&gc(9,e,e.return);break;case 3:Rg(e);break;case 12:Rg(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&4&&(e.return===null||e.return.tag!==13)?(t._visibility&=-5,OU(e)):Rg(e);break;default:Rg(e)}}function OU(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];ni=i,VN(i,e)}zN(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:gc(8,t,t.return),OU(t);break;case 22:n=t.stateNode,n._visibility&4&&(n._visibility&=-5,OU(t));break;default:OU(t)}e=e.sibling}}function VN(e,t){for(;ni!==null;){var n=ni;switch(n.tag){case 0:case 11:case 15:gc(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:Tm(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,ni=i;else e:for(n=e;ni!==null;){i=ni;var r=i.sibling,s=i.return;if(LN(i),i===n){ni=null;break e}if(r!==null){r.return=s,ni=r;break e}ni=s}}}function NZ(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ss(e,t,n,i){return new NZ(e,t,n,i)}function Mv(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ql(e,t){var n=e.alternate;return n===null?(n=ss(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&31457280,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function $N(e,t){e.flags&=31457282;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function PU(e,t,n,i,r,s){var o=0;if(i=e,typeof e=="function")Mv(e)&&(o=1);else if(typeof e=="string")o=Eq(e,n,Lo.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case gf:return Cu(n.children,r,s,t);case GL:o=8,r|=24;break;case H7:return e=ss(12,n,t,r|2),e.elementType=H7,e.lanes=s,e;case V7:return e=ss(13,n,t,r),e.elementType=V7,e.lanes=s,e;case $7:return e=ss(19,n,t,r),e.elementType=$7,e.lanes=s,e;case jL:return GN(n,r,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case oK:case wa:o=10;break e;case XL:o=9;break e;case q4:o=11;break e;case Q4:o=14;break e;case Sl:o=16,i=null;break e}o=29,n=Error(ne(130,e===null?"null":typeof e,"")),i=null}return t=ss(o,n,t,r),t.elementType=e,t.type=i,t.lanes=s,t}function Cu(e,t,n,i){return e=ss(7,e,i,t),e.lanes=n,e}function GN(e,t,n,i){e=ss(22,e,i,t),e.elementType=jL,e.lanes=n;var r={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var s=r._current;if(s===null)throw Error(ne(456));if(!(r._pendingVisibility&2)){var o=fc(s,2);o!==null&&(r._pendingVisibility|=2,Qi(o,s,2))}},attach:function(){var s=r._current;if(s===null)throw Error(ne(456));if(r._pendingVisibility&2){var o=fc(s,2);o!==null&&(r._pendingVisibility&=-3,Qi(o,s,2))}}};return e.stateNode=r,e}function Wy(e,t,n){return e=ss(6,e,null,t),e.lanes=n,e}function Ky(e,t,n){return t=ss(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ia(e){e.flags|=4}function uI(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!dO(t)){if(t=ms.current,t!==null&&((dt&4194176)===dt?No!==null:(dt&62914560)!==dt&&!(dt&536870912)||t!==No))throw A1=n3,MD;e.flags|=8192}}function Np(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?JL():536870912,e.lanes|=t,ah|=t)}function kg(e,t){if(!vt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function cn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&31457280,i|=r.flags&31457280,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function OZ(e,t,n){var i=t.pendingProps;switch(uv(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cn(t),null;case 1:return cn(t),null;case 3:return n=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Ma(Xn),th(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Ag(t)?ia(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ks!==null&&(w3(ks),ks=null))),cn(t),null;case 26:return n=t.memoizedState,e===null?(ia(t),n!==null?(cn(t),uI(t,n)):(cn(t),t.flags&=-16777217)):n?n!==e.memoizedState?(ia(t),cn(t),uI(t,n)):(cn(t),t.flags&=-16777217):(e.memoizedProps!==i&&ia(t),cn(t),t.flags&=-16777217),null;case 27:_2(t),n=Wl.current;var r=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==i&&ia(t);else{if(!i){if(t.stateNode===null)throw Error(ne(166));return cn(t),null}e=Lo.current,Ag(t)?zS(t):(e=lO(r,i,n),t.stateNode=e,ia(t))}return cn(t),null;case 5:if(_2(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&ia(t);else{if(!i){if(t.stateNode===null)throw Error(ne(166));return cn(t),null}if(e=Lo.current,Ag(t))zS(t);else{switch(r=V2(Wl.current),e){case 1:e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":e=r.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof i.is=="string"?r.createElement("select",{is:i.is}):r.createElement("select"),i.multiple?e.multiple=!0:i.size&&(e.size=i.size);break;default:e=typeof i.is=="string"?r.createElement(n,{is:i.is}):r.createElement(n)}}e[Fi]=t,e[br]=i;e:for(r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.tag!==27&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}t.stateNode=e;e:switch(vi(e,n,i),n){case"button":case"input":case"select":case"textarea":e=!!i.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&ia(t)}}return cn(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&ia(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(ne(166));if(e=Wl.current,Ag(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,r=Zi,r!==null)switch(r.tag){case 27:case 5:i=r.memoizedProps}e[Fi]=t,e=!!(e.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||sO(e.nodeValue,n)),e||Hu(t)}else e=V2(e).createTextNode(i),e[Fi]=t,t.stateNode=e}return cn(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(r=Ag(t),i!==null&&i.dehydrated!==null){if(e===null){if(!r)throw Error(ne(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(ne(317));r[Fi]=t}else wm(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;cn(t),r=!1}else ks!==null&&(w3(ks),ks=null),r=!0;if(!r)return t.flags&256?(Ia(t),t):(Ia(t),null)}if(Ia(t),t.flags&128)return t.lanes=n,t;if(n=i!==null,e=e!==null&&e.memoizedState!==null,n){i=t.child,r=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(r=i.alternate.memoizedState.cachePool.pool);var s=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==r&&(i.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),Np(t,t.updateQueue),cn(t),null;case 4:return th(),e===null&&Ov(t.stateNode.containerInfo),cn(t),null;case 10:return Ma(t.type),cn(t),null;case 19:if(ci(jn),r=t.memoizedState,r===null)return cn(t),null;if(i=(t.flags&128)!==0,s=r.rendering,s===null)if(i)kg(r,!1);else{if(yn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=M2(e),s!==null){for(t.flags|=128,kg(r,!1),e=s.updateQueue,t.updateQueue=e,Np(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)$N(n,e),n=n.sibling;return ln(jn,jn.current&1|2),t.child}e=e.sibling}r.tail!==null&&Do()>P2&&(t.flags|=128,i=!0,kg(r,!1),t.lanes=4194304)}else{if(!i)if(e=M2(s),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,Np(t,e),kg(r,!0),r.tail===null&&r.tailMode==="hidden"&&!s.alternate&&!vt)return cn(t),null}else 2*Do()-r.renderingStartTime>P2&&n!==536870912&&(t.flags|=128,i=!0,kg(r,!1),t.lanes=4194304);r.isBackwards?(s.sibling=t.child,t.child=s):(e=r.last,e!==null?e.sibling=s:t.child=s,r.last=s)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=Do(),t.sibling=null,e=jn.current,ln(jn,i?e&1|2:e&1),t):(cn(t),null);case 22:case 23:return Ia(t),dv(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?n&536870912&&!(t.flags&128)&&(cn(t),t.subtreeFlags&6&&(t.flags|=8192)):cn(t),n=t.updateQueue,n!==null&&Np(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),e!==null&&ci(xu),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Ma(Xn),cn(t),null;case 25:return null}throw Error(ne(156,t.tag))}function PZ(e,t){switch(uv(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ma(Xn),th(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return _2(t),null;case 13:if(Ia(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ne(340));wm()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ci(jn),null;case 4:return th(),null;case 10:return Ma(t.type),null;case 22:case 23:return Ia(t),dv(),e!==null&&ci(xu),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Ma(Xn),null;case 25:return null;default:return null}}function XN(e,t){switch(uv(t),t.tag){case 3:Ma(Xn),th();break;case 26:case 27:case 5:_2(t);break;case 4:th();break;case 13:Ia(t);break;case 19:ci(jn);break;case 10:Ma(t.type);break;case 22:case 23:Ia(t),dv(),e!==null&&ci(xu);break;case 24:Ma(Xn)}}var FZ={getCacheForType:function(e){var t=Bi(Xn),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},BZ=typeof WeakMap=="function"?WeakMap:Map,fn=0,Yt=null,Qe=null,dt=0,$t=0,Sr=null,Ua=!1,jh=!1,Rv=!1,Va=0,yn=0,mc=0,Au=0,kv=0,os=0,ah=0,P1=null,Io=null,y3=!1,Lv=0,P2=1/0,F2=null,Ql=null,Op=!1,su=null,F1=0,E3=0,v3=null,B1=0,_3=null;function Or(){if(fn&2&&dt!==0)return dt&-dt;if(je.T!==null){var e=sh;return e!==0?e:Nv()}return iD()}function jN(){os===0&&(os=!(dt&536870912)||vt?QL():536870912);var e=ms.current;return e!==null&&(e.flags|=32),os}function Qi(e,t,n){(e===Yt&&$t===2||e.cancelPendingCommit!==null)&&(lh(e,0),ba(e,dt,os,!1)),vm(e,n),(!(fn&2)||e!==Yt)&&(e===Yt&&(!(fn&2)&&(Au|=n),yn===4&&ba(e,dt,os,!1)),Yo(e))}function YN(e,t,n){if(fn&6)throw Error(ne(327));var i=!n&&(t&60)===0&&(t&e.expiredLanes)===0||Em(e,t),r=i?VZ(e,t):Zy(e,t,!0),s=i;do{if(r===0){jh&&!i&&ba(e,t,0,!1);break}else if(r===6)ba(e,t,0,!Ua);else{if(n=e.current.alternate,s&&!zZ(n)){r=Zy(e,t,!1),s=!1;continue}if(r===2){if(s=t,e.errorRecoveryDisabledLanes&s)var o=0;else o=e.pendingLanes&-536870913,o=o!==0?o:o&536870912?536870912:0;if(o!==0){t=o;e:{var a=e;r=P1;var l=a.current.memoizedState.isDehydrated;if(l&&(lh(a,o).flags|=256),o=Zy(a,o,!1),o!==2){if(Rv&&!l){a.errorRecoveryDisabledLanes|=s,Au|=s,r=4;break e}s=Io,Io=r,s!==null&&w3(s)}r=o}if(s=!1,r!==2)continue}}if(r===1){lh(e,0),ba(e,t,0,!0);break}e:{switch(i=e,r){case 0:case 1:throw Error(ne(345));case 4:if((t&4194176)===t){ba(i,t,os,!Ua);break e}break;case 2:Io=null;break;case 3:case 5:break;default:throw Error(ne(329))}if(i.finishedWork=n,i.finishedLanes=t,(t&62914560)===t&&(s=Lv+300-Do(),10<s)){if(ba(i,t,os,!Ua),v6(i,0)!==0)break e;i.timeoutHandle=aO(dI.bind(null,i,n,Io,F2,y3,t,os,Au,ah,Ua,2,-0,0),s);break e}dI(i,n,Io,F2,y3,t,os,Au,ah,Ua,0,-0,0)}}break}while(!0);Yo(e)}function w3(e){Io===null?Io=e:Io.push.apply(Io,e)}function dI(e,t,n,i,r,s,o,a,l,c,u,d,f){var h=t.subtreeFlags;if((h&8192||(h&16785408)===16785408)&&(_0={stylesheets:null,count:0,unsuspend:vq},BN(t),t=wq(),t!==null)){e.cancelPendingCommit=t(hI.bind(null,e,n,i,r,o,a,l,1,d,f)),ba(e,s,o,!c);return}hI(e,n,i,r,o,a,l,u,d,f)}function zZ(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Br(s(),r))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ba(e,t,n,i){t&=~kv,t&=~Au,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var r=t;0<r;){var s=31-Nr(r),o=1<<s;i[s]=-1,r&=~o}n!==0&&eD(e,n,t)}function R6(){return fn&6?!0:(Cm(0),!1)}function Dv(){if(Qe!==null){if($t===0)var e=Qe.return;else e=Qe,xa=_d=null,bv(e),zf=null,b0=0,e=Qe;for(;e!==null;)XN(e.alternate,e),e=e.return;Qe=null}}function lh(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,sq(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Dv(),Yt=e,Qe=n=ql(e.current,null),dt=t,$t=0,Sr=null,Ua=!1,jh=Em(e,t),Rv=!1,ah=os=kv=Au=mc=yn=0,Io=P1=null,y3=!1,t&8&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var r=31-Nr(i),s=1<<r;t|=e[r],i&=~s}return Va=t,S6(),n}function WN(e,t){Ke=null,je.H=Fo,t===C1?(t=$S(),$t=3):t===MD?(t=$S(),$t=4):$t=t===yN?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Sr=t,Qe===null&&(yn=1,D2(e,ns(t,e.current)))}function KN(){var e=je.H;return je.H=Fo,e===null?Fo:e}function ZN(){var e=je.A;return je.A=FZ,e}function T3(){yn=4,Ua||(dt&4194176)!==dt&&ms.current!==null||(jh=!0),!(mc&134217727)&&!(Au&134217727)||Yt===null||ba(Yt,dt,os,!1)}function Zy(e,t,n){var i=fn;fn|=2;var r=KN(),s=ZN();(Yt!==e||dt!==t)&&(F2=null,lh(e,t)),t=!1;var o=yn;e:do try{if($t!==0&&Qe!==null){var a=Qe,l=Sr;switch($t){case 8:Dv(),o=6;break e;case 3:case 2:case 6:ms.current===null&&(t=!0);var c=$t;if($t=0,Sr=null,Tf(e,a,l,c),n&&jh){o=0;break e}break;default:c=$t,$t=0,Sr=null,Tf(e,a,l,c)}}HZ(),o=yn;break}catch(u){WN(e,u)}while(!0);return t&&e.shellSuspendCounter++,xa=_d=null,fn=i,je.H=r,je.A=s,Qe===null&&(Yt=null,dt=0,S6()),o}function HZ(){for(;Qe!==null;)qN(Qe)}function VZ(e,t){var n=fn;fn|=2;var i=KN(),r=ZN();Yt!==e||dt!==t?(F2=null,P2=Do()+500,lh(e,t)):jh=Em(e,t);e:do try{if($t!==0&&Qe!==null){t=Qe;var s=Sr;t:switch($t){case 1:$t=0,Sr=null,Tf(e,t,s,1);break;case 2:if(VS(s)){$t=0,Sr=null,fI(t);break}t=function(){$t===2&&Yt===e&&($t=7),Yo(e)},s.then(t,t);break e;case 3:$t=7;break e;case 4:$t=5;break e;case 7:VS(s)?($t=0,Sr=null,fI(t)):($t=0,Sr=null,Tf(e,t,s,7));break;case 5:var o=null;switch(Qe.tag){case 26:o=Qe.memoizedState;case 5:case 27:var a=Qe;if(!o||dO(o)){$t=0,Sr=null;var l=a.sibling;if(l!==null)Qe=l;else{var c=a.return;c!==null?(Qe=c,k6(c)):Qe=null}break t}}$t=0,Sr=null,Tf(e,t,s,5);break;case 6:$t=0,Sr=null,Tf(e,t,s,6);break;case 8:Dv(),yn=6;break e;default:throw Error(ne(462))}}$Z();break}catch(u){WN(e,u)}while(!0);return xa=_d=null,je.H=i,je.A=r,fn=n,Qe!==null?0:(Yt=null,dt=0,S6(),yn)}function $Z(){for(;Qe!==null&&!dK();)qN(Qe)}function qN(e){var t=TN(e.alternate,e,Va);e.memoizedProps=e.pendingProps,t===null?k6(e):Qe=t}function fI(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=iI(n,t,t.pendingProps,t.type,void 0,dt);break;case 11:t=iI(n,t,t.pendingProps,t.type.render,t.ref,dt);break;case 5:bv(t);default:XN(n,t),t=Qe=$N(t,Va),t=TN(n,t,Va)}e.memoizedProps=e.pendingProps,t===null?k6(e):Qe=t}function Tf(e,t,n,i){xa=_d=null,bv(t),zf=null,b0=0;var r=t.return;try{if(RZ(e,r,t,n,dt)){yn=1,D2(e,ns(n,e.current)),Qe=null;return}}catch(s){if(r!==null)throw Qe=r,s;yn=1,D2(e,ns(n,e.current)),Qe=null;return}t.flags&32768?(vt||i===1?e=!0:jh||dt&536870912?e=!1:(Ua=e=!0,(i===2||i===3||i===6)&&(i=ms.current,i!==null&&i.tag===13&&(i.flags|=16384))),QN(t,e)):k6(t)}function k6(e){var t=e;do{if(t.flags&32768){QN(t,Ua);return}e=t.return;var n=OZ(t.alternate,t,Va);if(n!==null){Qe=n;return}if(t=t.sibling,t!==null){Qe=t;return}Qe=t=e}while(t!==null);yn===0&&(yn=5)}function QN(e,t){do{var n=PZ(e.alternate,e);if(n!==null){n.flags&=32767,Qe=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){Qe=e;return}Qe=e=n}while(e!==null);yn=6,Qe=null}function hI(e,t,n,i,r,s,o,a,l,c){var u=je.T,d=qt.p;try{qt.p=2,je.T=null,GZ(e,t,n,i,d,r,s,o,a,l,c)}finally{je.T=u,qt.p=d}}function GZ(e,t,n,i,r,s,o,a){do Gf();while(su!==null);if(fn&6)throw Error(ne(327));var l=e.finishedWork;if(i=e.finishedLanes,l===null)return null;if(e.finishedWork=null,e.finishedLanes=0,l===e.current)throw Error(ne(177));e.callbackNode=null,e.callbackPriority=0,e.cancelPendingCommit=null;var c=l.lanes|l.childLanes;if(c|=av,_K(e,i,c,s,o,a),e===Yt&&(Qe=Yt=null,dt=0),!(l.subtreeFlags&10256)&&!(l.flags&10256)||Op||(Op=!0,E3=c,v3=n,WZ(w2,function(){return Gf(),null})),n=(l.flags&15990)!==0,l.subtreeFlags&15990||n?(n=je.T,je.T=null,s=qt.p,qt.p=2,o=fn,fn|=4,LZ(e,l),ON(l,e),gZ(C3,e.containerInfo),j2=!!x3,C3=x3=null,e.current=l,kN(e,l.alternate,l),fK(),fn=o,qt.p=s,je.T=n):e.current=l,Op?(Op=!1,su=e,F1=i):JN(e,c),c=e.pendingLanes,c===0&&(Ql=null),UK(l.stateNode),Yo(e),t!==null)for(r=e.onRecoverableError,l=0;l<t.length;l++)c=t[l],r(c.value,{componentStack:c.stack});return F1&3&&Gf(),c=e.pendingLanes,i&4194218&&c&42?e===_3?B1++:(B1=0,_3=e):B1=0,Cm(0),null}function JN(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Tm(t)))}function Gf(){if(su!==null){var e=su,t=E3;E3=0;var n=nD(F1),i=je.T,r=qt.p;try{if(qt.p=32>n?32:n,je.T=null,su===null)var s=!1;else{n=v3,v3=null;var o=su,a=F1;if(su=null,F1=0,fn&6)throw Error(ne(331));var l=fn;if(fn|=4,HN(o.current),FN(o,o.current,a,n),fn=l,Cm(0,!1),Dr&&typeof Dr.onPostCommitFiberRoot=="function")try{Dr.onPostCommitFiberRoot(ym,o)}catch{}s=!0}return s}finally{qt.p=r,je.T=i,JN(e,t)}}return!1}function gI(e,t,n){t=ns(n,t),t=c3(e.stateNode,t,2),e=Zl(e,t,2),e!==null&&(vm(e,2),Yo(e))}function Ft(e,t,n){if(e.tag===3)gI(e,e,n);else for(;t!==null;){if(t.tag===3){gI(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Ql===null||!Ql.has(i))){e=ns(n,e),n=UN(2),i=Zl(t,n,2),i!==null&&(bN(n,i,t,e),vm(i,2),Yo(i));break}}t=t.return}}function qy(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new BZ;var r=new Set;i.set(t,r)}else r=i.get(t),r===void 0&&(r=new Set,i.set(t,r));r.has(n)||(Rv=!0,r.add(n),e=XZ.bind(null,e,t,n),t.then(e,e))}function XZ(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Yt===e&&(dt&n)===n&&(yn===4||yn===3&&(dt&62914560)===dt&&300>Do()-Lv?!(fn&2)&&lh(e,0):kv|=n,ah===dt&&(ah=0)),Yo(e)}function eO(e,t){t===0&&(t=JL()),e=fc(e,t),e!==null&&(vm(e,t),Yo(e))}function jZ(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),eO(e,n)}function YZ(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(ne(314))}i!==null&&i.delete(t),eO(e,n)}function WZ(e,t){return J4(e,t)}var B2=null,sf=null,S3=!1,z2=!1,Qy=!1,Mu=0;function Yo(e){e!==sf&&e.next===null&&(sf===null?B2=sf=e:sf=sf.next=e),z2=!0,S3||(S3=!0,ZZ(KZ))}function Cm(e,t){if(!Qy&&z2){Qy=!0;do for(var n=!1,i=B2;i!==null;){if(e!==0){var r=i.pendingLanes;if(r===0)var s=0;else{var o=i.suspendedLanes,a=i.pingedLanes;s=(1<<31-Nr(42|e)+1)-1,s&=r&~(o&~a),s=s&201326677?s&201326677|1:s?s|2:0}s!==0&&(n=!0,mI(i,s))}else s=dt,s=v6(i,i===Yt?s:0),!(s&3)||Em(i,s)||(n=!0,mI(i,s));i=i.next}while(n);Qy=!1}}function KZ(){z2=S3=!1;var e=0;Mu!==0&&(rq()&&(e=Mu),Mu=0);for(var t=Do(),n=null,i=B2;i!==null;){var r=i.next,s=tO(i,t);s===0?(i.next=null,n===null?B2=r:n.next=r,r===null&&(sf=n)):(n=i,(e!==0||s&3)&&(z2=!0)),i=r}Cm(e)}function tO(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,s=e.pendingLanes&-62914561;0<s;){var o=31-Nr(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=vK(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}if(t=Yt,n=dt,n=v6(e,e===t?n:0),i=e.callbackNode,n===0||e===t&&$t===2||e.cancelPendingCommit!==null)return i!==null&&i!==null&&Cy(i),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||Em(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(i!==null&&Cy(i),nD(n)){case 2:case 8:n=ZL;break;case 32:n=w2;break;case 268435456:n=qL;break;default:n=w2}return i=nO.bind(null,e),n=J4(n,i),e.callbackPriority=t,e.callbackNode=n,t}return i!==null&&i!==null&&Cy(i),e.callbackPriority=2,e.callbackNode=null,2}function nO(e,t){var n=e.callbackNode;if(Gf()&&e.callbackNode!==n)return null;var i=dt;return i=v6(e,e===Yt?i:0),i===0?null:(YN(e,i,t),tO(e,Do()),e.callbackNode!=null&&e.callbackNode===n?nO.bind(null,e):null)}function mI(e,t){if(Gf())return null;YN(e,t,!0)}function ZZ(e){oq(function(){fn&6?J4(KL,e):e()})}function Nv(){return Mu===0&&(Mu=QL()),Mu}function pI(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:MU(""+e)}function UI(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function qZ(e,t,n,i,r){if(t==="submit"&&n&&n.stateNode===r){var s=pI((r[br]||null).action),o=i.submitter;o&&(t=(t=o[br]||null)?pI(t.formAction):o.getAttribute("formAction"),t!==null&&(s=t,o=null));var a=new _6("action","action",null,i,r);e.push({event:a,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(Mu!==0){var l=o?UI(r,o):new FormData(r);a3(n,{pending:!0,data:l,method:r.method,action:s},null,l)}}else typeof s=="function"&&(a.preventDefault(),l=o?UI(r,o):new FormData(r),a3(n,{pending:!0,data:l,method:r.method,action:s},s,l))},currentTarget:r}]})}}for(var Jy=0;Jy<FS.length;Jy++){var e8=FS[Jy],QZ=e8.toLowerCase(),JZ=e8[0].toUpperCase()+e8.slice(1);oo(QZ,"on"+JZ)}oo(wD,"onAnimationEnd");oo(TD,"onAnimationIteration");oo(SD,"onAnimationStart");oo("dblclick","onDoubleClick");oo("focusin","onFocus");oo("focusout","onBlur");oo(pZ,"onTransitionRun");oo(UZ,"onTransitionStart");oo(bZ,"onTransitionCancel");oo(ID,"onTransitionEnd");nh("onMouseEnter",["mouseout","mouseover"]);nh("onMouseLeave",["mouseout","mouseover"]);nh("onPointerEnter",["pointerout","pointerover"]);nh("onPointerLeave",["pointerout","pointerover"]);Ud("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ud("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ud("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ud("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ud("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ud("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var E0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eq=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(E0));function iO(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var s=void 0;if(t)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;s=a,r.currentTarget=c;try{s(r)}catch(u){L2(u)}r.currentTarget=null,s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;s=a,r.currentTarget=c;try{s(r)}catch(u){L2(u)}r.currentTarget=null,s=l}}}}function tt(e,t){var n=t[W7];n===void 0&&(n=t[W7]=new Set);var i=e+"__bubble";n.has(i)||(rO(t,e,2,!1),n.add(i))}function t8(e,t,n){var i=0;t&&(i|=4),rO(n,e,i,t)}var Pp="_reactListening"+Math.random().toString(36).slice(2);function Ov(e){if(!e[Pp]){e[Pp]=!0,rD.forEach(function(n){n!=="selectionchange"&&(eq.has(n)||t8(n,!1,e),t8(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Pp]||(t[Pp]=!0,t8("selectionchange",!1,t))}}function rO(e,t,n,i){switch(pO(t)){case 2:var r=Iq;break;case 8:r=xq;break;default:r=zv}n=r.bind(null,t,n,e),r=void 0,!Q7||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),i?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function n8(e,t,n,i,r){var s=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=fu(a),o===null)return;if(l=o.tag,l===5||l===6||l===26||l===27){i=s=o;continue e}a=a.parentNode}}i=i.return}fD(function(){var c=s,u=nv(n),d=[];e:{var f=xD.get(e);if(f!==void 0){var h=_6,m=e;switch(e){case"keypress":if(kU(n)===0)break e;case"keydown":case"keyup":h=YK;break;case"focusin":m="focus",h=Ly;break;case"focusout":m="blur",h=Ly;break;case"beforeblur":case"afterblur":h=Ly;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=IS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=NK;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=ZK;break;case wD:case TD:case SD:h=FK;break;case ID:h=QK;break;case"scroll":case"scrollend":h=LK;break;case"wheel":h=eZ;break;case"copy":case"cut":case"paste":h=zK;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=CS;break;case"toggle":case"beforetoggle":h=nZ}var p=(t&4)!==0,b=!p&&(e==="scroll"||e==="scrollend"),E=p?f!==null?f+"Capture":null:f;p=[];for(var y=c,v;y!==null;){var _=y;if(v=_.stateNode,_=_.tag,_!==5&&_!==26&&_!==27||v===null||E===null||(_=g0(y,E),_!=null&&p.push(v0(y,_,v))),b)break;y=y.return}0<p.length&&(f=new h(f,m,null,n,u),d.push({event:f,listeners:p}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",f&&n!==q7&&(m=n.relatedTarget||n.fromElement)&&(fu(m)||m[Gh]))break e;if((h||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,h?(m=n.relatedTarget||n.toElement,h=c,m=m?fu(m):null,m!==null&&(b=$h(m),p=m.tag,m!==b||p!==5&&p!==27&&p!==6)&&(m=null)):(h=null,m=c),h!==m)){if(p=IS,_="onMouseLeave",E="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(p=CS,_="onPointerLeave",E="onPointerEnter",y="pointer"),b=h==null?f:r1(h),v=m==null?f:r1(m),f=new p(_,y+"leave",h,n,u),f.target=b,f.relatedTarget=v,_=null,fu(u)===c&&(p=new p(E,y+"enter",m,n,u),p.target=v,p.relatedTarget=b,_=p),b=_,h&&m)t:{for(p=h,E=m,y=0,v=p;v;v=Vd(v))y++;for(v=0,_=E;_;_=Vd(_))v++;for(;0<y-v;)p=Vd(p),y--;for(;0<v-y;)E=Vd(E),v--;for(;y--;){if(p===E||E!==null&&p===E.alternate)break t;p=Vd(p),E=Vd(E)}p=null}else p=null;h!==null&&bI(d,f,h,p,!1),m!==null&&b!==null&&bI(d,b,m,p,!0)}}e:{if(f=c?r1(c):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var S=kS;else if(RS(f))if(bD)S=fZ;else{S=uZ;var M=cZ}else h=f.nodeName,!h||h.toLowerCase()!=="input"||f.type!=="checkbox"&&f.type!=="radio"?c&&tv(c.elementType)&&(S=kS):S=dZ;if(S&&(S=S(e,c))){UD(d,S,n,u);break e}M&&M(e,f,c),e==="focusout"&&c&&f.type==="number"&&c.memoizedProps.value!=null&&Z7(f,"number",f.value)}switch(M=c?r1(c):window,e){case"focusin":(RS(M)||M.contentEditable==="true")&&(bf=M,J7=c,x1=null);break;case"focusout":x1=J7=bf=null;break;case"mousedown":e3=!0;break;case"contextmenu":case"mouseup":case"dragend":e3=!1,PS(d,n,u);break;case"selectionchange":if(mZ)break;case"keydown":case"keyup":PS(d,n,u)}var w;if(sv)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Uf?mD(e,n)&&(T="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(gD&&n.locale!=="ko"&&(Uf||T!=="onCompositionStart"?T==="onCompositionEnd"&&Uf&&(w=hD()):(Bl=u,iv="value"in Bl?Bl.value:Bl.textContent,Uf=!0)),M=H2(c,T),0<M.length&&(T=new xS(T,e,null,n,u),d.push({event:T,listeners:M}),w?T.data=w:(w=pD(n),w!==null&&(T.data=w)))),(w=rZ?sZ(e,n):oZ(e,n))&&(T=H2(c,"onBeforeInput"),0<T.length&&(M=new xS("onBeforeInput","beforeinput",null,n,u),d.push({event:M,listeners:T}),M.data=w)),qZ(d,e,c,n,u)}iO(d,t)})}function v0(e,t,n){return{instance:e,listener:t,currentTarget:n}}function H2(e,t){for(var n=t+"Capture",i=[];e!==null;){var r=e,s=r.stateNode;r=r.tag,r!==5&&r!==26&&r!==27||s===null||(r=g0(e,n),r!=null&&i.unshift(v0(e,r,s)),r=g0(e,t),r!=null&&i.push(v0(e,r,s))),e=e.return}return i}function Vd(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function bI(e,t,n,i,r){for(var s=t._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(a=a.tag,l!==null&&l===i)break;a!==5&&a!==26&&a!==27||c===null||(l=c,r?(c=g0(n,s),c!=null&&o.unshift(v0(n,c,l))):r||(c=g0(n,s),c!=null&&o.push(v0(n,c,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var tq=/\r\n?/g,nq=/\u0000|\uFFFD/g;function yI(e){return(typeof e=="string"?e:""+e).replace(tq,`
`).replace(nq,"")}function sO(e,t){return t=yI(t),yI(e)===t}function L6(){}function kt(e,t,n,i,r,s){switch(n){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||ih(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&ih(e,""+i);break;case"className":Ap(e,"class",i);break;case"tabIndex":Ap(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":Ap(e,n,i);break;case"style":dD(e,i,s);break;case"data":if(t!=="object"){Ap(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=MU(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(t!=="input"&&kt(e,t,"name",r.name,r,null),kt(e,t,"formEncType",r.formEncType,r,null),kt(e,t,"formMethod",r.formMethod,r,null),kt(e,t,"formTarget",r.formTarget,r,null)):(kt(e,t,"encType",r.encType,r,null),kt(e,t,"method",r.method,r,null),kt(e,t,"target",r.target,r,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=MU(""+i),e.setAttribute(n,i);break;case"onClick":i!=null&&(e.onclick=L6);break;case"onScroll":i!=null&&tt("scroll",e);break;case"onScrollEnd":i!=null&&tt("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(ne(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(ne(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}n=MU(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":i===!0?e.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":tt("beforetoggle",e),tt("toggle",e),AU(e,"popover",i);break;case"xlinkActuate":ea(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":ea(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":ea(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":ea(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":ea(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":ea(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":ea(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":ea(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":ea(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":AU(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=RK.get(n)||n,AU(e,n,i))}}function I3(e,t,n,i,r,s){switch(n){case"style":dD(e,i,s);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(ne(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(ne(60));e.innerHTML=n}}break;case"children":typeof i=="string"?ih(e,i):(typeof i=="number"||typeof i=="bigint")&&ih(e,""+i);break;case"onScroll":i!=null&&tt("scroll",e);break;case"onScrollEnd":i!=null&&tt("scrollend",e);break;case"onClick":i!=null&&(e.onclick=L6);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!sD.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),t=n.slice(2,r?n.length-7:void 0),s=e[br]||null,s=s!=null?s[n]:null,typeof s=="function"&&e.removeEventListener(t,s,r),typeof i=="function")){typeof s!="function"&&s!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,r);break e}n in e?e[n]=i:i===!0?e.setAttribute(n,""):AU(e,n,i)}}}function vi(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":tt("error",e),tt("load",e);var i=!1,r=!1,s;for(s in n)if(n.hasOwnProperty(s)){var o=n[s];if(o!=null)switch(s){case"src":i=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(ne(137,t));default:kt(e,t,s,o,n,null)}}r&&kt(e,t,"srcSet",n.srcSet,n,null),i&&kt(e,t,"src",n.src,n,null);return;case"input":tt("invalid",e);var a=s=o=r=null,l=null,c=null;for(i in n)if(n.hasOwnProperty(i)){var u=n[i];if(u!=null)switch(i){case"name":r=u;break;case"type":o=u;break;case"checked":l=u;break;case"defaultChecked":c=u;break;case"value":s=u;break;case"defaultValue":a=u;break;case"children":case"dangerouslySetInnerHTML":if(u!=null)throw Error(ne(137,t));break;default:kt(e,t,i,u,n,null)}}lD(e,s,a,l,c,o,r,!1),T2(e);return;case"select":tt("invalid",e),i=o=s=null;for(r in n)if(n.hasOwnProperty(r)&&(a=n[r],a!=null))switch(r){case"value":s=a;break;case"defaultValue":o=a;break;case"multiple":i=a;default:kt(e,t,r,a,n,null)}t=s,n=o,e.multiple=!!i,t!=null?Ff(e,!!i,t,!1):n!=null&&Ff(e,!!i,n,!0);return;case"textarea":tt("invalid",e),s=r=i=null;for(o in n)if(n.hasOwnProperty(o)&&(a=n[o],a!=null))switch(o){case"value":i=a;break;case"defaultValue":r=a;break;case"children":s=a;break;case"dangerouslySetInnerHTML":if(a!=null)throw Error(ne(91));break;default:kt(e,t,o,a,n,null)}uD(e,i,r,s),T2(e);return;case"option":for(l in n)if(n.hasOwnProperty(l)&&(i=n[l],i!=null))switch(l){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:kt(e,t,l,i,n,null)}return;case"dialog":tt("cancel",e),tt("close",e);break;case"iframe":case"object":tt("load",e);break;case"video":case"audio":for(i=0;i<E0.length;i++)tt(E0[i],e);break;case"image":tt("error",e),tt("load",e);break;case"details":tt("toggle",e);break;case"embed":case"source":case"link":tt("error",e),tt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&(i=n[c],i!=null))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(ne(137,t));default:kt(e,t,c,i,n,null)}return;default:if(tv(t)){for(u in n)n.hasOwnProperty(u)&&(i=n[u],i!==void 0&&I3(e,t,u,i,n,void 0));return}}for(a in n)n.hasOwnProperty(a)&&(i=n[a],i!=null&&kt(e,t,a,i,n,null))}function iq(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,s=null,o=null,a=null,l=null,c=null,u=null;for(h in n){var d=n[h];if(n.hasOwnProperty(h)&&d!=null)switch(h){case"checked":break;case"value":break;case"defaultValue":l=d;default:i.hasOwnProperty(h)||kt(e,t,h,null,i,d)}}for(var f in i){var h=i[f];if(d=n[f],i.hasOwnProperty(f)&&(h!=null||d!=null))switch(f){case"type":s=h;break;case"name":r=h;break;case"checked":c=h;break;case"defaultChecked":u=h;break;case"value":o=h;break;case"defaultValue":a=h;break;case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(ne(137,t));break;default:h!==d&&kt(e,t,f,h,i,d)}}K7(e,o,a,l,c,u,s,r);return;case"select":h=o=a=f=null;for(s in n)if(l=n[s],n.hasOwnProperty(s)&&l!=null)switch(s){case"value":break;case"multiple":h=l;default:i.hasOwnProperty(s)||kt(e,t,s,null,i,l)}for(r in i)if(s=i[r],l=n[r],i.hasOwnProperty(r)&&(s!=null||l!=null))switch(r){case"value":f=s;break;case"defaultValue":a=s;break;case"multiple":o=s;default:s!==l&&kt(e,t,r,s,i,l)}t=a,n=o,i=h,f!=null?Ff(e,!!n,f,!1):!!i!=!!n&&(t!=null?Ff(e,!!n,t,!0):Ff(e,!!n,n?[]:"",!1));return;case"textarea":h=f=null;for(a in n)if(r=n[a],n.hasOwnProperty(a)&&r!=null&&!i.hasOwnProperty(a))switch(a){case"value":break;case"children":break;default:kt(e,t,a,null,i,r)}for(o in i)if(r=i[o],s=n[o],i.hasOwnProperty(o)&&(r!=null||s!=null))switch(o){case"value":f=r;break;case"defaultValue":h=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(ne(91));break;default:r!==s&&kt(e,t,o,r,i,s)}cD(e,f,h);return;case"option":for(var m in n)if(f=n[m],n.hasOwnProperty(m)&&f!=null&&!i.hasOwnProperty(m))switch(m){case"selected":e.selected=!1;break;default:kt(e,t,m,null,i,f)}for(l in i)if(f=i[l],h=n[l],i.hasOwnProperty(l)&&f!==h&&(f!=null||h!=null))switch(l){case"selected":e.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:kt(e,t,l,f,i,h)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var p in n)f=n[p],n.hasOwnProperty(p)&&f!=null&&!i.hasOwnProperty(p)&&kt(e,t,p,null,i,f);for(c in i)if(f=i[c],h=n[c],i.hasOwnProperty(c)&&f!==h&&(f!=null||h!=null))switch(c){case"children":case"dangerouslySetInnerHTML":if(f!=null)throw Error(ne(137,t));break;default:kt(e,t,c,f,i,h)}return;default:if(tv(t)){for(var b in n)f=n[b],n.hasOwnProperty(b)&&f!==void 0&&!i.hasOwnProperty(b)&&I3(e,t,b,void 0,i,f);for(u in i)f=i[u],h=n[u],!i.hasOwnProperty(u)||f===h||f===void 0&&h===void 0||I3(e,t,u,f,i,h);return}}for(var E in n)f=n[E],n.hasOwnProperty(E)&&f!=null&&!i.hasOwnProperty(E)&&kt(e,t,E,null,i,f);for(d in i)f=i[d],h=n[d],!i.hasOwnProperty(d)||f===h||f==null&&h==null||kt(e,t,d,f,i,h)}var x3=null,C3=null;function V2(e){return e.nodeType===9?e:e.ownerDocument}function EI(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function oO(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function A3(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var i8=null;function rq(){var e=window.event;return e&&e.type==="popstate"?e===i8?!1:(i8=e,!0):(i8=null,!1)}var aO=typeof setTimeout=="function"?setTimeout:void 0,sq=typeof clearTimeout=="function"?clearTimeout:void 0,vI=typeof Promise=="function"?Promise:void 0,oq=typeof queueMicrotask=="function"?queueMicrotask:typeof vI<"u"?function(e){return vI.resolve(null).then(e).catch(aq)}:aO;function aq(e){setTimeout(function(){throw e})}function r8(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){e.removeChild(r),I0(t);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);I0(t)}function M3(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":M3(n),ev(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function lq(e,t,n,i){for(;e.nodeType===1;){var r=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[h0])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(s=e.getAttribute("rel"),s==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(s!==r.rel||e.getAttribute("href")!==(r.href==null?null:r.href)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||e.getAttribute("title")!==(r.title==null?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(s=e.getAttribute("src"),(s!==(r.src==null?null:r.src)||e.getAttribute("type")!==(r.type==null?null:r.type)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var s=r.name==null?null:""+r.name;if(r.type==="hidden"&&e.getAttribute("name")===s)return e}else return e;if(e=Vs(e.nextSibling),e===null)break}return null}function cq(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Vs(e.nextSibling),e===null))return null;return e}function Vs(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}function _I(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}function lO(e,t,n){switch(t=V2(n),e){case"html":if(e=t.documentElement,!e)throw Error(ne(452));return e;case"head":if(e=t.head,!e)throw Error(ne(453));return e;case"body":if(e=t.body,!e)throw Error(ne(454));return e;default:throw Error(ne(451))}}var ps=new Map,wI=new Set;function $2(e){return typeof e.getRootNode=="function"?e.getRootNode():e.ownerDocument}var ll=qt.d;qt.d={f:uq,r:dq,D:fq,C:hq,L:gq,m:mq,X:Uq,S:pq,M:bq};function uq(){var e=ll.f(),t=R6();return e||t}function dq(e){var t=Xh(e);t!==null&&t.tag===5&&t.type==="form"?lN(t):ll.r(e)}var Yh=typeof document>"u"?null:document;function cO(e,t,n){var i=Yh;if(i&&typeof t=="string"&&t){var r=ts(t);r='link[rel="'+e+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),wI.has(r)||(wI.add(r),e={rel:e,crossOrigin:n,href:t},i.querySelector(r)===null&&(t=i.createElement("link"),vi(t,"link",e),ri(t),i.head.appendChild(t)))}}function fq(e){ll.D(e),cO("dns-prefetch",e,null)}function hq(e,t){ll.C(e,t),cO("preconnect",e,t)}function gq(e,t,n){ll.L(e,t,n);var i=Yh;if(i&&e&&t){var r='link[rel="preload"][as="'+ts(t)+'"]';t==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+ts(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+ts(n.imageSizes)+'"]')):r+='[href="'+ts(e)+'"]';var s=r;switch(t){case"style":s=ch(e);break;case"script":s=Wh(e)}ps.has(s)||(e=Qt({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),ps.set(s,e),i.querySelector(r)!==null||t==="style"&&i.querySelector(Am(s))||t==="script"&&i.querySelector(Mm(s))||(t=i.createElement("link"),vi(t,"link",e),ri(t),i.head.appendChild(t)))}}function mq(e,t){ll.m(e,t);var n=Yh;if(n&&e){var i=t&&typeof t.as=="string"?t.as:"script",r='link[rel="modulepreload"][as="'+ts(i)+'"][href="'+ts(e)+'"]',s=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Wh(e)}if(!ps.has(s)&&(e=Qt({rel:"modulepreload",href:e},t),ps.set(s,e),n.querySelector(r)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Mm(s)))return}i=n.createElement("link"),vi(i,"link",e),ri(i),n.head.appendChild(i)}}}function pq(e,t,n){ll.S(e,t,n);var i=Yh;if(i&&e){var r=Pf(i).hoistableStyles,s=ch(e);t=t||"default";var o=r.get(s);if(!o){var a={loading:0,preload:null};if(o=i.querySelector(Am(s)))a.loading=5;else{e=Qt({rel:"stylesheet",href:e,"data-precedence":t},n),(n=ps.get(s))&&Pv(e,n);var l=o=i.createElement("link");ri(l),vi(l,"link",e),l._p=new Promise(function(c,u){l.onload=c,l.onerror=u}),l.addEventListener("load",function(){a.loading|=1}),l.addEventListener("error",function(){a.loading|=2}),a.loading|=4,FU(o,t,i)}o={type:"stylesheet",instance:o,count:1,state:a},r.set(s,o)}}}function Uq(e,t){ll.X(e,t);var n=Yh;if(n&&e){var i=Pf(n).hoistableScripts,r=Wh(e),s=i.get(r);s||(s=n.querySelector(Mm(r)),s||(e=Qt({src:e,async:!0},t),(t=ps.get(r))&&Fv(e,t),s=n.createElement("script"),ri(s),vi(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function bq(e,t){ll.M(e,t);var n=Yh;if(n&&e){var i=Pf(n).hoistableScripts,r=Wh(e),s=i.get(r);s||(s=n.querySelector(Mm(r)),s||(e=Qt({src:e,async:!0,type:"module"},t),(t=ps.get(r))&&Fv(e,t),s=n.createElement("script"),ri(s),vi(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function TI(e,t,n,i){var r=(r=Wl.current)?$2(r):null;if(!r)throw Error(ne(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=ch(n.href),n=Pf(r).hoistableStyles,i=n.get(t),i||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=ch(n.href);var s=Pf(r).hoistableStyles,o=s.get(e);if(o||(r=r.ownerDocument||r,o={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(e,o),(s=r.querySelector(Am(e)))&&!s._p&&(o.instance=s,o.state.loading=5),ps.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},ps.set(e,n),s||yq(r,e,n,o.state))),t&&i===null)throw Error(ne(528,""));return o}if(t&&i!==null)throw Error(ne(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Wh(n),n=Pf(r).hoistableScripts,i=n.get(t),i||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(ne(444,e))}}function ch(e){return'href="'+ts(e)+'"'}function Am(e){return'link[rel="stylesheet"]['+e+"]"}function uO(e){return Qt({},e,{"data-precedence":e.precedence,precedence:null})}function yq(e,t,n,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),vi(t,"link",n),ri(t),e.head.appendChild(t))}function Wh(e){return'[src="'+ts(e)+'"]'}function Mm(e){return"script[async]"+e}function SI(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+ts(n.href)+'"]');if(i)return t.instance=i,ri(i),i;var r=Qt({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),ri(i),vi(i,"style",r),FU(i,n.precedence,e),t.instance=i;case"stylesheet":r=ch(n.href);var s=e.querySelector(Am(r));if(s)return t.state.loading|=4,t.instance=s,ri(s),s;i=uO(n),(r=ps.get(r))&&Pv(i,r),s=(e.ownerDocument||e).createElement("link"),ri(s);var o=s;return o._p=new Promise(function(a,l){o.onload=a,o.onerror=l}),vi(s,"link",i),t.state.loading|=4,FU(s,n.precedence,e),t.instance=s;case"script":return s=Wh(n.src),(r=e.querySelector(Mm(s)))?(t.instance=r,ri(r),r):(i=n,(r=ps.get(s))&&(i=Qt({},n),Fv(i,r)),e=e.ownerDocument||e,r=e.createElement("script"),ri(r),vi(r,"link",i),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(ne(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(i=t.instance,t.state.loading|=4,FU(i,n.precedence,e));return t.instance}function FU(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,s=r,o=0;o<i.length;o++){var a=i[o];if(a.dataset.precedence===t)s=a;else if(s!==r)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Pv(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Fv(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var BU=null;function II(e,t,n){if(BU===null){var i=new Map,r=BU=new Map;r.set(n,i)}else r=BU,i=r.get(n),i||(i=new Map,r.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),r=0;r<n.length;r++){var s=n[r];if(!(s[h0]||s[Fi]||e==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var o=s.getAttribute(t)||"";o=e+o;var a=i.get(o);a?a.push(s):i.set(o,[s])}}return i}function xI(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function Eq(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function dO(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var _0=null;function vq(){}function _q(e,t,n){if(_0===null)throw Error(ne(475));var i=_0;if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var r=ch(n.href),s=e.querySelector(Am(r));if(s){e=s._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(i.count++,i=G2.bind(i),e.then(i,i)),t.state.loading|=4,t.instance=s,ri(s);return}s=e.ownerDocument||e,n=uO(n),(r=ps.get(r))&&Pv(n,r),s=s.createElement("link"),ri(s);var o=s;o._p=new Promise(function(a,l){o.onload=a,o.onerror=l}),vi(s,"link",n),t.instance=s}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(t,e),(e=t.state.preload)&&!(t.state.loading&3)&&(i.count++,t=G2.bind(i),e.addEventListener("load",t),e.addEventListener("error",t))}}function wq(){if(_0===null)throw Error(ne(475));var e=_0;return e.stylesheets&&e.count===0&&R3(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&R3(e,e.stylesheets),e.unsuspend){var i=e.unsuspend;e.unsuspend=null,i()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}function G2(){if(this.count--,this.count===0){if(this.stylesheets)R3(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var X2=null;function R3(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,X2=new Map,t.forEach(Tq,e),X2=null,G2.call(e))}function Tq(e,t){if(!(t.state.loading&4)){var n=X2.get(e);if(n)var i=n.get(null);else{n=new Map,X2.set(e,n);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<r.length;s++){var o=r[s];(o.nodeName==="LINK"||o.getAttribute("media")!=="not all")&&(n.set(o.dataset.precedence,o),i=o)}i&&n.set(null,i)}r=t.instance,o=r.getAttribute("data-precedence"),s=n.get(o)||i,s===i&&n.set(null,r),n.set(o,r),this.count++,i=G2.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),s?s.parentNode.insertBefore(r,s.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(r,e.firstChild)),t.state.loading|=4}}var w0={$$typeof:wa,Provider:null,Consumer:null,_currentValue:Su,_currentValue2:Su,_threadCount:0};function Sq(e,t,n,i,r,s,o,a){this.tag=1,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ay(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ay(0),this.hiddenUpdates=Ay(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=s,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=a,this.incompleteTransitions=new Map}function fO(e,t,n,i,r,s,o,a,l,c,u,d){return e=new Sq(e,t,n,o,a,l,c,d),t=1,s===!0&&(t|=24),s=ss(3,null,null,t),e.current=s,s.stateNode=e,t=fv(),t.refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:i,isDehydrated:n,cache:t},xv(s),e}function hO(e){return e?(e=vf,e):vf}function gO(e,t,n,i,r,s){r=hO(r),i.context===null?i.context=r:i.pendingContext=r,i=Kl(t),i.payload={element:n},s=s===void 0?null:s,s!==null&&(i.callback=s),n=Zl(e,i,t),n!==null&&(Qi(n,e,t),L1(n,e,t))}function CI(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Bv(e,t){CI(e,t),(e=e.alternate)&&CI(e,t)}function mO(e){if(e.tag===13){var t=fc(e,67108864);t!==null&&Qi(t,e,67108864),Bv(e,67108864)}}var j2=!0;function Iq(e,t,n,i){var r=je.T;je.T=null;var s=qt.p;try{qt.p=2,zv(e,t,n,i)}finally{qt.p=s,je.T=r}}function xq(e,t,n,i){var r=je.T;je.T=null;var s=qt.p;try{qt.p=8,zv(e,t,n,i)}finally{qt.p=s,je.T=r}}function zv(e,t,n,i){if(j2){var r=k3(i);if(r===null)n8(e,t,i,Y2,n),AI(e,i);else if(Aq(r,e,t,n,i))i.stopPropagation();else if(AI(e,i),t&4&&-1<Cq.indexOf(e)){for(;r!==null;){var s=Xh(r);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var o=Qc(s.pendingLanes);if(o!==0){var a=s;for(a.pendingLanes|=2,a.entangledLanes|=2;o;){var l=1<<31-Nr(o);a.entanglements[1]|=l,o&=~l}Yo(s),!(fn&6)&&(P2=Do()+500,Cm(0))}}break;case 13:a=fc(s,2),a!==null&&Qi(a,s,2),R6(),Bv(s,2)}if(s=k3(i),s===null&&n8(e,t,i,Y2,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else n8(e,t,i,null,n)}}function k3(e){return e=nv(e),Hv(e)}var Y2=null;function Hv(e){if(Y2=null,e=fu(e),e!==null){var t=$h(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=YL(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Y2=e,null}function pO(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(hK()){case KL:return 2;case ZL:return 8;case w2:case gK:return 32;case qL:return 268435456;default:return 32}default:return 32}}var L3=!1,Jl=null,ec=null,tc=null,T0=new Map,S0=new Map,Dl=[],Cq="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function AI(e,t){switch(e){case"focusin":case"focusout":Jl=null;break;case"dragenter":case"dragleave":ec=null;break;case"mouseover":case"mouseout":tc=null;break;case"pointerover":case"pointerout":T0.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":S0.delete(t.pointerId)}}function Lg(e,t,n,i,r,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},t!==null&&(t=Xh(t),t!==null&&mO(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function Aq(e,t,n,i,r){switch(t){case"focusin":return Jl=Lg(Jl,e,t,n,i,r),!0;case"dragenter":return ec=Lg(ec,e,t,n,i,r),!0;case"mouseover":return tc=Lg(tc,e,t,n,i,r),!0;case"pointerover":var s=r.pointerId;return T0.set(s,Lg(T0.get(s)||null,e,t,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,S0.set(s,Lg(S0.get(s)||null,e,t,n,i,r)),!0}return!1}function UO(e){var t=fu(e.target);if(t!==null){var n=$h(t);if(n!==null){if(t=n.tag,t===13){if(t=YL(n),t!==null){e.blockedOn=t,wK(e.priority,function(){if(n.tag===13){var i=Or(),r=fc(n,i);r!==null&&Qi(r,n,i),Bv(n,i)}});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function zU(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=k3(e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);q7=i,n.target.dispatchEvent(i),q7=null}else return t=Xh(n),t!==null&&mO(t),e.blockedOn=n,!1;t.shift()}return!0}function MI(e,t,n){zU(e)&&n.delete(t)}function Mq(){L3=!1,Jl!==null&&zU(Jl)&&(Jl=null),ec!==null&&zU(ec)&&(ec=null),tc!==null&&zU(tc)&&(tc=null),T0.forEach(MI),S0.forEach(MI)}function Fp(e,t){e.blockedOn===t&&(e.blockedOn=null,L3||(L3=!0,Zn.unstable_scheduleCallback(Zn.unstable_NormalPriority,Mq)))}var Bp=null;function RI(e){Bp!==e&&(Bp=e,Zn.unstable_scheduleCallback(Zn.unstable_NormalPriority,function(){Bp===e&&(Bp=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],r=e[t+2];if(typeof i!="function"){if(Hv(i||n)===null)continue;break}var s=Xh(n);s!==null&&(e.splice(t,3),t-=3,a3(s,{pending:!0,data:r,method:n.method,action:i},i,r))}}))}function I0(e){function t(l){return Fp(l,e)}Jl!==null&&Fp(Jl,e),ec!==null&&Fp(ec,e),tc!==null&&Fp(tc,e),T0.forEach(t),S0.forEach(t);for(var n=0;n<Dl.length;n++){var i=Dl[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<Dl.length&&(n=Dl[0],n.blockedOn===null);)UO(n),n.blockedOn===null&&Dl.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var r=n[i],s=n[i+1],o=r[br]||null;if(typeof s=="function")o||RI(n);else if(o){var a=null;if(s&&s.hasAttribute("formAction")){if(r=s,o=s[br]||null)a=o.formAction;else if(Hv(r)!==null)continue}else a=o.action;typeof a=="function"?n[i+1]=a:(n.splice(i,3),i-=3),RI(n)}}}function Vv(e){this._internalRoot=e}D6.prototype.render=Vv.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ne(409));var n=t.current,i=Or();gO(n,i,e,t,null,null)};D6.prototype.unmount=Vv.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;e.tag===0&&Gf(),gO(e.current,2,null,e,null,null),R6(),t[Gh]=null}};function D6(e){this._internalRoot=e}D6.prototype.unstable_scheduleHydration=function(e){if(e){var t=iD();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dl.length&&t!==0&&t<Dl[n].priority;n++);Dl.splice(n,0,e),n===0&&UO(e)}};var kI=VL.version;if(kI!=="19.0.0")throw Error(ne(527,kI,"19.0.0"));qt.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ne(188)):(e=Object.keys(e).join(","),Error(ne(268,e)));return e=uK(t),e=e!==null?WL(e):null,e=e===null?null:e.stateNode,e};var Rq={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:je,findFiberByHostInstance:fu,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zp.isDisabled&&zp.supportsFiber)try{ym=zp.inject(Rq),Dr=zp}catch{}}y6.createRoot=function(e,t){if(!$L(e))throw Error(ne(299));var n=!1,i="",r=gN,s=mN,o=pN,a=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(r=t.onUncaughtError),t.onCaughtError!==void 0&&(s=t.onCaughtError),t.onRecoverableError!==void 0&&(o=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(a=t.unstable_transitionCallbacks)),t=fO(e,1,!1,null,null,n,i,r,s,o,a,null),e[Gh]=t.current,Ov(e.nodeType===8?e.parentNode:e),new Vv(t)};y6.hydrateRoot=function(e,t,n){if(!$L(e))throw Error(ne(299));var i=!1,r="",s=gN,o=mN,a=pN,l=null,c=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(o=n.onCaughtError),n.onRecoverableError!==void 0&&(a=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(l=n.unstable_transitionCallbacks),n.formState!==void 0&&(c=n.formState)),t=fO(e,1,!0,t,n??null,i,r,s,o,a,l,c),t.context=hO(null),n=t.current,i=Or(),r=Kl(i),r.callback=null,Zl(n,r,i),t.current.lanes=i,vm(t,i),Yo(t),e[Gh]=t.current,Ov(e),new D6(t)};y6.version="19.0.0";function bO(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(bO)}catch(e){console.error(e)}}bO(),OL.exports=y6;var kq=OL.exports;const Lq="modulepreload",Dq=function(e){return"/"+e},LI={},Ue=function(t,n,i){let r=Promise.resolve();return n&&n.length>0&&(document.getElementsByTagName("link"),r=Promise.all(n.map(s=>{if(s=Dq(s),s in LI)return;LI[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${a}`))return;const l=document.createElement("link");if(l.rel=o?"stylesheet":Lq,o||(l.as="script",l.crossOrigin=""),l.href=s,document.head.appendChild(l),o)return new Promise((c,u)=>{l.addEventListener("load",c),l.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${s}`)))})}))),r.then(()=>t()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};function Nq(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:i,onRegistered:r,onRegisteredSW:s,onRegisterError:o}=e;let a,l;const c=async(d=!0)=>{await l};async function u(){if("serviceWorker"in navigator){if(a=await Ue(()=>import("./workbox-window.prod.es5-B9K5rw8f.js"),__vite__mapDeps([])).then(({Workbox:d})=>new d("/sw.js",{scope:"/",type:"classic"})).catch(d=>{o==null||o(d)}),!a)return;a.addEventListener("activated",d=>{(d.isUpdate||d.isExternal)&&window.location.reload()}),a.addEventListener("installed",d=>{d.isUpdate||i==null||i()}),a.register({immediate:t}).then(d=>{s?s("/sw.js",d):r==null||r(d)}).catch(d=>{o==null||o(d)})}}return l=u(),c}const Mt=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Dt=globalThis,wd=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Ru="9.0.1";function N6(){return O6(Dt),Dt}function O6(e){const t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||Ru,t[Ru]=t[Ru]||{}}function P6(e,t,n=Dt){const i=n.__SENTRY__=n.__SENTRY__||{},r=i[Ru]=i[Ru]||{};return r[e]||(r[e]=t())}const Oq="Sentry Logger ",W2=["debug","info","warn","error","log","assert","trace"],K2={};function Kh(e){if(!("console"in Dt))return e();const t=Dt.console,n={},i=Object.keys(K2);i.forEach(r=>{const s=K2[r];n[r]=t[r],t[r]=s});try{return e()}finally{i.forEach(r=>{t[r]=n[r]})}}function Pq(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return wd?W2.forEach(n=>{t[n]=(...i)=>{e&&Kh(()=>{Dt.console[n](`${Oq}[${n}]:`,...i)})}}):W2.forEach(n=>{t[n]=()=>{}}),t}const Fe=P6("logger",Pq),yO=50,ju="?",DI=/\(error: (.*)\)/,NI=/captureMessage|captureException/;function EO(...e){const t=e.sort((n,i)=>n[0]-i[0]).map(n=>n[1]);return(n,i=0,r=0)=>{const s=[],o=n.split(`
`);for(let a=i;a<o.length;a++){const l=o[a];if(l.length>1024)continue;const c=DI.test(l)?l.replace(DI,"$1"):l;if(!c.match(/\S*Error: /)){for(const u of t){const d=u(c);if(d){s.push(d);break}}if(s.length>=yO+r)break}}return Bq(s.slice(r))}}function Fq(e){return Array.isArray(e)?EO(...e):e}function Bq(e){if(!e.length)return[];const t=Array.from(e);return/sentryWrapped/.test(Hp(t).function||"")&&t.pop(),t.reverse(),NI.test(Hp(t).function||"")&&(t.pop(),NI.test(Hp(t).function||"")&&t.pop()),t.slice(0,yO).map(n=>({...n,filename:n.filename||Hp(t).filename,function:n.function||ju}))}function Hp(e){return e[e.length-1]||{}}const s8="<anonymous>";function pc(e){try{return!e||typeof e!="function"?s8:e.name||s8}catch{return s8}}function OI(e){const t=e.exception;if(t){const n=[];try{return t.values.forEach(i=>{i.stacktrace.frames&&n.push(...i.stacktrace.frames)}),n}catch{return}}}const HU={},PI={};function Td(e,t){HU[e]=HU[e]||[],HU[e].push(t)}function Sd(e,t){if(!PI[e]){PI[e]=!0;try{t()}catch(n){wd&&Fe.error(`Error while instrumenting ${e}`,n)}}}function $s(e,t){const n=e&&HU[e];if(n)for(const i of n)try{i(t)}catch(r){wd&&Fe.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${pc(i)}
Error:`,r)}}let o8=null;function zq(e){const t="error";Td(t,e),Sd(t,Hq)}function Hq(){o8=Dt.onerror,Dt.onerror=function(e,t,n,i,r){return $s("error",{column:i,error:r,line:n,msg:e,url:t}),o8?o8.apply(this,arguments):!1},Dt.onerror.__SENTRY_INSTRUMENTED__=!0}let a8=null;function Vq(e){const t="unhandledrejection";Td(t,e),Sd(t,$q)}function $q(){a8=Dt.onunhandledrejection,Dt.onunhandledrejection=function(e){return $s("unhandledrejection",e),a8?a8.apply(this,arguments):!0},Dt.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const vO=Object.prototype.toString;function $v(e){switch(vO.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return Yu(e,Error)}}function Zh(e,t){return vO.call(e)===`[object ${t}]`}function _O(e){return Zh(e,"ErrorEvent")}function FI(e){return Zh(e,"DOMError")}function Gq(e){return Zh(e,"DOMException")}function Ra(e){return Zh(e,"String")}function Gv(e){return typeof e=="object"&&e!==null&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function Xv(e){return e===null||Gv(e)||typeof e!="object"&&typeof e!="function"}function uh(e){return Zh(e,"Object")}function F6(e){return typeof Event<"u"&&Yu(e,Event)}function Xq(e){return typeof Element<"u"&&Yu(e,Element)}function jq(e){return Zh(e,"RegExp")}function B6(e){return!!(e!=null&&e.then&&typeof e.then=="function")}function Yq(e){return uh(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function Yu(e,t){try{return e instanceof t}catch{return!1}}function wO(e){return!!(typeof e=="object"&&e!==null&&(e.__isVue||e._isVue))}const jv=Dt,Wq=80;function TO(e,t={}){if(!e)return"<unknown>";try{let n=e;const i=5,r=[];let s=0,o=0;const a=" > ",l=a.length;let c;const u=Array.isArray(t)?t:t.keyAttrs,d=!Array.isArray(t)&&t.maxStringLength||Wq;for(;n&&s++<i&&(c=Kq(n,u),!(c==="html"||s>1&&o+r.length*l+c.length>=d));)r.push(c),o+=c.length,n=n.parentNode;return r.reverse().join(a)}catch{return"<unknown>"}}function Kq(e,t){const n=e,i=[];if(!(n!=null&&n.tagName))return"";if(jv.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}i.push(n.tagName.toLowerCase());const r=t!=null&&t.length?t.filter(o=>n.getAttribute(o)).map(o=>[o,n.getAttribute(o)]):null;if(r!=null&&r.length)r.forEach(o=>{i.push(`[${o[0]}="${o[1]}"]`)});else{n.id&&i.push(`#${n.id}`);const o=n.className;if(o&&Ra(o)){const a=o.split(/\s+/);for(const l of a)i.push(`.${l}`)}}const s=["aria-label","type","name","title","alt"];for(const o of s){const a=n.getAttribute(o);a&&i.push(`[${o}="${a}"]`)}return i.join("")}function Yv(){try{return jv.document.location.href}catch{return""}}function Zq(e){if(!jv.HTMLElement)return null;let t=e;const n=5;for(let i=0;i<n;i++){if(!t)return null;if(t instanceof HTMLElement){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}t=t.parentNode}return null}function Xf(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function Z2(e,t){if(!Array.isArray(e))return"";const n=[];for(let i=0;i<e.length;i++){const r=e[i];try{wO(r)?n.push("[VueViewModel]"):n.push(String(r))}catch{n.push("[value cannot be serialized]")}}return n.join(t)}function qq(e,t,n=!1){return Ra(e)?jq(t)?t.test(e):Ra(t)?n?e===t:e.includes(t):!1:!1}function z6(e,t=[],n=!1){return t.some(i=>qq(e,i,n))}function Mr(e,t,n){if(!(t in e))return;const i=e[t],r=n(i);typeof r=="function"&&SO(r,i);try{e[t]=r}catch{wd&&Fe.log(`Failed to replace method "${t}" in object`,e)}}function Wu(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch{wd&&Fe.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function SO(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,Wu(e,"__sentry_original__",t)}catch{}}function Wv(e){return e.__sentry_original__}function IO(e){if($v(e))return{message:e.message,name:e.name,stack:e.stack,...zI(e)};if(F6(e)){const t={type:e.type,target:BI(e.target),currentTarget:BI(e.currentTarget),...zI(e)};return typeof CustomEvent<"u"&&Yu(e,CustomEvent)&&(t.detail=e.detail),t}else return e}function BI(e){try{return Xq(e)?TO(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function zI(e){if(typeof e=="object"&&e!==null){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}else return{}}function Qq(e,t=40){const n=Object.keys(IO(e));n.sort();const i=n[0];if(!i)return"[object has no keys]";if(i.length>=t)return Xf(i,t);for(let r=n.length;r>0;r--){const s=n.slice(0,r).join(", ");if(!(s.length>t))return r===n.length?s:Xf(s,t)}return""}function Rr(e){return D3(e,new Map)}function D3(e,t){if(Jq(e)){const n=t.get(e);if(n!==void 0)return n;const i={};t.set(e,i);for(const r of Object.getOwnPropertyNames(e))typeof e[r]<"u"&&(i[r]=D3(e[r],t));return i}if(Array.isArray(e)){const n=t.get(e);if(n!==void 0)return n;const i=[];return t.set(e,i),e.forEach(r=>{i.push(D3(r,t))}),i}return e}function Jq(e){if(!uh(e))return!1;try{const t=Object.getPrototypeOf(e).constructor.name;return!t||t==="Object"}catch{return!0}}const xO=1e3;function Rm(){return Date.now()/xO}function eQ(){const{performance:e}=Dt;if(!(e!=null&&e.now))return Rm;const t=Date.now()-e.now(),n=e.timeOrigin==null?t:e.timeOrigin;return()=>(n+e.now())/xO}const ka=eQ();function us(){const e=Dt,t=e.crypto||e.msCrypto;let n=()=>Math.random()*16;try{if(t!=null&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t!=null&&t.getRandomValues&&(n=()=>{const i=new Uint8Array(1);return t.getRandomValues(i),i[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,i=>(i^(n()&15)>>i/4).toString(16))}function CO(e){var t,n;return(n=(t=e.exception)==null?void 0:t.values)==null?void 0:n[0]}function xl(e){const{message:t,event_id:n}=e;if(t)return t;const i=CO(e);return i?i.type&&i.value?`${i.type}: ${i.value}`:i.type||i.value||n||"<unknown>":n||"<unknown>"}function N3(e,t,n){const i=e.exception=e.exception||{},r=i.values=i.values||[],s=r[0]=r[0]||{};s.value||(s.value=t||""),s.type||(s.type="Error")}function Ku(e,t){const n=CO(e);if(!n)return;const i={type:"generic",handled:!0},r=n.mechanism;if(n.mechanism={...i,...r,...t},t&&"data"in t){const s={...r==null?void 0:r.data,...t.data};n.mechanism.data=s}}function HI(e){if(tQ(e))return!0;try{Wu(e,"__sentry_captured__",!0)}catch{}return!1}function tQ(e){try{return e.__sentry_captured__}catch{}}var ca;(function(e){e[e.PENDING=0]="PENDING";const n=1;e[e.RESOLVED=n]="RESOLVED";const i=2;e[e.REJECTED=i]="REJECTED"})(ca||(ca={}));function Zu(e){return new Uc(t=>{t(e)})}function q2(e){return new Uc((t,n)=>{n(e)})}class Uc{constructor(t){this._state=ca.PENDING,this._handlers=[],this._runExecutor(t)}then(t,n){return new Uc((i,r)=>{this._handlers.push([!1,s=>{if(!t)i(s);else try{i(t(s))}catch(o){r(o)}},s=>{if(!n)r(s);else try{i(n(s))}catch(o){r(o)}}]),this._executeHandlers()})}catch(t){return this.then(n=>n,t)}finally(t){return new Uc((n,i)=>{let r,s;return this.then(o=>{s=!1,r=o,t&&t()},o=>{s=!0,r=o,t&&t()}).then(()=>{if(s){i(r);return}n(r)})})}_executeHandlers(){if(this._state===ca.PENDING)return;const t=this._handlers.slice();this._handlers=[],t.forEach(n=>{n[0]||(this._state===ca.RESOLVED&&n[1](this._value),this._state===ca.REJECTED&&n[2](this._value),n[0]=!0)})}_runExecutor(t){const n=(s,o)=>{if(this._state===ca.PENDING){if(B6(o)){o.then(i,r);return}this._state=s,this._value=o,this._executeHandlers()}},i=s=>{n(ca.RESOLVED,s)},r=s=>{n(ca.REJECTED,s)};try{t(i,r)}catch(s){r(s)}}}function nQ(e){const t=ka(),n={sid:us(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>rQ(n)};return e&&dh(n,e),n}function dh(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||ka(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:us()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{const n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function iQ(e,t){let n={};e.status==="ok"&&(n={status:"exited"}),dh(e,n)}function rQ(e){return Rr({sid:`${e.sid}`,init:e.init,started:new Date(e.started*1e3).toISOString(),timestamp:new Date(e.timestamp*1e3).toISOString(),status:e.status,errors:e.errors,did:typeof e.did=="number"||typeof e.did=="string"?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}function VI(){return us()}function AO(){return us().substring(16)}function km(e,t,n=2){if(!t||typeof t!="object"||n<=0)return t;if(e&&Object.keys(t).length===0)return e;const i={...e};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=km(i[r],t[r],n-1));return i}const O3="_sentrySpan";function $I(e,t){t?Wu(e,O3,t):delete e[O3]}function GI(e){return e[O3]}const sQ=100;class Bo{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:VI(),sampleRand:Math.random()}}clone(){const t=new Bo;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._extra={...this._extra},t._contexts={...this._contexts},this._contexts.flags&&(t._contexts.flags={values:[...this._contexts.flags.values]}),t._user=this._user,t._level=this._level,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t._lastEventId=this._lastEventId,$I(t,GI(this)),t}setClient(t){this._client=t}setLastEventId(t){this._lastEventId=t}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&dh(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,n){return this._tags={...this._tags,[t]:n},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,n){return this._extra={...this._extra,[t]:n},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,n){return n===null?delete this._contexts[t]:this._contexts[t]=n,this._notifyScopeListeners(),this}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;const n=typeof t=="function"?t(this):t,i=n instanceof Bo?n.getScopeData():uh(n)?t:void 0,{tags:r,extra:s,user:o,contexts:a,level:l,fingerprint:c=[],propagationContext:u}=i||{};return this._tags={...this._tags,...r},this._extra={...this._extra,...s},this._contexts={...this._contexts,...a},o&&Object.keys(o).length&&(this._user=o),l&&(this._level=l),c.length&&(this._fingerprint=c),u&&(this._propagationContext=u),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,$I(this,void 0),this._attachments=[],this.setPropagationContext({traceId:VI(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(t,n){var s;const i=typeof n=="number"?n:sQ;if(i<=0)return this;const r={timestamp:Rm(),...t};return this._breadcrumbs.push(r),this._breadcrumbs.length>i&&(this._breadcrumbs=this._breadcrumbs.slice(-i),(s=this._client)==null||s.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:GI(this)}}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata=km(this._sdkProcessingMetadata,t,2),this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,n){const i=(n==null?void 0:n.event_id)||us();if(!this._client)return Fe.warn("No client configured on scope - will not capture exception!"),i;const r=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:r,...n,event_id:i},this),i}captureMessage(t,n,i){const r=(i==null?void 0:i.event_id)||us();if(!this._client)return Fe.warn("No client configured on scope - will not capture message!"),r;const s=new Error(t);return this._client.captureMessage(t,n,{originalException:t,syntheticException:s,...i,event_id:r},this),r}captureEvent(t,n){const i=(n==null?void 0:n.event_id)||us();return this._client?(this._client.captureEvent(t,{...n,event_id:i},this),i):(Fe.warn("No client configured on scope - will not capture event!"),i)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}}function oQ(){return P6("defaultCurrentScope",()=>new Bo)}function aQ(){return P6("defaultIsolationScope",()=>new Bo)}class lQ{constructor(t,n){let i;t?i=t:i=new Bo;let r;n?r=n:r=new Bo,this._stack=[{scope:i}],this._isolationScope=r}withScope(t){const n=this._pushScope();let i;try{i=t(n)}catch(r){throw this._popScope(),r}return B6(i)?i.then(r=>(this._popScope(),r),r=>{throw this._popScope(),r}):(this._popScope(),i)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const t=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:t}),t}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}}function fh(){const e=N6(),t=O6(e);return t.stack=t.stack||new lQ(oQ(),aQ())}function cQ(e){return fh().withScope(e)}function uQ(e,t){const n=fh();return n.withScope(()=>(n.getStackTop().scope=e,t(e)))}function XI(e){return fh().withScope(()=>e(fh().getIsolationScope()))}function dQ(){return{withIsolationScope:XI,withScope:cQ,withSetScope:uQ,withSetIsolationScope:(e,t)=>XI(t),getCurrentScope:()=>fh().getScope(),getIsolationScope:()=>fh().getIsolationScope()}}function Kv(e){const t=O6(e);return t.acs?t.acs:dQ()}function cl(){const e=N6();return Kv(e).getCurrentScope()}function Lm(){const e=N6();return Kv(e).getIsolationScope()}function fQ(){return P6("globalScope",()=>new Bo)}function Zv(...e){const t=N6(),n=Kv(t);if(e.length===2){const[i,r]=e;return i?n.withSetScope(i,r):n.withScope(r)}return n.withScope(e[0])}function Vi(){return cl().getClient()}function hQ(e){const t=e.getPropagationContext(),{traceId:n,parentSpanId:i,propagationSpanId:r}=t;return Rr({trace_id:n,span_id:r||AO(),parent_span_id:i})}const gQ="sentry.source",mQ="sentry.sample_rate",pQ="sentry.op",UQ="sentry.origin",MO="sentry.profile_id",RO="sentry.exclusive_time",bQ=0,yQ=1,EQ="_sentryScope",vQ="_sentryIsolationScope";function kO(e){return{scope:e[EQ],isolationScope:e[vQ]}}function _Q(e){if(typeof e=="boolean")return Number(e);const t=typeof e=="string"?parseFloat(e):e;if(!(typeof t!="number"||isNaN(t)||t<0||t>1))return t}const wQ="sentry-",TQ=/^sentry-/;function SQ(e){const t=IQ(e);if(!t)return;const n=Object.entries(t).reduce((i,[r,s])=>{if(r.match(TQ)){const o=r.slice(wQ.length);i[o]=s}return i},{});if(Object.keys(n).length>0)return n}function IQ(e){if(!(!e||!Ra(e)&&!Array.isArray(e)))return Array.isArray(e)?e.reduce((t,n)=>{const i=jI(n);return Object.entries(i).forEach(([r,s])=>{t[r]=s}),t},{}):jI(e)}function jI(e){return e.split(",").map(t=>t.split("=").map(n=>decodeURIComponent(n.trim()))).reduce((t,[n,i])=>(n&&i&&(t[n]=i),t),{})}const xQ=1;let YI=!1;function CQ(e){const{spanId:t,traceId:n,isRemote:i}=e.spanContext(),r=i?t:qv(e).parent_span_id,s=kO(e).scope,o=i?(s==null?void 0:s.getPropagationContext().propagationSpanId)||AO():t;return Rr({parent_span_id:r,span_id:o,trace_id:n})}function WI(e){return typeof e=="number"?KI(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?KI(e.getTime()):ka()}function KI(e){return e>9999999999?e/1e3:e}function qv(e){if(MQ(e))return e.getSpanJSON();const{spanId:t,traceId:n}=e.spanContext();if(AQ(e)){const{attributes:i,startTime:r,name:s,endTime:o,parentSpanId:a,status:l}=e;return Rr({span_id:t,trace_id:n,data:i,description:s,parent_span_id:a,start_timestamp:WI(r),timestamp:WI(o)||void 0,status:kQ(l),op:i[pQ],origin:i[UQ]})}return{span_id:t,trace_id:n,start_timestamp:0,data:{}}}function AQ(e){const t=e;return!!t.attributes&&!!t.startTime&&!!t.name&&!!t.endTime&&!!t.status}function MQ(e){return typeof e.getSpanJSON=="function"}function RQ(e){const{traceFlags:t}=e.spanContext();return t===xQ}function kQ(e){if(!(!e||e.code===bQ))return e.code===yQ?"ok":e.message||"unknown_error"}const LQ="_sentryRootSpan";function LO(e){return e[LQ]||e}function ZI(){YI||(Kh(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly.")}),YI=!0)}function DQ(e){var n;if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const t=e||((n=Vi())==null?void 0:n.getOptions());return!!t&&(t.tracesSampleRate!=null||!!t.tracesSampler)}const Qv="production",NQ="_frozenDsc";function DO(e,t){const n=t.getOptions(),{publicKey:i}=t.getDsn()||{},r=Rr({environment:n.environment||Qv,release:n.release,public_key:i,trace_id:e});return t.emit("createDsc",r),r}function OQ(e,t){const n=t.getPropagationContext();return n.dsc||DO(n.traceId,e)}function PQ(e){var m;const t=Vi();if(!t)return{};const n=LO(e),i=qv(n),r=i.data,s=n.spanContext().traceState,o=(s==null?void 0:s.get("sentry.sample_rate"))??r[mQ];function a(p){return(typeof o=="number"||typeof o=="string")&&(p.sample_rate=`${o}`),p}const l=n[NQ];if(l)return a(l);const c=s==null?void 0:s.get("sentry.dsc"),u=c&&SQ(c);if(u)return a(u);const d=DO(e.spanContext().traceId,t),f=r[gQ],h=i.description;return f!=="url"&&h&&(d.transaction=h),DQ()&&(d.sampled=String(RQ(n)),d.sample_rand=(s==null?void 0:s.get("sentry.sample_rand"))??((m=kO(n).scope)==null?void 0:m.getPropagationContext().sampleRand.toString())),a(d),t.emit("createDsc",d,n),d}const FQ=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function BQ(e){return e==="http"||e==="https"}function Jv(e,t=!1){const{host:n,path:i,pass:r,port:s,projectId:o,protocol:a,publicKey:l}=e;return`${a}://${l}${t&&r?`:${r}`:""}@${n}${s?`:${s}`:""}/${i&&`${i}/`}${o}`}function zQ(e){const t=FQ.exec(e);if(!t){Kh(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});return}const[n,i,r="",s="",o="",a=""]=t.slice(1);let l="",c=a;const u=c.split("/");if(u.length>1&&(l=u.slice(0,-1).join("/"),c=u.pop()),c){const d=c.match(/^\d+/);d&&(c=d[0])}return NO({host:s,pass:r,path:l,projectId:c,port:o,protocol:n,publicKey:i})}function NO(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function HQ(e){if(!wd)return!0;const{port:t,projectId:n,protocol:i}=e;return["protocol","publicKey","host","projectId"].find(o=>e[o]?!1:(Fe.error(`Invalid Sentry Dsn: ${o} missing`),!0))?!1:n.match(/^\d+$/)?BQ(i)?t&&isNaN(parseInt(t,10))?(Fe.error(`Invalid Sentry Dsn: Invalid port ${t}`),!1):!0:(Fe.error(`Invalid Sentry Dsn: Invalid protocol ${i}`),!1):(Fe.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function VQ(e){const t=typeof e=="string"?zQ(e):NO(e);if(!(!t||!HQ(t)))return t}function ua(e,t=100,n=1/0){try{return P3("",e,t,n)}catch(i){return{ERROR:`**non-serializable** (${i})`}}}function OO(e,t=3,n=100*1024){const i=ua(e,t);return jQ(i)>n?OO(e,t-1,n):i}function P3(e,t,n=1/0,i=1/0,r=YQ()){const[s,o]=r;if(t==null||["boolean","string"].includes(typeof t)||typeof t=="number"&&Number.isFinite(t))return t;const a=$Q(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;const l=typeof t.__sentry_override_normalization_depth__=="number"?t.__sentry_override_normalization_depth__:n;if(l===0)return a.replace("object ","");if(s(t))return"[Circular ~]";const c=t;if(c&&typeof c.toJSON=="function")try{const h=c.toJSON();return P3("",h,l-1,i,r)}catch{}const u=Array.isArray(t)?[]:{};let d=0;const f=IO(t);for(const h in f){if(!Object.prototype.hasOwnProperty.call(f,h))continue;if(d>=i){u[h]="[MaxProperties ~]";break}const m=f[h];u[h]=P3(h,m,l-1,i,r),d++}return o(t),u}function $Q(e,t){try{if(e==="domain"&&t&&typeof t=="object"&&t._events)return"[Domain]";if(e==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&t===global)return"[Global]";if(typeof window<"u"&&t===window)return"[Window]";if(typeof document<"u"&&t===document)return"[Document]";if(wO(t))return"[VueViewModel]";if(Yq(t))return"[SyntheticEvent]";if(typeof t=="number"&&!Number.isFinite(t))return`[${t}]`;if(typeof t=="function")return`[Function: ${pc(t)}]`;if(typeof t=="symbol")return`[${String(t)}]`;if(typeof t=="bigint")return`[BigInt: ${String(t)}]`;const n=GQ(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function GQ(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}function XQ(e){return~-encodeURI(e).split(/%..|./).length}function jQ(e){return XQ(JSON.stringify(e))}function YQ(){const e=new WeakSet;function t(i){return e.has(i)?!0:(e.add(i),!1)}function n(i){e.delete(i)}return[t,n]}function H6(e,t=[]){return[e,t]}function WQ(e,t){const[n,i]=e;return[n,[...i,t]]}function qI(e,t){const n=e[1];for(const i of n){const r=i[0].type;if(t(i,r))return!0}return!1}function F3(e){const t=O6(Dt);return t.encodePolyfill?t.encodePolyfill(e):new TextEncoder().encode(e)}function KQ(e){const[t,n]=e;let i=JSON.stringify(t);function r(s){typeof i=="string"?i=typeof s=="string"?i+s:[F3(i),s]:i.push(typeof s=="string"?F3(s):s)}for(const s of n){const[o,a]=s;if(r(`
${JSON.stringify(o)}
`),typeof a=="string"||a instanceof Uint8Array)r(a);else{let l;try{l=JSON.stringify(a)}catch{l=JSON.stringify(ua(a))}r(l)}}return typeof i=="string"?i:ZQ(i)}function ZQ(e){const t=e.reduce((r,s)=>r+s.length,0),n=new Uint8Array(t);let i=0;for(const r of e)n.set(r,i),i+=r.length;return n}function qQ(e){const t=typeof e.data=="string"?F3(e.data):e.data;return[Rr({type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),t]}const QQ={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security"};function QI(e){return QQ[e]}function PO(e){if(!(e!=null&&e.sdk))return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function JQ(e,t,n,i){var s;const r=(s=e.sdkProcessingMetadata)==null?void 0:s.dynamicSamplingContext;return{event_id:e.event_id,sent_at:new Date().toISOString(),...t&&{sdk:t},...!!n&&i&&{dsn:Jv(i)},...r&&{trace:Rr({...r})}}}function eJ(e,t){return t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]]),e}function tJ(e,t,n,i){const r=PO(n),s={sent_at:new Date().toISOString(),...r&&{sdk:r},...!!i&&t&&{dsn:Jv(t)}},o="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return H6(s,[o])}function nJ(e,t,n,i){const r=PO(n),s=e.type&&e.type!=="replay_event"?e.type:"event";eJ(e,n==null?void 0:n.sdk);const o=JQ(e,r,i,t);return delete e.sdkProcessingMetadata,H6(o,[[{type:s},e]])}function B3(e,t,n,i=0){return new Uc((r,s)=>{const o=e[i];if(t===null||typeof o!="function")r(t);else{const a=o({...t},n);Mt&&o.id&&a===null&&Fe.log(`Event processor "${o.id}" dropped event`),B6(a)?a.then(l=>B3(e,l,n,i+1).then(r)).then(null,s):B3(e,a,n,i+1).then(r).then(null,s)}})}let Vp,JI,$p;function iJ(e){const t=Dt._sentryDebugIds;if(!t)return{};const n=Object.keys(t);return $p&&n.length===JI||(JI=n.length,$p=n.reduce((i,r)=>{Vp||(Vp={});const s=Vp[r];if(s)i[s[0]]=s[1];else{const o=e(r);for(let a=o.length-1;a>=0;a--){const l=o[a],c=l==null?void 0:l.filename,u=t[r];if(c&&u){i[c]=u,Vp[r]=[c,u];break}}}return i},{})),$p}function rJ(e,t){const{fingerprint:n,span:i,breadcrumbs:r,sdkProcessingMetadata:s}=t;sJ(e,t),i&&lJ(e,i),cJ(e,n),oJ(e,r),aJ(e,s)}function ex(e,t){const{extra:n,tags:i,user:r,contexts:s,level:o,sdkProcessingMetadata:a,breadcrumbs:l,fingerprint:c,eventProcessors:u,attachments:d,propagationContext:f,transactionName:h,span:m}=t;Gp(e,"extra",n),Gp(e,"tags",i),Gp(e,"user",r),Gp(e,"contexts",s),e.sdkProcessingMetadata=km(e.sdkProcessingMetadata,a,2),o&&(e.level=o),h&&(e.transactionName=h),m&&(e.span=m),l.length&&(e.breadcrumbs=[...e.breadcrumbs,...l]),c.length&&(e.fingerprint=[...e.fingerprint,...c]),u.length&&(e.eventProcessors=[...e.eventProcessors,...u]),d.length&&(e.attachments=[...e.attachments,...d]),e.propagationContext={...e.propagationContext,...f}}function Gp(e,t,n){e[t]=km(e[t],n,1)}function sJ(e,t){const{extra:n,tags:i,user:r,contexts:s,level:o,transactionName:a}=t,l=Rr(n);Object.keys(l).length&&(e.extra={...l,...e.extra});const c=Rr(i);Object.keys(c).length&&(e.tags={...c,...e.tags});const u=Rr(r);Object.keys(u).length&&(e.user={...u,...e.user});const d=Rr(s);Object.keys(d).length&&(e.contexts={...d,...e.contexts}),o&&(e.level=o),a&&e.type!=="transaction"&&(e.transaction=a)}function oJ(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}function aJ(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}function lJ(e,t){e.contexts={trace:CQ(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:PQ(t),...e.sdkProcessingMetadata};const n=LO(t),i=qv(n).description;i&&!e.transaction&&e.type==="transaction"&&(e.transaction=i)}function cJ(e,t){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint.length||delete e.fingerprint}function uJ(e,t,n,i,r,s){const{normalizeDepth:o=3,normalizeMaxBreadth:a=1e3}=e,l={...t,event_id:t.event_id||n.event_id||us(),timestamp:t.timestamp||Rm()},c=n.integrations||e.integrations.map(b=>b.name);dJ(l,e),gJ(l,c),r&&r.emit("applyFrameMetadata",t),t.type===void 0&&fJ(l,e.stackParser);const u=pJ(i,n.captureContext);n.mechanism&&Ku(l,n.mechanism);const d=r?r.getEventProcessors():[],f=fQ().getScopeData();if(s){const b=s.getScopeData();ex(f,b)}if(u){const b=u.getScopeData();ex(f,b)}const h=[...n.attachments||[],...f.attachments];h.length&&(n.attachments=h),rJ(l,f);const m=[...d,...f.eventProcessors];return B3(m,l,n).then(b=>(b&&hJ(b),typeof o=="number"&&o>0?mJ(b,o,a):b))}function dJ(e,t){var l,c;const{environment:n,release:i,dist:r,maxValueLength:s=250}=t;e.environment=e.environment||n||Qv,!e.release&&i&&(e.release=i),!e.dist&&r&&(e.dist=r),e.message&&(e.message=Xf(e.message,s));const o=(c=(l=e.exception)==null?void 0:l.values)==null?void 0:c[0];o!=null&&o.value&&(o.value=Xf(o.value,s));const a=e.request;a!=null&&a.url&&(a.url=Xf(a.url,s))}function fJ(e,t){var i,r;const n=iJ(t);(r=(i=e.exception)==null?void 0:i.values)==null||r.forEach(s=>{var o,a;(a=(o=s.stacktrace)==null?void 0:o.frames)==null||a.forEach(l=>{l.filename&&(l.debug_id=n[l.filename])})})}function hJ(e){var i,r;const t={};if((r=(i=e.exception)==null?void 0:i.values)==null||r.forEach(s=>{var o,a;(a=(o=s.stacktrace)==null?void 0:o.frames)==null||a.forEach(l=>{l.debug_id&&(l.abs_path?t[l.abs_path]=l.debug_id:l.filename&&(t[l.filename]=l.debug_id),delete l.debug_id)})}),Object.keys(t).length===0)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.entries(t).forEach(([s,o])=>{n.push({type:"sourcemap",code_file:s,debug_id:o})})}function gJ(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}function mJ(e,t,n){var r,s;if(!e)return null;const i={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(o=>({...o,...o.data&&{data:ua(o.data,t,n)}}))},...e.user&&{user:ua(e.user,t,n)},...e.contexts&&{contexts:ua(e.contexts,t,n)},...e.extra&&{extra:ua(e.extra,t,n)}};return(r=e.contexts)!=null&&r.trace&&i.contexts&&(i.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(i.contexts.trace.data=ua(e.contexts.trace.data,t,n))),e.spans&&(i.spans=e.spans.map(o=>({...o,...o.data&&{data:ua(o.data,t,n)}}))),(s=e.contexts)!=null&&s.flags&&i.contexts&&(i.contexts.flags=ua(e.contexts.flags,3,n)),i}function pJ(e,t){if(!t)return e;const n=e?e.clone():new Bo;return n.update(t),n}function UJ(e){if(e)return bJ(e)?{captureContext:e}:EJ(e)?{captureContext:e}:e}function bJ(e){return e instanceof Bo||typeof e=="function"}const yJ=["user","level","extra","contexts","tags","fingerprint","propagationContext"];function EJ(e){return Object.keys(e).some(t=>yJ.includes(t))}function e9(e,t){return cl().captureException(e,UJ(t))}function tx(e,t){const n=typeof t=="string"?t:void 0,i=typeof t!="string"?{captureContext:t}:void 0;return cl().captureMessage(e,n,i)}function FO(e,t){return cl().captureEvent(e,t)}function nx(e){const t=Lm(),n=cl(),{userAgent:i}=Dt.navigator||{},r=nQ({user:n.getUser()||t.getUser(),...i&&{userAgent:i},...e}),s=t.getSession();return(s==null?void 0:s.status)==="ok"&&dh(s,{status:"exited"}),BO(),t.setSession(r),r}function BO(){const e=Lm(),n=cl().getSession()||e.getSession();n&&iQ(n),zO(),e.setSession()}function zO(){const e=Lm(),t=Vi(),n=e.getSession();n&&t&&t.captureSession(n)}function ix(e=!1){if(e){BO();return}zO()}const vJ="7";function _J(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function wJ(e){return`${_J(e)}${e.projectId}/envelope/`}function TJ(e,t){const n={sentry_version:vJ};return e.publicKey&&(n.sentry_key=e.publicKey),t&&(n.sentry_client=`${t.name}/${t.version}`),new URLSearchParams(n).toString()}function SJ(e,t,n){return t||`${wJ(e)}?${TJ(e,n)}`}const rx=[];function IJ(e){const t={};return e.forEach(n=>{const{name:i}=n,r=t[i];r&&!r.isDefaultInstance&&n.isDefaultInstance||(t[i]=n)}),Object.values(t)}function xJ(e){const t=e.defaultIntegrations||[],n=e.integrations;t.forEach(r=>{r.isDefaultInstance=!0});let i;if(Array.isArray(n))i=[...t,...n];else if(typeof n=="function"){const r=n(t);i=Array.isArray(r)?r:[r]}else i=t;return IJ(i)}function CJ(e,t){const n={};return t.forEach(i=>{i&&HO(e,i,n)}),n}function sx(e,t){for(const n of t)n!=null&&n.afterAllSetup&&n.afterAllSetup(e)}function HO(e,t,n){if(n[t.name]){Mt&&Fe.log(`Integration skipped because it was already installed: ${t.name}`);return}if(n[t.name]=t,rx.indexOf(t.name)===-1&&typeof t.setupOnce=="function"&&(t.setupOnce(),rx.push(t.name)),t.setup&&typeof t.setup=="function"&&t.setup(e),typeof t.preprocessEvent=="function"){const i=t.preprocessEvent.bind(t);e.on("preprocessEvent",(r,s)=>i(r,s,e))}if(typeof t.processEvent=="function"){const i=t.processEvent.bind(t),r=Object.assign((s,o)=>i(s,o,e),{id:t.name});e.addEventProcessor(r)}Mt&&Fe.log(`Integration installed: ${t.name}`)}function AJ(e,t,n){const i=[{type:"client_report"},{timestamp:Rm(),discarded_events:e}];return H6(t?{dsn:t}:{},[i])}class Ls extends Error{constructor(t,n="warn"){super(t),this.message=t,this.logLevel=n}}function VO(e){const t=[];e.message&&t.push(e.message);try{const n=e.exception.values[e.exception.values.length-1];n!=null&&n.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`))}catch{}return t}function MJ(e){var l;const{trace_id:t,parent_span_id:n,span_id:i,status:r,origin:s,data:o,op:a}=((l=e.contexts)==null?void 0:l.trace)??{};return Rr({data:o??{},description:e.transaction,op:a,parent_span_id:n,span_id:i??"",start_timestamp:e.start_timestamp??0,status:r,timestamp:e.timestamp,trace_id:t??"",origin:s,profile_id:o==null?void 0:o[MO],exclusive_time:o==null?void 0:o[RO],measurements:e.measurements,is_segment:!0})}function RJ(e){const t={type:"transaction",timestamp:e.timestamp,start_timestamp:e.start_timestamp,transaction:e.description,contexts:{trace:{trace_id:e.trace_id,span_id:e.span_id,parent_span_id:e.parent_span_id,op:e.op,status:e.status,origin:e.origin,data:{...e.data,...e.profile_id&&{[MO]:e.profile_id},...e.exclusive_time&&{[RO]:e.exclusive_time}}}},measurements:e.measurements};return Rr(t)}const ox="Not capturing exception because it's already been captured.",ax="Discarded session because of missing or non-string release";class kJ{constructor(t){if(this._options=t,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],t.dsn?this._dsn=VQ(t.dsn):Mt&&Fe.warn("No DSN provided, client will not send events."),this._dsn){const n=SJ(this._dsn,t.tunnel,t._metadata?t._metadata.sdk:void 0);this._transport=t.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:n})}}captureException(t,n,i){const r=us();if(HI(t))return Mt&&Fe.log(ox),r;const s={event_id:r,...n};return this._process(this.eventFromException(t,s).then(o=>this._captureEvent(o,s,i))),s.event_id}captureMessage(t,n,i,r){const s={event_id:us(),...i},o=Gv(t)?t:String(t),a=Xv(t)?this.eventFromMessage(o,n,s):this.eventFromException(t,s);return this._process(a.then(l=>this._captureEvent(l,s,r))),s.event_id}captureEvent(t,n,i){const r=us();if(n!=null&&n.originalException&&HI(n.originalException))return Mt&&Fe.log(ox),r;const s={event_id:r,...n},o=t.sdkProcessingMetadata||{},a=o.capturedSpanScope,l=o.capturedSpanIsolationScope;return this._process(this._captureEvent(t,s,a||i,l)),s.event_id}captureSession(t){this.sendSession(t),dh(t,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(t){const n=this._transport;return n?(this.emit("flush"),this._isClientDoneProcessing(t).then(i=>n.flush(t).then(r=>i&&r))):Zu(!0)}close(t){return this.flush(t).then(n=>(this.getOptions().enabled=!1,this.emit("close"),n))}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}init(){(this._isEnabled()||this._options.integrations.some(({name:t})=>t.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(t){return this._integrations[t]}addIntegration(t){const n=this._integrations[t.name];HO(this,t,this._integrations),n||sx(this,[t])}sendEvent(t,n={}){this.emit("beforeSendEvent",t,n);let i=nJ(t,this._dsn,this._options._metadata,this._options.tunnel);for(const s of n.attachments||[])i=WQ(i,qQ(s));const r=this.sendEnvelope(i);r&&r.then(s=>this.emit("afterSendEvent",t,s),null)}sendSession(t){const{release:n,environment:i=Qv}=this._options;if("aggregates"in t){const s=t.attrs||{};if(!s.release&&!n){Mt&&Fe.warn(ax);return}s.release=s.release||n,s.environment=s.environment||i,t.attrs=s}else{if(!t.release&&!n){Mt&&Fe.warn(ax);return}t.release=t.release||n,t.environment=t.environment||i}this.emit("beforeSendSession",t);const r=tJ(t,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(r)}recordDroppedEvent(t,n,i=1){if(this._options.sendClientReports){const r=`${t}:${n}`;Mt&&Fe.log(`Recording outcome: "${r}"${i>1?` (${i} times)`:""}`),this._outcomes[r]=(this._outcomes[r]||0)+i}}on(t,n){const i=this._hooks[t]=this._hooks[t]||[];return i.push(n),()=>{const r=i.indexOf(n);r>-1&&i.splice(r,1)}}emit(t,...n){const i=this._hooks[t];i&&i.forEach(r=>r(...n))}sendEnvelope(t){return this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport?this._transport.send(t).then(null,n=>(Mt&&Fe.error("Error while sending envelope:",n),n)):(Mt&&Fe.error("Transport disabled"),Zu({}))}_setupIntegrations(){const{integrations:t}=this._options;this._integrations=CJ(this,t),sx(this,t)}_updateSessionFromEvent(t,n){var l;let i=n.level==="fatal",r=!1;const s=(l=n.exception)==null?void 0:l.values;if(s){r=!0;for(const c of s){const u=c.mechanism;if((u==null?void 0:u.handled)===!1){i=!0;break}}}const o=t.status==="ok";(o&&t.errors===0||o&&i)&&(dh(t,{...i&&{status:"crashed"},errors:t.errors||Number(r||i)}),this.captureSession(t))}_isClientDoneProcessing(t){return new Uc(n=>{let i=0;const r=1,s=setInterval(()=>{this._numProcessing==0?(clearInterval(s),n(!0)):(i+=r,t&&i>=t&&(clearInterval(s),n(!1)))},r)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(t,n,i,r){const s=this.getOptions(),o=Object.keys(this._integrations);return!n.integrations&&(o!=null&&o.length)&&(n.integrations=o),this.emit("preprocessEvent",t,n),t.type||r.setLastEventId(t.event_id||n.event_id),uJ(s,t,n,i,this,r).then(a=>{if(a===null)return a;this.emit("postprocessEvent",a,n),a.contexts={trace:hQ(i),...a.contexts};const l=OQ(this,i);return a.sdkProcessingMetadata={dynamicSamplingContext:l,...a.sdkProcessingMetadata},a})}_captureEvent(t,n={},i=cl(),r=Lm()){return Mt&&z3(t)&&Fe.log(`Captured error event \`${VO(t)[0]||"<unknown>"}\``),this._processEvent(t,n,i,r).then(s=>s.event_id,s=>{Mt&&(s instanceof Ls&&s.logLevel==="log"?Fe.log(s.message):Fe.warn(s))})}_processEvent(t,n,i,r){const s=this.getOptions(),{sampleRate:o}=s,a=$O(t),l=z3(t),c=t.type||"error",u=`before send for type \`${c}\``,d=typeof o>"u"?void 0:_Q(o);if(l&&typeof d=="number"&&Math.random()>d)return this.recordDroppedEvent("sample_rate","error"),q2(new Ls(`Discarding event because it's not included in the random sample (sampling rate = ${o})`,"log"));const f=c==="replay_event"?"replay":c;return this._prepareEvent(t,n,i,r).then(h=>{if(h===null)throw this.recordDroppedEvent("event_processor",f),new Ls("An event processor returned `null`, will not send event.","log");if(n.data&&n.data.__sentry__===!0)return h;const p=DJ(this,s,h,n);return LJ(p,u)}).then(h=>{var b;if(h===null){if(this.recordDroppedEvent("before_send",f),a){const y=1+(t.spans||[]).length;this.recordDroppedEvent("before_send","span",y)}throw new Ls(`${u} returned \`null\`, will not send event.`,"log")}const m=i.getSession()||r.getSession();if(l&&m&&this._updateSessionFromEvent(m,h),a){const E=((b=h.sdkProcessingMetadata)==null?void 0:b.spanCountBeforeProcessing)||0,y=h.spans?h.spans.length:0,v=E-y;v>0&&this.recordDroppedEvent("before_send","span",v)}const p=h.transaction_info;if(a&&p&&h.transaction!==t.transaction){const E="custom";h.transaction_info={...p,source:E}}return this.sendEvent(h,n),h}).then(null,h=>{throw h instanceof Ls?h:(this.captureException(h,{data:{__sentry__:!0},originalException:h}),new Ls(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${h}`))})}_process(t){this._numProcessing++,t.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_clearOutcomes(){const t=this._outcomes;return this._outcomes={},Object.entries(t).map(([n,i])=>{const[r,s]=n.split(":");return{reason:r,category:s,quantity:i}})}_flushOutcomes(){Mt&&Fe.log("Flushing outcomes...");const t=this._clearOutcomes();if(t.length===0){Mt&&Fe.log("No outcomes to send");return}if(!this._dsn){Mt&&Fe.log("No dsn provided, will not send outcomes");return}Mt&&Fe.log("Sending outcomes:",t);const n=AJ(t,this._options.tunnel&&Jv(this._dsn));this.sendEnvelope(n)}}function LJ(e,t){const n=`${t} must return \`null\` or a valid event.`;if(B6(e))return e.then(i=>{if(!uh(i)&&i!==null)throw new Ls(n);return i},i=>{throw new Ls(`${t} rejected with ${i}`)});if(!uh(e)&&e!==null)throw new Ls(n);return e}function DJ(e,t,n,i){const{beforeSend:r,beforeSendTransaction:s,beforeSendSpan:o}=t;let a=n;if(z3(a)&&r)return r(a,i);if($O(a)){if(o){const l=o(MJ(a));if(l?a=km(n,RJ(l)):ZI(),a.spans){const c=[];for(const u of a.spans){const d=o(u);d?c.push(d):(ZI(),c.push(u))}a.spans=c}}if(s){if(a.spans){const l=a.spans.length;a.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:l}}return s(a,i)}}return a}function z3(e){return e.type===void 0}function $O(e){return e.type==="transaction"}function NJ(e,t){t.debug===!0&&(Mt?Fe.enable():Kh(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),cl().update(t.initialScope);const i=new e(t);return OJ(i),i.init(),i}function OJ(e){cl().setClient(e)}function PJ(e){const t=[];function n(){return e===void 0||t.length<e}function i(o){return t.splice(t.indexOf(o),1)[0]||Promise.resolve(void 0)}function r(o){if(!n())return q2(new Ls("Not adding Promise because buffer limit was reached."));const a=o();return t.indexOf(a)===-1&&t.push(a),a.then(()=>i(a)).then(null,()=>i(a).then(null,()=>{})),a}function s(o){return new Uc((a,l)=>{let c=t.length;if(!c)return a(!0);const u=setTimeout(()=>{o&&o>0&&a(!1)},o);t.forEach(d=>{Zu(d).then(()=>{--c||(clearTimeout(u),a(!0))},l)})})}return{$:t,add:r,drain:s}}const FJ=60*1e3;function BJ(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return n*1e3;const i=Date.parse(`${e}`);return isNaN(i)?FJ:i-t}function zJ(e,t){return e[t]||e.all||0}function HJ(e,t,n=Date.now()){return zJ(e,t)>n}function VJ(e,{statusCode:t,headers:n},i=Date.now()){const r={...e},s=n==null?void 0:n["x-sentry-rate-limits"],o=n==null?void 0:n["retry-after"];if(s)for(const a of s.trim().split(",")){const[l,c,,,u]=a.split(":",5),d=parseInt(l,10),f=(isNaN(d)?60:d)*1e3;if(!c)r.all=i+f;else for(const h of c.split(";"))h==="metric_bucket"?(!u||u.split(";").includes("custom"))&&(r[h]=i+f):r[h]=i+f}else o?r.all=i+BJ(o,i):t===429&&(r.all=i+60*1e3);return r}const $J=64;function GJ(e,t,n=PJ(e.bufferSize||$J)){let i={};const r=o=>n.drain(o);function s(o){const a=[];if(qI(o,(d,f)=>{const h=QI(f);HJ(i,h)?e.recordDroppedEvent("ratelimit_backoff",h):a.push(d)}),a.length===0)return Zu({});const l=H6(o[0],a),c=d=>{qI(l,(f,h)=>{e.recordDroppedEvent(d,QI(h))})},u=()=>t({body:KQ(l)}).then(d=>(d.statusCode!==void 0&&(d.statusCode<200||d.statusCode>=300)&&Mt&&Fe.warn(`Sentry responded with status code ${d.statusCode} to sent event.`),i=VJ(i,d),d),d=>{throw c("network_error"),d});return n.add(u).then(d=>d,d=>{if(d instanceof Ls)return Mt&&Fe.error("Skipped sending event because buffer is full."),c("queue_overflow"),Zu({});throw d})}return{send:s,flush:r}}function XJ(e){var t;((t=e.user)==null?void 0:t.ip_address)===void 0&&(e.user={...e.user,ip_address:"{{auto}}"})}function jJ(e){var t;"aggregates"in e?((t=e.attrs)==null?void 0:t.ip_address)===void 0&&(e.attrs={...e.attrs,ip_address:"{{auto}}"}):e.ipAddress===void 0&&(e.ipAddress="{{auto}}")}function YJ(e,t,n=[t],i="npm"){const r=e._metadata||{};r.sdk||(r.sdk={name:`sentry.javascript.${t}`,packages:n.map(s=>({name:`${i}:@sentry/${s}`,version:Ru})),version:Ru}),e._metadata=r}const WJ=100;function qu(e,t){const n=Vi(),i=Lm();if(!n)return;const{beforeBreadcrumb:r=null,maxBreadcrumbs:s=WJ}=n.getOptions();if(s<=0)return;const a={timestamp:Rm(),...e},l=r?Kh(()=>r(a,t)):a;l!==null&&(n.emit&&n.emit("beforeAddBreadcrumb",l,t),i.addBreadcrumb(l,s))}let lx;const KJ="FunctionToString",cx=new WeakMap,ZJ=()=>({name:KJ,setupOnce(){lx=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=Wv(this),n=cx.has(Vi())&&t!==void 0?t:this;return lx.apply(n,e)}}catch{}},setup(e){cx.set(e,!0)}}),qJ=ZJ,QJ=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,"undefined is not an object (evaluating 'a.L')",`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/],JJ="InboundFilters",eee=(e={})=>({name:JJ,processEvent(t,n,i){const r=i.getOptions(),s=nee(e,r);return iee(t,s)?null:t}}),tee=eee;function nee(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:QJ],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]],ignoreInternal:e.ignoreInternal!==void 0?e.ignoreInternal:!0}}function iee(e,t){return t.ignoreInternal&&lee(e)?(Mt&&Fe.warn(`Event dropped due to being internal Sentry Error.
Event: ${xl(e)}`),!0):ree(e,t.ignoreErrors)?(Mt&&Fe.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${xl(e)}`),!0):uee(e)?(Mt&&Fe.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${xl(e)}`),!0):see(e,t.ignoreTransactions)?(Mt&&Fe.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${xl(e)}`),!0):oee(e,t.denyUrls)?(Mt&&Fe.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${xl(e)}.
Url: ${Q2(e)}`),!0):aee(e,t.allowUrls)?!1:(Mt&&Fe.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${xl(e)}.
Url: ${Q2(e)}`),!0)}function ree(e,t){return e.type||!t||!t.length?!1:VO(e).some(n=>z6(n,t))}function see(e,t){if(e.type!=="transaction"||!t||!t.length)return!1;const n=e.transaction;return n?z6(n,t):!1}function oee(e,t){if(!(t!=null&&t.length))return!1;const n=Q2(e);return n?z6(n,t):!1}function aee(e,t){if(!(t!=null&&t.length))return!0;const n=Q2(e);return n?z6(n,t):!0}function lee(e){try{return e.exception.values[0].type==="SentryError"}catch{}return!1}function cee(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function Q2(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch{}return t?cee(t):null}catch{return Mt&&Fe.error(`Cannot extract url for event ${xl(e)}`),null}}function uee(e){var t,n;return e.type||!((n=(t=e.exception)==null?void 0:t.values)!=null&&n.length)?!1:!e.message&&!e.exception.values.some(i=>i.stacktrace||i.type&&i.type!=="Error"||i.value)}function dee(e,t,n=250,i,r,s,o){var l;if(!((l=s.exception)!=null&&l.values)||!o||!Yu(o.originalException,Error))return;const a=s.exception.values.length>0?s.exception.values[s.exception.values.length-1]:void 0;a&&(s.exception.values=fee(H3(e,t,r,o.originalException,i,s.exception.values,a,0),n))}function H3(e,t,n,i,r,s,o,a){if(s.length>=n+1)return s;let l=[...s];if(Yu(i[r],Error)){ux(o,a);const c=e(t,i[r]),u=l.length;dx(c,r,u,a),l=H3(e,t,n,i[r],r,[c,...l],c,u)}return Array.isArray(i.errors)&&i.errors.forEach((c,u)=>{if(Yu(c,Error)){ux(o,a);const d=e(t,c),f=l.length;dx(d,`errors[${u}]`,f,a),l=H3(e,t,n,c,r,[d,...l],d,f)}}),l}function ux(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,...e.type==="AggregateError"&&{is_exception_group:!0},exception_id:t}}function dx(e,t,n,i){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:i}}function fee(e,t){return e.map(n=>(n.value&&(n.value=Xf(n.value,t)),n))}function GO(e){const t="console";Td(t,e),Sd(t,hee)}function hee(){"console"in Dt&&W2.forEach(function(e){e in Dt.console&&Mr(Dt.console,e,function(t){return K2[e]=t,function(...n){$s("console",{args:n,level:e});const r=K2[e];r==null||r.apply(Dt.console,n)}})})}function XO(e){return e==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(e)?e:"log"}const gee="CaptureConsole",mee=(e={})=>{const t=e.levels||W2,n=e.handled??!0;return{name:gee,setup(i){"console"in Dt&&GO(({args:r,level:s})=>{Vi()!==i||!t.includes(s)||Uee(r,s,n)})}}},pee=mee;function Uee(e,t,n){const i={level:XO(t),extra:{arguments:e}};Zv(r=>{if(r.addEventProcessor(a=>(a.logger="console",Ku(a,{handled:n,type:"console"}),a)),t==="assert"){if(!e[0]){const a=`Assertion failed: ${Z2(e.slice(1)," ")||"console.assert"}`;r.setExtra("arguments",e.slice(1)),tx(a,i)}return}const s=e.find(a=>a instanceof Error);if(s){e9(s,i);return}const o=Z2(e," ");tx(o,i)})}const bee="Dedupe",yee=()=>{let e;return{name:bee,processEvent(t){if(t.type)return t;try{if(vee(t,e))return Mt&&Fe.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return e=t}}},Eee=yee;function vee(e,t){return t?!!(_ee(e,t)||wee(e,t)):!1}function _ee(e,t){const n=e.message,i=t.message;return!(!n&&!i||n&&!i||!n&&i||n!==i||!YO(e,t)||!jO(e,t))}function wee(e,t){const n=fx(t),i=fx(e);return!(!n||!i||n.type!==i.type||n.value!==i.value||!YO(e,t)||!jO(e,t))}function jO(e,t){let n=OI(e),i=OI(t);if(!n&&!i)return!0;if(n&&!i||!n&&i||(n=n,i=i,i.length!==n.length))return!1;for(let r=0;r<i.length;r++){const s=i[r],o=n[r];if(s.filename!==o.filename||s.lineno!==o.lineno||s.colno!==o.colno||s.function!==o.function)return!1}return!0}function YO(e,t){let n=e.fingerprint,i=t.fingerprint;if(!n&&!i)return!0;if(n&&!i||!n&&i)return!1;n=n,i=i;try{return n.join("")===i.join("")}catch{return!1}}function fx(e){var t;return((t=e.exception)==null?void 0:t.values)&&e.exception.values[0]}function l8(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",i=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:i,relative:t[5]+n+i}}function WO(e){if(e!==void 0)return e>=400&&e<500?"warning":e>=500?"error":void 0}const J2=Dt;function Tee(){return"history"in J2}function KO(){if(!("fetch"in J2))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function V3(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function See(){var n;if(typeof EdgeRuntime=="string")return!0;if(!KO())return!1;if(V3(J2.fetch))return!0;let e=!1;const t=J2.document;if(t&&typeof t.createElement=="function")try{const i=t.createElement("iframe");i.hidden=!0,t.head.appendChild(i),(n=i.contentWindow)!=null&&n.fetch&&(e=V3(i.contentWindow.fetch)),t.head.removeChild(i)}catch(i){wd&&Fe.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",i)}return e}function Iee(e,t){const n="fetch";Td(n,e),Sd(n,()=>xee(void 0,t))}function xee(e,t=!1){t&&!See()||Mr(Dt,"fetch",function(n){return function(...i){const r=new Error,{method:s,url:o}=Cee(i),a={args:i,fetchData:{method:s,url:o},startTimestamp:ka()*1e3,virtualError:r};return $s("fetch",{...a}),n.apply(Dt,i).then(async l=>($s("fetch",{...a,endTimestamp:ka()*1e3,response:l}),l),l=>{throw $s("fetch",{...a,endTimestamp:ka()*1e3,error:l}),$v(l)&&l.stack===void 0&&(l.stack=r.stack,Wu(l,"framesToPop",1)),l})}})}function $3(e,t){return!!e&&typeof e=="object"&&!!e[t]}function hx(e){return typeof e=="string"?e:e?$3(e,"url")?e.url:e.toString?e.toString():"":""}function Cee(e){if(e.length===0)return{method:"GET",url:""};if(e.length===2){const[n,i]=e;return{url:hx(n),method:$3(i,"method")?String(i.method).toUpperCase():"GET"}}const t=e[0];return{url:hx(t),method:$3(t,"method")?String(t.method).toUpperCase():"GET"}}function Aee(){return"npm"}const xn=Dt;let G3=0;function ZO(){return G3>0}function Mee(){G3++,setTimeout(()=>{G3--})}function hh(e,t={}){function n(r){return typeof r=="function"}if(!n(e))return e;try{const r=e.__sentry_wrapped__;if(r)return typeof r=="function"?r:e;if(Wv(e))return e}catch{return e}const i=function(...r){try{const s=r.map(o=>hh(o,t));return e.apply(this,s)}catch(s){throw Mee(),Zv(o=>{o.addEventProcessor(a=>(t.mechanism&&(N3(a,void 0),Ku(a,t.mechanism)),a.extra={...a.extra,arguments:r},a)),e9(s)}),s}};try{for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=e[r])}catch{}SO(i,e),Wu(e,"__sentry_wrapped__",i);try{Object.getOwnPropertyDescriptor(i,"name").configurable&&Object.defineProperty(i,"name",{get(){return e.name}})}catch{}return i}function t9(e,t){const n=n9(e,t),i={type:Nee(t),value:Oee(t)};return n.length&&(i.stacktrace={frames:n}),i.type===void 0&&i.value===""&&(i.value="Unrecoverable error caught"),i}function Ree(e,t,n,i){const r=Vi(),s=r==null?void 0:r.getOptions().normalizeDepth,o=Hee(t),a={__serialized__:OO(t,s)};if(o)return{exception:{values:[t9(e,o)]},extra:a};const l={exception:{values:[{type:F6(t)?t.constructor.name:i?"UnhandledRejection":"Error",value:Bee(t,{isUnhandledRejection:i})}]},extra:a};if(n){const c=n9(e,n);c.length&&(l.exception.values[0].stacktrace={frames:c})}return l}function c8(e,t){return{exception:{values:[t9(e,t)]}}}function n9(e,t){const n=t.stacktrace||t.stack||"",i=Lee(t),r=Dee(t);try{return e(n,i,r)}catch{}return[]}const kee=/Minified React error #\d+;/i;function Lee(e){return e&&kee.test(e.message)?1:0}function Dee(e){return typeof e.framesToPop=="number"?e.framesToPop:0}function qO(e){return typeof WebAssembly<"u"&&typeof WebAssembly.Exception<"u"?e instanceof WebAssembly.Exception:!1}function Nee(e){const t=e==null?void 0:e.name;return!t&&qO(e)?e.message&&Array.isArray(e.message)&&e.message.length==2?e.message[0]:"WebAssembly.Exception":t}function Oee(e){const t=e==null?void 0:e.message;return qO(e)?Array.isArray(e.message)&&e.message.length==2?e.message[1]:"wasm exception":t?t.error&&typeof t.error.message=="string"?t.error.message:t:"No error message"}function Pee(e,t,n,i){const r=(n==null?void 0:n.syntheticException)||void 0,s=i9(e,t,r,i);return Ku(s),s.level="error",n!=null&&n.event_id&&(s.event_id=n.event_id),Zu(s)}function Fee(e,t,n="info",i,r){const s=(i==null?void 0:i.syntheticException)||void 0,o=X3(e,t,s,r);return o.level=n,i!=null&&i.event_id&&(o.event_id=i.event_id),Zu(o)}function i9(e,t,n,i,r){let s;if(_O(t)&&t.error)return c8(e,t.error);if(FI(t)||Gq(t)){const o=t;if("stack"in t)s=c8(e,t);else{const a=o.name||(FI(o)?"DOMError":"DOMException"),l=o.message?`${a}: ${o.message}`:a;s=X3(e,l,n,i),N3(s,l)}return"code"in o&&(s.tags={...s.tags,"DOMException.code":`${o.code}`}),s}return $v(t)?c8(e,t):uh(t)||F6(t)?(s=Ree(e,t,n,r),Ku(s,{synthetic:!0}),s):(s=X3(e,t,n,i),N3(s,`${t}`),Ku(s,{synthetic:!0}),s)}function X3(e,t,n,i){const r={};if(i&&n){const s=n9(e,n);s.length&&(r.exception={values:[{value:t,stacktrace:{frames:s}}]}),Ku(r,{synthetic:!0})}if(Gv(t)){const{__sentry_template_string__:s,__sentry_template_values__:o}=t;return r.logentry={message:s,params:o},r}return r.message=t,r}function Bee(e,{isUnhandledRejection:t}){const n=Qq(e),i=t?"promise rejection":"exception";return _O(e)?`Event \`ErrorEvent\` captured as ${i} with message \`${e.message}\``:F6(e)?`Event \`${zee(e)}\` (type=${e.type}) captured as ${i}`:`Object captured as ${i} with keys: ${n}`}function zee(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{}}function Hee(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t];if(n instanceof Error)return n}}class Vee extends kJ{constructor(t){const n={parentSpanIsAlwaysRootSpan:!0,...t},i=xn.SENTRY_SDK_SOURCE||Aee();YJ(n,"browser",["browser"],i),super(n),n.sendClientReports&&xn.document&&xn.document.addEventListener("visibilitychange",()=>{xn.document.visibilityState==="hidden"&&this._flushOutcomes()}),this._options.sendDefaultPii&&(this.on("postprocessEvent",XJ),this.on("beforeSendSession",jJ))}eventFromException(t,n){return Pee(this._options.stackParser,t,n,this._options.attachStacktrace)}eventFromMessage(t,n="info",i){return Fee(this._options.stackParser,t,n,i,this._options.attachStacktrace)}_prepareEvent(t,n,i,r){return t.platform=t.platform||"javascript",super._prepareEvent(t,n,i,r)}}const $ee=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,fr=Dt,Gee=1e3;let gx,j3,Y3;function Xee(e){const t="dom";Td(t,e),Sd(t,jee)}function jee(){if(!fr.document)return;const e=$s.bind(null,"dom"),t=mx(e,!0);fr.document.addEventListener("click",t,!1),fr.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(n=>{var s,o;const r=(s=fr[n])==null?void 0:s.prototype;(o=r==null?void 0:r.hasOwnProperty)!=null&&o.call(r,"addEventListener")&&(Mr(r,"addEventListener",function(a){return function(l,c,u){if(l==="click"||l=="keypress")try{const d=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},f=d[l]=d[l]||{refCount:0};if(!f.handler){const h=mx(e);f.handler=h,a.call(this,l,h,u)}f.refCount++}catch{}return a.call(this,l,c,u)}}),Mr(r,"removeEventListener",function(a){return function(l,c,u){if(l==="click"||l=="keypress")try{const d=this.__sentry_instrumentation_handlers__||{},f=d[l];f&&(f.refCount--,f.refCount<=0&&(a.call(this,l,f.handler,u),f.handler=void 0,delete d[l]),Object.keys(d).length===0&&delete this.__sentry_instrumentation_handlers__)}catch{}return a.call(this,l,c,u)}}))})}function Yee(e){if(e.type!==j3)return!1;try{if(!e.target||e.target._sentryId!==Y3)return!1}catch{}return!0}function Wee(e,t){return e!=="keypress"?!1:t!=null&&t.tagName?!(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable):!0}function mx(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const i=Kee(n);if(Wee(n.type,i))return;Wu(n,"_sentryCaptured",!0),i&&!i._sentryId&&Wu(i,"_sentryId",us());const r=n.type==="keypress"?"input":n.type;Yee(n)||(e({event:n,name:r,global:t}),j3=n.type,Y3=i?i._sentryId:void 0),clearTimeout(gx),gx=fr.setTimeout(()=>{Y3=void 0,j3=void 0},Gee)}}function Kee(e){try{return e.target}catch{return null}}let Xp;function QO(e){const t="history";Td(t,e),Sd(t,Zee)}function Zee(){if(fr.addEventListener("popstate",()=>{const t=fr.location.href,n=Xp;if(Xp=t,n===t)return;$s("history",{from:n,to:t})}),!Tee())return;function e(t){return function(...n){const i=n.length>2?n[2]:void 0;if(i){const r=Xp,s=String(i);if(Xp=s,r===s)return;$s("history",{from:r,to:s})}return t.apply(this,n)}}Mr(fr.history,"pushState",e),Mr(fr.history,"replaceState",e)}const VU={};function qee(e){const t=VU[e];if(t)return t;let n=fr[e];if(V3(n))return VU[e]=n.bind(fr);const i=fr.document;if(i&&typeof i.createElement=="function")try{const r=i.createElement("iframe");r.hidden=!0,i.head.appendChild(r);const s=r.contentWindow;s!=null&&s[e]&&(n=s[e]),i.head.removeChild(r)}catch(r){$ee&&Fe.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,r)}return n&&(VU[e]=n.bind(fr))}function px(e){VU[e]=void 0}const o1="__sentry_xhr_v3__";function Qee(e){const t="xhr";Td(t,e),Sd(t,Jee)}function Jee(){if(!fr.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(t,n,i){const r=new Error,s=ka()*1e3,o=Ra(i[0])?i[0].toUpperCase():void 0,a=ete(i[1]);if(!o||!a)return t.apply(n,i);n[o1]={method:o,url:a,request_headers:{}},o==="POST"&&a.match(/sentry_key/)&&(n.__sentry_own_request__=!0);const l=()=>{const c=n[o1];if(c&&n.readyState===4){try{c.status_code=n.status}catch{}const u={endTimestamp:ka()*1e3,startTimestamp:s,xhr:n,virtualError:r};$s("xhr",u)}};return"onreadystatechange"in n&&typeof n.onreadystatechange=="function"?n.onreadystatechange=new Proxy(n.onreadystatechange,{apply(c,u,d){return l(),c.apply(u,d)}}):n.addEventListener("readystatechange",l),n.setRequestHeader=new Proxy(n.setRequestHeader,{apply(c,u,d){const[f,h]=d,m=u[o1];return m&&Ra(f)&&Ra(h)&&(m.request_headers[f.toLowerCase()]=h),c.apply(u,d)}}),t.apply(n,i)}}),e.send=new Proxy(e.send,{apply(t,n,i){const r=n[o1];if(!r)return t.apply(n,i);i[0]!==void 0&&(r.body=i[0]);const s={startTimestamp:ka()*1e3,xhr:n};return $s("xhr",s),t.apply(n,i)}})}function ete(e){if(Ra(e))return e;try{return e.toString()}catch{}}function tte(e,t=qee("fetch")){let n=0,i=0;function r(s){const o=s.body.length;n+=o,i++;const a={body:s.body,method:"POST",referrerPolicy:"strict-origin",headers:e.headers,keepalive:n<=6e4&&i<15,...e.fetchOptions};if(!t)return px("fetch"),q2("No fetch implementation available");try{return t(e.url,a).then(l=>(n-=o,i--,{statusCode:l.status,headers:{"x-sentry-rate-limits":l.headers.get("X-Sentry-Rate-Limits"),"retry-after":l.headers.get("Retry-After")}}))}catch(l){return px("fetch"),n-=o,i--,q2(l)}}return GJ(e,r)}const nte=30,ite=50;function W3(e,t,n,i){const r={filename:e,function:t==="<anonymous>"?ju:t,in_app:!0};return n!==void 0&&(r.lineno=n),i!==void 0&&(r.colno=i),r}const rte=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,ste=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,ote=/\((\S*)(?::(\d+))(?::(\d+))\)/,ate=e=>{const t=rte.exec(e);if(t){const[,i,r,s]=t;return W3(i,ju,+r,+s)}const n=ste.exec(e);if(n){if(n[2]&&n[2].indexOf("eval")===0){const o=ote.exec(n[2]);o&&(n[2]=o[1],n[3]=o[2],n[4]=o[3])}const[r,s]=JO(n[1]||ju,n[2]);return W3(s,r,n[3]?+n[3]:void 0,n[4]?+n[4]:void 0)}},lte=[nte,ate],cte=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,ute=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,dte=e=>{const t=cte.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const s=ute.exec(t[3]);s&&(t[1]=t[1]||"eval",t[3]=s[1],t[4]=s[2],t[5]="")}let i=t[3],r=t[1]||ju;return[r,i]=JO(r,i),W3(i,r,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}},fte=[ite,dte],hte=[lte,fte],gte=EO(...hte),JO=(e,t)=>{const n=e.indexOf("safari-extension")!==-1,i=e.indexOf("safari-web-extension")!==-1;return n||i?[e.indexOf("@")!==-1?e.split("@")[0]:ju,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]},x0=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,jp=1024,mte="Breadcrumbs",pte=(e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:mte,setup(n){t.console&&GO(Ete(n)),t.dom&&Xee(yte(n,t.dom)),t.xhr&&Qee(vte(n)),t.fetch&&Iee(_te(n)),t.history&&QO(wte(n)),t.sentry&&n.on("beforeSendEvent",bte(n))}}},Ute=pte;function bte(e){return function(n){Vi()===e&&qu({category:`sentry.${n.type==="transaction"?"transaction":"event"}`,event_id:n.event_id,level:n.level,message:xl(n)},{event:n})}}function yte(e,t){return function(i){if(Vi()!==e)return;let r,s,o=typeof t=="object"?t.serializeAttribute:void 0,a=typeof t=="object"&&typeof t.maxStringLength=="number"?t.maxStringLength:void 0;a&&a>jp&&(x0&&Fe.warn(`\`dom.maxStringLength\` cannot exceed ${jp}, but a value of ${a} was configured. Sentry will use ${jp} instead.`),a=jp),typeof o=="string"&&(o=[o]);try{const c=i.event,u=Tte(c)?c.target:c;r=TO(u,{keyAttrs:o,maxStringLength:a}),s=Zq(u)}catch{r="<unknown>"}if(r.length===0)return;const l={category:`ui.${i.name}`,message:r};s&&(l.data={"ui.component_name":s}),qu(l,{event:i.event,name:i.name,global:i.global})}}function Ete(e){return function(n){if(Vi()!==e)return;const i={category:"console",data:{arguments:n.args,logger:"console"},level:XO(n.level),message:Z2(n.args," ")};if(n.level==="assert")if(n.args[0]===!1)i.message=`Assertion failed: ${Z2(n.args.slice(1)," ")||"console.assert"}`,i.data.arguments=n.args.slice(1);else return;qu(i,{input:n.args,level:n.level})}}function vte(e){return function(n){if(Vi()!==e)return;const{startTimestamp:i,endTimestamp:r}=n,s=n.xhr[o1];if(!i||!r||!s)return;const{method:o,url:a,status_code:l,body:c}=s,u={method:o,url:a,status_code:l},d={xhr:n.xhr,input:c,startTimestamp:i,endTimestamp:r},f=WO(l);qu({category:"xhr",data:u,type:"http",level:f},d)}}function _te(e){return function(n){if(Vi()!==e)return;const{startTimestamp:i,endTimestamp:r}=n;if(!r||n.fetchData.url.match(/sentry_key/)&&n.fetchData.method==="POST")return;const s={method:n.fetchData.method,url:n.fetchData.url};if(n.error){const o={data:n.error,input:n.args,startTimestamp:i,endTimestamp:r};qu({category:"fetch",data:s,level:"error",type:"http"},o)}else{const o=n.response;s.request_body_size=n.fetchData.request_body_size,s.response_body_size=n.fetchData.response_body_size,s.status_code=o==null?void 0:o.status;const a={input:n.args,response:o,startTimestamp:i,endTimestamp:r},l=WO(s.status_code);qu({category:"fetch",data:s,type:"http",level:l},a)}}}function wte(e){return function(n){if(Vi()!==e)return;let i=n.from,r=n.to;const s=l8(xn.location.href);let o=i?l8(i):void 0;const a=l8(r);o!=null&&o.path||(o=s),s.protocol===a.protocol&&s.host===a.host&&(r=a.relative),s.protocol===o.protocol&&s.host===o.host&&(i=o.relative),qu({category:"navigation",data:{from:i,to:r}})}}function Tte(e){return!!e&&!!e.target}const Ste=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],Ite="BrowserApiErrors",xte=(e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e};return{name:Ite,setupOnce(){t.setTimeout&&Mr(xn,"setTimeout",Ux),t.setInterval&&Mr(xn,"setInterval",Ux),t.requestAnimationFrame&&Mr(xn,"requestAnimationFrame",Ate),t.XMLHttpRequest&&"XMLHttpRequest"in xn&&Mr(XMLHttpRequest.prototype,"send",Mte);const n=t.eventTarget;n&&(Array.isArray(n)?n:Ste).forEach(Rte)}}},Cte=xte;function Ux(e){return function(...t){const n=t[0];return t[0]=hh(n,{mechanism:{data:{function:pc(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function Ate(e){return function(t){return e.apply(this,[hh(t,{mechanism:{data:{function:"requestAnimationFrame",handler:pc(e)},handled:!1,type:"instrument"}})])}}function Mte(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(r=>{r in n&&typeof n[r]=="function"&&Mr(n,r,function(s){const o={mechanism:{data:{function:r,handler:pc(s)},handled:!1,type:"instrument"}},a=Wv(s);return a&&(o.mechanism.data.handler=pc(a)),hh(s,o)})}),e.apply(this,t)}}function Rte(e){var i,r;const n=(i=xn[e])==null?void 0:i.prototype;(r=n==null?void 0:n.hasOwnProperty)!=null&&r.call(n,"addEventListener")&&(Mr(n,"addEventListener",function(s){return function(o,a,l){try{kte(a)&&(a.handleEvent=hh(a.handleEvent,{mechanism:{data:{function:"handleEvent",handler:pc(a),target:e},handled:!1,type:"instrument"}}))}catch{}return s.apply(this,[o,hh(a,{mechanism:{data:{function:"addEventListener",handler:pc(a),target:e},handled:!1,type:"instrument"}}),l])}}),Mr(n,"removeEventListener",function(s){return function(o,a,l){try{const c=a.__sentry_wrapped__;c&&s.call(this,o,c,l)}catch{}return s.call(this,o,a,l)}}))}function kte(e){return typeof e.handleEvent=="function"}const Lte=()=>({name:"BrowserSession",setupOnce(){if(typeof xn.document>"u"){x0&&Fe.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.");return}nx({ignoreDuration:!0}),ix(),QO(({from:e,to:t})=>{e!==void 0&&e!==t&&(nx({ignoreDuration:!0}),ix())})}}),Dte="GlobalHandlers",Nte=(e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:Dte,setupOnce(){Error.stackTraceLimit=50},setup(n){t.onerror&&(Pte(n),bx("onerror")),t.onunhandledrejection&&(Fte(n),bx("onunhandledrejection"))}}},Ote=Nte;function Pte(e){zq(t=>{const{stackParser:n,attachStacktrace:i}=eP();if(Vi()!==e||ZO())return;const{msg:r,url:s,line:o,column:a,error:l}=t,c=Hte(i9(n,l||r,void 0,i,!1),s,o,a);c.level="error",FO(c,{originalException:l,mechanism:{handled:!1,type:"onerror"}})})}function Fte(e){Vq(t=>{const{stackParser:n,attachStacktrace:i}=eP();if(Vi()!==e||ZO())return;const r=Bte(t),s=Xv(r)?zte(r):i9(n,r,void 0,i,!0);s.level="error",FO(s,{originalException:r,mechanism:{handled:!1,type:"onunhandledrejection"}})})}function Bte(e){if(Xv(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch{}return e}function zte(e){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(e)}`}]}}}function Hte(e,t,n,i){const r=e.exception=e.exception||{},s=r.values=r.values||[],o=s[0]=s[0]||{},a=o.stacktrace=o.stacktrace||{},l=a.frames=a.frames||[],c=i,u=n,d=Ra(t)&&t.length>0?t:Yv();return l.length===0&&l.push({colno:c,filename:d,function:ju,in_app:!0,lineno:u}),e}function bx(e){x0&&Fe.log(`Global Handler attached: ${e}`)}function eP(){const e=Vi();return(e==null?void 0:e.getOptions())||{stackParser:()=>[],attachStacktrace:!1}}const Vte=()=>({name:"HttpContext",preprocessEvent(e){var o,a;if(!xn.navigator&&!xn.location&&!xn.document)return;const t=((o=e.request)==null?void 0:o.url)||Yv(),{referrer:n}=xn.document||{},{userAgent:i}=xn.navigator||{},r={...(a=e.request)==null?void 0:a.headers,...n&&{Referer:n},...i&&{"User-Agent":i}},s={...e.request,...t&&{url:t},headers:r};e.request=s}}),$te="cause",Gte=5,Xte="LinkedErrors",jte=(e={})=>{const t=e.limit||Gte,n=e.key||$te;return{name:Xte,preprocessEvent(i,r,s){const o=s.getOptions();dee(t9,o.stackParser,o.maxValueLength,n,t,i,r)}}},Yte=jte;function Wte(e){return[tee(),qJ(),Cte(),Ute(),Ote(),Yte(),Eee(),Vte(),Lte()]}function Kte(e={}){var n;return{...{defaultIntegrations:Wte(),release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:(n=xn.SENTRY_RELEASE)==null?void 0:n.id,sendClientReports:!0},...Zte(e)}}function Zte(e){const t={};for(const n of Object.getOwnPropertyNames(e)){const i=n;e[i]!==void 0&&(t[i]=e[i])}return t}function qte(){var l;const e=typeof xn.window<"u"&&xn;if(!e)return!1;const t=e.chrome?"chrome":"browser",n=e[t],i=(l=n==null?void 0:n.runtime)==null?void 0:l.id,r=Yv()||"",s=["chrome-extension:","moz-extension:","ms-browser-extension:","safari-web-extension:"],o=!!i&&xn===xn.top&&s.some(c=>r.startsWith(`${c}//`)),a=typeof e.nw<"u";return!!i&&!o&&!a}function Qte(e={}){const t=Kte(e);if(!t.skipBrowserExtensionCheck&&qte()){x0&&Kh(()=>{console.error("[Sentry] You cannot run Sentry this way in a browser extension, check: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")});return}x0&&!KO()&&Fe.warn("No Fetch API detected. The Sentry SDK requires a Fetch API compatible environment to send events. Please add a Fetch API polyfill.");const n={...t,stackParser:Fq(t.stackParser||gte),integrations:xJ(t),transport:t.transport||tte};return NJ(Vee,n)}function Jte(){const e=Error.prepareStackTrace;try{let t=[];return Error.prepareStackTrace=(n,i)=>{const r=i.slice(1);return t=r,r},new Error().stack,t}finally{Error.prepareStackTrace=e}}var ene={};const tP={"excalidraw.com":"production","staging.excalidraw.com":"staging","vercel.app":"staging"},tne=ene.VITE_APP_DISABLE_SENTRY==="true",u8=!tne&&Object.keys(tP).find(e=>window.location.hostname.indexOf(e)>=0);Qte({dsn:u8?"https://7bfc596a5bf945eda6b660d3015a5460@sentry.io/5179260":void 0,environment:u8?tP[u8]:void 0,release:"",ignoreErrors:["undefined is not an object (evaluating 'window.__pad.performLoop')","InvalidStateError: Failed to execute 'transaction' on 'IDBDatabase': The database connection is closing.",/(Failed to fetch|(fetch|loading) dynamically imported module)/i,/QuotaExceededError: (The quota has been exceeded|.*setItem.*Storage)/i,"Internal error opening backing store for indexedDB.open"],integrations:[pee({levels:["error"]})],beforeSend(e){var t;return(t=e.request)!=null&&t.url&&(e.request.url=e.request.url.replace(/#.*$/,"")),e.exception||(e.exception={values:[{type:"ConsoleError",value:e.message??"Unknown error",stacktrace:{frames:Jte().slice(1).filter(n=>{var i;return n.getFileName()&&!((i=n.getFileName())!=null&&i.includes("@sentry_browser.js"))}).map(n=>{var i;return{filename:n.getFileName()??void 0,function:n.getFunctionName()??void 0,in_app:!(((i=n.getFileName())==null?void 0:i.includes("node_modules"))??!1),lineno:n.getLineNumber()??void 0,colno:n.getColumnNumber()??void 0}})},mechanism:{type:"instrument",handled:!0,data:{function:"console.error",handler:"Sentry.beforeSend"}}}]}),e}});class nne{constructor(t){F(this,"content",[]);this.scoreFunction=t}sinkDown(t){const n=this.content[t];for(;t>0;){const i=(t+1>>1)-1,r=this.content[i];if(this.scoreFunction(n)<this.scoreFunction(r))this.content[i]=n,this.content[t]=r,t=i;else break}}bubbleUp(t){const n=this.content.length,i=this.content[t],r=this.scoreFunction(i);for(;;){const s=t+1<<1,o=s-1;let a=null,l=0;if(o<n){const c=this.content[o];l=this.scoreFunction(c),l<r&&(a=o)}if(s<n){const c=this.content[s];this.scoreFunction(c)<(a===null?r:l)&&(a=s)}if(a!==null)this.content[t]=this.content[a],this.content[a]=i,t=a;else break}}push(t){this.content.push(t),this.sinkDown(this.content.length-1)}pop(){if(this.content.length===0)return null;const t=this.content[0],n=this.content.pop();return this.content.length>0&&(this.content[0]=n,this.bubbleUp(0)),t}remove(t){if(this.content.length===0)return;const n=this.content.indexOf(t),i=this.content.pop();n<this.content.length&&(this.content[n]=i,this.scoreFunction(i)<this.scoreFunction(t)?this.sinkDown(n):this.bubbleUp(n))}size(){return this.content.length}rescoreElement(t){this.sinkDown(this.content.indexOf(t))}}const ine="#ffffff",rne="#000000",sne=["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],one=["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],ane=["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],lne=["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],cne=["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],une=["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],dne=["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],fne=["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],hne=["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],gne=["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],mne=["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],pne=["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],Une=["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"],ai={white:ine,black:rne,gray:sne,red:one,pink:ane,grape:lne,violet:cne,indigo:une,blue:dne,cyan:fne,teal:hne,green:gne,lime:mne,yellow:pne,orange:Une},nP=240,bne=(e,t)=>t.reduce((n,i)=>(i in e&&(n[i]=e[i]),n),{}),yne=5,of=5,Ene=4,a1=4,l1=1,ws=[0,2,4,6,8],Ts=(e,t)=>t.map(n=>ai[e][n]),Xe={transparent:"transparent",black:"#1e1e1e",white:"#ffffff",gray:Ts("gray",ws),red:Ts("red",ws),pink:Ts("pink",ws),grape:Ts("grape",ws),violet:Ts("violet",ws),blue:Ts("blue",ws),cyan:Ts("cyan",ws),teal:Ts("teal",ws),green:Ts("green",ws),yellow:Ts("yellow",ws),orange:Ts("orange",ws),bronze:["#f8f1ee","#eaddd7","#d2bab0","#a18072","#846358"]},iP=bne(Xe,["cyan","blue","violet","grape","pink","green","teal","yellow","orange","red"]),rP=[Xe.black,Xe.red[a1],Xe.green[a1],Xe.blue[a1],Xe.yellow[a1]],sP=[Xe.transparent,Xe.red[l1],Xe.green[l1],Xe.blue[l1],Xe.yellow[l1]],oP=[Xe.white,"#f8f9fa","#f5faff","#fffce8","#fdf8f6"],vne={transparent:Xe.transparent,white:Xe.white,gray:Xe.gray,black:Xe.black,bronze:Xe.bronze,...iP},_ne={transparent:Xe.transparent,white:Xe.white,gray:Xe.gray,black:Xe.black,bronze:Xe.bronze,...iP},wne=e=>[Xe.cyan[e],Xe.blue[e],Xe.violet[e],Xe.grape[e],Xe.pink[e],Xe.green[e],Xe.teal[e],Xe.yellow[e],Xe.orange[e],Xe.red[e]],Tne=(e,t,n)=>`#${((1<<24)+(e<<16)+(t<<8)+n).toString(16).slice(1)}`,zo=/Mac|iPod|iPhone|iPad/.test(navigator.platform),aP=/^Win/.test(navigator.platform),Sne=/\b(android)\b/i.test(navigator.userAgent),C0="netscape"in window&&navigator.userAgent.indexOf("rv:")>1&&navigator.userAgent.indexOf("Gecko")>1,Ine=navigator.userAgent.indexOf("Chrome")!==-1,xne=!Ine&&navigator.userAgent.indexOf("Safari")!==-1,lP=/iPad|iPhone/.test(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document,Cne=()=>{var e,t;return((t=(e=navigator.brave)==null?void 0:e.isBrave)==null?void 0:t.name)==="isBrave"},K3=typeof window<"u"&&"ResizeObserver"in window,La="Excalidraw",Ane=36,eu=10,$U=8,Mne=5,yx=1,Rne=30,bc=Math.PI/12,kne="red",Tt={TEXT:"text",CROSSHAIR:"crosshair",GRABBING:"grabbing",GRAB:"grab",POINTER:"pointer",MOVE:"move",AUTO:""},vl={MAIN:0,WHEEL:1,SECONDARY:2,TOUCH:-1,ERASER:5},tu={enabled:"all",disabled:"none",inheritFromUI:"var(--ui-pointerEvents)"};var te=(e=>(e.COPY="copy",e.PASTE="paste",e.CUT="cut",e.KEYDOWN="keydown",e.KEYUP="keyup",e.MOUSE_MOVE="mousemove",e.RESIZE="resize",e.UNLOAD="unload",e.FOCUS="focus",e.BLUR="blur",e.DRAG_OVER="dragover",e.DROP="drop",e.GESTURE_END="gestureend",e.BEFORE_UNLOAD="beforeunload",e.GESTURE_START="gesturestart",e.GESTURE_CHANGE="gesturechange",e.POINTER_MOVE="pointermove",e.POINTER_DOWN="pointerdown",e.POINTER_UP="pointerup",e.STATE_CHANGE="statechange",e.WHEEL="wheel",e.TOUCH_START="touchstart",e.TOUCH_END="touchend",e.HASHCHANGE="hashchange",e.VISIBILITY_CHANGE="visibilitychange",e.SCROLL="scroll",e.EXCALIDRAW_LINK="excalidraw-link",e.MENU_ITEM_SELECT="menu.itemSelect",e.MESSAGE="message",e.FULLSCREENCHANGE="fullscreenchange",e))(te||{});const Yp={UNSTARTED:-1,ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3,CUED:5},cP={TEST:"test",DEVELOPMENT:"development"},gh={SHAPE_ACTIONS_MENU:"App-menu__left",ZOOM_ACTIONS:"zoom-actions",SEARCH_MENU_INPUT_WRAPPER:"layer-ui__search-inputWrapper"},Sf="Xiaolai",A0="Segoe UI Emoji",It={Virgil:1,Helvetica:2,Cascadia:3,Excalifont:5,Nunito:6,"Lilita One":7,"Comic Shanns":8,"Liberation Sans":9},If={[Sf]:100,[A0]:1e3},uP=e=>{switch(e){case It.Excalifont:return[Sf,A0];default:return[A0]}},xe={LIGHT:"light",DARK:"dark"},sn={strokeColor:"#bbb",strokeWidth:2,strokeStyle:"solid",fillStyle:"solid",roughness:0,roundness:null,backgroundColor:"transparent",radius:8,nameOffsetY:3,nameColorLightTheme:"#999999",nameColorDarkTheme:"#7a7a7a",nameFontSize:14,nameLineHeight:1.25},r9=1,ul=20,Pc=It.Excalifont,Dm="left",eb="top",dP="{version}",Qu=2,tb=2*Qu,Lne=1e-5,Dne=2*tb-Lne,Wp="#ffffff",Nne="#1e1e1e",One="#a2f1a6",nb=20,fP=5,mh={svg:"image/svg+xml",png:"image/png",jpg:"image/jpeg",gif:"image/gif",webp:"image/webp",bmp:"image/bmp",ico:"image/x-icon",avif:"image/avif",jfif:"image/jfif"},be={text:"text/plain",html:"text/html",json:"application/json",excalidraw:"application/vnd.excalidraw+json",excalidrawlib:"application/vnd.excalidrawlib+json","excalidraw.svg":"image/svg+xml","excalidraw.png":"image/png",binary:"application/octet-stream",...mh},Pne=[be.text,be.html,...Object.values(mh)],d8={png:"png",svg:"svg",clipboard:"clipboard"},ds={excalidraw:"excalidraw",excalidrawClipboard:"excalidraw/clipboard",excalidrawLibrary:"excalidrawlib",excalidrawClipboardWithAPI:"excalidraw-api/clipboard"},s9=window.EXCALIDRAW_EXPORT_SOURCE||window.location.origin,Fne=500,Bne=300,zne=500,Hne=1e4,Vne=3e4,$ne=100,V6=.1,o9=.1,a9=30,Gne=300,Ex=6e4,vx=3e3,l9="invert(93%) hue-rotate(180deg)",Z3={addLibrary:"addLibrary"},q3={addLibrary:"addLibrary"},_x={canvasActions:{changeViewBackgroundColor:!0,clearCanvas:!0,export:{saveFileToDisk:!0},loadScene:!0,saveToActiveFile:!0,toggleTheme:null,saveAsImage:!0}},Xne=730,jne=1e3,Yne=500,Wne=1229,Dg=2,c9=[1,2,3],qh=10,Kne=1440,wx=4*1024*1024,at="http://www.w3.org/2000/svg",hP=128,$6={excalidraw:2,excalidrawLibrary:2},Dn=5,Zne=.7,qne=11,kr={TOP:"top",MIDDLE:"middle",BOTTOM:"bottom"},M0={LEFT:"left",CENTER:"center",RIGHT:"right"},Qne=20,f8=.25,Jne=32,Nn={LEGACY:1,PROPORTIONAL_RADIUS:2,ADAPTIVE_RADIUS:3},gP={artist:1,cartoonist:2},h8={thin:1,bold:2,extraBold:4},un={strokeColor:Xe.black,backgroundColor:Xe.transparent,fillStyle:"solid",strokeWidth:2,strokeStyle:"solid",roughness:gP.artist,opacity:100,locked:!1},ib="library",ku="search",fs={name:"default",defaultTab:ib},mP=new Set(["iframe","embeddable","image"]),Gn={selection:"selection",rectangle:"rectangle",diamond:"diamond",ellipse:"ellipse",text:"text",image:"image",eraser:"eraser",frame:"frame",magicframe:"magicframe",laser:"laser"},z1={MERMAID_TO_EXCALIDRAW:"mermaid-to-excalidraw",PUBLISH_LIBRARY:"publish-library-data"},pP="Untitled",xf={generalStats:1,elementProperties:2},qr=1,ei={sharp:"sharp",round:"round",elbow:"elbow"},UP=.3,rb="element";var gu=(e=>(e.ACTIVE="active",e.AWAY="away",e.IDLE="idle",e))(gu||{});const ph={[It.Excalifont]:{metrics:{unitsPerEm:1e3,ascender:886,descender:-374,lineHeight:1.25}},[It.Nunito]:{metrics:{unitsPerEm:1e3,ascender:1011,descender:-353,lineHeight:1.35}},[It["Lilita One"]]:{metrics:{unitsPerEm:1e3,ascender:923,descender:-220,lineHeight:1.15}},[It["Comic Shanns"]]:{metrics:{unitsPerEm:1e3,ascender:750,descender:-250,lineHeight:1.25}},[It.Virgil]:{metrics:{unitsPerEm:1e3,ascender:886,descender:-374,lineHeight:1.25},deprecated:!0},[It.Helvetica]:{metrics:{unitsPerEm:2048,ascender:1577,descender:-471,lineHeight:1.15},deprecated:!0,local:!0},[It.Cascadia]:{metrics:{unitsPerEm:2048,ascender:1900,descender:-480,lineHeight:1.2},deprecated:!0},[It["Liberation Sans"]]:{metrics:{unitsPerEm:2048,ascender:1854,descender:-434,lineHeight:1.15},serverSide:!0},[If.Xiaolai]:{metrics:{unitsPerEm:1e3,ascender:880,descender:-144,lineHeight:1.15},fallback:!0},[If["Segoe UI Emoji"]]:{metrics:{unitsPerEm:1e3,ascender:886,descender:-374,lineHeight:1.25},local:!0,fallback:!0}},ou={LATIN:"U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD",LATIN_EXT:"U+0100-02AF, U+0304, U+0308, U+0329, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF",CYRILIC_EXT:"U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F",CYRILIC:"U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116",VIETNAMESE:"U+0102-0103, U+0110-0111, U+0128-0129, U+0168-0169, U+01A0-01A1, U+01AF-01B0, U+0300-0301, U+0303-0304, U+0308-0309, U+0323, U+0329, U+1EA0-1EF9, U+20AB"},u9="local:",bP=(e,t,n)=>{var c;const{unitsPerEm:i,ascender:r,descender:s}=((c=ph[e])==null?void 0:c.metrics)||ph[It.Excalifont].metrics,o=t/i,a=(n-o*r+o*s)/2;return o*r+a},Ju=e=>{var n;const{lineHeight:t}=((n=ph[e])==null?void 0:n.metrics)||ph[It.Excalifont].metrics;return t};class eie{constructor(){F(this,"jobs",[]);F(this,"running",!1)}tick(){if(this.running)return;const t=this.jobs.shift();t?(this.running=!0,t.promise.resolve(vc(t.jobFactory,...t.args).finally(()=>{this.running=!1,this.tick()}))):this.running=!1}push(t,...n){const i=G6();return this.jobs.push({jobFactory:t,promise:i,args:n}),this.tick(),i}}const Je={EQUAL:"Equal",MINUS:"Minus",NUM_ADD:"NumpadAdd",NUM_SUBTRACT:"NumpadSubtract",NUM_ZERO:"Numpad0",BRACKET_RIGHT:"BracketRight",BRACKET_LEFT:"BracketLeft",ONE:"Digit1",TWO:"Digit2",THREE:"Digit3",QUOTE:"Quote",ZERO:"Digit0",SLASH:"Slash",C:"KeyC",D:"KeyD",H:"KeyH",V:"KeyV",Z:"KeyZ",Y:"KeyY",R:"KeyR",S:"KeyS"},z={ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",BACKSPACE:"Backspace",ALT:"Alt",CTRL_OR_CMD:zo?"metaKey":"ctrlKey",DELETE:"Delete",ENTER:"Enter",ESCAPE:"Escape",QUESTION_MARK:"?",SPACE:" ",TAB:"Tab",CHEVRON_LEFT:"<",CHEVRON_RIGHT:">",PERIOD:".",COMMA:",",SLASH:"/",A:"a",D:"d",E:"e",F:"f",G:"g",H:"h",I:"i",L:"l",O:"o",P:"p",Q:"q",R:"r",S:"s",T:"t",V:"v",X:"x",Y:"y",Z:"z",K:"k",0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9"},tie=new Map([[z.Z,Je.Z],[z.Y,Je.Y]]),nie=e=>/^[a-z]$/.test(e.toLowerCase()),Q3=(e,t)=>{if(t===e.key.toLowerCase())return!0;const n=tie.get(t);return!!(n&&!nie(e.key)&&e.code===n)},c1=e=>e===z.ARROW_LEFT||e===z.ARROW_RIGHT||e===z.ARROW_DOWN||e===z.ARROW_UP,g8=e=>e.altKey,Ng=e=>e.shiftKey,H1=e=>e.shiftKey,yc=1e-4,Ge=(e,t,n)=>Math.min(Math.max(e,t),n),Da=(e,t,n="round")=>{const i=Math.pow(10,t);return Math[n]((e+Number.EPSILON)*i)/i},iie=(e,t,n="round")=>{const i=1/t;return Math[n](e*i)/i},Kp=(e,t)=>(e+t)/2,V1=e=>typeof e=="number"&&Number.isFinite(e),Tx=(e,t,n=yc)=>Math.abs(e-t)<n,R0=e=>e<0?e+2*Math.PI:e>=2*Math.PI?e-2*Math.PI:e;function Lu(e){return e*Math.PI/180}function Nm(e){return e*180/Math.PI}function rie(e){return Math.abs(Math.sin(2*e))<yc}function Ui(e,t,n=0,i=0){return[e-n,t-i]}function ve(e,t=[0,0]){return Ui(e[0]-t[0],e[1]-t[1])}function $n(e,t){return e[0]*t[1]-t[0]*e[1]}function Sx(e,t){return e[0]*t[0]+e[1]*t[1]}function zl(e,t){return[e[0]+t[0],e[1]+t[1]]}function sb(e,t){return[e[0]-t[0],e[1]-t[1]]}function Zt(e,t){return Ui(e[0]*t,e[1]*t)}function sie(e){return e[0]*e[0]+e[1]*e[1]}function oie(e){return Math.sqrt(sie(e))}const li=e=>{const t=oie(e);return t===0?Ui(0,0):Ui(e[0]/t,e[1]/t)};function C(e,t){return[e,t]}function d9(e){return e.length===2?C(e[0],e[1]):void 0}function He(e,t=C(0,0)){return C(t[0]+e[0],t[1]+e[1])}function mu(e){return Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&!isNaN(e[0])&&typeof e[1]=="number"&&!isNaN(e[1])}function Zs(e,t){const n=Math.abs;return n(e[0]-t[0])<yc&&n(e[1]-t[1])<yc}function q([e,t],[n,i],r){return C((e-n)*Math.cos(r)-(t-i)*Math.sin(r)+n,(e-n)*Math.sin(r)+(t-i)*Math.cos(r)+i)}function ob(e,t=[0,0]){return C(e[0]+t[0],e[1]+t[1])}function k0(e,t){return C((e[0]+t[0])/2,(e[1]+t[1])/2)}function mt(e,t){return Math.hypot(t[0]-e[0],t[1]-e[1])}function ya(e,t){const n=t[0]-e[0],i=t[1]-e[1];return n*n+i*i}const la=(e,t,n)=>ob(t,Zt(ve(e,t),n)),yP=(e,t,n)=>t[0]<=Math.max(e[0],n[0])&&t[0]>=Math.min(e[0],n[0])&&t[1]<=Math.max(e[1],n[1])&&t[1]>=Math.min(e[1],n[1]);function J3(e,t){return[e,t]}function aie(e,t){const n=e[1][1]-e[0][1],i=e[0][0]-e[1][0],r=t[1][1]-t[0][1],s=t[0][0]-t[1][0],o=n*s-r*i;if(o!==0){const a=n*e[0][0]+i*e[0][1],l=r*t[0][0]+s*t[0][1];return C((a*s-l*i)/o,(n*l-r*a)/o)}return null}function _e(e,t){return[e,t]}const lie=e=>Array.isArray(e)&&e.length===2&&mu(e[0])&&mu(e[0]),ed=(e,t,n=yc)=>{const i=f9(e,t);return i===0?!0:i<n},f9=(e,t)=>{const[n,i]=e,[[r,s],[o,a]]=t,l=n-r,c=i-s,u=o-r,d=a-s,f=l*u+c*d,h=u*u+d*d;let m=-1;h!==0&&(m=f/h);let p,b;m<0?(p=r,b=s):m>1?(p=o,b=a):(p=r+m*u,b=s+m*d);const E=n-p,y=i-b;return Math.sqrt(E*E+y*y)};function L0(e,t){const n=aie(J3(e[0],e[1]),J3(t[0],t[1]));return!n||!ed(n,t)||!ed(n,e)?null:n}function eE(e,t){return[e,t]}function cie(e,t){return[_e(e[0],C(e[1][0],e[0][1])),_e(C(e[1][0],e[0][1]),e[1]),_e(e[1],C(e[0][0],e[1][1])),_e(C(e[0][0],e[1][1]),e[0])].map(n=>L0(t,n)).filter(n=>!!n)}function Ca(e,t,n,i){return[e,t,n,i]}function Ix(e,t,n,i=1e-6){return[(e(t+i,n)-e(t-i,n))/(2*i),(e(t,n+i)-e(t,n-i))/(2*i)]}function uie(e,t,n,i=.001,r=10){let s=1/0,o=0;for(;s>=i;){if(o>=r)return null;const a=e(t,n),l=[Ix((p,b)=>e(p,b)[0],t,n),Ix((p,b)=>e(p,b)[1],t,n)],c=[[-a[0]],[-a[1]]],u=l[0][0]*l[1][1]-l[0][1]*l[1][0];if(u===0)return null;const d=[[l[1][1]/u,-l[0][1]/u],[-l[1][0]/u,l[0][0]/u]],f=[[d[0][0]*c[0][0]+d[0][1]*c[1][0]],[d[1][0]*c[0][0]+d[1][1]*c[1][0]]];t=t+f[0][0],n=n+f[1][0];const[h,m]=e(t,n);s=Math.max(Math.abs(h),Math.abs(m)),o+=1}return[t,n]}const $1=(e,t)=>C((1-t)**3*e[0][0]+3*(1-t)**2*t*e[1][0]+3*(1-t)*t**2*e[2][0]+t**3*e[3][0],(1-t)**3*e[0][1]+3*(1-t)**2*t*e[1][1]+3*(1-t)*t**2*e[2][1]+t**3*e[3][1]);function EP(e,t){const n=hie(e);if(cie(eE(C(n[0],n[1]),C(n[2],n[3])),t).length===0)return[];const i=a=>C(t[0][0]+a*(t[1][0]-t[0][0]),t[0][1]+a*(t[1][1]-t[0][1])),r=[[.5,0],[.2,0],[.8,0]],s=([a,l])=>{const c=uie((f,h)=>{const m=$1(e,f),p=i(h);return[m[0]-p[0],m[1]-p[1]]},a,l);if(!c)return null;const[u,d]=c;return u<0||u>1||d<0||d>1?null:$1(e,u)};let o=s(r[0]);return o?[o]:(o=s(r[1]),o?[o]:(o=s(r[2]),o?[o]:[]))}function die(e,t,n=.001){const i=(c,u,d,f=n)=>{let h=c,m=u,p;for(;m-h>f;)p=(m+h)/2,d(p-f)<d(p+f)?m=p:h=p;return p};let s=0;for(let c=1/0,u=0;u<30;u++){const d=mt(t,$1(e,u/30));d<c&&(c=d,s=u)}const o=Math.max((s-1)/30,0),a=Math.min((s+1)/30,1),l=i(o,a,c=>mt(t,$1(e,c)));return l?$1(e,l):null}function vP(e,t){const n=die(e,t);return n?mt(t,n):0}function fie(e){return Array.isArray(e)&&e.length===4&&mu(e[0])&&mu(e[1])&&mu(e[2])&&mu(e[3])}function hie(e){const[t,n,i,r]=e,s=[t[0],n[0],i[0],r[0]],o=[t[1],n[1],i[1],r[1]];return[Math.min(...s),Math.min(...o),Math.max(...s),Math.max(...o)]}function xx(...e){return _P(e)}function ab(e){return _P(e)}const Cx=(e,t)=>{const n=e[0],i=e[1];let r=!1;for(let s=0,o=t.length-1;s<t.length;o=s++){const a=t[s][0],l=t[s][1],c=t[o][0],u=t[o][1];(l>i&&u<=i||l<=i&&u>i)&&n<(c-a)*(i-l)/(u-l)+a&&(r=!r)}return r},gie=(e,t,n=yc)=>{let i=!1;for(let r=0,s=t.length-1;r<s;r++)if(ed(e,_e(t[r],t[r+1]),n)){i=!0;break}return i};function _P(e){return mie(e)?e:[...e,e[0]]}function mie(e){return Zs(e[0],e[e.length-1])}function Li(e,t){return Us([e,t])}const lb=([e,t],[n,i])=>e<=n?t>=n:e>=n?i>=e:!1,cb=([e,t],[n,i])=>{const r=Math.max(e,n),s=Math.min(t,i);return r<=s?Us([r,s]):null},Zp=(e,[t,n])=>e>=t&&e<=n;function $d([e,t,n],i){const r=(u,d,f)=>(u[0]-f[0])*(d[1]-f[1])-(d[0]-f[0])*(u[1]-f[1]),s=r(i,e,t),o=r(i,t,n),a=r(i,n,e),l=s<0||o<0||a<0,c=s>0||o>0||a>0;return!(l&&c)}const Uh=e=>{const t=e.map(i=>i[0]),n=e.map(i=>i[1]);return{width:Math.max(...t)-Math.min(...t),height:Math.max(...n)-Math.min(...n)}},ub=(e,t,n,i)=>{const r=n.map(h=>h[e]),s=Math.max(...r),o=Math.min(...r),a=s-o,l=a===0?1:t/a;let c=1/0;const u=n.map(h=>{const m=h[e]*l,p=[...h];return p[e]=m,m<c&&(c=m),p});if(!i||u.length===2)return u;const d=o-c;return u.map(h=>h.map((m,p)=>p===e?m+d:m))},Mn=(e,t,n)=>n?[Math.round(e/n)*n,Math.round(t/n)*n]:[e,t];var wP={exports:{}};(function(e,t){(function(n,i){e.exports=i()})(_a,function(){var n=function(){this._listeners={}};n.prototype.addEventListener=function(c,u){this._listeners[c]=this._listeners[c]||[],this._listeners[c].indexOf(u)<0&&this._listeners[c].push(u)},n.prototype.removeEventListener=function(c,u){if(this._listeners[c]){var d=this._listeners[c].indexOf(u);d>=0&&this._listeners[c].splice(d,1)}},n.prototype.dispatchEvent=function(c){if(this._listeners[c.type]&&this._listeners[c.type].length)for(var u=this._listeners[c.type].slice(),d=0,f=u.length;d<f;++d)u[d].call(this,c)};var i=function(c){return typeof c.constructor=="function"&&c.constructor.name==="GeneratorFunction"},r=function(c){return{next:function(){var u=c();return u?{value:u}:{done:!0}}}},s=function(c){var u=!1;return{next:function(){return u?{done:!0}:(u=!0,{value:c})}}},o=function(c,u){var d=typeof c;if(d==="object"){if(typeof c.next=="function")return c;if(typeof c.then=="function")return s(c)}return d==="function"?i(c)?c():r(c):s(u.resolve(c))},a=function(c,u,d){this.target=c,this.type=u,this.data=d},l=function(c,u,d){if(n.call(this),typeof u!="number"||Math.floor(u)!==u||u<1)throw new Error("Invalid concurrency");this._concurrency=u,this._options=d||{},this._options.promise=this._options.promise||Promise,this._iterator=o(c,this._options.promise),this._done=!1,this._size=0,this._promise=null,this._callbacks=null};return l.prototype=new n,l.prototype.constructor=l,l.prototype.concurrency=function(c){return typeof c<"u"&&(this._concurrency=c,this.active()&&this._proceed()),this._concurrency},l.prototype.size=function(){return this._size},l.prototype.active=function(){return!!this._promise},l.prototype.promise=function(){return this._promise},l.prototype.start=function(){var c=this,u=this._options.promise;return this._promise=new u(function(d,f){c._callbacks={reject:f,resolve:d},c._proceed()}),this._promise},l.prototype._fireEvent=function(c,u){this.dispatchEvent(new a(this,c,u))},l.prototype._settle=function(c){c?this._callbacks.reject(c):this._callbacks.resolve(),this._promise=null,this._callbacks=null},l.prototype._onPooledPromiseFulfilled=function(c,u){this._size--,this.active()&&(this._fireEvent("fulfilled",{promise:c,result:u}),this._proceed())},l.prototype._onPooledPromiseRejected=function(c,u){this._size--,this.active()&&(this._fireEvent("rejected",{promise:c,error:u}),this._settle(u||new Error("Unknown error")))},l.prototype._trackPromise=function(c){var u=this;c.then(function(d){u._onPooledPromiseFulfilled(c,d)},function(d){u._onPooledPromiseRejected(c,d)}).catch(function(d){u._settle(new Error("Promise processing failed: "+d))})},l.prototype._proceed=function(){if(!this._done){for(var c={done:!1};this._size<this._concurrency&&!(c=this._iterator.next()).done;)this._size++,this._trackPromise(c.value);this._done=c===null||!!c.done}this._done&&this._size===0&&this._settle()},l.PromisePoolEvent=a,l.PromisePool=l,l})})(wP);var pie=wP.exports;const Uie=al(pie);class Ax{constructor(t,n){F(this,"pool");F(this,"entries",{});this.pool=new Uie(t,n)}all(){const t=n=>{if(n.data.result){const[i,r]=n.data.result;this.entries[i]=r}};return this.pool.addEventListener("fulfilled",t),this.pool.start().then(()=>(setTimeout(()=>{this.pool.removeEventListener("fulfilled",t)}),Object.values(this.entries)))}}let TP=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");function bie(){return Math.floor(Math.random()*2**31)}class SP{constructor(t){this.seed=t}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}const Mx=()=>{const e=new Date,t=e.getFullYear(),n=`${e.getMonth()+1}`.padStart(2,"0"),i=`${e.getDate()}`.padStart(2,"0"),r=`${e.getHours()}`.padStart(2,"0"),s=`${e.getMinutes()}`.padStart(2,"0");return`${t}-${n}-${i}-${r}${s}`},G1=e=>e.charAt(0).toUpperCase()+e.slice(1),yie=e=>e instanceof HTMLElement&&e.className.includes("ToolIcon"),tE=e=>e instanceof HTMLElement&&e.dataset.type==="wysiwyg"||e instanceof HTMLBRElement||e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLSelectElement,Eie=e=>tE(e)||e instanceof Element&&!!e.closest("label, button"),au=e=>e instanceof HTMLElement&&e.dataset.type==="wysiwyg"||e instanceof HTMLBRElement||e instanceof HTMLTextAreaElement||e instanceof HTMLInputElement&&(e.type==="text"||e.type==="number"||e.type==="password"),Om=({fontFamily:e})=>{for(const[t,n]of Object.entries(It))if(n===e)return`${t}${uP(n).map(i=>`, ${i}`).join("")}`;return A0},Ct=({fontSize:e,fontFamily:t})=>`${e}px ${Om({fontFamily:t})}`,$a=(e,t)=>{let n=0,i=null;const r=(...s)=>{i=s,clearTimeout(n),n=window.setTimeout(()=>{i=null,e(...s)},t)};return r.flush=()=>{if(clearTimeout(n),i){const s=i;i=null,e(...s)}},r.cancel=()=>{i=null,clearTimeout(n)},r},Qh=(e,t)=>{let n=null,i=null,r=null;const s=a=>{n=window.requestAnimationFrame(()=>{n=null,e(...a),i=null,r&&(i=r,r=null,s(i))})},o=(...a)=>{i=a,n===null?s(i):t!=null&&t.trailing&&(r=a)};return o.flush=()=>{n!==null&&(cancelAnimationFrame(n),n=null),i&&(e(...r||i),i=r=null)},o.cancel=()=>{i=r=null,n!==null&&(cancelAnimationFrame(n),n=null)},o},Du=e=>1-Math.pow(1-e,4),Rx=(e,t,n)=>(t-e)*Du(n)+e,vie=({fromValues:e,toValues:t,onStep:n,duration:i=250,interpolateValue:r,onStart:s,onEnd:o,onCancel:a})=>{let l=!1,c=0,u;function d(f){if(l)return;u===void 0&&(u=f,s==null||s());const h=Math.min(f-u,i),m=Du(h/i),p={};if(Object.keys(e).forEach(b=>{const E=b,y=(t[E]-e[E])*m+e[E];p[E]=y}),n(p),h<i){const b=h/i,E={};Object.keys(e).forEach(y=>{const v=y,_=e[v],S=t[v];let M;M=r?r(_,S,b,v):Rx(_,S,b),M==null&&(M=Rx(_,S,b)),E[v]=M}),n(E),c=window.requestAnimationFrame(d)}else n(t),o==null||o()}return c=window.requestAnimationFrame(d),()=>{a==null||a(),l=!0,window.cancelAnimationFrame(c)}},_ie=(e,t)=>{if(!e.length||t<1)return[];let n=0,i=0;const r=Array(Math.ceil(e.length/t));for(;n<e.length;)r[i++]=e.slice(n,n+=t);return r},Ni=(e,t)=>Math.abs(e-t),Tn=(e,t)=>t.type==="custom"?{...e.activeTool,type:"custom",customType:t.customType,locked:t.locked??e.activeTool.locked}:{...e.activeTool,lastActiveTool:t.lastActiveToolBeforeEraser===void 0?e.activeTool.lastActiveTool:t.lastActiveToolBeforeEraser,type:t.type,customType:null,locked:t.locked??e.activeTool.locked},Q=e=>(e=e.replace(/\bAlt\b/i,"Alt").replace(/\bShift\b/i,"Shift").replace(/\b(Enter|Return)\b/i,"Enter"),zo?e.replace(/\bCtrlOrCmd\b/gi,"Cmd").replace(/\bAlt\b/i,"Option"):e.replace(/\bCtrlOrCmd\b/gi,"Ctrl")),Pt=({clientX:e,clientY:t},{zoom:n,offsetLeft:i,offsetTop:r,scrollX:s,scrollY:o})=>{const a=(e-i)/n.value-s,l=(t-r)/n.value-o;return{x:a,y:l}},Os=({sceneX:e,sceneY:t},{zoom:n,offsetLeft:i,offsetTop:r,scrollX:s,scrollY:o})=>{const a=(e+s)*n.value+i,l=(t+o)*n.value+r;return{x:a,y:l}},qp=e=>getComputedStyle(document.documentElement).getPropertyValue(`--${e}`),wie="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿Ⰰ-﬜﷾-﹯﻽-￿",Tie="֑-߿יִ-﷽ﹰ-ﻼ",Sie=new RegExp(`^[^${wie}]*[${Tie}]`),IP=e=>Sie.test(e),Ps=e=>{const[t,n]=e;return{x:t,y:n}},xP=e=>{if((e==null?void 0:e.name)==="AbortError"){console.warn(e);return}throw e},CP=(e,t,n=0)=>{n<0&&(n=e.length+n),n=Math.min(e.length,Math.max(n,0));let i=n-1;for(;++i<e.length;)if(t(e[i],i,e))return i;return-1},lu=(e,t,n=e.length-1)=>{n<0&&(n=e.length+n),n=Math.min(e.length-1,Math.max(n,0));let i=n+1;for(;--i>-1;)if(t(e[i],i,e))return i;return-1},Fs=e=>{const t=e.length===5&&e.substr(4,1)==="0",n=e.length===9&&e.substr(7,2)==="00";return t||n||e===Xe.transparent},m8=e=>e.fillStyle!=="solid"||Fs(e.backgroundColor),G6=()=>{let e,t;const n=new Promise((i,r)=>{e=i,t=r});return n.resolve=e,n.reject=t,n},kx=(e,t)=>{const n=[{value:1,symbol:"b"},{value:1e3,symbol:"k"},{value:1e6,symbol:"M"},{value:1e9,symbol:"G"}],i=/\.0+$|(\.[0-9]*[1-9])0+$/;let r;for(r=n.length-1;r>0&&!(e>=n[r].value);r--);return(e/n[r].value).toFixed(t).replace(i,"$1")+n[r].symbol},nE=()=>{var e;return((e=document.querySelector('meta[name="version"]'))==null?void 0:e.content)||dP},Iie=e=>{let t=e.parentElement;for(;t;){if(t===document.body)return document;const{overflowY:n}=window.getComputedStyle(t);if(t.scrollHeight>t.clientHeight&&(n==="auto"||n==="scroll"||n==="overlay"))return t;t=t.parentElement}return document},xie=e=>{let t=e.parentElement;for(;t;){if(t.tabIndex>-1){t.focus();return}t=t.parentElement}},h9=e=>{e.preventDefault(),e.returnValue=""},AP=e=>Array.from(e).map(t=>`0${t.toString(16)}`.slice(-2)).join(""),Jh=()=>Date.now(),Se=e=>e instanceof Map?e:e.reduce((t,n)=>(t.set(typeof n=="string"?n:n.id,n),t),new Map),Cie=e=>e.reduce((t,n,i)=>(t.set(n.id,[n,i]),t),new Map),ra=(e,t)=>e.reduce((n,i)=>(n[t?t(i):String(i)]=i,n),{}),Aie=e=>e.reduce((t,n,i)=>{const r={...n,prev:null,next:null};if(i!==0){const s=t[i-1];if(r.prev=s,s.next=r,i===e.length-1){const o=t[0];r.next=o,o.prev=r}}return t.push(r),t},[]),Mie=()=>cP.TEST==="production",g9=()=>cP.DEVELOPMENT==="production",Rie=()=>typeof process<"u"&&!0,MP=(e,t)=>new CustomEvent(e,{detail:{nativeEvent:t},cancelable:!0}),GU=(e,t)=>{let n=!1;for(const i in t){const r=t[i];if(typeof r<"u"){if(e[i]===r&&(typeof r!="object"||r===null))continue;n=!0}}return n?{...e,...t}:e},Pm=()=>{try{return window.self===window.top?"top":"iframe"}catch{return"iframe"}},kie=()=>Pm()==="iframe",Fm=e=>!!e&&typeof e=="object"&&"then"in e&&"catch"in e&&"finally"in e,iE=e=>{const t=e==null?void 0:e.querySelectorAll("button, a, input, select, textarea, div[tabindex], label[tabindex]");return t?Array.from(t).filter(n=>n.tabIndex>-1&&!n.disabled):[]},Lx=(e,t)=>Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t,_i=(e,t,n,i=!1)=>{const r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return i&&console.warn("%cisShallowEqual: objects don't have same properties ->","color: #8B4000",e,t),!1;if(n&&Array.isArray(n)){for(const o of n)if(!(e[o]===t[o]||Lx(e[o],t[o])))return i&&console.warn(`%cisShallowEqual: ${o} not equal ->`,"color: #8B4000",e[o],t[o]),!1;return!0}return r.every(o=>{const a=n==null?void 0:n[o],l=a?a(e[o],t[o]):e[o]===t[o]||Lx(e[o],t[o]);return!l&&i&&console.warn(`%cisShallowEqual: ${o} not equal ->`,"color: #8B4000",e[o],t[o]),l})},X6=(e,t,{checkForDefaultPrevented:n=!0}={})=>function(r){if(e==null||e(r),!n||!(r!=null&&r.defaultPrevented))return t==null?void 0:t(r)},Ec=(e,t,n)=>{if(!t)return e;if(n)return console.error(t),e;throw new Error(t)};function mr(e,t){if(!e)throw new Error(t)}const Lie=e=>{let t,n;const i=function(r){const s=Object.entries(r);if(t){let a=!0;for(const[l,c]of s)if(t.get(l)!==c){a=!1;break}if(a)return n}const o=e(r);return t=new Map(s),n=o,o};return i.clear=()=>{t=void 0,n=void 0},i},RP=(e,t)=>e instanceof Set||e instanceof Map?e.has(t):"includes"in e?e.includes(t):e.hasOwnProperty(t),Na=e=>JSON.parse(JSON.stringify(e)),Og=(e,t)=>_i(e,t)?e:t;function nn(e,t,n,i){var r;return e?((r=e==null?void 0:e.addEventListener)==null||r.call(e,t,n,i),()=>{var s;(s=e==null?void 0:e.removeEventListener)==null||s.call(e,t,n,i)}):()=>{}}function Die(e,t=!0){const n=e.length;if(n<4)return"";let i=e[0],r=e[1];const s=e[2];let o=`M${i[0].toFixed(2)},${i[1].toFixed(2)} Q${r[0].toFixed(2)},${r[1].toFixed(2)} ${Kp(r[0],s[0]).toFixed(2)},${Kp(r[1],s[1]).toFixed(2)} T`;for(let a=2,l=n-1;a<l;a++)i=e[a],r=e[a+1],o+=`${Kp(i[0],r[0]).toFixed(2)},${Kp(i[1],r[1]).toFixed(2)} `;return t&&(o+="Z"),o}const kP=e=>e.replace(/\r?\n|\r/g,`
`),Us=e=>e,vc=async(e,...t)=>new Promise(n=>{n(e(...t))}),Nie=(...e)=>Math.max(...e.map(t=>t?1:0))>0,Oie=e=>{try{return JSON.parse(e)}catch{return null}},XU=e=>e.replace(/"/g,"&quot;"),Qp=e=>Array.isArray(e)?e:[e];let Pie=new SP(Date.now());const Ga=()=>Math.floor(Pie.next()*2**31),zr=()=>TP();var m9={};Object.defineProperty(m9,"__esModule",{value:!0});var LP=m9.sanitizeUrl=void 0,Fie=/^([^\w]*)(javascript|data|vbscript)/im,Bie=/&#(\w+)(^\w|;)?/g,zie=/&(newline|tab);/gi,Hie=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,Vie=/^.+(:|&colon;)/gim,$ie=[".","/"];function Gie(e){return $ie.indexOf(e[0])>-1}function Xie(e){return e.replace(Bie,function(t,n){return String.fromCharCode(n)})}function jie(e){var t=Xie(e||"").replace(zie,"").replace(Hie,"").trim();if(!t)return"about:blank";if(Gie(t))return t;var n=t.match(Vie);if(!n)return t;var i=n[0];return Fie.test(i)?"about:blank":t}LP=m9.sanitizeUrl=jie;const Pr=e=>(e=e.trim(),e&&LP(XU(e))),DP=e=>!!(e!=null&&e.includes(location.origin)||e!=null&&e.startsWith("/")),p9=e=>{if(e=Pr(e),e.startsWith("/"))return`${location.origin}${e}`;try{new URL(e)}catch{return"about:blank"}return e};function NP(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=NP(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}function me(){for(var e=0,t,n,i="";e<arguments.length;)(t=arguments[e++])&&(n=NP(t))&&(i&&(i+=" "),i+=n);return i}var OP="Expected a function",Dx=NaN,Yie="[object Symbol]",Wie=/^\s+|\s+$/g,Kie=/^[-+]0x[0-9a-f]+$/i,Zie=/^0b[01]+$/i,qie=/^0o[0-7]+$/i,Qie=parseInt,Jie=typeof _a=="object"&&_a&&_a.Object===Object&&_a,ere=typeof self=="object"&&self&&self.Object===Object&&self,tre=Jie||ere||Function("return this")(),nre=Object.prototype,ire=nre.toString,rre=Math.max,sre=Math.min,p8=function(){return tre.Date.now()};function ore(e,t,n){var i,r,s,o,a,l,c=0,u=!1,d=!1,f=!0;if(typeof e!="function")throw new TypeError(OP);t=Nx(t)||0,db(n)&&(u=!!n.leading,d="maxWait"in n,s=d?rre(Nx(n.maxWait)||0,t):s,f="trailing"in n?!!n.trailing:f);function h(M){var w=i,T=r;return i=r=void 0,c=M,o=e.apply(T,w),o}function m(M){return c=M,a=setTimeout(E,t),u?h(M):o}function p(M){var w=M-l,T=M-c,A=t-w;return d?sre(A,s-T):A}function b(M){var w=M-l,T=M-c;return l===void 0||w>=t||w<0||d&&T>=s}function E(){var M=p8();if(b(M))return y(M);a=setTimeout(E,p(M))}function y(M){return a=void 0,f&&i?h(M):(i=r=void 0,o)}function v(){a!==void 0&&clearTimeout(a),c=0,i=l=r=a=void 0}function _(){return a===void 0?o:y(p8())}function S(){var M=p8(),w=b(M);if(i=arguments,r=this,l=M,w){if(a===void 0)return m(l);if(d)return a=setTimeout(E,t),h(l)}return a===void 0&&(a=setTimeout(E,t)),o}return S.cancel=v,S.flush=_,S}function are(e,t,n){var i=!0,r=!0;if(typeof e!="function")throw new TypeError(OP);return db(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),ore(e,t,{leading:i,maxWait:t,trailing:r})}function db(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function lre(e){return!!e&&typeof e=="object"}function cre(e){return typeof e=="symbol"||lre(e)&&ire.call(e)==Yie}function Nx(e){if(typeof e=="number")return e;if(cre(e))return Dx;if(db(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=db(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(Wie,"");var n=Zie.test(e);return n||qie.test(e)?Qie(e.slice(2),n?2:8):Kie.test(e)?Dx:+e}var ure=are;const Mo=al(ure);function rE(e,t,n){if(e&&e.length){const[i,r]=t,s=Math.PI/180*n,o=Math.cos(s),a=Math.sin(s);for(const l of e){const[c,u]=l;l[0]=(c-i)*o-(u-r)*a+i,l[1]=(c-i)*a+(u-r)*o+r}}}function dre(e,t,n){const i=[];e.forEach(r=>i.push(...r)),rE(i,t,n)}function fre(e,t){return e[0]===t[0]&&e[1]===t[1]}function hre(e,t,n,i=1){const r=n,s=Math.max(t,.1),o=e[0]&&e[0][0]&&typeof e[0][0]=="number"?[e]:e,a=[0,0];if(r)for(const c of o)rE(c,a,r);const l=gre(o,s,i);if(r){for(const c of o)rE(c,a,-r);dre(l,a,-r)}return l}function gre(e,t,n){const i=[];for(const c of e){const u=[...c];fre(u[0],u[u.length-1])||u.push([u[0][0],u[0][1]]),u.length>2&&i.push(u)}const r=[];t=Math.max(t,.1);const s=[];for(const c of i)for(let u=0;u<c.length-1;u++){const d=c[u],f=c[u+1];if(d[1]!==f[1]){const h=Math.min(d[1],f[1]);s.push({ymin:h,ymax:Math.max(d[1],f[1]),x:h===d[1]?d[0]:f[0],islope:(f[0]-d[0])/(f[1]-d[1])})}}if(s.sort((c,u)=>c.ymin<u.ymin?-1:c.ymin>u.ymin?1:c.x<u.x?-1:c.x>u.x?1:c.ymax===u.ymax?0:(c.ymax-u.ymax)/Math.abs(c.ymax-u.ymax)),!s.length)return r;let o=[],a=s[0].ymin,l=0;for(;o.length||s.length;){if(s.length){let c=-1;for(let d=0;d<s.length&&!(s[d].ymin>a);d++)c=d;s.splice(0,c+1).forEach(d=>{o.push({s:a,edge:d})})}if(o=o.filter(c=>!(c.edge.ymax<=a)),o.sort((c,u)=>c.edge.x===u.edge.x?0:(c.edge.x-u.edge.x)/Math.abs(c.edge.x-u.edge.x)),(n!==1||l%t===0)&&o.length>1)for(let c=0;c<o.length;c=c+2){const u=c+1;if(u>=o.length)break;const d=o[c].edge,f=o[u].edge;r.push([[Math.round(d.x),a],[Math.round(f.x),a]])}a+=n,o.forEach(c=>{c.edge.x=c.edge.x+n*c.edge.islope}),l++}return r}function Bm(e,t){var n;const i=t.hachureAngle+90;let r=t.hachureGap;r<0&&(r=t.strokeWidth*4),r=Math.max(r,.1);let s=1;return t.roughness>=1&&(((n=t.randomizer)===null||n===void 0?void 0:n.next())||Math.random())>.7&&(s=r),hre(e,r,i,s||1)}class U9{constructor(t){this.helper=t}fillPolygons(t,n){return this._fillPolygons(t,n)}_fillPolygons(t,n){const i=Bm(t,n);return{type:"fillSketch",ops:this.renderLines(i,n)}}renderLines(t,n){const i=[];for(const r of t)i.push(...this.helper.doubleLineOps(r[0][0],r[0][1],r[1][0],r[1][1],n));return i}}function j6(e){const t=e[0],n=e[1];return Math.sqrt(Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2))}class mre extends U9{fillPolygons(t,n){let i=n.hachureGap;i<0&&(i=n.strokeWidth*4),i=Math.max(i,.1);const r=Object.assign({},n,{hachureGap:i}),s=Bm(t,r),o=Math.PI/180*n.hachureAngle,a=[],l=i*.5*Math.cos(o),c=i*.5*Math.sin(o);for(const[d,f]of s)j6([d,f])&&a.push([[d[0]-l,d[1]+c],[...f]],[[d[0]+l,d[1]-c],[...f]]);return{type:"fillSketch",ops:this.renderLines(a,n)}}}class pre extends U9{fillPolygons(t,n){const i=this._fillPolygons(t,n),r=Object.assign({},n,{hachureAngle:n.hachureAngle+90}),s=this._fillPolygons(t,r);return i.ops=i.ops.concat(s.ops),i}}class Ure{constructor(t){this.helper=t}fillPolygons(t,n){n=Object.assign({},n,{hachureAngle:0});const i=Bm(t,n);return this.dotsOnLines(i,n)}dotsOnLines(t,n){const i=[];let r=n.hachureGap;r<0&&(r=n.strokeWidth*4),r=Math.max(r,.1);let s=n.fillWeight;s<0&&(s=n.strokeWidth/2);const o=r/4;for(const a of t){const l=j6(a),c=l/r,u=Math.ceil(c)-1,d=l-u*r,f=(a[0][0]+a[1][0])/2-r/4,h=Math.min(a[0][1],a[1][1]);for(let m=0;m<u;m++){const p=h+d+m*r,b=f-o+Math.random()*2*o,E=p-o+Math.random()*2*o,y=this.helper.ellipse(b,E,s,s,n);i.push(...y.ops)}}return{type:"fillSketch",ops:i}}}class bre{constructor(t){this.helper=t}fillPolygons(t,n){const i=Bm(t,n);return{type:"fillSketch",ops:this.dashedLine(i,n)}}dashedLine(t,n){const i=n.dashOffset<0?n.hachureGap<0?n.strokeWidth*4:n.hachureGap:n.dashOffset,r=n.dashGap<0?n.hachureGap<0?n.strokeWidth*4:n.hachureGap:n.dashGap,s=[];return t.forEach(o=>{const a=j6(o),l=Math.floor(a/(i+r)),c=(a+r-l*(i+r))/2;let u=o[0],d=o[1];u[0]>d[0]&&(u=o[1],d=o[0]);const f=Math.atan((d[1]-u[1])/(d[0]-u[0]));for(let h=0;h<l;h++){const m=h*(i+r),p=m+i,b=[u[0]+m*Math.cos(f)+c*Math.cos(f),u[1]+m*Math.sin(f)+c*Math.sin(f)],E=[u[0]+p*Math.cos(f)+c*Math.cos(f),u[1]+p*Math.sin(f)+c*Math.sin(f)];s.push(...this.helper.doubleLineOps(b[0],b[1],E[0],E[1],n))}}),s}}class yre{constructor(t){this.helper=t}fillPolygons(t,n){const i=n.hachureGap<0?n.strokeWidth*4:n.hachureGap,r=n.zigzagOffset<0?i:n.zigzagOffset;n=Object.assign({},n,{hachureGap:i+r});const s=Bm(t,n);return{type:"fillSketch",ops:this.zigzagLines(s,r,n)}}zigzagLines(t,n,i){const r=[];return t.forEach(s=>{const o=j6(s),a=Math.round(o/(2*n));let l=s[0],c=s[1];l[0]>c[0]&&(l=s[1],c=s[0]);const u=Math.atan((c[1]-l[1])/(c[0]-l[0]));for(let d=0;d<a;d++){const f=d*2*n,h=(d+1)*2*n,m=Math.sqrt(2*Math.pow(n,2)),p=[l[0]+f*Math.cos(u),l[1]+f*Math.sin(u)],b=[l[0]+h*Math.cos(u),l[1]+h*Math.sin(u)],E=[p[0]+m*Math.cos(u+Math.PI/4),p[1]+m*Math.sin(u+Math.PI/4)];r.push(...this.helper.doubleLineOps(p[0],p[1],E[0],E[1],i),...this.helper.doubleLineOps(E[0],E[1],b[0],b[1],i))}}),r}}const sr={};function Ere(e,t){let n=e.fillStyle||"hachure";if(!sr[n])switch(n){case"zigzag":sr[n]||(sr[n]=new mre(t));break;case"cross-hatch":sr[n]||(sr[n]=new pre(t));break;case"dots":sr[n]||(sr[n]=new Ure(t));break;case"dashed":sr[n]||(sr[n]=new bre(t));break;case"zigzag-line":sr[n]||(sr[n]=new yre(t));break;case"hachure":default:n="hachure",sr[n]||(sr[n]=new U9(t));break}return sr[n]}const vre=0,sE=1,PP=2,Jp={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function _re(e){const t=new Array;for(;e!=="";)if(e.match(/^([ \t\r\n,]+)/))e=e.substr(RegExp.$1.length);else if(e.match(/^([aAcChHlLmMqQsStTvVzZ])/))t[t.length]={type:vre,text:RegExp.$1},e=e.substr(RegExp.$1.length);else if(e.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))t[t.length]={type:sE,text:`${parseFloat(RegExp.$1)}`},e=e.substr(RegExp.$1.length);else return[];return t[t.length]={type:PP,text:""},t}function U8(e,t){return e.type===t}function b9(e){const t=[],n=_re(e);let i="BOD",r=0,s=n[r];for(;!U8(s,PP);){let o=0;const a=[];if(i==="BOD")if(s.text==="M"||s.text==="m")r++,o=Jp[s.text],i=s.text;else return b9("M0,0"+e);else U8(s,sE)?o=Jp[i]:(r++,o=Jp[s.text],i=s.text);if(r+o<n.length){for(let l=r;l<r+o;l++){const c=n[l];if(U8(c,sE))a[a.length]=+c.text;else throw new Error("Param not a number: "+i+","+c.text)}if(typeof Jp[i]=="number"){const l={key:i,data:a};t.push(l),r+=o,s=n[r],i==="M"&&(i="L"),i==="m"&&(i="l")}else throw new Error("Bad segment: "+i)}else throw new Error("Path data ended short")}return t}function FP(e){let t=0,n=0,i=0,r=0;const s=[];for(const{key:o,data:a}of e)switch(o){case"M":s.push({key:"M",data:[...a]}),[t,n]=a,[i,r]=a;break;case"m":t+=a[0],n+=a[1],s.push({key:"M",data:[t,n]}),i=t,r=n;break;case"L":s.push({key:"L",data:[...a]}),[t,n]=a;break;case"l":t+=a[0],n+=a[1],s.push({key:"L",data:[t,n]});break;case"C":s.push({key:"C",data:[...a]}),t=a[4],n=a[5];break;case"c":{const l=a.map((c,u)=>u%2?c+n:c+t);s.push({key:"C",data:l}),t=l[4],n=l[5];break}case"Q":s.push({key:"Q",data:[...a]}),t=a[2],n=a[3];break;case"q":{const l=a.map((c,u)=>u%2?c+n:c+t);s.push({key:"Q",data:l}),t=l[2],n=l[3];break}case"A":s.push({key:"A",data:[...a]}),t=a[5],n=a[6];break;case"a":t+=a[5],n+=a[6],s.push({key:"A",data:[a[0],a[1],a[2],a[3],a[4],t,n]});break;case"H":s.push({key:"H",data:[...a]}),t=a[0];break;case"h":t+=a[0],s.push({key:"H",data:[t]});break;case"V":s.push({key:"V",data:[...a]}),n=a[0];break;case"v":n+=a[0],s.push({key:"V",data:[n]});break;case"S":s.push({key:"S",data:[...a]}),t=a[2],n=a[3];break;case"s":{const l=a.map((c,u)=>u%2?c+n:c+t);s.push({key:"S",data:l}),t=l[2],n=l[3];break}case"T":s.push({key:"T",data:[...a]}),t=a[0],n=a[1];break;case"t":t+=a[0],n+=a[1],s.push({key:"T",data:[t,n]});break;case"Z":case"z":s.push({key:"Z",data:[]}),t=i,n=r;break}return s}function BP(e){const t=[];let n="",i=0,r=0,s=0,o=0,a=0,l=0;for(const{key:c,data:u}of e){switch(c){case"M":t.push({key:"M",data:[...u]}),[i,r]=u,[s,o]=u;break;case"C":t.push({key:"C",data:[...u]}),i=u[4],r=u[5],a=u[2],l=u[3];break;case"L":t.push({key:"L",data:[...u]}),[i,r]=u;break;case"H":i=u[0],t.push({key:"L",data:[i,r]});break;case"V":r=u[0],t.push({key:"L",data:[i,r]});break;case"S":{let d=0,f=0;n==="C"||n==="S"?(d=i+(i-a),f=r+(r-l)):(d=i,f=r),t.push({key:"C",data:[d,f,...u]}),a=u[0],l=u[1],i=u[2],r=u[3];break}case"T":{const[d,f]=u;let h=0,m=0;n==="Q"||n==="T"?(h=i+(i-a),m=r+(r-l)):(h=i,m=r);const p=i+2*(h-i)/3,b=r+2*(m-r)/3,E=d+2*(h-d)/3,y=f+2*(m-f)/3;t.push({key:"C",data:[p,b,E,y,d,f]}),a=h,l=m,i=d,r=f;break}case"Q":{const[d,f,h,m]=u,p=i+2*(d-i)/3,b=r+2*(f-r)/3,E=h+2*(d-h)/3,y=m+2*(f-m)/3;t.push({key:"C",data:[p,b,E,y,h,m]}),a=d,l=f,i=h,r=m;break}case"A":{const d=Math.abs(u[0]),f=Math.abs(u[1]),h=u[2],m=u[3],p=u[4],b=u[5],E=u[6];d===0||f===0?(t.push({key:"C",data:[i,r,b,E,b,E]}),i=b,r=E):(i!==b||r!==E)&&(zP(i,r,b,E,d,f,h,m,p).forEach(function(v){t.push({key:"C",data:v})}),i=b,r=E);break}case"Z":t.push({key:"Z",data:[]}),i=s,r=o;break}n=c}return t}function wre(e){return Math.PI*e/180}function Pg(e,t,n){const i=e*Math.cos(n)-t*Math.sin(n),r=e*Math.sin(n)+t*Math.cos(n);return[i,r]}function zP(e,t,n,i,r,s,o,a,l,c){const u=wre(o);let d=[],f=0,h=0,m=0,p=0;if(c)[f,h,m,p]=c;else{[e,t]=Pg(e,t,-u),[n,i]=Pg(n,i,-u);const D=(e-n)/2,L=(t-i)/2;let G=D*D/(r*r)+L*L/(s*s);G>1&&(G=Math.sqrt(G),r=G*r,s=G*s);const V=a===l?-1:1,H=r*r,$=s*s,j=H*$-H*L*L-$*D*D,X=H*L*L+$*D*D,K=V*Math.sqrt(Math.abs(j/X));m=K*r*L/s+(e+n)/2,p=K*-s*D/r+(t+i)/2,f=Math.asin(parseFloat(((t-p)/s).toFixed(9))),h=Math.asin(parseFloat(((i-p)/s).toFixed(9))),e<m&&(f=Math.PI-f),n<m&&(h=Math.PI-h),f<0&&(f=Math.PI*2+f),h<0&&(h=Math.PI*2+h),l&&f>h&&(f=f-Math.PI*2),!l&&h>f&&(h=h-Math.PI*2)}let b=h-f;if(Math.abs(b)>Math.PI*120/180){const D=h,L=n,G=i;l&&h>f?h=f+Math.PI*120/180*1:h=f+Math.PI*120/180*-1,n=m+r*Math.cos(h),i=p+s*Math.sin(h),d=zP(n,i,L,G,r,s,o,0,l,[h,D,m,p])}b=h-f;const E=Math.cos(f),y=Math.sin(f),v=Math.cos(h),_=Math.sin(h),S=Math.tan(b/4),M=4/3*r*S,w=4/3*s*S,T=[e,t],A=[e+M*y,t-w*E],I=[n+M*_,i-w*v],R=[n,i];if(A[0]=2*T[0]-A[0],A[1]=2*T[1]-A[1],c)return[A,I,R].concat(d);{d=[A,I,R].concat(d);const D=[];for(let L=0;L<d.length;L+=3){const G=Pg(d[L][0],d[L][1],u),V=Pg(d[L+1][0],d[L+1][1],u),H=Pg(d[L+2][0],d[L+2][1],u);D.push([G[0],G[1],V[0],V[1],H[0],H[1]])}return D}}const Tre={randOffset:Are,randOffsetWithRange:Mre,ellipse:xre,doubleLineOps:Rre};function HP(e,t,n,i,r){return{type:"path",ops:Xa(e,t,n,i,r)}}function jU(e,t,n){const i=(e||[]).length;if(i>2){const r=[];for(let s=0;s<i-1;s++)r.push(...Xa(e[s][0],e[s][1],e[s+1][0],e[s+1][1],n));return t&&r.push(...Xa(e[i-1][0],e[i-1][1],e[0][0],e[0][1],n)),{type:"path",ops:r}}else if(i===2)return HP(e[0][0],e[0][1],e[1][0],e[1][1],n);return{type:"path",ops:[]}}function Sre(e,t){return jU(e,!0,t)}function Ire(e,t,n,i,r){const s=[[e,t],[e+n,t],[e+n,t+i],[e,t+i]];return Sre(s,r)}function Ox(e,t){let n=zx(e,1*(1+t.roughness*.2),t);if(!t.disableMultiStroke){const i=zx(e,1.5*(1+t.roughness*.22),kre(t));n=n.concat(i)}return{type:"path",ops:n}}function xre(e,t,n,i,r){const s=VP(n,i,r);return oE(e,t,r,s).opset}function VP(e,t,n){const i=Math.sqrt(Math.PI*2*Math.sqrt((Math.pow(e/2,2)+Math.pow(t/2,2))/2)),r=Math.ceil(Math.max(n.curveStepCount,n.curveStepCount/Math.sqrt(200)*i)),s=Math.PI*2/r;let o=Math.abs(e/2),a=Math.abs(t/2);const l=1-n.curveFitting;return o+=Le(o*l,n),a+=Le(a*l,n),{increment:s,rx:o,ry:a}}function oE(e,t,n,i){const[r,s]=Hx(i.increment,e,t,i.rx,i.ry,1,i.increment*fb(.1,fb(.4,1,n),n),n);let o=hb(r,null,n);if(!n.disableMultiStroke&&n.roughness!==0){const[a]=Hx(i.increment,e,t,i.rx,i.ry,1.5,0,n),l=hb(a,null,n);o=o.concat(l)}return{estimatedPoints:s,opset:{type:"path",ops:o}}}function Px(e,t,n,i,r,s,o,a,l){const c=e,u=t;let d=Math.abs(n/2),f=Math.abs(i/2);d+=Le(d*.01,l),f+=Le(f*.01,l);let h=r,m=s;for(;h<0;)h+=Math.PI*2,m+=Math.PI*2;m-h>Math.PI*2&&(h=0,m=Math.PI*2);const p=Math.PI*2/l.curveStepCount,b=Math.min(p/2,(m-h)/2),E=Vx(b,c,u,d,f,h,m,1,l);if(!l.disableMultiStroke){const y=Vx(b,c,u,d,f,h,m,1.5,l);E.push(...y)}return o&&(a?E.push(...Xa(c,u,c+d*Math.cos(h),u+f*Math.sin(h),l),...Xa(c,u,c+d*Math.cos(m),u+f*Math.sin(m),l)):E.push({op:"lineTo",data:[c,u]},{op:"lineTo",data:[c+d*Math.cos(h),u+f*Math.sin(h)]})),{type:"path",ops:E}}function Fx(e,t){const n=BP(FP(b9(e))),i=[];let r=[0,0],s=[0,0];for(const{key:o,data:a}of n)switch(o){case"M":{s=[a[0],a[1]],r=[a[0],a[1]];break}case"L":i.push(...Xa(s[0],s[1],a[0],a[1],t)),s=[a[0],a[1]];break;case"C":{const[l,c,u,d,f,h]=a;i.push(...Lre(l,c,u,d,f,h,s,t)),s=[f,h];break}case"Z":i.push(...Xa(s[0],s[1],r[0],r[1],t)),s=[r[0],r[1]];break}return{type:"path",ops:i}}function b8(e,t){const n=[];for(const i of e)if(i.length){const r=t.maxRandomnessOffset||0,s=i.length;if(s>2){n.push({op:"move",data:[i[0][0]+Le(r,t),i[0][1]+Le(r,t)]});for(let o=1;o<s;o++)n.push({op:"lineTo",data:[i[o][0]+Le(r,t),i[o][1]+Le(r,t)]})}}return{type:"fillPath",ops:n}}function af(e,t){return Ere(t,Tre).fillPolygons(e,t)}function Cre(e,t,n,i,r,s,o){const a=e,l=t;let c=Math.abs(n/2),u=Math.abs(i/2);c+=Le(c*.01,o),u+=Le(u*.01,o);let d=r,f=s;for(;d<0;)d+=Math.PI*2,f+=Math.PI*2;f-d>Math.PI*2&&(d=0,f=Math.PI*2);const h=(f-d)/o.curveStepCount,m=[];for(let p=d;p<=f;p=p+h)m.push([a+c*Math.cos(p),l+u*Math.sin(p)]);return m.push([a+c*Math.cos(f),l+u*Math.sin(f)]),m.push([a,l]),af([m],o)}function Are(e,t){return Le(e,t)}function Mre(e,t,n){return fb(e,t,n)}function Rre(e,t,n,i,r){return Xa(e,t,n,i,r,!0)}function kre(e){const t=Object.assign({},e);return t.randomizer=void 0,e.seed&&(t.seed=e.seed+1),t}function $P(e){return e.randomizer||(e.randomizer=new SP(e.seed||0)),e.randomizer.next()}function fb(e,t,n,i=1){return n.roughness*i*($P(n)*(t-e)+e)}function Le(e,t,n=1){return fb(-e,e,t,n)}function Xa(e,t,n,i,r,s=!1){const o=s?r.disableMultiStrokeFill:r.disableMultiStroke,a=Bx(e,t,n,i,r,!0,!1);if(o)return a;const l=Bx(e,t,n,i,r,!0,!0);return a.concat(l)}function Bx(e,t,n,i,r,s,o){const a=Math.pow(e-n,2)+Math.pow(t-i,2),l=Math.sqrt(a);let c=1;l<200?c=1:l>500?c=.4:c=-.0016668*l+1.233334;let u=r.maxRandomnessOffset||0;u*u*100>a&&(u=l/10);const d=u/2,f=.2+$P(r)*.2;let h=r.bowing*r.maxRandomnessOffset*(i-t)/200,m=r.bowing*r.maxRandomnessOffset*(e-n)/200;h=Le(h,r,c),m=Le(m,r,c);const p=[],b=()=>Le(d,r,c),E=()=>Le(u,r,c),y=r.preserveVertices;return o?p.push({op:"move",data:[e+(y?0:b()),t+(y?0:b())]}):p.push({op:"move",data:[e+(y?0:Le(u,r,c)),t+(y?0:Le(u,r,c))]}),o?p.push({op:"bcurveTo",data:[h+e+(n-e)*f+b(),m+t+(i-t)*f+b(),h+e+2*(n-e)*f+b(),m+t+2*(i-t)*f+b(),n+(y?0:b()),i+(y?0:b())]}):p.push({op:"bcurveTo",data:[h+e+(n-e)*f+E(),m+t+(i-t)*f+E(),h+e+2*(n-e)*f+E(),m+t+2*(i-t)*f+E(),n+(y?0:E()),i+(y?0:E())]}),p}function zx(e,t,n){const i=[];i.push([e[0][0]+Le(t,n),e[0][1]+Le(t,n)]),i.push([e[0][0]+Le(t,n),e[0][1]+Le(t,n)]);for(let r=1;r<e.length;r++)i.push([e[r][0]+Le(t,n),e[r][1]+Le(t,n)]),r===e.length-1&&i.push([e[r][0]+Le(t,n),e[r][1]+Le(t,n)]);return hb(i,null,n)}function hb(e,t,n){const i=e.length,r=[];if(i>3){const s=[],o=1-n.curveTightness;r.push({op:"move",data:[e[1][0],e[1][1]]});for(let a=1;a+2<i;a++){const l=e[a];s[0]=[l[0],l[1]],s[1]=[l[0]+(o*e[a+1][0]-o*e[a-1][0])/6,l[1]+(o*e[a+1][1]-o*e[a-1][1])/6],s[2]=[e[a+1][0]+(o*e[a][0]-o*e[a+2][0])/6,e[a+1][1]+(o*e[a][1]-o*e[a+2][1])/6],s[3]=[e[a+1][0],e[a+1][1]],r.push({op:"bcurveTo",data:[s[1][0],s[1][1],s[2][0],s[2][1],s[3][0],s[3][1]]})}}else i===3?(r.push({op:"move",data:[e[1][0],e[1][1]]}),r.push({op:"bcurveTo",data:[e[1][0],e[1][1],e[2][0],e[2][1],e[2][0],e[2][1]]})):i===2&&r.push(...Xa(e[0][0],e[0][1],e[1][0],e[1][1],n));return r}function Hx(e,t,n,i,r,s,o,a){const l=a.roughness===0,c=[],u=[];if(l){e=e/4,u.push([t+i*Math.cos(-e),n+r*Math.sin(-e)]);for(let d=0;d<=Math.PI*2;d=d+e){const f=[t+i*Math.cos(d),n+r*Math.sin(d)];c.push(f),u.push(f)}u.push([t+i*Math.cos(0),n+r*Math.sin(0)]),u.push([t+i*Math.cos(e),n+r*Math.sin(e)])}else{const d=Le(.5,a)-Math.PI/2;u.push([Le(s,a)+t+.9*i*Math.cos(d-e),Le(s,a)+n+.9*r*Math.sin(d-e)]);const f=Math.PI*2+d-.01;for(let h=d;h<f;h=h+e){const m=[Le(s,a)+t+i*Math.cos(h),Le(s,a)+n+r*Math.sin(h)];c.push(m),u.push(m)}u.push([Le(s,a)+t+i*Math.cos(d+Math.PI*2+o*.5),Le(s,a)+n+r*Math.sin(d+Math.PI*2+o*.5)]),u.push([Le(s,a)+t+.98*i*Math.cos(d+o),Le(s,a)+n+.98*r*Math.sin(d+o)]),u.push([Le(s,a)+t+.9*i*Math.cos(d+o*.5),Le(s,a)+n+.9*r*Math.sin(d+o*.5)])}return[u,c]}function Vx(e,t,n,i,r,s,o,a,l){const c=s+Le(.1,l),u=[];u.push([Le(a,l)+t+.9*i*Math.cos(c-e),Le(a,l)+n+.9*r*Math.sin(c-e)]);for(let d=c;d<=o;d=d+e)u.push([Le(a,l)+t+i*Math.cos(d),Le(a,l)+n+r*Math.sin(d)]);return u.push([t+i*Math.cos(o),n+r*Math.sin(o)]),u.push([t+i*Math.cos(o),n+r*Math.sin(o)]),hb(u,null,l)}function Lre(e,t,n,i,r,s,o,a){const l=[],c=[a.maxRandomnessOffset||1,(a.maxRandomnessOffset||1)+.3];let u=[0,0];const d=a.disableMultiStroke?1:2,f=a.preserveVertices;for(let h=0;h<d;h++)h===0?l.push({op:"move",data:[o[0],o[1]]}):l.push({op:"move",data:[o[0]+(f?0:Le(c[0],a)),o[1]+(f?0:Le(c[0],a))]}),u=f?[r,s]:[r+Le(c[h],a),s+Le(c[h],a)],l.push({op:"bcurveTo",data:[e+Le(c[h],a),t+Le(c[h],a),n+Le(c[h],a),i+Le(c[h],a),u[0],u[1]]});return l}function Fg(e){return[...e]}function Dre(e,t=0){const n=e.length;if(n<3)throw new Error("A curve must have at least three points.");const i=[];if(n===3)i.push(Fg(e[0]),Fg(e[1]),Fg(e[2]),Fg(e[2]));else{const r=[];r.push(e[0],e[0]);for(let a=1;a<e.length;a++)r.push(e[a]),a===e.length-1&&r.push(e[a]);const s=[],o=1-t;i.push(Fg(r[0]));for(let a=1;a+2<r.length;a++){const l=r[a];s[0]=[l[0],l[1]],s[1]=[l[0]+(o*r[a+1][0]-o*r[a-1][0])/6,l[1]+(o*r[a+1][1]-o*r[a-1][1])/6],s[2]=[r[a+1][0]+(o*r[a][0]-o*r[a+2][0])/6,r[a+1][1]+(o*r[a][1]-o*r[a+2][1])/6],s[3]=[r[a+1][0],r[a+1][1]],i.push(s[1],s[2],s[3])}}return i}function Nre(e,t){return Math.sqrt(YU(e,t))}function YU(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function Ore(e,t,n){const i=YU(t,n);if(i===0)return YU(e,t);let r=((e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1]))/i;return r=Math.max(0,Math.min(1,r)),YU(e,nu(t,n,r))}function nu(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]}function Pre(e,t){const n=e[t+0],i=e[t+1],r=e[t+2],s=e[t+3];let o=3*i[0]-2*n[0]-s[0];o*=o;let a=3*i[1]-2*n[1]-s[1];a*=a;let l=3*r[0]-2*s[0]-n[0];l*=l;let c=3*r[1]-2*s[1]-n[1];return c*=c,o<l&&(o=l),a<c&&(a=c),o+a}function aE(e,t,n,i){const r=i||[];if(Pre(e,t)<n){const s=e[t+0];r.length?Nre(r[r.length-1],s)>1&&r.push(s):r.push(s),r.push(e[t+3])}else{const o=e[t+0],a=e[t+1],l=e[t+2],c=e[t+3],u=nu(o,a,.5),d=nu(a,l,.5),f=nu(l,c,.5),h=nu(u,d,.5),m=nu(d,f,.5),p=nu(h,m,.5);aE([o,u,h,p],0,n,r),aE([p,m,f,c],0,n,r)}return r}function GP(e,t){return gb(e,0,e.length,t)}function gb(e,t,n,i,r){const s=r||[],o=e[t],a=e[n-1];let l=0,c=1;for(let u=t+1;u<n-1;++u){const d=Ore(e[u],o,a);d>l&&(l=d,c=u)}return Math.sqrt(l)>i?(gb(e,t,c+1,i,s),gb(e,c,n,i,s)):(s.length||s.push(o),s.push(a)),s}function y9(e,t=.15,n){const i=[],r=(e.length-1)/3;for(let s=0;s<r;s++){const o=s*3;aE(e,o,t,i)}return n&&n>0?gb(i,0,i.length,n):i}function Fre(e,t,n){const i=b9(e),r=BP(FP(i)),s=[];let o=[],a=[0,0],l=[];const c=()=>{l.length>=4&&o.push(...y9(l,t)),l=[]},u=()=>{c(),o.length&&(s.push(o),o=[])};for(const{key:f,data:h}of r)switch(f){case"M":u(),a=[h[0],h[1]],o.push(a);break;case"L":c(),o.push([h[0],h[1]]);break;case"C":if(!l.length){const m=o.length?o[o.length-1]:a;l.push([m[0],m[1]])}l.push([h[0],h[1]]),l.push([h[2],h[3]]),l.push([h[4],h[5]]);break;case"Z":c(),o.push([a[0],a[1]]);break}if(u(),!n)return s;const d=[];for(const f of s){const h=GP(f,n);h.length&&d.push(h)}return d}const wr="none";class D0{constructor(t){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=t||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return bie()}_o(t){return t?Object.assign({},this.defaultOptions,t):this.defaultOptions}_d(t,n,i){return{shape:t,sets:n||[],options:i||this.defaultOptions}}line(t,n,i,r,s){const o=this._o(s);return this._d("line",[HP(t,n,i,r,o)],o)}rectangle(t,n,i,r,s){const o=this._o(s),a=[],l=Ire(t,n,i,r,o);if(o.fill){const c=[[t,n],[t+i,n],[t+i,n+r],[t,n+r]];o.fillStyle==="solid"?a.push(b8([c],o)):a.push(af([c],o))}return o.stroke!==wr&&a.push(l),this._d("rectangle",a,o)}ellipse(t,n,i,r,s){const o=this._o(s),a=[],l=VP(i,r,o),c=oE(t,n,o,l);if(o.fill)if(o.fillStyle==="solid"){const u=oE(t,n,o,l).opset;u.type="fillPath",a.push(u)}else a.push(af([c.estimatedPoints],o));return o.stroke!==wr&&a.push(c.opset),this._d("ellipse",a,o)}circle(t,n,i,r){const s=this.ellipse(t,n,i,i,r);return s.shape="circle",s}linearPath(t,n){const i=this._o(n);return this._d("linearPath",[jU(t,!1,i)],i)}arc(t,n,i,r,s,o,a=!1,l){const c=this._o(l),u=[],d=Px(t,n,i,r,s,o,a,!0,c);if(a&&c.fill)if(c.fillStyle==="solid"){const f=Object.assign({},c);f.disableMultiStroke=!0;const h=Px(t,n,i,r,s,o,!0,!1,f);h.type="fillPath",u.push(h)}else u.push(Cre(t,n,i,r,s,o,c));return c.stroke!==wr&&u.push(d),this._d("arc",u,c)}curve(t,n){const i=this._o(n),r=[],s=Ox(t,i);if(i.fill&&i.fill!==wr&&t.length>=3)if(i.fillStyle==="solid"){const o=Ox(t,Object.assign(Object.assign({},i),{disableMultiStroke:!0,roughness:i.roughness?i.roughness+i.fillShapeRoughnessGain:0}));r.push({type:"fillPath",ops:this._mergedShape(o.ops)})}else{const o=Dre(t),a=y9(o,10,(1+i.roughness)/2);r.push(af([a],i))}return i.stroke!==wr&&r.push(s),this._d("curve",r,i)}polygon(t,n){const i=this._o(n),r=[],s=jU(t,!0,i);return i.fill&&(i.fillStyle==="solid"?r.push(b8([t],i)):r.push(af([t],i))),i.stroke!==wr&&r.push(s),this._d("polygon",r,i)}path(t,n){const i=this._o(n),r=[];if(!t)return this._d("path",r,i);t=(t||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const s=i.fill&&i.fill!=="transparent"&&i.fill!==wr,o=i.stroke!==wr,a=!!(i.simplification&&i.simplification<1),l=a?4-4*(i.simplification||1):(1+i.roughness)/2,c=Fre(t,1,l),u=Fx(t,i);if(s)if(i.fillStyle==="solid")if(c.length===1){const d=Fx(t,Object.assign(Object.assign({},i),{disableMultiStroke:!0,roughness:i.roughness?i.roughness+i.fillShapeRoughnessGain:0}));r.push({type:"fillPath",ops:this._mergedShape(d.ops)})}else r.push(b8(c,i));else r.push(af(c,i));return o&&(a?c.forEach(d=>{r.push(jU(d,!1,i))}):r.push(u)),this._d("path",r,i)}opsToPath(t,n){let i="";for(const r of t.ops){const s=typeof n=="number"&&n>=0?r.data.map(o=>+o.toFixed(n)):r.data;switch(r.op){case"move":i+=`M${s[0]} ${s[1]} `;break;case"bcurveTo":i+=`C${s[0]} ${s[1]}, ${s[2]} ${s[3]}, ${s[4]} ${s[5]} `;break;case"lineTo":i+=`L${s[0]} ${s[1]} `;break}}return i.trim()}toPaths(t){const n=t.sets||[],i=t.options||this.defaultOptions,r=[];for(const s of n){let o=null;switch(s.type){case"path":o={d:this.opsToPath(s),stroke:i.stroke,strokeWidth:i.strokeWidth,fill:wr};break;case"fillPath":o={d:this.opsToPath(s),stroke:wr,strokeWidth:0,fill:i.fill||wr};break;case"fillSketch":o=this.fillSketch(s,i);break}o&&r.push(o)}return r}fillSketch(t,n){let i=n.fillWeight;return i<0&&(i=n.strokeWidth/2),{d:this.opsToPath(t),stroke:n.fill||wr,strokeWidth:i,fill:wr}}_mergedShape(t){return t.filter((n,i)=>i===0?!0:n.op!=="move")}}class Bre{constructor(t,n){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.gen=new D0(n)}draw(t){const n=t.sets||[],i=t.options||this.getDefaultOptions(),r=this.ctx,s=t.options.fixedDecimalPlaceDigits;for(const o of n)switch(o.type){case"path":r.save(),r.strokeStyle=i.stroke==="none"?"transparent":i.stroke,r.lineWidth=i.strokeWidth,i.strokeLineDash&&r.setLineDash(i.strokeLineDash),i.strokeLineDashOffset&&(r.lineDashOffset=i.strokeLineDashOffset),this._drawToContext(r,o,s),r.restore();break;case"fillPath":{r.save(),r.fillStyle=i.fill||"";const a=t.shape==="curve"||t.shape==="polygon"||t.shape==="path"?"evenodd":"nonzero";this._drawToContext(r,o,s,a),r.restore();break}case"fillSketch":this.fillSketch(r,o,i);break}}fillSketch(t,n,i){let r=i.fillWeight;r<0&&(r=i.strokeWidth/2),t.save(),i.fillLineDash&&t.setLineDash(i.fillLineDash),i.fillLineDashOffset&&(t.lineDashOffset=i.fillLineDashOffset),t.strokeStyle=i.fill||"",t.lineWidth=r,this._drawToContext(t,n,i.fixedDecimalPlaceDigits),t.restore()}_drawToContext(t,n,i,r="nonzero"){t.beginPath();for(const s of n.ops){const o=typeof i=="number"&&i>=0?s.data.map(a=>+a.toFixed(i)):s.data;switch(s.op){case"move":t.moveTo(o[0],o[1]);break;case"bcurveTo":t.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);break;case"lineTo":t.lineTo(o[0],o[1]);break}}n.type==="fillPath"?t.fill(r):t.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(t,n,i,r,s){const o=this.gen.line(t,n,i,r,s);return this.draw(o),o}rectangle(t,n,i,r,s){const o=this.gen.rectangle(t,n,i,r,s);return this.draw(o),o}ellipse(t,n,i,r,s){const o=this.gen.ellipse(t,n,i,r,s);return this.draw(o),o}circle(t,n,i,r){const s=this.gen.circle(t,n,i,r);return this.draw(s),s}linearPath(t,n){const i=this.gen.linearPath(t,n);return this.draw(i),i}polygon(t,n){const i=this.gen.polygon(t,n);return this.draw(i),i}arc(t,n,i,r,s,o,a=!1,l){const c=this.gen.arc(t,n,i,r,s,o,a,l);return this.draw(c),c}curve(t,n){const i=this.gen.curve(t,n);return this.draw(i),i}path(t,n){const i=this.gen.path(t,n);return this.draw(i),i}}const eU="http://www.w3.org/2000/svg";class zre{constructor(t,n){this.svg=t,this.gen=new D0(n)}draw(t){const n=t.sets||[],i=t.options||this.getDefaultOptions(),r=this.svg.ownerDocument||window.document,s=r.createElementNS(eU,"g"),o=t.options.fixedDecimalPlaceDigits;for(const a of n){let l=null;switch(a.type){case"path":{l=r.createElementNS(eU,"path"),l.setAttribute("d",this.opsToPath(a,o)),l.setAttribute("stroke",i.stroke),l.setAttribute("stroke-width",i.strokeWidth+""),l.setAttribute("fill","none"),i.strokeLineDash&&l.setAttribute("stroke-dasharray",i.strokeLineDash.join(" ").trim()),i.strokeLineDashOffset&&l.setAttribute("stroke-dashoffset",`${i.strokeLineDashOffset}`);break}case"fillPath":{l=r.createElementNS(eU,"path"),l.setAttribute("d",this.opsToPath(a,o)),l.setAttribute("stroke","none"),l.setAttribute("stroke-width","0"),l.setAttribute("fill",i.fill||""),(t.shape==="curve"||t.shape==="polygon")&&l.setAttribute("fill-rule","evenodd");break}case"fillSketch":{l=this.fillSketch(r,a,i);break}}l&&s.appendChild(l)}return s}fillSketch(t,n,i){let r=i.fillWeight;r<0&&(r=i.strokeWidth/2);const s=t.createElementNS(eU,"path");return s.setAttribute("d",this.opsToPath(n,i.fixedDecimalPlaceDigits)),s.setAttribute("stroke",i.fill||""),s.setAttribute("stroke-width",r+""),s.setAttribute("fill","none"),i.fillLineDash&&s.setAttribute("stroke-dasharray",i.fillLineDash.join(" ").trim()),i.fillLineDashOffset&&s.setAttribute("stroke-dashoffset",`${i.fillLineDashOffset}`),s}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(t,n){return this.gen.opsToPath(t,n)}line(t,n,i,r,s){const o=this.gen.line(t,n,i,r,s);return this.draw(o)}rectangle(t,n,i,r,s){const o=this.gen.rectangle(t,n,i,r,s);return this.draw(o)}ellipse(t,n,i,r,s){const o=this.gen.ellipse(t,n,i,r,s);return this.draw(o)}circle(t,n,i,r){const s=this.gen.circle(t,n,i,r);return this.draw(s)}linearPath(t,n){const i=this.gen.linearPath(t,n);return this.draw(i)}polygon(t,n){const i=this.gen.polygon(t,n);return this.draw(i)}arc(t,n,i,r,s,o,a=!1,l){const c=this.gen.arc(t,n,i,r,s,o,a,l);return this.draw(c)}curve(t,n){const i=this.gen.curve(t,n);return this.draw(i)}path(t,n){const i=this.gen.path(t,n);return this.draw(i)}}const Fc={canvas(e,t){return new Bre(e,t)},svg(e,t){return new zre(e,t)},generator(e){return new D0(e)},newSeed(){return D0.newSeed()}};let XP=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");const In=e=>!!e&&e.type==="image"&&!!e.fileId,it=e=>!!e&&e.type==="image",lr=e=>!!e&&e.type==="embeddable",Cl=e=>!!e&&e.type==="iframe",is=e=>!!e&&(e.type==="iframe"||e.type==="embeddable"),ue=e=>e!=null&&e.type==="text",jP=e=>e!=null&&e.type==="frame",WU=e=>e!=null&&e.type==="magicframe",Ie=e=>e!=null&&(e.type==="frame"||e.type==="magicframe"),bs=e=>e!=null&&Hre(e.type),Hre=e=>e==="freedraw",ke=e=>e!=null&&E9(e.type),ze=e=>e!=null&&e.type==="arrow",fe=e=>ze(e)&&e.elbowed,E9=e=>e==="arrow"||e==="line",Ea=(e,t=!0)=>e!=null&&(!e.locked||t===!0)&&YP(e.type),YP=e=>e==="arrow",qs=(e,t=!0)=>e!=null&&(!e.locked||t===!0)&&(e.type==="rectangle"||e.type==="diamond"||e.type==="ellipse"||e.type==="image"||e.type==="iframe"||e.type==="embeddable"||e.type==="frame"||e.type==="magicframe"||e.type==="text"&&!e.containerId),Vre=e=>e!=null&&(e.type==="rectangle"||e.type==="diamond"||e.type==="image"||e.type==="iframe"||e.type==="embeddable"||e.type==="frame"||e.type==="magicframe"||e.type==="text"&&!e.containerId),Nu=(e,t=!0)=>e!=null&&(!e.locked||t===!0)&&(e.type==="rectangle"||e.type==="diamond"||e.type==="ellipse"||ze(e)),WP=e=>{const t=e==null?void 0:e.type;if(!t)return!1;switch(t){case"text":case"diamond":case"rectangle":case"iframe":case"embeddable":case"ellipse":case"arrow":case"freedraw":case"line":case"frame":case"magicframe":case"image":case"selection":return!0;default:return Ec(t,null),!1}},Y6=e=>e.type==="rectangle"||e.type==="ellipse"||e.type==="diamond",ys=e=>{var t;return Nu(e)&&!!((t=e.boundElements)!=null&&t.some(({type:n})=>n==="text"))},jt=e=>e!==null&&"containerId"in e&&e.containerId!==null&&ue(e),eg=e=>e==="rectangle"||e==="embeddable"||e==="iframe"||e==="image",KP=e=>e==="line"||e==="arrow"||e==="diamond",$re=(e,t)=>!!((e===Nn.ADAPTIVE_RADIUS||e===Nn.LEGACY)&&eg(t.type)||e===Nn.PROPORTIONAL_RADIUS&&KP(t.type)),Gre=e=>KP(e.type)?{type:Nn.PROPORTIONAL_RADIUS}:eg(e.type)?{type:Nn.ADAPTIVE_RADIUS}:null,mb=e=>Object.hasOwn(e,"fixedPoint")&&e.fixedPoint!=null;function ZP(e,t,n){return{center:e,halfWidth:t,halfHeight:n}}const Xre=(e,t)=>{const{halfWidth:n,halfHeight:i,center:r}=t,s=n,o=i,a=zl(ve(e),Zt(ve(r),-1)),l=Math.abs(a[0]),c=Math.abs(a[1]);let u=.707,d=.707;for(let m=0;m<3;m++){const p=s*u,b=o*d,E=(s*s-o*o)*u**3/s,y=(o*o-s*s)*d**3/o,v=p-E,_=b-y,S=l-E,M=c-y,w=Math.hypot(_,v),T=Math.hypot(M,S);u=Math.min(1,Math.max(0,(S*w/T+E)/s)),d=Math.min(1,Math.max(0,(M*w/T+y)/o));const A=Math.hypot(d,u);u/=A,d/=A}const[f,h]=[s*u*Math.sign(a[0]),o*d*Math.sign(a[1])];return mt(He(a),C(f,h))};function jre({center:e,halfWidth:t,halfHeight:n},[i,r]){const[s,o]=e,a=i[0]-s,l=i[1]-o,c=r[0]-s,u=r[1]-o,d=Math.pow(c-a,2)/Math.pow(t,2)+Math.pow(u-l,2)/Math.pow(n,2),f=2*(a*(c-a)/Math.pow(t,2)+l*(u-l)/Math.pow(n,2)),h=Math.pow(a,2)/Math.pow(t,2)+Math.pow(l,2)/Math.pow(n,2)-1,m=(-f+Math.sqrt(Math.pow(f,2)-4*d*h))/(2*d),p=(-f-Math.sqrt(Math.pow(f,2)-4*d*h))/(2*d),b=[C(a+m*(c-a)+s,l+m*(u-l)+o),C(a+p*(c-a)+s,l+p*(u-l)+o)].filter(E=>!isNaN(E[0])&&!isNaN(E[1]));return b.length===2&&Zs(b[0],b[1])?[b[0]]:b}function qP(e,t=0){const n=Gs(Math.min(e.width,e.height),e);if(n<=0){const f=eE(C(e.x-t,e.y-t),C(e.x+e.width+t,e.y+e.height+t)),h=_e(C(f[0][0]+n,f[0][1]),C(f[1][0]-n,f[0][1])),m=_e(C(f[1][0],f[0][1]+n),C(f[1][0],f[1][1]-n)),p=_e(C(f[0][0]+n,f[1][1]),C(f[1][0]-n,f[1][1])),b=_e(C(f[0][0],f[1][1]-n),C(f[0][0],f[0][1]+n));return[[h,m,p,b],[]]}const i=C(e.x+e.width/2,e.y+e.height/2),r=eE(C(e.x,e.y),C(e.x+e.width,e.y+e.height)),s=_e(C(r[0][0]+n,r[0][1]),C(r[1][0]-n,r[0][1])),o=_e(C(r[1][0],r[0][1]+n),C(r[1][0],r[1][1]-n)),a=_e(C(r[0][0]+n,r[1][1]),C(r[1][0]-n,r[1][1])),l=_e(C(r[0][0],r[1][1]-n),C(r[0][0],r[0][1]+n)),c=[Zt(li(ve(C(r[0][0]-t,r[0][1]-t),i)),t),Zt(li(ve(C(r[1][0]+t,r[0][1]-t),i)),t),Zt(li(ve(C(r[1][0]+t,r[1][1]+t),i)),t),Zt(li(ve(C(r[0][0]-t,r[1][1]+t),i)),t)],u=[Ca(He(c[0],l[1]),He(c[0],C(l[1][0]+2/3*(r[0][0]-l[1][0]),l[1][1]+2/3*(r[0][1]-l[1][1]))),He(c[0],C(s[0][0]+2/3*(r[0][0]-s[0][0]),s[0][1]+2/3*(r[0][1]-s[0][1]))),He(c[0],s[0])),Ca(He(c[1],s[1]),He(c[1],C(s[1][0]+2/3*(r[1][0]-s[1][0]),s[1][1]+2/3*(r[0][1]-s[1][1]))),He(c[1],C(o[0][0]+2/3*(r[1][0]-o[0][0]),o[0][1]+2/3*(r[0][1]-o[0][1]))),He(c[1],o[0])),Ca(He(c[2],o[1]),He(c[2],C(o[1][0]+2/3*(r[1][0]-o[1][0]),o[1][1]+2/3*(r[1][1]-o[1][1]))),He(c[2],C(a[1][0]+2/3*(r[1][0]-a[1][0]),a[1][1]+2/3*(r[1][1]-a[1][1]))),He(c[2],a[1])),Ca(He(c[3],a[0]),He(c[3],C(a[0][0]+2/3*(r[0][0]-a[0][0]),a[0][1]+2/3*(r[1][1]-a[0][1]))),He(c[3],C(l[0][0]+2/3*(r[0][0]-l[0][0]),l[0][1]+2/3*(r[1][1]-l[0][1]))),He(c[3],l[0]))];return[[_e(u[0][3],u[1][0]),_e(u[1][3],u[2][0]),_e(u[2][3],u[3][0]),_e(u[3][3],u[0][0])],u]}function QP(e,t=0){var _;const[n,i,r,s,o,a,l,c]=ZF(e),u=Gs(Math.abs(n-l),e),d=Gs(Math.abs(s-i),e);if(((_=e.roundness)==null?void 0:_.type)==null){const[S,M,w,T]=[C(e.x+n,e.y+i-t),C(e.x+r+t,e.y+s),C(e.x+o,e.y+a+t),C(e.x+l-t,e.y+c)],A=_e(C(S[0]+u,S[1]+d),C(M[0]-u,M[1]-d)),I=_e(C(M[0]-u,M[1]+d),C(w[0]+u,w[1]-d)),R=_e(C(w[0]-u,w[1]-d),C(T[0]+u,T[1]+d)),D=_e(C(T[0]+u,T[1]-d),C(S[0]-u,S[1]+d));return[[A,I,R,D],[]]}const f=C(e.x+e.width/2,e.y+e.height/2),[h,m,p,b]=[C(e.x+n,e.y+i),C(e.x+r,e.y+s),C(e.x+o,e.y+a),C(e.x+l,e.y+c)],E=[Zt(li(ve(m,f)),t),Zt(li(ve(p,f)),t),Zt(li(ve(b,f)),t),Zt(li(ve(h,f)),t)],y=[Ca(He(E[0],C(m[0]-u,m[1]-d)),He(E[0],m),He(E[0],m),He(E[0],C(m[0]-u,m[1]+d))),Ca(He(E[1],C(p[0]+u,p[1]-d)),He(E[1],p),He(E[1],p),He(E[1],C(p[0]-u,p[1]-d))),Ca(He(E[2],C(b[0]+u,b[1]+d)),He(E[2],b),He(E[2],b),He(E[2],C(b[0]+u,b[1]-d))),Ca(He(E[3],C(h[0]-u,h[1]+d)),He(E[3],h),He(E[3],h),He(E[3],C(h[0]+u,h[1]+d)))];return[[_e(y[0][3],y[1][0]),_e(y[1][3],y[2][0]),_e(y[2][3],y[3][0]),_e(y[3][3],y[0][0])],y]}const lE=e=>{if(e.type==="arrow")return!1;const t=!Fs(e.backgroundColor)||ys(e)||is(e)||ue(e);return e.type==="line"||e.type==="freedraw"?t&&Wa(e.points):t||it(e)},lf=({x:e,y:t,element:n,shape:i,threshold:r=10,frameNameBound:s=null})=>{let o=lE(n)&&Sb(C(e,t),i)||_E(C(e,t),i,r);return!o&&s&&(o=Sb(C(e,t),{type:"polygon",data:JF(s).data})),o},v9=(e,t,n,i,r=0)=>{let[s,o,a,l]=Js(n,i);return s-=r,o-=r,a+=r,l+=r,yP(C(s,o),C(e,t),C(a,l))},Yre=(e,t)=>!lf(e)&&!JP(e.x,e.y,NF(e.element,t))&&v9(e.x,e.y,e.element,t),JP=(e,t,n)=>!!n&&Sb(C(e,t),n),cE=(e,t,n=0)=>{switch(e.type){case"rectangle":case"image":case"text":case"iframe":case"embeddable":case"frame":case"magicframe":return Wre(e,t,n);case"diamond":return Kre(e,t,n);case"ellipse":return Zre(e,t,n);default:throw new Error(`Unimplemented element type '${e.type}'`)}},Wre=(e,t,n=0)=>{const i=C(e.x+e.width/2,e.y+e.height/2),r=q(t[0],i,-e.angle),s=q(t[1],i,-e.angle),[o,a]=qP(e,n);return o.map(l=>L0(_e(r,s),l)).filter(l=>l!=null).map(l=>q(l,i,e.angle)).concat(a.flatMap(l=>EP(l,_e(r,s))).filter(l=>l!=null).map(l=>q(l,i,e.angle))).filter((l,c,u)=>u.findIndex(d=>Zs(l,d))===c)},Kre=(e,t,n=0)=>{const i=C(e.x+e.width/2,e.y+e.height/2),r=q(t[0],i,-e.angle),s=q(t[1],i,-e.angle),[o,a]=QP(e,n);return o.map(l=>L0(_e(r,s),l)).filter(l=>l!=null).map(l=>q(l,i,e.angle)).concat(a.flatMap(l=>EP(l,_e(r,s))).filter(l=>l!=null).map(l=>q(l,i,e.angle))).filter((l,c,u)=>u.findIndex(d=>Zs(l,d))===c)},Zre=(e,t,n=0)=>{const i=C(e.x+e.width/2,e.y+e.height/2),r=q(t[0],i,-e.angle),s=q(t[1],i,-e.angle);return jre(ZP(i,e.width/2+n,e.height/2+n),J3(r,s)).map(o=>q(o,i,e.angle))},W6=(e,t)=>{switch(e.type){case"rectangle":case"image":case"text":case"iframe":case"embeddable":case"frame":case"magicframe":return qre(e,t);case"diamond":return Qre(e,t);case"ellipse":return Jre(e,t)}},qre=(e,t)=>{const n=C(e.x+e.width/2,e.y+e.height/2),i=q(t,n,-e.angle),[r,s]=qP(e);return Math.min(...r.map(o=>f9(i,o)),...s.map(o=>vP(o,i)).filter(o=>o!==null))},Qre=(e,t)=>{const n=C(e.x+e.width/2,e.y+e.height/2),i=q(t,n,-e.angle),[r,s]=QP(e);return Math.min(...r.map(o=>f9(i,o)),...s.map(o=>vP(o,i)).filter(o=>o!==null))},Jre=(e,t)=>{const n=C(e.x+e.width/2,e.y+e.height/2);return Xre(q(t,n,-e.angle),ZP(n,e.width/2,e.height/2))},En=[1,0],Ei=[0,1],ur=[-1,0],Ar=[0,-1],tU=(e,t)=>{const n=Nm(R0(Math.atan2(t[1]-e[1],t[0]-e[0])));return n>=315||n<45?Ar:n>=45&&n<135?En:n>=135&&n<225?Ei:ur},bh=e=>{const[t,n]=e,i=Math.abs(t),r=Math.abs(n);return t>r?En:t<=-r?ur:n>i?Ei:Ar},N0=(e,t)=>bh(ve(e,t)),va=(e,t)=>Ro(N0(e,t)),On=(e,t)=>e[0]===t[0]&&e[1]===t[1],Ro=e=>On(e,En)||On(e,ur),_9=(e,t,n)=>{const r=QF(t);if(e.type==="diamond"){if(n[0]<e.x)return ur;if(n[1]<e.y)return Ar;if(n[0]>e.x+e.width)return En;if(n[1]>e.y+e.height)return Ei;const c=q(la(C(e.x+e.width/2,e.y),r,2),r,e.angle),u=q(la(C(e.x+e.width,e.y+e.height/2),r,2),r,e.angle),d=q(la(C(e.x+e.width/2,e.y+e.height),r,2),r,e.angle),f=q(la(C(e.x,e.y+e.height/2),r,2),r,e.angle);return $d([c,u,r],n)?tU(c,u):$d([u,d,r],n)?tU(u,d):$d([d,f,r],n)?tU(d,f):tU(f,c)}const s=la(C(t[0],t[1]),r,2),o=la(C(t[2],t[1]),r,2),a=la(C(t[0],t[3]),r,2),l=la(C(t[2],t[3]),r,2);return $d([s,o,r],n)?Ar:$d([o,l,r],n)?En:$d([l,a,r],n)?Ei:ur},eF=e=>[e[0]===0?0:e[0]>0?-1:1,e[1]===0?0:e[1]>0?-1:1],yh={},pb=(e,t)=>{const n=yh[e]||(yh[e]={height:t});return n.height=t,n},tF=e=>{yh[e]&&delete yh[e]},ese=e=>{var t;return((t=yh[e])==null?void 0:t.height)??null},Hi=(e,t,n)=>{const i=e.split(`
`).map(a=>a||" ").join(`
`),r=parseFloat(t),s=rse(i,r,n);return{width:S9(i,t),height:s}},nF="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".toLocaleUpperCase(),iF=(e,t)=>{const n=sse(e);return n===0?Hi(nF.split("").join(`
`),e,t).width+Dn*2:n+Dn*2},w9=(e,t)=>Hi("",e,t).width+Dn*2,tse=()=>S9(nF,Ct({fontSize:ul,fontFamily:Pc}))>0,Eh=e=>kP(e).replace(/\t/g,"        "),T9=e=>Eh(e).split(`
`),nse=e=>{const t=T9(e.text).length;return e.height/t/e.fontSize},zm=(e,t)=>e*t,rF=(e,t)=>zm(e,t)+Dn*2;let y8;class ise{constructor(){F(this,"canvas");this.canvas=document.createElement("canvas")}getLineWidth(t,n){const i=this.canvas.getContext("2d");return i.font=n,i.measureText(t).width}}const td=(e,t)=>(y8||(y8=new ise),y8.getLineWidth(e,t)),S9=(e,t)=>{const n=T9(e);let i=0;return n.forEach(r=>{i=Math.max(i,td(r,t))}),i},rse=(e,t,n)=>{const i=T9(e).length;return zm(t,n)*i},Hm=(()=>{const e={};return{calculate:(r,s)=>{const o=r.charCodeAt(0);if(e[s]||(e[s]=[]),!e[s][o]){const a=td(r,s);e[s][o]=a}return e[s][o]},getCache:r=>e[r],clearCache:r=>{e[r]=[]}}})(),sse=e=>{const t=Hm.getCache(e);if(!t)return 0;const n=t.filter(i=>i!==void 0);return Math.max(...n)};let E8,nU,v8;const ose=e=>(E8||(E8=yt.class(...Object.values(da))),E8.test(e)),ase=()=>{if(!nU)try{nU=cse()}catch{nU=lse()}return nU},I9=()=>(v8||(v8=use()),v8),Yr={WHITESPACE:/\s/u,HYPHEN:/-/u,OPENING:/<\(\[\{/u,CLOSING:/>\)\]\}.,:;!\?…\//u},da={CHAR:new RegExp("\\p{Script=Han}\\p{Script=Hiragana}\\p{Script=Katakana}\\p{Script=Hangul}｀＇＾〃〰〆＃＆＊＋－ー／＼＝｜￤〒￢￣","u"),OPENING:/（［｛〈《｟｢「『【〖〔〘〚＜〝/u,CLOSING:/）］｝〉》｠｣」』】〗〕〙〛＞。．，、〟‥？！：；・〜〞/u,CURRENCY:/￥￦￡￠＄/u},Wc={FLAG:new RegExp("\\p{RI}\\p{RI}","u"),JOINER:new RegExp("(?:\\p{Emoji_Modifier}|\\uFE0F\\u20E3?|[\\u{E0020}-\\u{E007E}]+\\u{E007F})?","u"),ZWJ:/\u200D/u,ANY:/[\p{Emoji}]/u,MOST:/[\p{Extended_Pictographic}\p{Emoji_Presentation}]/u},lse=()=>yt.or(I9(),Un.On(Yr.HYPHEN,Yr.WHITESPACE,da.CHAR)),cse=()=>yt.or(I9(),Un.Before(Yr.WHITESPACE).Build(),Un.After(Yr.WHITESPACE,Yr.HYPHEN).Build(),Un.Before(da.CHAR,da.CURRENCY).NotPrecededBy(Yr.OPENING,da.OPENING).Build(),Un.After(da.CHAR).NotFollowedBy(Yr.HYPHEN,Yr.CLOSING,da.CLOSING).Build(),Un.BeforeMany(da.OPENING).NotPrecededBy(Yr.OPENING).Build(),Un.AfterMany(da.CLOSING).NotFollowedBy(Yr.CLOSING).Build(),Un.AfterMany(Yr.CLOSING).FollowedBy(Yr.OPENING).Build()),use=()=>yt.group(yt.or(Wc.FLAG,yt.and(Wc.MOST,Wc.JOINER,yt.build(`(?:${Wc.ZWJ.source}(?:${Wc.FLAG.source}|${Wc.ANY.source}${Wc.JOINER.source}))*`)))),yt={build:e=>new RegExp(e,"u"),join:(...e)=>e.map(t=>t.source).join(""),and:(...e)=>yt.build(yt.join(...e)),or:(...e)=>yt.build(e.map(t=>t.source).join("|")),group:(...e)=>yt.build(`(${yt.join(...e)})`),class:(...e)=>yt.build(`[${yt.join(...e)}]`)},Un={On:(...e)=>{const t=yt.join(...e);return yt.build(`([${t}])`)},Before:(...e)=>{const t=yt.join(...e),n=()=>yt.build(`(?=[${t}])`);return Un.Chain(n)},After:(...e)=>{const t=yt.join(...e),n=()=>yt.build(`(?<=[${t}])`);return Un.Chain(n)},BeforeMany:(...e)=>{const t=yt.join(...e),n=()=>yt.build(`(?<![${t}])(?=[${t}])`);return Un.Chain(n)},AfterMany:(...e)=>{const t=yt.join(...e),n=()=>yt.build(`(?<=[${t}])(?![${t}])`);return Un.Chain(n)},NotBefore:(...e)=>{const t=yt.join(...e),n=()=>yt.build(`(?![${t}])`);return Un.Chain(n)},NotAfter:(...e)=>{const t=yt.join(...e),n=()=>yt.build(`(?<![${t}])`);return Un.Chain(n)},Chain:e=>({Build:e,PreceededBy:(...t)=>{const n=e(),i=Un.After(...t).Build(),r=()=>yt.and(i,n);return Un.Chain(r)},FollowedBy:(...t)=>{const n=e(),i=Un.Before(...t).Build(),r=()=>yt.and(n,i);return Un.Chain(r)},NotPrecededBy:(...t)=>{const n=e(),i=Un.NotAfter(...t).Build(),r=()=>yt.and(i,n);return Un.Chain(r)},NotFollowedBy:(...t)=>{const n=e(),i=Un.NotBefore(...t).Build(),r=()=>yt.and(n,i);return Un.Chain(r)}})},dse=e=>{const t=ase();return e.normalize("NFC").split(t).filter(Boolean)},Id=(e,t,n)=>{if(!Number.isFinite(n)||n<0)return e;const i=[],r=e.split(`
`);for(const s of r){if(td(s,t)<=n){i.push(s);continue}const a=fse(s,t,n);i.push(...a)}return i.join(`
`)},fse=(e,t,n)=>{const i=[],s=dse(e)[Symbol.iterator]();let o="",a=0,l=s.next();for(;!l.done;){const c=l.value,u=o+c,d=mse(c)?a+Hm.calculate(c,t):td(u,t);if(/\s/.test(c)||d<=n){o=u,a=d,l=s.next();continue}if(o)i.push(o.trimEnd()),o="",a=0;else{const f=hse(c,t,n),h=f[f.length-1]??"",m=f.slice(0,-1);i.push(...m),o=h,a=td(h,t),l=s.next()}}if(o){const c=gse(o,t,n);i.push(c)}return i},hse=(e,t,n)=>{if(I9().test(e))return[e];const i=[],r=Array.from(e);let s="",o=0;for(const a of r){const l=Hm.calculate(a,t),c=o+l;if(c<=n){s=s+a,o=c;continue}s&&i.push(s),s=a,o=l}return s&&i.push(s),i},gse=(e,t,n)=>{if(!(td(e,t)>n))return e;let[,r,s]=e.match(/^(.+?)(\s+)$/)??[e,e.trimEnd(),""],o=td(r,t);for(const a of Array.from(s)){const l=Hm.calculate(a,t),c=o+l;if(c>n)break;r=r+a,o=c}return r},mse=e=>e.codePointAt(0)!==void 0&&e.codePointAt(1)===void 0,Ji=(e,t,n,i=!0)=>{let r;const s={x:e.x,y:e.y,text:e.text,width:e.width,height:e.height,angle:(t==null?void 0:t.angle)??e.angle};s.text=e.text,(t||!e.autoResize)&&(r=t?ja(t,e):e.width,s.text=Id(e.originalText,Ct(e),r));const o=Hi(s.text,Ct(e),e.lineHeight);if(e.autoResize&&(s.width=o.width),s.height=o.height,t){const a=Z6(t,e),l=ja(t,e);if(!ze(t)&&o.height>a){const f=nd(o.height,t.type);ee(t,{height:f},i),pb(t.id,f)}if(o.width>l){const f=nd(o.width,t.type);ee(t,{width:f},i)}const c={...e,...s},{x:u,y:d}=K6(t,c,n);s.x=u,s.y=d}ee(e,s,i)},Vm=(e,t,n,i=!1)=>{if(!_c(e))return;tF(e.id);const s=Pe(e,t);if(s&&s.text){if(!e)return;let o=s.text,a=s.height,l=s.width;const c=ja(e,s),u=Z6(e,s);let d=e.height;if(i||n!=="n"&&n!=="s"){o&&(o=Id(s.originalText,Ct(s),c));const f=Hi(o,Ct(s),s.lineHeight);a=f.height,l=f.width}if(a>u){d=nd(a,e.type);const f=d-e.height,h=!ze(e)&&(n==="ne"||n==="nw"||n==="n")?e.y-f:e.y;ee(e,{height:d,y:h})}ee(s,{text:o,width:l,height:a}),ze(e)||ee(s,K6(e,s,t))}},K6=(e,t,n)=>{if(ze(e))return ce.getBoundTextElementPosition(e,t,n);const i=pse(e),r=Z6(e,t),s=ja(e,t);let o,a;return t.verticalAlign===kr.TOP?a=i.y:t.verticalAlign===kr.BOTTOM?a=i.y+(r-t.height):a=i.y+(r/2-t.height/2),t.textAlign===M0.LEFT?o=i.x:t.textAlign===M0.RIGHT?o=i.x+(s-t.width):o=i.x+(s/2-t.width/2),{x:o,y:a}},_c=e=>{var t,n,i;return(t=e==null?void 0:e.boundElements)!=null&&t.length&&((i=(n=e==null?void 0:e.boundElements)==null?void 0:n.find(r=>r.type==="text"))==null?void 0:i.id)||null},Pe=(e,t)=>{if(!e)return null;const n=_c(e);return n&&t.get(n)||null},ui=(e,t)=>e&&e.containerId&&t.get(e.containerId)||null,_8=(e,t,n)=>{if(!ze(e))return{x:e.x+e.width/2,y:e.y+e.height/2};const i=ce.getPointsGlobalCoordinates(e,n);if(i.length%2===1){const o=Math.floor(e.points.length/2),a=ce.getPointGlobalCoordinates(e,e.points[o],n);return{x:a[0],y:a[1]}}const r=e.points.length/2-1;let s=ce.getEditorMidPoints(e,n,t)[r];return s||(s=ce.getSegmentMidPoint(e,i[r],i[r+1],r+1,n)),{x:s[0],y:s[1]}},pse=e=>{let t=Dn,n=Dn;return e.type==="ellipse"&&(t+=e.width/2*(1-Math.sqrt(2)/2),n+=e.height/2*(1-Math.sqrt(2)/2)),e.type==="diamond"&&(t+=e.width/4,n+=e.height/4),{x:e.x+t,y:e.y+n}},Use=(e,t)=>!t||ze(t)?e.angle:t.angle,bse=(e,t)=>e.some(n=>{if(jt(n)){const i=ui(n,t);return!ze(i)}return!1}),yse=(e,t)=>e.some(n=>{if(jt(n)){const i=ui(n,t);return!ze(i)}return ue(n)}),Ese=new Set(["rectangle","ellipse","diamond","arrow"]),vse=e=>Ese.has(e.type),nd=(e,t)=>{e=Math.ceil(e);const n=Dn*2;return t==="ellipse"?Math.round((e+n)/Math.sqrt(2)*2):t==="arrow"?e+n*8:t==="diamond"?2*(e+n):e+n},ja=(e,t)=>{const{width:n}=e;if(ze(e)){const i=((t==null?void 0:t.fontSize)??ul)*qne;return Math.max(Zne*n,i)}return e.type==="ellipse"?Math.round(n/2*Math.sqrt(2))-Dn*2:e.type==="diamond"?Math.round(n/2)-Dn*2:n-Dn*2},Z6=(e,t)=>{const{height:n}=e;return ze(e)?n-Dn*8*2<=0?t.height:n:e.type==="ellipse"?Math.round(n/2*Math.sqrt(2))-Dn*2:e.type==="diamond"?Math.round(n/2)-Dn*2:n-Dn*2},sF=(e,t=`

`)=>e.reduce((i,r)=>(ue(r)&&i.push(r.text),i),[]).join(t),_se=e=>!e[z.CTRL_OR_CMD],pu=e=>e.isBindingEnabled,Kt=5,x9=10,C9=4,wse=(e,t)=>{const n=[];return t.forEach(i=>{const r=e.getNonDeletedElement(i);r!=null&&n.push(r)}),n},q6=(e,t,n,i,r)=>{const s=new Set,o=new Set;$x(e,t,n,"start",s,o,i),$x(e,n,t,"end",s,o,i);const a=Array.from(o).filter(l=>!s.has(l));wse(r,a).forEach(l=>{var c;ee(l,{boundElements:(c=l.boundElements)==null?void 0:c.filter(u=>u.type!=="arrow"||u.id!==e.id)})})},$x=(e,t,n,i,r,s,o)=>{if(t!=="keep"){if(t===null){const a=Cse(e,i);a!=null&&s.add(a);return}cF(e)?(n==null||(n==="keep"?!aF(e,t,i):i==="start"||n.id!==t.id))&&(as(e,t,i,o),r.add(t.id)):(as(e,t,i,o),r.add(t.id))}},Tse=(e,t,n,i)=>{var o,a;const r=uF(e,t,n),s=t==="start"?(o=e.startBinding)==null?void 0:o.elementId:(a=e.endBinding)==null?void 0:a.elementId;if(s){const l=n.get(s);if(qs(l)&&KU(l,r,n,i))return l}return null},oF=(e,t,n)=>["start","end"].map(i=>Tse(e,i,t,n)),Sse=(e,t,n,i,r,s)=>{const a=e.points.length-1,l=n.findIndex(f=>f===0)>-1,c=n.findIndex(f=>f===a)>-1,u=l?t?Cf(e,"start",i,r,s):null:fe(e)?"keep":Cf(e,"start",i,r,s),d=c?t?Cf(e,"end",i,r,s):null:fe(e)?"keep":Cf(e,"end",i,r,s);return[u,d]},Ise=(e,t,n,i,r)=>{if(fe(e))return["keep","keep"];const[s,o]=oF(e,t,r),a=s&&i?Cf(e,"start",t,n,r):null,l=o&&i?Cf(e,"end",t,n,r):null;return[a,l]},Ub=(e,t,n,i,r,s,o)=>{e.forEach(a=>{const[l,c]=s!=null&&s.length?Sse(a,r,s??[],t,n,o):Ise(a,t,n,r,o);q6(a,l,c,t,i)})},w8=(e,t,n)=>e.length>50?[]:e.filter(ke).flatMap(i=>oF(i,t,n)).filter(i=>i!==null).filter(i=>e.filter(r=>r.id===(i==null?void 0:i.id)).length===0),uE=(e,t,n,i,r)=>{t.startBoundElement!=null&&as(e,t.startBoundElement,"start",i);const s=Bs(n,r,i,t.zoom,fe(e),fe(e));s!==null&&(aF(e,s,"end")||as(e,s,"end",i))},xse=(e,t)=>{let n=e.gap;const i=$m(t,t.width,t.height);return n>i&&(n=x9+C9),{...e,gap:n}},as=(e,t,n,i)=>{if(!ze(e))return;let r={elementId:t.id,...xse(Rse(e,t,n,i),t)};fe(e)&&(r={...r,...bb(e,t,n)}),ee(e,{[n==="start"?"startBinding":"endBinding"]:r}),Se(t.boundElements||[]).has(e.id)||ee(t,{boundElements:(t.boundElements||[]).concat({id:e.id,type:"arrow"})})},aF=(e,t,n)=>{const i=e[n==="start"?"endBinding":"startBinding"];return lF(e,i==null?void 0:i.elementId,t)},lF=(e,t,n)=>t===n.id&&cF(e),cF=e=>e.points.length<3,Cse=(e,t)=>{const n=t==="start"?"startBinding":"endBinding",i=e[n];return i==null?null:(ee(e,{[n]:null}),i.elementId)},Bs=(e,t,n,i,r,s)=>{if(s){let a=!1;const l=Mse(t,u=>qs(u,!1)&&KU(u,e,n,i,(r||!m8(u))&&!Ie(u))).filter(u=>a?!1:(m8(u)||(a=!0),!0));if(!l||l.length===0)return null;if(l.length===1)return l[0];const c=l.filter(u=>KU(u,e,n,i,!1));return c.length===1?c[0]:l.sort((u,d)=>d.width**2+d.height**2-(u.width**2+u.height**2)).pop()}return Ase(t,a=>qs(a,!1)&&KU(a,e,n,i,(r||!m8(a))&&!Ie(a)))},Ase=(e,t)=>{let n=null;for(let i=e.length-1;i>=0;--i){const r=e[i];if(!r.isDeleted&&t(r)){n=r;break}}return n},Mse=(e,t)=>{const n=[];for(let i=e.length-1;i>=0;--i){const r=e[i];r.isDeleted||t(r)&&n.push(r)}return n},Rse=(e,t,n,i)=>{const r=n==="start"?-1:1,s=r===-1?0:e.points.length-1,o=s-r,a=ce.getPointAtIndexGlobalCoordinates(e,s,i),l=ce.getPointAtIndexGlobalCoordinates(e,o,i);return{focus:zse(t,l,a),gap:Math.max(1,W6(t,a))}},pr=(e,t,n)=>{const{newSize:i,simultaneouslyUpdated:r}=n??{},s=Lse(r);qs(e)&&yb(t,e,o=>{var m,p;if(!ke(o)||o.isDeleted||!kse(o,e))return;const a=o.startBinding?t.get(o.startBinding.elementId):null,l=o.endBinding?t.get(o.endBinding.elementId):null;let c=null,u=null;a&&l&&(c=Js(a,t),u=Js(l,t));const d={startBinding:Gx(e,o.startBinding,i),endBinding:Gx(e,o.endBinding,i)};if(s.has(o.id)){ee(o,d,!0);return}const f=Eb(t,o,(b,E)=>{var y,v;if(b&&qs(b)&&(E==="startBinding"||E==="endBinding")&&(e.id===((y=o[E])==null?void 0:y.elementId)||e.id===((v=o[E==="startBinding"?"endBinding":"startBinding"])==null?void 0:v.elementId)&&!mae(c,u))){const _=Fse(o,E,d[E],b,t);if(_)return{index:E==="startBinding"?0:o.points.length-1,point:_}}return null}).filter(b=>b!==null);ce.movePoints(o,f,{...e.id===((m=o.startBinding)==null?void 0:m.elementId)?{startBinding:d.startBinding}:{},...e.id===((p=o.endBinding)==null?void 0:p.elementId)?{endBinding:d.endBinding}:{}},t);const h=Pe(o,t);h&&!h.isDeleted&&Vm(o,t,!1)})},kse=(e,t)=>{var n,i;return((n=e.startBinding)==null?void 0:n.elementId)===t.id||((i=e.endBinding)==null?void 0:i.elementId)===t.id},Lse=e=>new Set((e||[]).map(t=>t.id)),Dse=(e,t,n,i,r,s,o)=>{const a=bh(ve(t,e));return!n||!i?a:Nse(s,n,r,o)?_9(n,i,e):bh(ve(e,C(n.x+n.width/2,n.y+n.height/2)))},Nse=(e,t,n,i)=>{const r=W6(t,e),s=$m(t,t.width,t.height,i);return r>s?null:r},O0=(e,t,n)=>{const i=To(t),r=e.points[n==="start"?0:e.points.length-1],s=C(e.x+r[0],e.y+r[1]),o=Vre(t)?Ose(t,s):s,a=fe(e),l=QF(i),c=n==="start"?1:e.points.length-2,u=q(C(e.x+e.points[c][0],e.y+e.points[c][1]),l,e.angle??0);let d=null;if(a){const f=Ro(_9(t,i,s)),h=C(f?l[0]:o[0],f?o[1]:l[1]);d=cE(t,_e(h,He(Zt(li(ve(o,h)),Math.max(t.width,t.height)*2),h)))[0]}else d=cE(t,_e(u,He(Zt(li(ve(o,u)),mt(o,u)+Math.max(t.width,t.height)*2),u)),Kt).sort((f,h)=>ya(f,u)-ya(h,u))[0];if(!d||ya(o,d)<yc)return o;if(a){const f=ya(o,l)-ya(d,l)>0?Kt:-5;return He(Zt(li(ve(o,d)),f),d)}return o},Ose=(e,t)=>{const n=C(e.x+e.width/2,e.y+e.height/2),i=q(t,n,-e.angle);return i[0]<e.x&&i[1]<e.y?i[1]-e.y>-5?q(C(e.x-Kt,e.y),n,e.angle):q(C(e.x,e.y-Kt),n,e.angle):i[0]<e.x&&i[1]>e.y+e.height?i[0]-e.x>-5?q(C(e.x,e.y+e.height+Kt),n,e.angle):q(C(e.x-Kt,e.y+e.height),n,e.angle):i[0]>e.x+e.width&&i[1]>e.y+e.height?i[0]-e.x<e.width+Kt?q(C(e.x+e.width,e.y+e.height+Kt),n,e.angle):q(C(e.x+e.width+Kt,e.y+e.height),n,e.angle):i[0]>e.x+e.width&&i[1]<e.y?i[0]-e.x<e.width+Kt?q(C(e.x+e.width,e.y-Kt),n,e.angle):q(C(e.x+e.width+Kt,e.y),n,e.angle):t},Pse=(e,t,n=.05)=>{const{x:i,y:r,width:s,height:o,angle:a}=e,l=C(i+s/2-.1,r+o/2-.1),c=q(t,l,-a),u=Ge(n*o,5,80),d=Ge(n*s,5,80);return c[0]<=i+s/2&&c[1]>l[1]-u&&c[1]<l[1]+u?q(C(i-Kt,l[1]),l,a):c[1]<=r+o/2&&c[0]>l[0]-d&&c[0]<l[0]+d?q(C(l[0],r-Kt),l,a):c[0]>=i+s/2&&c[1]>l[1]-u&&c[1]<l[1]+u?q(C(i+s+Kt,l[1]),l,a):c[1]>=r+o/2&&c[0]>l[0]-d&&c[0]<l[0]+d?q(C(l[0],r+o+Kt),l,a):t},Fse=(e,t,n,i,r)=>{if(n==null||n.elementId!==i.id&&e.points.length>2)return null;const s=t==="startBinding"?-1:1,o=s===-1?0:e.points.length-1;if(fe(e)&&mb(n)){const d=Q6(n.fixedPoint)??bb(e,i,t==="startBinding"?"start":"end").fixedPoint,f=C(i.x+i.width/2,i.y+i.height/2),h=C(i.x+d[0]*i.width,i.y+d[1]*i.height),m=q(h,f,i.angle);return ce.pointFromAbsoluteCoords(e,m,r)}const a=o-s,l=ce.getPointAtIndexGlobalCoordinates(e,a,r),c=Hse(i,n.focus,l);let u;if(n.gap===0)u=c;else{const d=ce.getPointAtIndexGlobalCoordinates(e,o,r),f=C(i.x+i.width/2,i.y+i.height/2),h=mt(l,d)+mt(l,f)+Math.max(i.width,i.height)*2,m=[...cE(i,_e(l,He(Zt(li(ve(c,l)),h),l)),n.gap).sort((p,b)=>ya(p,l)-ya(b,l)),He(Zt(li(ve(c,l)),mt(l,d)),l)];m.length>1?u=m[0]:m.length===1?u=c:u=d}return ce.pointFromAbsoluteCoords(e,u,r)},bb=(e,t,n,i)=>{const r=[t.x,t.y,t.x+t.width,t.y+t.height],s=O0(e,t,n),o=C(r[0]+(r[2]-r[0])/2,r[1]+(r[3]-r[1])/2),a=q(s,o,-t.angle);return{fixedPoint:Q6([(a[0]-t.x)/t.width,(a[1]-t.y)/t.height])}},Gx=(e,t,n)=>{if(t==null||n==null)return t;const{width:i,height:r}=n,{width:s,height:o}=e,a=Math.max(1,Math.min($m(e,i,r),t.gap*(i<r?i/s:r/o)));return{...t,gap:a}},Cf=(e,t,n,i,r)=>Bs(uF(e,t,n),i,n,r,fe(e),fe(e)),uF=(e,t,n)=>{const i=t==="start"?0:-1;return Ps(ce.getPointAtIndexGlobalCoordinates(e,i,n))},Bse=(e,t,n)=>{for(const i of e){if("boundElements"in i&&i.boundElements&&Object.assign(i,{boundElements:i.boundElements.reduce((r,s)=>{const o=t.get(s.id);return o&&r.push({...s,id:o}),r},[])}),"containerId"in i&&i.containerId&&Object.assign(i,{containerId:t.get(i.containerId)??null}),"endBinding"in i&&i.endBinding){const r=t.get(i.endBinding.elementId);Object.assign(i,{endBinding:r?{...i.endBinding,elementId:r}:null})}if("startBinding"in i&&i.startBinding){const r=t.get(i.startBinding.elementId);Object.assign(i,{startBinding:r?{...i.startBinding,elementId:r}:null})}fe(i)&&Object.assign(i,tg(i,n,{points:[i.points[0],i.points[i.points.length-1]]}))}},dF=(e,t)=>{const n=Se(e);for(const i of t)Af.unbindAffected(n,i,ee),Mf.unbindAffected(n,i,ee)},X1=(e,t,n=[])=>{if(!e)return null;const i=e.filter(r=>!t.has(r.id));return i.push(...n.map(r=>({id:r.id,type:r.type}))),i},KU=(e,{x:t,y:n},i,r,s)=>{const o=$m(e,e.width,e.height,r),a=fa(e,i);return _E(C(t,n),a,o)||s===!0&&wh(C(t,n),To(e))},$m=(e,t,n,i)=>{const r=i!=null&&i.value&&i.value<1?i.value:1,o=(e.type==="diamond"?1/Math.sqrt(2):1)*Math.min(t,n);return Math.max(16,Math.min(.25*o,32),x9/r+C9)},zse=(e,t,n)=>{const i=C(e.x+e.width/2,e.y+e.height/2);if(Zs(t,n))return 0;const r=q(t,i,-e.angle),s=q(n,i,-e.angle),o=Math.sign($n(ve(s,t),ve(s,i)))*-1,a=_e(s,He(Zt(li(ve(s,r)),Math.max(e.width*2,e.height*2)),s)),l=e.type==="diamond"?[_e(C(e.x+e.width/2,e.y),C(e.x+e.width/2,e.y+e.height)),_e(C(e.x,e.y+e.height/2),C(e.x+e.width,e.y+e.height/2))]:[_e(C(e.x,e.y),C(e.x+e.width,e.y+e.height)),_e(C(e.x+e.width,e.y),C(e.x,e.y+e.height))],c=e.type==="diamond"?[_e(C(e.x+e.width/2,e.y-e.height),C(e.x+e.width/2,e.y+e.height*2)),_e(C(e.x-e.width,e.y+e.height/2),C(e.x+e.width*2,e.y+e.height/2))]:[_e(C(e.x-e.width,e.y-e.height),C(e.x+e.width*2,e.y+e.height*2)),_e(C(e.x+e.width*2,e.y-e.height),C(e.x-e.width,e.y+e.height*2))];return[L0(a,c[0]),L0(a,c[1])].filter(f=>f!==null).sort((f,h)=>ya(f,n)-ya(h,n)).map((f,h)=>o*mt(i,f)/(e.type==="diamond"?mt(l[h][0],l[h][1])/2:Math.sqrt(e.width**2+e.height**2)/2)).sort((f,h)=>Math.abs(f)-Math.abs(h))[0]??0},Hse=(e,t,n)=>{const i=C(e.x+e.width/2,e.y+e.height/2);if(t===0)return i;const r=(e.type==="diamond"?[C(e.x,e.y+e.height/2),C(e.x+e.width/2,e.y),C(e.x+e.width,e.y+e.height/2),C(e.x+e.width/2,e.y+e.height)]:[C(e.x,e.y),C(e.x+e.width,e.y),C(e.x+e.width,e.y+e.height),C(e.x,e.y+e.height)]).map(a=>He(Zt(ve(a,i),Math.abs(t)),i)).map(a=>q(a,i,e.angle)),s=[$n(ve(n,r[0]),ve(r[1],r[0]))>0&&(t>0?$n(ve(n,r[1]),ve(r[2],r[1]))<0:$n(ve(n,r[3]),ve(r[0],r[3]))<0),$n(ve(n,r[1]),ve(r[2],r[1]))>0&&(t>0?$n(ve(n,r[2]),ve(r[3],r[2]))<0:$n(ve(n,r[0]),ve(r[1],r[0]))<0),$n(ve(n,r[2]),ve(r[3],r[2]))>0&&(t>0?$n(ve(n,r[3]),ve(r[0],r[3]))<0:$n(ve(n,r[1]),ve(r[2],r[1]))<0),$n(ve(n,r[3]),ve(r[0],r[3]))>0&&(t>0?$n(ve(n,r[0]),ve(r[1],r[0]))<0:$n(ve(n,r[2]),ve(r[3],r[2]))<0)];return s[0]?t>0?r[1]:r[0]:s[1]?t>0?r[2]:r[1]:s[2]?t>0?r[3]:r[2]:t>0?r[0]:r[3]},Vse=new Set(["boundElements","frameId","containerId","startBinding","endBinding"]),yb=(e,t,n)=>{var i;qs(t)&&(((i=t.boundElements)==null?void 0:i.slice())??[]).forEach(({id:s})=>{n(e.get(s),"boundElements",s)})},Eb=(e,t,n)=>{const i=[];if(t.frameId){const r=t.frameId;i.push(n(e.get(r),"frameId",r))}if(jt(t)){const r=t.containerId;i.push(n(e.get(r),"containerId",r))}if(ze(t)){if(t.startBinding){const r=t.startBinding.elementId;i.push(n(e.get(r),"startBinding",r))}if(t.endBinding){const r=t.endBinding.elementId;i.push(n(e.get(r),"endBinding",r))}}return i};class Af{static unbindAffected(t,n,i){n&&Eb(t,n,r=>{!r||r.isDeleted||yb(t,r,(s,o,a)=>{a===n.id&&i(r,{boundElements:X1(r.boundElements,new Set([a]))})})})}}F(Af,"rebindAffected",(t,n,i)=>{!n||n.isDeleted||Eb(t,n,(r,s)=>{var o,a;if(!r||r.isDeleted){i(n,{[s]:null});return}s!=="frameId"&&((o=r.boundElements)!=null&&o.find(l=>l.id===n.id)||(ze(n)&&i(r,{boundElements:X1(r.boundElements,new Set,new Array(n))}),ue(n)&&((a=r.boundElements)!=null&&a.find(l=>l.type==="text")?i(n,{[s]:null}):i(r,{boundElements:X1(r.boundElements,new Set,new Array(n))}))))})});class Mf{static unbindAffected(t,n,i){n&&yb(t,n,r=>{!r||r.isDeleted||Eb(t,r,(s,o,a)=>{a===n.id&&i(r,{[o]:null})})})}}F(Mf,"rebindAffected",(t,n,i)=>{!n||n.isDeleted||yb(t,n,(r,s,o)=>{var a,l;if(!r||r.isDeleted){i(n,{boundElements:X1(n.boundElements,new Set([o]))});return}ue(r)&&(((l=(((a=n.boundElements)==null?void 0:a.slice())??[]).reverse().find(u=>u.type==="text"))==null?void 0:l.id)===r.id?r.containerId!==n.id&&i(r,{containerId:n.id}):(r.containerId!==null&&i(r,{containerId:null}),i(n,{boundElements:X1(n.boundElements,new Set([r.id]))})))})});const dE=(e,t)=>{const[n,i]=Q6(e);return q(C(t.x+t.width*n,t.y+t.height*i),C(t.x+t.width/2,t.y+t.height/2),t.angle)},$se=(e,t)=>{const n=e.startBinding&&t.get(e.startBinding.elementId),i=e.endBinding&&t.get(e.endBinding.elementId),r=n&&e.startBinding?dE(e.startBinding.fixedPoint,n):C(e.x+e.points[0][0],e.y+e.points[0][1]),s=i&&e.endBinding?dE(e.endBinding.fixedPoint,i):C(e.x+e.points[e.points.length-1][0],e.y+e.points[e.points.length-1][1]);return[r,s]},Gse=(e,t)=>{const[n,i]=$se(e,t);return[ce.pointFromAbsoluteCoords(e,n,t),ce.pointFromAbsoluteCoords(e,i,t)]},Q6=e=>e&&(Math.abs(e[0]-.5)<1e-4||Math.abs(e[1]-.5)<1e-4)?e.map(t=>Math.abs(t-.5)<1e-4?.5001:t):e,A9=1,wn=40,Xse=(e,t)=>{const n=e.fixedSegments?e.fixedSegments.slice():null;if(n){const i=[];e.points.map(o=>C(e.x+o[0],e.y+o[1])).forEach((o,a,l)=>{if(a<2)return i.push(o);const c=N0(o,l[a-1]),u=N0(l[a-1],l[a-2]);if(On(c,u)){const d=(n==null?void 0:n.findIndex(h=>h.index===a-1))??-1,f=(n==null?void 0:n.findIndex(h=>h.index===a))??-1;f!==-1&&(n[f].start=C(l[a-2][0]-e.x,l[a-2][1]-e.y)),d!==-1&&n.splice(d,1),i.splice(-1,1),n.forEach(h=>{h.index>a-1&&(h.index-=1)})}return i.push(o)});const r=[];i.forEach((o,a,l)=>{if(a<3)return r.push(o);if(mt(l[a-2],l[a-1])<A9){const c=(n==null?void 0:n.findIndex(f=>f.index===a-2))??-1,u=(n==null?void 0:n.findIndex(f=>f.index===a-1))??-1;u!==-1&&n.splice(u,1),c!==-1&&n.splice(c,1),r.splice(-2,2),n.forEach(f=>{f.index>a-2&&(f.index-=2)});const d=va(o,l[a-1]);return r.push(C(d?o[0]:l[a-2][0],d?l[a-2][1]:o[1]))}r.push(o)});const s=n.filter(o=>o.index!==1&&o.index!==r.length-1);return s.length===0?Oa(k9(L9(R9(e,M9(e,t,r.map(o=>C(o[0]-e.x,o[1]-e.y))))??[])),s,null,null):Oa(r,s,e.startIsSpecial,e.endIsSpecial)}return{x:e.x,y:e.y,points:e.points,fixedSegments:e.fixedSegments,startIsSpecial:e.startIsSpecial,endIsSpecial:e.endIsSpecial}},jse=(e,t,n)=>{var A,I;const i=t.map(R=>R.index),s=(((A=e.fixedSegments)==null?void 0:A.map(R=>R.index))??[]).findIndex(R=>!i.includes(R));if(s===-1||!((I=e.fixedSegments)!=null&&I[s]))return{points:e.points};const o=e.fixedSegments[s].index,a=e.fixedSegments[s-1],l=e.fixedSegments[s+1],c=e.x+(a?a.end[0]:0),u=e.y+(a?a.end[1]:0),d=a?null:e.startBinding,f=l?null:e.endBinding,{startHeading:h,endHeading:m,startGlobalPoint:p,endGlobalPoint:b,hoveredStartElement:E,hoveredEndElement:y,...v}=M9({x:c,y:u,startBinding:d,endBinding:f,startArrowhead:null,endArrowhead:null,points:e.points},n,[C(0,0),C(e.x+((l==null?void 0:l.start[0])??e.points[e.points.length-1][0])-c,e.y+((l==null?void 0:l.start[1])??e.points[e.points.length-1][1])-u)],{isDragging:!1}),{points:_}=Oa(k9(L9(R9(e,{startHeading:h,endHeading:m,startGlobalPoint:p,endGlobalPoint:b,hoveredEndElement:y,...v})??[])),t,null,null),S=[];if(a)for(let R=0;R<a.index;R++)S.push(C(e.x+e.points[R][0],e.y+e.points[R][1]));if(_.forEach(R=>{S.push(C(e.x+(a?a.end[0]:0)+R[0],e.y+(a?a.end[1]:0)+R[1]))}),l)for(let R=l.index;R<e.points.length;R++)S.push(C(e.x+e.points[R][0],e.y+e.points[R][1]));const M=((l==null?void 0:l.index)??e.points.length)-((a==null?void 0:a.index)??0)-1,w=t.map(R=>R.index>o?{...R,index:R.index-M+(_.length-1)}:R),T=S.flatMap((R,D)=>{const L=S[D-1],G=S[D+1];if(L&&G){const V=N0(R,L),H=N0(G,R);if(On(V,H))return w.forEach($=>{$.index>D&&($.index-=1)}),[];if(On(V,eF(H)))return w.forEach($=>{$.index>D&&($.index+=1)}),[R,R]}return[R]});return Oa(T,w,!1,!1)},Yse=(e,t,n,i,r,s)=>{var S,M;const o=t.map((w,T)=>e.fixedSegments==null||e.fixedSegments[T]===void 0||e.fixedSegments[T].index!==w.index||(w.start[0]!==e.fixedSegments[T].start[0]&&w.end[0]!==e.fixedSegments[T].end[0])!=(w.start[1]!==e.fixedSegments[T].start[1]&&w.end[1]!==e.fixedSegments[T].end[1])?T:null).filter(w=>w!==null).shift();if(o==null)return{points:e.points};const a=((S=e.fixedSegments)==null?void 0:S.findIndex(w=>w.index===1))??-1,l=((M=e.fixedSegments)==null?void 0:M.findIndex(w=>w.index===e.points.length-1))??-1,c=mt(t[o].start,t[o].end),u=c<wn+5;if(a===-1&&t[o].index===1&&r){const w=Ro(n),A=(w?On(n,En):On(n,Ei))?u?c/2:wn:u?-c/2:-40;t[o].start=C(t[o].start[0]+(w?A:0),t[o].start[1]+(w?0:A))}if(l===-1&&t[o].index===e.points.length-1&&s){const w=Ro(i),A=(w?On(i,En):On(i,Ei))?u?c/2:wn:u?-c/2:-40;t[o].end=C(t[o].end[0]+(w?A:0),t[o].end[1]+(w?0:A))}const d=t.map(w=>({...w,start:C(e.x+w.start[0],e.y+w.start[1]),end:C(e.x+w.end[0],e.y+w.end[1])})),f=e.points.map((w,T)=>C(e.x+w[0],e.y+w[1])),h=d[o].index-1,m=d[o].index,p=d[o].start,b=d[o].end,E=f[h-1]&&!Zs(f[h],f[h-1])?va(f[h-1],f[h]):void 0,y=f[m+1]&&!Zs(f[m],f[m+1])?va(f[m+1],f[m]):void 0;if(E!==void 0){const w=E?1:0;f[h-1][w]=p[w]}if(f[h]=p,f[m]=b,y!==void 0){const w=y?1:0;f[m+1][w]=b[w]}const v=d.findIndex(w=>w.index===h);if(v!==-1){const w=va(d[v].end,d[v].start)?1:0;d[v].start[w]=p[w],d[v].end=p}const _=d.findIndex(w=>w.index===m+1);if(_!==-1){const w=va(d[_].end,d[_].start)?1:0;d[_].end[w]=b[w],d[_].start=b}if(a===-1&&h===0){const w=r?Ro(n):va(f[1],f[0]);f.unshift(C(w?p[0]:e.x+e.points[0][0],w?e.y+e.points[0][1]:p[1])),r&&f.unshift(C(e.x+e.points[0][0],e.y+e.points[0][1]));for(const T of d)T.index+=r?2:1}if(l===-1&&m===e.points.length-1){const w=Ro(i);f.push(C(w?b[0]:e.x+e.points[e.points.length-1][0],w?e.y+e.points[e.points.length-1][1]:b[1])),s&&f.push(C(e.x+e.points[e.points.length-1][0],e.y+e.points[e.points.length-1][1]))}return Oa(f,d.map(w=>({...w,start:C(w.start[0]-e.x,w.start[1]-e.y),end:C(w.end[0]-e.x,w.end[1]-e.y)})),!1,!1)},Wse=(e,t,n,i,r,s,o,a,l)=>{let c=e.startIsSpecial??null,u=e.endIsSpecial??null;const d=t.map((b,E)=>E===0||E===t.length-1?C(e.x+b[0],e.y+b[1]):C(e.x+e.points[E][0],e.y+e.points[E][1])),f=n.map(b=>({...b,start:C(e.x+(b.start[0]-t[0][0]),e.y+(b.start[1]-t[0][1])),end:C(e.x+(b.end[0]-t[0][0]),e.y+(b.end[1]-t[0][1]))})),h=[],m=2+(c?1:0),p=2+(u?1:0);for(;h.length+m<d.length-p;)h.push(d[h.length+m]);{const b=d[c?2:1],E=d[c?3:2],y=Ro(i),v=Ro(bh(ve(b,E)));if(a&&y===v){const _=y?On(i,En):On(i,Ei);if(h.unshift(C(v?s[0]+(_?wn:-40):E[0],v?E[1]:s[1]+(_?wn:-40))),h.unshift(C(y?s[0]+(_?wn:-40):s[0],y?s[1]:s[1]+(_?wn:-40))),!c){c=!0;for(const S of f)S.index>1&&(S.index+=1)}}else if(h.unshift(C(v?s[0]:b[0],v?b[1]:s[1])),c){c=!1;for(const _ of f)_.index>1&&(_.index-=1)}h.unshift(s)}{const b=d[d.length-(u?3:2)],E=d[d.length-(u?4:3)],y=Ro(r),v=va(E,b);if(l&&y===v){const _=y?On(r,En):On(r,Ei);h.push(C(v?o[0]+(_?wn:-40):E[0],v?E[1]:o[1]+(_?wn:-40))),h.push(C(y?o[0]+(_?wn:-40):o[0],y?o[1]:o[1]+(_?wn:-40))),u||(u=!0)}else h.push(C(v?o[0]:b[0],v?b[1]:o[1])),u&&(u=!1)}return h.push(o),Oa(h,f.map(({index:b})=>({index:b,start:h[b-1],end:h[b]})).map(b=>({...b,start:C(b.start[0]-s[0],b.start[1]-s[1]),end:C(b.end[0]-s[0],b.end[1]-s[1])})),c,u)},or=1e6,tg=(e,t,n,i)=>{var S,M,w,T,A,I,R,D,L,G,V,H,$,j,X,K,le,we,he,Ve,Ye,wt,st,zt,en;if(e.points.length<2)return{points:n.points??e.points};(e.x<-1e6||e.x>or||e.y<-1e6||e.y>or||e.x+(((w=(M=n==null?void 0:n.points)==null?void 0:M[((S=n==null?void 0:n.points)==null?void 0:S.length)-1])==null?void 0:w[0])??0)<-1e6||e.x+(((I=(A=n==null?void 0:n.points)==null?void 0:A[((T=n==null?void 0:n.points)==null?void 0:T.length)-1])==null?void 0:I[0])??0)>or||e.y+(((L=(D=n==null?void 0:n.points)==null?void 0:D[((R=n==null?void 0:n.points)==null?void 0:R.length)-1])==null?void 0:L[1])??0)<-1e6||e.y+(((H=(V=n==null?void 0:n.points)==null?void 0:V[((G=n==null?void 0:n.points)==null?void 0:G.length)-1])==null?void 0:H[1])??0)>or||e.x+(((X=(j=e==null?void 0:e.points)==null?void 0:j[(($=e==null?void 0:e.points)==null?void 0:$.length)-1])==null?void 0:X[0])??0)<-1e6||e.x+(((we=(le=e==null?void 0:e.points)==null?void 0:le[((K=e==null?void 0:e.points)==null?void 0:K.length)-1])==null?void 0:we[0])??0)>or||e.y+(((Ye=(Ve=e==null?void 0:e.points)==null?void 0:Ve[((he=e==null?void 0:e.points)==null?void 0:he.length)-1])==null?void 0:Ye[1])??0)<-1e6||e.y+(((zt=(st=e==null?void 0:e.points)==null?void 0:st[((wt=e==null?void 0:e.points)==null?void 0:wt.length)-1])==null?void 0:zt[1])??0)>or)&&console.error("Elbow arrow (or update) is outside reasonable bounds (> 1e6)",{arrow:e,updates:n}),e.x=Ge(e.x,-1e6,or),e.y=Ge(e.y,-1e6,or),n.points&&(n.points=n.points.map(([Ae,$e])=>C(Ge(Ae,-1e6,or),Ge($e,-1e6,or))));const r=n.fixedSegments??e.fixedSegments??[],s=n.points?n.points&&n.points.length===2?e.points.map((Ae,$e)=>$e===0?n.points[0]:$e===e.points.length-1?n.points[1]:Ae):n.points.slice():e.points.slice(),{startBinding:o,endBinding:a,...l}=n,c=typeof o<"u"?o:e.startBinding,u=typeof a<"u"?a:e.endBinding,d=c&&vb(c.elementId,t),f=u&&vb(u.elementId,t),h=hF(s);if(c&&!d&&h||u&&!f&&h||t.size===0&&h||Object.keys(l).length===0&&((d==null?void 0:d.id)!==(c==null?void 0:c.elementId)||(f==null?void 0:f.id)!==(u==null?void 0:u.elementId)))return Oa(s.map(Ae=>C(e.x+Ae[0],e.y+Ae[1])),e.fixedSegments,e.startIsSpecial,e.endIsSpecial);const{startHeading:m,endHeading:p,startGlobalPoint:b,endGlobalPoint:E,hoveredStartElement:y,hoveredEndElement:v,..._}=M9({x:e.x,y:e.y,startBinding:c,endBinding:u,startArrowhead:e.startArrowhead,endArrowhead:e.endArrowhead,points:e.points},t,s,i);return t.size===0&&h?Oa(s.map(Ae=>C(e.x+Ae[0],e.y+Ae[1])),e.fixedSegments,e.startIsSpecial,e.endIsSpecial):!n.points&&!n.fixedSegments&&!n.startBinding&&!n.endBinding?Xse(e,t):n.startBinding===e.startBinding&&n.endBinding===e.endBinding&&(n.points??[]).every((Ae,$e)=>Zs(Ae,e.points[$e]??C(1/0,1/0)))&&h?{}:r.length===0?Oa(k9(L9(R9(e,{startHeading:m,endHeading:p,startGlobalPoint:b,endGlobalPoint:E,hoveredEndElement:v,..._})??[])),r,null,null):(((en=e.fixedSegments)==null?void 0:en.length)??0)>r.length?jse(e,r,t):n.points?n.points&&n.fixedSegments?n:Wse(e,s,r,m,p,b,E,y,v):Yse(e,r,m,p,y,v)},M9=(e,t,n,i)=>{var S,M;const r=ob(n[0],Ui(e.x,e.y)),s=ob(n[n.length-1],Ui(e.x,e.y));let o=null,a=null;if(i!=null&&i.isDragging){const w=Array.from(t.values());o=Wx(r,t,w,i==null?void 0:i.zoom)||null,a=Wx(s,t,w,i==null?void 0:i.zoom)||null}else o=e.startBinding&&vb(e.startBinding.elementId,t)||null,a=e.endBinding&&vb(e.endBinding.elementId,t)||null;const l=jx({...e,type:"arrow",elbowed:!0,points:n},"start",(S=e.startBinding)==null?void 0:S.fixedPoint,r,o,i==null?void 0:i.isDragging),c=jx({...e,type:"arrow",elbowed:!0,points:n},"end",(M=e.endBinding)==null?void 0:M.fixedPoint,s,a,i==null?void 0:i.isDragging),u=Yx(l,c,t,o,r),d=Yx(c,l,t,a,s),f=[l[0]-2,l[1]-2,l[0]+2,l[1]+2],h=[c[0]-2,c[1]-2,c[0]+2,c[1]+2],m=o?To(o,Ul(u,e.startArrowhead?Kt*6:Kt*2,1)):f,p=a?To(a,Ul(d,e.endArrowhead?Kt*6:Kt*2,1)):h,b=wh(l,a?To(a,Ul(d,wn,wn)):h)||wh(c,o?To(o,Ul(u,wn,wn)):f),E=fF(b?[f,h]:[m,p]),y=qse(b?f:m,b?h:p,E,b?Ul(u,!o&&!a?0:wn,0):Ul(u,!o&&!a?0:wn-(e.startArrowhead?Kt*6:Kt*2),wn),b?Ul(d,!o&&!a?0:wn,0):Ul(d,!o&&!a?0:wn-(e.endArrowhead?Kt*6:Kt*2),wn),b,o&&To(o),a&&To(a)),v=Xx(y[0],u,l),_=Xx(y[1],d,c);return{dynamicAABBs:y,startDonglePosition:v,startGlobalPoint:l,startHeading:u,endDonglePosition:_,endGlobalPoint:c,endHeading:d,commonBounds:E,hoveredStartElement:o,hoveredEndElement:a,boundsOverlap:b,startElementBounds:m,endElementBounds:p}},R9=(e,t)=>{const{dynamicAABBs:n,startDonglePosition:i,startGlobalPoint:r,startHeading:s,endDonglePosition:o,endGlobalPoint:a,endHeading:l,commonBounds:c,hoveredEndElement:u}=t,d=Qse(n,i||r,s,o||a,l,c),f=i&&iU(i,d),h=o&&iU(o,d),m=iU(a,d);m&&u&&(m.closed=!0);const p=iU(r,d);p&&e.startBinding&&(p.closed=!0);const b=f&&h&&(wh(f.pos,n[1])||wh(h.pos,n[0])),E=Kse(f||p,h||m,d,s||En,l||En,b?[]:n);if(E){const y=E.map(v=>[v.pos[0],v.pos[1]]);return f&&y.unshift(r),h&&y.push(a),y}return null},Ul=(e,t,n)=>{switch(e){case Ar:return[t,n,n,n];case En:return[n,t,n,n];case Ei:return[n,n,t,n]}return[n,n,n,t]},Kse=(e,t,n,i,r,s)=>{const o=T8(e.pos,t.pos),a=new nne(l=>l.f);for(a.push(e);a.size()>0;){const l=a.pop();if(!l||l.closed)continue;if(l===t)return Zse(e,l);l.closed=!0;const c=eoe(l.addr,n);for(let u=0;u<4;u++){const d=c[u];if(!d||d.closed)continue;const f=la(d.pos,l.pos,.5);if(Nie(...s.map(_=>wh(f,_))))continue;const h=toe(u),m=l.parent?bh(ve(l.pos,l.parent.pos)):i,p=eF(m);if(On(p,h)||Kx(e.addr,d.addr)&&On(h,i)||Kx(t.addr,d.addr)&&On(h,r))continue;const E=m!==h,y=l.g+T8(d.pos,l.pos)+(E?Math.pow(o,3):0),v=d.visited;if(!v||y<d.g){const _=Jse(d,t,h,r);d.visited=!0,d.parent=l,d.h=T8(t.pos,d.pos)+_*Math.pow(o,2),d.g=y,d.f=d.g+d.h,v?a.rescoreElement(d):a.push(d)}}}return null},Zse=(e,t)=>{let n=t;const i=[];for(;n.parent;)i.unshift(n),n=n.parent;return i.unshift(e),i},T8=(e,t)=>Math.abs(e[0]-t[0])+Math.abs(e[1]-t[1]),qse=(e,t,n,i,r,s,o,a)=>{const l=o??e,c=a??t,[u,d,f,h]=i??[0,0,0,0],[m,p,b,E]=r??[0,0,0,0],y=[e[0]>t[2]?e[1]>t[3]||e[3]<t[1]?Math.min((l[0]+c[2])/2,e[0]-h):(l[0]+c[2])/2:e[0]>t[0]?e[0]-h:n[0]-h,e[1]>t[3]?e[0]>t[2]||e[2]<t[0]?Math.min((l[1]+c[3])/2,e[1]-u):(l[1]+c[3])/2:e[1]>t[1]?e[1]-u:n[1]-u,e[2]<t[0]?e[1]>t[3]||e[3]<t[1]?Math.max((l[2]+c[0])/2,e[2]+d):(l[2]+c[0])/2:e[2]<t[2]?e[2]+d:n[2]+d,e[3]<t[1]?e[0]>t[2]||e[2]<t[0]?Math.max((l[3]+c[1])/2,e[3]+f):(l[3]+c[1])/2:e[3]<t[3]?e[3]+f:n[3]+f],v=[t[0]>e[2]?t[1]>e[3]||t[3]<e[1]?Math.min((c[0]+l[2])/2,t[0]-E):(c[0]+l[2])/2:t[0]>e[0]?t[0]-E:n[0]-E,t[1]>e[3]?t[0]>e[2]||t[2]<e[0]?Math.min((c[1]+l[3])/2,t[1]-m):(c[1]+l[3])/2:t[1]>e[1]?t[1]-m:n[1]-m,t[2]<e[0]?t[1]>e[3]||t[3]<e[1]?Math.max((c[2]+l[0])/2,t[2]+p):(c[2]+l[0])/2:t[2]<e[2]?t[2]+p:n[2]+p,t[3]<e[1]?t[0]>e[2]||t[2]<e[0]?Math.max((c[3]+l[1])/2,t[3]+b):(c[3]+l[1])/2:t[3]<e[3]?t[3]+b:n[3]+b],_=fF([y,v]);if(!s&&y[2]-y[0]+v[2]-v[0]>_[2]-_[0]+1e-11&&y[3]-y[1]+v[3]-v[1]>_[3]-_[1]+1e-11){const[S,M]=[(v[0]+v[2])/2,(v[1]+v[3])/2];if(t[0]>e[2]&&e[1]>t[3]){const w=y[2]+(v[0]-y[2])/2,T=v[3]+(y[1]-v[3])/2;return $n(Ui(e[2]-S,e[1]-M),Ui(e[0]-S,e[3]-M))>0?[[y[0],y[1],w,y[3]],[w,v[1],v[2],v[3]]]:[[y[0],T,y[2],y[3]],[v[0],v[1],v[2],T]]}else if(e[2]<t[0]&&e[3]<t[1]){const w=y[2]+(v[0]-y[2])/2,T=y[3]+(v[1]-y[3])/2;return $n(Ui(e[0]-S,e[1]-M),Ui(e[2]-S,e[3]-M))>0?[[y[0],y[1],y[2],T],[v[0],T,v[2],v[3]]]:[[y[0],y[1],w,y[3]],[w,v[1],v[2],v[3]]]}else if(e[0]>t[2]&&e[3]<t[1]){const w=v[2]+(y[0]-v[2])/2,T=y[3]+(v[1]-y[3])/2;return $n(Ui(e[2]-S,e[1]-M),Ui(e[0]-S,e[3]-M))>0?[[w,y[1],y[2],y[3]],[v[0],v[1],w,v[3]]]:[[y[0],y[1],y[2],T],[v[0],T,v[2],v[3]]]}else if(e[0]>t[2]&&e[1]>t[3]){const w=v[2]+(y[0]-v[2])/2,T=v[3]+(y[1]-v[3])/2;return $n(Ui(e[0]-S,e[1]-M),Ui(e[2]-S,e[3]-M))>0?[[w,y[1],y[2],y[3]],[v[0],v[1],w,v[3]]]:[[y[0],T,y[2],y[3]],[v[0],v[1],v[2],T]]}}return[y,v]},Qse=(e,t,n,i,r,s)=>{const o=new Set,a=new Set;n===ur||n===En?a.add(t[1]):o.add(t[0]),r===ur||r===En?a.add(i[1]):o.add(i[0]),e.forEach(u=>{o.add(u[0]),o.add(u[2]),a.add(u[1]),a.add(u[3])}),o.add(s[0]),o.add(s[2]),a.add(s[1]),a.add(s[3]);const l=Array.from(a).sort((u,d)=>u-d),c=Array.from(o).sort((u,d)=>u-d);return{row:l.length,col:c.length,data:l.flatMap((u,d)=>c.map((f,h)=>({f:0,g:0,h:0,closed:!1,visited:!1,parent:null,addr:[h,d],pos:[f,u]})))}},Xx=(e,t,n)=>{switch(t){case Ar:return C(n[0],e[1]);case En:return C(e[2],n[1]);case Ei:return C(n[0],e[3])}return C(e[0],n[1])},Jse=(e,t,n,i)=>{if(i===En)switch(n){case En:return e.pos[0]>=t.pos[0]?4:e.pos[1]===t.pos[1]?0:2;case Ar:return e.pos[1]>t.pos[1]&&e.pos[0]<t.pos[0]?1:3;case Ei:return e.pos[1]<t.pos[1]&&e.pos[0]<t.pos[0]?1:3;case ur:return e.pos[1]===t.pos[1]?4:2}else if(i===ur)switch(n){case En:return e.pos[1]===t.pos[1]?4:2;case Ar:return e.pos[1]>t.pos[1]&&e.pos[0]>t.pos[0]?1:3;case Ei:return e.pos[1]<t.pos[1]&&e.pos[0]>t.pos[0]?1:3;case ur:return e.pos[0]<=t.pos[0]?4:e.pos[1]===t.pos[1]?0:2}else if(i===Ar)switch(n){case En:return e.pos[1]>t.pos[1]&&e.pos[0]<t.pos[0]?1:3;case Ar:return e.pos[1]>=t.pos[1]?4:e.pos[0]===t.pos[0]?0:2;case Ei:return e.pos[0]===t.pos[0]?4:2;case ur:return e.pos[1]>t.pos[1]&&e.pos[0]>t.pos[0]?1:3}else if(i===Ei)switch(n){case En:return e.pos[1]<t.pos[1]&&e.pos[0]<t.pos[0]?1:3;case Ar:return e.pos[0]===t.pos[0]?4:2;case Ei:return e.pos[1]<=t.pos[1]?4:e.pos[0]===t.pos[0]?0:2;case ur:return e.pos[1]<t.pos[1]&&e.pos[0]>t.pos[0]?1:3}return 0},eoe=([e,t],n)=>[u1([e,t-1],n),u1([e+1,t],n),u1([e,t+1],n),u1([e-1,t],n)],u1=([e,t],n)=>e<0||e>=n.col||t<0||t>=n.row?null:n.data[t*n.col+e]??null,iU=(e,t)=>{for(let n=0;n<t.col;n++)for(let i=0;i<t.row;i++){const r=u1([n,i],t);if(r&&e[0]===r.pos[0]&&e[1]===r.pos[1])return r}return null},fF=e=>[Math.min(...e.map(t=>t[0])),Math.min(...e.map(t=>t[1])),Math.max(...e.map(t=>t[2])),Math.max(...e.map(t=>t[3]))],vb=(e,t)=>{const n=t.get(e);return n&&qs(n)?n:null},Oa=(e,t,n,i)=>{const r=e[0][0],s=e[0][1];let o=e.map(a=>ob(a,Zt(ve(e[0]),-1)));return(r<-1e6||r>or||s<-1e6||s>or||r+o[o.length-1][0]<-1e6||s+o[o.length-1][0]>or||r+o[o.length-1][1]<-1e6||s+o[o.length-1][1]>or)&&console.error("Elbow arrow normalization is outside reasonable bounds (> 1e6)",{x:r,y:s,points:o,...Uh(o)}),o=o.map(([a,l])=>C(Ge(a,-1e6,1e6),Ge(l,-1e6,1e6))),{points:o,x:Ge(r,-1e6,1e6),y:Ge(s,-1e6,1e6),fixedSegments:((t==null?void 0:t.length)??0)>0?t:null,...Uh(o),startIsSpecial:n,endIsSpecial:i}},k9=e=>{if(e.length>1){let t=Math.abs(e[0][1]-e[1][1])<Math.abs(e[0][0]-e[1][0]);return e.filter((n,i)=>{if(i===0||i===e.length-1)return!0;const r=e[i+1],s=Math.abs(n[1]-r[1])<Math.abs(n[0]-r[0]);return t===s?(t=s,!1):(t=s,!0)})}return e},L9=e=>e.length>=4?e.filter((t,n)=>{if(n===0||n===e.length-1)return!0;const i=e[n-1];return mt(i,t)>A9}):e,toe=e=>{switch(e){case 0:return Ar;case 1:return En;case 2:return Ei}return ur},jx=(e,t,n,i,r,s)=>{if(s){if(r){const o=O0(e,r,t);return Pse(r,o)}return i}if(r){const o=dE(n||[0,0],r);return Math.abs(W6(r,o)-Kt)>.01?O0(e,r,t):o}return i},Yx=(e,t,n,i,r)=>Dse(e,t,i,i&&To(i,Array(4).fill(W6(i,e))),n,r),Wx=(e,t,n,i)=>Bs(Ps(e),n,t,i,!0,!0),Kx=(e,t)=>e[0]===t[0]&&e[1]===t[1],hF=(e,t=A9)=>e.slice(1).map((n,i)=>Math.abs(n[0]-e[i][0])<t||Math.abs(n[1]-e[i][1])<t).every(Boolean),ee=(e,t,n=!0,i)=>{var u,d;let r=!1;const{points:s,fixedSegments:o,fileId:a,startBinding:l,endBinding:c}=t;if(fe(e)&&(Object.keys(t).length===0||typeof s<"u"||typeof o<"u"||typeof l<"u"||typeof c<"u")){const f=Us(((u=Vo.getScene(e))==null?void 0:u.getNonDeletedElementsMap())??new Map);t={...t,angle:0,...tg({...e,x:t.x||e.x,y:t.y||e.y},f,{fixedSegments:o,points:s,startBinding:l,endBinding:c},{isDragging:i==null?void 0:i.isDragging})}}else typeof s<"u"&&(t={...Uh(s),...t});for(const f in t){const h=t[f];if(typeof h<"u"){if(e[f]===h&&(typeof h!="object"||h===null||f==="groupIds"||f==="scale"))continue;if(f==="scale"){const m=e[f],p=h;if(m[0]===p[0]&&m[1]===p[1])continue}else if(f==="points"){const m=e[f],p=h;if(m.length===p.length){let b=!1,E=m.length;for(;--E;){const y=m[E],v=p[E];if(y[0]!==v[0]||y[1]!==v[1]){b=!0;break}}if(!b)continue}}e[f]=h,r=!0}}return r&&((typeof t.height<"u"||typeof t.width<"u"||typeof a<"u"||typeof s<"u")&&Xt.delete(e),e.version++,e.versionNonce=Ga(),e.updated=Jh(),n&&((d=Vo.getScene(e))==null||d.triggerUpdate())),e},Ce=(e,t,n=!1)=>{let i=!1;for(const r in t){const s=t[r];if(typeof s<"u"){if(e[r]===s&&(typeof s!="object"||s===null))continue;i=!0}}return!i&&!n?e:{...e,...t,updated:Jh(),version:e.version+1,versionNonce:Ga()}},Gm=(e,t)=>(e.version=(t??e.version)+1,e.versionNonce=Ga(),e.updated=Jh(),e),id=e=>ke(e)||bs(e)?e.points.length<2:e.width===0&&e.height===0,_b=(e,t,n,i,r)=>{const[s,o,a,l]=Js(e,r),c=Pt({clientX:i.offsetLeft,clientY:i.offsetTop},i),u=Pt({clientX:i.offsetLeft+t,clientY:i.offsetTop+n},i);return c.x<=a&&c.y<=l&&u.x>=s&&u.y>=o},ZU=(e,t,n,i,r,s)=>{const[o,a,l,c]=_t(e,r),u=Pt({clientX:i.offsetLeft+((s==null?void 0:s.left)||0),clientY:i.offsetTop+((s==null?void 0:s.top)||0)},i),d=Pt({clientX:i.offsetLeft+t-((s==null?void 0:s.right)||0),clientY:i.offsetTop+n-((s==null?void 0:s.bottom)||0)},i);return o>=u.x&&a>=u.y&&l<=d.x&&c<=d.y},Zx=(e,t,n)=>{const i=Math.abs(t),r=Math.abs(n);if(e==="line"||e==="arrow"||e==="freedraw"){const s=Math.round(Math.atan(r/i)/bc)*bc;s===0?n=0:s===Math.PI/2?t=0:n=i*Math.tan(s)*Math.sign(n)||n}else e!=="selection"&&(n=i*Math.sign(n));return{width:t,height:n}},fE=(e,t,n,i)=>{let r=n-e,s=i-t;const o=Math.round(Math.atan(s/r)/bc)*bc;if(o===0)s=0;else if(o===Math.PI/2)r=0;else{const a=Math.tan(o),l=-1,c=t-a*e,u=-1/a,d=-1,f=i-u*n,h=(l*f-d*c)/(a*d-u*l),m=(c*u-f*a)/(a*d-u*l);r=h-e,s=m-t}return{width:r,height:s}},gF=e=>{const t={width:e.width,height:e.height,x:e.x,y:e.y};if(e.width<0){const n=Math.abs(e.width);t.width=n,t.x=e.x-n}if(e.height<0){const n=Math.abs(e.height);t.height=n,t.y=e.y-n}return t},Nl=e=>e.reduce((t,n)=>t+n.version,0),noe=e=>{let t=5381;for(let n=0;n<e.length;n++)t=(t<<5)+t+e[n].versionNonce;return t>>>0},mF=e=>{let t=5381;for(let n=0;n<e.length;n++){const i=e.charCodeAt(n);t=(t<<5)+t+i}return t>>>0},ioe=e=>e.filter(t=>!t.isDeleted&&!id(t)),Nt=e=>e.filter(t=>!t.isDeleted),hE=e=>!e.isDeleted,D9=e=>Nt(e).map(t=>E9(t.type)?{...t,lastCommittedPoint:null}:t),roe=e=>D9(e),pF=e=>D9(e),UF=e=>D9(e);function qx(e){return[Math.min(e[0][0],e[1][0]),Math.min(e[0][1],e[1][1]),Math.max(e[0][0],e[1][0]),Math.max(e[0][1],e[1][1])]}function soe(e,t){return e[0]<=t[2]&&e[2]>=t[0]&&e[1]<=t[3]&&e[3]>=t[1]}const ooe=1e-6;function Qx(e,t){const n=ve(e[1],e[0]),i=ve(t,e[0]),r=$n(n,i);return Math.abs(r)<ooe}function S8(e,t){const n=ve(e[1],e[0]),i=ve(t,e[0]);return $n(n,i)<0}function Jx(e,t){return Qx(e,t[0])||Qx(e,t[1])||(S8(e,t[0])?!S8(e,t[1]):S8(e,t[1]))}function aoe(e,t){return soe(qx(e),qx(t))&&Jx(e,t)&&Jx(t,e)}const loe=e=>e.type==="diamond"?[C(e.width/2,0),C(e.width,e.height/2),C(e.width/2,e.height),C(0,e.height/2)]:[C(0,0),C(0+e.width,0),C(0+e.width,e.height),C(0,e.height)],coe=e=>ke(e)||bs(e)?e.points:loe(e),eC=e=>{const t=e.reduce((n,[i,r])=>(n.minY=Math.min(n.minY,r),n.minX=Math.min(n.minX,i),n.maxX=Math.max(n.maxX,i),n.maxY=Math.max(n.maxY,r),n),{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,cx:0,cy:0});return t.cx=(t.maxX+t.minX)/2,t.cy=(t.maxY+t.minY)/2,t},uoe=e=>{const t=coe(e),{cx:n,cy:i}=eC(t),r=C(n,i),s=t.map(u=>q(u,r,e.angle)),{minX:o,minY:a,maxX:l,maxY:c}=eC(s);return[o+e.x,a+e.y,l+e.x,c+e.y]},doe=(e,t)=>{const n=uoe(e);return(Zp(n[0],Li(t[0],t[2]))||Zp(t[0],Li(n[0],n[2])))&&(Zp(n[1],Li(t[1],t[3]))||Zp(t[1],Li(n[1],n[3])))},foe=({elements:e,bounds:t,type:n,errorMargin:i=0})=>{var o;WP(t)&&(t=Js(t,Se(e)));const r=[t[0]-i,t[1]-i,t[2]+i,t[3]+i],s=new Set;for(const a of e){if(s.has(a.id))continue;if(doe(a,r)){if(s.add(a.id),a.boundElements)for(const c of a.boundElements)s.add(c.id);ue(a)&&a.containerId&&s.add(a.containerId),ze(a)&&(a.startBinding&&s.add(a.startBinding.elementId),a.endBinding&&s.add((o=a.endBinding)==null?void 0:o.elementId))}}return e.filter(a=>s.has(a.id))},hoe=(e,t,n)=>{const i=Se(e);for(const r of t)if(r.frameId){const s=n.get(r.id),o=n.get(r.frameId);if(s){const a=i.get(s);a&&ee(a,{frameId:o??r.frameId},!1)}}};function N9(e,t,n){const i=EC(t,n),r=EC(e,n);return i.some(o=>r.some(a=>aoe(o,a)))}const bF=(e,t,n)=>e5(H9(e,t,n,!1)).filter(i=>!Ie(i)&&!i.frameId||i.frameId===t.id),O9=(e,t,n)=>H9([t],e,n).some(i=>i.id===t.id),Xm=(e,t,n)=>{const[i,r,s,o]=Ne(t,n),[a,l,c,u]=_t(e);return i<=a&&r<=l&&s>=c&&o>=u},wc=(e,t,n)=>Xm([e],t,n)||N9(e,t,n)||O9(e,t,n),tC=(e,t,n)=>{const[i,r,s,o]=Ne(t,n);return yP(C(i,r),C(e.x,e.y),C(s,o))},goe=e=>{const t=new Map;for(const n of e){const i=Ie(n)?n.id:n.frameId;i&&!t.has(i)&&t.set(i,Ho(e,i))}return t},Ho=(e,t)=>{const n=[];for(const i of e.values())i.frameId===t&&n.push(i);return n},P9=e=>e.filter(t=>Ie(t)),F9=e=>{const t=Se(P9(e));return e.filter(n=>t.has(n.id)||!n.frameId||!t.has(n.frameId))},qU=(e,t,n,i)=>{const r=Ho(e,t.id),s=new Set(r),o=new Set([...bF(e,t,i),...r.filter(f=>O9(f,t,i))]),a=r.filter(f=>!o.has(f)),l=new Set(Array.from(o).flatMap(f=>f.groupIds));for(const f of a)if(!N9(f,t,i))f.groupIds.length===0&&s.delete(f);else if(f.groupIds.length>0)for(const h of f.groupIds)l.add(h);for(const f of a)if(f.groupIds.length>0){let h=!0;for(const m of f.groupIds)l.has(m)&&(h=!1);h&&s.delete(f)}const c=Array.from(o).filter(f=>f.groupIds.length===0);for(const f of c)s.add(f);const u=Array.from(o).filter(f=>f.groupIds.length>0),d=CF(u,n);for(const[f,h]of Object.entries(d))if(h){const m=Gt(e,f);if(Xm(m,t,i))for(const p of m)s.add(p)}return[...s].filter(f=>!(ue(f)&&f.containerId))},moe=(e,t,n)=>poe(e5(e,bF(e,t,n)),t,n),poe=(e,t,n)=>{const i=[],r=new Map;for(const s of e){let o=!1;if(s.groupIds.length>0){if(s.groupIds.some(a=>r.get(a)))o=!0;else{const a=new Set(s.groupIds.flatMap(l=>Gt(n,l)));o=!Xm(Array.from(a),t,n)}s.groupIds.forEach(a=>{r.set(a,o)})}o||i.push(s)}return i},Ur=(e,t)=>e.frameId&&t.get(e.frameId)||null,Uoe=(e,t)=>{const n=new Set,i=Se(e);e=e5(e);for(const o of e)Ie(o)&&o.id!==t.id&&n.add(o.id);const r=new Set,s=[];for(const o of e)if(!(Ie(o)||o.frameId&&n.has(o.frameId)))if(o.groupIds.length){const a=o.groupIds.at(-1);if(!r.has(a)){r.add(a);const l=Gt(e,a);if(l.some(c=>wc(c,t,i)))for(const c of l)s.push(c)}}else wc(o,t,i)&&s.push(o);return s},j1=(e,t,n,i)=>{const r=Se(e),s=new Map;for(const c of e.values())c.frameId===n.id&&s.set(c.id,!0);const o=new Set(t.map(c=>c.id)),a=[],l=new Set;for(const c of t)Ie(c)&&c.id!==n.id&&l.add(c.id);for(const c of e5(e,t)){if(Ie(c)||c.frameId&&l.has(c.frameId)||c.frameId&&i.selectedElementIds[c.id]&&i.selectedElementIds[c.frameId])continue;s.has(c.id)||a.push(c);const u=Pe(c,r);u&&!o.has(u.id)&&!s.has(u.id)&&a.push(u)}for(const c of a)ee(c,{frameId:n.id},!1);return e},J6=(e,t)=>{const n=new Map,i=new Map;for(const r of e)if(r.frameId){n.set(r.id,r);const s=i.get(r.frameId)||[];s.push(r);const o=Pe(r,t);o&&(n.set(o.id,o),s.push(o)),i.set(r.frameId,s)}for(const[,r]of n)ee(r,{frameId:null},!1)},yF=(e,t)=>{const n=Ho(e,t.id);return J6(n,Se(e)),e},EF=(e,t,n,i)=>j1(yF(e,n),t,n,i.state).slice(),vh=(e,t,n)=>{const i=n.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,elements:e}),r=new Set(i);if(t.editingGroupId)for(const a of i)a.groupIds.length===0?r.add(a):a.groupIds.flatMap(l=>Gt(e,l)).forEach(l=>r.add(l));const s=new Set,o=Se(e);return r.forEach(a=>{a.frameId&&!Ie(a)&&!wb(a,o,t)&&s.add(a)}),s.size>0&&J6(s,o),e},e5=(e,t)=>{const n=new Set,i=t||e;for(const o of i.values()){const a=o.groupIds[o.groupIds.length-1];a&&n.add(a)}const r=new Set;for(const o of n)Gt(e,o).some(a=>Ie(a))&&r.add(o);const s=[];for(const o of i.values())r.has(o.groupIds[o.groupIds.length-1])||s.push(o);return s},gE=(e,t,n)=>{const i=ue(e)&&ui(e,t)||e;return i.frameId&&n.selectedElementIds[i.id]&&n.selectedElementIds[i.frameId]?Ur(i,t):n.selectedElementIds[i.id]&&n.selectedElementsAreBeingDragged?n.frameToHighlight:Ur(i,t)},wb=(e,t,n,i)=>{var l;const r=(i==null?void 0:i.targetFrame)??gE(e,t,n);if(!r)return!1;const s=ue(e)&&ui(e,t)||e,o=c=>{i!=null&&i.checkedGroups&&s.groupIds.forEach(u=>{var d;(d=i.checkedGroups)==null||d.set(u,c)})};if(!n.selectedElementIds[s.id]||!n.selectedElementsAreBeingDragged||n.selectedElementIds[s.id]&&n.selectedElementIds[r.id])return!0;if(s.groupIds.length===0)return wc(s,r,t);for(const c of s.groupIds)if((l=i==null?void 0:i.checkedGroups)!=null&&l.has(c))return i.checkedGroups.get(c);const a=new Set(s.groupIds.filter(c=>i!=null&&i.checkedGroups?!i.checkedGroups.has(c):!0).flatMap(c=>Gt(t,c)));if(n.editingGroupId&&n.selectedElementsAreBeingDragged){const c=new Set(Be(t,n));if(n.frameToHighlight!==null)return!0;c.forEach(d=>{a.delete(d)})}for(const c of a)if(Ie(c))return o(!1),!1;for(const c of a)if(wc(c,r,t))return o(!0),!0;return!1},nC=(e,t,n,i,r)=>{if(!n.frameRendering||!n.frameRendering.clip)return!1;const s=N9(e,t,i)||O9(e,t,i);if(s){for(const o of e.groupIds)r==null||r.set(o,!0);return!0}if(!s&&e.groupIds.length>0&&!Xm([e],t,i)){let o=!1;if(n.selectedElementsAreBeingDragged)o=wb(e,i,n,{targetFrame:t,checkedGroups:r});else{o=e.frameId===t.id;for(const a of e.groupIds)r==null||r.set(a,o)}for(const a of e.groupIds)r==null||r.set(a,o);return o}return!1},vF=e=>e.name===null?jP(e)?"Frame":"AI Frame":e.name,B9=(e,t)=>foe({elements:e,bounds:t,type:"overlap"}).filter(n=>!n.frameId||n.frameId===t.id),_F=e=>{const t=Se(e);return e.length>1&&e.some(n=>n.frameId&&t.has(n.frameId))},z9=e=>{const t=new Set;return e.forEach(n=>{Ie(n)&&t.add(n.id)}),e.filter(n=>!(n.frameId&&t.has(n.frameId)))},H9=(e,t,n,i=!0)=>{const[r,s,o,a]=Ne(t,n);let l=e.filter(c=>{let[u,d,f,h]=Js(c,n);const m=Ur(c,n);if(m){const[p,b,E,y]=Js(m,n);u=Math.max(p,u),d=Math.max(b,d),f=Math.min(E,f),h=Math.min(y,h)}return c.locked===!1&&c.type!=="selection"&&!jt(c)&&r<=u&&s<=d&&o>=f&&a>=h});return l=i?z9(l):l,l=l.filter(c=>{const u=Ur(c,n);return u?wc(c,u,n):!0}),l},wF=(e,t,n,i)=>{const r=new Set(t.map(s=>s.id));return e.filter(s=>{const o=_b(s,n.width,n.height,n,i);return!r.has(s.id)&&o})},Fn=function(){let e=null,t=null,n=null;const i=(r,s)=>(n!=null&&r===e&&s.selectedElementIds===t||(n=r.some(o=>s.selectedElementIds[o.id]),e=r,t=s.selectedElementIds),n);return i.clearCache=()=>{e=null,t=null,n=null},i}(),boe=(e,t,n)=>{const i=Array.from(new Set(Be(e,t).map(r=>n(r))));return i.length===1?i[0]:null},Be=(e,t,n)=>{const i=new Set,r=[];for(const s of e.values()){if(t.selectedElementIds[s.id]){r.push(s),i.add(s.id);continue}if(n!=null&&n.includeBoundTextElement&&jt(s)&&t.selectedElementIds[s==null?void 0:s.containerId]){r.push(s),i.add(s.id);continue}}if(n!=null&&n.includeElementsInFrames){const s=[];return r.forEach(o=>{Ie(o)&&Ho(e,o.id).forEach(a=>!i.has(a.id)&&s.push(a)),s.push(o)}),s}return r},TF=(e,t)=>t.editingTextElement?[t.editingTextElement]:t.newElement?[t.newElement]:Be(e,t,{includeBoundTextElement:!0}),ht=(e,t)=>_i(t.selectedElementIds,e)?t.selectedElementIds:e,SF=(e,t,n)=>{const i=n.reduce((r,s)=>(s.groupIds.includes(e)&&(r[s.id]=!0),r),{});return Object.keys(i).length<2?t.selectedGroupIds[e]||t.editingGroupId===e?{selectedElementIds:t.selectedElementIds,selectedGroupIds:{...t.selectedGroupIds,[e]:!1},editingGroupId:null}:t:{editingGroupId:t.editingGroupId,selectedGroupIds:{...t.selectedGroupIds,[e]:!0},selectedElementIds:{...t.selectedElementIds,...i}}},Wi=function(){let e=null,t=null,n=null;const i=(s,o,a,l)=>{if(n!==void 0&&o===t&&s===e&&a.editingGroupId===(n==null?void 0:n.editingGroupId))return n;const c={};for(const f of s){let h=f.groupIds;if(a.editingGroupId){const m=h.indexOf(a.editingGroupId);m>-1&&(h=h.slice(0,m))}if(h.length>0){const m=h[h.length-1];c[m]=!0}}const u={},d=o.reduce((f,h)=>{if(h.isDeleted)return f;const m=h.groupIds.find(p=>c[p]);return m&&(f[h.id]=!0,Array.isArray(u[m])?u[m].push(h.id):u[m]=[h.id]),f},{});for(const f of Object.keys(u))u[f].length<2&&c[f]&&(c[f]=!1);return t=o,e=s,n={editingGroupId:a.editingGroupId,selectedGroupIds:c,selectedElementIds:ht({...a.selectedElementIds,...d},l)},n},r=(s,o,a,l)=>{const c=l?l.scene.getSelectedElements({selectedElementIds:s.selectedElementIds,elements:o}):Be(o,s);return c.length?i(c,o,s,a):{selectedGroupIds:{},editingGroupId:null,selectedElementIds:ht(s.selectedElementIds,a)}};return r.clearCache=()=>{t=null,e=null,n=null},r}(),IF=(e,t)=>xF(e,t)!=null,xF=(e,t)=>t.groupIds.filter(n=>n!==e.editingGroupId).find(n=>e.selectedGroupIds[n]),Ou=e=>Object.entries(e.selectedGroupIds).filter(([t,n])=>n).map(([t,n])=>t),CF=(e,t)=>{let n={...t,selectedGroupIds:{}};for(const i of e){let r=i.groupIds;if(t.editingGroupId){const s=r.indexOf(t.editingGroupId);s>-1&&(r=r.slice(0,s))}if(r.length>0){const s=r[r.length-1];n={...n,...SF(s,n,e)}}}return n.selectedGroupIds},yoe=(e,t)=>({...e,editingGroupId:t.groupIds.length?t.groupIds[0]:null,selectedGroupIds:{},selectedElementIds:{[t.id]:!0}}),P0=(e,t)=>e.groupIds.includes(t),Gt=(e,t)=>{const n=[];for(const i of e.values())P0(i,t)&&n.push(i);return n},Eoe=(e,t)=>e.groupIds.find(n=>t[n]),voe=(e,t,n)=>{const i=[...e],r=n?i.indexOf(n):-1,s=r>-1?r:i.length;return i.splice(s,0,t),i},_oe=(e,t)=>e.filter(n=>!t[n]),t5=(e,t)=>{const n=new Map;return e.forEach(i=>{const r=i.groupIds.length===0?i.id:i.groupIds[i.groupIds.length-1],s=n.get(r)||[],o=Pe(i,t);o&&s.push(o),n.set(r,[...s,i])}),Array.from(n.values())},woe=e=>{const t=new Set;for(const[,n]of e)if(!n.isDeleted)for(const i of n.groupIds??[])t.add(i);return t},AF=e=>{const t=e.flatMap(r=>r.groupIds),n=new Map;let i=0;for(const r of t)n.set(r,(n.get(r)??0)+1),n.get(r)>i&&(i=n.get(r));return i===e.length},_h=e=>e.groupIds.length>0,Toe=(e,t,n)=>{const i=[...e],r=t?e.indexOf(t):-1,s=r>-1?r:e.length;for(let o=0;o<s;o++)i[o]=n(i[o]);return i},MF="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function Rf(e,t,n){const i=n[0];if(t!=null&&e>=t)throw new Error(e+" >= "+t);if(e.slice(-1)===i||t&&t.slice(-1)===i)throw new Error("trailing zero");if(t){let o=0;for(;(e[o]||i)===t[o];)o++;if(o>0)return t.slice(0,o)+Rf(e.slice(o),t.slice(o),n)}const r=e?n.indexOf(e[0]):0,s=t!=null?n.indexOf(t[0]):n.length;if(s-r>1){const o=Math.round(.5*(r+s));return n[o]}else return t&&t.length>1?t.slice(0,1):n[r]+Rf(e.slice(1),null,n)}function RF(e){if(e.length!==kF(e[0]))throw new Error("invalid integer part of order key: "+e)}function kF(e){if(e>="a"&&e<="z")return e.charCodeAt(0)-97+2;if(e>="A"&&e<="Z")return 90-e.charCodeAt(0)+2;throw new Error("invalid order key head: "+e)}function d1(e){const t=kF(e[0]);if(t>e.length)throw new Error("invalid order key: "+e);return e.slice(0,t)}function iC(e,t){if(e==="A"+t[0].repeat(26))throw new Error("invalid order key: "+e);const n=d1(e);if(e.slice(n.length).slice(-1)===t[0])throw new Error("invalid order key: "+e)}function rC(e,t){RF(e);const[n,...i]=e.split("");let r=!0;for(let s=i.length-1;r&&s>=0;s--){const o=t.indexOf(i[s])+1;o===t.length?i[s]=t[0]:(i[s]=t[o],r=!1)}if(r){if(n==="Z")return"a"+t[0];if(n==="z")return null;const s=String.fromCharCode(n.charCodeAt(0)+1);return s>"a"?i.push(t[0]):i.pop(),s+i.join("")}else return n+i.join("")}function Soe(e,t){RF(e);const[n,...i]=e.split("");let r=!0;for(let s=i.length-1;r&&s>=0;s--){const o=t.indexOf(i[s])-1;o===-1?i[s]=t.slice(-1):(i[s]=t[o],r=!1)}if(r){if(n==="a")return"Z"+t.slice(-1);if(n==="A")return null;const s=String.fromCharCode(n.charCodeAt(0)-1);return s<"Z"?i.push(t.slice(-1)):i.pop(),s+i.join("")}else return n+i.join("")}function Gd(e,t,n=MF){if(e!=null&&iC(e,n),t!=null&&iC(t,n),e!=null&&t!=null&&e>=t)throw new Error(e+" >= "+t);if(e==null){if(t==null)return"a"+n[0];const l=d1(t),c=t.slice(l.length);if(l==="A"+n[0].repeat(26))return l+Rf("",c,n);if(l<t)return l;const u=Soe(l,n);if(u==null)throw new Error("cannot decrement any more");return u}if(t==null){const l=d1(e),c=e.slice(l.length),u=rC(l,n);return u??l+Rf(c,null,n)}const i=d1(e),r=e.slice(i.length),s=d1(t),o=t.slice(s.length);if(i===s)return i+Rf(r,o,n);const a=rC(i,n);if(a==null)throw new Error("cannot increment any more");return a<t?a:i+Rf(r,null,n)}function mE(e,t,n,i=MF){if(n===0)return[];if(n===1)return[Gd(e,t,i)];if(t==null){let o=Gd(e,t,i);const a=[o];for(let l=0;l<n-1;l++)o=Gd(o,t,i),a.push(o);return a}if(e==null){let o=Gd(e,t,i);const a=[o];for(let l=0;l<n-1;l++)o=Gd(e,o,i),a.push(o);return a.reverse(),a}const r=Math.floor(n/2),s=Gd(e,t,i);return[...mE(e,s,r,i),s,...mE(s,t,n-r-1,i)]}class Ioe extends Error{constructor(){super(...arguments);F(this,"code","ELEMENT_HAS_INVALID_INDEX")}}const V9=(e,{shouldThrow:t=!1,includeBoundTextValidation:n=!1,ignoreLogs:i,reconciliationContext:r})=>{const s=[],o=l=>`${l==null?void 0:l.index}:${l==null?void 0:l.id}:${l==null?void 0:l.type}:${l==null?void 0:l.isDeleted}:${l==null?void 0:l.version}:${l==null?void 0:l.versionNonce}`,a=e.map(l=>l.index);for(const[l,c]of a.entries()){const u=a[l-1],d=a[l+1];if(pE(c,u,d)||s.push(`Fractional indices invariant has been compromised: "${o(e[l-1])}", "${o(e[l])}", "${o(e[l+1])}"`),n&&ys(e[l])){const f=e[l],h=Pe(f,Se(e));h&&h.index<=f.index&&s.push(`Fractional indices invariant for bound elements has been compromised: "${o(h)}", "${o(f)}"`)}}if(s.length){const l=new Ioe,c=[];if(r&&(c.push("Additional reconciliation context:"),c.push(r.localElements.map(u=>o(u))),c.push(r.remoteElements.map(u=>o(u)))),i||console.error(s.join(`

`),l.stack,e.map(u=>o(u)),...c),t)throw l}},LF=e=>e.sort((t,n)=>sC(t)&&sC(n)?t.index<n.index?-1:t.index>n.index?1:t.id<n.id?-1:1:1),Qs=(e,t)=>{try{const n=xoe(e,t),i=DF(e,n),r=e.map(s=>i.has(s)?{...s,...i.get(s)}:s);V9(r,{includeBoundTextValidation:!1,shouldThrow:!0,ignoreLogs:!0});for(const[s,o]of i)ee(s,o,!1)}catch{Ya(e)}return e},Ya=e=>{const t=Coe(e),n=DF(e,t);for(const[i,r]of n)ee(i,r,!1);return e},xoe=(e,t)=>{const n=[];let i=0;for(;i<e.length;)if(t.has(e[i].id)){const r=[i-1,i];for(;++i<e.length&&t.has(e[i].id);)r.push(i);r.push(i),n.push(r)}else i++;return n},Coe=e=>{const t=[];let n,i,r=-1,s=0;const o=c=>{var f;const u=e[r]?e[r].index:void 0,d=(f=e[c-1])==null?void 0:f.index;return!u&&d||u&&d&&d>u?[d,c-1]:[u,r]},a=c=>{var f;const u=e[s]?e[s].index:void 0;if(u&&c<s)return[u,s];let d=s;for(;++d<e.length;){const h=(f=e[d])==null?void 0:f.index;if(!u&&h||u&&h&&h>u)return[h,d]}return[void 0,d]};let l=0;for(;l<e.length;){const c=e[l].index;if([n,r]=o(l),[i,s]=a(l),pE(c,n,i))l++;else{const u=[r,l];for(;++l<e.length;){const d=e[l].index,[f,h]=o(l),[m,p]=a(l);if(pE(d,f,m))break;[n,r]=[f,h],[i,s]=[m,p],u.push(l)}u.push(s),t.push(u)}}return t},pE=(e,t,n)=>e?t&&n?t<e&&e<n:!t&&n?e<n:t&&!n?t<e:!!e:!1,DF=(e,t)=>{var i,r;const n=new Map;for(const s of t){const o=s.shift(),a=s.pop(),l=mE((i=e[o])==null?void 0:i.index,(r=e[a])==null?void 0:r.index,s.length);for(let c=0;c<s.length;c++){const u=e[s[c]];n.set(u,{index:l[c]})}}return n},sC=e=>!!e.index,oC=e=>{const t=new Map,n=[];for(const i of e)i.isDeleted||(n.push(i),t.set(i.id,i));return{elementsMap:t,elements:n}},Aoe=Mo(e=>{window!=null&&window.DEBUG_FRACTIONAL_INDICES&&V9(e,{shouldThrow:Mie(),includeBoundTextValidation:!0})},1e3*60,{leading:!0,trailing:!1}),Moe=e=>{const t=["includeBoundTextElement","includeElementsInFrames"];let n="";for(const i of t)n+=`${i}:${e[i]?"1":"0"}`;return n},aC=e=>typeof e=="string",uu=class uu{constructor(){F(this,"callbacks",new Set);F(this,"nonDeletedElements",[]);F(this,"nonDeletedElementsMap",Us(new Map));F(this,"elements",[]);F(this,"nonDeletedFramesLikes",[]);F(this,"frames",[]);F(this,"elementsMap",Us(new Map));F(this,"selectedElementsCache",{selectedElementIds:null,elements:null,cache:new Map});F(this,"sceneNonce");F(this,"insertElement",t=>{const n=t.frameId?this.getElementIndex(t.frameId):this.elements.length;this.insertElementAtIndex(t,n)});F(this,"insertElements",t=>{var i;if(!t.length)return;const n=(i=t[0])!=null&&i.frameId?this.getElementIndex(t[0].frameId):this.elements.length;this.insertElementsAtIndex(t,n)});F(this,"getContainerElement",t=>t&&t.containerId&&this.getElement(t.containerId)||null);F(this,"getElementsFromId",t=>{const n=this.getNonDeletedElementsMap(),i=n.get(t);return i?[i]:Gt(n,t)})}static mapElementToScene(t,n){aC(t)?this.sceneMapById.set(t,n):(this.sceneMapByElement.set(t,n),this.sceneMapById.set(t.id,n))}static getScene(t){return aC(t)?this.sceneMapById.get(t)||null:this.sceneMapByElement.get(t)||null}getSceneNonce(){return this.sceneNonce}getNonDeletedElementsMap(){return this.nonDeletedElementsMap}getElementsIncludingDeleted(){return this.elements}getElementsMapIncludingDeleted(){return this.elementsMap}getNonDeletedElements(){return this.nonDeletedElements}getFramesIncludingDeleted(){return this.frames}getSelectedElements(t){const n=Moe(t),i=(t==null?void 0:t.elements)||this.nonDeletedElements;if(this.selectedElementsCache.elements===i&&this.selectedElementsCache.selectedElementIds===t.selectedElementIds){const s=this.selectedElementsCache.cache.get(n);if(s)return s}else(t==null?void 0:t.elements)==null&&this.selectedElementsCache.cache.clear();const r=Be(i,{selectedElementIds:t.selectedElementIds},t);return(t==null?void 0:t.elements)==null&&(this.selectedElementsCache.selectedElementIds=t.selectedElementIds,this.selectedElementsCache.elements=this.nonDeletedElements,this.selectedElementsCache.cache.set(n,r)),r}getNonDeletedFramesLikes(){return this.nonDeletedFramesLikes}getElement(t){return this.elementsMap.get(t)||null}getNonDeletedElement(t){const n=this.getElement(t);return n&&hE(n)?n:null}mapElements(t){let n=!1;const i=this.elements.map(r=>{const s=t(r);return s!==r&&(n=!0),s});return n&&this.replaceAllElements(i),n}replaceAllElements(t){const n=t instanceof Array?t:Array.from(t.values()),i=[];Aoe(n),this.elements=Ya(n),this.elementsMap.clear(),this.elements.forEach(s=>{Ie(s)&&i.push(s),this.elementsMap.set(s.id,s),uu.mapElementToScene(s,this)});const r=oC(this.elements);this.nonDeletedElements=r.elements,this.nonDeletedElementsMap=r.elementsMap,this.frames=i,this.nonDeletedFramesLikes=oC(this.frames).elements,this.triggerUpdate()}triggerUpdate(){this.sceneNonce=Ga();for(const t of Array.from(this.callbacks))t()}onUpdate(t){if(this.callbacks.has(t))throw new Error;return this.callbacks.add(t),()=>{if(!this.callbacks.has(t))throw new Error;this.callbacks.delete(t)}}destroy(){this.elements=[],this.nonDeletedElements=[],this.nonDeletedFramesLikes=[],this.frames=[],this.elementsMap.clear(),this.selectedElementsCache.selectedElementIds=null,this.selectedElementsCache.elements=null,this.selectedElementsCache.cache.clear(),uu.sceneMapById.forEach((t,n)=>{t===this&&uu.sceneMapById.delete(n)}),this.callbacks.clear()}insertElementAtIndex(t,n){if(!Number.isFinite(n)||n<0)throw new Error("insertElementAtIndex can only be called with index >= 0");const i=[...this.elements.slice(0,n),t,...this.elements.slice(n)];Qs(i,Se([t])),this.replaceAllElements(i)}insertElementsAtIndex(t,n){if(!t.length)return;if(!Number.isFinite(n)||n<0)throw new Error("insertElementAtIndex can only be called with index >= 0");const i=[...this.elements.slice(0,n),...t,...this.elements.slice(n)];Qs(i,Se(t)),this.replaceAllElements(i)}getElementIndex(t){return this.elements.findIndex(n=>n.id===t)}};F(uu,"sceneMapByElement",new WeakMap),F(uu,"sceneMapById",new Map);let Vo=uu;const sa={version:null,points:[],zoom:null},ye=class ye{constructor(t){F(this,"elementId");F(this,"selectedPointsIndices");F(this,"pointerDownState");F(this,"isDragging");F(this,"lastUncommittedPoint");F(this,"pointerOffset");F(this,"startBindingElement");F(this,"endBindingElement");F(this,"hoverPointIndex");F(this,"segmentMidPointHoveredCoords");F(this,"elbowed");this.elementId=t.id,Zs(t.points[0],C(0,0))||(console.error("Linear element is not normalized",Error().stack),ye.normalizePoints(t)),this.selectedPointsIndices=null,this.lastUncommittedPoint=null,this.isDragging=!1,this.pointerOffset={x:0,y:0},this.startBindingElement="keep",this.endBindingElement="keep",this.pointerDownState={prevSelectedPointsIndices:null,lastClickedPoint:-1,lastClickedIsEndPoint:!1,origin:null,segmentMidpoint:{value:null,index:null,added:!1}},this.hoverPointIndex=-1,this.segmentMidPointHoveredCoords=null,this.elbowed=fe(t)&&t.elbowed}static getElement(t,n){const i=n.get(t);return i||null}static handleBoxSelection(t,n,i,r){if(!n.editingLinearElement||!n.selectionElement)return!1;const{editingLinearElement:s}=n,{selectedPointsIndices:o,elementId:a}=s,l=ye.getElement(a,r);if(!l)return!1;const[c,u,d,f]=Ne(n.selectionElement,r),m=ye.getPointsGlobalCoordinates(l,r).reduce((p,b,E)=>((b[0]>=c&&b[0]<=d&&b[1]>=u&&b[1]<=f||t.shiftKey&&(o!=null&&o.includes(E)))&&p.push(E),p),[]).filter(p=>!(fe(l)&&p!==0&&p!==l.points.length-1));i({editingLinearElement:{...s,selectedPointsIndices:m.length?m:null}})}static handlePointDragging(t,n,i,r,s,o,a){var m,p;if(!o)return null;const{elementId:l}=o,c=a.getNonDeletedElementsMap(),u=ye.getElement(l,c);if(!u||fe(u)&&!o.pointerDownState.lastClickedIsEndPoint&&o.pointerDownState.lastClickedPoint!==0)return null;const d=fe(u)?[(m=o.selectedPointsIndices)!=null&&m.includes(0)?0:void 0,(p=o.selectedPointsIndices)!=null&&p.find(b=>b>0)?u.points.length-1:void 0].filter(b=>b!==void 0):o.selectedPointsIndices,f=fe(u)?o.pointerDownState.lastClickedPoint>0?u.points.length-1:0:o.pointerDownState.lastClickedPoint,h=u.points[f];if(d&&h){if(H1(t)&&d.length===1&&u.points.length>1){const E=d[0],y=u.points[E===0?1:E-1],[v,_]=ye._getShiftLockedDelta(u,c,y,C(i,r),t[z.CTRL_OR_CMD]?null:n.getEffectiveGridSize());ye.movePoints(u,[{index:E,point:C(v+y[0],_+y[1]),isDragging:E===f}])}else{const E=ye.createPointAt(u,c,i-o.pointerOffset.x,r-o.pointerOffset.y,t[z.CTRL_OR_CMD]?null:n.getEffectiveGridSize()),y=E[0]-h[0],v=E[1]-h[1];ye.movePoints(u,d.map(_=>{const S=_===f?ye.createPointAt(u,c,i-o.pointerOffset.x,r-o.pointerOffset.y,t[z.CTRL_OR_CMD]?null:n.getEffectiveGridSize()):C(u.points[_][0]+y,u.points[_][1]+v);return{index:_,point:S,isDragging:_===f}}))}if(Pe(u,c)&&Vm(u,c,!1),Ea(u,!1)){const E=[];d[0]===0&&E.push(Ps(ye.getPointGlobalCoordinates(u,u.points[0],c)));const v=d[d.length-1];v===u.points.length-1&&E.push(Ps(ye.getPointGlobalCoordinates(u,u.points[v],c))),E.length&&s(u,E)}return{...o,selectedPointsIndices:d,segmentMidPointHoveredCoords:f!==0&&f!==u.points.length-1?this.getPointGlobalCoordinates(u,h,c):null,hoverPointIndex:f===0||f===u.points.length-1?f:-1,isDragging:!0}}return null}static handlePointerUp(t,n,i,r){var h;const s=r.getNonDeletedElementsMap(),o=r.getNonDeletedElements(),{elementId:a,selectedPointsIndices:l,isDragging:c,pointerDownState:u}=n,d=ye.getElement(a,s);if(!d)return n;const f={};if(c&&l){for(const m of l)if(m===0||m===d.points.length-1){Wa(d.points,i.zoom.value)&&ye.movePoints(d,[{index:m,point:m===0?d.points[d.points.length-1]:d.points[0]}]);const p=pu(i)?Bs(Ps(ye.getPointAtIndexGlobalCoordinates(d,m,s)),o,s,i.zoom,fe(d),fe(d)):null;f[m===0?"startBindingElement":"endBindingElement"]=p}}return{...n,...f,selectedPointsIndices:c||t.shiftKey?!c&&t.shiftKey&&((h=u.prevSelectedPointsIndices)!=null&&h.includes(u.lastClickedPoint))?l&&l.filter(m=>m!==u.lastClickedPoint):l:l!=null&&l.includes(u.lastClickedPoint)?[u.lastClickedPoint]:l,isDragging:!1,pointerOffset:{x:0,y:0}}}static isSegmentTooShort(t,n,i,r,s){if(fe(t))return r>=0&&r<t.points.length?mt(n,i)*s.value<ye.POINT_HANDLE_SIZE/2:!1;let o=mt(n,i);return t.points.length>2&&t.roundness&&(o=Loe(t,i)),o*s.value<ye.POINT_HANDLE_SIZE*4}static getSegmentMidPoint(t,n,i,r,s){let o=k0(n,i);if(t.points.length>2&&t.roundness){const a=OF(t,t.points[r]);if(a){const l=Doe(t,t.points[r],.5);o=ye.getPointGlobalCoordinates(t,PF(a[0],a[1],a[2],a[3],l),s)}}return o}static getSegmentMidPointIndex(t,n,i,r){const s=ye.getElement(t.elementId,r);if(!s)return-1;const o=ye.getEditorMidPoints(s,r,n);let a=0;for(;a<o.length;){if(ye.arePointsEqual(i,o[a]))return a+1;a++}return-1}static handlePointerDown(t,n,i,r,s,o){var T;const a=n.state,l=o.getNonDeletedElementsMap(),c=o.getNonDeletedElements(),u={didAddPoint:!1,hitElement:null,linearElementEditor:null};if(!s)return u;const{elementId:d}=s,f=ye.getElement(d,l);if(!f)return u;const h=ye.getSegmentMidpointHitCoords(s,r,a,l);let m=null;if(h)m=ye.getSegmentMidPointIndex(s,a,h,l);else if(t.altKey&&a.editingLinearElement)return s.lastUncommittedPoint==null&&(ee(f,{points:[...f.points,ye.createPointAt(f,l,r.x,r.y,t[z.CTRL_OR_CMD]?null:n.getEffectiveGridSize())]}),u.didAddPoint=!0),i.shouldCaptureIncrement(),u.linearElementEditor={...s,pointerDownState:{prevSelectedPointsIndices:s.selectedPointsIndices,lastClickedPoint:-1,lastClickedIsEndPoint:!1,origin:{x:r.x,y:r.y},segmentMidpoint:{value:h,index:m,added:!1}},selectedPointsIndices:[f.points.length-1],lastUncommittedPoint:null,endBindingElement:Bs(r,c,l,n.state.zoom,s.elbowed)},u.didAddPoint=!0,u;const p=ye.getPointIndexUnderCursor(f,l,a.zoom,r.x,r.y);if(p>=0||h)u.hitElement=f;else{const{startBindingElement:A,endBindingElement:I}=s;pu(a)&&Ea(f)&&q6(f,A,I,l,o)}const[b,E,y,v]=Ne(f,l),_=(b+y)/2,S=(E+v)/2,M=p>-1&&q(C(f.x+f.points[p][0],f.y+f.points[p][1]),C(_,S),f.angle),w=p>-1||t.shiftKey?t.shiftKey||(T=s.selectedPointsIndices)!=null&&T.includes(p)?Roe([...s.selectedPointsIndices||[],p]):[p]:null;return u.linearElementEditor={...s,pointerDownState:{prevSelectedPointsIndices:s.selectedPointsIndices,lastClickedPoint:p,lastClickedIsEndPoint:p===f.points.length-1,origin:{x:r.x,y:r.y},segmentMidpoint:{value:h,index:m,added:!1}},selectedPointsIndices:w,pointerOffset:M?{x:r.x-M[0],y:r.y-M[1]}:{x:0,y:0}},u}static arePointsEqual(t,n){return!t&&!n?!0:!t||!n?!1:Zs(t,n)}static handlePointerMove(t,n,i,r,s){const o=r.state;if(!o.editingLinearElement)return null;const{elementId:a,lastUncommittedPoint:l}=o.editingLinearElement,c=ye.getElement(a,s);if(!c)return o.editingLinearElement;const{points:u}=c,d=u[u.length-1];if(!t.altKey)return d===l&&ye.deletePoints(c,[u.length-1]),{...o.editingLinearElement,lastUncommittedPoint:null};let f;if(H1(t)&&u.length>=2){const h=u[u.length-2],[m,p]=ye._getShiftLockedDelta(c,s,h,C(n,i),t[z.CTRL_OR_CMD]?null:r.getEffectiveGridSize());f=C(m+h[0],p+h[1])}else f=ye.createPointAt(c,s,n-o.editingLinearElement.pointerOffset.x,i-o.editingLinearElement.pointerOffset.y,t[z.CTRL_OR_CMD]||fe(c)?null:r.getEffectiveGridSize());return d===l?ye.movePoints(c,[{index:c.points.length-1,point:f}]):ye.addPoints(c,[{point:f}]),{...o.editingLinearElement,lastUncommittedPoint:c.points[c.points.length-1]}}static getPointGlobalCoordinates(t,n,i){const[r,s,o,a]=Ne(t,i),l=(r+o)/2,c=(s+a)/2,{x:u,y:d}=t;return q(C(u+n[0],d+n[1]),C(l,c),t.angle)}static getPointsGlobalCoordinates(t,n){const[i,r,s,o]=Ne(t,n),a=(i+s)/2,l=(r+o)/2;return t.points.map(c=>{const{x:u,y:d}=t;return q(C(u+c[0],d+c[1]),C(a,l),t.angle)})}static getPointAtIndexGlobalCoordinates(t,n,i){const r=n<0?t.points.length+n:n,[s,o,a,l]=Ne(t,i),c=(s+a)/2,u=(o+l)/2,d=t.points[r],{x:f,y:h}=t;return q(d?C(f+d[0],h+d[1]):C(f,h),C(c,u),t.angle)}static pointFromAbsoluteCoords(t,n,i){if(fe(t))return C(n[0]-t.x,n[1]-t.y);const[r,s,o,a]=Ne(t,i),l=(r+o)/2,c=(s+a)/2,[u,d]=q(C(n[0],n[1]),C(l,c),-t.angle);return C(u-t.x,d-t.y)}static getPointIndexUnderCursor(t,n,i,r,s){const o=ye.getPointsGlobalCoordinates(t,n);let a=o.length;for(;--a>-1;){const l=o[a];if(mt(C(r,s),C(l[0],l[1]))*i.value<ye.POINT_HANDLE_SIZE+1)return a}return-1}static createPointAt(t,n,i,r,s){const o=Mn(i,r,s),[a,l,c,u]=Ne(t,n),d=(a+c)/2,f=(l+u)/2,[h,m]=q(C(o[0],o[1]),C(d,f),-t.angle);return C(h-t.x,m-t.y)}static getNormalizedPoints(t){const{points:n}=t,i=n[0][0],r=n[0][1];return{points:n.map(s=>C(s[0]-i,s[1]-r)),x:t.x+i,y:t.y+r}}static normalizePoints(t){ee(t,ye.getNormalizedPoints(t))}static duplicateSelectedPoints(t,n){mr(t.editingLinearElement,"Not currently editing a linear element");const{selectedPointsIndices:i,elementId:r}=t.editingLinearElement,s=ye.getElement(r,n);mr(s,"The linear element does not exist in the provided Scene"),mr(i!=null,"There are no selected points to duplicate");const{points:o}=s,a=[];let l=!1,c=-1;const u=o.reduce((d,f,h)=>{if(++c,d.push(f),i.includes(h)){const p=o[h+1];p||(l=!0),d.push(p?C((f[0]+p[0])/2,(f[1]+p[1])/2):C(f[0],f[1])),a.push(c+1),++c}return d},[]);if(ee(s,{points:u}),l){const d=s.points[s.points.length-1];ye.movePoints(s,[{index:s.points.length-1,point:C(d[0]+30,d[1]+30)}])}return{...t,editingLinearElement:{...t.editingLinearElement,selectedPointsIndices:a}}}static deletePoints(t,n){let i=0,r=0;if(n.includes(0)){const a=t.points.find((l,c)=>!n.includes(c));a&&(i=a[0],r=a[1])}const o=t.points.reduce((a,l,c)=>(n.includes(c)||a.push(a.length?C(l[0]-i,l[1]-r):C(0,0)),a),[]);ye._updatePoints(t,o,i,r)}static addPoints(t,n){const s=[...t.points,...n.map(o=>o.point)];ye._updatePoints(t,s,0,0)}static movePoints(t,n,i,r){var d,f,h;const{points:s}=t,[o,a]=((d=n.find(({index:m})=>m===0))==null?void 0:d.point)??C(0,0),[l,c]=C(o-s[0][0],a-s[0][1]),u=fe(t)?[((f=n.find(m=>m.index===0))==null?void 0:f.point)??s[0],((h=n.find(m=>m.index===s.length-1))==null?void 0:h.point)??s[s.length-1]]:s.map((m,p)=>{var E;const b=((E=n.find(y=>y.index===p))==null?void 0:E.point)??m;return C(b[0]-l,b[1]-c)});ye._updatePoints(t,u,l,c,i,{isDragging:n.reduce((m,p)=>m||p.isDragging===!0,!1),sceneElementsMap:r})}static shouldAddMidpoint(t,n,i,r){const s=ye.getElement(t.elementId,r);if(s&&fe(s)||!s)return!1;const{segmentMidpoint:o}=t.pointerDownState;if(o.added||o.value===null||o.index===null||t.pointerDownState.origin===null)return!1;const a=t.pointerDownState.origin,l=mt(C(a.x,a.y),C(n.x,n.y));return!(!i.editingLinearElement&&l<eu/i.zoom.value)}static addMidpoint(t,n,i,r,s){const o=ye.getElement(t.elementId,s);if(!o)return;const{segmentMidpoint:a}=t.pointerDownState,l={pointerDownState:t.pointerDownState,selectedPointsIndices:t.selectedPointsIndices},c=ye.createPointAt(o,s,n.x,n.y,r&&!fe(o)?i.getEffectiveGridSize():null),u=[...o.points.slice(0,a.index),c,...o.points.slice(a.index)];return ee(o,{points:u}),l.pointerDownState={...t.pointerDownState,segmentMidpoint:{...t.pointerDownState.segmentMidpoint,added:!0},lastClickedPoint:a.index},l.selectedPointsIndices=[a.index],l}static _updatePoints(t,n,i,r,s,o){if(fe(t)){const a={};(s==null?void 0:s.startBinding)!==void 0&&(a.startBinding=s.startBinding!==null&&mb(s.startBinding)?s.startBinding:null),(s==null?void 0:s.endBinding)!==void 0&&(a.endBinding=s.endBinding!==null&&mb(s.endBinding)?s.endBinding:null),a.points=Array.from(n),!(o!=null&&o.sceneElementsMap)||Vo.getScene(t)?ee(t,a,!0,{isDragging:o==null?void 0:o.isDragging}):Object.assign(t,{...a,angle:0,...tg(t,o.sceneElementsMap,a,{isDragging:o==null?void 0:o.isDragging})}),Gm(t)}else{const a=TC(t,n),l=TC(t,t.points),c=(a[0]+a[2])/2,u=(a[1]+a[3])/2,d=(l[0]+l[2])/2,f=(l[1]+l[3])/2,h=d-c,m=f-u,p=q(C(i,r),C(h,m),t.angle);ee(t,{...s,points:n,x:t.x+p[0],y:t.y+p[1]})}}static _getShiftLockedDelta(t,n,i,r,s){const o=ye.getPointGlobalCoordinates(t,i,n);if(fe(t))return[r[0]-o[0],r[1]-o[1]];const[a,l]=Mn(r[0],r[1],s),{width:c,height:u}=fE(o[0],o[1],a,l);return q(C(c,u),C(0,0),-t.angle)}static moveFixedSegment(t,n,i,r,s){const o=ye.getElement(t.elementId,s);if(!o||!fe(o))return t;if(n&&n>0&&n<o.points.length){const a=Ro(bh(ve(o.points[n],o.points[n-1]))),l=(o.fixedSegments??[]).reduce((f,h)=>(f[h.index]=h,f),{});l[n]={index:n,start:C(a?o.points[n-1][0]:i-o.x,a?r-o.y:o.points[n-1][1]),end:C(a?o.points[n][0]:i-o.x,a?r-o.y:o.points[n][1])};const c=Object.values(l).sort((f,h)=>f.index-h.index),u=c.map(f=>f.index).reduce((f,h)=>h<n?f+1:f,0);ee(o,{fixedSegments:c});const d=C(o.x+(o.fixedSegments[u].start[0]+o.fixedSegments[u].end[0])/2,o.y+(o.fixedSegments[u].start[1]+o.fixedSegments[u].end[1])/2);return{...t,segmentMidPointHoveredCoords:d,pointerDownState:{...t.pointerDownState,segmentMidpoint:{added:!1,index:o.fixedSegments[u].index,value:d}}}}return t}static deleteFixedSegment(t,n){var i;ee(t,{fixedSegments:(i=t.fixedSegments)==null?void 0:i.filter(r=>r.index!==n)}),ee(t,{},!0)}};F(ye,"POINT_HANDLE_SIZE",10),F(ye,"getEditorMidPoints",(t,n,i)=>{const r=Pe(t,n);return!fe(t)&&!i.editingLinearElement&&t.points.length>2&&!r?[]:(sa.version===t.version&&sa.zoom===i.zoom.value||ye.updateEditorMidPointsCache(t,n,i),sa.points)}),F(ye,"updateEditorMidPointsCache",(t,n,i)=>{const r=ye.getPointsGlobalCoordinates(t,n);let s=0;const o=[];for(;s<r.length-1;){if(ye.isSegmentTooShort(t,t.points[s],t.points[s+1],s,i.zoom)){o.push(null),s++;continue}const a=ye.getSegmentMidPoint(t,r[s],r[s+1],s+1,n);o.push(a),s++}sa.points=o,sa.version=t.version,sa.zoom=i.zoom.value}),F(ye,"getSegmentMidpointHitCoords",(t,n,i,r)=>{const{elementId:s}=t,o=ye.getElement(s,r);if(!o)return null;const a=ye.getPointIndexUnderCursor(o,r,i.zoom,n.x,n.y);if(!fe(o)&&a>=0||ye.getPointsGlobalCoordinates(o,r).length>=3&&!i.editingLinearElement&&!fe(o))return null;const c=(ye.POINT_HANDLE_SIZE+1)/i.zoom.value,u=t.segmentMidPointHoveredCoords;if(u&&mt(C(u[0],u[1]),C(n.x,n.y))<=c)return u;let d=0;const f=ye.getEditorMidPoints(o,r,i);for(;d<f.length;){if(f[d]!==null&&mt(f[d],C(n.x,n.y))<=c)return f[d];d++}return null}),F(ye,"getBoundTextElementPosition",(t,n,i)=>{const r=ye.getPointsGlobalCoordinates(t,i);r.length<2&&ee(n,{isDeleted:!0});let s=0,o=0;if(t.points.length%2===1){const a=Math.floor(t.points.length/2),l=ye.getPointGlobalCoordinates(t,t.points[a],i);s=l[0]-n.width/2,o=l[1]-n.height/2}else{const a=t.points.length/2-1;let l=sa.points[a];t.points.length===2&&(l=k0(r[0],r[1])),(!l||sa.version!==t.version)&&(l=ye.getSegmentMidPoint(t,r[a],r[a+1],a+1,i)),s=l[0]-n.width/2,o=l[1]-n.height/2}return{x:s,y:o}}),F(ye,"getMinMaxXYWithBoundText",(t,n,i,r)=>{let[s,o,a,l]=i;const c=(s+a)/2,u=(o+l)/2,{x:d,y:f}=ye.getBoundTextElementPosition(t,r,n),h=d+r.width,m=f+r.height,p=C(c,u),b=q(C(s,o),p,t.angle),E=q(C(a,o),p,t.angle),y=q(C(d,f),p,-t.angle),v=q(C(h,f),p,-t.angle),_=q(C(d,m),p,-t.angle),S=q(C(h,m),p,-t.angle);return b[0]<E[0]&&b[1]>=E[1]?(s=Math.min(s,_[0]),a=Math.max(a,Math.max(v[0],S[0])),o=Math.min(o,y[1]),l=Math.max(l,S[1])):b[0]>=E[0]&&b[1]>E[1]?(s=Math.min(s,S[0]),a=Math.max(a,Math.max(y[0],v[0])),o=Math.min(o,_[1]),l=Math.max(l,v[1])):b[0]>=E[0]?(s=Math.min(s,v[0]),a=Math.max(a,_[0]),o=Math.min(o,S[1]),l=Math.max(l,y[1])):b[1]<=E[1]&&(s=Math.min(s,Math.min(v[0],y[0])),a=Math.max(a,S[0]),o=Math.min(o,v[1]),l=Math.max(l,_[1])),[s,o,a,l,c,u]}),F(ye,"getElementAbsoluteCoords",(t,n,i=!1)=>{let r,s,o,a,l;if(t.points.length<2||!Xt.get(t)){const{minX:f,minY:h,maxX:m,maxY:p}=t.points.reduce((b,[E,y])=>(b.minY=Math.min(b.minY,y),b.minX=Math.min(b.minX,E),b.maxX=Math.max(b.maxX,E),b.maxY=Math.max(b.maxY,y),b),{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0});s=f+t.x,o=h+t.y,a=m+t.x,l=p+t.y}else{const f=Xt.generateElementShape(t,null),h=Bc(f[0]),[m,p,b,E]=i5(h);s=m+t.x,o=p+t.y,a=b+t.x,l=E+t.y}const c=(s+a)/2,u=(o+l)/2;if(r=[s,o,a,l,c,u],!i)return r;const d=Pe(t,n);return d&&(r=ye.getMinMaxXYWithBoundText(t,n,[s,o,a,l],d)),r});let ce=ye;const Roe=e=>{let t=[...new Set(e.filter(n=>n!==null&&n!==-1))];return t=t.sort((n,i)=>n-i),t.length?t:null},fa=(e,t)=>{var n;switch(e.type){case"rectangle":case"diamond":case"frame":case"magicframe":case"embeddable":case"image":case"iframe":case"text":case"selection":return JF(e);case"arrow":case"line":{const i=((n=Xt.get(e))==null?void 0:n[0])??Xt.generateElementShape(e,null)[0],[,,,,r,s]=Ne(e,t);return lE(e)?vae(e,i,C(e.x,e.y),e.angle,C(r,s)):bae(i,C(e.x,e.y),e.angle,C(r,s))}case"ellipse":return Uae(e);case"freedraw":{const[,,,,i,r]=Ne(e,t);return Eae(e,C(i,r),lE(e))}}},NF=(e,t)=>{const n=Pe(e,t);return n?e.type==="arrow"?fa({...n,...ce.getBoundTextElementPosition(e,n,t)},t):fa(n,t):null},OF=(e,t)=>{const n=Xt.generateElementShape(e,null);if(!n)return null;const i=Bc(n[0]);let r=C(0,0),s=0,o=1/0,a=null;for(;s<i.length;){const{op:l,data:c}=i[s];if(l==="move"&&(mr(mu(c),"The returned ops is not compatible with a point"),r=c),l==="bcurveTo"){const u=r,d=C(c[0],c[1]),f=C(c[2],c[3]),h=C(c[4],c[5]),m=mt(h,t);m<o&&(o=m,a=[u,d,f,h]),r=h}s++}return a},PF=(e,t,n,i,r)=>{const s=(l,c)=>Math.pow(1-l,3)*i[c]+3*l*Math.pow(1-l,2)*n[c]+3*Math.pow(l,2)*(1-l)*t[c]+e[c]*Math.pow(l,3),o=s(r,0),a=s(r,1);return C(o,a)},koe=(e,t)=>{const n=OF(e,t);if(!n)return[];const i=[];let r=1;for(;r>0;){const s=PF(n[0],n[1],n[2],n[3],r);i.push(C(s[0],s[1])),r-=.05}return i.length&&Zs(i.at(-1),t)&&i.push(C(t[0],t[1])),i},FF=(e,t)=>{const n=[];n[0]=0;const i=koe(e,t);let r=0,s=0;for(;r<i.length-1;){const o=mt(i[r],i[r+1]);s+=o,n.push(s),r++}return n},Loe=(e,t)=>FF(e,t).at(-1),Doe=(e,t,n)=>{const i=FF(e,t),r=i.length-1,s=i.at(-1),o=n*s;let a=0,l=r,c=0;for(;a<l;)c=Math.floor(a+(l-a)/2),i[c]<o?a=c+1:l=c;return i[c]>o&&c--,i[c]===o?c/r:1-(c+(o-i[c])/(i[c+1]-i[c]))/r},To=(e,t)=>{const n={minX:e.x,minY:e.y,maxX:e.x+e.width,maxY:e.y+e.height,midX:e.x+e.width/2,midY:e.y+e.height/2},i=C(n.midX,n.midY),[r,s]=q(C(n.minX,n.minY),i,e.angle),[o,a]=q(C(n.maxX,n.minY),i,e.angle),[l,c]=q(C(n.maxX,n.maxY),i,e.angle),[u,d]=q(C(n.minX,n.maxY),i,e.angle),f=[Math.min(r,o,l,u),Math.min(s,a,c,d),Math.max(r,o,l,u),Math.max(s,a,c,d)];if(t){const[h,m,p,b]=t;return[f[0]-b,f[1]-h,f[2]+m,f[3]+p]}return f},wh=(e,t)=>e[0]>t[0]&&e[0]<t[2]&&e[1]>t[1]&&e[1]<t[3],Gs=(e,t)=>{var n,i,r,s;if(((n=t.roundness)==null?void 0:n.type)===Nn.PROPORTIONAL_RADIUS||((i=t.roundness)==null?void 0:i.type)===Nn.LEGACY)return e*f8;if(((r=t.roundness)==null?void 0:r.type)===Nn.ADAPTIVE_RADIUS){const o=((s=t.roundness)==null?void 0:s.value)??Jne,a=o/f8;return e<=a?e*f8:o}return 0},Wa=(e,t=1)=>{if(e.length>=3){const[n,i]=[e[0],e[e.length-1]];return mt(n,i)<=$U/t}return!1},Th=e=>e==="rectangle"||e==="iframe"||e==="embeddable"||e==="ellipse"||e==="diamond"||e==="line"||e==="freedraw",UE=e=>e!=="image"&&e!=="frame"&&e!=="magicframe",lC=e=>e==="rectangle"||e==="iframe"||e==="embeddable"||e==="ellipse"||e==="diamond"||e==="freedraw"||e==="arrow"||e==="line",cC=e=>e==="rectangle"||e==="iframe"||e==="embeddable"||e==="ellipse"||e==="diamond"||e==="arrow"||e==="line",bE=e=>e==="rectangle"||e==="iframe"||e==="embeddable"||e==="line"||e==="diamond"||e==="image",uC=e=>e==="arrow",Tb=e=>e==="arrow";function dC(e,t,n,i=r=>r){return e*i(.5-t*(.5-n))}function Noe(e){return[-e[0],-e[1]]}function As(e,t){return[e[0]+t[0],e[1]+t[1]]}function Kr(e,t){return[e[0]-t[0],e[1]-t[1]]}function Is(e,t){return[e[0]*t,e[1]*t]}function Ooe(e,t){return[e[0]/t,e[1]/t]}function Bg(e){return[e[1],-e[0]]}function fC(e,t){return e[0]*t[0]+e[1]*t[1]}function Poe(e,t){return e[0]===t[0]&&e[1]===t[1]}function Foe(e){return Math.hypot(e[0],e[1])}function Boe(e){return e[0]*e[0]+e[1]*e[1]}function hC(e,t){return Boe(Kr(e,t))}function BF(e){return Ooe(e,Foe(e))}function zoe(e,t){return Math.hypot(e[1]-t[1],e[0]-t[0])}function zg(e,t,n){let i=Math.sin(n),r=Math.cos(n),s=e[0]-t[0],o=e[1]-t[1],a=s*r-o*i,l=s*i+o*r;return[a+t[0],l+t[1]]}function yE(e,t,n){return As(e,Is(Kr(t,e),n))}function gC(e,t,n){return As(e,Is(t,n))}var{min:Xd,PI:Hoe}=Math,mC=.275,Hg=Hoe+1e-4;function Voe(e,t={}){let{size:n=16,smoothing:i=.5,thinning:r=.5,simulatePressure:s=!0,easing:o=$=>$,start:a={},end:l={},last:c=!1}=t,{cap:u=!0,easing:d=$=>$*(2-$)}=a,{cap:f=!0,easing:h=$=>--$*$*$+1}=l;if(e.length===0||n<=0)return[];let m=e[e.length-1].runningLength,p=a.taper===!1?0:a.taper===!0?Math.max(n,m):a.taper,b=l.taper===!1?0:l.taper===!0?Math.max(n,m):l.taper,E=Math.pow(n*i,2),y=[],v=[],_=e.slice(0,10).reduce(($,j)=>{let X=j.pressure;if(s){let K=Xd(1,j.distance/n),le=Xd(1,1-K);X=Xd(1,$+(le-$)*(K*mC))}return($+X)/2},e[0].pressure),S=dC(n,r,e[e.length-1].pressure,o),M,w=e[0].vector,T=e[0].point,A=T,I=T,R=A,D=!1;for(let $=0;$<e.length;$++){let{pressure:j}=e[$],{point:X,vector:K,distance:le,runningLength:we}=e[$];if($<e.length-1&&m-we<3)continue;if(r){if(s){let Ae=Xd(1,le/n),$e=Xd(1,1-Ae);j=Xd(1,_+($e-_)*(Ae*mC))}S=dC(n,r,j,o)}else S=n/2;M===void 0&&(M=S);let he=we<p?d(we/p):1,Ve=m-we<b?h((m-we)/b):1;S=Math.max(.01,S*Math.min(he,Ve));let Ye=($<e.length-1?e[$+1]:e[$]).vector,wt=$<e.length-1?fC(K,Ye):1,st=fC(K,w)<0&&!D,zt=wt!==null&&wt<0;if(st||zt){let Ae=Is(Bg(w),S);for(let $e=1/13,Ht=0;Ht<=1;Ht+=$e)I=zg(Kr(X,Ae),X,Hg*Ht),y.push(I),R=zg(As(X,Ae),X,Hg*-Ht),v.push(R);T=I,A=R,zt&&(D=!0);continue}if(D=!1,$===e.length-1){let Ae=Is(Bg(K),S);y.push(Kr(X,Ae)),v.push(As(X,Ae));continue}let en=Is(Bg(yE(Ye,K,wt)),S);I=Kr(X,en),($<=1||hC(T,I)>E)&&(y.push(I),T=I),R=As(X,en),($<=1||hC(A,R)>E)&&(v.push(R),A=R),_=j,w=K}let L=e[0].point.slice(0,2),G=e.length>1?e[e.length-1].point.slice(0,2):As(e[0].point,[1,1]),V=[],H=[];if(e.length===1){if(!(p||b)||c){let $=gC(L,BF(Bg(Kr(L,G))),-(M||S)),j=[];for(let X=1/13,K=X;K<=1;K+=X)j.push(zg($,L,Hg*2*K));return j}}else{if(!(p||b&&e.length===1))if(u)for(let j=1/13,X=j;X<=1;X+=j){let K=zg(v[0],L,Hg*X);V.push(K)}else{let j=Kr(y[0],v[0]),X=Is(j,.5),K=Is(j,.51);V.push(Kr(L,X),Kr(L,K),As(L,K),As(L,X))}let $=Bg(Noe(e[e.length-1].vector));if(b||p&&e.length===1)H.push(G);else if(f){let j=gC(G,$,S);for(let X=1/29,K=X;K<1;K+=X)H.push(zg(j,G,Hg*3*K))}else H.push(As(G,Is($,S)),As(G,Is($,S*.99)),Kr(G,Is($,S*.99)),Kr(G,Is($,S)))}return y.concat(H,v.reverse(),V)}function $oe(e,t={}){var n;let{streamline:i=.5,size:r=16,last:s=!1}=t;if(e.length===0)return[];let o=.15+(1-i)*.85,a=Array.isArray(e[0])?e:e.map(({x:h,y:m,pressure:p=.5})=>[h,m,p]);if(a.length===2){let h=a[1];a=a.slice(0,-1);for(let m=1;m<5;m++)a.push(yE(a[0],h,m/4))}a.length===1&&(a=[...a,[...As(a[0],[1,1]),...a[0].slice(2)]]);let l=[{point:[a[0][0],a[0][1]],pressure:a[0][2]>=0?a[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],c=!1,u=0,d=l[0],f=a.length-1;for(let h=1;h<a.length;h++){let m=s&&h===f?a[h].slice(0,2):yE(d.point,a[h],o);if(Poe(d.point,m))continue;let p=zoe(m,d.point);if(u+=p,h<f&&!c){if(u<r)continue;c=!0}d={point:m,pressure:a[h][2]>=0?a[h][2]:.5,vector:BF(Kr(d.point,m)),distance:p,runningLength:u},l.push(d)}return l[0].vector=((n=l[1])==null?void 0:n.vector)||[0,0],l}function Goe(e,t={}){return Voe($oe(e,t),t)}const Qn=10,Xoe=(e,t,n,i,r,s,o)=>{var I,R;const{width:a,height:l}=Ka(e),c=n/a,u=i/l,d=(((I=e.crop)==null?void 0:I.x)??0)/c,f=(((R=e.crop)==null?void 0:R.y)??0)/u,h=q(C(r,s),C(e.x+e.width/2,e.y+e.height/2),-e.angle);r=h[0],s=h[1];let m=e.width,p=e.height,b=e.crop??{x:0,y:0,width:n,height:i,naturalWidth:n,naturalHeight:i};const E=b.height,y=b.width,v=e.scale[0]===-1,_=e.scale[1]===-1;let S=s-e.y,M=r-e.x;t.includes("n")&&(p=Ge(e.height-S,Qn,_?l-f:e.height+f)),t.includes("s")&&(S=s-e.y-e.height,p=Ge(e.height+S,Qn,_?e.height+f:l-f)),t.includes("e")&&(M=r-e.x-e.width,m=Ge(e.width+M,Qn,v?e.width+d:a-d)),t.includes("w")&&(m=Ge(e.width-M,Qn,v?a-d:e.width+d));const w=D=>{D.height=p*u,D.width=m*c};w(b);const T=(D,L)=>{w(L),D.includes("n")&&(_||(L.y+=E-L.height)),D.includes("s")&&_&&(L.y+=E-L.height),D.includes("e")&&v&&(L.x+=y-L.width),D.includes("w")&&(v||(L.x+=y-L.width))};switch(t){case"n":{if(o){const D=d+e.width/2,L=a-d-e.width/2,G=Math.min(D,L)*2;m=Ge(p*o,Qn,G),p=m/o}T(t,b),o&&(b.x+=(y-b.width)/2);break}case"s":{if(o){const D=d+e.width/2,L=a-d-e.width/2,G=Math.min(D,L)*2;m=Ge(p*o,Qn,G),p=m/o}T(t,b),o&&(b.x+=(y-b.width)/2);break}case"w":{if(o){const D=f+e.height/2,L=l-f-e.height/2,G=Math.min(D,L)*2;p=Ge(m/o,Qn,G),m=p*o}T(t,b),o&&(b.y+=(E-b.height)/2);break}case"e":{if(o){const D=f+e.height/2,L=l-f-e.height/2,G=Math.min(D,L)*2;p=Ge(m/o,Qn,G),m=p*o}T(t,b),o&&(b.y+=(E-b.height)/2);break}case"ne":{if(o)if(M>-S){const D=_?l-f:f+e.height;p=Ge(m/o,Qn,D),m=p*o}else{const D=v?d+e.width:a-d;m=Ge(p*o,Qn,D),p=m/o}T(t,b);break}case"nw":{if(o)if(M<S){const D=_?l-f:f+e.height;p=Ge(m/o,Qn,D),m=p*o}else{const D=v?a-d:d+e.width;m=Ge(p*o,Qn,D),p=m/o}T(t,b);break}case"se":{if(o)if(M>S){const D=_?f+e.height:l-f;p=Ge(m/o,Qn,D),m=p*o}else{const D=v?d+e.width:a-d;m=Ge(p*o,Qn,D),p=m/o}T(t,b);break}case"sw":{if(o)if(-M>S){const D=_?f+e.height:l-f;p=Ge(m/o,Qn,D),m=p*o}else{const D=v?a-d:d+e.width;m=Ge(p*o,Qn,D),p=m/o}T(t,b);break}}const A=joe(e,t,m,p,!!o);return Tx(b.width,b.naturalWidth)&&Tx(b.height,b.naturalHeight)&&(b=null),{x:A[0],y:A[1],width:m,height:p,crop:b}},joe=(e,t,n,i,r)=>{const[s,o,a,l]=nc(e,e.width,e.height,!0),c=C(s,o),u=C(a,l),d=k0(c,u),[f,h,m,p]=nc(e,n,i,!0),b=m-f,E=p-h;let y=[...c];if(["n","w","nw"].includes(t)&&(y=[u[0]-Math.abs(b),u[1]-Math.abs(E)]),t==="ne"){const T=[c[0],u[1]];y=[T[0],T[1]-Math.abs(E)]}if(t==="sw"){const T=[u[0],c[1]];y=[T[0]-Math.abs(b),T[1]]}r&&(["s","n"].includes(t)&&(y[0]=d[0]-b/2),["e","w"].includes(t)&&(y[1]=d[1]-E/2));const v=e.angle,_=q(y,d,v),S=[y[0]+Math.abs(b)/2,y[1]+Math.abs(E)/2],M=q(S,d,v);y=q(_,M,-v);const w=[...y];return w[0]+=e.x-f,w[1]+=e.y-h,w},Yoe=(e,t)=>{if(e.crop){const{width:n,height:i}=Ka(e),[r,s,o,a,l,c]=Ne(e,t),u=ve(q(C(r,s),C(l,c),e.angle)),d=ve(q(C(o,s),C(l,c),e.angle)),f=li(sb(d,u)),h=ve(q(C(r,a),C(l,c),e.angle)),m=sb(h,u),p=li(m),{cropX:b,cropY:E}=Woe(e.crop,e.scale),y=zl(zl(u,Zt(f,-b*n/e.crop.naturalWidth)),Zt(p,-E*i/e.crop.naturalHeight)),v=He(zl(zl(y,Zt(f,n/2)),Zt(p,i/2))),_=q(He(y),v,-e.angle);return{...e,x:_[0],y:_[1],width:n,height:i,crop:null}}return e},Ka=e=>{if(e.crop){const t=e.width/(e.crop.width/e.crop.naturalWidth),n=e.height/(e.crop.height/e.crop.naturalHeight);return{width:t,height:n}}return{width:e.width,height:e.height}},Woe=(e,t)=>{let n=e.x,i=e.y;const r=t[0]===-1,s=t[1]===-1;return r&&(n=e.naturalWidth-Math.abs(n)-e.width),s&&(i=e.naturalHeight-Math.abs(i)-e.height),{cropX:n,cropY:i}},Koe=(e,t=!1)=>{const n=e.crop;if(!n)return null;const i=e.scale[0]===-1,r=e.scale[1]===-1;let s=n.x,o=n.y;if(i&&(s=n.naturalWidth-n.width-n.x),r&&(o=n.naturalHeight-n.height-n.y),t)return{x:s,y:o};const{width:a,height:l}=Ka(e);return{x:s/(n.naturalWidth/a),y:o/(n.naturalHeight/l)}},zF="invert(100%) hue-rotate(180deg) saturate(1.25)",HF=(e,t)=>In(e)&&!t.imageCache.has(e.fileId),VF=(e,t,n)=>{var i;return n.theme===xe.DARK&&In(e)&&!HF(e,t)&&((i=t.imageCache.get(e.fileId))==null?void 0:i.mimeType)!==be.svg},n5=e=>{switch(e.type){case"freedraw":return e.strokeWidth*12;case"text":return e.fontSize/2;default:return 20}},$F=(e,t,n,i,r=1)=>{let s=((t==null?void 0:t.opacity)??100)*e.opacity/1e4*r;return(n.has(e.id)||i&&i.some(o=>o.id===e.id)||t&&n.has(t.id))&&(s*=Qne/100),s},Zoe=(e,t,n)=>{const s=n5(e),[o,a,l,c]=Ne(e,t),u=ke(e)||bs(e)?Ni(o,l):e.width,d=ke(e)||bs(e)?Ni(a,c):e.height;let f=u*window.devicePixelRatio+s*2,h=d*window.devicePixelRatio+s*2,m=n.value;return(f*m>32767||h*m>32767)&&(m=Math.min(32767/f,32767/h)),f*h*m*m>16777216&&(m=Math.sqrt(16777216/(f*h))),f=Math.floor(f*m),h=Math.floor(h*m),{width:f,height:h,scale:m}},GF=(e,t,n,i,r)=>{var E,y;const s=document.createElement("canvas"),o=s.getContext("2d"),a=n5(e),{width:l,height:c,scale:u}=Zoe(e,t,n);if(!l||!c)return null;s.width=l,s.height=c;let d=-100,f=0;if(ke(e)||bs(e)){const[v,_]=Ne(e,t);d=e.x>v?Ni(e.x,v)*window.devicePixelRatio*u:0,f=e.y>_?Ni(e.y,_)*window.devicePixelRatio*u:0,o.translate(d,f)}o.save(),o.translate(a*u,a*u),o.scale(window.devicePixelRatio*u,window.devicePixelRatio*u);const h=Fc.canvas(s);VF(e,i,r)&&(o.filter=zF),QU(e,h,o,i),o.restore();const m=Pe(e,t),p=document.createElement("canvas"),b=p.getContext("2d");if(ze(e)&&m){const[v,_,S,M]=Ne(e,t),w=Math.max(Ni(v,S),Ni(_,M));p.width=w*window.devicePixelRatio*u+a*u*10,p.height=w*window.devicePixelRatio*u+a*u*10,b.translate(p.width/2,p.height/2),b.rotate(e.angle),b.drawImage(s,-s.width/2,-s.height/2,s.width,s.height);const[,,,,T,A]=Ne(m,t);b.rotate(-e.angle);const I=(p.width-s.width)/2,R=(p.height-s.height)/2,D=p.width/2-(T-v)*window.devicePixelRatio*u-I-a*u,L=p.height/2-(A-_)*window.devicePixelRatio*u-R-a*u;b.translate(-D,-L),b.clearRect(-(m.width/2+Dn)*window.devicePixelRatio*u,-(m.height/2+Dn)*window.devicePixelRatio*u,(m.width+Dn*2)*window.devicePixelRatio*u,(m.height+Dn*2)*window.devicePixelRatio*u)}return{element:e,canvas:s,theme:r.theme,scale:u,zoomValue:n.value,canvasOffsetX:d,canvasOffsetY:f,boundTextElementVersion:((E=Pe(e,t))==null?void 0:E.version)||null,containingFrameOpacity:((y=Ur(e,t))==null?void 0:y.opacity)||100,boundTextCanvas:p,angle:e.angle,imageCrop:it(e)?e.crop:null}},qoe=14,XF=document.createElement("img");XF.src=`data:${be.svg},${encodeURIComponent('<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="image" class="svg-inline--fa fa-image fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="#888" d="M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48zM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56zM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48z"></path></svg>')}`;const jF=document.createElement("img");jF.src=`data:${be.svg},${encodeURIComponent('<svg viewBox="0 0 668 668" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2"><path d="M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48ZM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56ZM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48Z" style="fill:#888;fill-rule:nonzero" transform="matrix(.81709 0 0 .81709 124.825 145.825)"/><path d="M256 8C119.034 8 8 119.033 8 256c0 136.967 111.034 248 248 248s248-111.034 248-248S392.967 8 256 8Zm130.108 117.892c65.448 65.448 70 165.481 20.677 235.637L150.47 105.216c70.204-49.356 170.226-44.735 235.638 20.676ZM125.892 386.108c-65.448-65.448-70-165.481-20.677-235.637L361.53 406.784c-70.203 49.356-170.226 44.736-235.638-20.676Z" style="fill:#888;fill-rule:nonzero" transform="matrix(.30366 0 0 .30366 506.822 60.065)"/></svg>')}`;const Qoe=(e,t)=>{t.fillStyle="#E7E7E7",t.fillRect(0,0,e.width,e.height);const n=Math.min(e.width,e.height),i=Math.min(n,Math.min(n*.4,100));t.drawImage(e.status==="error"?jF:XF,e.width/2-i/2,e.height/2-i/2,i,i)},QU=(e,t,n,i,r)=>{var s;switch(e.type){case"rectangle":case"iframe":case"embeddable":case"diamond":case"ellipse":{n.lineJoin="round",n.lineCap="round",t.draw(Xt.get(e));break}case"arrow":case"line":{n.lineJoin="round",n.lineCap="round",Xt.get(e).forEach(o=>{t.draw(o)});break}case"freedraw":{n.save(),n.fillStyle=e.strokeColor;const o=tae(e),a=Xt.get(e);a&&t.draw(a),n.fillStyle=e.strokeColor,n.fill(o),n.restore();break}case"image":{const o=In(e)?(s=i.imageCache.get(e.fileId))==null?void 0:s.image:void 0;if(o!=null&&!(o instanceof Promise)){e.roundness&&n.roundRect&&(n.beginPath(),n.roundRect(0,0,e.width,e.height,Gs(Math.min(e.width,e.height),e)),n.clip());const{x:a,y:l,width:c,height:u}=e.crop?e.crop:{x:0,y:0,width:o.naturalWidth,height:o.naturalHeight};n.drawImage(o,a,l,c,u,0,0,e.width,e.height)}else Qoe(e,n);break}default:if(ue(e)){const o=IP(e.text),a=o&&!n.canvas.isConnected;a&&document.body.appendChild(n.canvas),n.canvas.setAttribute("dir",o?"rtl":"ltr"),n.save(),n.font=Ct(e),n.fillStyle=e.strokeColor,n.textAlign=e.textAlign;const l=e.text.replace(/\r\n?/g,`
`).split(`
`),c=e.textAlign==="center"?e.width/2:e.textAlign==="right"?e.width:0,u=zm(e.fontSize,e.lineHeight),d=bP(e.fontFamily,e.fontSize,u);for(let f=0;f<l.length;f++)n.fillText(l[f],c,f*u+d);n.restore(),a&&n.canvas.remove()}else throw new Error(`Unimplemented type ${e.type}`)}},EE=new WeakMap,pC=(e,t,n,i)=>{var d;const r=n?i.zoom:{value:1},s=EE.get(e),o=s&&s.zoomValue!==r.value&&!(i!=null&&i.shouldCacheIgnoreZoom),a=Pe(e,t),l=(a==null?void 0:a.version)||null,c=it(e)?e.crop:null,u=((d=Ur(e,t))==null?void 0:d.opacity)||100;if(!s||o||s.theme!==i.theme||s.boundTextElementVersion!==l||s.imageCrop!==c||s.containingFrameOpacity!==u||ze(e)&&a&&e.angle!==s.angle){const f=GF(e,t,r,n,i);return f?(EE.set(e,f),f):null}return s},I8=(e,t,n,i,r)=>{const s=e.element,o=n5(s),a=e.scale,[l,c,u,d]=Ne(s,r),f=((l+u)/2+i.scrollX)*window.devicePixelRatio,h=((c+d)/2+i.scrollY)*window.devicePixelRatio;t.save(),t.scale(1/window.devicePixelRatio,1/window.devicePixelRatio);const m=Pe(s,r);if(ze(s)&&m){const p=(e.boundTextCanvas.width-e.canvas.width)/2,b=(e.boundTextCanvas.height-e.canvas.height)/2;t.translate(f,h),t.drawImage(e.boundTextCanvas,-(u-l)/2*window.devicePixelRatio-p/a-o,-(d-c)/2*window.devicePixelRatio-b/a-o,e.boundTextCanvas.width/a,e.boundTextCanvas.height/a)}else t.translate(f,h),t.rotate(s.angle),"scale"in e.element&&!HF(s,n)&&t.scale(e.element.scale[0],e.element.scale[1]),t.translate(-f,-h),t.drawImage(e.canvas,(l+i.scrollX)*window.devicePixelRatio-o*e.scale/e.scale,(c+i.scrollY)*window.devicePixelRatio-o*e.scale/e.scale,e.canvas.width/e.scale,e.canvas.height/e.scale);t.restore()},Joe=(e,t,n,i)=>{t.save(),t.translate(e.x+n.scrollX,e.y+n.scrollY),t.fillStyle="rgba(0, 0, 200, 0.04)";const r=.5/n.zoom.value;t.fillRect(r,r,e.width,e.height),t.lineWidth=1/n.zoom.value,t.strokeStyle=i,t.strokeRect(r,r,e.width,e.height),t.restore()},iu=(e,t,n,i,r,s,o)=>{var l;const a=((l=o.openDialog)==null?void 0:l.name)==="elementLinkSelector"&&!o.selectedElementIds[e.id]&&!o.hoveredElementIds[e.id];switch(r.globalAlpha=$F(e,Ur(e,t),s.elementsPendingErasure,s.pendingFlowchartNodes,a?UP:1),e.type){case"magicframe":case"frame":{o.frameRendering.enabled&&o.frameRendering.outline&&(r.save(),r.translate(e.x+o.scrollX,e.y+o.scrollY),r.fillStyle="rgba(0, 0, 200, 0.04)",r.lineWidth=sn.strokeWidth/o.zoom.value,r.strokeStyle=sn.strokeColor,WU(e)&&(r.strokeStyle=o.theme===xe.LIGHT?"#7affd7":"#1d8264"),r.roundRect?(r.beginPath(),r.roundRect(0,0,e.width,e.height,sn.radius/o.zoom.value),r.stroke(),r.closePath()):r.strokeRect(0,0,e.width,e.height),r.restore());break}case"freedraw":{if(Xt.generateElementShape(e,null),s.isExporting){const[c,u,d,f]=Ne(e,t),h=(c+d)/2+o.scrollX,m=(u+f)/2+o.scrollY,p=(d-c)/2-(e.x-c),b=(f-u)/2-(e.y-u);r.save(),r.translate(h,m),r.rotate(e.angle),r.translate(-p,-b),QU(e,i,r,s),r.restore()}else{const c=pC(e,n,s,o);if(!c)return;I8(c,r,s,o,n)}break}case"rectangle":case"diamond":case"ellipse":case"line":case"arrow":case"image":case"text":case"iframe":case"embeddable":{if(Xt.generateElementShape(e,s),s.isExporting){const[c,u,d,f]=Ne(e,t),h=(c+d)/2+o.scrollX,m=(u+f)/2+o.scrollY;let p=(d-c)/2-(e.x-c),b=(f-u)/2-(e.y-u);if(ue(e)){const y=ui(e,t);if(ze(y)){const v=ce.getBoundTextElementPosition(y,e,t);p=(d-c)/2-(v.x-c),b=(f-u)/2-(v.y-u)}}r.save(),r.translate(h,m),VF(e,s,o)&&(r.filter="none");const E=Pe(e,t);if(ze(e)&&E){const y=document.createElement("canvas"),v=y.getContext("2d"),_=Math.max(Ni(c,d),Ni(u,f)),S=n5(e);y.width=_*o.exportScale+S*10*o.exportScale,y.height=_*o.exportScale+S*10*o.exportScale,v.translate(y.width/2,y.height/2),v.scale(o.exportScale,o.exportScale),p=e.width/2-(e.x-c),b=e.height/2-(e.y-u),v.rotate(e.angle);const M=Fc.canvas(y);v.translate(-p,-b),QU(e,M,v,s),v.translate(p,b),v.rotate(-e.angle);const[,,,,w,T]=Ne(E,t),A=(c+d)/2-w,I=(u+f)/2-T;v.translate(-A,-I),v.clearRect(-E.width/2,-E.height/2,E.width,E.height),r.scale(1/o.exportScale,1/o.exportScale),r.drawImage(y,-y.width/2,-y.height/2,y.width,y.height)}else r.rotate(e.angle),e.type==="image"&&r.scale(e.scale[0],e.scale[1]),r.translate(-p,-b),QU(e,i,r,s);r.restore()}else{const c=pC(e,n,s,o);if(!c)return;const u=r.imageSmoothingEnabled;if(!(o!=null&&o.shouldCacheIgnoreZoom)&&(!e.angle||rie(e.angle))&&(r.imageSmoothingEnabled=!1),e.id===o.croppingElementId&&it(c.element)&&c.element.crop!==null){r.save(),r.globalAlpha=.1;const d=GF(Yoe(c.element,t),n,o.zoom,s,o);d&&I8(d,r,s,o,n),r.restore()}I8(c,r,s,o,n),r.imageSmoothingEnabled=u}break}default:throw new Error(`Unimplemented type ${e.type}`)}r.globalAlpha=1},YF=new WeakMap([]);function eae(e){const t=WF(e),n=new Path2D(t);return YF.set(e,n),n}function tae(e){return YF.get(e)}function WF(e){const t=e.simulatePressure?e.points:e.points.length?e.points.map(([i,r],s)=>[i,r,e.pressures[s]]):[[0,0,.5]],n={simulatePressure:e.simulatePressure,size:e.strokeWidth*4.25,thinning:.6,smoothing:.5,streamline:.5,easing:i=>Math.sin(i*Math.PI/2),last:!!e.lastCommittedPoint};return iae(Goe(t,n))}function UC(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2]}const nae=/(\s?[A-Z]?,?-?[0-9]*\.[0-9]{0,2})(([0-9]|e|-)*)/g;function iae(e){if(!e.length)return"";const t=e.length-1;return e.reduce((n,i,r,s)=>(r===t?n.push(i,UC(i,s[0]),"L",s[0],"Z"):n.push(i,UC(i,s[r+1])),n),["M",e[0],"Q"]).join(" ").replace(nae,"$1")}const rae=e=>[8,8+e],KF=e=>[1.5,6+e];function sae(e){const t=e.roughness,n=Math.max(e.width,e.height),i=Math.min(e.width,e.height);return i>=20&&n>=50||i>=15&&e.roundness&&bE(e.type)||ke(e)&&n>=50?t:Math.min(t/(n<10?3:2),2.5)}const Ir=(e,t=!1)=>{const n={seed:e.seed,strokeLineDash:e.strokeStyle==="dashed"?rae(e.strokeWidth):e.strokeStyle==="dotted"?KF(e.strokeWidth):void 0,disableMultiStroke:e.strokeStyle!=="solid",strokeWidth:e.strokeStyle!=="solid"?e.strokeWidth+.5:e.strokeWidth,fillWeight:e.strokeWidth/2,hachureGap:e.strokeWidth*4,roughness:sae(e),stroke:e.strokeColor,preserveVertices:t||e.roughness<gP.cartoonist};switch(e.type){case"rectangle":case"iframe":case"embeddable":case"diamond":case"ellipse":return n.fillStyle=e.fillStyle,n.fill=Fs(e.backgroundColor)?void 0:e.backgroundColor,e.type==="ellipse"&&(n.curveFitting=1),n;case"line":case"freedraw":return Wa(e.points)&&(n.fillStyle=e.fillStyle,n.fill=e.backgroundColor==="transparent"?void 0:e.backgroundColor),n;case"arrow":return n;default:throw new Error(`Unimplemented type ${e.type}`)}},bC=(e,t,n)=>is(e)&&(t||lr(e)&&(n==null?void 0:n.get(e.id))!==!0)&&Fs(e.backgroundColor)&&Fs(e.strokeColor)?{...e,roughness:0,backgroundColor:"#d3d3d3",fillStyle:"solid"}:Cl(e)?{...e,strokeColor:Fs(e.strokeColor)?"#000000":e.strokeColor,backgroundColor:Fs(e.backgroundColor)?"#f4f4f6":e.backgroundColor}:e,yC=(e,t,n,i,r,s,o)=>{const a=wC(e,t,n,i);if(a===null)return[];const l=(c,u)=>{if(c===null)return[];const[,,d,f,h,m]=c;return[r.line(d,f,h,m,u)]};switch(i){case"dot":case"circle":case"circle_outline":{const[c,u,d]=a;return delete s.strokeLineDash,[r.circle(c,u,d,{...s,fill:i==="circle_outline"?o:e.strokeColor,fillStyle:"solid",stroke:e.strokeColor,roughness:Math.min(.5,s.roughness||0)})]}case"triangle":case"triangle_outline":{const[c,u,d,f,h,m]=a;return delete s.strokeLineDash,[r.polygon([[c,u],[d,f],[h,m],[c,u]],{...s,fill:i==="triangle_outline"?o:e.strokeColor,fillStyle:"solid",roughness:Math.min(1,s.roughness||0)})]}case"diamond":case"diamond_outline":{const[c,u,d,f,h,m,p,b]=a;return delete s.strokeLineDash,[r.polygon([[c,u],[d,f],[h,m],[p,b],[c,u]],{...s,fill:i==="diamond_outline"?o:e.strokeColor,fillStyle:"solid",roughness:Math.min(1,s.roughness||0)})]}case"crowfoot_one":return l(a,s);case"bar":case"arrow":case"crowfoot_many":case"crowfoot_one_or_many":default:{const[c,u,d,f,h,m]=a;if(e.strokeStyle==="dotted"){const p=KF(e.strokeWidth-1);s.strokeLineDash=[p[0],p[1]-1]}else delete s.strokeLineDash;return s.roughness=Math.min(1,s.roughness||0),[r.line(d,f,c,u,s),r.line(h,m,c,u,s),...i==="crowfoot_one_or_many"?l(wC(e,t,n,"crowfoot_one"),s):[]]}}},oae=(e,t,{isExporting:n,canvasBackgroundColor:i,embedsValidationStatus:r})=>{switch(e.type){case"rectangle":case"iframe":case"embeddable":{let s;if(e.roundness){const o=e.width,a=e.height,l=Gs(Math.min(o,a),e);s=t.path(`M ${l} 0 L ${o-l} 0 Q ${o} 0, ${o} ${l} L ${o} ${a-l} Q ${o} ${a}, ${o-l} ${a} L ${l} ${a} Q 0 ${a}, 0 ${a-l} L 0 ${l} Q 0 0, ${l} 0`,Ir(bC(e,n,r),!0))}else s=t.rectangle(0,0,e.width,e.height,Ir(bC(e,n,r),!1));return s}case"diamond":{let s;const[o,a,l,c,u,d,f,h]=ZF(e);if(e.roundness){const m=Gs(Math.abs(o-f),e),p=Gs(Math.abs(c-a),e);s=t.path(`M ${o+m} ${a+p} L ${l-m} ${c-p}
            C ${l} ${c}, ${l} ${c}, ${l-m} ${c+p}
            L ${u+m} ${d-p}
            C ${u} ${d}, ${u} ${d}, ${u-m} ${d-p}
            L ${f+m} ${h+p}
            C ${f} ${h}, ${f} ${h}, ${f+m} ${h-p}
            L ${o-m} ${a+p}
            C ${o} ${a}, ${o} ${a}, ${o+m} ${a+p}`,Ir(e,!0))}else s=t.polygon([[o,a],[l,c],[u,d],[f,h]],Ir(e));return s}case"ellipse":return t.ellipse(e.width/2,e.height/2,e.width,e.height,Ir(e));case"line":case"arrow":{let s;const o=Ir(e),a=e.points.length?e.points:[C(0,0)];if(fe(e)?a.every(l=>Math.abs(l[0])<=1e6&&Math.abs(l[1])<=1e6)?s=[t.path(aae(a,16),Ir(e,!0))]:(console.error("Elbow arrow with extreme point positions detected. Arrow not rendered.",e.id,JSON.stringify(a)),s=[]):e.roundness?s=[t.curve(a,o)]:o.fill?s=[t.polygon(a,o)]:s=[t.linearPath(a,o)],e.type==="arrow"){const{startArrowhead:l=null,endArrowhead:c="arrow"}=e;if(l!==null){const u=yC(e,s,"start",l,t,o,i);s.push(...u)}if(c!==null){const u=yC(e,s,"end",c,t,o,i);s.push(...u)}}return s}case"freedraw":{let s;if(eae(e),Wa(e.points)){const o=GP(e.points,.75);s=t.curve(o,{...Ir(e),stroke:"none"})}else s=null;return s}case"frame":case"magicframe":case"text":case"image":return null;default:return Ec(e,`generateElementShape(): Unimplemented type ${e==null?void 0:e.type}`),null}},aae=(e,t)=>{const n=[];for(let r=1;r<e.length-1;r+=1){const s=e[r-1],o=e[r+1],a=e[r],l=va(a,s),c=va(o,a),u=Math.min(t,mt(e[r],o)/2,mt(e[r],s)/2);l?s[0]<a[0]?n.push([e[r][0]-u,e[r][1]]):n.push([e[r][0]+u,e[r][1]]):s[1]<a[1]?n.push([e[r][0],e[r][1]-u]):n.push([e[r][0],e[r][1]+u]),n.push(e[r]),c?o[0]<a[0]?n.push([e[r][0]-u,e[r][1]]):n.push([e[r][0]+u,e[r][1]]):o[1]<a[1]?n.push([e[r][0],e[r][1]-u]):n.push([e[r][0],e[r][1]+u])}const i=[`M ${e[0][0]} ${e[0][1]}`];for(let r=0;r<n.length;r+=3)i.push(`L ${n[r][0]} ${n[r][1]}`),i.push(`Q ${n[r+1][0]} ${n[r+1][1]}, ${n[r+2][0]} ${n[r+2][1]}`);return i.push(`L ${e[e.length-1][0]} ${e[e.length-1][1]}`),i.join(" ")},Ri=class Ri{};F(Ri,"rg",new D0),F(Ri,"cache",new WeakMap),F(Ri,"get",t=>Ri.cache.get(t)),F(Ri,"set",(t,n)=>Ri.cache.set(t,n)),F(Ri,"delete",t=>Ri.cache.delete(t)),F(Ri,"destroy",()=>{Ri.cache=new WeakMap}),F(Ri,"generateElementShape",(t,n)=>{const i=n!=null&&n.isExporting?void 0:Ri.get(t);if(i!==void 0)return i;EE.delete(t);const r=oae(t,Ri.rg,n||{isExporting:!1,canvasBackgroundColor:Xe.white,embedsValidationStatus:null});return Ri.cache.set(t,r),r});let Xt=Ri;const Nf=class Nf{static getBounds(t,n){const i=Nf.boundsCache.get(t);if(i!=null&&i.version&&i.version===t.version&&!jt(t))return i.bounds;const r=Nf.calculateBounds(t,n);return Nf.boundsCache.set(t,{version:t.version,bounds:r}),r}static calculateBounds(t,n){let i;const[r,s,o,a,l,c]=Ne(t,n);if(bs(t)){const[u,d,f,h]=$9(t.points.map(([m,p])=>q(C(m,p),C(l-t.x,c-t.y),t.angle)));return[u+t.x,d+t.y,f+t.x,h+t.y]}else if(ke(t))i=hae(t,l,c,n);else if(t.type==="diamond"){const[u,d]=q(C(l,s),C(l,c),t.angle),[f,h]=q(C(l,a),C(l,c),t.angle),[m,p]=q(C(r,c),C(l,c),t.angle),[b,E]=q(C(o,c),C(l,c),t.angle),y=Math.min(u,f,m,b),v=Math.min(d,h,p,E),_=Math.max(u,f,m,b),S=Math.max(d,h,p,E);i=[y,v,_,S]}else if(t.type==="ellipse"){const u=(o-r)/2,d=(a-s)/2,f=Math.cos(t.angle),h=Math.sin(t.angle),m=Math.hypot(u*f,d*h),p=Math.hypot(d*f,u*h);i=[l-m,c-p,l+m,c+p]}else{const[u,d]=q(C(r,s),C(l,c),t.angle),[f,h]=q(C(r,a),C(l,c),t.angle),[m,p]=q(C(o,a),C(l,c),t.angle),[b,E]=q(C(o,s),C(l,c),t.angle),y=Math.min(u,f,m,b),v=Math.min(d,h,p,E),_=Math.max(u,f,m,b),S=Math.max(d,h,p,E);i=[y,v,_,S]}return i}};F(Nf,"boundsCache",new WeakMap);let vE=Nf;const Ne=(e,t,n=!1)=>{if(bs(e))return cae(e);if(ke(e))return ce.getElementAbsoluteCoords(e,t,n);if(ue(e)){const i=t?ui(e,t):null;if(ze(i)){const{x:r,y:s}=ce.getBoundTextElementPosition(i,e,t);return[r,s,r+e.width,s+e.height,r+e.width/2,s+e.height/2]}}return[e.x,e.y,e.x+e.width,e.y+e.height,e.x+e.width/2,e.y+e.height/2]},EC=(e,t)=>{const[n,i,r,s,o,a]=Ne(e,t),l=C(o,a);if(ke(e)||bs(e)){const E=[];let y=0;for(;y<e.points.length-1;)E.push(_e(q(C(e.points[y][0]+e.x,e.points[y][1]+e.y),l,e.angle),q(C(e.points[y+1][0]+e.x,e.points[y+1][1]+e.y),l,e.angle))),y++;return E}const[c,u,d,f,h,m,p,b]=[[n,i],[r,i],[n,s],[r,s],[o,i],[o,s],[n,a],[r,a]].map(E=>q(E,l,e.angle));return e.type==="diamond"?[_e(h,p),_e(h,b),_e(m,p),_e(m,b)]:e.type==="ellipse"?[_e(h,p),_e(h,b),_e(m,p),_e(m,b),_e(h,p),_e(h,b),_e(m,p),_e(m,b)]:[_e(c,u),_e(d,f),_e(c,d),_e(u,f),_e(c,b),_e(d,b),_e(u,p),_e(f,p)]},ZF=e=>{const t=Math.floor(e.width/2)+1,n=0,i=e.width,r=Math.floor(e.height/2)+1,s=t,o=e.height;return[t,n,i,r,s,o,0,r]},vC=(e,t,n,i,r)=>{const s=1-e;return Math.pow(s,3)*t+3*Math.pow(s,2)*e*n+3*s*Math.pow(e,2)*i+Math.pow(e,3)*r},_C=(e,t,n,i)=>{const r=t-e,s=n-t,o=i-n,a=3*r-6*s+3*o,l=6*s-6*r,c=3*r,u=l*l-4*a*c;if(!(u>=0))return!1;let f=null,h=null,m=1/0,p=1/0;return a===0?m=p=-c/l:(m=(-l+Math.sqrt(u))/(2*a),p=(-l-Math.sqrt(u))/(2*a)),m>=0&&m<=1&&(f=vC(m,e,t,n,i)),p>=0&&p<=1&&(h=vC(p,e,t,n,i)),[f,h]},lae=(e,t,n,i)=>{const r=_C(e[0],t[0],n[0],i[0]),s=_C(e[1],t[1],n[1],i[1]);let o=Math.min(e[0],i[0]),a=Math.max(e[0],i[0]);if(r){const u=r.filter(d=>d!==null);o=Math.min(o,...u),a=Math.max(a,...u)}let l=Math.min(e[1],i[1]),c=Math.max(e[1],i[1]);if(s){const u=s.filter(d=>d!==null);l=Math.min(l,...u),c=Math.max(c,...u)}return[o,l,a,c]},i5=(e,t)=>{let n=C(0,0);const{minX:i,minY:r,maxX:s,maxY:o}=e.reduce((a,{op:l,data:c})=>{if(l==="move"){const u=d9(c);mr(u!=null,"Op data is not a point"),n=u}else if(l==="bcurveTo"){const u=C(c[0],c[1]),d=C(c[2],c[3]),f=C(c[4],c[5]),h=t?t(u):u,m=t?t(d):d,p=t?t(f):f,b=t?t(n):n;n=f;const[E,y,v,_]=lae(b,h,m,p);a.minX=Math.min(a.minX,E),a.minY=Math.min(a.minY,y),a.maxX=Math.max(a.maxX,v),a.maxY=Math.max(a.maxY,_)}return a},{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0});return[i,r,s,o]},$9=e=>{let t=1/0,n=1/0,i=-1/0,r=-1/0;for(const[s,o]of e)t=Math.min(t,s),n=Math.min(n,o),i=Math.max(i,s),r=Math.max(r,o);return[t,n,i,r]},cae=e=>{const[t,n,i,r]=$9(e.points),s=t+e.x,o=n+e.y,a=i+e.x,l=r+e.y;return[s,o,a,l,(s+a)/2,(o+l)/2]},uae=e=>{switch(e){case"arrow":return 25;case"diamond":case"diamond_outline":return 12;case"crowfoot_many":case"crowfoot_one":case"crowfoot_one_or_many":return 20;default:return 15}},dae=e=>{switch(e){case"bar":return 90;case"arrow":return 20;default:return 25}},wC=(e,t,n,i)=>{if(t.length<1)return null;const r=Bc(t[0]);if(r.length<1)return null;const s=n==="start"?1:r.length-1,o=r[s].data;mr(o.length===6,"Op data length is not 6");const a=C(o[4],o[5]),l=C(o[2],o[3]),c=C(o[0],o[1]),u=r[s-1];let d=C(0,0);if(u.op==="move"){const V=d9(u.data);mr(V!=null,"Op data is not a point"),d=V}else u.op==="bcurveTo"&&(d=C(u.data[4],u.data[5]));const f=(V,H)=>Math.pow(1-V,3)*a[H]+3*V*Math.pow(1-V,2)*l[H]+3*Math.pow(V,2)*(1-V)*c[H]+d[H]*Math.pow(V,3),[h,m]=n==="start"?d:a,[p,b]=[f(.3,0),f(.3,1)],E=Math.hypot(h-p,m-b),y=(h-p)/E,v=(m-b)/E,_=uae(i);let S=0;{const[V,H]=n==="end"?e.points[e.points.length-1]:e.points[0],[$,j]=e.points.length>1?n==="end"?e.points[e.points.length-2]:e.points[1]:[0,0];S=Math.hypot(V-$,H-j)}const w=Math.min(_,S*(i==="diamond"||i==="diamond_outline"?.25:.5)),T=h-y*w,A=m-v*w;if(i==="dot"||i==="circle"||i==="circle_outline"){const V=Math.hypot(A-m,T-h)+e.strokeWidth-2;return[h,m,V]}const I=dae(i);if(i==="crowfoot_many"||i==="crowfoot_one_or_many"){const[V,H]=q(C(h,m),C(T,A),Lu(-I)),[$,j]=q(C(h,m),C(T,A),Lu(I));return[T,A,V,H,$,j]}const[R,D]=q(C(T,A),C(h,m),-I*Math.PI/180),[L,G]=q(C(T,A),C(h,m),Lu(I));if(i==="diamond"||i==="diamond_outline"){let V,H;if(n==="start"){const[$,j]=e.points.length>1?e.points[1]:[0,0];[V,H]=q(C(h+w*2,m),C(h,m),Math.atan2(j-m,$-h))}else{const[$,j]=e.points.length>1?e.points[e.points.length-2]:[0,0];[V,H]=q(C(h-w*2,m),C(h,m),Math.atan2(m-j,h-$))}return[h,m,R,D,V,H,L,G]}return[h,m,R,D,L,G]},fae=e=>{const t=Fc.generator(),n=Ir(e),i=e.roundness?"curve":n.fill?"polygon":"linearPath";return t[i](e.points,n)},hae=(e,t,n,i)=>{var d;const r=Pe(e,i);if(e.points.length<2){const[f,h]=e.points[0],[m,p]=q(C(e.x+f,e.y+h),C(t,n),e.angle);let b=[m,p,m,p];if(r){const E=ce.getMinMaxXYWithBoundText(e,i,[m,p,m,p],r);b=[E[0],E[1],E[2],E[3]]}return b}const o=((d=Xt.get(e))==null?void 0:d[0])??fae(e),a=Bc(o),c=i5(a,([f,h])=>q(C(e.x+f,e.y+h),C(t,n),e.angle));let u=[c[0],c[1],c[2],c[3]];if(r){const f=ce.getMinMaxXYWithBoundText(e,i,u,r);u=[f[0],f[1],f[2],f[3]]}return u},Js=(e,t)=>vE.getBounds(e,t),_t=(e,t)=>{if(!e.length)return[0,0,0,0];let n=1/0,i=-1/0,r=1/0,s=-1/0;const o=t||Se(e);return e.forEach(a=>{const[l,c,u,d]=Js(a,o);n=Math.min(n,l),r=Math.min(r,c),i=Math.max(i,u),s=Math.max(s,d)}),[n,r,i,s]},G9=(e,t)=>{const[n,i,r,s]=_t(e);return[n+t.x,i+t.y,r+t.x,s+t.y]},nc=(e,t,n,i)=>{if(!(ke(e)||bs(e)))return[e.x,e.y,e.x+t,e.y+n];const r=ub(0,t,ub(1,n,e.points,i),i);let s;if(bs(e))s=$9(r);else{const u=Fc.generator(),d=e.roundness?u.curve(r,Ir(e)):u.linearPath(r,Ir(e)),f=Bc(d);s=i5(f)}const[o,a,l,c]=s;return[o+e.x,a+e.y,l+e.x,c+e.y]},TC=(e,t)=>{const n=Fc.generator(),i=e.roundness==null?n.linearPath(t,Ir(e)):n.curve(t,Ir(e)),r=Bc(i),[s,o,a,l]=i5(r);return[s+e.x,o+e.y,a+e.x,l+e.y]},gae=(e,t)=>{if(!e.length)return[0,0,0,0];let n=1/0,i=e[0];const r=Se(e);return e.forEach(s=>{const[o,a,l,c]=Js(s,r),u=mt(C((o+l)/2,(a+c)/2),C(t.x,t.y));u<n&&(n=u,i=s)}),Js(i,r)},Xs=e=>{const[t,n,i,r]=_t(e);return{minX:t,minY:n,maxX:i,maxY:r,width:i-t,height:r-n,midX:(t+i)/2,midY:(n+r)/2}},qF=({scrollX:e,scrollY:t,width:n,height:i,zoom:r})=>[-e,-t,-e+n/r.value,-t+i/r.value],QF=e=>C(e[0]+(e[2]-e[0])/2,e[1]+(e[3]-e[1])/2),mae=(e,t)=>{if(e==null||t==null)return!1;const[n,i,r,s]=e,[o,a,l,c]=t;return n<l&&r>o&&i<c&&s>a},JF=e=>{const{angle:t,width:n,height:i,x:r,y:s}=e,o=r+n/2,a=s+i/2,l=C(o,a);let c;return e.type==="diamond"?c=xx(q(C(o,s),l,t),q(C(r+n,a),l,t),q(C(o,s+i),l,t),q(C(r,a),l,t)):c=xx(q(C(r,s),l,t),q(C(r+n,s),l,t),q(C(r+n,s+i),l,t),q(C(r,s+i),l,t)),{type:"polygon",data:c}},pae=(e,t,n=10)=>{let[i,r,s,o,a,l]=Ne(e,t,!0);i-=n,s+=n,r-=n,o+=n;const c=C(a,l),u=q(C(i,r),c,e.angle),d=q(C(s,r),c,e.angle),f=q(C(i,o),c,e.angle),h=q(C(s,o),c,e.angle);return{type:"polygon",data:[u,d,h,f]}},Uae=e=>{const{width:t,height:n,angle:i,x:r,y:s}=e;return{type:"ellipse",data:{center:C(r+t/2,s+n/2),angle:i,halfWidth:t/2,halfHeight:n/2}}},Bc=e=>{if(!e)return[];for(const t of e.sets)if(t.type==="path")return t.ops;return e.sets[0].ops},bae=(e,t=C(0,0),n,i)=>{const r=l=>q(C(l[0]+t[0],l[1]+t[1]),i,n),s=Bc(e),o=[];let a=C(0,0);for(const l of s){if(l.op==="move"){const c=d9(l.data);mr(c!=null,"Ops data is not a point"),a=r(c)}if(l.op==="bcurveTo"){const c=r(C(l.data[0],l.data[1])),u=r(C(l.data[2],l.data[3])),d=r(C(l.data[4],l.data[5]));o.push(Ca(a,c,u,d)),a=d}}return{type:"polycurve",data:o}},yae=e=>{let t=e[0];const n=[];for(let i=1;i<e.length;i++){const r=e[i];n.push(_e(t,r)),t=r}return n},Eae=(e,t,n=!1)=>{const i=s=>q(He(zl(ve(s),Ui(e.x,e.y))),t,e.angle),r=yae(e.points.map(s=>i(s)));return n?{type:"polygon",data:ab(r.flat())}:{type:"polyline",data:r}},vae=(e,t,n=C(0,0),i,r)=>{const s=u=>q(C(u[0]+n[0],u[1]+n[1]),r,i);if(e.roundness===null)return{type:"polygon",data:ab(e.points.map(u=>s(u)))};const o=Bc(t),a=[];let l=!1;for(const u of o)u.op==="move"?(l=!l,l&&a.push(C(u.data[0],u.data[1]))):u.op==="bcurveTo"?l&&(a.push(C(u.data[0],u.data[1])),a.push(C(u.data[2],u.data[3])),a.push(C(u.data[4],u.data[5]))):u.op==="lineTo"&&l&&a.push(C(u.data[0],u.data[1]));const c=y9(a,10,5).map(u=>s(u));return{type:"polygon",data:ab(c)}},_ae=(e,t)=>{const{angle:n,halfWidth:i,halfHeight:r,center:s}=t,o=i,a=r,l=zl(ve(e),Zt(ve(s),-1)),[c,u]=q(He(l),C(0,0),-n),d=Math.abs(c),f=Math.abs(u);let h=.707,m=.707;for(let E=0;E<3;E++){const y=o*h,v=a*m,_=(o*o-a*a)*h**3/o,S=(a*a-o*o)*m**3/a,M=y-_,w=v-S,T=d-_,A=f-S,I=Math.hypot(w,M),R=Math.hypot(A,T);h=Math.min(1,Math.max(0,(T*I/R+_)/o)),m=Math.min(1,Math.max(0,(A*I/R+S)/a));const D=Math.hypot(m,h);h/=D,m/=D}const[p,b]=[o*h*Math.sign(c),a*m*Math.sign(u)];return mt(C(c,u),C(p,b))},wae=(e,t,n=yc)=>_ae(e,t)<=n,Tae=(e,t)=>{const{center:n,angle:i,halfWidth:r,halfHeight:s}=t,o=zl(ve(e),Zt(ve(n),-1)),[a,l]=q(He(o),C(0,0),-i);return a/r*(a/r)+l/s*(l/s)<=1},_E=(e,t,n=0)=>{switch(t.type){case"polygon":return gie(e,t.data,n);case"ellipse":return wae(e,t.data,n);case"line":return ed(e,t.data,n);case"polyline":return tB(e,t.data,n);case"curve":return eB(e,t.data,n);case"polycurve":return Sae(e,t.data,n);default:throw Error(`shape ${t} is not implemented`)}},Sb=(e,t)=>{switch(t.type){case"polygon":return Cx(e,t.data);case"line":return!1;case"curve":return!1;case"ellipse":return Tae(e,t.data);case"polyline":{const n=ab(t.data.flat());return Cx(e,n)}case"polycurve":return!1;default:throw Error(`shape ${t} is not implemented`)}},Sae=(e,t,n)=>t.some(i=>eB(e,i,n)),Iae=e=>{const[t,n,i,r]=e;return(s,o)=>Math.pow(1-s,3)*r[o]+3*s*Math.pow(1-s,2)*i[o]+3*Math.pow(s,2)*(1-s)*n[o]+t[o]*Math.pow(s,3)},xae=(e,t=10)=>{const n=Iae(e);let i=[n(0,0),n(0,1)];const r=[];let s=0;const o=1/t;for(let a=0;a<t;a++)if(s+=o,s<=1){const l=C(n(s,0),n(s,1));r.push(_e(i,l)),i=l}return r},eB=(e,t,n)=>tB(e,xae(t),n),tB=(e,t,n=1e-4)=>t.some(i=>ed(e,i,n)),eo=(e,{x:t,y:n,strokeColor:i=un.strokeColor,backgroundColor:r=un.backgroundColor,fillStyle:s=un.fillStyle,strokeWidth:o=un.strokeWidth,strokeStyle:a=un.strokeStyle,roughness:l=un.roughness,opacity:c=un.opacity,width:u=0,height:d=0,angle:f=0,groupIds:h=[],frameId:m=null,index:p=null,roundness:b=null,boundElements:E=null,link:y=null,locked:v=un.locked,..._})=>((t<-1e6||t>1e6||n<-1e6||n>1e6||u<-1e6||u>1e6||d<-1e6||d>1e6)&&console.error("New element size or position is too large",{x:t,y:n,width:u,height:d,points:_.points}),{id:_.id||zr(),type:e,x:t,y:n,width:u,height:d,angle:f,strokeColor:i,backgroundColor:r,fillStyle:s,strokeWidth:o,strokeStyle:a,roughness:l,opacity:c,groupIds:h,frameId:m,index:p,roundness:b,seed:_.seed??Ga(),version:_.version||1,versionNonce:_.versionNonce??0,isDeleted:!1,boundElements:E,updated:Jh(),link:y,locked:v,customData:_.customData}),Za=e=>eo(e.type,e),SC=e=>eo("embeddable",e),Cae=e=>({...eo("iframe",e)}),X9=e=>Ce({...eo("frame",e),type:"frame",name:(e==null?void 0:e.name)||null},{}),wE=e=>Ce({...eo("magicframe",e),type:"magicframe",name:(e==null?void 0:e.name)||null},{}),nB=(e,t)=>({x:e.textAlign==="center"?t.width/2:e.textAlign==="right"?t.width:0,y:e.verticalAlign==="middle"?t.height/2:0}),Hr=e=>{const t=e.fontFamily||Pc,n=e.fontSize||ul,i=e.lineHeight||Ju(t),r=Eh(e.text),s=Hi(r,Ct({fontFamily:t,fontSize:n}),i),o=e.textAlign||Dm,a=e.verticalAlign||eb,l=nB({textAlign:o,verticalAlign:a},s),c={...eo("text",e),text:r,fontSize:n,fontFamily:t,textAlign:o,verticalAlign:a,x:e.x-l.x,y:e.y-l.y,width:s.width,height:s.height,containerId:e.containerId||null,originalText:e.originalText??r,autoResize:e.autoResize??!0,lineHeight:i};return Ce(c,{})},Aae=(e,t,n)=>{let{width:i,height:r}=Hi(n,Ct(e),e.lineHeight);e.autoResize||(i=e.width);const{textAlign:s,verticalAlign:o}=e;let a,l;if(s==="center"&&o===kr.MIDDLE&&!e.containerId&&e.autoResize){const c=Hi(e.text,Ct(e),e.lineHeight),u=nB(e,{width:i-c.width,height:r-c.height});a=e.x-u.x,l=e.y-u.y}else{const[c,u,d,f]=Ne(e,t),[h,m,p,b]=nc(e,i,r,!1),E=(c-h)/2,y=(u-m)/2,v=(d-p)/2,_=(f-b)/2;[a,l]=Mae({s:!0,e:s==="center"||s==="left",w:s==="center"||s==="right"},e.x,e.y,e.angle,E,y,v,_)}return{width:i,height:r,x:Number.isFinite(a)?a:e.x,y:Number.isFinite(l)?l:e.y}},Mae=(e,t,n,i,r,s,o,a)=>{const l=Math.cos(i),c=Math.sin(i);return e.e&&e.w?t+=r+o:e.e?(t+=r*(1+l),n+=r*c,t+=o*(1-l),n+=o*-c):e.w&&(t+=r*(1-l),n+=r*-c,t+=o*(1+l),n+=o*c),e.n&&e.s?n+=s+a:e.n?(t+=s*c,n+=s*(1-l),t+=a*-c,n+=a*(1+l)):(t+=s*-c,n+=s*(1+l),t+=a*c,n+=a*(1-l)),[t,n]},iB=(e,t,n,i=e.text)=>{if(e.isDeleted)return;(t||!e.autoResize)&&(i=Id(i,Ct(e),t?ja(t,e):e.width));const r=Aae(e,n,i);return{text:i,...r}},Rae=e=>({...eo(e.type,e),points:e.points||[],pressures:e.pressures||[],simulatePressure:e.simulatePressure,lastCommittedPoint:null}),Pu=e=>({...eo(e.type,e),points:e.points||[],lastCommittedPoint:null,startBinding:null,endBinding:null,startArrowhead:null,endArrowhead:null}),j9=e=>e.elbowed?{...eo(e.type,e),points:e.points||[],lastCommittedPoint:null,startBinding:null,endBinding:null,startArrowhead:e.startArrowhead||null,endArrowhead:e.endArrowhead||null,elbowed:!0,fixedSegments:e.fixedSegments||[],startIsSpecial:!1,endIsSpecial:!1}:{...eo(e.type,e),points:e.points||[],lastCommittedPoint:null,startBinding:null,endBinding:null,startArrowhead:e.startArrowhead||null,endArrowhead:e.endArrowhead||null,elbowed:!1},rB=e=>({...eo("image",e),strokeColor:"transparent",status:e.status??"pending",fileId:e.fileId??null,scale:e.scale??[1,1],crop:e.crop??null}),kae=e=>{const t=e.slice(),n=new Set,i=s=>{var c,u,d;const o=(u=(c=s[0])==null?void 0:c.groupIds)==null?void 0:u.join(""),a=[s[0]],l=[];for(const f of s.slice(1))((d=f.groupIds)==null?void 0:d.join(""))===o?a.push(f):l.push(f);return l.length?[...a,...i(l)]:a},r=new Map;return t.forEach((s,o)=>{var a;if(!r.has(s.id))if((a=s.groupIds)!=null&&a.length){const l=s.groupIds[s.groupIds.length-1],c=t.slice(o).filter(u=>{var f;const d=(f=u==null?void 0:u.groupIds)==null?void 0:f.some(h=>h===l);return d&&r.set(u.id,!0),d});for(const u of i(c))n.add(u)}else n.add(s)}),n.size!==e.length?(console.error("normalizeGroupElementOrder: lost some elements... bailing!"),e):[...n]},Lae=e=>{const t=Cie(e),n=e.slice(),i=new Set;return n.forEach((r,s)=>{var o,a;if(r)if((o=r.boundElements)!=null&&o.length)i.add(r),n[s]=null,r.boundElements.forEach(l=>{const c=t.get(l.id);c&&l.type==="text"&&(i.add(c[0]),n[c[1]]=null)});else if(r.type==="text"&&r.containerId){const l=t.get(r.containerId);(a=l==null?void 0:l[0].boundElements)!=null&&a.find(c=>c.id===r.id)||(i.add(r),n[s]=null)}else i.add(r),n[s]=null}),i.size!==e.length?(console.error("normalizeBoundElementsOrder: lost some elements... bailing!"),e):[...i]},Dae=e=>Lae(kae(e)),Nae=(e,t,n,i,r)=>{let s=xd(n);return s.id=zr(),s.updated=Jh(),r&&(s.seed=Ga(),Gm(s)),s.groupIds=Toe(s.groupIds,e,o=>(t.has(o)||t.set(o,zr()),t.get(o))),i&&(s=Object.assign(s,i)),s},Ib=e=>{let{elements:t}=e;const n="appState"in e?e.appState:{editingGroupId:null,selectedGroupIds:{}},i=e.type==="in-place"?e.reverseOrder:!1,r=new Map,s=new Map,o=[],a=[],l=new Map,c=new Map,u=Se(t),d=e.type==="in-place"?e.idsOfElementsToDuplicate:new Map(t.map(b=>[b.id,b]));if(e.type==="in-place")for(const b of Object.keys(e.appState.selectedGroupIds))t.filter(E=>{var y;return(y=E.groupIds)==null?void 0:y.includes(b)}).forEach(E=>d.set(E.id,E));t=Dae(t);const f=t.slice(),h=b=>{const y=Qp(b).reduce((v,_)=>{var M;if(r.has(_.id))return v;r.set(_.id,!0);const S=Nae(n.editingGroupId,s,_,(M=e.overrides)==null?void 0:M.call(e,_),e.randomizeSeed);return r.set(S.id,!0),c.set(S.id,S),l.set(_.id,S.id),a.push(_),o.push(S),v.push(S),v},[]);return Array.isArray(b)?y:y[0]||null},m=(b,E)=>{if(E){if(i&&b<1){f.unshift(...Qp(E));return}if(!i&&b>f.length-1){f.push(...Qp(E));return}f.splice(b+(i?0:1),0,...Qp(E))}},p=new Set(t.filter(b=>d.has(b.id)&&Ie(b)).map(b=>b.id));for(const b of t){if(r.has(b.id)||!d.has(b.id))continue;const E=xF(n,b);if(E){const y=Gt(t,E).flatMap(_=>Ie(_)?[...Ho(t,_.id),_]:[_]),v=i?f.findIndex(_=>{var S;return(S=_.groupIds)==null?void 0:S.includes(E)}):lu(f,_=>{var S;return(S=_.groupIds)==null?void 0:S.includes(E)});m(v,h(y));continue}if(!(b.frameId&&p.has(b.frameId))){if(Ie(b)){const y=b.id,v=Ho(t,y),_=lu(f,S=>S.frameId===y||S.id===y);m(_,h([...v,b]));continue}if(ys(b)){const y=Pe(b,u),v=lu(f,_=>_.id===b.id||"containerId"in _&&_.containerId===b.id);y?m(v+(i?-1:0),h([b,y])):m(v,h(b));continue}if(jt(b)){const y=ui(b,u),v=lu(f,_=>_.id===b.id||_.id===(y==null?void 0:y.id));y?m(v,h([y,b])):m(v,h(b));continue}m(lu(f,y=>y.id===b.id),h(b))}}return Bse(o,l,c),hoe(f,a,l),{newElements:o,elementsWithClones:f}},TE=(e,t=0)=>{if(e==null||typeof e!="object")return e;if(Object.prototype.toString.call(e)==="[object Object]"){const i=typeof e.constructor=="function"?Object.create(Object.getPrototypeOf(e)):{};for(const r in e)if(e.hasOwnProperty(r)){if(t===0&&(r==="shape"||r==="canvas"))continue;i[r]=TE(e[r],t+1)}return i}if(Array.isArray(e)){let i=e.length;const r=new Array(i);for(;i--;)r[i]=TE(e[i],t+1);return r}return e},xd=e=>TE(e),fo=new Map,Oae=/^(?:http(?:s)?:\/\/)?(?:www\.)?youtu(?:be\.com|\.be)\/(embed\/|watch\?v=|shorts\/|playlist\?list=|embed\/videoseries\?list=)?([a-zA-Z0-9_-]+)(?:\?t=|&t=|\?start=|&start=)?([a-zA-Z0-9_-]+)?[^\s]*$/,Pae=/^(?:http(?:s)?:\/\/)?(?:(?:w){3}\.)?(?:player\.)?vimeo\.com\/(?:video\/)?([^?\s]+)(?:\?.*)?$/,Fae=/^https:\/\/(?:www\.)?figma\.com/,IC=/^https:\/\/gist\.github\.com\/([\w_-]+)\/([\w_-]+)/,Bae=/^<script[\s\S]*?\ssrc=["'](https:\/\/gist\.github\.com\/.*?)\.js["']/i,xC=/(?:https?:\/\/)?(?:(?:w){3}\.)?(?:twitter|x)\.com\/[^/]+\/status\/(\d+)/,zae=/^<blockquote[\s\S]*?\shref=["'](https?:\/\/(?:twitter|x)\.com\/[^"']*)/i,Hae=/^https:\/\/(?:www\.)?val\.town\/(v|embed)\/[a-zA-Z_$][0-9a-zA-Z_$]+\.[a-zA-Z_$][0-9a-zA-Z_$]+/,Vae=/^<(?:iframe|blockquote)[\s\S]*?\s(?:src|href)=["']([^"']*)["'][\s\S]*?>$/i,CC=/giphy.com\/(?:clips|embed|gifs)\/[a-zA-Z0-9]*?-?([a-zA-Z0-9]+)(?:[^a-zA-Z0-9]|$)/,AC=/^(?:http(?:s)?:\/\/)?(?:www\.)?reddit\.com\/r\/([a-zA-Z0-9_]+)\/comments\/([a-zA-Z0-9_]+)\/([a-zA-Z0-9_]+)\/?(?:\?[^#\s]*)?(?:#[^\s]*)?$/,$ae=/^<blockquote[\s\S]*?\shref=["'](https?:\/\/(?:www\.)?reddit\.com\/[^"']*)/i,SE=new Set(["youtube.com","youtu.be","vimeo.com","player.vimeo.com","figma.com","link.excalidraw.com","gist.github.com","twitter.com","x.com","*.simplepdf.eu","stackblitz.com","val.town","giphy.com","reddit.com"]),MC=new Set(["youtube.com","youtu.be","vimeo.com","player.vimeo.com","figma.com","twitter.com","x.com","*.simplepdf.eu","stackblitz.com","reddit.com"]),Y1=e=>`<html><body>${e}</body></html>`,kf=e=>{if(!e)return null;if(fo.has(e))return fo.get(e);const t=e,n=MC.has(IE(e,MC)||"");let i="generic",r={w:560,h:840};const s=e.match(Oae);if(s!=null&&s[2]){const c=s[3]?`&start=${s[3]}`:"",u=e.includes("shorts");switch(i="video",s[1]){case"embed/":case"watch?v=":case"shorts/":e=`https://www.youtube.com/embed/${s[2]}?enablejsapi=1${c}`;break;case"playlist?list=":case"embed/videoseries?list=":e=`https://www.youtube.com/embed/videoseries?list=${s[2]}&enablejsapi=1${c}`;break;default:e=`https://www.youtube.com/embed/${s[2]}?enablejsapi=1${c}`;break}return r=u?{w:315,h:560}:{w:560,h:315},fo.set(t,{link:e,intrinsicSize:r,type:i,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:r,type:i,sandbox:{allowSameOrigin:n}}}const o=e.match(Pae);if(o!=null&&o[1]){const c=o==null?void 0:o[1],u=/^\d+$/.test(c)?void 0:new URIError("Invalid embed link format");return i="video",e=`https://player.vimeo.com/video/${c}?api=1`,r={w:560,h:315},fo.set(t,{link:e,intrinsicSize:r,type:i,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:r,type:i,error:u,sandbox:{allowSameOrigin:n}}}if(e.match(Fae))return i="generic",e=`https://www.figma.com/embed?embed_host=share&url=${encodeURIComponent(e)}`,r={w:550,h:550},fo.set(t,{link:e,intrinsicSize:r,type:i,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:r,type:i,sandbox:{allowSameOrigin:n}};const l=e.match(Hae);if(l)return e=l[1]==="embed"?l[0]:l[0].replace("/v","/embed"),fo.set(t,{link:e,intrinsicSize:r,type:i,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:r,type:i,sandbox:{allowSameOrigin:n}};if(xC.test(e)){const c=e.match(xC)[1],u=XU(`https://twitter.com/x/status/${c}`),d={type:"document",srcdoc:f=>Y1(`<blockquote class="twitter-tweet" data-dnt="true" data-theme="${f}"><a href="${u}"></a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"><\/script>`),intrinsicSize:{w:480,h:480},sandbox:{allowSameOrigin:n}};return fo.set(t,d),d}if(AC.test(e)){const[,c,u,d]=e.match(AC),f=XU(`https://reddit.com/r/${c}/comments/${u}/${d}`),h={type:"document",srcdoc:m=>Y1(`<blockquote class="reddit-embed-bq" data-embed-theme="${m}"><a href="${f}"></a><br></blockquote><script async="" src="https://embed.reddit.com/widgets.js" charset="UTF-8"><\/script>`),intrinsicSize:{w:480,h:480},sandbox:{allowSameOrigin:n}};return fo.set(t,h),h}if(IC.test(e)){const[,c,u]=e.match(IC),d=XU(`https://gist.github.com/${c}/${u}`),f={type:"document",srcdoc:()=>Y1(`
          <script src="${d}.js"><\/script>
          <style type="text/css">
            * { margin: 0px; }
            table, .gist { height: 100%; }
            .gist .gist-file { height: calc(100vh - 2px); padding: 0px; display: grid; grid-template-rows: 1fr auto; }
          </style>
        `),intrinsicSize:{w:550,h:720},sandbox:{allowSameOrigin:n}};return fo.set(e,f),f}return fo.set(e,{link:e,intrinsicSize:r,type:i,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:r,type:i,sandbox:{allowSameOrigin:n}}},sB=e=>{let t;Cl(e)?t="IFrame element":t=!e.link||(e==null?void 0:e.link)===""?"Empty Web-Embed":e.link;const n=Math.max(Math.min(e.width/2,e.width/t.length),e.width/30),i=It.Helvetica,r=Ct({fontSize:n,fontFamily:i});return Hr({x:e.x+e.width/2,y:e.y+e.height/2,strokeColor:e.strokeColor!=="transparent"?e.strokeColor:"black",backgroundColor:"transparent",fontFamily:i,fontSize:n,text:Id(t,r,e.width-20),textAlign:"center",verticalAlign:kr.MIDDLE,angle:e.angle??0})},IE=(e,t)=>{try{const{hostname:n}=new URL(e),i=n.replace(/^www\./,"");if(t instanceof Set){if(SE.has(i))return i;const s=i.replace(/^([^.]+)/,"*");return SE.has(s)?s:null}const r=t.replace(/^www\./,"");if(i===r)return r}catch{}return null},Gae=e=>{const t=e.match(zae);if(t&&t.length===2)return t[1];const n=e.match($ae);if(n&&n.length===2)return n[1];const i=e.match(Bae);if(i&&i.length===2)return i[1];if(CC.test(e))return`https://giphy.com/embed/${CC.exec(e)[1]}`;const r=e.match(Vae);return r&&r.length===2?r[1]:e},JU=(e,t)=>{if(!e)return!1;if(t!=null)if(typeof t=="function"){const n=t(e);if(typeof n=="boolean")return n}else{if(typeof t=="boolean")return t;if(t instanceof RegExp)return t.test(e);if(Array.isArray(t)){for(const n of t)if(n instanceof RegExp){if(e.match(n))return!0}else if(IE(e,n))return!0;return!1}}return!!IE(e,SE)},oB=e=>new Promise((t,n)=>{const i=new Image;i.onload=()=>{t(i)},i.onerror=r=>{n(r)},i.src=e}),aB=async({fileIds:e,files:t,imageCache:n})=>{const i=new Map,r=new Map;return await Promise.all(e.reduce((s,o)=>{const a=t[o];return a&&!i.has(o)?(i.set(o,!0),s.concat((async()=>{try{if(a.mimeType===be.binary)throw new Error("Only images can be added to ImageCache");const l=oB(a.dataURL),c={image:l,mimeType:a.mimeType};n.set(o,c);const u=await l;n.set(o,{...c,image:u})}catch{r.set(o,!0)}})())):s},[])),{imageCache:n,updatedFiles:i,erroredFiles:r}},lB=e=>e.filter(t=>In(t)),Xae=e=>(e==null?void 0:e.nodeName.toLowerCase())==="svg",RC=e=>{const t=new DOMParser().parseFromString(e,be.svg),n=t.querySelector("svg");if(t.querySelector("parsererror")||!Xae(n))throw new Error("Invalid SVG");{n.hasAttribute("xmlns")||n.setAttribute("xmlns",at);let r=n.getAttribute("width"),s=n.getAttribute("height");(r!=null&&r.includes("%")||r==="auto")&&(r=null),(s!=null&&s.includes("%")||s==="auto")&&(s=null);const o=n.getAttribute("viewBox");if(!r||!s){if(r=r||"50",s=s||"50",o){const a=o.match(/\d+ +\d+ +(\d+(?:\.\d+)?) +(\d+(?:\.\d+)?)/);a&&([,r,s]=a)}n.setAttribute("width",r),n.setAttribute("height",s)}return o||n.setAttribute("viewBox",`0 0 ${r} ${s}`),n.outerHTML}},kC={mouse:8,pen:16,touch:28},jae=16,cB={e:!0,s:!0,n:!0,w:!0},LC={e:!0,s:!0,n:!0,w:!0,nw:!0,se:!0},x8={e:!0,s:!0,n:!0,w:!0},oa=(e,t,n,i,r,s,o)=>{const[a,l]=q(C(e+n/2,t+i/2),C(r,s),o);return[a-n/2,l-i/2,n,i]},Y9=e=>!(e.viewport.isMobile||e.isTouchScreen&&(Sne||lP)),W1=e=>Y9(e)?cB:{},W9=([e,t,n,i,r,s],o,a,l,c={},u=4,d=Qu)=>{const f=kC[l],h=f/a.value,m=f/a.value,p=f/a.value,b=f/a.value,E=n-e,y=i-t,v=u/a.value,_=(f-d*2)/(2*a.value),S={nw:c.nw?void 0:oa(e-v-p+_,t-v-b+_,h,m,r,s,o),ne:c.ne?void 0:oa(n+v-_,t-v-b+_,h,m,r,s,o),sw:c.sw?void 0:oa(e-v-p+_,i+v-_,h,m,r,s,o),se:c.se?void 0:oa(n+v-_,i+v-_,h,m,r,s,o),rotation:c.rotation?void 0:oa(e+E/2-h/2,t-v-b+_-jae/a.value,h,m,r,s,o)},M=5*kC.mouse/a.value;return Math.abs(E)>M&&(c.n||(S.n=oa(e+E/2-h/2,t-v-b+_,h,m,r,s,o)),c.s||(S.s=oa(e+E/2-h/2,i+v-_,h,m,r,s,o))),Math.abs(y)>M&&(c.w||(S.w=oa(e-v-p+_,t+y/2-m/2,h,m,r,s,o)),c.e||(S.e=oa(n+v-_,t+y/2-m/2,h,m,r,s,o))),S},uB=(e,t,n,i="mouse",r=cB)=>{if(e.locked||fe(e))return{};if(e.type==="freedraw"||ke(e)){if(e.points.length===2){const[,o]=e.points;o[0]===0||o[1]===0?r=x8:o[0]>0&&o[1]<0?r=LC:o[0]>0&&o[1]>0?r=x8:o[0]<0&&o[1]>0?r=LC:o[0]<0&&o[1]<0&&(r=x8)}}else Ie(e)&&(r={...r,rotation:!0});const s=ke(e)?Qu+8:it(e)?0:Qu;return W9(Ne(e,n,!0),e.angle,t,i,r,s,it(e)?0:void 0)},dB=(e,t)=>{if(t.editingLinearElement)return!1;if(e.length>1)return!0;const n=e[0];return fe(n)?!1:ke(n)?n.points.length>2:!0},jf=100,Uu=100,DC=e=>{switch(e){case z.ARROW_UP:return"up";case z.ARROW_DOWN:return"down";case z.ARROW_RIGHT:return"right";case z.ARROW_LEFT:return"left";default:return"right"}},fB=(e,t,n,i)=>{const r=[...n.values()].reduce((s,o)=>{var l;let a;if(fe(o)&&(a=o[e==="predecessors"?"startBinding":"endBinding"])&&((l=o[e==="predecessors"?"endBinding":"startBinding"])==null?void 0:l.elementId)===t.id){const c=n.get(a.elementId);if(!c)return s;mr(qs(c),"not an ExcalidrawBindableElement");const u=e==="predecessors"?o.points[o.points.length-1]:[0,0],d=_9(t,To(t),[u[0]+o.x,u[1]+o.y]);s.push({relative:c,heading:d})}return s},[]);switch(i){case"up":return r.filter(s=>On(s.heading,Ar)).map(s=>s.relative);case"down":return r.filter(s=>On(s.heading,Ei)).map(s=>s.relative);case"right":return r.filter(s=>On(s.heading,En)).map(s=>s.relative);case"left":return r.filter(s=>On(s.heading,ur)).map(s=>s.relative)}},xE=(e,t,n)=>fB("successors",e,t,n),CE=(e,t,n)=>fB("predecessors",e,t,n),Yae=(e,t,n)=>{const i=Uu+e.width;if(n==="up"||n==="down"){const a=jf+e.height,l=e.x,c=e.x+e.width;if(t.every(u=>u.x+u.width<l||u.x>c))return{x:0,y:a*(n==="up"?-1:1)}}else if(n==="right"||n==="left"){const a=e.y,l=e.y+e.height;if(t.every(c=>c.y+c.height<a||c.y>l))return{x:(Uu+e.width)*(n==="left"?-1:1),y:0}}if(n==="up"||n==="down"){const a=jf+e.height,l=(t.length===0,a),c=t.length===0?0:(t.length+1)%2===0?(t.length+1)/2*i:t.length/2*i*-1;return n==="up"?{x:c,y:l*-1}:{x:c,y:l}}const r=jf+e.height,s=(t.length===0,Uu+e.width),o=t.length===0?0:(t.length+1)%2===0?(t.length+1)/2*r:t.length/2*r*-1;return n==="left"?{x:s*-1,y:o}:{x:s,y:o}},Wae=(e,t,n,i)=>{const r=xE(e,t,i),s=CE(e,t,i),o=Yae(e,[...r,...s],i),a=Za({type:e.type,x:e.x+o.x,y:e.y+o.y,width:e.width,height:e.height,roundness:e.roundness,roughness:e.roughness,backgroundColor:e.backgroundColor,strokeColor:e.strokeColor,strokeWidth:e.strokeWidth,opacity:e.opacity,fillStyle:e.fillStyle,strokeStyle:e.strokeStyle});mr(Y6(a),"not an ExcalidrawFlowchartNodeElement");const l=hB(e,a,t,i,n);return{nextNode:a,bindingArrow:l}},Kae=(e,t,n,i,r)=>{const s=[];for(let o=0;o<r;o++){let a,l;if(i==="left"||i==="right"){const d=jf*(r-1)+r*e.height,f=e.y+e.height/2-d/2;let h=Uu+e.width;i==="left"&&(h*=-1),a=e.x+h;const m=(jf+e.height)*o;l=f+m}else{const d=Uu*(r-1)+r*e.width,f=e.x+e.width/2-d/2;let h=jf+e.height;i==="up"&&(h*=-1),l=e.y+h;const m=(Uu+e.width)*o;a=f+m}const c=Za({type:e.type,x:a,y:l,width:e.width,height:e.height,roundness:e.roundness,roughness:e.roughness,backgroundColor:e.backgroundColor,strokeColor:e.strokeColor,strokeWidth:e.strokeWidth,opacity:e.opacity,fillStyle:e.fillStyle,strokeStyle:e.strokeStyle});mr(Y6(c),"not an ExcalidrawFlowchartNodeElement");const u=hB(e,c,t,i,n);s.push(c),s.push(u)}return s},hB=(e,t,n,i,r)=>{let s,o;switch(i){case"up":{s=e.x+e.width/2,o=e.y-6;break}case"down":{s=e.x+e.width/2,o=e.y+e.height+6;break}case"right":{s=e.x+e.width+6,o=e.y+e.height/2;break}case"left":{s=e.x-6,o=e.y+e.height/2;break}}let l,c;switch(i){case"up":{l=t.x+t.width/2-s,c=t.y+t.height-o+6;break}case"down":{l=t.x+t.width/2-s,c=t.y-o-6;break}case"right":{l=t.x-s-6,c=t.y-o+t.height/2;break}case"left":{l=t.x+t.width-s+6,c=t.y-o+t.height/2;break}}const u=j9({type:"arrow",x:s,y:o,startArrowhead:null,endArrowhead:r.currentItemEndArrowhead,strokeColor:e.strokeColor,strokeStyle:e.strokeStyle,strokeWidth:e.strokeWidth,opacity:e.opacity,roughness:e.roughness,points:[C(0,0),C(l,c)],elbowed:!0});as(u,e,"start",n),as(u,t,"end",n);const d=new Map;d.set(e.id,e),d.set(t.id,t),d.set(u.id,u),ce.movePoints(u,[{index:1,point:u.points[1]}]);const f=tg(u,Us(new Map([...n.entries(),[e.id,e],[t.id,t],[u.id,u]])),{points:u.points});return{...u,...f}};class Zae{constructor(){F(this,"isExploring",!1);F(this,"sameLevelNodes",[]);F(this,"sameLevelIndex",0);F(this,"direction",null);F(this,"visitedNodes",new Set)}clear(){this.isExploring=!1,this.sameLevelNodes=[],this.sameLevelIndex=0,this.direction=null,this.visitedNodes.clear()}exploreByDirection(t,n,i){if(!qs(t))return null;if(i!==this.direction&&this.clear(),this.visitedNodes.has(t.id)||this.visitedNodes.add(t.id),this.isExploring&&i===this.direction&&this.sameLevelNodes.length>1)return this.sameLevelIndex=(this.sameLevelIndex+1)%this.sameLevelNodes.length,this.sameLevelNodes[this.sameLevelIndex].id;const r=[...xE(t,n,i),...CE(t,n,i)];if(r.length>0)return this.sameLevelIndex=0,this.isExploring=!0,this.sameLevelNodes=r,this.direction=i,this.visitedNodes.add(r[0].id),r[0].id;if(i===this.direction||!this.isExploring){this.isExploring||this.visitedNodes.add(t.id);const o=["up","right","down","left"].filter(a=>a!==i).map(a=>[...xE(t,n,a),...CE(t,n,a)]).flat().filter(a=>!this.visitedNodes.has(a.id));for(const a of o)if(!this.visitedNodes.has(a.id))return this.visitedNodes.add(a.id),this.isExploring=!0,this.direction=i,a.id}return null}}class qae{constructor(){F(this,"isCreatingChart",!1);F(this,"numberOfNodes",0);F(this,"direction","right");F(this,"pendingNodes",null)}createNodes(t,n,i,r){if(r!==this.direction){const{nextNode:s,bindingArrow:o}=Wae(t,n,i,r);this.numberOfNodes=1,this.isCreatingChart=!0,this.direction=r,this.pendingNodes=[s,o]}else{this.numberOfNodes+=1;const s=Kae(t,n,i,r,this.numberOfNodes);this.isCreatingChart=!0,this.direction=r,this.pendingNodes=s}if(t.frameId){const s=n.get(t.frameId);mr(s&&jP(s),"not an ExcalidrawFrameElement"),s&&this.pendingNodes.every(o=>Xm([o],s,n)||wc(o,s,n))&&(this.pendingNodes=this.pendingNodes.map(o=>ee(o,{frameId:t.frameId},!1)))}}clear(){this.isCreatingChart=!1,this.pendingNodes=null,this.direction=null,this.numberOfNodes=0}}const Qae=(e,t)=>{var n,i;for(const[,r]of t)if(r.type==="arrow"&&(((n=r.startBinding)==null?void 0:n.elementId)===e.id||((i=r.endBinding)==null?void 0:i.elementId)===e.id))return!0;return!1},gB=(e,t)=>{const n=window.location.href;try{const i=new URL(n);return i.searchParams.set(rb,e),Pr(i.toString())}catch(i){console.error(i)}return Pr(n)},mB=(e,t)=>{if(e.length>0&&xb(e)){if(e.length===1)return{id:e[0].id,type:"element"};if(e.length>1){const n=Object.keys(t.selectedGroupIds)[0];return n?{id:n,type:"group"}:{id:e[0].groupIds[0],type:"group"}}}return null},xb=e=>!!(e.length===1||e.length>1&&AF(e)),Yf=e=>{try{const t=new URL(e);return t.searchParams.has(rb)&&t.host===window.location.host}catch{return!1}},Jae=e=>{try{const{searchParams:t}=new URL(e);if(t.has(rb))return t.get(rb)}catch{}return null},ele=(e,t,n,i,r,s,o,a,l,c,u,d)=>{if(n.length===1){const[f]=n;if(t==="rotation")fe(f)||(tle(f,i,r,l,c,s),pr(f,i));else{if(ue(f)&&t)return nle(e,f,i,t,o,l,c),pr(f,i),!0;if(t){const h=n[0].id,m=i.get(h),p=e.get(h);if(m&&p){const{nextWidth:b,nextHeight:E}=lle(m,p,i,e,t,l,c,{shouldMaintainAspectRatio:a,shouldResizeFromCenter:o});F0(b,E,m,p,i,e,t,{shouldMaintainAspectRatio:a,shouldResizeFromCenter:o})}}}return!0}else if(n.length>1){if(t==="rotation")return ile(e,n,i,r,l,c,s,u,d),!0;if(t){const{nextWidth:f,nextHeight:h,flipByX:m,flipByY:p,originalBoundingBox:b}=cle(n,e,i,t,l,c,{shouldMaintainAspectRatio:a,shouldResizeFromCenter:o});return pB(n,i,t,r,e,{shouldResizeFromCenter:o,shouldMaintainAspectRatio:a,flipByX:m,flipByY:p,nextWidth:f,nextHeight:h,originalBoundingBox:b}),!0}}return!1},tle=(e,t,n,i,r,s)=>{const[o,a,l,c]=Ne(e,t),u=(o+l)/2,d=(a+c)/2;let f;Ie(e)?f=0:(f=5*Math.PI/2+Math.atan2(r-d,i-u),s&&(f=f+bc/2,f=f-f%bc),f=R0(f));const h=_c(e);if(ee(e,{angle:f}),h){const m=n.getElement(h);m&&!ze(e)&&ee(m,{angle:f})}},K9=(e,t,n,i)=>ke(e)||bs(e)?{points:ub(0,t,ub(1,n,e.points,i),i)}:{},Z9=(e,t,n)=>{let i=e.width;if(jt(e)){const o=ui(e,t);o&&(i=ja(o,e))}const s=e.fontSize*(n/i);return s<r9?null:{size:s}},nle=(e,t,n,i,r,s,o)=>{const[a,l,c,u,d,f]=Ne(t,n),[h,m]=q(C(s,o),C(d,f),-t.angle);let p=0,b=0;i!=="e"&&i!=="w"&&(i.includes("e")&&(p=(h-a)/(c-a)),i.includes("w")&&(p=(c-h)/(c-a)),i.includes("n")&&(b=(u-m)/(u-l)),i.includes("s")&&(b=(m-l)/(u-l)));const E=Math.max(p,b);if(E>0){const y=t.width*E,v=t.height*E,_=Z9(t,n,y);if(_===null)return;const S=[a,l],M=[c,u],w=[d,f];let T=C(a,l);if(["n","w","nw"].includes(i)&&(T=C(M[0]-Math.abs(y),M[1]-Math.abs(v))),i==="ne"){const V=[S[0],M[1]];T=C(V[0],V[1]-Math.abs(v))}if(i==="sw"){const V=[M[0],S[1]];T=C(V[0]-Math.abs(y),V[1])}["s","n"].includes(i)&&(T[0]=w[0]-y/2),["e","w"].includes(i)&&(T[1]=w[1]-v/2),r&&(T[0]=w[0]-Math.abs(y)/2,T[1]=w[1]-Math.abs(v)/2);const A=t.angle,I=q(T,C(d,f),A),R=C(T[0]+Math.abs(y)/2,T[1]+Math.abs(v)/2),D=q(R,C(d,f),A);T=q(I,D,-A);const[L,G]=T;ee(t,{fontSize:_.size,width:y,height:v,x:L,y:G})}if(i==="e"||i==="w"){const y=e.get(t.id),[v,_,S,M]=nc(y,y.width,y.height,!0),w=C(v,_),T=C(S,M),A=k0(w,T),I=q(C(s,o),A,-y.angle),[R,,D]=nc(t,t.width,t.height,!0),L=D-R,G=T[0]-w[0],V=w9(Ct({fontSize:t.fontSize,fontFamily:t.fontFamily}),t.lineHeight);let H=G/L;i.includes("e")&&(H=(I[0]-w[0])/L),i.includes("w")&&(H=(T[0]-I[0])/L);const $=t.width*H<V?V:t.width*H,j=Id(t.originalText,Ct(t),Math.abs($)),X=Hi(j,Ct(t),t.lineHeight),K=X.height,[le,we,he,Ve]=nc(y,$,K,!0),Ye=he-le,wt=Ve-we;let st=[...w];["n","w","nw"].includes(i)&&(st=[T[0]-Math.abs(Ye),w[1]]);const zt=y.angle,en=q(st,A,zt),Ae=C(st[0]+Math.abs(Ye)/2,st[1]+Math.abs(wt)/2),$e=q(Ae,A,zt);st=q(en,$e,-zt);const Ht={width:Math.abs($),height:Math.abs(X.height),x:st[0],y:st[1],text:j,autoResize:!1};ee(t,Ht)}},ile=(e,t,n,i,r,s,o,a,l)=>{var u;let c=5*Math.PI/2+Math.atan2(s-l,r-a);o&&(c+=bc/2,c-=c%bc);for(const d of t)if(!Ie(d)){const[f,h,m,p]=Ne(d,n),b=(f+m)/2,E=(h+p)/2,y=((u=e.get(d.id))==null?void 0:u.angle)??d.angle,[v,_]=q(C(b,E),C(a,l),c+y-d.angle);fe(d)?ee(d,{points:Gse(d,n)}):ee(d,{x:d.x+(v-b),y:d.y+(_-E),angle:R0(c+y)},!1),pr(d,n,{simultaneouslyUpdated:t});const S=Pe(d,n);S&&!ze(d)&&ee(S,{x:S.x+(v-b),y:S.y+(_-E),angle:R0(c+y)},!1)}i.triggerUpdate()},rle=(e,t,n,i,r)=>{const[s,o,a,l]=t.length===1?Ne(t[0],n):_t(t),c=(s+a)/2,u=(o+l)/2,d=t.length===1?t[0].angle:0;switch([i,r]=q(C(i,r),C(c,u),-d),e){case"n":return q(C(i-(s+a)/2,r-o),C(0,0),d);case"s":return q(C(i-(s+a)/2,r-l),C(0,0),d);case"w":return q(C(i-s,r-(o+l)/2),C(0,0),d);case"e":return q(C(i-a,r-(o+l)/2),C(0,0),d);case"nw":return q(C(i-s,r-o),C(0,0),d);case"ne":return q(C(i-a,r-o),C(0,0),d);case"sw":return q(C(i-s,r-l),C(0,0),d);case"se":return q(C(i-a,r-l),C(0,0),d);default:return[0,0]}},sle=(e,t)=>{const[,[n,i]]=t.points;return e==="nw"&&(n<0||i<0)||e==="ne"&&n>=0||e==="sw"&&n<=0||e==="se"&&(n>0||i>0)?"end":"origin"},ole=(e,t,n)=>{if(n)return"center";if(t)switch(e){case"n":return"south-side";case"e":return"west-side";case"s":return"north-side";case"w":return"east-side";case"ne":return"bottom-left";case"nw":return"bottom-right";case"se":return"top-left";case"sw":return"top-right"}return["e","se","s"].includes(e)?"top-left":["n","nw","w"].includes(e)?"bottom-right":e==="ne"?"bottom-left":"top-right"},ale=(e,t,n,i,r,s,o,a,l)=>{const c=ole(o,a,l),[u,d]=e;switch(c){case"top-left":return{x:u+(t-i)/2+(i-t)/2*Math.cos(s)+(n-r)/2*Math.sin(s),y:d+(n-r)/2+(i-t)/2*Math.sin(s)+(r-n)/2*Math.cos(s)};case"top-right":return{x:u+(t-i)/2*(Math.cos(s)+1)+(n-r)/2*Math.sin(s),y:d+(n-r)/2+(t-i)/2*Math.sin(s)+(r-n)/2*Math.cos(s)};case"bottom-left":return{x:u+(t-i)/2*(1-Math.cos(s))+(r-n)/2*Math.sin(s),y:d+(n-r)/2*(Math.cos(s)+1)+(i-t)/2*Math.sin(s)};case"bottom-right":return{x:u+(t-i)/2*(Math.cos(s)+1)+(r-n)/2*Math.sin(s),y:d+(n-r)/2*(Math.cos(s)+1)+(t-i)/2*Math.sin(s)};case"center":return{x:u-(i-t)/2,y:d-(r-n)/2};case"east-side":return{x:u+(t-i)/2*(Math.cos(s)+1),y:d+(t-i)/2*Math.sin(s)+(n-r)/2};case"west-side":return{x:u+(t-i)/2*(1-Math.cos(s)),y:d+(i-t)/2*Math.sin(s)+(n-r)/2};case"north-side":return{x:u+(t-i)/2+(n-r)/2*Math.sin(s),y:d+(r-n)/2*(Math.cos(s)-1)};case"south-side":return{x:u+(t-i)/2+(r-n)/2*Math.sin(s),y:d+(n-r)/2*(Math.cos(s)+1)}}},F0=(e,t,n,i,r,s,o,{shouldInformMutation:a=!0,shouldMaintainAspectRatio:l=!1,shouldResizeFromCenter:c=!1}={})=>{let u={};const d=Pe(n,r);if(d){const p=s.get(d.id);if(p&&(u={fontSize:p.fontSize}),l){const b={...n,width:e},E=Z9(d,r,ja(b,d));if(E===null)return;u={fontSize:E.size}}else{const b=iF(Ct(d),d.lineHeight),E=rF(d.fontSize,d.lineHeight);e=Math.max(e,b),t=Math.max(t,E)}}const f=K9(i,e,t,!0);let h=C(i.x,i.y);if(ke(i)){const[p,b]=Js(i,s);h=C(p,b)}const m=ale(h,i.width,i.height,e,t,i.angle,o,l,c);if(ke(i)&&f.points){const p=i.x-h[0],b=i.y-h[1];m.x+=p,m.y+=b;const E=f.points[0][0],y=f.points[0][1];m.x+=E,m.y+=y,f.points=f.points.map(v=>C(v[0]-E,v[1]-y))}if(e<0&&(m.x=m.x+e),t<0&&(m.y=m.y+t),"scale"in n&&"scale"in i&&ee(n,{scale:[(Math.sign(e)||i.scale[0])*i.scale[0],(Math.sign(t)||i.scale[1])*i.scale[1]]}),ze(n)&&d&&l){const p=e/n.width*d.fontSize;if(p<r9)return;u.fontSize=p}if(e!==0&&t!==0&&Number.isFinite(m.x)&&Number.isFinite(m.y)){const p={...m,width:Math.abs(e),height:Math.abs(t),...f};ee(n,p,a),pr(n,r,{newSize:{width:e,height:t}}),d&&u!=null&&ee(d,{fontSize:u.fontSize}),Vm(n,r,o,l)}},lle=(e,t,n,i,r,s,o,{shouldMaintainAspectRatio:a=!1,shouldResizeFromCenter:l=!1}={})=>{const[c,u,d,f]=nc(t,t.width,t.height,!0),h=C(c,u),m=C(d,f),p=k0(h,m),b=q(C(s,o),p,-t.angle),[E,y,v,_]=nc(e,e.width,e.height,!0),S=v-E,M=_-y,w=m[0]-h[0],T=m[1]-h[1];let A=w/S,I=T/M;r.includes("e")&&(A=(b[0]-h[0])/S),r.includes("s")&&(I=(b[1]-h[1])/M),r.includes("w")&&(A=(m[0]-b[0])/S),r.includes("n")&&(I=(m[1]-b[1])/M);let R=e.width*A,D=e.height*I;if(l&&(R=2*R-t.width,D=2*D-t.height),a){const L=Math.abs(R)/t.width,G=Math.abs(D)/t.height;if(r.length===1&&(D*=L,R*=G),r.length===2){const V=Math.max(L,G);R=t.width*V*Math.sign(R),D=t.height*V*Math.sign(D)}}return{nextWidth:R,nextHeight:D}},cle=(e,t,n,i,r,s,{shouldMaintainAspectRatio:o=!1,shouldResizeFromCenter:a=!1}={})=>{const l=e.map(L=>t.get(L.id)),c=l.reduce((L,G)=>{if(!ke(G))return L;const V=_c(G);if(!V)return L;const H=t.get(V)??null;return jt(H)?[...L,{...H,...ce.getBoundTextElementPosition(G,H,n)}]:L},[]),u=Xs(l.map(L=>L).concat(c)),{minX:d,minY:f,maxX:h,maxY:m,midX:p,midY:b}=u,E=h-d,y=m-f,v={ne:[d,m],se:[d,f],sw:[h,f],nw:[h,m],e:[d,f+y/2],w:[h,f+y/2],n:[d+E/2,m],s:[d+E/2,f]},[_,S]=a?[p,b]:v[i],M=a?2:1,w=Math.max(Math.abs(r-_)/E||0,Math.abs(s-S)/y||0)*M;let T=i.includes("e")||i.includes("w")?Math.abs(r-_)*M:E,A=i.includes("n")||i.includes("s")?Math.abs(s-S)*M:y;o&&(T=E*w*Math.sign(r-_),A=y*w*Math.sign(s-S));const I={ne:[r<_,s>S],se:[r<_,s<S],sw:[r>_,s<S],nw:[r>_,s>S],e:[r<_,!1],w:[r>_,!1],n:[!1,s>S],s:[!1,s<S]},[R,D]=I[i].map(L=>L);return{originalBoundingBox:u,nextWidth:T,nextHeight:A,flipByX:R,flipByY:D}},pB=(e,t,n,i,r,{shouldMaintainAspectRatio:s=!1,shouldResizeFromCenter:o=!1,flipByX:a=!1,flipByY:l=!1,nextHeight:c,nextWidth:u,originalBoundingBox:d}={})=>{if(u===void 0&&c===void 0&&a===void 0&&l===void 0||c===0||u===0)return;r||(r=t);const f=e.reduce((M,w)=>{const T=r.get(w.id);return T&&M.push({orig:T,latest:w}),M},[]);let h;if(d)h=d;else{const M=f.reduce((w,{orig:T})=>{if(!ke(T))return w;const A=_c(T);if(!A)return w;const I=r.get(A)??null;return jt(I)?[...w,{...I,...ce.getBoundTextElementPosition(T,I,t)}]:w},[]);h=Xs(f.map(({orig:w})=>w).concat(M))}const{minX:m,minY:p,maxX:b,maxY:E,midX:y,midY:v}=h,_=b-m,S=E-p;if(u===void 0&&c===void 0&&(u=_,c=S),s&&(u===void 0?u=c*(_/S):c===void 0?c=u*(S/_):Math.abs(u/c-_/S)>.001&&(u=c*(_/S))),u&&c){let M=n.includes("e")||n.includes("w")?Math.abs(u)/_:1,w=n.includes("n")||n.includes("s")?Math.abs(c)/S:1,T;n.length===1?T=n.includes("e")||n.includes("w")?M:w:T=Math.max(Math.abs(u)/_||0,Math.abs(c)/S||0);const A={ne:[m,E],se:[m,p],sw:[b,p],nw:[b,E],e:[m,p+S/2],w:[b,p+S/2],n:[m+_/2,E],s:[m+_/2,p]},[I,R]=o?[y,v]:A[n],D=s||f.some($=>$.latest.angle!==0||ue($.latest)||_h($.latest));D&&(M=T,w=T);const[L,G]=[a?-1:1,l?-1:1],V=[];for(const{orig:$,latest:j}of f){if(ue($)&&jt($))continue;const X=$.width*M,K=$.height*w,le=R0($.angle*L*G),we=ke($)||bs($),he=$.x-I,Ve=$.y-R,Ye=a&&!we?X:0,wt=l&&!we?K:0,st=I+L*(he*M+Ye),zt=R+G*(Ve*w+wt),en=K9($,X*L,K*G,!1),Ae={x:st,y:zt,width:X,height:K,angle:le,...en};if(fe($)&&($.startBinding&&(Ae.startBinding={...$.startBinding,fixedPoint:[a?-$.startBinding.fixedPoint[0]+1:$.startBinding.fixedPoint[0],l?-$.startBinding.fixedPoint[1]+1:$.startBinding.fixedPoint[1]]}),$.endBinding&&(Ae.endBinding={...$.endBinding,fixedPoint:[a?-$.endBinding.fixedPoint[0]+1:$.endBinding.fixedPoint[0],l?-$.endBinding.fixedPoint[1]+1:$.endBinding.fixedPoint[1]]}),$.fixedSegments&&en.points&&(Ae.fixedSegments=$.fixedSegments.map(Ht=>({...Ht,start:en.points[Ht.index-1],end:en.points[Ht.index]})))),it($)&&(Ae.scale=[$.scale[0]*L,$.scale[1]*G]),ue($)){const Ht=Z9($,t,X);if(!Ht)return;Ae.fontSize=Ht.size}const $e=r.get(_c($)??"");if($e)if(D){const Ht=$e.fontSize*T;if(Ht<r9)return;Ae.boundTextFontSize=Ht}else Ae.boundTextFontSize=$e.fontSize;V.push({element:j,update:Ae})}const H=V.map(({element:$})=>$);for(const{element:$,update:{boundTextFontSize:j,...X}}of V){const{width:K,height:le,angle:we}=X;ee($,X,!1,{isDragging:!0}),pr($,t,{simultaneouslyUpdated:H,newSize:{width:K,height:le}});const he=Pe($,t);he&&j&&(ee(he,{fontSize:j,angle:ke($)?void 0:we},!1),Vm($,t,n,!0))}i.triggerUpdate()}},AE=(e,t,n)=>t>=e[0]&&t<=e[0]+e[2]&&n>=e[1]&&n<=e[1]+e[3],ule=(e,t,n,i,r,s,o,a)=>{if(!n.selectedElementIds[e.id])return!1;const{rotation:l,...c}=uB(e,s,t,o,W1(a));if(l&&AE(l,i,r))return"rotation";const u=Object.keys(c).filter(d=>{const f=c[d];return f?AE(f,i,r):!1});if(u.length>0)return u[0];if(Y9(a)){const[d,f,h,m,p,b]=Ne(e,t);if(!(ke(e)&&e.points.length<=2)){const E=it(e)?0:tb/s.value,y=tb/s.value,v=UB(C(d-E,f-E),C(h+E,m+E),C(p,b),e.angle);for(const[_,S]of Object.entries(v))if(ed(C(i,r),S,y))return _}}return!1},NC=(e,t,n,i,r,s,o,a)=>e.reduce((l,c)=>{if(l)return l;const u=ule(c,o,t,n,i,r,s,a);return u?{element:c,transformHandleType:u}:null},null),OC=([e,t,n,i],r,s,o,a,l)=>{const c=W9([e,t,n,i,(e+n)/2,(t+i)/2],0,o,a,W1(l)),u=Object.keys(c).find(d=>{const f=c[d];return f&&AE(f,r,s)});if(u)return u;if(Y9(l)){const d=(e+n)/2,f=(t+i)/2,h=tb/o.value,m=UB(C(e-h,t-h),C(n+h,i+h),C(d,f),0);for(const[p,b]of Object.entries(m))if(ed(C(r,s),b,h))return p}return!1},C8=["ns","nesw","ew","nwse"],dle=(e,t)=>{const n=C8.indexOf(e);if(n>=0){const i=Math.round(t/(Math.PI/4));e=C8[(n+i)%C8.length]}return e},PC=e=>{const{element:t,transformHandleType:n}=e,i=t&&Math.sign(t.height)*Math.sign(t.width)===-1;let r=null;switch(n){case"n":case"s":r="ns";break;case"w":case"e":r="ew";break;case"nw":case"se":i?r="nesw":r="nwse";break;case"ne":case"sw":i?r="nwse":r="nesw";break;case"rotation":return"grab"}return r&&t&&(r=dle(r,t.angle)),r?`${r}-resize`:""},UB=([e,t],[n,i],r,s)=>{const o=q(C(e,t),r,s),a=q(C(n,t),r,s),l=q(C(e,i),r,s),c=q(C(n,i),r,s);return{n:[o,a],e:[a,c],s:[c,l],w:[l,o]}},fle=(e,t,n,i,r,s)=>{if(t.length===1&&fe(t[0])&&(t[0].startBinding||t[0].endBinding))return;const o=t.filter(d=>{if(fe(d)&&d.startBinding&&d.endBinding){const f=t.find(m=>{var p;return m.id===((p=d.startBinding)==null?void 0:p.elementId)}),h=t.find(m=>{var p;return m.id===((p=d.endBinding)==null?void 0:p.elementId)});return f&&h}return!0}),a=new Set(o),l=o.filter(d=>Ie(d)).map(d=>d.id);if(l.length>0)for(const d of i.getNonDeletedElements())d.frameId!==null&&l.includes(d.frameId)&&a.add(d);const c=[];for(const d of a){const f=e.originalElements.get(d.id);if(!f)return;c.push(f)}const u=hle(_t(c),n,r,s);a.forEach(d=>{if(FC(e,d,u),!ze(d)){const f=Pe(d,i.getNonDeletedElementsMap());f&&FC(e,f,u),pr(d,i.getElementsMapIncludingDeleted(),{simultaneouslyUpdated:Array.from(a)})}})},hle=(e,t,n,i)=>{const[r,s]=e;let o=r+t.x+n.x,a=s+t.y+n.y;if(n.x===0||n.y===0){const[l,c]=Mn(r+t.x,s+t.y,i);n.x===0&&(o=l),n.y===0&&(a=c)}return{x:o-r,y:a-s}},FC=(e,t,n)=>{const i=e.originalElements.get(t.id)??t,r=i.x+n.x,s=i.y+n.y;ee(t,{x:r,y:s})},gle=(e,t,n)=>{const[i,r]=_t(e);return[t-i,n-r]},BC=({newElement:e,elementType:t,originX:n,originY:i,x:r,y:s,width:o,height:a,shouldMaintainAspectRatio:l,shouldResizeFromCenter:c,zoom:u,widthAspectRatio:d=null,originOffset:f=null,informMutation:h=!0})=>{l&&e.type!=="selection"&&(d?a=o/d:(Math.abs(s-i)>Math.abs(r-n)?{width:o,height:a}=Zx(t,a,r<n?-o:o):{width:o,height:a}=Zx(t,o,s<i?-a:a),a<0&&(a=-a)));let m=r<n?n-o:n,p=s<i?i-a:i;c&&(o+=o,a+=a,m=n-o/2,p=i-a/2);let b=null;if(ue(e)){a=e.height;const E=w9(Ct({fontSize:e.fontSize,fontFamily:e.fontFamily}),e.lineHeight);o=Math.max(o,E),Math.abs(r-n)>Ane/u&&(b={autoResize:!1}),p=i,c&&(m=n-o/2)}if(o!==0&&a!==0){let E=null;it(e)&&(E={initialWidth:o,initialHeight:a}),ee(e,{x:m+((f==null?void 0:f.x)??0),y:p+((f==null?void 0:f.y)??0),width:o,height:a,...b,...E},h)}},mle=(e,t)=>{const n=e[t];return n?typeof n=="function"?n():Promise.resolve(n):new Promise((i,r)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(r.bind(null,new Error("Unknown variable dynamic import: "+t)))})};var qa={};let ple=0;function Jt(e,t){const n=`atom${++ple}`,i={toString(){return(qa?"production":void 0)!=="production"&&this.debugLabel?n+":"+this.debugLabel:n}};return typeof e=="function"?i.read=e:(i.init=e,i.read=Ule,i.write=ble),i}function Ule(e){return e(this)}function ble(e,t,n){return t(this,typeof n=="function"?n(e(this)):n)}const zC=(e,t)=>e.unstable_is?e.unstable_is(t):t===e,ME=e=>"init"in e,A8=e=>!!e.write,Cb=new WeakMap,RE=e=>{var t;return kE(e)&&!((t=Cb.get(e))!=null&&t[1])},yle=(e,t)=>{const n=Cb.get(e);if(n)n[1]=!0,n[0].forEach(i=>i(t));else if((qa?"production":void 0)!=="production")throw new Error("[Bug] cancelable promise not found")},Ele=e=>{if(Cb.has(e))return;const t=[new Set,!1];Cb.set(e,t);const n=()=>{t[1]=!0};e.then(n,n),e.onCancel=i=>{t[0].add(i)}},kE=e=>typeof(e==null?void 0:e.then)=="function",HC=e=>"v"in e||"e"in e,rU=e=>{if("e"in e)throw e.e;if((qa?"production":void 0)!=="production"&&!("v"in e))throw new Error("[Bug] atom state is not initialized");return e.v},bB=(e,t,n)=>{n.p.has(e)||(n.p.add(e),t.then(()=>{n.p.delete(e)},()=>{n.p.delete(e)}))},VC=(e,t,n,i,r)=>{var s;if((qa?"production":void 0)!=="production"&&i===t)throw new Error("[Bug] atom cannot depend on itself");n.d.set(i,r.n),RE(n.v)&&bB(t,n.v,r),(s=r.m)==null||s.t.add(t),e&&vle(e,i,t)},Vg=()=>({D:new Map,H:new Set,M:new Set,L:new Set}),K1=(e,t,n)=>{e[t].add(n)},$C=(e,t,n)=>{e.D.has(t)||(e.D.set(t,new Set),K1(e,"M",()=>{var i;(i=n.m)==null||i.l.forEach(r=>K1(e,"M",r))}))},vle=(e,t,n)=>{const i=e.D.get(t);i&&i.add(n)},_le=(e,t)=>e.D.get(t),Kc=e=>{let t,n=!1;const i=r=>{try{r()}catch(s){n||(t=s,n=!0)}};for(;e.H.size||e.M.size||e.L.size;)e.D.clear(),e.H.forEach(i),e.H.clear(),e.M.forEach(i),e.M.clear(),e.L.forEach(i),e.L.clear();if(n)throw t},yB=(...[e,t,n,i])=>{const r=(E,y,v)=>{const _="v"in y,S=y.v,M=RE(y.v)?y.v:null;if(kE(v)){Ele(v);for(const w of y.d.keys())bB(E,v,e(w));y.v=v}else y.v=v;delete y.e,delete y.x,(!_||!Object.is(S,y.v))&&(++y.n,M&&yle(M,v))},s=(E,y)=>{var v;const _=e(y);if(HC(_)&&(_.m&&!_.x||Array.from(_.d).every(([I,R])=>s(E,I).n===R)))return _;_.d.clear();let S=!0;const M=I=>{if(zC(y,I)){const D=e(I);if(!HC(D))if(ME(I))r(I,D,I.init);else throw new Error("no atom init");return rU(D)}const R=s(E,I);try{return rU(R)}finally{if(S)VC(E,y,_,I,R);else{const D=Vg();VC(D,y,_,I,R),d(D,y,_),Kc(D)}}};let w,T;const A={get signal(){return w||(w=new AbortController),w.signal},get setSelf(){return(qa?"production":void 0)!=="production"&&!A8(y)&&console.warn("setSelf function cannot be used with read-only atom"),!T&&A8(y)&&(T=(...I)=>{if((qa?"production":void 0)!=="production"&&S&&console.warn("setSelf function cannot be called in sync"),!S)return u(y,...I)}),T}};try{const I=t(y,M,A);if(r(y,_,I),kE(I)){(v=I.onCancel)==null||v.call(I,()=>w==null?void 0:w.abort());const R=()=>{if(_.m){const D=Vg();d(D,y,_),Kc(D)}};I.then(R,R)}return _}catch(I){return delete _.v,_.e=I,delete _.x,++_.n,_}finally{S=!1}},o=E=>rU(s(void 0,E)),a=(E,y,v)=>{var _,S;const M=new Map;for(const w of((_=v.m)==null?void 0:_.t)||[]){const T=e(w);T.m&&M.set(w,T)}for(const w of v.p)M.set(w,e(w));return(S=_le(E,y))==null||S.forEach(w=>{M.set(w,e(w))}),M},l=(E,y,v)=>{const _=[],S=new Set,M=new Set,w=[[y,v]];for(;w.length>0;){const[T,A]=w[w.length-1];if(M.has(T)){w.pop();continue}if(S.has(T)){_.push([T,A,A.n]),M.add(T),A.x=!0,w.pop();continue}S.add(T);for(const[I,R]of a(E,T,A))T!==I&&!S.has(I)&&w.push([I,R])}K1(E,"H",()=>{const T=new Set([y]);for(let A=_.length-1;A>=0;--A){const[I,R,D]=_[A];let L=!1;for(const G of R.d.keys())if(G!==I&&T.has(G)){L=!0;break}L&&(s(E,I),d(E,I,R),D!==R.n&&($C(E,I,R),T.add(I))),delete R.x}})},c=(E,y,...v)=>{let _=!0;const S=w=>rU(s(E,w)),M=(w,...T)=>{const A=e(w);try{if(zC(y,w)){if(!ME(w))throw new Error("atom not writable");const I=A.n,R=T[0];r(w,A,R),d(E,w,A),I!==A.n&&($C(E,w,A),l(E,w,A));return}else return c(E,w,...T)}finally{_||Kc(E)}};try{return n(y,S,M,...v)}finally{_=!1}},u=(E,...y)=>{const v=Vg();try{return c(v,E,...y)}finally{Kc(v)}},d=(E,y,v)=>{if(v.m&&!RE(v.v)){for(const _ of v.d.keys())v.m.d.has(_)||(f(E,_,e(_)).t.add(y),v.m.d.add(_));for(const _ of v.m.d||[])if(!v.d.has(_)){v.m.d.delete(_);const S=h(E,_,e(_));S==null||S.t.delete(y)}}},f=(E,y,v)=>{if(!v.m){s(E,y);for(const _ of v.d.keys())f(E,_,e(_)).t.add(y);if(v.m={l:new Set,d:new Set(v.d.keys()),t:new Set},A8(y)){const _=v.m;let S;const M=(w,T)=>{let A=!0;S=(...I)=>{try{return c(w,y,...I)}finally{A||Kc(w)}};try{return T()}finally{A=!1}};K1(E,"L",()=>{const w=M(E,()=>i(y,(...T)=>S(...T)));w&&(_.u=T=>M(T,w))})}}return v.m},h=(E,y,v)=>{if(v.m&&!v.m.l.size&&!Array.from(v.m.t).some(_=>{var S;return(S=e(_).m)==null?void 0:S.d.has(y)})){const _=v.m.u;_&&K1(E,"L",()=>_(E)),delete v.m;for(const S of v.d.keys()){const M=h(E,S,e(S));M==null||M.t.delete(y)}return}return v.m};return{get:o,set:u,sub:(E,y)=>{const v=Vg(),_=e(E),M=f(v,E,_).l;return M.add(y),Kc(v),()=>{M.delete(y);const w=Vg();h(w,E,_),Kc(w)}},unstable_derive:E=>yB(...E(e,t,n,i))}},wle=e=>{const t=new WeakMap,n=new Set;let i,r=0;const s=e.unstable_derive((l,c,u,d)=>(i=l,[f=>{let h=t.get(f);if(!h){const m=l(f);h=new Proxy(m,{set(p,b,E){return b==="m"&&n.add(f),Reflect.set(p,b,E)},deleteProperty(p,b){return b==="m"&&n.delete(f),Reflect.deleteProperty(p,b)}}),t.set(f,h)}return h},c,(f,h,m,...p)=>r?m(f,...p):u(f,h,m,...p),d])),o=s.set;return Object.assign(s,{dev4_get_internal_weak_map:()=>({get:l=>{const c=i(l);if(c.n!==0)return c}}),dev4_get_mounted_atoms:()=>n,dev4_restore_atoms:l=>{o({read:()=>null,write:(u,d)=>{++r;try{for(const[f,h]of l)ME(f)&&d(f,h)}finally{--r}}})}})},jm=()=>{const e=new WeakMap,n=yB(i=>{if((qa?"production":void 0)!=="production"&&!i)throw new Error("Atom is undefined or null");let r=e.get(i);return r||(r={d:new Map,p:new Set,n:0},e.set(i,r)),r},(i,...r)=>i.read(...r),(i,...r)=>i.write(...r),(i,...r)=>{var s;return(s=i.onMount)==null?void 0:s.call(i,...r)});return(qa?"production":void 0)!=="production"?wle(n):n};let $g;const Tle=()=>($g||($g=jm(),(qa?"production":void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=$g),globalThis.__JOTAI_DEFAULT_STORE__!==$g&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),$g);var EB={};const vB=N.createContext(void 0),r5=e=>{const t=N.useContext(vB);return(e==null?void 0:e.store)||t||Tle()},Sle=({children:e,store:t})=>{const n=N.useRef(void 0);return!t&&!n.current&&(n.current=jm()),N.createElement(vB.Provider,{value:t||n.current},e)},LE=e=>typeof(e==null?void 0:e.then)=="function",_B=e=>{e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t})},Ile=se.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(_B(e),e)}),M8=new WeakMap,GC=e=>{let t=M8.get(e);return t||(t=new Promise((n,i)=>{let r=e;const s=l=>c=>{r===l&&n(c)},o=l=>c=>{r===l&&i(c)},a=l=>{"onCancel"in l&&typeof l.onCancel=="function"&&l.onCancel(c=>{if((EB?"production":void 0)!=="production"&&c===l)throw new Error("[Bug] p is not updated even after cancelation");LE(c)?(M8.set(c,t),r=c,c.then(s(c),o(c)),a(c)):n(c)})};e.then(s(e),o(e)),a(e)}),M8.set(e,t)),t};function B0(e,t){const n=r5(t),[[i,r,s],o]=N.useReducer(c=>{const u=n.get(e);return Object.is(c[0],u)&&c[1]===n&&c[2]===e?c:[u,n,e]},void 0,()=>[n.get(e),n,e]);let a=i;(r!==n||s!==e)&&(o(),a=n.get(e));const l=t==null?void 0:t.delay;if(N.useEffect(()=>{const c=n.sub(e,()=>{if(typeof l=="number"){const u=n.get(e);LE(u)&&_B(GC(u)),setTimeout(o,l);return}o()});return o(),c},[n,e,l]),N.useDebugValue(a),LE(a)){const c=GC(a);return Ile(c)}return a}function q9(e,t){const n=r5(t);return N.useCallback((...r)=>{if((EB?"production":void 0)!=="production"&&!("write"in e))throw new Error("not writable atom");return n.set(e,...r)},[n,e])}function Sh(e,t){return[B0(e,t),q9(e,t)]}const XC=new WeakMap;function xle(e,t){const n=r5(t),i=Cle(n);for(const[r,s]of e)(!i.has(r)||t!=null&&t.dangerouslyForceHydrate)&&(i.add(r),n.set(r,s))}const Cle=e=>{let t=XC.get(e);return t||(t=new WeakSet,XC.set(e,t)),t};function Lf(){return Lf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Lf.apply(this,arguments)}function wB(){const e=N.createContext(null);function t({store:o,initialValues:a=[],children:l}){const c=N.useRef(o);return c.current||(c.current=jm()),xle(a,{store:c.current}),g(e.Provider,{value:c.current,children:l})}const n=o=>{const a=N.useContext(e);if(!a)throw new Error("Missing Provider from createIsolation");return r5(Lf({store:a},o))};return{Provider:t,useStore:n,useAtom:(o,a)=>{const l=n();return Sh(o,Lf({store:l},a))},useAtomValue:(o,a)=>{const l=n();return B0(o,Lf({store:l},a))},useSetAtom:(o,a)=>{const l=n();return q9(o,Lf({store:l},a))}}}const{read:aIe,write:lIe}=Jt(null);N.createContext({scope:void 0,baseStore:void 0});const TB=wB(),{useAtom:hn,useSetAtom:s5,useAtomValue:SB,useStore:cIe}=TB,Ale=TB.Provider,zs=jm(),IB={paste:"Paste",pasteAsPlaintext:"Paste as plaintext",pasteCharts:"Paste charts",selectAll:"Select all",multiSelect:"Add element to selection",moveCanvas:"Move canvas",cut:"Cut",copy:"Copy",copyAsPng:"Copy to clipboard as PNG",copyAsSvg:"Copy to clipboard as SVG",copyText:"Copy to clipboard as text",copySource:"Copy source to clipboard",convertToCode:"Convert to code",bringForward:"Bring forward",sendToBack:"Send to back",bringToFront:"Bring to front",sendBackward:"Send backward",delete:"Delete",copyStyles:"Copy styles",pasteStyles:"Paste styles",stroke:"Stroke",changeStroke:"Change stroke color",background:"Background",changeBackground:"Change background color",fill:"Fill",strokeWidth:"Stroke width",strokeStyle:"Stroke style",strokeStyle_solid:"Solid",strokeStyle_dashed:"Dashed",strokeStyle_dotted:"Dotted",sloppiness:"Sloppiness",opacity:"Opacity",textAlign:"Text align",edges:"Edges",sharp:"Sharp",round:"Round",arrowheads:"Arrowheads",arrowhead_none:"None",arrowhead_arrow:"Arrow",arrowhead_bar:"Bar",arrowhead_circle:"Circle",arrowhead_circle_outline:"Circle (outline)",arrowhead_triangle:"Triangle",arrowhead_triangle_outline:"Triangle (outline)",arrowhead_diamond:"Diamond",arrowhead_diamond_outline:"Diamond (outline)",arrowhead_crowfoot_many:"Crow's foot (many)",arrowhead_crowfoot_one:"Crow's foot (one)",arrowhead_crowfoot_one_or_many:"Crow's foot (one or many)",more_options:"More options",arrowtypes:"Arrow type",arrowtype_sharp:"Sharp arrow",arrowtype_round:"Curved arrow",arrowtype_elbowed:"Elbow arrow",fontSize:"Font size",fontFamily:"Font family",addWatermark:'Add "Made with Excalidraw"',handDrawn:"Hand-drawn",normal:"Normal",code:"Code",small:"Small",medium:"Medium",large:"Large",veryLarge:"Very large",solid:"Solid",hachure:"Hachure",zigzag:"Zigzag",crossHatch:"Cross-hatch",thin:"Thin",bold:"Bold",left:"Left",center:"Center",right:"Right",extraBold:"Extra bold",architect:"Architect",artist:"Artist",cartoonist:"Cartoonist",fileTitle:"File name",colorPicker:"Color picker",canvasColors:"Used on canvas",canvasBackground:"Canvas background",drawingCanvas:"Drawing canvas",clearCanvas:"Clear canvas",layers:"Layers",actions:"Actions",language:"Language",liveCollaboration:"Live collaboration...",duplicateSelection:"Duplicate",untitled:"Untitled",name:"Name",yourName:"Your name",madeWithExcalidraw:"Made with Excalidraw",group:"Group selection",ungroup:"Ungroup selection",collaborators:"Collaborators",toggleGrid:"Toggle grid",addToLibrary:"Add to library",removeFromLibrary:"Remove from library",libraryLoadingMessage:"Loading library…",libraries:"Browse libraries",loadingScene:"Loading scene…",loadScene:"Load scene from file",align:"Align",alignTop:"Align top",alignBottom:"Align bottom",alignLeft:"Align left",alignRight:"Align right",centerVertically:"Center vertically",centerHorizontally:"Center horizontally",distributeHorizontally:"Distribute horizontally",distributeVertically:"Distribute vertically",flipHorizontal:"Flip horizontal",flipVertical:"Flip vertical",viewMode:"View mode",share:"Share",showStroke:"Show stroke color picker",showBackground:"Show background color picker",showFonts:"Show font picker",toggleTheme:"Toggle light/dark theme",theme:"Theme",personalLib:"Personal Library",excalidrawLib:"Excalidraw Library",decreaseFontSize:"Decrease font size",increaseFontSize:"Increase font size",unbindText:"Unbind text",bindText:"Bind text to the container",createContainerFromText:"Wrap text in a container",link:{edit:"Edit link",editEmbed:"Edit embeddable link",create:"Add link",label:"Link",labelEmbed:"Link & embed",empty:"No link is set",hint:"Type or paste your link here",goToElement:"Go to target element"},lineEditor:{edit:"Edit line",editArrow:"Edit arrow"},elementLock:{lock:"Lock",unlock:"Unlock",lockAll:"Lock all",unlockAll:"Unlock all"},statusPublished:"Published",sidebarLock:"Keep sidebar open",selectAllElementsInFrame:"Select all elements in frame",removeAllElementsFromFrame:"Remove all elements from frame",eyeDropper:"Pick color from canvas",textToDiagram:"Text to diagram",prompt:"Prompt",followUs:"Follow us",discordChat:"Discord chat",zoomToFitViewport:"Zoom to fit in viewport",zoomToFitSelection:"Zoom to fit selection",zoomToFit:"Zoom to fit all elements",installPWA:"Install Excalidraw locally (PWA)",autoResize:"Enable text auto-resizing",imageCropping:"Image cropping",unCroppedDimension:"Uncropped dimension",copyElementLink:"Copy link to object",linkToElement:"Link to object",wrapSelectionInFrame:"Wrap selection in frame"},xB={title:"Link to object",desc:"Click on a shape on canvas or paste a link.",notFound:"Linked object wasn't found on canvas."},CB={noItems:"No items added yet...",hint_emptyLibrary:"Select an item on canvas to add it here, or install a library from the public repository, below.",hint_emptyPrivateLibrary:"Select an item on canvas to add it here."},AB={title:"Find on canvas",noMatch:"No matches found...",singleResult:"result",multipleResults:"results",placeholder:"Find text on canvas..."},MB={clearReset:"Reset the canvas",exportJSON:"Export to file",exportImage:"Export image...",export:"Save to...",copyToClipboard:"Copy to clipboard",copyLink:"Copy link",save:"Save to current file",saveAs:"Save as",load:"Open",getShareableLink:"Get shareable link",close:"Close",selectLanguage:"Select language",scrollBackToContent:"Scroll back to content",zoomIn:"Zoom in",zoomOut:"Zoom out",resetZoom:"Reset zoom",menu:"Menu",done:"Done",edit:"Edit",undo:"Undo",redo:"Redo",resetLibrary:"Reset library",createNewRoom:"Create new room",fullScreen:"Full screen",darkMode:"Dark mode",lightMode:"Light mode",systemMode:"System mode",zenMode:"Zen mode",objectsSnapMode:"Snap to objects",exitZenMode:"Exit zen mode",cancel:"Cancel",clear:"Clear",remove:"Remove",embed:"Toggle embedding",publishLibrary:"Publish",submit:"Submit",confirm:"Confirm",embeddableInteractionButton:"Click to interact"},RB={clearReset:"This will clear the whole canvas. Are you sure?",couldNotCreateShareableLink:"Couldn't create shareable link.",couldNotCreateShareableLinkTooBig:"Couldn't create shareable link: the scene is too big",couldNotLoadInvalidFile:"Couldn't load invalid file",importBackendFailed:"Importing from backend failed.",cannotExportEmptyCanvas:"Cannot export empty canvas.",couldNotCopyToClipboard:"Couldn't copy to clipboard.",decryptFailed:"Couldn't decrypt data.",uploadedSecurly:"The upload has been secured with end-to-end encryption, which means that Excalidraw server and third parties can't read the content.",loadSceneOverridePrompt:"Loading external drawing will replace your existing content. Do you wish to continue?",collabStopOverridePrompt:`Stopping the session will overwrite your previous, locally stored drawing. Are you sure?

(If you want to keep your local drawing, simply close the browser tab instead.)`,errorAddingToLibrary:"Couldn't add item to the library",errorRemovingFromLibrary:"Couldn't remove item from the library",confirmAddLibrary:"This will add {{numShapes}} shape(s) to your library. Are you sure?",imageDoesNotContainScene:"This image does not seem to contain any scene data. Have you enabled scene embedding during export?",cannotRestoreFromImage:"Scene couldn't be restored from this image file",invalidSceneUrl:"Couldn't import scene from the supplied URL. It's either malformed, or doesn't contain valid Excalidraw JSON data.",resetLibrary:"This will clear your library. Are you sure?",removeItemsFromsLibrary:"Delete {{count}} item(s) from library?",invalidEncryptionKey:"Encryption key must be of 22 characters. Live collaboration is disabled.",collabOfflineWarning:`No internet connection available.
Your changes will not be saved!`},kB={unsupportedFileType:"Unsupported file type.",imageInsertError:"Couldn't insert image. Try again later...",fileTooBig:"File is too big. Maximum allowed size is {{maxSize}}.",svgImageInsertError:"Couldn't insert SVG image. The SVG markup looks invalid.",failedToFetchImage:"Failed to fetch image.",cannotResolveCollabServer:"Couldn't connect to the collab server. Please reload the page and try again.",importLibraryError:"Couldn't load library",saveLibraryError:"Couldn't save library to storage. Please save your library to a file locally to make sure you don't lose changes.",collabSaveFailed:"Couldn't save to the backend database. If problems persist, you should save your file locally to ensure you don't lose your work.",collabSaveFailed_sizeExceeded:"Couldn't save to the backend database, the canvas seems to be too big. You should save the file locally to ensure you don't lose your work.",imageToolNotSupported:"Images are disabled.",brave_measure_text_error:{line1:"Looks like you are using Brave browser with the <bold>Aggressively Block Fingerprinting</bold> setting enabled.",line2:"This could result in breaking the <bold>Text Elements</bold> in your drawings.",line3:"We strongly recommend disabling this setting. You can follow <link>these steps</link> on how to do so.",line4:"If disabling this setting doesn't fix the display of text elements, please open an <issueLink>issue</issueLink> on our GitHub, or write us on <discordLink>Discord</discordLink>"},libraryElementTypeError:{embeddable:"Embeddable elements cannot be added to the library.",iframe:"IFrame elements cannot be added to the library.",image:"Support for adding images to the library coming soon!"},asyncPasteFailedOnRead:"Couldn't paste (couldn't read from system clipboard).",asyncPasteFailedOnParse:"Couldn't paste.",copyToSystemClipboardFailed:"Couldn't copy to clipboard."},LB={selection:"Selection",image:"Insert image",rectangle:"Rectangle",diamond:"Diamond",ellipse:"Ellipse",arrow:"Arrow",line:"Line",freedraw:"Draw",text:"Text",library:"Library",lock:"Keep selected tool active after drawing",penMode:"Pen mode - prevent touch",link:"Add / Update link for a selected shape",eraser:"Eraser",frame:"Frame tool",magicframe:"Wireframe to code",embeddable:"Web Embed",laser:"Laser pointer",hand:"Hand (panning tool)",extraTools:"More tools",mermaidToExcalidraw:"Mermaid to Excalidraw"},DB={rectangle:"Rectangle",diamond:"Diamond",ellipse:"Ellipse",arrow:"Arrow",line:"Line",freedraw:"Freedraw",text:"Text",image:"Image",group:"Group",frame:"Frame",magicframe:"Wireframe to code",embeddable:"Web Embed",selection:"Selection",iframe:"IFrame"},NB={canvasActions:"Canvas actions",selectedShapeActions:"Selected shape actions",shapes:"Shapes"},OB={dismissSearch:"Escape to dismiss search",canvasPanning:"To move canvas, hold mouse wheel or spacebar while dragging, or use the hand tool",linearElement:"Click to start multiple points, drag for single line",arrowTool:"Click to start multiple points, drag for single line. Press {{arrowShortcut}} again to change arrow type.",freeDraw:"Click and drag, release when you're finished",text:"Tip: you can also add text by double-clicking anywhere with the selection tool",embeddable:"Click-drag to create a website embed",text_selected:"Double-click or press ENTER to edit text",text_editing:"Press Escape or CtrlOrCmd+ENTER to finish editing",linearElementMulti:"Click on last point or press Escape or Enter to finish",lockAngle:"You can constrain angle by holding SHIFT",resize:`You can constrain proportions by holding SHIFT while resizing,
hold ALT to resize from the center`,resizeImage:`You can resize freely by holding SHIFT,
hold ALT to resize from the center`,rotate:"You can constrain angles by holding SHIFT while rotating",lineEditor_info:"Hold CtrlOrCmd and Double-click or press CtrlOrCmd + Enter to edit points",lineEditor_pointSelected:`Press Delete to remove point(s),
CtrlOrCmd+D to duplicate, or drag to move`,lineEditor_nothingSelected:`Select a point to edit (hold SHIFT to select multiple),
or hold Alt and click to add new points`,placeImage:"Click to place the image, or click and drag to set its size manually",publishLibrary:"Publish your own library",bindTextToElement:"Press enter to add text",createFlowchart:"Hold CtrlOrCmd and Arrow key to create a flowchart",deepBoxSelect:"Hold CtrlOrCmd to deep select, and to prevent dragging",eraserRevert:"Hold Alt to revert the elements marked for deletion",firefox_clipboard_write:'This feature can likely be enabled by setting the "dom.events.asyncClipboard.clipboardItem" flag to "true". To change the browser flags in Firefox, visit the "about:config" page.',disableSnapping:"Hold CtrlOrCmd to disable snapping",enterCropEditor:"Double click the image or press ENTER to crop the image",leaveCropEditor:"Click outside the image or press ENTER or ESCAPE to finish cropping"},PB={cannotShowPreview:"Cannot show preview",canvasTooBig:"The canvas may be too big.",canvasTooBigTip:"Tip: try moving the farthest elements a bit closer together."},FB={headingMain:"Encountered an error. Try <button>reloading the page</button>.",clearCanvasMessage:"If reloading doesn't work, try <button>clearing the canvas</button>.",clearCanvasCaveat:" This will result in loss of work ",trackedToSentry:"The error with identifier {{eventId}} was tracked on our system.",openIssueMessage:"We were very cautious not to include your scene information on the error. If your scene is not private, please consider following up on our <button>bug tracker</button>. Please include information below by copying and pasting into the GitHub issue.",sceneContent:"Scene content:"},BB={or:"Or"},zB={desc_intro:"Invite people to collaborate on your drawing.",desc_privacy:"Don't worry, the session is end-to-end encrypted, and fully private. Not even our server can see what you draw.",button_startSession:"Start session",button_stopSession:"Stop session",desc_inProgressIntro:"Live-collaboration session is now in progress.",desc_shareLink:"Share this link with anyone you want to collaborate with:",desc_exitSession:"Stopping the session will disconnect you from the room, but you'll be able to continue working with the scene, locally. Note that this won't affect other people, and they'll still be able to collaborate on their version.",shareTitle:"Join a live collaboration session on Excalidraw"},HB={title:"Error"},VB={disk_title:"Save to disk",disk_details:"Export the scene data to a file from which you can import later.",disk_button:"Save to file",link_title:"Shareable link",link_details:"Export as a read-only link.",link_button:"Export to Link",excalidrawplus_description:"Save the scene to your Excalidraw+ workspace.",excalidrawplus_button:"Export",excalidrawplus_exportError:"Couldn't export to Excalidraw+ at this moment..."},$B={blog:"Read our blog",click:"click",deepSelect:"Deep select",deepBoxSelect:"Deep select within box, and prevent dragging",createFlowchart:"Create a flowchart from a generic element",navigateFlowchart:"Navigate a flowchart",curvedArrow:"Curved arrow",curvedLine:"Curved line",documentation:"Documentation",doubleClick:"double-click",drag:"drag",editor:"Editor",editLineArrowPoints:"Edit line/arrow points",editText:"Edit text / add label",github:"Found an issue? Submit",howto:"Follow our guides",or:"or",preventBinding:"Prevent arrow binding",tools:"Tools",shortcuts:"Keyboard shortcuts",textFinish:"Finish editing (text editor)",textNewLine:"Add new line (text editor)",title:"Help",view:"View",zoomToFit:"Zoom to fit all elements",zoomToSelection:"Zoom to selection",toggleElementLock:"Lock/unlock selection",movePageUpDown:"Move page up/down",movePageLeftRight:"Move page left/right",cropStart:"Crop image",cropFinish:"Finish image cropping"},GB={title:"Clear canvas"},XB={title:"Publish library",itemName:"Item name",authorName:"Author name",githubUsername:"GitHub username",twitterUsername:"Twitter username",libraryName:"Library name",libraryDesc:"Library description",website:"Website",placeholder:{authorName:"Your name or username",libraryName:"Name of your library",libraryDesc:"Description of your library to help people understand its usage",githubHandle:"GitHub handle (optional), so you can edit the library once submitted for review",twitterHandle:"Twitter username (optional), so we know who to credit when promoting over Twitter",website:"Link to your personal website or elsewhere (optional)"},errors:{required:"Required",website:"Enter a valid URL"},noteDescription:"Submit your library to be included in the <link>public library repository</link> for other people to use in their drawings.",noteGuidelines:"The library needs to be manually approved first. Please read the <link>guidelines</link> before submitting. You will need a GitHub account to communicate and make changes if requested, but it is not strictly required.",noteLicense:"By submitting, you agree the library will be published under the <link>MIT License</link>, which in short means anyone can use them without restrictions.",noteItems:"Each library item must have its own name so it's filterable. The following library items will be included:",atleastOneLibItem:"Please select at least one library item to get started",republishWarning:"Note: some of the selected items are marked as already published/submitted. You should only resubmit items when updating an existing library or submission."},jB={title:"Library submitted",content:"Thank you {{authorName}}. Your library has been submitted for review. You can track the status <link>here</link>"},YB={resetLibrary:"Reset library",removeItemsFromLib:"Remove selected items from library"},WB={header:"Export image",label:{withBackground:"Background",onlySelected:"Only selected",darkMode:"Dark mode",embedScene:"Embed scene",scale:"Scale",padding:"Padding"},tooltip:{embedScene:`Scene data will be saved into the exported PNG/SVG file so that the scene can be restored from it.
Will increase exported file size.`},title:{exportToPng:"Export to PNG",exportToSvg:"Export to SVG",copyPngToClipboard:"Copy PNG to clipboard"},button:{exportToPng:"PNG",exportToSvg:"SVG",copyPngToClipboard:"Copy to clipboard"}},KB={tooltip:"Your drawings are end-to-end encrypted so Excalidraw's servers will never see them.",link:"Blog post on end-to-end encryption in Excalidraw"},ZB={angle:"Angle",shapes:"Shapes",height:"Height",scene:"Scene",selected:"Selected",storage:"Storage",fullTitle:"Canvas & Shape properties",title:"Properties",generalStats:"General",elementProperties:"Shape properties",total:"Total",version:"Version",versionCopy:"Click to copy",versionNotAvailable:"Version not available",width:"Width"},qB={addedToLibrary:"Added to library",copyStyles:"Copied styles.",copyToClipboard:"Copied to clipboard.",copyToClipboardAsPng:`Copied {{exportSelection}} to clipboard as PNG
({{exportColorScheme}})`,copyToClipboardAsSvg:`Copied {{exportSelection}} to clipboard as SVG
({{exportColorScheme}})`,fileSaved:"File saved.",fileSavedToFilename:"Saved to {filename}",canvas:"canvas",selection:"selection",pasteAsSingleElement:`Use {{shortcut}} to paste as a single element,
or paste into an existing text editor`,unableToEmbed:"Embedding this url is currently not allowed. Raise an issue on GitHub to request the url whitelisted",unrecognizedLinkFormat:"The link you embedded does not match the expected format. Please try to paste the 'embed' string provided by the source site",elementLinkCopied:"Link copied to clipboard"},QB={transparent:"Transparent",black:"Black",white:"White",red:"Red",pink:"Pink",grape:"Grape",violet:"Violet",gray:"Gray",blue:"Blue",cyan:"Cyan",teal:"Teal",green:"Green",yellow:"Yellow",orange:"Orange",bronze:"Bronze"},JB={app:{center_heading:"All your data is saved locally in your browser.",center_heading_plus:"Did you want to go to the Excalidraw+ instead?",menuHint:"Export, preferences, languages, ..."},defaults:{menuHint:"Export, preferences, and more...",center_heading:"Diagrams. Made. Simple.",toolbarHint:"Pick a tool & Start drawing!",helpHint:"Shortcuts & help"}},ez={mostUsedCustomColors:"Most used custom colors",colors:"Colors",shades:"Shades",hexCode:"Hex code",noShades:"No shades available for this color"},tz={action:{exportToImage:{title:"Export as image",button:"Export as image",description:"Export the scene data as an image from which you can import later."},saveToDisk:{title:"Save to disk",button:"Save to disk",description:"Export the scene data to a file from which you can import later."},excalidrawPlus:{title:"Excalidraw+",button:"Export to Excalidraw+",description:"Save the scene to your Excalidraw+ workspace."}},modal:{loadFromFile:{title:"Load from file",button:"Load from file",description:"Loading from a file will <bold>replace your existing content</bold>.<br></br>You can back up your drawing first using one of the options below."},shareableLink:{title:"Load from link",button:"Replace my content",description:"Loading external drawing will <bold>replace your existing content</bold>.<br></br>You can back up your drawing first by using one of the options below."}}},nz={title:"Mermaid to Excalidraw",button:"Insert",description:"Currently only <flowchartLink>Flowchart</flowchartLink>,<sequenceLink> Sequence, </sequenceLink> and <classLink>Class </classLink>Diagrams are supported. The other types will be rendered as image in Excalidraw.",syntax:"Mermaid Syntax",preview:"Preview"},iz={placeholder:"Quick search"},rz={badge:{old:"old"},sceneFonts:"In this scene",availableFonts:"Available fonts",empty:"No fonts found"},sz={empty:"No users found",hint:{text:"Click on user to follow",followStatus:"You're currently following this user",inCall:"User is in a voice call",micMuted:"User's microphone is muted",isSpeaking:"User is speaking"}},oz={title:"Command palette",shortcuts:{select:"Select",confirm:"Confirm",close:"Close"},recents:"Recently used",search:{placeholder:"Search menus, commands, and discover hidden gems",noMatch:"No matching commands..."},itemNotAvailable:"Command is not available...",shortcutHint:"For Command palette, use {{shortcut}}"},Q9={labels:IB,elementLink:xB,library:CB,search:AB,buttons:MB,alerts:RB,errors:kB,toolBar:LB,element:DB,headings:NB,hints:OB,canvasError:PB,errorSplash:FB,shareDialog:BB,roomDialog:zB,errorDialog:HB,exportDialog:VB,helpDialog:$B,clearCanvasDialog:GB,publishDialog:XB,publishSuccessDialog:jB,confirmDialog:YB,imageExportDialog:WB,encrypted:KB,stats:ZB,toast:qB,colors:QB,welcomeScreen:JB,colorPicker:ez,overwriteConfirm:tz,mermaid:nz,quickSearch:iz,fontList:rz,userList:sz,commandPalette:oz},Mle=Object.freeze(Object.defineProperty({__proto__:null,alerts:RB,buttons:MB,canvasError:PB,clearCanvasDialog:GB,colorPicker:ez,colors:QB,commandPalette:oz,confirmDialog:YB,default:Q9,element:DB,elementLink:xB,encrypted:KB,errorDialog:HB,errorSplash:FB,errors:kB,exportDialog:VB,fontList:rz,headings:NB,helpDialog:$B,hints:OB,imageExportDialog:WB,labels:IB,library:CB,mermaid:nz,overwriteConfirm:tz,publishDialog:XB,publishSuccessDialog:jB,quickSearch:iz,roomDialog:zB,search:AB,shareDialog:BB,stats:ZB,toast:qB,toolBar:LB,userList:sz,welcomeScreen:JB},Symbol.toStringTag,{value:"Module"})),az=100,lz=36,cz={"ar-SA":94,"az-AZ":17,"bg-BG":71,"bn-BD":52,"ca-ES":83,"cs-CZ":86,"da-DK":61,"de-DE":100,"el-GR":80,en:az,"es-ES":96,"eu-ES":97,"fa-IR":84,"fi-FI":76,"fr-FR":99,"gl-ES":86,"he-IL":77,"hi-IN":76,"hu-HU":76,"id-ID":91,"it-IT":98,"ja-JP":90,kaa:lz,"kab-KAB":76,"kk-KZ":18,"km-KH":83,"ko-KR":100,"ku-TR":87,"lt-LT":48,"lv-LV":77,"mr-IN":98,"my-MM":35,"nb-NO":93,"nl-NL":75,"nn-NO":67,"oc-FR":92,"pa-IN":78,"pl-PL":99,"pt-BR":91,"pt-PT":83,"ro-RO":99,"ru-RU":92,"si-LK":7,"sk-SK":100,"sl-SI":100,"sv-SE":100,"ta-IN":81,"th-TH":44,"tr-TR":87,"uk-UA":93,"vi-VN":49,"zh-CN":100,"zh-HK":22,"zh-TW":100},Rle=Object.freeze(Object.defineProperty({__proto__:null,default:cz,en:az,kaa:lz},Symbol.toStringTag,{value:"Module"})),kle=85,Cd={code:"en",label:"English"},o5=[Cd,...[{code:"ar-SA",label:"العربية",rtl:!0},{code:"bg-BG",label:"Български"},{code:"ca-ES",label:"Català"},{code:"cs-CZ",label:"Česky"},{code:"de-DE",label:"Deutsch"},{code:"el-GR",label:"Ελληνικά"},{code:"es-ES",label:"Español"},{code:"eu-ES",label:"Euskara"},{code:"fa-IR",label:"فارسی",rtl:!0},{code:"fi-FI",label:"Suomi"},{code:"fr-FR",label:"Français"},{code:"gl-ES",label:"Galego"},{code:"he-IL",label:"עברית",rtl:!0},{code:"hi-IN",label:"हिन्दी"},{code:"hu-HU",label:"Magyar"},{code:"id-ID",label:"Bahasa Indonesia"},{code:"it-IT",label:"Italiano"},{code:"ja-JP",label:"日本語"},{code:"kab-KAB",label:"Taqbaylit"},{code:"kk-KZ",label:"Қазақ тілі"},{code:"ko-KR",label:"한국어"},{code:"ku-TR",label:"Kurdî"},{code:"lt-LT",label:"Lietuvių"},{code:"lv-LV",label:"Latviešu"},{code:"my-MM",label:"Burmese"},{code:"nb-NO",label:"Norsk bokmål"},{code:"nl-NL",label:"Nederlands"},{code:"nn-NO",label:"Norsk nynorsk"},{code:"oc-FR",label:"Occitan"},{code:"pa-IN",label:"ਪੰਜਾਬੀ"},{code:"pl-PL",label:"Polski"},{code:"pt-BR",label:"Português Brasileiro"},{code:"pt-PT",label:"Português"},{code:"ro-RO",label:"Română"},{code:"ru-RU",label:"Русский"},{code:"sk-SK",label:"Slovenčina"},{code:"sv-SE",label:"Svenska"},{code:"sl-SI",label:"Slovenščina"},{code:"tr-TR",label:"Türkçe"},{code:"uk-UA",label:"Українська"},{code:"zh-CN",label:"简体中文"},{code:"zh-TW",label:"繁體中文"},{code:"vi-VN",label:"Tiếng Việt"},{code:"mr-IN",label:"मराठी"}].filter(e=>cz[e.code]>=kle).sort((e,t)=>e.label>t.label?1:-1)],uz="__test__";let Df=Cd,e2={};const dz=async e=>{if(Df=e,document.documentElement.dir=Df.rtl?"rtl":"ltr",document.documentElement.lang=Df.code,e.code.startsWith(uz))e2={};else try{e2=await mle(Object.assign({"./locales/ar-SA.json":()=>Ue(()=>import("./locales/ar-SA.json-D_jDFH8k.js"),__vite__mapDeps([])),"./locales/az-AZ.json":()=>Ue(()=>import("./locales/az-AZ.json-BV3iXazI.js"),__vite__mapDeps([])),"./locales/bg-BG.json":()=>Ue(()=>import("./locales/bg-BG.json-CFqJeJis.js"),__vite__mapDeps([])),"./locales/bn-BD.json":()=>Ue(()=>import("./locales/bn-BD.json-Dg0jTBuU.js"),__vite__mapDeps([])),"./locales/ca-ES.json":()=>Ue(()=>import("./locales/ca-ES.json-B_rqfBtq.js"),__vite__mapDeps([])),"./locales/cs-CZ.json":()=>Ue(()=>import("./locales/cs-CZ.json-Cd3Jrse6.js"),__vite__mapDeps([])),"./locales/da-DK.json":()=>Ue(()=>import("./locales/da-DK.json-DIUMM5f1.js"),__vite__mapDeps([])),"./locales/de-DE.json":()=>Ue(()=>import("./locales/de-DE.json-BF0RlQMn.js"),__vite__mapDeps([])),"./locales/el-GR.json":()=>Ue(()=>import("./locales/el-GR.json-DU1ye1AH.js"),__vite__mapDeps([])),"./locales/en.json":()=>Ue(()=>Promise.resolve().then(()=>Mle),void 0),"./locales/es-ES.json":()=>Ue(()=>import("./locales/es-ES.json-xlQfaHzf.js"),__vite__mapDeps([])),"./locales/eu-ES.json":()=>Ue(()=>import("./locales/eu-ES.json-DHzY6Edt.js"),__vite__mapDeps([])),"./locales/fa-IR.json":()=>Ue(()=>import("./locales/fa-IR.json-dG0Oexeb.js"),__vite__mapDeps([])),"./locales/fi-FI.json":()=>Ue(()=>import("./locales/fi-FI.json-Bujb5Dw7.js"),__vite__mapDeps([])),"./locales/fr-FR.json":()=>Ue(()=>import("./locales/fr-FR.json-XQSU67Np.js"),__vite__mapDeps([])),"./locales/gl-ES.json":()=>Ue(()=>import("./locales/gl-ES.json-DtDal_zw.js"),__vite__mapDeps([])),"./locales/he-IL.json":()=>Ue(()=>import("./locales/he-IL.json-DVcgm2lM.js"),__vite__mapDeps([])),"./locales/hi-IN.json":()=>Ue(()=>import("./locales/hi-IN.json-C8kzCSp9.js"),__vite__mapDeps([])),"./locales/hu-HU.json":()=>Ue(()=>import("./locales/hu-HU.json-DAfvrv_C.js"),__vite__mapDeps([])),"./locales/id-ID.json":()=>Ue(()=>import("./locales/id-ID.json-CBiVsIt-.js"),__vite__mapDeps([])),"./locales/it-IT.json":()=>Ue(()=>import("./locales/it-IT.json-WpaAwjln.js"),__vite__mapDeps([])),"./locales/ja-JP.json":()=>Ue(()=>import("./locales/ja-JP.json-lTAhYhc8.js"),__vite__mapDeps([])),"./locales/kaa.json":()=>Ue(()=>import("./locales/kaa.json-FVrrRyw0.js"),__vite__mapDeps([])),"./locales/kab-KAB.json":()=>Ue(()=>import("./locales/kab-KAB.json-BrNis2fB.js"),__vite__mapDeps([])),"./locales/kk-KZ.json":()=>Ue(()=>import("./locales/kk-KZ.json-D22q2uZy.js"),__vite__mapDeps([])),"./locales/km-KH.json":()=>Ue(()=>import("./locales/km-KH.json-c8LT4rcW.js"),__vite__mapDeps([])),"./locales/ko-KR.json":()=>Ue(()=>import("./locales/ko-KR.json-Be74AxMq.js"),__vite__mapDeps([])),"./locales/ku-TR.json":()=>Ue(()=>import("./locales/ku-TR.json-DnNoknS4.js"),__vite__mapDeps([])),"./locales/lt-LT.json":()=>Ue(()=>import("./locales/lt-LT.json-Bezae7cb.js"),__vite__mapDeps([])),"./locales/lv-LV.json":()=>Ue(()=>import("./locales/lv-LV.json-DjX28ylN.js"),__vite__mapDeps([])),"./locales/mr-IN.json":()=>Ue(()=>import("./locales/mr-IN.json-oZ81g7ZD.js"),__vite__mapDeps([])),"./locales/my-MM.json":()=>Ue(()=>import("./locales/my-MM.json-DYr6nfRL.js"),__vite__mapDeps([])),"./locales/nb-NO.json":()=>Ue(()=>import("./locales/nb-NO.json-KO5Ap4Cw.js"),__vite__mapDeps([])),"./locales/nl-NL.json":()=>Ue(()=>import("./locales/nl-NL.json-CF-IsFrk.js"),__vite__mapDeps([])),"./locales/nn-NO.json":()=>Ue(()=>import("./locales/nn-NO.json-BUxdfyBP.js"),__vite__mapDeps([])),"./locales/oc-FR.json":()=>Ue(()=>import("./locales/oc-FR.json-DJSOwdjr.js"),__vite__mapDeps([])),"./locales/pa-IN.json":()=>Ue(()=>import("./locales/pa-IN.json-CWeXowf0.js"),__vite__mapDeps([])),"./locales/percentages.json":()=>Ue(()=>Promise.resolve().then(()=>Rle),void 0),"./locales/pl-PL.json":()=>Ue(()=>import("./locales/pl-PL.json-DC_Gtqyg.js"),__vite__mapDeps([])),"./locales/pt-BR.json":()=>Ue(()=>import("./locales/pt-BR.json-BP870iwO.js"),__vite__mapDeps([])),"./locales/pt-PT.json":()=>Ue(()=>import("./locales/pt-PT.json-BCiUoe7O.js"),__vite__mapDeps([])),"./locales/ro-RO.json":()=>Ue(()=>import("./locales/ro-RO.json-DDtEzs-o.js"),__vite__mapDeps([])),"./locales/ru-RU.json":()=>Ue(()=>import("./locales/ru-RU.json-Cu66rc7c.js"),__vite__mapDeps([])),"./locales/si-LK.json":()=>Ue(()=>import("./locales/si-LK.json-D8rbKfZA.js"),__vite__mapDeps([])),"./locales/sk-SK.json":()=>Ue(()=>import("./locales/sk-SK.json-B-lk308q.js"),__vite__mapDeps([])),"./locales/sl-SI.json":()=>Ue(()=>import("./locales/sl-SI.json-C9l50axt.js"),__vite__mapDeps([])),"./locales/sv-SE.json":()=>Ue(()=>import("./locales/sv-SE.json-S0z3nuUO.js"),__vite__mapDeps([])),"./locales/ta-IN.json":()=>Ue(()=>import("./locales/ta-IN.json-Bb4XJg6y.js"),__vite__mapDeps([])),"./locales/th-TH.json":()=>Ue(()=>import("./locales/th-TH.json-D-2txP3v.js"),__vite__mapDeps([])),"./locales/tr-TR.json":()=>Ue(()=>import("./locales/tr-TR.json-C8iTlMZv.js"),__vite__mapDeps([])),"./locales/uk-UA.json":()=>Ue(()=>import("./locales/uk-UA.json-BmimCNFT.js"),__vite__mapDeps([])),"./locales/vi-VN.json":()=>Ue(()=>import("./locales/vi-VN.json-Cs9mO6qO.js"),__vite__mapDeps([])),"./locales/zh-CN.json":()=>Ue(()=>import("./locales/zh-CN.json-D5rso2fJ.js"),__vite__mapDeps([])),"./locales/zh-HK.json":()=>Ue(()=>import("./locales/zh-HK.json-Cr1Xzg-X.js"),__vite__mapDeps([])),"./locales/zh-TW.json":()=>Ue(()=>import("./locales/zh-TW.json-BhXss3zf.js"),__vite__mapDeps([]))}),`./locales/${Df.code}.json`)}catch(t){console.error(`Failed to load language ${e.code}:`,t.message),e2=Q9}zs.set(fz,e.code)},z0=()=>Df,jC=(e,t)=>{for(let n=0;n<t.length;++n){const i=t[n];if(e[i]===void 0)return;e=e[i]}if(typeof e=="string")return e},k=(e,t,n)=>{if(Df.code.startsWith(uz))return`‪[[${t?`${e}(${JSON.stringify(t).slice(1,-1)})`:e}]]‬`;const i=e.split(".");let r=jC(e2,i)||jC(Q9,i)||n;if(r===void 0){const s=`Can't find translation for ${e}`;return console.warn(s),""}if(t)for(const s in t)r=r.replace(`{{${s}}}`,String(t[s]));return r},fz=Jt(Cd.code),gn=()=>{const e=SB(fz);return{t:k,langCode:e}},Lle=(e,t)=>{const[n,i,r,s]=t,{x:o,y:a}=Os({sceneX:n,sceneY:i},e),{x:l,y:c}=Os({sceneX:r,sceneY:s},e);return l-o>e.width||c-a>e.height},hz=({scenePoint:e,viewportDimensions:t,zoom:n,offsets:i})=>{let r=(t.width-((i==null?void 0:i.right)??0))/2/n.value-e.x;r+=((i==null?void 0:i.left)??0)/2/n.value;let s=(t.height-((i==null?void 0:i.bottom)??0))/2/n.value-e.y;return s+=((i==null?void 0:i.top)??0)/2/n.value,{scrollX:r,scrollY:s}},H0=(e,t)=>{if(e=ioe(e),!e.length)return{scrollX:0,scrollY:0};let[n,i,r,s]=_t(e);Lle(t,[n,i,r,s])&&([n,i,r,s]=gae(e,Pt({clientX:t.scrollX,clientY:t.scrollY},t)));const o=(n+r)/2,a=(i+s)/2;return hz({scenePoint:{x:o,y:a},viewportDimensions:{width:t.width,height:t.height},zoom:t.zoom})},Aa=e=>Ge(Da(e,6),o9,a9),Dle=e=>Ge(Math.round(e),1,100),gz=e=>Ge(Math.round(e),1,100),Nle=c9.includes(devicePixelRatio)?devicePixelRatio:1,to=()=>({showWelcomeScreen:!1,theme:xe.LIGHT,collaborators:new Map,currentChartType:"bar",currentItemBackgroundColor:un.backgroundColor,currentItemEndArrowhead:"arrow",currentItemFillStyle:un.fillStyle,currentItemFontFamily:Pc,currentItemFontSize:ul,currentItemOpacity:un.opacity,currentItemRoughness:un.roughness,currentItemStartArrowhead:null,currentItemStrokeColor:un.strokeColor,currentItemRoundness:"round",currentItemArrowType:ei.round,currentItemStrokeStyle:un.strokeStyle,currentItemStrokeWidth:un.strokeWidth,currentItemTextAlign:Dm,currentHoveredFontFamily:null,cursorButton:"up",activeEmbeddable:null,newElement:null,editingTextElement:null,editingGroupId:null,editingLinearElement:null,activeTool:{type:"selection",customType:null,locked:un.locked,lastActiveTool:null},penMode:!1,penDetected:!1,errorMessage:null,exportBackground:!0,exportScale:Nle,exportEmbedScene:!1,exportWithDarkMode:!1,fileHandle:null,gridSize:nb,gridStep:fP,gridModeEnabled:!1,isBindingEnabled:!0,defaultSidebarDockedPreference:!1,isLoading:!1,isResizing:!1,isRotating:!1,lastPointerDownWith:"mouse",multiElement:null,name:null,contextMenu:null,openMenu:null,openPopup:null,openSidebar:null,openDialog:null,pasteDialog:{shown:!1,data:null},previousSelectedElementIds:{},resizingElement:null,scrolledOutside:!1,scrollX:0,scrollY:0,selectedElementIds:{},hoveredElementIds:{},selectedGroupIds:{},selectedElementsAreBeingDragged:!1,selectionElement:null,shouldCacheIgnoreZoom:!1,stats:{open:!1,panels:xf.generalStats|xf.elementProperties},startBoundElement:null,suggestedBindings:[],frameRendering:{enabled:!0,clip:!0,name:!0,outline:!0},frameToHighlight:null,editingFrame:null,elementsToHighlight:null,toast:null,viewBackgroundColor:Xe.white,zenModeEnabled:!1,zoom:{value:1},viewModeEnabled:!1,pendingImageElementId:null,showHyperlinkPopup:!1,selectedLinearElement:null,snapLines:[],originSnapOffset:{x:0,y:0},objectsSnapModeEnabled:!1,userToFollow:null,followedBy:new Set,isCropping:!1,croppingElementId:null,searchMatches:[]}),Ole=(e=>e)({showWelcomeScreen:{browser:!0,export:!1,server:!1},theme:{browser:!0,export:!1,server:!1},collaborators:{browser:!1,export:!1,server:!1},currentChartType:{browser:!0,export:!1,server:!1},currentItemBackgroundColor:{browser:!0,export:!1,server:!1},currentItemEndArrowhead:{browser:!0,export:!1,server:!1},currentItemFillStyle:{browser:!0,export:!1,server:!1},currentItemFontFamily:{browser:!0,export:!1,server:!1},currentItemFontSize:{browser:!0,export:!1,server:!1},currentItemRoundness:{browser:!0,export:!1,server:!1},currentItemArrowType:{browser:!0,export:!1,server:!1},currentItemOpacity:{browser:!0,export:!1,server:!1},currentItemRoughness:{browser:!0,export:!1,server:!1},currentItemStartArrowhead:{browser:!0,export:!1,server:!1},currentItemStrokeColor:{browser:!0,export:!1,server:!1},currentItemStrokeStyle:{browser:!0,export:!1,server:!1},currentItemStrokeWidth:{browser:!0,export:!1,server:!1},currentItemTextAlign:{browser:!0,export:!1,server:!1},currentHoveredFontFamily:{browser:!1,export:!1,server:!1},cursorButton:{browser:!0,export:!1,server:!1},activeEmbeddable:{browser:!1,export:!1,server:!1},newElement:{browser:!1,export:!1,server:!1},editingTextElement:{browser:!1,export:!1,server:!1},editingGroupId:{browser:!0,export:!1,server:!1},editingLinearElement:{browser:!1,export:!1,server:!1},activeTool:{browser:!0,export:!1,server:!1},penMode:{browser:!0,export:!1,server:!1},penDetected:{browser:!0,export:!1,server:!1},errorMessage:{browser:!1,export:!1,server:!1},exportBackground:{browser:!0,export:!1,server:!1},exportEmbedScene:{browser:!0,export:!1,server:!1},exportScale:{browser:!0,export:!1,server:!1},exportWithDarkMode:{browser:!0,export:!1,server:!1},fileHandle:{browser:!1,export:!1,server:!1},gridSize:{browser:!0,export:!0,server:!0},gridStep:{browser:!0,export:!0,server:!0},gridModeEnabled:{browser:!0,export:!0,server:!0},height:{browser:!1,export:!1,server:!1},isBindingEnabled:{browser:!1,export:!1,server:!1},defaultSidebarDockedPreference:{browser:!0,export:!1,server:!1},isLoading:{browser:!1,export:!1,server:!1},isResizing:{browser:!1,export:!1,server:!1},isRotating:{browser:!1,export:!1,server:!1},lastPointerDownWith:{browser:!0,export:!1,server:!1},multiElement:{browser:!1,export:!1,server:!1},name:{browser:!0,export:!1,server:!1},offsetLeft:{browser:!1,export:!1,server:!1},offsetTop:{browser:!1,export:!1,server:!1},contextMenu:{browser:!1,export:!1,server:!1},openMenu:{browser:!0,export:!1,server:!1},openPopup:{browser:!1,export:!1,server:!1},openSidebar:{browser:!0,export:!1,server:!1},openDialog:{browser:!1,export:!1,server:!1},pasteDialog:{browser:!1,export:!1,server:!1},previousSelectedElementIds:{browser:!0,export:!1,server:!1},resizingElement:{browser:!1,export:!1,server:!1},scrolledOutside:{browser:!0,export:!1,server:!1},scrollX:{browser:!0,export:!1,server:!1},scrollY:{browser:!0,export:!1,server:!1},selectedElementIds:{browser:!0,export:!1,server:!1},hoveredElementIds:{browser:!1,export:!1,server:!1},selectedGroupIds:{browser:!0,export:!1,server:!1},selectedElementsAreBeingDragged:{browser:!1,export:!1,server:!1},selectionElement:{browser:!1,export:!1,server:!1},shouldCacheIgnoreZoom:{browser:!0,export:!1,server:!1},stats:{browser:!0,export:!1,server:!1},startBoundElement:{browser:!1,export:!1,server:!1},suggestedBindings:{browser:!1,export:!1,server:!1},frameRendering:{browser:!1,export:!1,server:!1},frameToHighlight:{browser:!1,export:!1,server:!1},editingFrame:{browser:!1,export:!1,server:!1},elementsToHighlight:{browser:!1,export:!1,server:!1},toast:{browser:!1,export:!1,server:!1},viewBackgroundColor:{browser:!0,export:!0,server:!0},width:{browser:!1,export:!1,server:!1},zenModeEnabled:{browser:!0,export:!1,server:!1},zoom:{browser:!0,export:!1,server:!1},viewModeEnabled:{browser:!1,export:!1,server:!1},pendingImageElementId:{browser:!1,export:!1,server:!1},showHyperlinkPopup:{browser:!1,export:!1,server:!1},selectedLinearElement:{browser:!0,export:!1,server:!1},snapLines:{browser:!1,export:!1,server:!1},originSnapOffset:{browser:!1,export:!1,server:!1},objectsSnapModeEnabled:{browser:!0,export:!1,server:!1},userToFollow:{browser:!1,export:!1,server:!1},followedBy:{browser:!1,export:!1,server:!1},isCropping:{browser:!1,export:!1,server:!1},croppingElementId:{browser:!1,export:!1,server:!1},searchMatches:{browser:!1,export:!1,server:!1}}),J9=(e,t)=>{const n={};for(const i of Object.keys(e)){const r=Ole[i];if(r!=null&&r[t]){const s=e[i];n[i]=s}}return n},mz=e=>J9(e,"browser"),pz=e=>J9(e,"export"),Ple=e=>J9(e,"server"),Eo=({activeTool:e})=>e.type==="eraser",Ih=({activeTool:e})=>e.type==="hand";class St{constructor(t,n){this.deleted=t,this.inserted=n}static create(t,n,i,r){const s=i&&r!=="inserted"?i(t):t,o=i&&r!=="deleted"?i(n):n;return new St(s,o)}static calculate(t,n,i,r){if(t===n)return St.empty();const s={},o={};for(const c of this.distinctKeysIterator("full",t,n))s[c]=t[c],o[c]=n[c];const[a,l]=r?r(s,o):[s,o];return St.create(a,l,i)}static empty(){return new St({},{})}static isEmpty(t){return!Object.keys(t.deleted).length&&!Object.keys(t.inserted).length}static mergeObjects(t,n,i){const r={...t};for(const s of Object.keys(i))delete r[s];return{...r,...n}}static mergeArrays(t,n,i,r){return Object.values(St.mergeObjects(ra(t??[],r),ra(n??[],r),ra(i??[],r)))}static diffObjects(t,n,i,r){if(!(!t[i]&&!n[i])&&(typeof t[i]=="object"||typeof n[i]=="object")){const s=t[i]??{},o=n[i]??{},a=St.getLeftDifferences(s,o).reduce((c,u)=>(c[u]=r(s[u]),c),{}),l=St.getRightDifferences(s,o).reduce((c,u)=>(c[u]=r(o[u]),c),{});Object.keys(a).length||Object.keys(l).length?(Reflect.set(t,i,a),Reflect.set(n,i,l)):(Reflect.deleteProperty(t,i),Reflect.deleteProperty(n,i))}}static diffArrays(t,n,i,r){if(!(!t[i]&&!n[i])&&(Array.isArray(t[i])||Array.isArray(n[i]))){const s=Array.isArray(t[i])?t[i]:[],o=Array.isArray(n[i])?n[i]:[],a=ra(St.getLeftDifferences(ra(s,r),ra(o,r))),l=ra(St.getRightDifferences(ra(s,r),ra(o,r)));if(Object.keys(a).length||Object.keys(l).length){const c=s.filter(d=>a[r?r(d):String(d)]),u=o.filter(d=>l[r?r(d):String(d)]);Reflect.set(t,i,c),Reflect.set(n,i,u)}else Reflect.deleteProperty(t,i),Reflect.deleteProperty(n,i)}}static isLeftDifferent(t,n,i=!1){return!!this.distinctKeysIterator("left",t,n,i).next().value}static isRightDifferent(t,n,i=!1){return!!this.distinctKeysIterator("right",t,n,i).next().value}static getLeftDifferences(t,n,i=!1){return Array.from(this.distinctKeysIterator("left",t,n,i))}static getRightDifferences(t,n,i=!1){return Array.from(this.distinctKeysIterator("right",t,n,i))}static*distinctKeysIterator(t,n,i,r=!1){if(n===i)return;let s=[];t==="left"?s=Object.keys(n):t==="right"?s=Object.keys(i):t==="full"?s=Array.from(new Set([...Object.keys(n),...Object.keys(i)])):Ec(t,`Unknown distinctKeysIterator's join param "${t}"`,!0);for(const o of s){const a=n[o],l=i[o];if(a!==l){if(!r&&typeof a=="object"&&typeof l=="object"&&a!==null&&l!==null&&_i(a,l))continue;yield o}}}}class ki{constructor(t){this.delta=t}static calculate(t,n){const i=St.calculate(t,n,void 0,ki.postProcess);return new ki(i)}static empty(){return new ki(St.create({},{}))}inverse(){const t=St.create(this.delta.inserted,this.delta.deleted);return new ki(t)}applyTo(t,n){try{const{selectedElementIds:i={},selectedGroupIds:r={}}=this.delta.deleted,{selectedElementIds:s={},selectedGroupIds:o={},selectedLinearElementId:a,editingLinearElementId:l,...c}=this.delta.inserted,u=St.mergeObjects(t.selectedElementIds,s,i),d=St.mergeObjects(t.selectedGroupIds,o,r),f=a&&n.has(a)?new ce(n.get(a)):null,h=l&&n.has(l)?new ce(n.get(l)):null,m={...t,...c,selectedElementIds:u,selectedGroupIds:d,selectedLinearElement:typeof a<"u"?f:t.selectedLinearElement,editingLinearElement:typeof l<"u"?h:t.editingLinearElement},p=this.filterInvisibleChanges(t,m,n);return[m,p]}catch(i){return console.error("Couldn't apply appstate change",i),[t,!1]}}isEmpty(){return St.isEmpty(this.delta)}static postProcess(t,n){try{St.diffObjects(t,n,"selectedElementIds",i=>!0),St.diffObjects(t,n,"selectedGroupIds",i=>i??!1)}catch{console.error("Couldn't postprocess appstate change deltas.")}finally{return[t,n]}}filterInvisibleChanges(t,n,i){const r=Mb(t),s=Mb(n),o=St.isRightDifferent(ki.stripElementsProps(r),ki.stripElementsProps(s)),a=St.isRightDifferent(ki.stripStandaloneProps(r),ki.stripStandaloneProps(s));if(!o&&!a)return!1;const l={value:o};if(a){const c=St.getRightDifferences(ki.stripStandaloneProps(r),ki.stripStandaloneProps(s));let u=new Set;(c.includes("editingGroupId")||c.includes("selectedGroupIds"))&&(u=woe(i));for(const d of c)switch(d){case"selectedElementIds":n[d]=ki.filterSelectedElements(n[d],i,l);break;case"selectedGroupIds":n[d]=ki.filterSelectedGroups(n[d],u,l);break;case"croppingElementId":{const p=n[d],b=p&&i.get(p);b&&!b.isDeleted?l.value=!0:n[d]=null;break}case"editingGroupId":const f=n[d];f?u.has(f)?l.value=!0:n[d]=null:l.value=!0;break;case"selectedLinearElementId":case"editingLinearElementId":const h=ki.convertToAppStateKey(d),m=n[h];if(!m)l.value=!0;else{const p=i.get(m.elementId);p&&!p.isDeleted?l.value=!0:n[h]=null}break;default:Ec(d,`Unknown ObservedElementsAppState's key "${d}"`,!0)}}return l.value}static convertToAppStateKey(t){switch(t){case"selectedLinearElementId":return"selectedLinearElement";case"editingLinearElementId":return"editingLinearElement"}}static filterSelectedElements(t,n,i){const r=Object.keys(t);if(!r.length)return i.value=!0,t;const s={...t};for(const o of r){const a=n.get(o);a&&!a.isDeleted?i.value=!0:delete s[o]}return s}static filterSelectedGroups(t,n,i){if(!Object.keys(t).length)return i.value=!0,t;const s={...t};for(const o of Object.keys(s))n.has(o)?i.value=!0:delete s[o];return s}static stripElementsProps(t){const{editingGroupId:n,selectedGroupIds:i,selectedElementIds:r,editingLinearElementId:s,selectedLinearElementId:o,croppingElementId:a,...l}=t;return l}static stripStandaloneProps(t){const{name:n,viewBackgroundColor:i,...r}=t;return r}}const At=class At{constructor(t,n,i){this.added=t,this.removed=n,this.updated=i}static create(t,n,i,r={shouldRedistribute:!1}){let s;if(r.shouldRedistribute){const o=new Map,a=new Map,l=new Map,c=[...t,...n,...i];for(const[u,d]of c)this.satisfiesAddition(d)?o.set(u,d):this.satisfiesRemoval(d)?a.set(u,d):l.set(u,d);s=new At(o,a,l)}else s=new At(t,n,i);return s}static validate(t,n,i){for(const[r,s]of t[n].entries())if(!i(s))throw console.error(`Broken invariant for "${n}" delta, element "${r}", delta:`,s),new Error(`ElementsChange invariant broken for element "${r}".`)}static calculate(t,n){if(t===n)return At.empty();const i=new Map,r=new Map,s=new Map;for(const o of t.values())if(!n.get(o.id)){const l={...o,isDeleted:!1},c={isDeleted:!0},u=St.create(l,c,At.stripIrrelevantProps);r.set(o.id,u)}for(const o of n.values()){const a=t.get(o.id);if(!a){const l={isDeleted:!0},c={...o,isDeleted:!1},u=St.create(l,c,At.stripIrrelevantProps);i.set(o.id,u);continue}if(a.versionNonce!==o.versionNonce){const l=St.calculate(a,o,At.stripIrrelevantProps,At.postProcess);if(typeof a.isDeleted=="boolean"&&typeof o.isDeleted=="boolean"&&a.isDeleted!==o.isDeleted){a.isDeleted&&!o.isDeleted?i.set(o.id,l):r.set(o.id,l);continue}St.isEmpty(l)||s.set(o.id,l)}}return At.create(i,r,s)}static empty(){return At.create(new Map,new Map,new Map)}inverse(){const t=s=>{const o=new Map;for(const[a,l]of s.entries())o.set(a,St.create(l.inserted,l.deleted));return o},n=t(this.added),i=t(this.removed),r=t(this.updated);return At.create(i,n,r)}isEmpty(){return this.added.size===0&&this.removed.size===0&&this.updated.size===0}applyLatestChanges(t){const n=a=>l=>{const c={};for(const u of Object.keys(l))switch(u){case"boundElements":c[u]=l[u];break;default:c[u]=a[u]}return c},i=a=>{const l=new Map;for(const[c,u]of a.entries()){const d=t.get(c);if(d){const f=St.create(u.deleted,u.inserted,n(d),"inserted");l.set(c,f)}else l.set(c,u)}return l},r=i(this.added),s=i(this.removed),o=i(this.updated);return At.create(r,s,o,{shouldRedistribute:!0})}applyTo(t,n){let i=Us(new Map(t)),r;const s={containsVisibleDifference:!1,containsZindexDifference:!1};try{const o=At.createApplier(i,n,s),a=o(this.added),l=o(this.removed),c=o(this.updated),u=this.resolveConflicts(t,i);r=new Map([...a,...l,...c,...u])}catch(o){return console.error("Couldn't apply elements change",o),[t,!0]}try{At.redrawTextBoundingBoxes(i,r),i=At.reorderElements(i,r,s),At.redrawBoundArrows(i,r)}catch(o){console.error("Couldn't mutate elements after applying elements change",o)}finally{return[i,s.containsVisibleDifference]}}static applyDelta(t,n,i={containsVisibleDifference:!0,containsZindexDifference:!0}){var o,a;const{boundElements:r,...s}=n.inserted;if((o=n.deleted.boundElements)!=null&&o.length||(a=n.inserted.boundElements)!=null&&a.length){const l=St.mergeArrays(t.boundElements,n.inserted.boundElements,n.deleted.boundElements,c=>c.id);Object.assign(s,{boundElements:l})}if(it(t)){const l=n;(l.deleted.crop||l.inserted.crop)&&Object.assign(s,{crop:l.inserted.crop??null})}if(!i.containsVisibleDifference){const{index:l,...c}=s,u=At.checkForVisibleDifference(t,c);i.containsVisibleDifference=u}return i.containsZindexDifference||(i.containsZindexDifference=n.deleted.index!==n.inserted.index),Ce(t,s)}static checkForVisibleDifference(t,n){return t.isDeleted&&n.isDeleted!==!1?!1:t.isDeleted&&n.isDeleted===!1||t.isDeleted===!1&&n.isDeleted?!0:St.isRightDifferent(t,n)}resolveConflicts(t,n){const i=new Map,r=(c,u)=>{const d=n.get(c.id);if(!d)return;let f;t.get(c.id)===d?f=Ce(d,u):f=ee(d,u),i.set(f.id,f),n.set(f.id,f)};for(const[c]of this.removed)At.unbindAffected(t,n,c,r);for(const[c]of this.added)At.rebindAffected(t,n,c,r);for(const[c]of Array.from(this.updated).filter(([u,d])=>Object.keys({...d.deleted,...d.inserted}).find(f=>Vse.has(f)))){const u=n.get(c);!u||u.isDeleted||At.rebindAffected(t,n,c,r)}const s=new Map(Array.from(t).filter(([c])=>i.has(c))),{added:o,removed:a,updated:l}=At.calculate(s,i);for(const[c,u]of o)this.added.set(c,u);for(const[c,u]of a)this.removed.set(c,u);for(const[c,u]of l)this.updated.set(c,u);return i}static unbindAffected(t,n,i,r){const s=()=>t.get(i),o=()=>n.get(i);Af.unbindAffected(n,s(),r),Af.unbindAffected(n,o(),r),Mf.unbindAffected(n,s(),r),Mf.unbindAffected(n,o(),r)}static rebindAffected(t,n,i,r){const s=()=>t.get(i),o=()=>n.get(i);Af.unbindAffected(n,s(),r),Af.rebindAffected(n,o(),r),Mf.unbindAffected(n,s(),(a,l)=>{ue(a)&&r(a,l)}),Mf.rebindAffected(n,o(),r)}static redrawTextBoundingBoxes(t,n){const i=new Map;for(const r of n.values()){if(jt(r)){const{containerId:s}=r,o=s?t.get(s):void 0;o&&i.set(o.id,{container:o,boundText:r})}if(ys(r)){const s=_c(r),o=s?t.get(s):void 0;o&&i.set(r.id,{container:r,boundText:o})}}for(const{container:r,boundText:s}of i.values())r.isDeleted||s.isDeleted||Ji(s,r,t,!1)}static redrawBoundArrows(t,n){for(const i of n.values())!i.isDeleted&&qs(i)&&pr(i,t,{})}static reorderElements(t,n,i){if(!i.containsZindexDifference)return t;const r=Array.from(t.values()),s=LF([...r]),o=St.getRightDifferences(r,s,!0).reduce((a,l)=>{const c=r[Number(l)];return c&&n.has(c.id)&&a.set(c.id,c),a},new Map);return!i.containsVisibleDifference&&o.size&&(i.containsVisibleDifference=!0),Se(Qs(s,o))}static postProcess(t,n){try{St.diffArrays(t,n,"boundElements",i=>i.id)}catch{console.error("Couldn't postprocess elements change deltas.")}finally{return[t,n]}}static stripIrrelevantProps(t){const{id:n,updated:i,version:r,versionNonce:s,seed:o,...a}=t;return a}};F(At,"satisfiesAddition",({deleted:t,inserted:n})=>t.isDeleted===!0&&!n.isDeleted),F(At,"satisfiesRemoval",({deleted:t,inserted:n})=>!t.isDeleted&&n.isDeleted===!0),F(At,"satisfiesUpdate",({deleted:t,inserted:n})=>!!t.isDeleted==!!n.isDeleted),F(At,"createApplier",(t,n,i)=>{const r=At.createGetter(t,n,i);return s=>Array.from(s.entries()).reduce((o,[a,l])=>{const c=r(a,l.inserted);if(c){const u=At.applyDelta(c,l,i);t.set(u.id,u),o.set(u.id,u)}return o},new Map)}),F(At,"createGetter",(t,n,i)=>(r,s)=>{let o=t.get(r);return o||(o=n.get(r),o&&(i.containsZindexDifference=!0,(s.isDeleted===!1||s.isDeleted!==!0&&o.isDeleted===!1)&&(i.containsVisibleDifference=!0))),o});let Ab=At;class vo{constructor(){F(this,"subscribers",[])}on(...t){const n=t.flat().filter(i=>typeof i=="function");return this.subscribers.push(...n),()=>this.off(n)}once(...t){const n=t.flat().filter(r=>typeof r=="function");n.push(()=>i());const i=this.on(...n);return i}off(...t){const n=t.flat();this.subscribers=this.subscribers.filter(i=>!n.includes(i))}trigger(...t){for(const n of this.subscribers)n(...t);return this}clear(){this.subscribers=[]}}const Uz="__observedAppState",Mb=e=>{var n,i;const t={name:e.name,editingGroupId:e.editingGroupId,viewBackgroundColor:e.viewBackgroundColor,selectedElementIds:e.selectedElementIds,selectedGroupIds:e.selectedGroupIds,editingLinearElementId:((n=e.editingLinearElement)==null?void 0:n.elementId)||null,selectedLinearElementId:((i=e.selectedLinearElement)==null?void 0:i.elementId)||null,croppingElementId:e.croppingElementId};return Reflect.defineProperty(t,Uz,{value:!0,enumerable:!1}),t},Fle=e=>!!Reflect.get(e,Uz),Z={IMMEDIATELY:"IMMEDIATELY",NEVER:"NEVER",EVENTUALLY:"EVENTUALLY"};class Ble{constructor(t,n){this.elementsChange=t,this.appStateChange=n}}class zle{constructor(){F(this,"onStoreIncrementEmitter",new vo);F(this,"scheduledActions",new Set);F(this,"_snapshot",V0.empty());F(this,"shouldCaptureIncrement",()=>{this.scheduleAction(Z.IMMEDIATELY)});F(this,"shouldUpdateSnapshot",()=>{this.scheduleAction(Z.NEVER)});F(this,"scheduleAction",t=>{this.scheduledActions.add(t),this.satisfiesScheduledActionsInvariant()});F(this,"commit",(t,n)=>{try{this.scheduledActions.has(Z.IMMEDIATELY)?this.captureIncrement(t,n):this.scheduledActions.has(Z.NEVER)&&this.updateSnapshot(t,n)}finally{this.satisfiesScheduledActionsInvariant(),this.scheduledActions=new Set}});F(this,"captureIncrement",(t,n)=>{const i=this.snapshot,r=this.snapshot.maybeClone(t,n);if(i!==r){const s=r.meta.didElementsChange?Ab.calculate(i.elements,r.elements):Ab.empty(),o=r.meta.didAppStateChange?ki.calculate(i.appState,r.appState):ki.empty();(!s.isEmpty()||!o.isEmpty())&&this.onStoreIncrementEmitter.trigger(new Ble(s,o)),this.snapshot=r}});F(this,"updateSnapshot",(t,n)=>{const i=this.snapshot.maybeClone(t,n);this.snapshot!==i&&(this.snapshot=i)});F(this,"filterUncomittedElements",(t,n)=>{for(const[i,r]of t.entries()){if(!n.get(i))continue;const o=this.snapshot.elements.get(i);o?o.version<r.version&&n.set(i,o):n.delete(i)}return n});F(this,"clear",()=>{this.snapshot=V0.empty(),this.scheduledActions=new Set});F(this,"satisfiesScheduledActionsInvariant",()=>{if(!(this.scheduledActions.size>=0&&this.scheduledActions.size<=3)){const t=`There can be at most three store actions scheduled at the same time, but there are "${this.scheduledActions.size}".`;console.error(t,this.scheduledActions.values())}})}get snapshot(){return this._snapshot}set snapshot(t){this._snapshot=t}}class V0{constructor(t,n,i={didElementsChange:!1,didAppStateChange:!1,isEmpty:!1}){this.elements=t,this.appState=n,this.meta=i}static empty(){return new V0(new Map,Mb(to()),{didElementsChange:!1,didAppStateChange:!1,isEmpty:!0})}isEmpty(){return this.meta.isEmpty}maybeClone(t,n){const i=this.maybeCreateElementsSnapshot(t),r=this.maybeCreateAppStateSnapshot(n);let s=!1,o=!1;return this.elements!==i&&(s=!0),this.appState!==r&&(o=!0),!s&&!o?this:new V0(i,r,{didElementsChange:s,didAppStateChange:o})}maybeCreateAppStateSnapshot(t){if(!t)return this.appState;const n=Fle(t)?t:Mb(t);return this.detectChangedAppState(n)?n:this.appState}detectChangedAppState(t){return!_i(this.appState,t,{selectedElementIds:_i,selectedGroupIds:_i})}maybeCreateElementsSnapshot(t){return t?this.detectChangedElements(t)?this.createElementsSnapshot(t):this.elements:this.elements}detectChangedElements(t){if(this.elements===t)return!1;if(this.elements.size!==t.size)return!0;const n=Array.from(t.keys());for(let i=n.length-1;i>=0;i--){const r=this.elements.get(n[i]),s=t.get(n[i]);if(!r||!s||r.id!==s.id||r.versionNonce!==s.versionNonce)return!0}return!1}createElementsSnapshot(t){const n=new Map;for(const[i,r]of this.elements.entries())t.get(i)?n.set(i,r):n.set(i,Ce(r,{isDeleted:!0}));for(const[i,r]of t.entries()){const s=n.get(i);(!s||s&&s.versionNonce!==r.versionNonce)&&n.set(i,xd(r))}return n}}const Ns=e=>"var(--icon-fill-color)",bz=e=>e===xe.LIGHT?ai.white:"#1e1e1e",Y=(e,t=512)=>{const{width:n=512,height:i=n,mirror:r,style:s,...o}=typeof t=="number"?{width:t}:t;return g("svg",{"aria-hidden":"true",focusable:"false",role:"img",viewBox:`0 0 ${n} ${i}`,className:me({"rtl-mirror":r}),style:s,...o,children:typeof e=="string"?g("path",{fill:"currentColor",d:e}):e})},ae={width:24,height:24,fill:"none",strokeWidth:2,stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"},Oe={width:20,height:20,fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"};Y(P("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("rect",{x:3,y:8,width:18,height:4,rx:1}),g("line",{x1:12,y1:8,x2:12,y2:21}),g("path",{d:"M19 12v7a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-7"}),g("path",{d:"M7.5 8a2.5 2.5 0 0 1 0 -5a4.8 8 0 0 1 4.5 5a4.8 8 0 0 1 4.5 -5a2.5 2.5 0 0 1 0 5"})]}),ae);const e_=Y(P("g",{strokeWidth:"1.25",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M3 19a9 9 0 0 1 9 0a9 9 0 0 1 9 0"}),g("path",{d:"M3 6a9 9 0 0 1 9 0a9 9 0 0 1 9 0"}),g("line",{x1:"3",y1:"6",x2:"3",y2:"19"}),g("line",{x1:"12",y1:"6",x2:"12",y2:"19"}),g("line",{x1:"21",y1:"6",x2:"21",y2:"19"})]}),ae),Hle=Y(P("svg",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),g("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),ae),Vle=Y(P("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("circle",{cx:"12",cy:"12",r:"1"}),g("circle",{cx:"12",cy:"19",r:"1"}),g("circle",{cx:"12",cy:"5",r:"1"})]}),ae),$le=Y(P("svg",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M9 4v6l-2 4v2h10v-2l-2 -4v-6"}),g("line",{x1:"12",y1:"16",x2:"12",y2:"21"}),g("line",{x1:"8",y1:"4",x2:"16",y2:"4"})]}),ae),a5=Y(P("g",{children:[g("path",{d:"M13.542 8.542H6.458a2.5 2.5 0 0 0-2.5 2.5v3.75a2.5 2.5 0 0 0 2.5 2.5h7.084a2.5 2.5 0 0 0 2.5-2.5v-3.75a2.5 2.5 0 0 0-2.5-2.5Z",stroke:"currentColor",strokeWidth:"1.25"}),g("path",{d:"M10 13.958a1.042 1.042 0 1 0 0-2.083 1.042 1.042 0 0 0 0 2.083Z",stroke:"currentColor",strokeWidth:"1.25"}),g("mask",{id:"UnlockedIcon",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:6,y:1,width:9,height:9,children:g("path",{stroke:"none",d:"M6.399 9.561V5.175c0-.93.401-1.823 1.116-2.48a3.981 3.981 0 0 1 2.693-1.028c1.01 0 1.98.37 2.694 1.027.715.658 1.116 1.55 1.116 2.481",fill:"#fff"})}),g("g",{mask:"url(#UnlockedIcon)",children:g("path",{stroke:"none",d:"M5.149 9.561v1.25h2.5v-1.25h-2.5Zm5.06-7.894V.417v1.25Zm2.559 3.508v1.25h2.5v-1.25h-2.5ZM7.648 8.51V5.175h-2.5V8.51h2.5Zm0-3.334c0-.564.243-1.128.713-1.561L6.668 1.775c-.959.883-1.52 2.104-1.52 3.4h2.5Zm.713-1.561a2.732 2.732 0 0 1 1.847-.697v-2.5c-1.31 0-2.585.478-3.54 1.358L8.36 3.614Zm1.847-.697c.71 0 1.374.26 1.847.697l1.694-1.839a5.231 5.231 0 0 0-3.54-1.358v2.5Zm1.847.697c.47.433.713.997.713 1.561h2.5c0-1.296-.56-2.517-1.52-3.4l-1.693 1.839Z",fill:"currentColor"})})]}),Oe),t_=Y(P("g",{strokeWidth:"1.25",children:[g("path",{d:"M13.542 8.542H6.458a2.5 2.5 0 0 0-2.5 2.5v3.75a2.5 2.5 0 0 0 2.5 2.5h7.084a2.5 2.5 0 0 0 2.5-2.5v-3.75a2.5 2.5 0 0 0-2.5-2.5Z"}),g("path",{d:"M10 13.958a1.042 1.042 0 1 0 0-2.083 1.042 1.042 0 0 0 0 2.083Z"}),g("path",{d:"M6.667 8.333V5.417C6.667 3.806 8.159 2.5 10 2.5c1.841 0 3.333 1.306 3.333 2.917v2.916"})]}),Oe),Gle=Y(P(ge,{children:[g("path",{d:"M38.5 83.5c-14-2-17.833-10.473-21-22.5C14.333 48.984 12 22 12 12.5",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),g("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m12.005 10.478 7.905 14.423L6 25.75l6.005-15.273Z",fill:"currentColor"}),g("path",{d:"M12.005 10.478c1.92 3.495 3.838 7 7.905 14.423m-7.905-14.423c3.11 5.683 6.23 11.368 7.905 14.423m0 0c-3.68.226-7.35.455-13.91.85m13.91-.85c-5.279.33-10.566.647-13.91.85m0 0c1.936-4.931 3.882-9.86 6.005-15.273M6 25.75c2.069-5.257 4.135-10.505 6.005-15.272",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"})]}),{width:41,height:94,fill:"none"}),Xle=Y(P(ge,{children:[g("path",{d:"M18.026 1.232c-5.268 13.125-5.548 33.555 3.285 42.311 8.823 8.75 33.31 12.304 42.422 13.523",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),g("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m72.181 59.247-13.058-10-2.948 13.62 16.006-3.62Z",fill:"currentColor"}),g("path",{d:"M72.181 59.247c-3.163-2.429-6.337-4.856-13.058-10m13.058 10c-5.145-3.936-10.292-7.882-13.058-10m0 0c-.78 3.603-1.563 7.196-2.948 13.62m2.948-13.62c-1.126 5.168-2.24 10.346-2.948 13.62m0 0c5.168-1.166 10.334-2.343 16.006-3.62m-16.006 3.62c5.51-1.248 11.01-2.495 16.006-3.62",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"})]}),{width:85,height:71,fill:"none"}),jle=Y(P(ge,{children:[g("path",{d:"M1 77c14-2 31.833-11.973 35-24 3.167-12.016-6-35-9.5-43.5",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),g("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m24.165 1.093-2.132 16.309 13.27-4.258-11.138-12.05Z",fill:"currentColor"}),g("path",{d:"M24.165 1.093c-.522 3.953-1.037 7.916-2.132 16.309m2.131-16.309c-.835 6.424-1.68 12.854-2.13 16.308m0 0c3.51-1.125 7.013-2.243 13.27-4.257m-13.27 4.257c5.038-1.608 10.08-3.232 13.27-4.257m0 0c-3.595-3.892-7.197-7.777-11.14-12.05m11.14 12.05c-3.837-4.148-7.667-8.287-11.14-12.05",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"})]}),{width:38,height:78,fill:"none"}),DE=Y(g("g",{fill:"currentColor",children:g("path",{d:"M39.9 32.889a.326.326 0 0 0-.279-.056c-2.094-3.083-4.774-6-7.343-8.833l-.419-.472a.212.212 0 0 0-.056-.139.586.586 0 0 0-.167-.111l-.084-.083-.056-.056c-.084-.167-.28-.278-.475-.167-.782.39-1.507.973-2.206 1.528-.92.722-1.842 1.445-2.708 2.25a8.405 8.405 0 0 0-.977 1.028c-.14.194-.028.361.14.444-.615.611-1.23 1.223-1.843 1.861a.315.315 0 0 0-.084.223c0 .083.056.166.111.194l1.09.833v.028c1.535 1.528 4.244 3.611 7.12 5.861.418.334.865.667 1.284 1 .195.223.39.473.558.695.084.11.28.139.391.055.056.056.14.111.196.167a.398.398 0 0 0 .167.056.255.255 0 0 0 .224-.111.394.394 0 0 0 .055-.167c.029 0 .028.028.056.028a.318.318 0 0 0 .224-.084l5.082-5.528a.309.309 0 0 0 0-.444Zm-14.63-1.917a.485.485 0 0 0 .111.14c.586.5 1.2 1 1.843 1.555l-2.569-1.945-.251-.166c-.056-.028-.112-.084-.168-.111l-.195-.167.056-.056.055-.055.112-.111c.866-.861 2.346-2.306 3.1-3.028-.81.805-2.43 3.167-2.095 3.944Zm8.767 6.89-2.122-1.612a44.713 44.713 0 0 0-2.625-2.5c1.145.861 2.122 1.611 2.262 1.75 1.117.972 1.06.806 1.815 1.445l.921.666a1.06 1.06 0 0 1-.251.25Zm.558.416-.056-.028c.084-.055.168-.111.252-.194l-.196.222ZM1.089 5.75c.055.361.14.722.195 1.056.335 1.833.67 3.5 1.284 4.75l.252.944c.084.361.223.806.363.917 1.424 1.25 3.602 3.11 5.947 4.889a.295.295 0 0 0 .363 0s0 .027.028.027a.254.254 0 0 0 .196.084.318.318 0 0 0 .223-.084c2.988-3.305 5.221-6.027 6.813-8.305.112-.111.14-.278.14-.417.111-.111.195-.25.307-.333.111-.111.111-.306 0-.39l-.028-.027c0-.055-.028-.139-.084-.167-.698-.666-1.2-1.138-1.731-1.638-.922-.862-1.871-1.75-3.881-3.75l-.028-.028c-.028-.028-.056-.056-.112-.056-.558-.194-1.703-.389-3.127-.639C6.087 2.223 3.21 1.723.614.944c0 0-.168 0-.196.028l-.083.084c-.028.027-.056.055-.224.11h.056-.056c.028.167.028.278.084.473 0 .055.112.5.112.555l.782 3.556Zm15.496 3.278-.335-.334c.084.112.196.195.335.334Zm-3.546 4.666-.056.056c0-.028.028-.056.056-.056Zm-2.038-10c.168.167.866.834 1.033.973-.726-.334-2.54-1.167-3.379-1.445.838.167 1.983.334 2.346.472ZM1.424 2.306c.419.722.754 3.222 1.089 5.666-.196-.778-.335-1.555-.503-2.278-.251-1.277-.503-2.416-.838-3.416.056 0 .14 0 .252.028Zm-.168-.584c-.112 0-.223-.028-.307-.028 0-.027 0-.055-.028-.055.14 0 .223.028.335.083Zm-1.089.222c0-.027 0-.027 0 0ZM39.453 1.333c.028-.11-.558-.61-.363-.639.42-.027.42-.666 0-.666-.558.028-1.144.166-1.675.25-.977.194-1.982.389-2.96.61-2.205.473-4.383.973-6.561 1.557-.67.194-1.424.333-2.066.666-.224.111-.196.333-.084.472-.056.028-.084.028-.14.056-.195.028-.363.056-.558.083-.168.028-.252.167-.224.334 0 .027.028.083.028.11-1.173 1.556-2.485 3.195-3.909 4.945-1.396 1.611-2.876 3.306-4.356 5.056-4.719 5.5-10.052 11.75-15.943 17.25a.268.268 0 0 0 0 .389c.028.027.056.055.084.055-.084.084-.168.14-.252.222-.056.056-.084.111-.084.167a.605.605 0 0 0-.111.139c-.112.111-.112.305.028.389.111.11.307.11.39-.028.029-.028.029-.056.056-.056a.44.44 0 0 1 .615 0c.335.362.67.723.977 1.028l-.698-.583c-.112-.111-.307-.083-.39.028-.113.11-.085.305.027.389l7.427 6.194c.056.056.112.056.196.056s.14-.028.195-.084l.168-.166c.028.027.083.027.111.027.084 0 .14-.027.196-.083 10.052-10.055 18.15-17.639 27.42-24.417.083-.055.111-.166.111-.25.112 0 .196-.083.251-.194 1.704-5.194 2.039-9.806 2.15-12.083v-.028c0-.028.028-.056.028-.083.028-.056.028-.084.028-.084a1.626 1.626 0 0 0-.111-1.028ZM21.472 9.5c.446-.5.893-1.028 1.34-1.5-2.876 3.778-7.65 9.583-14.408 16.5 4.607-5.083 9.242-10.333 13.068-15ZM5.193 35.778h.084-.084Zm3.462 3.194c-.027-.028-.027-.028 0-.028v.028Zm4.16-3.583c.224-.25.448-.472.699-.722 0 0 0 .027.028.027-.252.223-.475.445-.726.695Zm1.146-1.111c.14-.14.279-.334.446-.5l.028-.028c1.648-1.694 3.351-3.389 5.082-5.111l.028-.028c.419-.333.921-.694 1.368-1.028a379.003 379.003 0 0 0-6.952 6.695ZM24.794 6.472c-.921 1.195-1.954 2.778-2.82 4.028-2.736 3.944-11.532 13.583-11.727 13.75a1976.983 1976.983 0 0 1-8.042 7.639l-.167.167c-.14-.167-.14-.417.028-.556C14.49 19.861 22.03 10.167 25.074 5.917c-.084.194-.14.36-.28.555Zm4.83 5.695c-1.116-.64-1.646-1.64-1.34-2.611l.084-.334c.028-.083.084-.194.14-.277.307-.5.754-.917 1.257-1.167.027 0 .055 0 .083-.028-.028-.056-.028-.139-.028-.222.028-.167.14-.278.335-.278.335 0 1.369.306 1.76.639.111.083.223.194.335.305.14.167.363.445.474.667.056.028.112.306.196.445.056.222.111.472.084.694-.028.028 0 .194-.028.194a2.668 2.668 0 0 1-.363 1.028c-.028.028-.028.056-.056.084l-.028.027c-.14.223-.335.417-.53.556-.643.444-1.369.583-2.095.389 0 0-.195-.084-.28-.111Zm8.154-.834a39.098 39.098 0 0 1-.893 3.167c0 .028-.028.083 0 .111-.056 0-.084.028-.14.056-2.206 1.61-4.356 3.305-6.506 5.028 1.843-1.64 3.686-3.306 5.613-4.945.558-.5.949-1.139 1.06-1.861l.28-1.667v-.055c.14-.334.67-.195.586.166Z",fill:"currentColor"})}),{width:40,height:40,fill:"none"}),Yle=Y(P("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M6 6l4.153 11.793a0.365 .365 0 0 0 .331 .207a0.366 .366 0 0 0 .332 -.207l2.184 -4.793l4.787 -1.994a0.355 .355 0 0 0 .213 -.323a0.355 .355 0 0 0 -.213 -.323l-11.787 -4.36z"}),g("path",{d:"M13.5 13.5l4.5 4.5"})]}),{fill:"none",width:22,height:22,strokeWidth:1.25}),Wle=Y(P("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"})]}),ae),Kle=Y(P("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M10.5 20.4l-6.9 -6.9c-.781 -.781 -.781 -2.219 0 -3l6.9 -6.9c.781 -.781 2.219 -.781 3 0l6.9 6.9c.781 .781 .781 2.219 0 3l-6.9 6.9c-.781 .781 -2.219 .781 -3 0z"})]}),ae),Zle=Y(P("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("circle",{cx:"12",cy:"12",r:"9"})]}),ae),qle=Y(P("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),g("line",{x1:"15",y1:"16",x2:"19",y2:"12"}),g("line",{x1:"15",y1:"8",x2:"19",y2:"12"})]}),ae),Qle=Y(g("path",{d:"M4.167 10h11.666",strokeWidth:"1.5"}),Oe),Jle=Y(P("g",{strokeWidth:"1.25",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M20 17v-12c0 -1.121 -.879 -2 -2 -2s-2 .879 -2 2v12l2 2l2 -2z"}),g("path",{d:"M16 7h4"}),g("path",{d:"M18 19h-13a2 2 0 1 1 0 -4h4a2 2 0 1 0 0 -4h-3"})]}),ae),l5=Y(P("g",{strokeWidth:"1.25",children:[g("path",{clipRule:"evenodd",d:"m7.643 15.69 7.774-7.773a2.357 2.357 0 1 0-3.334-3.334L4.31 12.357a3.333 3.333 0 0 0-.977 2.357v1.953h1.953c.884 0 1.732-.352 2.357-.977Z"}),g("path",{d:"m11.25 5.417 3.333 3.333"})]}),Oe),yz=Y(P("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"20",x2:"7",y2:"20"}),g("line",{x1:"14",y1:"20",x2:"21",y2:"20"}),g("line",{x1:"6.9",y1:"15",x2:"13.8",y2:"15"}),g("line",{x1:"10.2",y1:"6.3",x2:"16",y2:"20"}),g("polyline",{points:"5 20 11 4 13 4 20 20"})]}),ae),ece=Y(P("g",{strokeWidth:"1.25",children:[g("path",{d:"M12.5 6.667h.01"}),g("path",{d:"M4.91 2.625h10.18a2.284 2.284 0 0 1 2.285 2.284v10.182a2.284 2.284 0 0 1-2.284 2.284H4.909a2.284 2.284 0 0 1-2.284-2.284V4.909a2.284 2.284 0 0 1 2.284-2.284Z"}),g("path",{d:"m3.333 12.5 3.334-3.333c.773-.745 1.726-.745 2.5 0l4.166 4.166"}),g("path",{d:"m11.667 11.667.833-.834c.774-.744 1.726-.744 2.5 0l1.667 1.667"})]}),Oe),tce=Y(P("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M19 20h-10.5l-4.21 -4.3a1 1 0 0 1 0 -1.41l10 -10a1 1 0 0 1 1.41 0l5 5a1 1 0 0 1 0 1.41l-9.2 9.3"}),g("path",{d:"M18 13.3l-6.3 -6.3"})]}),ae),YC=Y(g("path",{strokeWidth:"1.25",d:"M10 4.167v11.666M4.167 10h11.666"}),Oe),WC=Y(g("path",{d:"M5 10h10",strokeWidth:"1.25"}),Oe),nce=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M21 21l-6 -6"}),g("path",{d:"M3.268 12.043a7.017 7.017 0 0 0 6.634 4.957a7.012 7.012 0 0 0 7.043 -6.131a7 7 0 0 0 -5.314 -7.672a7.021 7.021 0 0 0 -8.241 4.403"}),g("path",{d:"M3 4v4h4"})]}),ae),Tc=Y(g("path",{strokeWidth:"1.25",d:"M3.333 5.833h13.334M8.333 9.167v5M11.667 9.167v5M4.167 5.833l.833 10c0 .92.746 1.667 1.667 1.667h6.666c.92 0 1.667-.746 1.667-1.667l.833-10M7.5 5.833v-2.5c0-.46.373-.833.833-.833h3.334c.46 0 .833.373.833.833v2.5"}),Oe),ice=Y(P("g",{strokeWidth:"1.25",children:[g("polyline",{points:"12 16 18 10 12 4"}),g("polyline",{points:"8 4 2 10 8 16"})]}),Oe),NE=Y(P("g",{strokeWidth:"1.25",children:[g("path",{d:"M14.375 6.458H8.958a2.5 2.5 0 0 0-2.5 2.5v5.417a2.5 2.5 0 0 0 2.5 2.5h5.417a2.5 2.5 0 0 0 2.5-2.5V8.958a2.5 2.5 0 0 0-2.5-2.5Z"}),g("path",{clipRule:"evenodd",d:"M11.667 3.125c.517 0 .986.21 1.325.55.34.338.55.807.55 1.325v1.458H8.333c-.485 0-.927.185-1.26.487-.343.312-.57.75-.609 1.24l-.005 5.357H5a1.87 1.87 0 0 1-1.326-.55 1.87 1.87 0 0 1-.549-1.325V5c0-.518.21-.987.55-1.326.338-.34.807-.549 1.325-.549h6.667Z"})]}),Oe),OE=Y(g("path",{clipRule:"evenodd",d:"M10 2.5h.328a6.25 6.25 0 0 0 6.6 10.372A7.5 7.5 0 1 1 10 2.493V2.5Z",stroke:"currentColor"}),Oe),PE=Y(g("g",{stroke:"currentColor",strokeLinejoin:"round",children:g("path",{d:"M10 12.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM10 4.167V2.5M14.167 5.833l1.166-1.166M15.833 10H17.5M14.167 14.167l1.166 1.166M10 15.833V17.5M5.833 14.167l-1.166 1.166M5 10H3.333M5.833 5.833 4.667 4.667"})}),{...Oe,strokeWidth:1.5}),Ez=Y(P("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"6",x2:"20",y2:"6"}),g("line",{x1:"4",y1:"12",x2:"20",y2:"12"}),g("line",{x1:"4",y1:"18",x2:"20",y2:"18"})]}),ae),c5=Y(g("path",{strokeWidth:"1.25",d:"M3.333 14.167v1.666c0 .92.747 1.667 1.667 1.667h10c.92 0 1.667-.746 1.667-1.667v-1.666M5.833 9.167 10 13.333l4.167-4.166M10 3.333v10"}),Oe),n_=Y(P("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("circle",{cx:"12",cy:"12",r:"9"}),g("line",{x1:"12",y1:"17",x2:"12",y2:"17.01"}),g("path",{d:"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4"})]}),ae),rce=Y(P("g",{strokeWidth:"1.25",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("circle",{cx:"12",cy:"12",r:"9"}),g("line",{x1:"12",y1:"17",x2:"12",y2:"17.01"}),g("path",{d:"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4"})]}),ae),KC=Y(g("path",{strokeWidth:"1.25",d:"M9.167 5.833H5.833c-1.254 0-2.5 1.282-2.5 2.5v5.834c0 1.283 1.252 2.5 2.5 2.5h5.834c1.251 0 2.5-1.25 2.5-2.5v-3.334M8.333 11.667l8.334-8.334M12.5 3.333h4.167V7.5"}),Oe),i_=Y(g("path",{d:"M7.5 15.833c-3.583 1.167-3.583-2.083-5-2.5m10 4.167v-2.917c0-.833.083-1.166-.417-1.666 2.334-.25 4.584-1.167 4.584-5a3.833 3.833 0 0 0-1.084-2.667 3.5 3.5 0 0 0-.083-2.667s-.917-.25-2.917 1.084a10.25 10.25 0 0 0-5.166 0C5.417 2.333 4.5 2.583 4.5 2.583a3.5 3.5 0 0 0-.083 2.667 3.833 3.833 0 0 0-1.084 2.667c0 3.833 2.25 4.75 4.584 5-.5.5-.5 1-.417 1.666V17.5",strokeWidth:"1.25"}),Oe),vz=Y(P("g",{strokeWidth:"1.25",children:[g("path",{d:"M7.5 10.833a.833.833 0 1 0 0-1.666.833.833 0 0 0 0 1.666ZM12.5 10.833a.833.833 0 1 0 0-1.666.833.833 0 0 0 0 1.666ZM6.25 6.25c2.917-.833 4.583-.833 7.5 0M5.833 13.75c2.917.833 5.417.833 8.334 0"}),g("path",{d:"M12.917 14.167c0 .833 1.25 2.5 1.666 2.5 1.25 0 2.361-1.39 2.917-2.5.556-1.39.417-4.861-1.25-9.584-1.214-.846-2.5-1.116-3.75-1.25l-.833 2.084M7.083 14.167c0 .833-1.13 2.5-1.526 2.5-1.191 0-2.249-1.39-2.778-2.5-.529-1.39-.397-4.861 1.19-9.584 1.157-.846 2.318-1.116 3.531-1.25l.833 2.084"})]}),Oe),_z=Y(P("g",{strokeWidth:"1.25",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4 4l11.733 16h4.267l-11.733 -16z"}),g("path",{d:"M4 20l6.768 -6.768m2.46 -2.46l6.772 -6.772"})]}),ae),sce=Y(g("polyline",{fill:"none",stroke:"currentColor",points:"20 6 9 17 4 12"}),{width:24,height:24}),Rb=Y(P("g",{strokeWidth:"1.25",children:[g("path",{d:"M8.333 11.667a2.917 2.917 0 0 0 4.167 0l3.333-3.334a2.946 2.946 0 1 0-4.166-4.166l-.417.416"}),g("path",{d:"M11.667 8.333a2.917 2.917 0 0 0-4.167 0l-3.333 3.334a2.946 2.946 0 0 0 4.166 4.166l.417-.416"})]}),Oe),oce=Y("M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z",{width:448,height:512}),ace=Y("M252 54L203 8a28 27 0 00-20-8H28C12 0 0 12 0 27v195c0 15 12 26 28 26h204c15 0 28-11 28-26V73a28 27 0 00-8-19zM130 213c-21 0-37-16-37-36 0-19 16-35 37-35 20 0 37 16 37 35 0 20-17 36-37 36zm56-169v56c0 4-4 6-7 6H44c-4 0-7-2-7-6V42c0-4 3-7 7-7h133l4 2 3 2a7 7 0 012 5z M296 201l87 95-188 205-78 9c-10 1-19-8-18-20l9-84zm141-14l-41-44a31 31 0 00-46 0l-38 41 87 95 38-42c13-14 13-36 0-50z",{width:448,height:512}),r_=Y(g("path",{d:"m9.257 6.351.183.183H15.819c.34 0 .727.182 1.051.506.323.323.505.708.505 1.05v5.819c0 .316-.183.7-.52 1.035-.337.338-.723.522-1.037.522H4.182c-.352 0-.74-.181-1.058-.5-.318-.318-.499-.705-.499-1.057V5.182c0-.351.181-.736.5-1.054.32-.321.71-.503 1.057-.503H6.53l2.726 2.726Z",strokeWidth:"1.25"}),Oe);Y("M384 112v352c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h80c0-35.29 28.71-64 64-64s64 28.71 64 64h80c26.51 0 48 21.49 48 48zM192 40c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24m96 114v-20a6 6 0 0 0-6-6H102a6 6 0 0 0-6 6v20a6 6 0 0 0 6 6h180a6 6 0 0 0 6-6z",{width:384,height:512});const lce=Y("M204.3 5C104.9 24.4 24.8 104.3 5.2 203.4c-37 187 131.7 326.4 258.8 306.7 41.2-6.4 61.4-54.6 42.5-91.7-23.1-45.4 9.9-98.4 60.9-98.4h79.7c35.8 0 64.8-29.6 64.9-65.3C511.5 97.1 368.1-26.9 204.3 5zM96 320c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm32-128c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128-64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"),R8=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M5 16l1.465 1.638a2 2 0 1 1 -3.015 .099l1.55 -1.737z"}),g("path",{d:"M13.737 9.737c2.299 -2.3 3.23 -5.095 2.081 -6.245c-1.15 -1.15 -3.945 -.217 -6.244 2.082c-2.3 2.299 -3.231 5.095 -2.082 6.244c1.15 1.15 3.946 .218 6.245 -2.081z"}),g("path",{d:"M7.492 11.818c.362 .362 .768 .676 1.208 .934l6.895 4.047c1.078 .557 2.255 -.075 3.692 -1.512c1.437 -1.437 2.07 -2.614 1.512 -3.692c-.372 -.718 -1.72 -3.017 -4.047 -6.895a6.015 6.015 0 0 0 -.934 -1.208"})]}),ae),wz=Y(P("g",{strokeWidth:"1.25",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M15 8h.01"}),g("path",{d:"M12 20h-5a3 3 0 0 1 -3 -3v-10a3 3 0 0 1 3 -3h10a3 3 0 0 1 3 3v5"}),g("path",{d:"M4 15l4 -4c.928 -.893 2.072 -.893 3 0l4 4"}),g("path",{d:"M14 14l1 -1c.617 -.593 1.328 -.793 2.009 -.598"}),g("path",{d:"M19 16v6"}),g("path",{d:"M22 19l-3 3l-3 -3"})]}),ae),cce=Y("M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z",{width:512,height:512});Y("M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z",{width:448,height:512});Y("M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z",{width:448,height:512});const uce=Y("M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z");Y("M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z");const ZC=Y(g("path",{d:"M7.5 10.833 4.167 7.5 7.5 4.167M4.167 7.5h9.166a3.333 3.333 0 0 1 0 6.667H12.5",strokeWidth:"1.25"}),Oe),qC=Y(g("path",{d:"M12.5 10.833 15.833 7.5 12.5 4.167M15.833 7.5H6.667a3.333 3.333 0 1 0 0 6.667H7.5",strokeWidth:"1.25"}),Oe),dce=Y("M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z",{mirror:!0}),s_=Y(g("path",{d:"M5 12.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM15 7.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM15 17.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM7.25 8.917l5.5-2.834M7.25 11.083l5.5 2.834",strokeWidth:"1.5"}),Oe),fce=Y("M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24V296c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"),hce=Y("M16 5l-1.42 1.42-1.59-1.59V16h-1.98V4.83L9.42 6.42 8 5l4-4 4 4zm4 5v11c0 1.1-.9 2-2 2H6c-1.11 0-2-.9-2-2V10c0-1.11.89-2 2-2h3v2H6v11h12V10h-3V8h3c1.1 0 2 .89 2 2z",{width:24,height:24}),gce=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M8 9h-1a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-8a2 2 0 0 0 -2 -2h-1"}),g("path",{d:"M12 14v-11"}),g("path",{d:"M9 6l3 -3l3 3"})]}),ae),mce=Y(P(ge,{children:[g("path",{fill:"currentColor",d:"M40 5.6v6.1l-4.1.7c-8.9 1.4-16.5 6.9-20.6 15C13 32 10.9 43 12.4 43c.4 0 2.4-1.3 4.4-3 5-3.9 12.1-7 18.2-7.7l5-.6v12.8l11.2-11.3L62.5 22 51.2 10.8 40-.5v6.1zm10.2 22.6L44 34.5v-6.8l-6.9.6c-3.9.3-9.8 1.7-13.2 3.1-3.5 1.4-6.5 2.4-6.7 2.2-.9-1 3-7.5 6.4-10.8C28 18.6 34.4 16 40.1 16c3.7 0 3.9-.1 3.9-3.2V9.5l6.2 6.3 6.3 6.2-6.3 6.2z"}),g("path",{stroke:"currentColor",fill:"currentColor",d:"M0 36v20h48v-6.2c0-6 0-6.1-2-4.3-1.1 1-2 2.9-2 4.2V52H4V34c0-17.3-.1-18-2-18s-2 .7-2 20z"})]}),{width:64,height:64});Y(g("path",{stroke:"currentColor",strokeWidth:"40",fill:"currentColor",d:"M148 560a318 318 0 0 0 522 110 316 316 0 0 0 0-450 316 316 0 0 0-450 0c-11 11-21 22-30 34v4h47c25 0 46 21 46 46s-21 45-46 45H90c-13 0-25-6-33-14-9-9-14-20-14-33V156c0-25 20-45 45-45s45 20 45 45v32l1 1a401 401 0 0 1 623 509l212 212a42 42 0 0 1-59 59L698 757A401 401 0 0 1 65 570a42 42 0 0 1 83-10z"}),{width:1024});const Tz=P("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M12 10l0 10"}),g("path",{d:"M12 10l4 4"}),g("path",{d:"M12 10l-4 4"}),g("path",{d:"M4 4l16 0"})]}),Sz=P("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M12 5l0 14"}),g("path",{d:"M16 9l-4 -4"}),g("path",{d:"M8 9l4 -4"})]}),QC=Y(Sz,ae),JC=Y(Sz,{...ae,style:{transform:"rotate(180deg)"}}),eA=Y(Tz,ae),tA=Y(Tz,{...ae,style:{transform:"rotate(180deg)"}}),nA=Y(P(ge,{children:[P("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M3.333 3.333h13.334",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M13.542 6.458h-.417c-.92 0-1.667.747-1.667 1.667v7.083c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667V8.125c0-.92-.746-1.667-1.666-1.667ZM6.875 6.458h-.417c-.92 0-1.666.747-1.666 1.667v3.75c0 .92.746 1.667 1.666 1.667h.417c.92 0 1.667-.746 1.667-1.667v-3.75c0-.92-.747-1.667-1.667-1.667Z"})]}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Oe),iA=Y(P(ge,{children:[P("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M3.333 16.667h13.334",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M6.875 3.125h-.417c-.92 0-1.666.746-1.666 1.667v7.083c0 .92.746 1.667 1.666 1.667h.417c.92 0 1.667-.746 1.667-1.667V4.792c0-.92-.747-1.667-1.667-1.667ZM13.542 5.817h-.417c-.92 0-1.667.747-1.667 1.667v4.391c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667V7.484c0-.92-.746-1.667-1.666-1.667Z"})]}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Oe),rA=Y(P(ge,{children:[P("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M3.333 3.333v13.334",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M15.208 4.792H8.125c-.92 0-1.667.746-1.667 1.666v.417c0 .92.747 1.667 1.667 1.667h7.083c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666ZM12.516 11.458H8.125c-.92 0-1.667.746-1.667 1.667v.417c0 .92.747 1.666 1.667 1.666h4.391c.92 0 1.667-.746 1.667-1.666v-.417c0-.92-.746-1.667-1.667-1.667Z"})]}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Oe),sA=Y(P(ge,{children:[P("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M16.667 3.333v13.334",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M11.875 4.792H4.792c-.92 0-1.667.746-1.667 1.666v.417c0 .92.746 1.667 1.667 1.667h7.083c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666ZM11.683 11.458H7.292c-.92 0-1.667.746-1.667 1.667v.417c0 .92.746 1.666 1.667 1.666h4.39c.921 0 1.667-.746 1.667-1.666v-.417c0-.92-.746-1.667-1.666-1.667Z"})]}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Oe),pce=Y(P(ge,{children:[P("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M16.667 3.333v13.334M3.333 3.333v13.334",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M14.375 10.208v-.416c0-.92-.746-1.667-1.667-1.667H7.292c-.92 0-1.667.746-1.667 1.667v.416c0 .92.746 1.667 1.667 1.667h5.416c.92 0 1.667-.746 1.667-1.667Z"})]}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Oe),Uce=Y(P(ge,{children:[P("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M3.333 3.333h13.334M3.333 16.667h13.334",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M10.208 5.625h-.416c-.92 0-1.667.746-1.667 1.667v5.416c0 .92.746 1.667 1.667 1.667h.416c.92 0 1.667-.746 1.667-1.667V7.292c0-.92-.746-1.667-1.667-1.667Z"})]}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Oe),oA=Y(P("g",{stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M1.667 10h2.916",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M8.333 10h3.334",strokeLinejoin:"round"}),g("path",{d:"M15.417 10h2.916",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M6.875 4.792h-.417c-.92 0-1.666.746-1.666 1.666v7.084c0 .92.746 1.666 1.666 1.666h.417c.92 0 1.667-.746 1.667-1.666V6.458c0-.92-.747-1.666-1.667-1.666ZM13.542 6.458h-.417c-.92 0-1.667.747-1.667 1.667v3.75c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667v-3.75c0-.92-.746-1.667-1.666-1.667Z"})]}),Oe),aA=Y(P("g",{stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M10 18.333v-2.916",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M10 11.667V8.333",strokeLinejoin:"round"}),g("path",{d:"M10 4.583V1.667",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M4.792 13.125v.417c0 .92.746 1.666 1.666 1.666h7.084c.92 0 1.666-.746 1.666-1.666v-.417c0-.92-.746-1.667-1.666-1.667H6.458c-.92 0-1.666.746-1.666 1.667ZM6.458 6.458v.417c0 .92.747 1.667 1.667 1.667h3.75c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666h-3.75c-.92 0-1.667.746-1.667 1.666Z"})]}),Oe),o_=Y(P("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("circle",{cx:"9",cy:"7",r:"4"}),g("path",{d:"M3 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2"}),g("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"}),g("path",{d:"M21 21v-2a4 4 0 0 0 -3 -3.85"})]}),ae);Y("M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm115.7 272l-176 101c-15.8 8.8-35.7-2.5-35.7-21V152c0-18.4 19.8-29.8 35.7-21l176 107c16.4 9.2 16.4 32.9 0 42z");Y("M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm96 328c0 8.8-7.2 16-16 16H176c-8.8 0-16-7.2-16-16V176c0-8.8 7.2-16 16-16h160c8.8 0 16 7.2 16 16v160z");const Ad=Y(P(ge,{children:[g("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:g("path",{d:"M15 5 5 15M5 5l10 10"})}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Oe);Y("M464 0c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48H176c-26.51 0-48-21.49-48-48V48c0-26.51 21.49-48 48-48h288M176 416c-44.112 0-80-35.888-80-80V128H48c-26.51 0-48 21.49-48 48v288c0 26.51 21.49 48 48 48h288c26.51 0 48-21.49 48-48v-48H176z",{mirror:!0});const bce=Y("M11.553 22.894a.998.998 0 00.894 0s3.037-1.516 5.465-4.097C19.616 16.987 21 14.663 21 12V5a1 1 0 00-.649-.936l-8-3a.998.998 0 00-.702 0l-8 3A1 1 0 003 5v7c0 2.663 1.384 4.987 3.088 6.797 2.428 2.581 5.465 4.097 5.465 4.097zm-1.303-8.481l6.644-6.644a.856.856 0 111.212 1.212l-7.25 7.25a.856.856 0 01-1.212 0l-3.75-3.75a.856.856 0 111.212-1.212l3.144 3.144z",{width:24});Y("M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM332.1 128H256V51.9l76.1 76.1zM48 464V48h160v104c0 13.3 10.7 24 24 24h104v288H48zm32-48h224V288l-23.5-23.5c-4.7-4.7-12.3-4.7-17 0L176 352l-39.5-39.5c-4.7-4.7-12.3-4.7-17 0L80 352v64zm48-240c-26.5 0-48 21.5-48 48s21.5 48 48 48 48-21.5 48-48-21.5-48-48-48z",{width:384,height:512});const lA=se.memo(({theme:e})=>Y(P(ge,{children:[g("path",{d:"M25 26H111V111H25",fill:Ns()}),g("path",{d:"M25 111C25 80.2068 25 49.4135 25 26M25 26C48.6174 26 72.2348 26 111 26H25ZM25 26C53.3671 26 81.7343 26 111 26H25ZM111 26C111 52.303 111 78.606 111 111V26ZM111 26C111 51.2947 111 76.5893 111 111V26ZM111 111C87.0792 111 63.1585 111 25 111H111ZM111 111C87.4646 111 63.9293 111 25 111H111ZM25 111C25 81.1514 25 51.3028 25 26V111Z",stroke:Ns(),strokeWidth:"2"}),g("path",{d:"M100 100H160V160H100",fill:Ns()}),g("path",{d:"M100 160C100 144.106 100 128.211 100 100M100 100C117.706 100 135.412 100 160 100H100ZM100 100C114.214 100 128.428 100 160 100H100ZM160 100C160 120.184 160 140.369 160 160V100ZM160 100C160 113.219 160 126.437 160 160V100ZM160 160C145.534 160 131.068 160 100 160H160ZM160 160C143.467 160 126.934 160 100 160H160ZM100 160C100 143.661 100 127.321 100 100V160Z",stroke:Ns(),strokeWidth:"2"}),P("g",{fill:bz(e),stroke:Ns(),strokeWidth:"6",children:[g("rect",{x:"2.5",y:"2.5",width:"30",height:"30"}),g("rect",{x:"2.5",y:"149.5",width:"30",height:"30"}),g("rect",{x:"147.5",y:"149.5",width:"30",height:"30"}),g("rect",{x:"147.5",y:"2.5",width:"30",height:"30"})]})]}),{width:182,height:182,mirror:!0})),cA=se.memo(({theme:e})=>Y(P(ge,{children:[g("path",{d:"M25 26H111V111H25",fill:Ns()}),g("path",{d:"M25 111C25 80.2068 25 49.4135 25 26M25 26C48.6174 26 72.2348 26 111 26H25ZM25 26C53.3671 26 81.7343 26 111 26H25ZM111 26C111 52.303 111 78.606 111 111V26ZM111 26C111 51.2947 111 76.5893 111 111V26ZM111 111C87.0792 111 63.1585 111 25 111H111ZM111 111C87.4646 111 63.9293 111 25 111H111ZM25 111C25 81.1514 25 51.3028 25 26V111Z",stroke:Ns(),strokeWidth:"2"}),g("path",{d:"M100 100H160V160H100",fill:Ns()}),g("path",{d:"M100 160C100 144.106 100 128.211 100 100M100 100C117.706 100 135.412 100 160 100H100ZM100 100C114.214 100 128.428 100 160 100H100ZM160 100C160 120.184 160 140.369 160 160V100ZM160 100C160 113.219 160 126.437 160 160V100ZM160 160C145.534 160 131.068 160 100 160H160ZM160 160C143.467 160 126.934 160 100 160H160ZM100 160C100 143.661 100 127.321 100 100V160Z",stroke:Ns(),strokeWidth:"2"}),P("g",{fill:bz(e),stroke:Ns(),strokeWidth:"6",children:[g("rect",{x:"2.5",y:"2.5",width:"30",height:"30"}),g("rect",{x:"78.5",y:"149.5",width:"30",height:"30"}),g("rect",{x:"147.5",y:"149.5",width:"30",height:"30"}),g("rect",{x:"147.5",y:"78.5",width:"30",height:"30"}),g("rect",{x:"105.5",y:"2.5",width:"30",height:"30"}),g("rect",{x:"2.5",y:"102.5",width:"30",height:"30"})]})]}),{width:182,height:182,mirror:!0})),yce=Y(g("g",{strokeWidth:1.25,children:g("path",{d:"M5.879 2.625h8.242a3.27 3.27 0 0 1 3.254 3.254v8.242a3.27 3.27 0 0 1-3.254 3.254H5.88a3.27 3.27 0 0 1-3.254-3.254V5.88A3.27 3.27 0 0 1 5.88 2.626l-.001-.001ZM4.518 16.118l7.608-12.83m.198 13.934 5.051-9.897M2.778 9.675l9.348-6.387m-7.608 12.83 12.857-8.793"})}),Oe),Ece=Y(P(ge,{children:[g("path",{d:"M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z",stroke:"currentColor",strokeWidth:"1.25"}),g("mask",{id:"FillHachureIcon",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:2,y:2,width:16,height:16,children:g("path",{d:"M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"1.25"})}),g("g",{mask:"url(#FillHachureIcon)",children:g("path",{d:"M2.258 15.156 15.156 2.258M7.324 20.222 20.222 7.325m-20.444 5.35L12.675-.222m-8.157 18.34L17.416 5.22",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})})]}),Oe),vce=Y(P(ge,{children:[P("g",{clipPath:"url(#a)",children:[g("path",{d:"M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z",stroke:"currentColor",strokeWidth:"1.25"}),g("mask",{id:"FillCrossHatchIcon",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:-1,y:-1,width:22,height:22,children:g("path",{d:"M2.426 15.044 15.044 2.426M7.383 20 20 7.383M0 12.617 12.617 0m-7.98 17.941L17.256 5.324m-2.211 12.25L2.426 4.956M20 12.617 7.383 0m5.234 20L0 7.383m17.941 7.98L5.324 2.745",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),g("g",{mask:"url(#FillCrossHatchIcon)",children:g("path",{d:"M14.121 2H5.88A3.879 3.879 0 0 0 2 5.879v8.242A3.879 3.879 0 0 0 5.879 18h8.242A3.879 3.879 0 0 0 18 14.121V5.88A3.879 3.879 0 0 0 14.121 2Z",fill:"currentColor"})})]}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Oe),_ce=Y(P(ge,{children:[g("g",{clipPath:"url(#a)",children:g("path",{d:"M4.91 2.625h10.18a2.284 2.284 0 0 1 2.285 2.284v10.182a2.284 2.284 0 0 1-2.284 2.284H4.909a2.284 2.284 0 0 1-2.284-2.284V4.909a2.284 2.284 0 0 1 2.284-2.284Z",stroke:"currentColor",strokeWidth:"1.25"})}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),{...Oe,fill:"currentColor"}),Iz=Y(g(ge,{children:g("path",{d:"M4.167 10h11.666",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),Oe),wce=Y(g("path",{d:"M5 10h10",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),Oe),Tce=Y(g("path",{d:"M5 10h10",stroke:"currentColor",strokeWidth:"3.75",strokeLinecap:"round",strokeLinejoin:"round"}),Oe);se.memo(({theme:e})=>Y(g("path",{d:"M6 10H34",stroke:Ns(),strokeWidth:2,fill:"none",strokeLinecap:"round"}),{width:40,height:20}));const Sce=Y(P("g",{strokeWidth:"2",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M5 12h2"}),g("path",{d:"M17 12h2"}),g("path",{d:"M11 12h2"})]}),ae),Ice=Y(P("g",{strokeWidth:"2",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4 12v.01"}),g("path",{d:"M8 12v.01"}),g("path",{d:"M12 12v.01"}),g("path",{d:"M16 12v.01"}),g("path",{d:"M20 12v.01"})]}),ae),xce=Y(g("path",{d:"M2.5 12.038c1.655-.885 5.9-3.292 8.568-4.354 2.668-1.063.101 2.821 1.32 3.104 1.218.283 5.112-1.814 5.112-1.814",strokeWidth:"1.25"}),Oe),Cce=Y(g("path",{d:"M2.5 12.563c1.655-.886 5.9-3.293 8.568-4.355 2.668-1.062.101 2.822 1.32 3.105 1.218.283 5.112-1.814 5.112-1.814m-13.469 2.23c2.963-1.586 6.13-5.62 7.468-4.998 1.338.623-1.153 4.11-.132 5.595 1.02 1.487 6.133-1.43 6.133-1.43",strokeWidth:"1.25"}),Oe),Ace=Y(g("path",{d:"M2.5 11.936c1.737-.879 8.627-5.346 10.42-5.268 1.795.078-.418 5.138.345 5.736.763.598 3.53-1.789 4.235-2.147M2.929 9.788c1.164-.519 5.47-3.28 6.987-3.114 1.519.165 1 3.827 2.121 4.109 1.122.281 3.839-2.016 4.606-2.42",strokeWidth:"1.25"}),Oe),Mce=Y(P("svg",{strokeWidth:"1.5",children:[g("path",{d:"M3.33334 9.99998V6.66665C3.33334 6.04326 3.33403 4.9332 3.33539 3.33646C4.95233 3.33436 6.06276 3.33331 6.66668 3.33331H10"}),g("path",{d:"M13.3333 3.33331V3.34331"}),g("path",{d:"M16.6667 3.33331V3.34331"}),g("path",{d:"M16.6667 6.66669V6.67669"}),g("path",{d:"M16.6667 10V10.01"}),g("path",{d:"M3.33334 13.3333V13.3433"}),g("path",{d:"M16.6667 13.3333V13.3433"}),g("path",{d:"M3.33334 16.6667V16.6767"}),g("path",{d:"M6.66666 16.6667V16.6767"}),g("path",{d:"M10 16.6667V16.6767"}),g("path",{d:"M13.3333 16.6667V16.6767"}),g("path",{d:"M16.6667 16.6667V16.6767"})]}),Oe),Rce=Y(P("g",{strokeWidth:"1.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4 12v-4a4 4 0 0 1 4 -4h4"}),g("line",{x1:"16",y1:"4",x2:"16",y2:"4.01"}),g("line",{x1:"20",y1:"4",x2:"20",y2:"4.01"}),g("line",{x1:"20",y1:"8",x2:"20",y2:"8.01"}),g("line",{x1:"20",y1:"12",x2:"20",y2:"12.01"}),g("line",{x1:"4",y1:"16",x2:"4",y2:"16.01"}),g("line",{x1:"20",y1:"16",x2:"20",y2:"16.01"}),g("line",{x1:"4",y1:"20",x2:"4",y2:"20.01"}),g("line",{x1:"8",y1:"20",x2:"8",y2:"20.01"}),g("line",{x1:"12",y1:"20",x2:"12",y2:"20.01"}),g("line",{x1:"16",y1:"20",x2:"16",y2:"20.01"}),g("line",{x1:"20",y1:"20",x2:"20",y2:"20.01"})]}),ae),kce=Y(P("g",{stroke:"currentColor",opacity:.3,strokeWidth:2,children:[g("path",{d:"M12 12l9 0"}),g("path",{d:"M3 9l6 6"}),g("path",{d:"M3 15l6 -6"})]}),ae),FE=se.memo(({flip:e=!1})=>Y(P("g",{transform:e?"translate(40, 0) scale(-1, 1)":"",stroke:"currentColor",strokeWidth:2,fill:"none",children:[g("path",{d:"M34 10H6M34 10L27 5M34 10L27 15"}),g("path",{d:"M27.5 5L34.5 10L27.5 15"})]}),{width:40,height:20})),Lce=se.memo(({flip:e=!1})=>Y(P("g",{stroke:"currentColor",fill:"currentColor",transform:e?"translate(40, 0) scale(-1, 1)":"",children:[g("path",{d:"M32 10L6 10",strokeWidth:2}),g("circle",{r:"4",transform:"matrix(-1 0 0 1 30 10)"})]}),{width:40,height:20})),Dce=se.memo(({flip:e=!1})=>Y(P("g",{stroke:"currentColor",fill:"none",transform:e?"translate(40, 0) scale(-1, 1)":"",strokeWidth:2,children:[g("path",{d:"M26 10L6 10"}),g("circle",{r:"4",transform:"matrix(-1 0 0 1 30 10)"})]}),{width:40,height:20})),Nce=se.memo(({flip:e=!1})=>Y(g("g",{transform:e?"translate(40, 0) scale(-1, 1)":"",children:g("path",{d:"M34 10H5.99996M34 10L34 5M34 10L34 15",stroke:"currentColor",strokeWidth:2,fill:"none"})}),{width:40,height:20})),Oce=se.memo(({flip:e=!1})=>Y(P("g",{stroke:"currentColor",fill:"currentColor",transform:e?"translate(40, 0) scale(-1, 1)":"",children:[g("path",{d:"M32 10L6 10",strokeWidth:2}),g("path",{d:"M27.5 5.5L34.5 10L27.5 14.5L27.5 5.5"})]}),{width:40,height:20})),Pce=se.memo(({flip:e=!1})=>Y(P("g",{stroke:"currentColor",fill:"none",transform:e?"translate(40, 0) scale(-1, 1)":"",strokeWidth:2,strokeLinejoin:"round",children:[g("path",{d:"M6,9.5H27"}),g("path",{d:"M27,5L34,10L27,14Z",fill:"none"})]}),{width:40,height:20})),Fce=se.memo(({flip:e=!1})=>Y(P("g",{stroke:"currentColor",fill:"currentColor",transform:e?"translate(40, 0) scale(-1, 1)":"",strokeLinejoin:"round",strokeWidth:2,children:[g("path",{d:"M6,9.5H20"}),g("path",{d:"M27,5L34,10L27,14L20,9.5Z"})]}),{width:40,height:20})),Bce=se.memo(({flip:e=!1})=>Y(P("g",{stroke:"currentColor",fill:"none",transform:e?"translate(40, 0) scale(-1, 1)":"",strokeLinejoin:"round",strokeWidth:2,children:[g("path",{d:"M6,9.5H20"}),g("path",{d:"M27,5L34,10L27,14L20,9.5Z"})]}),{width:40,height:20})),zce=se.memo(({flip:e=!1})=>Y(g("g",{stroke:"currentColor",fill:"none",transform:e?"":"translate(40, 0) scale(-1, 1)",strokeLinejoin:"round",strokeWidth:2,children:g("path",{d:"M34,10 H6 M15,10 L7,5 M15,10 L7,15"})}),{width:40,height:20})),Hce=se.memo(({flip:e=!1})=>Y(g("g",{stroke:"currentColor",fill:"none",transform:e?"":"translate(40, 0) scale(-1, 1)",strokeLinejoin:"round",strokeWidth:2,children:g("path",{d:"M34,10 H6 M15,10 L15,15 L15,5"})}),{width:40,height:20})),Vce=se.memo(({flip:e=!1})=>Y(g("g",{stroke:"currentColor",fill:"none",transform:e?"":"translate(40, 0) scale(-1, 1)",strokeLinejoin:"round",strokeWidth:2,children:g("path",{d:"M34,10 H6 M15,10 L15,16 L15,4 M15,10 L7,5 M15,10 L7,15"})}),{width:40,height:20})),$ce=Y(P(ge,{children:[g("g",{clipPath:"url(#a)",children:g("path",{d:"M14.167 6.667a3.333 3.333 0 0 0-3.334-3.334H9.167a3.333 3.333 0 0 0 0 6.667h1.666a3.333 3.333 0 0 1 0 6.667H9.167a3.333 3.333 0 0 1-3.334-3.334",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Oe),Gce=Y(P(ge,{children:[g("g",{clipPath:"url(#a)",children:g("path",{d:"M5 16.667V3.333L10 15l5-11.667v13.334",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Oe),Xce=Y(P(ge,{children:[g("g",{clipPath:"url(#a)",children:g("path",{d:"M5.833 3.333v13.334h8.334",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Oe),jce=Y(g(ge,{children:g("path",{d:"m1.667 3.333 6.666 13.334M8.333 3.333 1.667 16.667M11.667 3.333v13.334h6.666",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),Oe),u5=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M3 7v-2h13v2"}),g("path",{d:"M10 5v14"}),g("path",{d:"M12 19h-4"}),g("path",{d:"M15 13v-1h6v1"}),g("path",{d:"M18 12v7"}),g("path",{d:"M17 19h2"})]}),ae),Yce=Y(g(ge,{children:P("g",{stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M7 12h10"}),g("path",{d:"M7 5v14"}),g("path",{d:"M17 5v14"}),g("path",{d:"M15 19h4"}),g("path",{d:"M15 5h4"}),g("path",{d:"M5 19h4"}),g("path",{d:"M5 5h4"})]})}),ae),BE=Y(g(ge,{children:g("g",{stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:g("path",{d:"M5.833 16.667v-10a3.333 3.333 0 0 1 3.334-3.334h1.666a3.333 3.333 0 0 1 3.334 3.334v10M5.833 10.833h8.334"})})}),Oe),xz=Y(P(ge,{children:[g("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:g("path",{d:"M5.833 6.667 2.5 10l3.333 3.333M14.167 6.667 17.5 10l-3.333 3.333M11.667 3.333 8.333 16.667"})}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Oe),Wce=Y(P("g",{stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"8",x2:"20",y2:"8"}),g("line",{x1:"4",y1:"12",x2:"12",y2:"12"}),g("line",{x1:"4",y1:"16",x2:"16",y2:"16"})]}),ae),Kce=Y(P("g",{stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"8",x2:"20",y2:"8"}),g("line",{x1:"8",y1:"12",x2:"16",y2:"12"}),g("line",{x1:"6",y1:"16",x2:"18",y2:"16"})]}),ae),Zce=Y(P("g",{stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"8",x2:"20",y2:"8"}),g("line",{x1:"10",y1:"12",x2:"20",y2:"12"}),g("line",{x1:"8",y1:"16",x2:"20",y2:"16"})]}),ae),qce=se.memo(({theme:e})=>Y(P("g",{strokeWidth:"1.5",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"4",x2:"20",y2:"4"}),g("rect",{x:"9",y:"8",width:"6",height:"12",rx:"2"})]}),ae)),Qce=se.memo(({theme:e})=>Y(P("g",{strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"20",x2:"20",y2:"20"}),g("rect",{x:"9",y:"4",width:"6",height:"12",rx:"2"})]}),ae)),Jce=se.memo(({theme:e})=>Y(P("g",{strokeWidth:"1.5",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"12",x2:"9",y2:"12"}),g("line",{x1:"15",y1:"12",x2:"20",y2:"12"}),g("rect",{x:"9",y:"6",width:"6",height:"12",rx:"2"})]}),ae)),Cz=Y(P("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M21 19h-18l9 -15"}),g("path",{d:"M20.615 15.171h.015"}),g("path",{d:"M19.515 11.771h.015"}),g("path",{d:"M17.715 8.671h.015"}),g("path",{d:"M15.415 5.971h.015"})]}),ae),eue=Y(g("path",{d:"M537.6 226.6c4.1-10.7 6.4-22.4 6.4-34.6 0-53-43-96-96-96-19.7 0-38.1 6-53.3 16.2C367 64.2 315.3 32 256 32c-88.4 0-160 71.6-160 160 0 2.7.1 5.4.2 8.1C40.2 219.8 0 273.2 0 336c0 79.5 64.5 144 144 144h368c70.7 0 128-57.3 128-128 0-61.9-44-113.6-102.4-125.4zM393.4 288H328v112c0 8.8-7.2 16-16 16h-48c-8.8 0-16-7.2-16-16V288h-65.4c-14.3 0-21.4-17.2-11.3-27.3l105.4-105.4c6.2-6.2 16.4-6.2 22.6 0l105.4 105.4c10.1 10.1 2.9 27.3-11.3 27.3z",fill:"currentColor"}),{width:640,height:512});Y(g("path",{d:"M480 416C497.7 416 512 430.3 512 448C512 465.7 497.7 480 480 480H150.6C133.7 480 117.4 473.3 105.4 461.3L25.37 381.3C.3786 356.3 .3786 315.7 25.37 290.7L258.7 57.37C283.7 32.38 324.3 32.38 349.3 57.37L486.6 194.7C511.6 219.7 511.6 260.3 486.6 285.3L355.9 416H480zM265.4 416L332.7 348.7L195.3 211.3L70.63 336L150.6 416L265.4 416z"}));const Az=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M8 13v-7.5a1.5 1.5 0 0 1 3 0v6.5"}),g("path",{d:"M11 5.5v-2a1.5 1.5 0 1 1 3 0v8.5"}),g("path",{d:"M14 5.5a1.5 1.5 0 0 1 3 0v6.5"}),g("path",{d:"M17 7.5a1.5 1.5 0 0 1 3 0v8.5a6 6 0 0 1 -6 6h-2h.208a6 6 0 0 1 -5.012 -2.7a69.74 69.74 0 0 1 -.196 -.3c-.312 -.479 -1.407 -2.388 -3.286 -5.728a1.5 1.5 0 0 1 .536 -2.022a1.867 1.867 0 0 1 2.28 .28l1.47 1.47"})]}),ae),uA=Y(P(ge,{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2"}),g("path",{d:"M7 11l5 5l5 -5"}),g("path",{d:"M12 4l0 12"})]}),ae),Ym=Y(P(ge,{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M8 8m0 2a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2z"}),g("path",{d:"M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2"})]}),ae),tue=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M7 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),g("path",{d:"M17 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),g("path",{d:"M9.15 14.85l8.85 -10.85"}),g("path",{d:"M6 4l8.85 10.85"})]}),ae),nue=Y(P(ge,{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"}),g("path",{d:"M12 17l0 .01"}),g("path",{d:"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4"})]}),ae),iue=Y(P(ge,{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M7 4v16l13 -8z"})]}),ae),rue=Y(P(ge,{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M17 4h-10a3 3 0 0 0 -3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3 -3v-10a3 3 0 0 0 -3 -3z",strokeWidth:"0",fill:"currentColor"})]}),ae),sue=Y(P(ge,{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M5 12l5 5l10 -10"})]}),ae),oue=Y(P(ge,{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M10.24 3.957l-8.422 14.06a1.989 1.989 0 0 0 1.7 2.983h16.845a1.989 1.989 0 0 0 1.7 -2.983l-8.423 -14.06a1.989 1.989 0 0 0 -3.4 0z"}),g("path",{d:"M12 9v4"}),g("path",{d:"M12 17h.01"})]}),ae),aue=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M11 7l6 6"}),g("path",{d:"M4 16l11.7 -11.7a1 1 0 0 1 1.4 0l2.6 2.6a1 1 0 0 1 0 1.4l-11.7 11.7h-4v-4z"})]}),ae),lue=Y(P("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M12 3l-4 7h8z"}),g("path",{d:"M17 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),g("path",{d:"M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"})]}),ae),Mz=Y(P("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4 7l16 0"}),g("path",{d:"M4 17l16 0"}),g("path",{d:"M7 4l0 16"}),g("path",{d:"M17 4l0 16"})]}),ae),Rz=Y(g("path",{fill:"currentColor",d:"M407.48,111.18C335.587,108.103 269.573,152.338 245.08,220C220.587,152.338 154.573,108.103 82.68,111.18C80.285,168.229 107.577,222.632 154.74,254.82C178.908,271.419 193.35,298.951 193.27,328.27L193.27,379.13L296.9,379.13L296.9,328.27C296.816,298.953 311.255,271.42 335.42,254.82C382.596,222.644 409.892,168.233 407.48,111.18Z"})),t2=Y(P("g",{strokeWidth:"1.25",children:[g("path",{d:"M4.16602 10H15.8327"}),g("path",{d:"M12.5 13.3333L15.8333 10"}),g("path",{d:"M12.5 6.66666L15.8333 9.99999"})]}),Oe),kz=Y(P("g",{fill:"none",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",transform:"rotate(90 10 10)",children:[g("path",{clipRule:"evenodd",d:"m9.644 13.69 7.774-7.773a2.357 2.357 0 0 0-3.334-3.334l-7.773 7.774L8 12l1.643 1.69Z"}),g("path",{d:"m13.25 3.417 3.333 3.333M10 10l2-2M5 15l3-3M2.156 17.894l1-1M5.453 19.029l-.144-1.407M2.377 11.887l.866 1.118M8.354 17.273l-1.194-.758M.953 14.652l1.408.13"})]}),20),Lz=Y(P("g",{stroke:"currentColor",fill:"none",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z"}),g("path",{d:"M6 21l15 -15l-3 -3l-15 15l3 3"}),g("path",{d:"M15 6l3 3"}),g("path",{d:"M9 3a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"}),g("path",{d:"M19 13a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"})]}),ae);Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z"}),g("path",{d:"M6 21l15 -15l-3 -3l-15 15l3 3"}),g("path",{d:"M15 6l3 3"}),g("path",{d:"M9 3a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"}),g("path",{d:"M19 13a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"})]}),ae);Y(P("g",{stroke:"currentColor",fill:"none",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M11.217 19.384a3.501 3.501 0 0 0 6.783 -1.217v-5.167l-6 -3.35"}),g("path",{d:"M5.214 15.014a3.501 3.501 0 0 0 4.446 5.266l4.34 -2.534v-6.946"}),g("path",{d:"M6 7.63c-1.391 -.236 -2.787 .395 -3.534 1.689a3.474 3.474 0 0 0 1.271 4.745l4.263 2.514l6 -3.348"}),g("path",{d:"M12.783 4.616a3.501 3.501 0 0 0 -6.783 1.217v5.067l6 3.45"}),g("path",{d:"M18.786 8.986a3.501 3.501 0 0 0 -4.446 -5.266l-4.34 2.534v6.946"}),g("path",{d:"M18 16.302c1.391 .236 2.787 -.395 3.534 -1.689a3.474 3.474 0 0 0 -1.271 -4.745l-4.308 -2.514l-5.955 3.42"})]}),ae);const cue=Y(P("g",{stroke:"currentColor",fill:"none",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4 8v-2a2 2 0 0 1 2 -2h2"}),g("path",{d:"M4 16v2a2 2 0 0 0 2 2h2"}),g("path",{d:"M16 4h2a2 2 0 0 1 2 2v2"}),g("path",{d:"M16 20h2a2 2 0 0 0 2 -2v-2"})]}),ae),a_=Y(P("g",{stroke:"currentColor",fill:"none",strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0"}),g("path",{d:"M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6"})]}),ae),uue=Y(P("g",{stroke:"currentColor",fill:"none",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M10.585 10.587a2 2 0 0 0 2.829 2.828"}),g("path",{d:"M16.681 16.673a8.717 8.717 0 0 1 -4.681 1.327c-3.6 0 -6.6 -2 -9 -6c1.272 -2.12 2.712 -3.678 4.32 -4.674m2.86 -1.146a9.055 9.055 0 0 1 1.82 -.18c3.6 0 6.6 2 9 6c-.666 1.11 -1.379 2.067 -2.138 2.87"}),g("path",{d:"M3 3l18 18"})]}),ae),due=Y(P("g",{stroke:"currentColor",fill:"none",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8"}),g("path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8"}),g("path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5"}),g("path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0"}),g("path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5"}),g("path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10"})]}),ae),fue=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8"}),g("path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8"}),g("path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5"}),g("path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0"}),g("path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5"}),g("path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10"})]}),ae),rd=Y(P("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"}),g("path",{d:"M21 21l-6 -6"})]}),ae),hue=Y(P("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M20.984 12.53a9 9 0 1 0 -7.552 8.355"}),g("path",{d:"M12 7v5l3 3"}),g("path",{d:"M19 16l-2 3h4l-2 3"})]}),ae),gue=Y(P("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M9 2m0 3a3 3 0 0 1 3 -3h0a3 3 0 0 1 3 3v5a3 3 0 0 1 -3 3h0a3 3 0 0 1 -3 -3z"}),g("path",{d:"M5 10a7 7 0 0 0 14 0"}),g("path",{d:"M8 21l8 0"}),g("path",{d:"M12 17l0 4"})]}),ae),mue=Y(P("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M3 3l18 18"}),g("path",{d:"M9 5a3 3 0 0 1 6 0v5a3 3 0 0 1 -.13 .874m-2 2a3 3 0 0 1 -3.87 -2.872v-1"}),g("path",{d:"M5 10a7 7 0 0 0 10.846 5.85m2 -2a6.967 6.967 0 0 0 1.152 -3.85"}),g("path",{d:"M8 21l8 0"}),g("path",{d:"M12 17l0 4"})]}),ae),Dz=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M13 3l0 7l6 0l-8 11l0 -7l-6 0l8 -11"})]}),ae),pue=Y(P("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M8 8m0 1a1 1 0 0 1 1 -1h6a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-6a1 1 0 0 1 -1 -1z"}),g("path",{d:"M12 20v.01"}),g("path",{d:"M16 20v.01"}),g("path",{d:"M8 20v.01"}),g("path",{d:"M4 20v.01"}),g("path",{d:"M4 16v.01"}),g("path",{d:"M4 12v.01"}),g("path",{d:"M4 8v.01"}),g("path",{d:"M4 4v.01"}),g("path",{d:"M8 4v.01"}),g("path",{d:"M12 4v.01"}),g("path",{d:"M16 4v.01"}),g("path",{d:"M20 4v.01"}),g("path",{d:"M20 8v.01"}),g("path",{d:"M20 12v.01"}),g("path",{d:"M20 16v.01"}),g("path",{d:"M20 20v.01"})]}),ae),Uue=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M5 3v18"}),g("path",{d:"M19 21v-18"}),g("path",{d:"M5 7h14"}),g("path",{d:"M5 15h14"}),g("path",{d:"M8 13v4"}),g("path",{d:"M11 13v4"}),g("path",{d:"M16 13v4"}),g("path",{d:"M14 5v4"}),g("path",{d:"M11 5v4"}),g("path",{d:"M8 5v4"}),g("path",{d:"M3 21h18"})]}),ae),bue=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M3 12l18 0"}),g("path",{d:"M7 16l10 0l-10 5l0 -5"}),g("path",{d:"M7 8l10 0l-10 -5l0 5"})]}),ae),yue=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M12 3l0 18"}),g("path",{d:"M16 7l0 10l5 0l-5 -10"}),g("path",{d:"M8 7l0 10l-5 0l5 -10"})]}),ae),Nz=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z"}),g("path",{d:"M19 6h1a2 2 0 0 1 2 2a5 5 0 0 1 -5 5l-5 0v2"}),g("path",{d:"M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"})]}),ae),l_=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M15 15m-5 0a5 5 0 1 0 10 0a5 5 0 1 0 -10 0"}),g("path",{d:"M22 22l-3 -3"}),g("path",{d:"M6 18h-1a2 2 0 0 1 -2 -2v-1"}),g("path",{d:"M3 11v-1"}),g("path",{d:"M3 6v-1a2 2 0 0 1 2 -2h1"}),g("path",{d:"M10 3h1"}),g("path",{d:"M15 3h1a2 2 0 0 1 2 2v1"})]}),ae),Eue=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M14 3v4a1 1 0 0 0 1 1h4"}),g("path",{d:"M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4"}),g("path",{d:"M4 20.25c0 .414 .336 .75 .75 .75h1.25a1 1 0 0 0 1 -1v-1a1 1 0 0 0 -1 -1h-1a1 1 0 0 1 -1 -1v-1a1 1 0 0 1 1 -1h1.25a.75 .75 0 0 1 .75 .75"}),g("path",{d:"M10 15l2 6l2 -6"}),g("path",{d:"M20 15h-1a2 2 0 0 0 -2 2v2a2 2 0 0 0 2 2h1v-3"})]}),ae),vue=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M14 3v4a1 1 0 0 0 1 1h4"}),g("path",{d:"M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4"}),g("path",{d:"M20 15h-1a2 2 0 0 0 -2 2v2a2 2 0 0 0 2 2h1v-3"}),g("path",{d:"M5 18h1.5a1.5 1.5 0 0 0 0 -3h-1.5v6"}),g("path",{d:"M11 21v-6l3 6v-6"})]}),ae),_ue=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4 13v-8a2 2 0 0 1 2 -2h1a2 2 0 0 1 2 2v8a2 2 0 0 0 6 0v-8a2 2 0 0 1 2 -2h1a2 2 0 0 1 2 2v8a8 8 0 0 1 -16 0"}),g("path",{d:"M4 8l5 0"}),g("path",{d:"M15 8l4 0"})]}),ae),wue=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M3 14c.83 .642 2.077 1.017 3.5 1c1.423 .017 2.67 -.358 3.5 -1c.83 -.642 2.077 -1.017 3.5 -1c1.423 -.017 2.67 .358 3.5 1"}),g("path",{d:"M8 3a2.4 2.4 0 0 0 -1 2a2.4 2.4 0 0 0 1 2"}),g("path",{d:"M12 3a2.4 2.4 0 0 0 -1 2a2.4 2.4 0 0 0 1 2"}),g("path",{d:"M3 10h14v5a6 6 0 0 1 -6 6h-2a6 6 0 0 1 -6 -6v-5z"}),g("path",{d:"M16.746 16.726a3 3 0 1 0 .252 -5.555"})]}),ae),Tue=Y(P("g",{stroke:"currentColor",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M3 5a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1h-16a1 1 0 0 1-1-1v-10zM7 20h10M9 16v4M15 16v4"})]}),{...ae,strokeWidth:1.5}),Oz=Y(P("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M15 8v-2a2 2 0 0 0 -2 -2h-7a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2 -2v-2"}),g("path",{d:"M21 12h-13l3 -3"}),g("path",{d:"M11 15l-3 -3"})]}),ae),Pz=Y(P("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M2 8a4 4 0 0 1 4 -4h12a4 4 0 0 1 4 4v8a4 4 0 0 1 -4 4h-12a4 4 0 0 1 -4 -4v-8z"}),g("path",{d:"M10 9l5 3l-5 3z"})]}),ae),Sue=Y(P("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M3 6h18"}),g("path",{d:"M3 12h18"}),g("path",{d:"M3 18h18"}),g("path",{d:"M6 3v18"}),g("path",{d:"M12 3v18"}),g("path",{d:"M18 3v18"})]}),ae),Iue=Y(P("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M17 3m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"}),g("path",{d:"M3 17m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"}),g("path",{d:"M17 5c-6.627 0 -12 5.373 -12 12"})]}),ae),xue=Y(P("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M6 18l12 -12"}),g("path",{d:"M18 10v-4h-4"})]}),ae),Cue=Y(P("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4,19L10,19C11.097,19 12,18.097 12,17L12,9C12,7.903 12.903,7 14,7L21,7"}),g("path",{d:"M18 4l3 3l-3 3"})]}),ae),Aue=Y(P("g",{children:[g("path",{d:"M16,12L20,9L16,6"}),g("path",{d:"M6 20c0 -6.075 4.925 -11 11 -11h3"})]}),ae),Fz=Y(P("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M6 9l6 6l6 -6"})]}),ae),Mue=Y(P("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M6 15l6 -6l6 6"})]}),ae),Rue=Y(P("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M6 15l6 -6l6 6"})]}),ae),dA=Y(P("g",{strokeWidth:"1.25",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M8 5v10a1 1 0 0 0 1 1h10"}),g("path",{d:"M5 8h10a1 1 0 0 1 1 1v10"})]}),ae),Bz=Y(P("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M5 5m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),g("path",{d:"M19 5m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),g("path",{d:"M5 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),g("path",{d:"M19 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),g("path",{d:"M5 7l0 10"}),g("path",{d:"M7 5l10 0"}),g("path",{d:"M7 19l10 0"}),g("path",{d:"M19 7l0 10"})]}),ae);class kue extends Error{constructor(t="Couldn't export canvas.",n="CANVAS_ERROR"){super(),this.name=n,this.message=t}}class xh extends DOMException{constructor(t="Request Aborted"){super(t,"AbortError")}}class bu extends Error{constructor(n="Image Scene Data Error",i="IMAGE_SCENE_DATA_ERROR"){super(n);F(this,"code");this.name="EncodingError",this.code=i}}class zz extends Error{constructor(n="Worker URL is not defined!",i="WORKER_URL_NOT_DEFINED"){super(n);F(this,"code");this.name="WorkerUrlNotDefinedError",this.code=i}}class Hz extends Error{constructor(n="Worker has to be in a separate chunk!",i="WORKER_IN_THE_MAIN_CHUNK"){super(n);F(this,"code");this.name="WorkerInTheMainChunkError",this.code=i}}class Hs extends Error{constructor(t){super(t),this.name="ExcalidrawError"}}const Qa=({size:e="1em",circleWidth:t=8,synchronized:n=!1,className:i=""})=>{const s=-(se.useRef(Date.now()).current%1600);return g("div",{className:`Spinner ${i}`,children:g("svg",{viewBox:"0 0 100 100",style:{width:e,height:e,"--spinner-delay":n?`${s}ms`:0},children:g("circle",{cx:"50",cy:"50",r:50-t/2,strokeWidth:t,fill:"none",strokeMiterlimit:"10"})})})},Ze=se.forwardRef(({size:e="medium",visible:t=!0,className:n="",...i},r)=>{const{id:s}=Zo(),o=se.useRef(null);se.useImperativeHandle(r,()=>o.current);const a=`ToolIcon_size_${e}`,[l,c]=N.useState(!1),u=N.useRef(!0),d=async h=>{var p;const m="onClick"in i&&((p=i.onClick)==null?void 0:p.call(i,h));if(Fm(m))try{c(!0),await m}catch(b){if(b instanceof xh)console.warn(b);else throw b}finally{u.current&&c(!1)}};N.useEffect(()=>(u.current=!0,()=>{u.current=!1}),[]);const f=N.useRef(null);if(i.type==="button"||i.type==="icon"||i.type==="submit"){const h=i.type==="icon"?"button":i.type;return P("button",{className:me("ToolIcon_type_button",a,n,t&&!i.hidden?"ToolIcon_type_button--show":"ToolIcon_type_button--hide",{ToolIcon:!i.hidden,"ToolIcon--selected":i.selected,"ToolIcon--plain":i.type==="icon"}),style:i.style,"data-testid":i["data-testid"],hidden:i.hidden,title:i.title,"aria-label":i["aria-label"],type:h,onClick:d,ref:o,disabled:l||i.isLoading||!!i.disabled,children:[(i.icon||i.label)&&P("div",{className:"ToolIcon__icon","aria-hidden":"true","aria-disabled":!!i.disabled,children:[i.icon||i.label,i.keyBindingLabel&&g("span",{className:"ToolIcon__keybinding",children:i.keyBindingLabel}),i.isLoading&&g(Qa,{})]}),i.showAriaLabel&&P("div",{className:"ToolIcon__label",children:[i["aria-label"]," ",l&&g(Qa,{})]}),i.children]})}return P("label",{className:me("ToolIcon",n),title:i.title,onPointerDown:h=>{var m;f.current=h.pointerType||null,(m=i.onPointerDown)==null||m.call(i,{pointerType:h.pointerType||null})},onPointerUp:()=>{requestAnimationFrame(()=>{f.current=null})},children:[g("input",{className:`ToolIcon_type_radio ${a}`,type:"radio",name:i.name,"aria-label":i["aria-label"],"aria-keyshortcuts":i["aria-keyshortcuts"],"data-testid":i["data-testid"],id:`${s}-${i.id}`,onChange:()=>{var h;(h=i.onChange)==null||h.call(i,{pointerType:f.current})},checked:i.checked,ref:o}),P("div",{className:"ToolIcon__icon",children:[i.icon,i.keyBindingLabel&&g("span",{className:"ToolIcon__keybinding",children:i.keyBindingLabel})]})]})});Ze.displayName="ToolButton";let zE=[];const oe=e=>(zE=zE.concat(e),e),Lue=(e,t,n)=>{const i=new Set(Be(e.filter(u=>Ie(u)),t).map(u=>u.id)),r={},s=n.scene.getNonDeletedElementsMap(),o=new Set;for(const u of i){const d=Ho(e,u);for(const f of d)if(!o.has(f.id)){if(jt(f)){const h=ui(f,s);h&&(r[h.id]=!0)}else r[f.id]=!0;o.add(f.id)}}let a=!0;const l=e.map(u=>{if(t.selectedElementIds[u.id]){const d=jt(u)?ui(u,s):null;return u.frameId&&i.has(u.frameId)?(a=!1,r[u.id]=!0,u):d!=null&&d.frameId&&i.has(d==null?void 0:d.frameId)?u:(u.boundElements&&u.boundElements.forEach(f=>{var m,p;const h=n.scene.getNonDeletedElementsMap().get(f.id);h&&fe(h)&&(ee(h,{startBinding:u.id===((m=h.startBinding)==null?void 0:m.elementId)?null:h.startBinding,endBinding:u.id===((p=h.endBinding)==null?void 0:p.elementId)?null:h.endBinding}),ee(h,{points:h.points}))}),Ce(u,{isDeleted:!0}))}return u.frameId&&i.has(u.frameId)?(a=!1,jt(u)||(r[u.id]=!0),Ce(u,{frameId:null})):jt(u)&&t.selectedElementIds[u.containerId]?Ce(u,{isDeleted:!0}):u});let c=t.editingGroupId;if(a&&t.editingGroupId){const u=Gt(l,t.editingGroupId).filter(d=>!d.isDeleted);if(u.length>1)u[0]&&(r[u[0].id]=!0);else{c=null,u[0]&&(r[u[0].id]=!0);const d=u[0];if(d){const f=d.groupIds.findIndex(m=>m===t.editingGroupId),h=d.groupIds[f+1];if(h){const m=Gt(l,h).filter(p=>!p.isDeleted);m.length>1&&(c=h,m.forEach(p=>{r[p.id]=!0}))}}}}return{elements:l,appState:{...t,...Wi({selectedElementIds:r,editingGroupId:c},l,t,null)}}},fA=(e,t)=>{if(e.editingGroupId){const n=Gt(Nt(t),e.editingGroupId);if(n.length)return{...e,selectedElementIds:{[n[0].id]:!0}}}return e},Vz=oe({name:"deleteSelectedElements",label:"labels.delete",icon:Tc,trackEvent:{category:"element",action:"delete"},perform:(e,t,n,i)=>{if(t.editingLinearElement){const{elementId:o,selectedPointsIndices:a,startBindingElement:l,endBindingElement:c}=t.editingLinearElement,u=i.scene.getNonDeletedElementsMap(),d=ce.getElement(o,u);if(!d||a==null)return!1;if(d.points.length<2){const h=e.map(p=>p.id===d.id?Ce(p,{isDeleted:!0}):p),m=fA(t,h);return{elements:h,appState:{...m,editingLinearElement:null},captureUpdate:Z.IMMEDIATELY}}const f={startBindingElement:a!=null&&a.includes(0)?null:l,endBindingElement:a!=null&&a.includes(d.points.length-1)?null:c};return ce.deletePoints(d,a),{elements:e,appState:{...t,editingLinearElement:{...t.editingLinearElement,...f,selectedPointsIndices:(a==null?void 0:a[0])>0?[a[0]-1]:[0]}},captureUpdate:Z.IMMEDIATELY}}let{elements:r,appState:s}=Lue(e,t,i);return dF(r,r.filter(o=>o.isDeleted)),s=fA(s,r),{elements:r,appState:{...s,activeTool:Tn(t,{type:"selection"}),multiElement:null,activeEmbeddable:null,selectedLinearElement:null},captureUpdate:Fn(Nt(e),t)?Z.IMMEDIATELY:Z.EVENTUALLY}},keyTest:(e,t,n)=>(e.key===z.BACKSPACE||e.key===z.DELETE)&&!e[z.CTRL_OR_CMD],PanelComponent:({elements:e,appState:t,updateData:n})=>g(Ze,{type:"button",icon:Tc,title:k("labels.delete"),"aria-label":k("labels.delete"),onClick:()=>n(null),visible:Fn(Nt(e),t)})}),HE=(e,t)=>e.frameId===t||e.id===t,$z=(e,t,n)=>{let i=[],r=[],s=null,o=-1;const a=Se(n||Be(e,t,{includeBoundTextElement:!0,includeElementsInFrames:!0}));for(;++o<e.length;){const l=e[o];a.get(l.id)?(r.length&&(i=i.concat(r),r=[]),i.push(o),s=o+1):l.isDeleted&&s===o?(s=o+1,r.push(o)):r=[]}return i},Due=e=>{let t=0;return e.reduce((n,i,r)=>(r>0&&e[r-1]!==i-1&&(t=++t),(n[t]||(n[t]=[])).push(i),n),[])},hA=(e,t,n,i)=>{var r,s;if("containerId"in e&&e.containerId){const o=i.getElement(e.containerId);if(o)return n==="left"?Math.min(t.indexOf(o),t.indexOf(e)):Math.max(t.indexOf(o),t.indexOf(e))}else{const o=(s=(r=e.boundElements)==null?void 0:r.find(a=>a.type!=="arrow"))==null?void 0:s.id;if(o){const a=i.getElement(o);if(a)return n==="left"?Math.min(t.indexOf(a),t.indexOf(e)):Math.max(t.indexOf(a),t.indexOf(e))}}},Nue=(e,t)=>{let n=-1,i=-1;return e.forEach((r,s)=>{HE(r,t)&&(n===-1&&(n=s),i=s)}),n===-1?[]:e.slice(n,i+1)},Oue=(e,t,n,i,r,s)=>{const o=t[n],a=f=>f.isDeleted?!1:r?f.frameId===r:e.editingGroupId?f.groupIds.includes(e.editingGroupId):!0,l=i==="left"?lu(t,f=>a(f),Math.max(0,n-1)):CP(t,f=>a(f),n+1),c=t[l];if(!c)return-1;if(e.editingGroupId){if((o==null?void 0:o.groupIds.join(""))===(c==null?void 0:c.groupIds.join("")))return hA(c,t,i,s)??l;if(!(c!=null&&c.groupIds.includes(e.editingGroupId)))return-1}if(!r&&(c.frameId||Ie(c))){const f=Nue(t,c.frameId||c.id);return i==="left"?t.indexOf(f[0]):t.indexOf(f[f.length-1])}if(!c.groupIds.length)return hA(c,t,i,s)??l;const u=e.editingGroupId?c.groupIds[c.groupIds.indexOf(e.editingGroupId)-1]:c.groupIds[c.groupIds.length-1],d=Gt(t,u);return d.length?i==="left"?t.indexOf(d[0]):t.indexOf(d[d.length-1]):l},Gz=(e,t)=>t.reduce((n,i)=>{const r=e[i];return n.set(r.id,r),n},new Map),Xz=(e,t,n,i)=>{const r=$z(e,t),s=Gz(e,r);let o=Due(r);n==="right"&&(o=o.reverse());const a=new Set(r.filter(l=>Ie(e[l])).map(l=>e[l].id));return o.forEach((l,c)=>{var v;const u=l[0],d=l[l.length-1],f=n==="left"?u:d,h=l.some(_=>{const S=e[_];return S.frameId&&a.has(S.frameId)})?null:(v=e[f])==null?void 0:v.frameId,m=Oue(t,e,f,n,h,i);if(m===-1||f===m)return;const p=n==="left"?e.slice(0,m):e.slice(0,u),b=e.slice(u,d+1),E=n==="left"?e.slice(m,u):e.slice(d+1,m+1),y=n==="left"?e.slice(d+1):e.slice(m+1);e=n==="left"?[...p,...b,...E,...y]:[...p,...E,...b,...y]}),Qs(e,s),e},jz=(e,t,n,i,r)=>{const s=$z(e,t,r),o=Gz(e,s),a=[];let l,c;if(n==="left"){if(i)l=CP(e,m=>HE(m,i));else if(t.editingGroupId){const m=Gt(e,t.editingGroupId);if(!m.length)return e;l=e.indexOf(m[0])}else l=0;c=s[s.length-1]}else{if(i)c=lu(e,m=>HE(m,i));else if(t.editingGroupId){const m=Gt(e,t.editingGroupId);if(!m.length)return e;c=e.indexOf(m[m.length-1])}else c=e.length-1;l=s[0]}l===-1&&(l=0);for(let m=l;m<c+1;m++)s.includes(m)||a.push(e[m]);const u=Array.from(o.values()),d=e.slice(0,l),f=e.slice(c+1),h=n==="left"?[...d,...u,...a,...f]:[...d,...a,...u,...f];return Qs(h,o),h};function Yz(e,t,n,i){const r=Se(Be(e,t,{includeBoundTextElement:!0,includeElementsInFrames:!0})),s={regularElements:[],frameChildren:new Map},o=new Set;for(const c of e)r.has(c.id)&&Ie(c)&&o.add(c.id);for(const c of e)if(r.has(c.id))if(Ie(c)||c.frameId&&o.has(c.frameId))s.regularElements.push(c);else if(!c.frameId)s.regularElements.push(c);else{const u=s.frameChildren.get(c.frameId)||[];u.push(c),s.frameChildren.set(c.frameId,u)}let a=e;const l=Array.from(s.frameChildren.entries());for(const[c,u]of l)a=i(e,t,n,c,u);return i(a,t,n,null,s.regularElements)}const Pue=(e,t,n)=>Xz(e,t,"left",n),Fue=(e,t,n)=>Xz(e,t,"right",n),Bue=(e,t)=>Yz(e,t,"left",jz),zue=(e,t)=>Yz(e,t,"right",jz),Hue=oe({name:"sendBackward",label:"labels.sendBackward",keywords:["move down","zindex","layer"],icon:JC,trackEvent:{category:"element"},perform:(e,t,n,i)=>({elements:Pue(e,t,i.scene),appState:t,captureUpdate:Z.IMMEDIATELY}),keyPriority:40,keyTest:e=>e[z.CTRL_OR_CMD]&&!e.shiftKey&&e.code===Je.BRACKET_LEFT,PanelComponent:({updateData:e,appState:t})=>g("button",{type:"button",className:"zIndexButton",onClick:()=>e(null),title:`${k("labels.sendBackward")} — ${Q("CtrlOrCmd+[")}`,children:JC})}),Vue=oe({name:"bringForward",label:"labels.bringForward",keywords:["move up","zindex","layer"],icon:QC,trackEvent:{category:"element"},perform:(e,t,n,i)=>({elements:Fue(e,t,i.scene),appState:t,captureUpdate:Z.IMMEDIATELY}),keyPriority:40,keyTest:e=>e[z.CTRL_OR_CMD]&&!e.shiftKey&&e.code===Je.BRACKET_RIGHT,PanelComponent:({updateData:e,appState:t})=>g("button",{type:"button",className:"zIndexButton",onClick:()=>e(null),title:`${k("labels.bringForward")} — ${Q("CtrlOrCmd+]")}`,children:QC})}),$ue=oe({name:"sendToBack",label:"labels.sendToBack",keywords:["move down","zindex","layer"],icon:tA,trackEvent:{category:"element"},perform:(e,t)=>({elements:Bue(e,t),appState:t,captureUpdate:Z.IMMEDIATELY}),keyTest:e=>zo?e[z.CTRL_OR_CMD]&&e.altKey&&e.code===Je.BRACKET_LEFT:e[z.CTRL_OR_CMD]&&e.shiftKey&&e.code===Je.BRACKET_LEFT,PanelComponent:({updateData:e,appState:t})=>g("button",{type:"button",className:"zIndexButton",onClick:()=>e(null),title:`${k("labels.sendToBack")} — ${Q(zo?"CtrlOrCmd+Alt+[":"CtrlOrCmd+Shift+[")}`,children:tA})}),Gue=oe({name:"bringToFront",label:"labels.bringToFront",keywords:["move up","zindex","layer"],icon:eA,trackEvent:{category:"element"},perform:(e,t)=>({elements:zue(e,t),appState:t,captureUpdate:Z.IMMEDIATELY}),keyTest:e=>zo?e[z.CTRL_OR_CMD]&&e.altKey&&e.code===Je.BRACKET_RIGHT:e[z.CTRL_OR_CMD]&&e.shiftKey&&e.code===Je.BRACKET_RIGHT,PanelComponent:({updateData:e,appState:t})=>g("button",{type:"button",className:"zIndexButton",onClick:n=>e(null),title:`${k("labels.bringToFront")} — ${Q(zo?"CtrlOrCmd+Alt+]":"CtrlOrCmd+Shift+]")}`,children:eA})}),Xue=oe({name:"selectAll",label:"labels.selectAll",icon:pue,trackEvent:{category:"canvas"},viewMode:!1,perform:(e,t,n,i)=>{if(t.editingLinearElement)return!1;const r=e.filter(s=>!s.isDeleted&&!(ue(s)&&s.containerId)&&!s.locked).reduce((s,o)=>(s[o.id]=!0,s),{});return{appState:{...t,...Wi({editingGroupId:null,selectedElementIds:r},Nt(e),t,i),selectedLinearElement:Object.keys(r).length===1&&ke(e[0])?new ce(e[0]):null},captureUpdate:Z.IMMEDIATELY}},keyTest:e=>e[z.CTRL_OR_CMD]&&e.key===z.A}),jue=oe({name:"duplicateSelection",label:"labels.duplicateSelection",icon:NE,trackEvent:{category:"element"},perform:(e,t,n,i)=>{if(t.selectedElementsAreBeingDragged)return!1;if(t.editingLinearElement)try{const o=ce.duplicateSelectedPoints(t,i.scene.getNonDeletedElementsMap());return{elements:e,appState:o,captureUpdate:Z.IMMEDIATELY}}catch{return!1}let{newElements:r,elementsWithClones:s}=Ib({type:"in-place",elements:e,idsOfElementsToDuplicate:Se(Be(e,t,{includeBoundTextElement:!0,includeElementsInFrames:!0})),appState:t,randomizeSeed:!0,overrides:o=>({x:o.x+nb/2,y:o.y+nb/2}),reverseOrder:!1});if(i.props.onDuplicate&&s){const o=i.props.onDuplicate(s,e);o&&(s=o)}return{elements:Qs(s,Se(r)),appState:{...t,...Yue(r),...Wi({editingGroupId:t.editingGroupId,selectedElementIds:z9(r).reduce((o,a)=>(jt(a)||(o[a.id]=!0),o),{})},Nt(s),t,null)},captureUpdate:Z.IMMEDIATELY}},keyTest:e=>e[z.CTRL_OR_CMD]&&e.key===z.D,PanelComponent:({elements:e,appState:t,updateData:n})=>g(Ze,{type:"button",icon:NE,title:`${k("labels.duplicateSelection")} — ${Q("CtrlOrCmd+D")}`,"aria-label":k("labels.duplicateSelection"),onClick:()=>n(null),visible:Fn(Nt(e),t)})}),Yue=e=>{var n;const t=e.filter(ke);if(t.length===1){const i=t[0],r=((n=i.boundElements)==null?void 0:n.map(o=>o.id))??[];if(e.every(o=>o.id===i.id||r.includes(o.id)))return{selectedLinearElement:new ce(i)}}return{selectedLinearElement:null}};var Wue={VITE_APP_BACKEND_V2_GET_URL:"https://json.excalidraw.com/api/v2/",VITE_APP_BACKEND_V2_POST_URL:"https://json.excalidraw.com/api/v2/post/",VITE_APP_LIBRARY_URL:"https://libraries.excalidraw.com",VITE_APP_LIBRARY_BACKEND:"https://us-central1-excalidraw-room-persistence.cloudfunctions.net/libraries",VITE_APP_PLUS_LP:"https://plus.excalidraw.com",VITE_APP_PLUS_APP:"https://app.excalidraw.com",VITE_APP_AI_BACKEND:"https://oss-ai.excalidraw.com",VITE_APP_WS_SERVER_URL:"https://oss-collab.excalidraw.com",VITE_APP_FIREBASE_CONFIG:'{"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}',VITE_APP_ENABLE_TRACKING:"true",VITE_APP_PLUS_EXPORT_PUBLIC_KEY:`MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEApQ0jM9Qz8TdFLzcuAZZX
/WvuKSOJxiw6AR/ZcE3eFQWM/mbFdhQgyK8eHGkKQifKzH1xUZjCxyXcxW6ZO02t
kPOPxhz+nxUrIoWCD/V4NGmUA1lxwHuO21HN1gzKrN3xHg5EGjyouR9vibT9VDGF
gq6+4Ic/kJX+AD2MM7Yre2+FsOdysrmuW2Fu3ahuC1uQE7pOe1j0k7auNP0y1q53
PrB8Ts2LUpepWC1l7zIXFm4ViDULuyWXTEpUcHSsEH8vpd1tckjypxCwkipfZsXx
iPszy0o0Dx2iArPfWMXlFAI9mvyFCyFC3+nSvfyAUb2C4uZgCwAuyFh/ydPF4DEE
PQIDAQAB`,VITE_APP_DEBUG_ENABLE_TEXT_CONTAINER_BOUNDING_BOX:"false",VITE_APP_COLLAPSE_OVERLAY:"false",VITE_APP_ENABLE_ESLINT:"false",VITE_APP_GIT_SHA:"",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const Kue=new Set(["command_palette","export"]),ct=(e,t,n,i)=>{try{if(typeof window>"u"||Wue.VITE_WORKER_ID||!Kue.has(e))return;g9(),window.sa_event&&window.sa_event(t,{category:e,label:n,value:i})}catch(r){console.error("error during analytics",r)}},Wz=N.forwardRef((e,t)=>{const{title:n,className:i,testId:r,active:s,standalone:o,icon:a,onClick:l}=e;return g("button",{type:"button",ref:t,title:n,"data-testid":r,className:me(i,{standalone:o,active:s}),onClick:l,children:a},n)}),Wo=e=>g("div",{className:"buttonList",children:e.options.map(t=>e.type==="button"?g(Wz,{icon:t.icon,title:t.text,testId:t.testId,active:t.active??e.value===t.value,onClick:n=>e.onClick(t.value,n)},t.text):P("label",{className:me({active:e.value===t.value}),title:t.text,children:[g("input",{type:"radio",name:e.group,onChange:()=>e.onChange(t.value),checked:e.value===t.value,"data-testid":t.testId}),t.icon]},t.text))});function Ti(e,t,{checkForDefaultPrevented:n=!0}={}){return function(r){if(e==null||e(r),n===!1||!r.defaultPrevented)return t==null?void 0:t(r)}}function gA(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Kz(...e){return t=>{let n=!1;const i=e.map(r=>{const s=gA(r,t);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let r=0;r<i.length;r++){const s=i[r];typeof s=="function"?s():gA(e[r],null)}}}}function no(...e){return N.useCallback(Kz(...e),e)}function Wm(e,t=[]){let n=[];function i(s,o){const a=N.createContext(o),l=n.length;n=[...n,o];const c=d=>{var E;const{scope:f,children:h,...m}=d,p=((E=f==null?void 0:f[e])==null?void 0:E[l])||a,b=N.useMemo(()=>m,Object.values(m));return g(p.Provider,{value:b,children:h})};c.displayName=s+"Provider";function u(d,f){var p;const h=((p=f==null?void 0:f[e])==null?void 0:p[l])||a,m=N.useContext(h);if(m)return m;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return[c,u]}const r=()=>{const s=n.map(o=>N.createContext(o));return function(a){const l=(a==null?void 0:a[e])||s;return N.useMemo(()=>({[`__scope${e}`]:{...a,[e]:l}}),[a,l])}};return r.scopeName=e,[i,Zue(r,...t)]}function Zue(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const i=e.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(s){const o=i.reduce((a,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...a,...d}},{});return N.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}var $0=N.forwardRef((e,t)=>{const{children:n,...i}=e,r=N.Children.toArray(n),s=r.find(Que);if(s){const o=s.props.children,a=r.map(l=>l===s?N.Children.count(o)>1?N.Children.only(null):N.isValidElement(o)?o.props.children:null:l);return g(VE,{...i,ref:t,children:N.isValidElement(o)?N.cloneElement(o,void 0,a):null})}return g(VE,{...i,ref:t,children:n})});$0.displayName="Slot";var VE=N.forwardRef((e,t)=>{const{children:n,...i}=e;if(N.isValidElement(n)){const r=ede(n),s=Jue(i,n.props);return n.type!==N.Fragment&&(s.ref=t?Kz(t,r):r),N.cloneElement(n,s)}return N.Children.count(n)>1?N.Children.only(null):null});VE.displayName="SlotClone";var que=({children:e})=>g(ge,{children:e});function Que(e){return N.isValidElement(e)&&e.type===que}function Jue(e,t){const n={...t};for(const i in t){const r=e[i],s=t[i];/^on[A-Z]/.test(i)?r&&s?n[i]=(...a)=>{s(...a),r(...a)}:r&&(n[i]=r):i==="style"?n[i]={...r,...s}:i==="className"&&(n[i]=[r,s].filter(Boolean).join(" "))}return{...e,...n}}function ede(e){var i,r;let t=(i=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(r=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var tde=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],ir=tde.reduce((e,t)=>{const n=N.forwardRef((i,r)=>{const{asChild:s,...o}=i,a=s?$0:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),g(a,{...o,ref:r})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function nde(e,t){e&&ii.flushSync(()=>e.dispatchEvent(t))}function Ja(e){const t=N.useRef(e);return N.useEffect(()=>{t.current=e}),N.useMemo(()=>(...n)=>{var i;return(i=t.current)==null?void 0:i.call(t,...n)},[])}function ide(e,t=globalThis==null?void 0:globalThis.document){const n=Ja(e);N.useEffect(()=>{const i=r=>{r.key==="Escape"&&n(r)};return t.addEventListener("keydown",i,{capture:!0}),()=>t.removeEventListener("keydown",i,{capture:!0})},[n,t])}var rde="DismissableLayer",$E="dismissableLayer.update",sde="dismissableLayer.pointerDownOutside",ode="dismissableLayer.focusOutside",mA,Zz=N.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),qz=N.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:i,onPointerDownOutside:r,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=e,c=N.useContext(Zz),[u,d]=N.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,h]=N.useState({}),m=no(t,w=>d(w)),p=Array.from(c.layers),[b]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),E=p.indexOf(b),y=u?p.indexOf(u):-1,v=c.layersWithOutsidePointerEventsDisabled.size>0,_=y>=E,S=cde(w=>{const T=w.target,A=[...c.branches].some(I=>I.contains(T));!_||A||(r==null||r(w),o==null||o(w),w.defaultPrevented||a==null||a())},f),M=ude(w=>{const T=w.target;[...c.branches].some(I=>I.contains(T))||(s==null||s(w),o==null||o(w),w.defaultPrevented||a==null||a())},f);return ide(w=>{y===c.layers.size-1&&(i==null||i(w),!w.defaultPrevented&&a&&(w.preventDefault(),a()))},f),N.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(mA=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),pA(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=mA)}},[u,f,n,c]),N.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),pA())},[u,c]),N.useEffect(()=>{const w=()=>h({});return document.addEventListener($E,w),()=>document.removeEventListener($E,w)},[]),g(ir.div,{...l,ref:m,style:{pointerEvents:v?_?"auto":"none":void 0,...e.style},onFocusCapture:Ti(e.onFocusCapture,M.onFocusCapture),onBlurCapture:Ti(e.onBlurCapture,M.onBlurCapture),onPointerDownCapture:Ti(e.onPointerDownCapture,S.onPointerDownCapture)})});qz.displayName=rde;var ade="DismissableLayerBranch",lde=N.forwardRef((e,t)=>{const n=N.useContext(Zz),i=N.useRef(null),r=no(t,i);return N.useEffect(()=>{const s=i.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),g(ir.div,{...e,ref:r})});lde.displayName=ade;function cde(e,t=globalThis==null?void 0:globalThis.document){const n=Ja(e),i=N.useRef(!1),r=N.useRef(()=>{});return N.useEffect(()=>{const s=a=>{if(a.target&&!i.current){let l=function(){Qz(sde,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",r.current),r.current=l,t.addEventListener("click",r.current,{once:!0})):l()}else t.removeEventListener("click",r.current);i.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",s),t.removeEventListener("click",r.current)}},[t,n]),{onPointerDownCapture:()=>i.current=!0}}function ude(e,t=globalThis==null?void 0:globalThis.document){const n=Ja(e),i=N.useRef(!1);return N.useEffect(()=>{const r=s=>{s.target&&!i.current&&Qz(ode,n,{originalEvent:s},{discrete:!1})};return t.addEventListener("focusin",r),()=>t.removeEventListener("focusin",r)},[t,n]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function pA(){const e=new CustomEvent($E);document.dispatchEvent(e)}function Qz(e,t,n,{discrete:i}){const r=n.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&r.addEventListener(e,t,{once:!0}),i?nde(r,s):r.dispatchEvent(s)}var k8=0;function dde(){N.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??UA()),document.body.insertAdjacentElement("beforeend",e[1]??UA()),k8++,()=>{k8===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),k8--}},[])}function UA(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var L8="focusScope.autoFocusOnMount",D8="focusScope.autoFocusOnUnmount",bA={bubbles:!1,cancelable:!0},fde="FocusScope",Jz=N.forwardRef((e,t)=>{const{loop:n=!1,trapped:i=!1,onMountAutoFocus:r,onUnmountAutoFocus:s,...o}=e,[a,l]=N.useState(null),c=Ja(r),u=Ja(s),d=N.useRef(null),f=no(t,p=>l(p)),h=N.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;N.useEffect(()=>{if(i){let p=function(v){if(h.paused||!a)return;const _=v.target;a.contains(_)?d.current=_:_l(d.current,{select:!0})},b=function(v){if(h.paused||!a)return;const _=v.relatedTarget;_!==null&&(a.contains(_)||_l(d.current,{select:!0}))},E=function(v){if(document.activeElement===document.body)for(const S of v)S.removedNodes.length>0&&_l(a)};document.addEventListener("focusin",p),document.addEventListener("focusout",b);const y=new MutationObserver(E);return a&&y.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",b),y.disconnect()}}},[i,a,h.paused]),N.useEffect(()=>{if(a){EA.add(h);const p=document.activeElement;if(!a.contains(p)){const E=new CustomEvent(L8,bA);a.addEventListener(L8,c),a.dispatchEvent(E),E.defaultPrevented||(hde(bde(eH(a)),{select:!0}),document.activeElement===p&&_l(a))}return()=>{a.removeEventListener(L8,c),setTimeout(()=>{const E=new CustomEvent(D8,bA);a.addEventListener(D8,u),a.dispatchEvent(E),E.defaultPrevented||_l(p??document.body,{select:!0}),a.removeEventListener(D8,u),EA.remove(h)},0)}}},[a,c,u,h]);const m=N.useCallback(p=>{if(!n&&!i||h.paused)return;const b=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,E=document.activeElement;if(b&&E){const y=p.currentTarget,[v,_]=gde(y);v&&_?!p.shiftKey&&E===_?(p.preventDefault(),n&&_l(v,{select:!0})):p.shiftKey&&E===v&&(p.preventDefault(),n&&_l(_,{select:!0})):E===y&&p.preventDefault()}},[n,i,h.paused]);return g(ir.div,{tabIndex:-1,...o,ref:f,onKeyDown:m})});Jz.displayName=fde;function hde(e,{select:t=!1}={}){const n=document.activeElement;for(const i of e)if(_l(i,{select:t}),document.activeElement!==n)return}function gde(e){const t=eH(e),n=yA(t,e),i=yA(t.reverse(),e);return[n,i]}function eH(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function yA(e,t){for(const n of e)if(!mde(n,{upTo:t}))return n}function mde(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function pde(e){return e instanceof HTMLInputElement&&"select"in e}function _l(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&pde(e)&&t&&e.select()}}var EA=Ude();function Ude(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=vA(e,t),e.unshift(t)},remove(t){var n;e=vA(e,t),(n=e[0])==null||n.resume()}}}function vA(e,t){const n=[...e],i=n.indexOf(t);return i!==-1&&n.splice(i,1),n}function bde(e){return e.filter(t=>t.tagName!=="A")}var sd=globalThis!=null&&globalThis.document?N.useLayoutEffect:()=>{},yde=QW.useId||(()=>{}),Ede=0;function c_(e){const[t,n]=N.useState(yde());return sd(()=>{n(i=>i??String(Ede++))},[e]),e||(t?`radix-${t}`:"")}const vde=["top","right","bottom","left"],Sc=Math.min,xr=Math.max,kb=Math.round,sU=Math.floor,Oo=e=>({x:e,y:e}),_de={left:"right",right:"left",bottom:"top",top:"bottom"},wde={start:"end",end:"start"};function GE(e,t,n){return xr(e,Sc(t,n))}function el(e,t){return typeof e=="function"?e(t):e}function tl(e){return e.split("-")[0]}function ng(e){return e.split("-")[1]}function u_(e){return e==="x"?"y":"x"}function d_(e){return e==="y"?"height":"width"}function Ic(e){return["top","bottom"].includes(tl(e))?"y":"x"}function f_(e){return u_(Ic(e))}function Tde(e,t,n){n===void 0&&(n=!1);const i=ng(e),r=f_(e),s=d_(r);let o=r==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=Lb(o)),[o,Lb(o)]}function Sde(e){const t=Lb(e);return[XE(e),t,XE(t)]}function XE(e){return e.replace(/start|end/g,t=>wde[t])}function Ide(e,t,n){const i=["left","right"],r=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?r:i:t?i:r;case"left":case"right":return t?s:o;default:return[]}}function xde(e,t,n,i){const r=ng(e);let s=Ide(tl(e),n==="start",i);return r&&(s=s.map(o=>o+"-"+r),t&&(s=s.concat(s.map(XE)))),s}function Lb(e){return e.replace(/left|right|bottom|top/g,t=>_de[t])}function Cde(e){return{top:0,right:0,bottom:0,left:0,...e}}function tH(e){return typeof e!="number"?Cde(e):{top:e,right:e,bottom:e,left:e}}function Db(e){const{x:t,y:n,width:i,height:r}=e;return{width:i,height:r,top:n,left:t,right:t+i,bottom:n+r,x:t,y:n}}function _A(e,t,n){let{reference:i,floating:r}=e;const s=Ic(t),o=f_(t),a=d_(o),l=tl(t),c=s==="y",u=i.x+i.width/2-r.width/2,d=i.y+i.height/2-r.height/2,f=i[a]/2-r[a]/2;let h;switch(l){case"top":h={x:u,y:i.y-r.height};break;case"bottom":h={x:u,y:i.y+i.height};break;case"right":h={x:i.x+i.width,y:d};break;case"left":h={x:i.x-r.width,y:d};break;default:h={x:i.x,y:i.y}}switch(ng(t)){case"start":h[o]-=f*(n&&c?-1:1);break;case"end":h[o]+=f*(n&&c?-1:1);break}return h}const Ade=async(e,t,n)=>{const{placement:i="bottom",strategy:r="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(t));let c=await o.getElementRects({reference:e,floating:t,strategy:r}),{x:u,y:d}=_A(c,i,l),f=i,h={},m=0;for(let p=0;p<a.length;p++){const{name:b,fn:E}=a[p],{x:y,y:v,data:_,reset:S}=await E({x:u,y:d,initialPlacement:i,placement:f,strategy:r,middlewareData:h,rects:c,platform:o,elements:{reference:e,floating:t}});u=y??u,d=v??d,h={...h,[b]:{...h[b],..._}},S&&m<=50&&(m++,typeof S=="object"&&(S.placement&&(f=S.placement),S.rects&&(c=S.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:r}):S.rects),{x:u,y:d}=_A(c,f,l)),p=-1)}return{x:u,y:d,placement:f,strategy:r,middlewareData:h}};async function G0(e,t){var n;t===void 0&&(t={});const{x:i,y:r,platform:s,rects:o,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=el(t,e),m=tH(h),b=a[f?d==="floating"?"reference":"floating":d],E=Db(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(b)))==null||n?b:b.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),y=d==="floating"?{x:i,y:r,width:o.floating.width,height:o.floating.height}:o.reference,v=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),_=await(s.isElement==null?void 0:s.isElement(v))?await(s.getScale==null?void 0:s.getScale(v))||{x:1,y:1}:{x:1,y:1},S=Db(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:y,offsetParent:v,strategy:l}):y);return{top:(E.top-S.top+m.top)/_.y,bottom:(S.bottom-E.bottom+m.bottom)/_.y,left:(E.left-S.left+m.left)/_.x,right:(S.right-E.right+m.right)/_.x}}const Mde=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:i,placement:r,rects:s,platform:o,elements:a,middlewareData:l}=t,{element:c,padding:u=0}=el(e,t)||{};if(c==null)return{};const d=tH(u),f={x:n,y:i},h=f_(r),m=d_(h),p=await o.getDimensions(c),b=h==="y",E=b?"top":"left",y=b?"bottom":"right",v=b?"clientHeight":"clientWidth",_=s.reference[m]+s.reference[h]-f[h]-s.floating[m],S=f[h]-s.reference[h],M=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let w=M?M[v]:0;(!w||!await(o.isElement==null?void 0:o.isElement(M)))&&(w=a.floating[v]||s.floating[m]);const T=_/2-S/2,A=w/2-p[m]/2-1,I=Sc(d[E],A),R=Sc(d[y],A),D=I,L=w-p[m]-R,G=w/2-p[m]/2+T,V=GE(D,G,L),H=!l.arrow&&ng(r)!=null&&G!==V&&s.reference[m]/2-(G<D?I:R)-p[m]/2<0,$=H?G<D?G-D:G-L:0;return{[h]:f[h]+$,data:{[h]:V,centerOffset:G-V-$,...H&&{alignmentOffset:$}},reset:H}}}),Rde=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,i;const{placement:r,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:p=!0,...b}=el(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const E=tl(r),y=Ic(a),v=tl(a)===a,_=await(l.isRTL==null?void 0:l.isRTL(c.floating)),S=f||(v||!p?[Lb(a)]:Sde(a)),M=m!=="none";!f&&M&&S.push(...xde(a,p,m,_));const w=[a,...S],T=await G0(t,b),A=[];let I=((i=s.flip)==null?void 0:i.overflows)||[];if(u&&A.push(T[E]),d){const G=Tde(r,o,_);A.push(T[G[0]],T[G[1]])}if(I=[...I,{placement:r,overflows:A}],!A.every(G=>G<=0)){var R,D;const G=(((R=s.flip)==null?void 0:R.index)||0)+1,V=w[G];if(V)return{data:{index:G,overflows:I},reset:{placement:V}};let H=(D=I.filter($=>$.overflows[0]<=0).sort(($,j)=>$.overflows[1]-j.overflows[1])[0])==null?void 0:D.placement;if(!H)switch(h){case"bestFit":{var L;const $=(L=I.filter(j=>{if(M){const X=Ic(j.placement);return X===y||X==="y"}return!0}).map(j=>[j.placement,j.overflows.filter(X=>X>0).reduce((X,K)=>X+K,0)]).sort((j,X)=>j[1]-X[1])[0])==null?void 0:L[0];$&&(H=$);break}case"initialPlacement":H=a;break}if(r!==H)return{reset:{placement:H}}}return{}}}};function wA(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function TA(e){return vde.some(t=>e[t]>=0)}const kde=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:i="referenceHidden",...r}=el(e,t);switch(i){case"referenceHidden":{const s=await G0(t,{...r,elementContext:"reference"}),o=wA(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:TA(o)}}}case"escaped":{const s=await G0(t,{...r,altBoundary:!0}),o=wA(s,n.floating);return{data:{escapedOffsets:o,escaped:TA(o)}}}default:return{}}}}};async function Lde(e,t){const{placement:n,platform:i,elements:r}=e,s=await(i.isRTL==null?void 0:i.isRTL(r.floating)),o=tl(n),a=ng(n),l=Ic(n)==="y",c=["left","top"].includes(o)?-1:1,u=s&&l?-1:1,d=el(t,e);let{mainAxis:f,crossAxis:h,alignmentAxis:m}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof m=="number"&&(h=a==="end"?m*-1:m),l?{x:h*u,y:f*c}:{x:f*c,y:h*u}}const Dde=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,i;const{x:r,y:s,placement:o,middlewareData:a}=t,l=await Lde(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(i=a.arrow)!=null&&i.alignmentOffset?{}:{x:r+l.x,y:s+l.y,data:{...l,placement:o}}}}},Nde=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:i,placement:r}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:b=>{let{x:E,y}=b;return{x:E,y}}},...l}=el(e,t),c={x:n,y:i},u=await G0(t,l),d=Ic(tl(r)),f=u_(d);let h=c[f],m=c[d];if(s){const b=f==="y"?"top":"left",E=f==="y"?"bottom":"right",y=h+u[b],v=h-u[E];h=GE(y,h,v)}if(o){const b=d==="y"?"top":"left",E=d==="y"?"bottom":"right",y=m+u[b],v=m-u[E];m=GE(y,m,v)}const p=a.fn({...t,[f]:h,[d]:m});return{...p,data:{x:p.x-n,y:p.y-i,enabled:{[f]:s,[d]:o}}}}}},Ode=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:i,placement:r,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=el(e,t),u={x:n,y:i},d=Ic(r),f=u_(d);let h=u[f],m=u[d];const p=el(a,t),b=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(l){const v=f==="y"?"height":"width",_=s.reference[f]-s.floating[v]+b.mainAxis,S=s.reference[f]+s.reference[v]-b.mainAxis;h<_?h=_:h>S&&(h=S)}if(c){var E,y;const v=f==="y"?"width":"height",_=["top","left"].includes(tl(r)),S=s.reference[d]-s.floating[v]+(_&&((E=o.offset)==null?void 0:E[d])||0)+(_?0:b.crossAxis),M=s.reference[d]+s.reference[v]+(_?0:((y=o.offset)==null?void 0:y[d])||0)-(_?b.crossAxis:0);m<S?m=S:m>M&&(m=M)}return{[f]:h,[d]:m}}}},Pde=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,i;const{placement:r,rects:s,platform:o,elements:a}=t,{apply:l=()=>{},...c}=el(e,t),u=await G0(t,c),d=tl(r),f=ng(r),h=Ic(r)==="y",{width:m,height:p}=s.floating;let b,E;d==="top"||d==="bottom"?(b=d,E=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(E=d,b=f==="end"?"top":"bottom");const y=p-u.top-u.bottom,v=m-u.left-u.right,_=Sc(p-u[b],y),S=Sc(m-u[E],v),M=!t.middlewareData.shift;let w=_,T=S;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(T=v),(i=t.middlewareData.shift)!=null&&i.enabled.y&&(w=y),M&&!f){const I=xr(u.left,0),R=xr(u.right,0),D=xr(u.top,0),L=xr(u.bottom,0);h?T=m-2*(I!==0||R!==0?I+R:xr(u.left,u.right)):w=p-2*(D!==0||L!==0?D+L:xr(u.top,u.bottom))}await l({...t,availableWidth:T,availableHeight:w});const A=await o.getDimensions(a.floating);return m!==A.width||p!==A.height?{reset:{rects:!0}}:{}}}};function d5(){return typeof window<"u"}function ig(e){return nH(e)?(e.nodeName||"").toLowerCase():"#document"}function Fr(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Ko(e){var t;return(t=(nH(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function nH(e){return d5()?e instanceof Node||e instanceof Fr(e).Node:!1}function io(e){return d5()?e instanceof Element||e instanceof Fr(e).Element:!1}function $o(e){return d5()?e instanceof HTMLElement||e instanceof Fr(e).HTMLElement:!1}function SA(e){return!d5()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Fr(e).ShadowRoot}function Km(e){const{overflow:t,overflowX:n,overflowY:i,display:r}=ro(e);return/auto|scroll|overlay|hidden|clip/.test(t+i+n)&&!["inline","contents"].includes(r)}function Fde(e){return["table","td","th"].includes(ig(e))}function f5(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function h_(e){const t=g_(),n=io(e)?ro(e):e;return["transform","translate","scale","rotate","perspective"].some(i=>n[i]?n[i]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(i=>(n.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(n.contain||"").includes(i))}function Bde(e){let t=xc(e);for(;$o(t)&&!Ch(t);){if(h_(t))return t;if(f5(t))return null;t=xc(t)}return null}function g_(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ch(e){return["html","body","#document"].includes(ig(e))}function ro(e){return Fr(e).getComputedStyle(e)}function h5(e){return io(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function xc(e){if(ig(e)==="html")return e;const t=e.assignedSlot||e.parentNode||SA(e)&&e.host||Ko(e);return SA(t)?t.host:t}function iH(e){const t=xc(e);return Ch(t)?e.ownerDocument?e.ownerDocument.body:e.body:$o(t)&&Km(t)?t:iH(t)}function X0(e,t,n){var i;t===void 0&&(t=[]),n===void 0&&(n=!0);const r=iH(e),s=r===((i=e.ownerDocument)==null?void 0:i.body),o=Fr(r);if(s){const a=jE(o);return t.concat(o,o.visualViewport||[],Km(r)?r:[],a&&n?X0(a):[])}return t.concat(r,X0(r,[],n))}function jE(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function rH(e){const t=ro(e);let n=parseFloat(t.width)||0,i=parseFloat(t.height)||0;const r=$o(e),s=r?e.offsetWidth:n,o=r?e.offsetHeight:i,a=kb(n)!==s||kb(i)!==o;return a&&(n=s,i=o),{width:n,height:i,$:a}}function m_(e){return io(e)?e:e.contextElement}function Wf(e){const t=m_(e);if(!$o(t))return Oo(1);const n=t.getBoundingClientRect(),{width:i,height:r,$:s}=rH(t);let o=(s?kb(n.width):n.width)/i,a=(s?kb(n.height):n.height)/r;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const zde=Oo(0);function sH(e){const t=Fr(e);return!g_()||!t.visualViewport?zde:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Hde(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Fr(e)?!1:t}function od(e,t,n,i){t===void 0&&(t=!1),n===void 0&&(n=!1);const r=e.getBoundingClientRect(),s=m_(e);let o=Oo(1);t&&(i?io(i)&&(o=Wf(i)):o=Wf(e));const a=Hde(s,n,i)?sH(s):Oo(0);let l=(r.left+a.x)/o.x,c=(r.top+a.y)/o.y,u=r.width/o.x,d=r.height/o.y;if(s){const f=Fr(s),h=i&&io(i)?Fr(i):i;let m=f,p=jE(m);for(;p&&i&&h!==m;){const b=Wf(p),E=p.getBoundingClientRect(),y=ro(p),v=E.left+(p.clientLeft+parseFloat(y.paddingLeft))*b.x,_=E.top+(p.clientTop+parseFloat(y.paddingTop))*b.y;l*=b.x,c*=b.y,u*=b.x,d*=b.y,l+=v,c+=_,m=Fr(p),p=jE(m)}}return Db({width:u,height:d,x:l,y:c})}function p_(e,t){const n=h5(e).scrollLeft;return t?t.left+n:od(Ko(e)).left+n}function oH(e,t,n){n===void 0&&(n=!1);const i=e.getBoundingClientRect(),r=i.left+t.scrollLeft-(n?0:p_(e,i)),s=i.top+t.scrollTop;return{x:r,y:s}}function Vde(e){let{elements:t,rect:n,offsetParent:i,strategy:r}=e;const s=r==="fixed",o=Ko(i),a=t?f5(t.floating):!1;if(i===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=Oo(1);const u=Oo(0),d=$o(i);if((d||!d&&!s)&&((ig(i)!=="body"||Km(o))&&(l=h5(i)),$o(i))){const h=od(i);c=Wf(i),u.x=h.x+i.clientLeft,u.y=h.y+i.clientTop}const f=o&&!d&&!s?oH(o,l,!0):Oo(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+f.x,y:n.y*c.y-l.scrollTop*c.y+u.y+f.y}}function $de(e){return Array.from(e.getClientRects())}function Gde(e){const t=Ko(e),n=h5(e),i=e.ownerDocument.body,r=xr(t.scrollWidth,t.clientWidth,i.scrollWidth,i.clientWidth),s=xr(t.scrollHeight,t.clientHeight,i.scrollHeight,i.clientHeight);let o=-n.scrollLeft+p_(e);const a=-n.scrollTop;return ro(i).direction==="rtl"&&(o+=xr(t.clientWidth,i.clientWidth)-r),{width:r,height:s,x:o,y:a}}function Xde(e,t){const n=Fr(e),i=Ko(e),r=n.visualViewport;let s=i.clientWidth,o=i.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;const c=g_();(!c||c&&t==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}return{width:s,height:o,x:a,y:l}}function jde(e,t){const n=od(e,!0,t==="fixed"),i=n.top+e.clientTop,r=n.left+e.clientLeft,s=$o(e)?Wf(e):Oo(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,l=r*s.x,c=i*s.y;return{width:o,height:a,x:l,y:c}}function IA(e,t,n){let i;if(t==="viewport")i=Xde(e,n);else if(t==="document")i=Gde(Ko(e));else if(io(t))i=jde(t,n);else{const r=sH(e);i={x:t.x-r.x,y:t.y-r.y,width:t.width,height:t.height}}return Db(i)}function aH(e,t){const n=xc(e);return n===t||!io(n)||Ch(n)?!1:ro(n).position==="fixed"||aH(n,t)}function Yde(e,t){const n=t.get(e);if(n)return n;let i=X0(e,[],!1).filter(a=>io(a)&&ig(a)!=="body"),r=null;const s=ro(e).position==="fixed";let o=s?xc(e):e;for(;io(o)&&!Ch(o);){const a=ro(o),l=h_(o);!l&&a.position==="fixed"&&(r=null),(s?!l&&!r:!l&&a.position==="static"&&!!r&&["absolute","fixed"].includes(r.position)||Km(o)&&!l&&aH(e,o))?i=i.filter(u=>u!==o):r=a,o=xc(o)}return t.set(e,i),i}function Wde(e){let{element:t,boundary:n,rootBoundary:i,strategy:r}=e;const o=[...n==="clippingAncestors"?f5(t)?[]:Yde(t,this._c):[].concat(n),i],a=o[0],l=o.reduce((c,u)=>{const d=IA(t,u,r);return c.top=xr(d.top,c.top),c.right=Sc(d.right,c.right),c.bottom=Sc(d.bottom,c.bottom),c.left=xr(d.left,c.left),c},IA(t,a,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Kde(e){const{width:t,height:n}=rH(e);return{width:t,height:n}}function Zde(e,t,n){const i=$o(t),r=Ko(t),s=n==="fixed",o=od(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const l=Oo(0);if(i||!i&&!s)if((ig(t)!=="body"||Km(r))&&(a=h5(t)),i){const f=od(t,!0,s,t);l.x=f.x+t.clientLeft,l.y=f.y+t.clientTop}else r&&(l.x=p_(r));const c=r&&!i&&!s?oH(r,a):Oo(0),u=o.left+a.scrollLeft-l.x-c.x,d=o.top+a.scrollTop-l.y-c.y;return{x:u,y:d,width:o.width,height:o.height}}function N8(e){return ro(e).position==="static"}function xA(e,t){if(!$o(e)||ro(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Ko(e)===n&&(n=n.ownerDocument.body),n}function lH(e,t){const n=Fr(e);if(f5(e))return n;if(!$o(e)){let r=xc(e);for(;r&&!Ch(r);){if(io(r)&&!N8(r))return r;r=xc(r)}return n}let i=xA(e,t);for(;i&&Fde(i)&&N8(i);)i=xA(i,t);return i&&Ch(i)&&N8(i)&&!h_(i)?n:i||Bde(e)||n}const qde=async function(e){const t=this.getOffsetParent||lH,n=this.getDimensions,i=await n(e.floating);return{reference:Zde(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function Qde(e){return ro(e).direction==="rtl"}const Jde={convertOffsetParentRelativeRectToViewportRelativeRect:Vde,getDocumentElement:Ko,getClippingRect:Wde,getOffsetParent:lH,getElementRects:qde,getClientRects:$de,getDimensions:Kde,getScale:Wf,isElement:io,isRTL:Qde};function cH(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function efe(e,t){let n=null,i;const r=Ko(e);function s(){var a;clearTimeout(i),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const c=e.getBoundingClientRect(),{left:u,top:d,width:f,height:h}=c;if(a||t(),!f||!h)return;const m=sU(d),p=sU(r.clientWidth-(u+f)),b=sU(r.clientHeight-(d+h)),E=sU(u),v={rootMargin:-m+"px "+-p+"px "+-b+"px "+-E+"px",threshold:xr(0,Sc(1,l))||1};let _=!0;function S(M){const w=M[0].intersectionRatio;if(w!==l){if(!_)return o();w?o(!1,w):i=setTimeout(()=>{o(!1,1e-7)},1e3)}w===1&&!cH(c,e.getBoundingClientRect())&&o(),_=!1}try{n=new IntersectionObserver(S,{...v,root:r.ownerDocument})}catch{n=new IntersectionObserver(S,v)}n.observe(e)}return o(!0),s}function tfe(e,t,n,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,c=m_(e),u=r||s?[...c?X0(c):[],...X0(t)]:[];u.forEach(E=>{r&&E.addEventListener("scroll",n,{passive:!0}),s&&E.addEventListener("resize",n)});const d=c&&a?efe(c,n):null;let f=-1,h=null;o&&(h=new ResizeObserver(E=>{let[y]=E;y&&y.target===c&&h&&(h.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var v;(v=h)==null||v.observe(t)})),n()}),c&&!l&&h.observe(c),h.observe(t));let m,p=l?od(e):null;l&&b();function b(){const E=od(e);p&&!cH(p,E)&&n(),p=E,m=requestAnimationFrame(b)}return n(),()=>{var E;u.forEach(y=>{r&&y.removeEventListener("scroll",n),s&&y.removeEventListener("resize",n)}),d==null||d(),(E=h)==null||E.disconnect(),h=null,l&&cancelAnimationFrame(m)}}const nfe=Dde,ife=Nde,rfe=Rde,sfe=Pde,ofe=kde,CA=Mde,afe=Ode,lfe=(e,t,n)=>{const i=new Map,r={platform:Jde,...n},s={...r.platform,_c:i};return Ade(e,t,{...r,platform:s})};var n2=typeof document<"u"?N.useLayoutEffect:N.useEffect;function Nb(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,i,r;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(i=n;i--!==0;)if(!Nb(e[i],t[i]))return!1;return!0}if(r=Object.keys(e),n=r.length,n!==Object.keys(t).length)return!1;for(i=n;i--!==0;)if(!{}.hasOwnProperty.call(t,r[i]))return!1;for(i=n;i--!==0;){const s=r[i];if(!(s==="_owner"&&e.$$typeof)&&!Nb(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function uH(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function AA(e,t){const n=uH(e);return Math.round(t*n)/n}function O8(e){const t=N.useRef(e);return n2(()=>{t.current=e}),t}function cfe(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:i=[],platform:r,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=e,[u,d]=N.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[f,h]=N.useState(i);Nb(f,i)||h(i);const[m,p]=N.useState(null),[b,E]=N.useState(null),y=N.useCallback(j=>{j!==M.current&&(M.current=j,p(j))},[]),v=N.useCallback(j=>{j!==w.current&&(w.current=j,E(j))},[]),_=s||m,S=o||b,M=N.useRef(null),w=N.useRef(null),T=N.useRef(u),A=l!=null,I=O8(l),R=O8(r),D=O8(c),L=N.useCallback(()=>{if(!M.current||!w.current)return;const j={placement:t,strategy:n,middleware:f};R.current&&(j.platform=R.current),lfe(M.current,w.current,j).then(X=>{const K={...X,isPositioned:D.current!==!1};G.current&&!Nb(T.current,K)&&(T.current=K,ii.flushSync(()=>{d(K)}))})},[f,t,n,R,D]);n2(()=>{c===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,d(j=>({...j,isPositioned:!1})))},[c]);const G=N.useRef(!1);n2(()=>(G.current=!0,()=>{G.current=!1}),[]),n2(()=>{if(_&&(M.current=_),S&&(w.current=S),_&&S){if(I.current)return I.current(_,S,L);L()}},[_,S,L,I,A]);const V=N.useMemo(()=>({reference:M,floating:w,setReference:y,setFloating:v}),[y,v]),H=N.useMemo(()=>({reference:_,floating:S}),[_,S]),$=N.useMemo(()=>{const j={position:n,left:0,top:0};if(!H.floating)return j;const X=AA(H.floating,u.x),K=AA(H.floating,u.y);return a?{...j,transform:"translate("+X+"px, "+K+"px)",...uH(H.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:X,top:K}},[n,a,H.floating,u.x,u.y]);return N.useMemo(()=>({...u,update:L,refs:V,elements:H,floatingStyles:$}),[u,L,V,H,$])}const ufe=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:i,padding:r}=typeof e=="function"?e(n):e;return i&&t(i)?i.current!=null?CA({element:i.current,padding:r}).fn(n):{}:i?CA({element:i,padding:r}).fn(n):{}}}},dfe=(e,t)=>({...nfe(e),options:[e,t]}),ffe=(e,t)=>({...ife(e),options:[e,t]}),hfe=(e,t)=>({...afe(e),options:[e,t]}),gfe=(e,t)=>({...rfe(e),options:[e,t]}),mfe=(e,t)=>({...sfe(e),options:[e,t]}),pfe=(e,t)=>({...ofe(e),options:[e,t]}),Ufe=(e,t)=>({...ufe(e),options:[e,t]});var bfe="Arrow",dH=N.forwardRef((e,t)=>{const{children:n,width:i=10,height:r=5,...s}=e;return g(ir.svg,{...s,ref:t,width:i,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:g("polygon",{points:"0,0 30,0 15,10"})})});dH.displayName=bfe;var yfe=dH;function Efe(e){const[t,n]=N.useState(void 0);return sd(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const i=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const s=r[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=e.offsetWidth,a=e.offsetHeight;n({width:o,height:a})});return i.observe(e,{box:"border-box"}),()=>i.unobserve(e)}else n(void 0)},[e]),t}var U_="Popper",[fH,hH]=Wm(U_),[vfe,gH]=fH(U_),mH=e=>{const{__scopePopper:t,children:n}=e,[i,r]=N.useState(null);return g(vfe,{scope:t,anchor:i,onAnchorChange:r,children:n})};mH.displayName=U_;var pH="PopperAnchor",UH=N.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:i,...r}=e,s=gH(pH,n),o=N.useRef(null),a=no(t,o);return N.useEffect(()=>{s.onAnchorChange((i==null?void 0:i.current)||o.current)}),i?null:g(ir.div,{...r,ref:a})});UH.displayName=pH;var b_="PopperContent",[_fe,wfe]=fH(b_),bH=N.forwardRef((e,t)=>{var st,zt,en,Ae,$e,Ht;const{__scopePopper:n,side:i="bottom",sideOffset:r=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:f=!1,updatePositionStrategy:h="optimized",onPlaced:m,...p}=e,b=gH(b_,n),[E,y]=N.useState(null),v=no(t,vs=>y(vs)),[_,S]=N.useState(null),M=Efe(_),w=(M==null?void 0:M.width)??0,T=(M==null?void 0:M.height)??0,A=i+(s!=="center"?"-"+s:""),I=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},R=Array.isArray(c)?c:[c],D=R.length>0,L={padding:I,boundary:R.filter(Sfe),altBoundary:D},{refs:G,floatingStyles:V,placement:H,isPositioned:$,middlewareData:j}=cfe({strategy:"fixed",placement:A,whileElementsMounted:(...vs)=>tfe(...vs,{animationFrame:h==="always"}),elements:{reference:b.anchor},middleware:[dfe({mainAxis:r+T,alignmentAxis:o}),l&&ffe({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?hfe():void 0,...L}),l&&gfe({...L}),mfe({...L,apply:({elements:vs,rects:qo,availableWidth:co,availableHeight:uo})=>{const{width:Gr,height:ry}=qo.reference,Vc=vs.floating.style;Vc.setProperty("--radix-popper-available-width",`${co}px`),Vc.setProperty("--radix-popper-available-height",`${uo}px`),Vc.setProperty("--radix-popper-anchor-width",`${Gr}px`),Vc.setProperty("--radix-popper-anchor-height",`${ry}px`)}}),_&&Ufe({element:_,padding:a}),Ife({arrowWidth:w,arrowHeight:T}),f&&pfe({strategy:"referenceHidden",...L})]}),[X,K]=vH(H),le=Ja(m);sd(()=>{$&&(le==null||le())},[$,le]);const we=(st=j.arrow)==null?void 0:st.x,he=(zt=j.arrow)==null?void 0:zt.y,Ve=((en=j.arrow)==null?void 0:en.centerOffset)!==0,[Ye,wt]=N.useState();return sd(()=>{E&&wt(window.getComputedStyle(E).zIndex)},[E]),g("div",{ref:G.setFloating,"data-radix-popper-content-wrapper":"",style:{...V,transform:$?V.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ye,"--radix-popper-transform-origin":[(Ae=j.transformOrigin)==null?void 0:Ae.x,($e=j.transformOrigin)==null?void 0:$e.y].join(" "),...((Ht=j.hide)==null?void 0:Ht.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:g(_fe,{scope:n,placedSide:X,onArrowChange:S,arrowX:we,arrowY:he,shouldHideArrow:Ve,children:g(ir.div,{"data-side":X,"data-align":K,...p,ref:v,style:{...p.style,animation:$?void 0:"none"}})})})});bH.displayName=b_;var yH="PopperArrow",Tfe={top:"bottom",right:"left",bottom:"top",left:"right"},EH=N.forwardRef(function(t,n){const{__scopePopper:i,...r}=t,s=wfe(yH,i),o=Tfe[s.placedSide];return g("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:g(yfe,{...r,ref:n,style:{...r.style,display:"block"}})})});EH.displayName=yH;function Sfe(e){return e!==null}var Ife=e=>({name:"transformOrigin",options:e,fn(t){var b,E,y;const{placement:n,rects:i,middlewareData:r}=t,o=((b=r.arrow)==null?void 0:b.centerOffset)!==0,a=o?0:e.arrowWidth,l=o?0:e.arrowHeight,[c,u]=vH(n),d={start:"0%",center:"50%",end:"100%"}[u],f=(((E=r.arrow)==null?void 0:E.x)??0)+a/2,h=(((y=r.arrow)==null?void 0:y.y)??0)+l/2;let m="",p="";return c==="bottom"?(m=o?d:`${f}px`,p=`${-l}px`):c==="top"?(m=o?d:`${f}px`,p=`${i.floating.height+l}px`):c==="right"?(m=`${-l}px`,p=o?d:`${h}px`):c==="left"&&(m=`${i.floating.width+l}px`,p=o?d:`${h}px`),{data:{x:m,y:p}}}});function vH(e){const[t,n="center"]=e.split("-");return[t,n]}var xfe=mH,_H=UH,Cfe=bH,Afe=EH,Mfe="Portal",wH=N.forwardRef((e,t)=>{var a;const{container:n,...i}=e,[r,s]=N.useState(!1);sd(()=>s(!0),[]);const o=n||r&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?iK.createPortal(g(ir.div,{...i,ref:t}),o):null});wH.displayName=Mfe;function Rfe(e,t){return N.useReducer((n,i)=>t[n][i]??n,e)}var g5=e=>{const{present:t,children:n}=e,i=kfe(t),r=typeof n=="function"?n({present:i.isPresent}):N.Children.only(n),s=no(i.ref,Lfe(r));return typeof n=="function"||i.isPresent?N.cloneElement(r,{ref:s}):null};g5.displayName="Presence";function kfe(e){const[t,n]=N.useState(),i=N.useRef({}),r=N.useRef(e),s=N.useRef("none"),o=e?"mounted":"unmounted",[a,l]=Rfe(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return N.useEffect(()=>{const c=oU(i.current);s.current=a==="mounted"?c:"none"},[a]),sd(()=>{const c=i.current,u=r.current;if(u!==e){const f=s.current,h=oU(c);e?l("MOUNT"):h==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&f!==h?"ANIMATION_OUT":"UNMOUNT"),r.current=e}},[e,l]),sd(()=>{if(t){let c;const u=t.ownerDocument.defaultView??window,d=h=>{const p=oU(i.current).includes(h.animationName);if(h.target===t&&p&&(l("ANIMATION_END"),!r.current)){const b=t.style.animationFillMode;t.style.animationFillMode="forwards",c=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=b)})}},f=h=>{h.target===t&&(s.current=oU(i.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",d),t.addEventListener("animationend",d),()=>{u.clearTimeout(c),t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",d),t.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:N.useCallback(c=>{c&&(i.current=getComputedStyle(c)),n(c)},[])}}function oU(e){return(e==null?void 0:e.animationName)||"none"}function Lfe(e){var i,r;let t=(i=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(r=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function y_({prop:e,defaultProp:t,onChange:n=()=>{}}){const[i,r]=Dfe({defaultProp:t,onChange:n}),s=e!==void 0,o=s?e:i,a=Ja(n),l=N.useCallback(c=>{if(s){const d=typeof c=="function"?c(e):c;d!==e&&a(d)}else r(c)},[s,e,r,a]);return[o,l]}function Dfe({defaultProp:e,onChange:t}){const n=N.useState(e),[i]=n,r=N.useRef(i),s=Ja(t);return N.useEffect(()=>{r.current!==i&&(s(i),r.current=i)},[i,r,s]),n}var Nfe=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},jd=new WeakMap,aU=new WeakMap,lU={},P8=0,TH=function(e){return e&&(e.host||TH(e.parentNode))},Ofe=function(e,t){return t.map(function(n){if(e.contains(n))return n;var i=TH(n);return i&&e.contains(i)?i:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},Pfe=function(e,t,n,i){var r=Ofe(t,Array.isArray(e)?e:[e]);lU[n]||(lU[n]=new WeakMap);var s=lU[n],o=[],a=new Set,l=new Set(r),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};r.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))u(f);else try{var h=f.getAttribute(i),m=h!==null&&h!=="false",p=(jd.get(f)||0)+1,b=(s.get(f)||0)+1;jd.set(f,p),s.set(f,b),o.push(f),p===1&&m&&aU.set(f,!0),b===1&&f.setAttribute(n,"true"),m||f.setAttribute(i,"true")}catch(E){console.error("aria-hidden: cannot operate on ",f,E)}})};return u(t),a.clear(),P8++,function(){o.forEach(function(d){var f=jd.get(d)-1,h=s.get(d)-1;jd.set(d,f),s.set(d,h),f||(aU.has(d)||d.removeAttribute(i),aU.delete(d)),h||d.removeAttribute(n)}),P8--,P8||(jd=new WeakMap,jd=new WeakMap,aU=new WeakMap,lU={})}},Ffe=function(e,t,n){n===void 0&&(n="data-aria-hidden");var i=Array.from(Array.isArray(e)?e:[e]),r=Nfe(e);return r?(i.push.apply(i,Array.from(r.querySelectorAll("[aria-live]"))),Pfe(i,r,n,"aria-hidden")):function(){return null}},xo=function(){return xo=Object.assign||function(t){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},xo.apply(this,arguments)};function SH(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n}function Bfe(e,t,n){if(n||arguments.length===2)for(var i=0,r=t.length,s;i<r;i++)(s||!(i in t))&&(s||(s=Array.prototype.slice.call(t,0,i)),s[i]=t[i]);return e.concat(s||Array.prototype.slice.call(t))}var i2="right-scroll-bar-position",r2="width-before-scroll-bar",zfe="with-scroll-bars-hidden",Hfe="--removed-body-scroll-bar-size";function F8(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Vfe(e,t){var n=N.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(i){var r=n.value;r!==i&&(n.value=i,n.callback(i,r))}}}})[0];return n.callback=t,n.facade}var $fe=typeof window<"u"?N.useLayoutEffect:N.useEffect,MA=new WeakMap;function Gfe(e,t){var n=Vfe(null,function(i){return e.forEach(function(r){return F8(r,i)})});return $fe(function(){var i=MA.get(n);if(i){var r=new Set(i),s=new Set(e),o=n.current;r.forEach(function(a){s.has(a)||F8(a,null)}),s.forEach(function(a){r.has(a)||F8(a,o)})}MA.set(n,e)},[e]),n}function Xfe(e){return e}function jfe(e,t){t===void 0&&(t=Xfe);var n=[],i=!1,r={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,i);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(i=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){i=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var u=o;o=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),n}}}};return r}function Yfe(e){e===void 0&&(e={});var t=jfe(null);return t.options=xo({async:!0,ssr:!1},e),t}var IH=function(e){var t=e.sideCar,n=SH(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=t.read();if(!i)throw new Error("Sidecar medium not found");return N.createElement(i,xo({},n))};IH.isSideCarExport=!0;function Wfe(e,t){return e.useMedium(t),IH}var xH=Yfe(),B8=function(){},m5=N.forwardRef(function(e,t){var n=N.useRef(null),i=N.useState({onScrollCapture:B8,onWheelCapture:B8,onTouchMoveCapture:B8}),r=i[0],s=i[1],o=e.forwardProps,a=e.children,l=e.className,c=e.removeScrollBar,u=e.enabled,d=e.shards,f=e.sideCar,h=e.noIsolation,m=e.inert,p=e.allowPinchZoom,b=e.as,E=b===void 0?"div":b,y=e.gapMode,v=SH(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),_=f,S=Gfe([n,t]),M=xo(xo({},v),r);return N.createElement(N.Fragment,null,u&&N.createElement(_,{sideCar:xH,removeScrollBar:c,shards:d,noIsolation:h,inert:m,setCallbacks:s,allowPinchZoom:!!p,lockRef:n,gapMode:y}),o?N.cloneElement(N.Children.only(a),xo(xo({},M),{ref:S})):N.createElement(E,xo({},M,{className:l,ref:S}),a))});m5.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};m5.classNames={fullWidth:r2,zeroRight:i2};var Kfe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Zfe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Kfe();return t&&e.setAttribute("nonce",t),e}function qfe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Qfe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Jfe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=Zfe())&&(qfe(t,n),Qfe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},ehe=function(){var e=Jfe();return function(t,n){N.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},CH=function(){var e=ehe(),t=function(n){var i=n.styles,r=n.dynamic;return e(i,r),null};return t},the={left:0,top:0,right:0,gap:0},z8=function(e){return parseInt(e||"",10)||0},nhe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],i=t[e==="padding"?"paddingTop":"marginTop"],r=t[e==="padding"?"paddingRight":"marginRight"];return[z8(n),z8(i),z8(r)]},ihe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return the;var t=nhe(e),n=document.documentElement.clientWidth,i=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,i-n+t[2]-t[0])}},rhe=CH(),Kf="data-scroll-locked",she=function(e,t,n,i){var r=e.left,s=e.top,o=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(zfe,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(a,"px ").concat(i,`;
  }
  body[`).concat(Kf,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(i,";"),n==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(i,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(i2,` {
    right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(r2,` {
    margin-right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(i2," .").concat(i2,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(r2," .").concat(r2,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(Kf,`] {
    `).concat(Hfe,": ").concat(a,`px;
  }
`)},RA=function(){var e=parseInt(document.body.getAttribute(Kf)||"0",10);return isFinite(e)?e:0},ohe=function(){N.useEffect(function(){return document.body.setAttribute(Kf,(RA()+1).toString()),function(){var e=RA()-1;e<=0?document.body.removeAttribute(Kf):document.body.setAttribute(Kf,e.toString())}},[])},ahe=function(e){var t=e.noRelative,n=e.noImportant,i=e.gapMode,r=i===void 0?"margin":i;ohe();var s=N.useMemo(function(){return ihe(r)},[r]);return N.createElement(rhe,{styles:she(s,!t,r,n?"":"!important")})},YE=!1;if(typeof window<"u")try{var cU=Object.defineProperty({},"passive",{get:function(){return YE=!0,!0}});window.addEventListener("test",cU,cU),window.removeEventListener("test",cU,cU)}catch{YE=!1}var Yd=YE?{passive:!1}:!1,lhe=function(e){return e.tagName==="TEXTAREA"},AH=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!lhe(e)&&n[t]==="visible")},che=function(e){return AH(e,"overflowY")},uhe=function(e){return AH(e,"overflowX")},kA=function(e,t){var n=t.ownerDocument,i=t;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var r=MH(e,i);if(r){var s=RH(e,i),o=s[1],a=s[2];if(o>a)return!0}i=i.parentNode}while(i&&i!==n.body);return!1},dhe=function(e){var t=e.scrollTop,n=e.scrollHeight,i=e.clientHeight;return[t,n,i]},fhe=function(e){var t=e.scrollLeft,n=e.scrollWidth,i=e.clientWidth;return[t,n,i]},MH=function(e,t){return e==="v"?che(t):uhe(t)},RH=function(e,t){return e==="v"?dhe(t):fhe(t)},hhe=function(e,t){return e==="h"&&t==="rtl"?-1:1},ghe=function(e,t,n,i,r){var s=hhe(e,window.getComputedStyle(t).direction),o=s*i,a=n.target,l=t.contains(a),c=!1,u=o>0,d=0,f=0;do{var h=RH(e,a),m=h[0],p=h[1],b=h[2],E=p-b-s*m;(m||E)&&MH(e,a)&&(d+=E,f+=m),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(t.contains(a)||t===a));return(u&&Math.abs(d)<1||!u&&Math.abs(f)<1)&&(c=!0),c},uU=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},LA=function(e){return[e.deltaX,e.deltaY]},DA=function(e){return e&&"current"in e?e.current:e},mhe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},phe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Uhe=0,Wd=[];function bhe(e){var t=N.useRef([]),n=N.useRef([0,0]),i=N.useRef(),r=N.useState(Uhe++)[0],s=N.useState(CH)[0],o=N.useRef(e);N.useEffect(function(){o.current=e},[e]),N.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(r));var p=Bfe([e.lockRef.current],(e.shards||[]).map(DA),!0).filter(Boolean);return p.forEach(function(b){return b.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),p.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(r))})}}},[e.inert,e.lockRef.current,e.shards]);var a=N.useCallback(function(p,b){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!o.current.allowPinchZoom;var E=uU(p),y=n.current,v="deltaX"in p?p.deltaX:y[0]-E[0],_="deltaY"in p?p.deltaY:y[1]-E[1],S,M=p.target,w=Math.abs(v)>Math.abs(_)?"h":"v";if("touches"in p&&w==="h"&&M.type==="range")return!1;var T=kA(w,M);if(!T)return!0;if(T?S=w:(S=w==="v"?"h":"v",T=kA(w,M)),!T)return!1;if(!i.current&&"changedTouches"in p&&(v||_)&&(i.current=S),!S)return!0;var A=i.current||S;return ghe(A,b,p,A==="h"?v:_)},[]),l=N.useCallback(function(p){var b=p;if(!(!Wd.length||Wd[Wd.length-1]!==s)){var E="deltaY"in b?LA(b):uU(b),y=t.current.filter(function(S){return S.name===b.type&&(S.target===b.target||b.target===S.shadowParent)&&mhe(S.delta,E)})[0];if(y&&y.should){b.cancelable&&b.preventDefault();return}if(!y){var v=(o.current.shards||[]).map(DA).filter(Boolean).filter(function(S){return S.contains(b.target)}),_=v.length>0?a(b,v[0]):!o.current.noIsolation;_&&b.cancelable&&b.preventDefault()}}},[]),c=N.useCallback(function(p,b,E,y){var v={name:p,delta:b,target:E,should:y,shadowParent:yhe(E)};t.current.push(v),setTimeout(function(){t.current=t.current.filter(function(_){return _!==v})},1)},[]),u=N.useCallback(function(p){n.current=uU(p),i.current=void 0},[]),d=N.useCallback(function(p){c(p.type,LA(p),p.target,a(p,e.lockRef.current))},[]),f=N.useCallback(function(p){c(p.type,uU(p),p.target,a(p,e.lockRef.current))},[]);N.useEffect(function(){return Wd.push(s),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,Yd),document.addEventListener("touchmove",l,Yd),document.addEventListener("touchstart",u,Yd),function(){Wd=Wd.filter(function(p){return p!==s}),document.removeEventListener("wheel",l,Yd),document.removeEventListener("touchmove",l,Yd),document.removeEventListener("touchstart",u,Yd)}},[]);var h=e.removeScrollBar,m=e.inert;return N.createElement(N.Fragment,null,m?N.createElement(s,{styles:phe(r)}):null,h?N.createElement(ahe,{gapMode:e.gapMode}):null)}function yhe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Ehe=Wfe(xH,bhe);var kH=N.forwardRef(function(e,t){return N.createElement(m5,xo({},e,{ref:t,sideCar:Ehe}))});kH.classNames=m5.classNames;var E_="Popover",[LH,uIe]=Wm(E_,[hH]),Zm=hH(),[vhe,zc]=LH(E_),DH=e=>{const{__scopePopover:t,children:n,open:i,defaultOpen:r,onOpenChange:s,modal:o=!1}=e,a=Zm(t),l=N.useRef(null),[c,u]=N.useState(!1),[d=!1,f]=y_({prop:i,defaultProp:r,onChange:s});return g(xfe,{...a,children:g(vhe,{scope:t,contentId:c_(),triggerRef:l,open:d,onOpenChange:f,onOpenToggle:N.useCallback(()=>f(h=>!h),[f]),hasCustomAnchor:c,onCustomAnchorAdd:N.useCallback(()=>u(!0),[]),onCustomAnchorRemove:N.useCallback(()=>u(!1),[]),modal:o,children:n})})};DH.displayName=E_;var NH="PopoverAnchor",_he=N.forwardRef((e,t)=>{const{__scopePopover:n,...i}=e,r=zc(NH,n),s=Zm(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:a}=r;return N.useEffect(()=>(o(),()=>a()),[o,a]),g(_H,{...s,...i,ref:t})});_he.displayName=NH;var OH="PopoverTrigger",PH=N.forwardRef((e,t)=>{const{__scopePopover:n,...i}=e,r=zc(OH,n),s=Zm(n),o=no(t,r.triggerRef),a=g(ir.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":$H(r.open),...i,ref:o,onClick:Ti(e.onClick,r.onOpenToggle)});return r.hasCustomAnchor?a:g(_H,{asChild:!0,...s,children:a})});PH.displayName=OH;var v_="PopoverPortal",[whe,The]=LH(v_,{forceMount:void 0}),FH=e=>{const{__scopePopover:t,forceMount:n,children:i,container:r}=e,s=zc(v_,t);return g(whe,{scope:t,forceMount:n,children:g(g5,{present:n||s.open,children:g(wH,{asChild:!0,container:r,children:i})})})};FH.displayName=v_;var Ah="PopoverContent",BH=N.forwardRef((e,t)=>{const n=The(Ah,e.__scopePopover),{forceMount:i=n.forceMount,...r}=e,s=zc(Ah,e.__scopePopover);return g(g5,{present:i||s.open,children:s.modal?g(She,{...r,ref:t}):g(Ihe,{...r,ref:t})})});BH.displayName=Ah;var She=N.forwardRef((e,t)=>{const n=zc(Ah,e.__scopePopover),i=N.useRef(null),r=no(t,i),s=N.useRef(!1);return N.useEffect(()=>{const o=i.current;if(o)return Ffe(o)},[]),g(kH,{as:$0,allowPinchZoom:!0,children:g(zH,{...e,ref:r,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ti(e.onCloseAutoFocus,o=>{var a;o.preventDefault(),s.current||(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:Ti(e.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,c=a.button===2||l;s.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:Ti(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),Ihe=N.forwardRef((e,t)=>{const n=zc(Ah,e.__scopePopover),i=N.useRef(!1),r=N.useRef(!1);return g(zH,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=e.onCloseAutoFocus)==null||o.call(e,s),s.defaultPrevented||(i.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),i.current=!1,r.current=!1},onInteractOutside:s=>{var l,c;(l=e.onInteractOutside)==null||l.call(e,s),s.defaultPrevented||(i.current=!0,s.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const o=s.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&r.current&&s.preventDefault()}})}),zH=N.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:i,onOpenAutoFocus:r,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,...d}=e,f=zc(Ah,n),h=Zm(n);return dde(),g(Jz,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:r,onUnmountAutoFocus:s,children:g(qz,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>f.onOpenChange(!1),children:g(Cfe,{"data-state":$H(f.open),role:"dialog",id:f.contentId,...h,...d,ref:t,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),HH="PopoverClose",xhe=N.forwardRef((e,t)=>{const{__scopePopover:n,...i}=e,r=zc(HH,n);return g(ir.button,{type:"button",...i,ref:t,onClick:Ti(e.onClick,()=>r.onOpenChange(!1))})});xhe.displayName=HH;var Che="PopoverArrow",VH=N.forwardRef((e,t)=>{const{__scopePopover:n,...i}=e,r=Zm(n);return g(Afe,{...r,...i,ref:t})});VH.displayName=Che;function $H(e){return e?"open":"closed"}var p5=DH,U5=PH,Ahe=FH,__=BH,GH=VH;const XH=()=>g("div",{style:{width:1,height:"1rem",backgroundColor:"var(--default-border-color)",margin:"0 auto"}}),jH=se.createContext(null),fi=()=>se.useContext(jH),YH=e=>{const[t,n]=N.useState(null),i=qn(),{theme:r}=fi(),{container:s}=Zo();return N.useLayoutEffect(()=>{var o;t&&(t.className="",t.classList.add("excalidraw",...((o=e==null?void 0:e.className)==null?void 0:o.split(/\s+/))||[]),t.classList.toggle("excalidraw--mobile",i.editor.isMobile),t.classList.toggle("theme--dark",r===xe.DARK))},[t,r,i.editor.isMobile,e==null?void 0:e.className]),N.useLayoutEffect(()=>{const o=e!=null&&e.parentSelector?s==null?void 0:s.querySelector(e.parentSelector):document.body;if(!o)return;const a=document.createElement("div");return o.appendChild(a),n(a),()=>{o.removeChild(a)}},[s,e==null?void 0:e.parentSelector]),t};function w_(e,t,n){N.useEffect(()=>{function i(r){const s=r;if(!e.current)return;const o=n==null?void 0:n(s,e.current);if(o===!0)return;if(o===!1)return t(s);e.current.contains(s.target)||!document.documentElement.contains(s.target)||s.target.closest("[data-radix-portal]")||s.target===document.documentElement&&document.body.style.pointerEvents==="none"||s.target.closest("[data-prevent-outside-click]")||t(s)}return document.addEventListener(te.POINTER_DOWN,i),document.addEventListener(te.TOUCH_START,i),()=>{document.removeEventListener(te.POINTER_DOWN,i),document.removeEventListener(te.TOUCH_START,i)}},[e,t,n])}const b5=e=>{const t=N.useRef(e);return Object.assign(t.current,e),t.current},y5=Jt(null),Mhe=({onCancel:e,onChange:t,onSelect:n,colorPickerType:i})=>{const r=YH({className:"excalidraw-eye-dropper-backdrop",parentSelector:".excalidraw-eye-dropper-container"}),s=fi(),o=$5(),a=ao(),l=Be(o,s),c=b5({app:a,onCancel:e,onChange:t,onSelect:n,selectedElements:l}),{container:u}=Zo();N.useEffect(()=>{const f=d.current;if(!f||!a.canvas||!r)return;let h=!1;const m=a.canvas.getContext("2d"),p=({clientX:M,clientY:w})=>{const T=m.getImageData((M-s.offsetLeft)*window.devicePixelRatio,(w-s.offsetTop)*window.devicePixelRatio,1,1).data;return Tne(T[0],T[1],T[2])},b=({clientX:M,clientY:w,altKey:T})=>{f.style.top=`${w+20}px`,f.style.left=`${M+20}px`;const A=p({clientX:M,clientY:w});h&&c.onChange(i,A,c.selectedElements,{altKey:T}),f.style.background=A},E=()=>{c.onCancel()},y=(M,w)=>{c.onSelect(M,w)},v=M=>{h=!0,M.stopImmediatePropagation()},_=M=>{h=!1,u==null||u.focus(),M.stopImmediatePropagation(),M.preventDefault(),y(p(M),M)},S=M=>{M.key===z.ESCAPE&&(M.preventDefault(),M.stopImmediatePropagation(),E())};return r.tabIndex=-1,r.focus(),b({clientX:c.app.lastViewportPosition.x,clientY:c.app.lastViewportPosition.y,altKey:!1}),r.addEventListener(te.KEYDOWN,S),r.addEventListener(te.POINTER_DOWN,v),r.addEventListener(te.POINTER_UP,_),window.addEventListener("pointermove",b,{passive:!0}),window.addEventListener(te.BLUR,E),()=>{h=!1,r.removeEventListener(te.KEYDOWN,S),r.removeEventListener(te.POINTER_DOWN,v),r.removeEventListener(te.POINTER_UP,_),window.removeEventListener("pointermove",b),window.removeEventListener(te.BLUR,E)}},[c,a.canvas,r,i,u,s.offsetLeft,s.offsetTop]);const d=N.useRef(null);return w_(d,()=>{e()},f=>!!f.target.closest(".excalidraw-eye-dropper-trigger, .excalidraw-eye-dropper-backdrop")),r?ii.createPortal(g("div",{ref:d,className:"excalidraw-eye-dropper-preview"}),r):null},js=se.forwardRef(({children:e,padding:t,className:n,style:i},r)=>g("div",{className:me("Island",n),style:{"--padding":t,...i},ref:r,children:e})),WH=se.forwardRef(({className:e,container:t,children:n,style:i,onClose:r,onKeyDown:s,onFocusOutside:o,onPointerLeave:a,onPointerDownOutside:l},c)=>{const u=qn();return g(Ahe,{container:t,children:P(__,{ref:c,className:me("focus-visible-none",e),"data-prevent-outside-click":!0,side:u.editor.isMobile&&!u.viewport.isLandscape?"bottom":"right",align:u.editor.isMobile&&!u.viewport.isLandscape?"center":"start",alignOffset:-16,sideOffset:20,style:{zIndex:"var(--zIndex-popup)"},onPointerLeave:a,onKeyDown:s,onFocusOutside:o,onPointerDownOutside:l,onCloseAutoFocus:d=>{d.stopPropagation(),d.preventDefault(),t&&!Eie(document.activeElement)&&t.focus(),r()},children:[g(js,{padding:3,style:i,children:n}),g(GH,{width:20,height:10,style:{fill:"var(--popup-bg-color)",filter:"drop-shadow(rgba(0, 0, 0, 0.05) 0px 3px 2px)"}})]})})}),E5=({palette:e,color:t})=>{for(const[n,i]of Object.entries(e))if(Array.isArray(i)){const r=i.indexOf(t);if(r>-1)return{colorName:n,shade:r}}else if(i===t)return{colorName:n,shade:null};return null},WE=[["q","w","e","r","t"],["a","s","d","f","g"],["z","x","c","v","b"]].flat(),KH=({color:e,palette:t})=>!Object.values(t).flat().includes(e),Rhe=(e,t,n)=>{const i={elementBackground:"backgroundColor",elementStroke:"strokeColor"},r=e.filter(o=>{if(o.isDeleted)return!1;const a=o[i[t]];return KH({color:a,palette:n})}),s=new Map;return r.forEach(o=>{const a=o[i[t]];s.has(a)?s.set(a,s.get(a)+1):s.set(a,1)}),[...s.entries()].sort((o,a)=>a[1]-o[1]).map(o=>o[0]).slice(0,yne)},rg=Jt(null),NA=(e,t,n)=>(e*299+t*587+n*114)/1e3,T_=(e,t=160)=>{if(!e)return!0;if(e==="transparent")return!1;if(!e.startsWith("#")){const s=document.createElement("div");if(s.style.color=e,s.style.color){s.style.position="absolute",s.style.visibility="hidden",s.style.width="0",s.style.height="0",document.body.appendChild(s);const o=getComputedStyle(s).color;document.body.removeChild(s);const a=o.replace(/^(rgb|rgba)\(/,"").replace(/\)$/,"").replace(/\s/g,"").split(","),l=parseInt(a[0]),c=parseInt(a[1]),u=parseInt(a[2]);return NA(l,c,u)<t}return!0}const n=parseInt(e.slice(1,3),16),i=parseInt(e.slice(3,5),16),r=parseInt(e.slice(5,7),16);return NA(n,i,r)<t},khe=({color:e,onChange:t,label:n,colorPickerType:i})=>{const r=qn(),[s,o]=N.useState(e),[a,l]=hn(rg);N.useEffect(()=>{o(e)},[e]);const c=N.useCallback(m=>{const p=m.toLowerCase(),b=zhe(p);b&&t(b),o(p)},[t]),u=N.useRef(null),d=N.useRef(null);N.useEffect(()=>{u.current&&u.current.focus()},[a]);const[f,h]=hn(y5);return N.useEffect(()=>()=>{h(null)},[h]),P("div",{className:"color-picker__input-label",children:[g("div",{className:"color-picker__input-hash",children:"#"}),g("input",{ref:a==="hex"?u:void 0,style:{border:0,padding:0},spellCheck:!1,className:"color-picker-input","aria-label":n,onChange:m=>{c(m.target.value)},value:(s||"").replace(/^#/,""),onBlur:()=>{o(e)},tabIndex:-1,onFocus:()=>l("hex"),onKeyDown:m=>{var p;m.key!==z.TAB&&(m.key===z.ESCAPE&&((p=d.current)==null||p.focus()),m.stopPropagation())}}),!r.editor.isMobile&&P(ge,{children:[g("div",{style:{width:"1px",height:"1.25rem",backgroundColor:"var(--default-border-color)"}}),g("div",{ref:d,className:me("excalidraw-eye-dropper-trigger",{selected:f}),onClick:()=>h(m=>m?null:{keepOpenOnAlt:!1,onSelect:p=>t(p),colorPickerType:i}),title:`${k("labels.eyeDropper")} — ${z.I.toLocaleUpperCase()} or ${Q("Alt")} `,children:aue})]})]})},S_=({color:e,keyLabel:t,isShade:n=!1})=>P("div",{className:"color-picker__button__hotkey-label",style:{color:T_(e)?"#fff":"#000"},children:[n&&"⇧",t]}),Lhe=({colors:e,color:t,onChange:n,label:i})=>{const[r,s]=hn(rg),o=N.useRef(null);return N.useEffect(()=>{o.current&&o.current.focus()},[t,r]),g("div",{className:"color-picker-content--default",children:e.map((a,l)=>P("button",{ref:t===a?o:void 0,tabIndex:-1,type:"button",className:me("color-picker__button color-picker__button--large has-outline",{active:t===a,"is-transparent":a==="transparent"||!a}),onClick:()=>{n(a),s("custom")},title:a,"aria-label":i,style:{"--swatch-color":a},children:[g("div",{className:"color-picker__button-outline"}),g(S_,{color:a,keyLabel:l+1})]},l))})},Dhe=({palette:e,color:t,onChange:n,label:i,activeShade:r})=>{const s=E5({color:t||"transparent",palette:e}),[o,a]=hn(rg),l=N.useRef(null);return N.useEffect(()=>{l.current&&o==="baseColors"&&l.current.focus()},[s==null?void 0:s.colorName,o]),g("div",{className:"color-picker-content--default",children:Object.entries(e).map(([c,u],d)=>{const f=(Array.isArray(u)?u[r]:u)||"transparent",h=WE[d],m=k(`colors.${c.replace(/\d+/,"")}`,null,"");return P("button",{ref:(s==null?void 0:s.colorName)===c?l:void 0,tabIndex:-1,type:"button",className:me("color-picker__button color-picker__button--large has-outline",{active:(s==null?void 0:s.colorName)===c,"is-transparent":f==="transparent"||!1}),onClick:()=>{n(f),a("baseColors")},title:`${m}${f.startsWith("#")?` ${f}`:""} — ${h}`,"aria-label":`${m} — ${h}`,style:{"--swatch-color":f},"data-testid":`color-${c}`,children:[g("div",{className:"color-picker__button-outline"}),g(S_,{color:f,keyLabel:h})]},c)})})},s2=({children:e})=>g("div",{className:"color-picker__heading",children:e}),Nhe=({hex:e,onChange:t,palette:n})=>{const i=E5({color:e||"transparent",palette:n}),[r,s]=hn(rg),o=N.useRef(null);if(N.useEffect(()=>{o.current&&r==="shades"&&o.current.focus()},[i,r]),i){const{colorName:a,shade:l}=i,c=n[a];if(Array.isArray(c))return g("div",{className:"color-picker-content--default shades",children:c.map((u,d)=>P("button",{ref:d===l&&r==="shades"?o:void 0,tabIndex:-1,type:"button",className:me("color-picker__button color-picker__button--large has-outline",{active:d===l}),"aria-label":"Shade",title:`${a} - ${d+1}`,style:u?{"--swatch-color":u}:void 0,onClick:()=>{t(u),s("shades")},children:[g("div",{className:"color-picker__button-outline"}),g(S_,{color:u,keyLabel:d+1,isShade:!0})]},d))})}return P("div",{className:"color-picker-content--default",style:{position:"relative"},tabIndex:-1,children:[g("button",{type:"button",tabIndex:-1,className:"color-picker__button color-picker__button--large color-picker__button--no-focus-visible"}),g("div",{tabIndex:-1,style:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",fontSize:"0.75rem"},children:k("colorPicker.noShades")})]})},H8=(e,t,n)=>{const i=Math.ceil(n/of);switch(t=t??-1,e){case"ArrowLeft":{const r=t-1;return r<0?n-1:r}case"ArrowRight":return(t+1)%n;case"ArrowDown":{const r=t+of;return r>=n?t%of:r}case"ArrowUp":{const r=t-of,s=r<0?of*i+r:r;return s>=n?void 0:s}}},Ohe=({e,colorObj:t,onChange:n,palette:i,customColors:r,setActiveColorPickerSection:s,activeShade:o})=>{if((t==null?void 0:t.shade)!=null&&["Digit1","Digit2","Digit3","Digit4","Digit5"].includes(e.code)&&e.shiftKey){const a=Number(e.code.slice(-1))-1;return n(i[t.colorName][a]),s("shades"),!0}if(["1","2","3","4","5"].includes(e.key)&&r[Number(e.key)-1])return n(r[Number(e.key)-1]),s("custom"),!0;if(WE.includes(e.key)){const a=WE.indexOf(e.key),l=Object.keys(i)[a],c=i[l],u=Array.isArray(c)?c[o]:c;return n(u),s("baseColors"),!0}return!1},Phe=({event:e,activeColorPickerSection:t,palette:n,color:i,onChange:r,customColors:s,setActiveColorPickerSection:o,updateData:a,activeShade:l,onEyeDropperToggle:c,onEscape:u})=>{if(e[z.CTRL_OR_CMD])return!1;if(e.key===z.ESCAPE)return u(e),!0;if(e.key===z.ALT)return c(!0),!0;if(e.key===z.I)return c(),!0;const d=E5({color:i,palette:n});if(e.key===z.TAB){const f={custom:!!s.length,baseColors:!0,shades:(d==null?void 0:d.shade)!=null,hex:!0},h=Object.entries(f).reduce((y,[v,_])=>(_&&y.push(v),y),[]),m=h.indexOf(t),p=e.shiftKey?-1:1,b=m+p>h.length-1?0:m+p<0?h.length-1:m+p,E=h[b];return E&&o(E),E==="custom"?r(s[0]):E==="baseColors"&&(Object.entries(n).find(([v,_])=>Array.isArray(_)?_.includes(i):_===i?v:null)||r(Xe.black)),e.preventDefault(),e.stopPropagation(),!0}if(Ohe({e,colorObj:d,onChange:r,palette:n,customColors:s,setActiveColorPickerSection:o,activeShade:l}))return!0;if(t==="shades"&&d){const{shade:f}=d,h=H8(e.key,f,of);if(h!==void 0)return r(n[d.colorName][h]),!0}if(t==="baseColors"&&d){const{colorName:f}=d,h=Object.keys(n),m=h.indexOf(f),p=H8(e.key,m,h.length);if(p!==void 0){const b=h[p],E=n[b];return r(Array.isArray(E)?E[l]:E),!0}}if(t==="custom"){const f=s.indexOf(i),h=H8(e.key,f,s.length);if(h!==void 0){const m=s[h];return r(m),!0}}return!1},Fhe=({color:e,onChange:t,label:n,type:i,elements:r,palette:s,updateData:o,children:a,onEyeDropperToggle:l,onEscape:c})=>{const[u]=se.useState(()=>i==="canvasBackground"?[]:Rhe(r,i,s)),[d,f]=hn(rg),h=E5({color:e,palette:s});N.useEffect(()=>{if(!d){const E=KH({color:e,palette:s}),y=E&&!u.includes(e);f(y?"hex":E?"custom":(h==null?void 0:h.shade)!=null?"shades":"baseColors")}},[d,e,s,f,h,u]);const[m,p]=N.useState((h==null?void 0:h.shade)??(i==="elementBackground"?l1:a1));N.useEffect(()=>{(h==null?void 0:h.shade)!=null&&p(h.shade);const E=y=>{y.key===z.ALT&&l(!1)};return document.addEventListener(te.KEYUP,E,{capture:!0}),()=>{document.removeEventListener(te.KEYUP,E,{capture:!0})}},[h,l]);const b=se.useRef(null);return g("div",{role:"dialog","aria-modal":"true","aria-label":k("labels.colorPicker"),children:P("div",{ref:b,onKeyDown:E=>{Phe({event:E,activeColorPickerSection:d,palette:s,color:e,onChange:t,onEyeDropperToggle:l,customColors:u,setActiveColorPickerSection:f,updateData:o,activeShade:m,onEscape:c})&&(E.preventDefault(),E.stopPropagation())},className:"color-picker-content properties-content",tabIndex:-1,children:[!!u.length&&P("div",{children:[g(s2,{children:k("colorPicker.mostUsedCustomColors")}),g(Lhe,{colors:u,color:e,label:k("colorPicker.mostUsedCustomColors"),onChange:t})]}),P("div",{children:[g(s2,{children:k("colorPicker.colors")}),g(Dhe,{color:e,label:n,palette:s,onChange:t,activeShade:m})]}),P("div",{children:[g(s2,{children:k("colorPicker.shades")}),g(Nhe,{hex:e,onChange:t,palette:s})]}),a]})})},Bhe=({onChange:e,type:t,activeColor:n,topPicks:i})=>{let r;return t==="elementStroke"&&(r=rP),t==="elementBackground"&&(r=sP),t==="canvasBackground"&&(r=oP),i&&(r=i),r?g("div",{className:"color-picker__top-picks",children:r.map(s=>g("button",{className:me("color-picker__button",{active:s===n,"is-transparent":s==="transparent"||!s,"has-outline":!T_(s,nP)}),style:{"--swatch-color":s},type:"button",title:s,onClick:()=>e(s),"data-testid":`color-top-pick-${s}`,children:g("div",{className:"color-picker__button-outline"})},s))}):(console.error("Invalid type for TopPicks"),null)},OA=e=>{const t=new Option().style;return t.color=e,!!t.color},zhe=e=>Fs(e)?e:OA(`#${e}`)?`#${e}`:OA(e)?e:null,Hhe=({type:e,color:t,onChange:n,label:i,elements:r,palette:s=Xe,updateData:o})=>{const{container:a}=Zo(),[,l]=hn(rg),[c,u]=hn(y5),d=P("div",{children:[g(s2,{children:k("colorPicker.hexCode")}),g(khe,{color:t,label:i,onChange:m=>{n(m)},colorPickerType:e})]}),f=N.useRef(null),h=()=>{var m,p;(p=(m=f.current)==null?void 0:m.querySelector(".color-picker-content"))==null||p.focus()};return g(WH,{container:a,style:{maxWidth:"13rem"},onFocusOutside:m=>{h(),m.preventDefault()},onPointerDownOutside:m=>{c&&m.preventDefault()},onClose:()=>{o({openPopup:null}),l(null)},children:s?g(Fhe,{palette:s,color:t,onChange:m=>{n(m)},onEyeDropperToggle:m=>{u(p=>m?(p=p||{keepOpenOnAlt:!0,onSelect:n,colorPickerType:e},p.keepOpenOnAlt=!0,p):m===!1||p?null:{keepOpenOnAlt:!1,onSelect:n,colorPickerType:e})},onEscape:m=>{c?u(null):o({openPopup:null})},label:i,type:e,elements:r,updateData:o,children:d}):d})},Vhe=({label:e,color:t,type:n})=>g(U5,{type:"button",className:me("color-picker__button active-color properties-trigger",{"is-transparent":t==="transparent"||!t,"has-outline":!T_(t,nP)}),"aria-label":e,style:t?{"--swatch-color":t}:void 0,title:k(n==="elementStroke"?"labels.showStroke":"labels.showBackground"),children:g("div",{className:"color-picker__button-outline"})}),I_=({type:e,color:t,onChange:n,label:i,elements:r,palette:s=Xe,topPicks:o,updateData:a,appState:l})=>g("div",{children:P("div",{role:"dialog","aria-modal":"true",className:"color-picker-container",children:[g(Bhe,{activeColor:t,onChange:n,type:e,topPicks:o}),g(XH,{}),P(p5,{open:l.openPopup===e,onOpenChange:c=>{a({openPopup:c?e:null})},children:[g(Vhe,{color:t,label:i,type:e}),l.openPopup===e&&g(Hhe,{type:e,color:t,onChange:n,label:i,elements:r,palette:s,updateData:a})]})]})}),$he="/fonts/CascadiaCode/CascadiaCode-Regular.woff2",Ghe=[{uri:$he}],Xhe="/fonts/ComicShanns/ComicShanns-Regular-279a7b317d12eb88de06167bd672b4b4.woff2",jhe="/fonts/ComicShanns/ComicShanns-Regular-6e066e8de2ac57ea9283adb9c24d7f0c.woff2",Yhe="/fonts/ComicShanns/ComicShanns-Regular-dc6a8806fa96795d7b3be5026f989a17.woff2",Whe="/fonts/ComicShanns/ComicShanns-Regular-fcb0fc02dcbee4c9846b3e2508668039.woff2",Khe=[{uri:Xhe,descriptors:{unicodeRange:"U+20-7e,U+a1-a6,U+a8,U+ab-ac,U+af-b1,U+b4,U+b8,U+bb-bc,U+bf-cf,U+d1-d7,U+d9-de,U+e0-ef,U+f1-f7,U+f9-ff,U+131,U+152-153,U+2c6,U+2da,U+2dc,U+2013-2014,U+2018-201a,U+201c-201d,U+2020-2022,U+2026,U+2039-203a,U+2044,U+20ac,U+2191,U+2193,U+2212"}},{uri:Whe,descriptors:{unicodeRange:"U+100-10f,U+112-125,U+128-130,U+134-137,U+139-13c,U+141-148,U+14c-151,U+154-161,U+164-165,U+168-17f,U+1bf,U+1f7,U+218-21b,U+237,U+1e80-1e85,U+1ef2-1ef3,U+a75b"}},{uri:Yhe,descriptors:{unicodeRange:"U+2c7,U+2d8-2d9,U+2db,U+2dd,U+315,U+2190,U+2192,U+2200,U+2203-2204,U+2264-2265,U+f6c3"}},{uri:jhe,descriptors:{unicodeRange:"U+3bb"}}],Zhe=[{uri:u9}];class qhe{constructor(t){F(this,"instance");F(this,"debounceTerminate");this.instance=new Worker(t,{type:"module"})}}class x_{constructor(t,n){F(this,"idleWorkers",new Set);F(this,"workerUrl");F(this,"workerTTL");this.workerUrl=t,this.workerTTL=n.ttl||1e3}static create(t,n={}){if(!t)throw new zz;if(!import.meta.url||t.toString()===import.meta.url)throw new Hz;return new x_(t,n)}async postMessage(t,n){let i;const r=Array.from(this.idleWorkers).shift();return r?(this.idleWorkers.delete(r),i=r):i=await this.createWorker(),new Promise((s,o)=>{i.instance.onmessage=this.onMessageHandler(i,s),i.instance.onerror=this.onErrorHandler(i,o),i.instance.postMessage(t,n),i.debounceTerminate(()=>o(new Error(`Active worker did not respond for ${this.workerTTL}ms!`)))})}async clear(){for(const t of this.idleWorkers)t.debounceTerminate.cancel(),t.instance.terminate();this.idleWorkers.clear()}async createWorker(){const t=new qhe(this.workerUrl);return t.debounceTerminate=$a(n=>{t.instance.terminate(),this.idleWorkers.has(t)?(this.idleWorkers.delete(t),console.debug("Job finished! Idle worker has been released from the pool.")):n?n():console.error("Worker has been terminated!")},this.workerTTL),t}onMessageHandler(t,n){return i=>{t.debounceTerminate(),this.idleWorkers.add(t),n(i.data)}}onErrorHandler(t,n){return i=>{t.debounceTerminate(()=>n(i)),t.debounceTerminate.flush(),this.clear()}}}let PA=typeof Worker<"u";const Qhe=async(e,t)=>{const{Commands:n,subsetToBase64:i,toBase64:r}=await ege();return PA?vc(async()=>{try{const s=await tge(),o=e.slice(0),a=await s.postMessage({command:n.Subset,arrayBuffer:o,codePoints:t},{transfer:[o]});return r(a)}catch(s){return PA=!1,Rie()&&(s instanceof zz||s instanceof Hz)||console.error("Failed to use workers for subsetting, falling back to the main thread.",s),i(e,t)}}):i(e,t)};let V8=null,$8=null;const Jhe=async()=>(V8||(V8=Ue(()=>import("./subset-worker.chunk-CVR6pt27.js"),__vite__mapDeps([0,1]))),V8),ege=async()=>($8||($8=Ue(()=>import("./subset-shared.chunk-D3ioWSie.js"),__vite__mapDeps([]))),$8);let G8=null;const tge=()=>(G8||(G8=vc(async()=>{const{WorkerUrl:e}=await Jhe();return x_.create(e)})),G8);var X8={};const Of=class Of{constructor(t,n,i){F(this,"urls");F(this,"fontFace");this.urls=Of.createUrls(n);const r=this.urls.map(s=>`url(${s}) ${Of.getFormat(s)}`).join(", ");this.fontFace=new FontFace(t,r,{display:"swap",style:"normal",weight:"400",...i})}toCSS(t){if(!this.getUnicodeRangeRegex().test(t))return;const n=Array.from(t).map(i=>i.codePointAt(0));return this.getContent(n).then(i=>`@font-face { font-family: ${this.fontFace.family}; src: url(${i}); }`)}async getContent(t){let n=0;const i=[];for(;n<this.urls.length;){const r=this.urls[n];try{const s=await this.fetchFont(r);return await Qhe(s,t)}catch(s){i.push(`"${r.toString()}" returned error "${s}"`)}n++}return console.error(`Failed to fetch font family "${this.fontFace.family}"`,JSON.stringify(i,void 0,2)),this.urls.length?this.urls[this.urls.length-1].toString():""}fetchFont(t){return vc(async()=>{const n=await fetch(t,{cache:"force-cache",headers:{Accept:"font/woff2"}});if(!n.ok){const r=t instanceof URL?t.toString():"dataurl";throw new Error(`Failed to fetch "${r}": ${n.statusText}`)}return await n.arrayBuffer()})}getUnicodeRangeRegex(){const t=this.fontFace.unicodeRange.split(/,\s*/).map(n=>{const[i,r]=n.replace("U+","").split("-");return r?`\\u{${i}}-\\u{${r}}`:`\\u{${i}}`}).join("");return new RegExp(`[${t}]`,"u")}static createUrls(t){if(t.startsWith("data"))return[t];if(t.startsWith(u9))return[];if(t.startsWith("http"))return[new URL(t)];const n=t.replace(/^\/+/,""),i=[];if(typeof window.EXCALIDRAW_ASSET_PATH=="string"){const r=this.normalizeBaseUrl(window.EXCALIDRAW_ASSET_PATH);i.push(new URL(n,r))}else Array.isArray(window.EXCALIDRAW_ASSET_PATH)&&window.EXCALIDRAW_ASSET_PATH.forEach(r=>{const s=this.normalizeBaseUrl(r);i.push(new URL(n,s))});return i.push(new URL(n,Of.ASSETS_FALLBACK_URL)),i}static getFormat(t){if(!(t instanceof URL))return"";try{const n=new URL(t).pathname.split(".");return n.length===1?"":`format('${n.pop()}')`}catch{return""}}static normalizeBaseUrl(t){var i;let n=t;return/^\.?\//.test(n)&&(n=new URL(n.replace(/^\.?\/+/,""),(i=window==null?void 0:window.location)==null?void 0:i.origin).toString()),n=`${n.replace(/\/+$/,"")}/`,n}};F(Of,"ASSETS_FALLBACK_URL",`https://esm.sh/${X8.PKG_NAME?`${X8.PKG_NAME}@${X8.PKG_VERSION}`:"@excalidraw/excalidraw"}/dist/prod/`);let KE=Of;const nge="/fonts/Excalifont/Excalifont-Regular-349fac6ca4700ffec595a7150a0d1e1d.woff2",ige="/fonts/Excalifont/Excalifont-Regular-3f2c5db56cc93c5a6873b1361d730c16.woff2",rge="/fonts/Excalifont/Excalifont-Regular-41b173a47b57366892116a575a43e2b6.woff2",sge="/fonts/Excalifont/Excalifont-Regular-623ccf21b21ef6b3a0d87738f77eb071.woff2",oge="/fonts/Excalifont/Excalifont-Regular-a88b72a24fb54c9f94e3b5fdaa7481c9.woff2",age="/fonts/Excalifont/Excalifont-Regular-b9dcf9d2e50a1eaf42fc664b50a3fd0d.woff2",lge="/fonts/Excalifont/Excalifont-Regular-be310b9bcd4f1a43f571c46df7809174.woff2",cge=[{uri:oge,descriptors:{unicodeRange:"U+20-7e,U+a0-a3,U+a5-a6,U+a8-ab,U+ad-b1,U+b4,U+b6-b8,U+ba-ff,U+131,U+152-153,U+2bc,U+2c6,U+2da,U+2dc,U+304,U+308,U+2013-2014,U+2018-201a,U+201c-201e,U+2020,U+2022,U+2024-2026,U+2030,U+2039-203a,U+20ac,U+2122,U+2212"}},{uri:lge,descriptors:{unicodeRange:"U+100-130,U+132-137,U+139-149,U+14c-151,U+154-17e,U+192,U+1fc-1ff,U+218-21b,U+237,U+1e80-1e85,U+1ef2-1ef3,U+2113"}},{uri:age,descriptors:{unicodeRange:"U+400-45f,U+490-491,U+2116"}},{uri:rge,descriptors:{unicodeRange:"U+37e,U+384-38a,U+38c,U+38e-393,U+395-3a1,U+3a3-3a8,U+3aa-3cf,U+3d7"}},{uri:ige,descriptors:{unicodeRange:"U+2c7,U+2d8-2d9,U+2db,U+2dd,U+302,U+306-307,U+30a-30c,U+326-328,U+212e,U+2211,U+fb01-fb02"}},{uri:nge,descriptors:{unicodeRange:"U+462-463,U+472-475,U+4d8-4d9,U+4e2-4e3,U+4e6-4e9,U+4ee-4ef"}},{uri:sge,descriptors:{unicodeRange:"U+300-301,U+303"}}],uge=[{uri:u9}],dge="/fonts/LiberationSans/LiberationSans-Regular.woff2",fge=[{uri:dge}],hge="/fonts/Lilita/Lilita-Regular-i7dPIFZ9Zz-WBtRtedDbYE98RXi4EwSsbg.woff2",gge="/fonts/Lilita/Lilita-Regular-i7dPIFZ9Zz-WBtRtedDbYEF8RXi4EwQ.woff2",mge=[{uri:hge,descriptors:{unicodeRange:ou.LATIN_EXT}},{uri:gge,descriptors:{unicodeRange:ou.LATIN}}],pge="/fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTA3j6zbXWjgevT5.woff2",Uge="/fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTQ3j6zbXWjgeg.woff2",bge="/fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTk3j6zbXWjgevT5.woff2",yge="/fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTo3j6zbXWjgevT5.woff2",Ege="/fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTs3j6zbXWjgevT5.woff2",vge=[{uri:bge,descriptors:{unicodeRange:ou.CYRILIC_EXT,weight:"500"}},{uri:pge,descriptors:{unicodeRange:ou.CYRILIC,weight:"500"}},{uri:Ege,descriptors:{unicodeRange:ou.VIETNAMESE,weight:"500"}},{uri:yge,descriptors:{unicodeRange:ou.LATIN_EXT,weight:"500"}},{uri:Uge,descriptors:{unicodeRange:ou.LATIN,weight:"500"}}],_ge="/fonts/Virgil/Virgil-Regular.woff2",wge=[{uri:_ge}],Tge="/fonts/Xiaolai/Xiaolai-Regular-019d66dcad46dc156b162d267f981c20.woff2",Sge="/fonts/Xiaolai/Xiaolai-Regular-04b718e5623574919c8b0dea5f301444.woff2",Ige="/fonts/Xiaolai/Xiaolai-Regular-069e77aac84590e2e991d0a0176d34f2.woff2",xge="/fonts/Xiaolai/Xiaolai-Regular-06c77b8c66e51ed6c63ccb502dd8b8af.woff2",Cge="/fonts/Xiaolai/Xiaolai-Regular-08e0dc436ad0ad61ba5558db0674d762.woff2",Age="/fonts/Xiaolai/Xiaolai-Regular-093b9ef39a46ceae95a1df18a0a3a326.woff2",Mge="/fonts/Xiaolai/Xiaolai-Regular-095c169f3314805276f603a362766abd.woff2",Rge="/fonts/Xiaolai/Xiaolai-Regular-09850c4077f3fffe707905872e0e2460.woff2",kge="/fonts/Xiaolai/Xiaolai-Regular-41521fade99856108931b4768b1b2648.woff2",Lge="/fonts/Xiaolai/Xiaolai-Regular-544fc28abe2c5c30e62383fd4dac255f.woff2",Dge="/fonts/Xiaolai/Xiaolai-Regular-60a3089806700d379f11827ee9843b6b.woff2",Nge="/fonts/Xiaolai/Xiaolai-Regular-7eb9fffd1aa890d07d0f88cc82e6cfe4.woff2",Oge="/fonts/Xiaolai/Xiaolai-Regular-6fe5c5973cc06f74b2387a631ea36b88.woff2",Pge="/fonts/Xiaolai/Xiaolai-Regular-a4c34be6d42152e64b0df90bc4607f64.woff2",Fge="/fonts/Xiaolai/Xiaolai-Regular-b96d9226ce77ec94ceca043d712182e6.woff2",Bge="/fonts/Xiaolai/Xiaolai-Regular-6ae5b42180ad70b971c91e7eefb8eba2.woff2",zge="/fonts/Xiaolai/Xiaolai-Regular-c69f61a4ab18d0488c8d1fc12e7028e8.woff2",Hge="/fonts/Xiaolai/Xiaolai-Regular-cb17fc3db95f6d139afc9d31a8e93293.woff2",Vge="/fonts/Xiaolai/Xiaolai-Regular-e3fcf5180fd466c8915c4e8069491054.woff2",$ge="/fonts/Xiaolai/Xiaolai-Regular-c1f94158256bb1f3bf665b053d895af9.woff2",Gge="/fonts/Xiaolai/Xiaolai-Regular-7197d6fda6cba7c3874c53d6381ca239.woff2",Xge="/fonts/Xiaolai/Xiaolai-Regular-70c2eb8d64e71a42a834eb857ea9df51.woff2",jge="/fonts/Xiaolai/Xiaolai-Regular-a004ddfcb26e67bd6e678c8ed19e25ce.woff2",Yge="/fonts/Xiaolai/Xiaolai-Regular-7e4bde7e9c7f84cd34d8a845e384c746.woff2",Wge="/fonts/Xiaolai/Xiaolai-Regular-23686f7f29da6e8008c36dd3a80c83d6.woff2",Kge="/fonts/Xiaolai/Xiaolai-Regular-69c09cc5fa3e55c74fc4821f76909cc3.woff2",Zge="/fonts/Xiaolai/Xiaolai-Regular-25b7f38e18f035f96cb5e547bd2bd08c.woff2",qge="/fonts/Xiaolai/Xiaolai-Regular-ba3de316d63c7e339987b16f41a0b879.woff2",Qge="/fonts/Xiaolai/Xiaolai-Regular-12b52b58eb3df36804b9a654ec9ee194.woff2",Jge="/fonts/Xiaolai/Xiaolai-Regular-b1220a3c61f85cc0408deedb4c5f57a2.woff2",e1e="/fonts/Xiaolai/Xiaolai-Regular-4535823663ad81405188a528d8f2b1a2.woff2",t1e="/fonts/Xiaolai/Xiaolai-Regular-3eaa538115d76932653c21d8dc28f207.woff2",n1e="/fonts/Xiaolai/Xiaolai-Regular-7e929f262f30c8ee78bf398150b1a7cd.woff2",i1e="/fonts/Xiaolai/Xiaolai-Regular-73e309718fd16cea44b4d54a33581811.woff2",r1e="/fonts/Xiaolai/Xiaolai-Regular-9eb5a99df4e76ac3363453ac9ca288b1.woff2",s1e="/fonts/Xiaolai/Xiaolai-Regular-3e63ed8162808a9e425ed80a8bc79114.woff2",o1e="/fonts/Xiaolai/Xiaolai-Regular-c8b71798409ccc126ee264a00aadcf21.woff2",a1e="/fonts/Xiaolai/Xiaolai-Regular-11c345711937f0ba4b8f7b6b919c8440.woff2",l1e="/fonts/Xiaolai/Xiaolai-Regular-e480d9c614742d05f0e78f274f1e69e6.woff2",c1e="/fonts/Xiaolai/Xiaolai-Regular-95429962233afd82db1c27df1500a28c.woff2",u1e="/fonts/Xiaolai/Xiaolai-Regular-2cf96d082d35ea3d8106851223ad0d16.woff2",d1e="/fonts/Xiaolai/Xiaolai-Regular-2d43040e86ff03ba677f6f9c04cd0805.woff2",f1e="/fonts/Xiaolai/Xiaolai-Regular-2a26d20a23b00898ce82f09d2ee47c3f.woff2",h1e="/fonts/Xiaolai/Xiaolai-Regular-a365e82ed54697a52f27adcea1315fe8.woff2",g1e="/fonts/Xiaolai/Xiaolai-Regular-e4bca6cfa53e499cae0a6be4894a90e9.woff2",m1e="/fonts/Xiaolai/Xiaolai-Regular-e51ef413167c6e14e0c0fdcc585f2fc9.woff2",p1e="/fonts/Xiaolai/Xiaolai-Regular-e5f453bb04da18eed01675eeebd88bf8.woff2",U1e="/fonts/Xiaolai/Xiaolai-Regular-e656f091b9dc4709722c9f4b84d3c797.woff2",b1e="/fonts/Xiaolai/Xiaolai-Regular-f0f13b5c60e0af5553bd359f5513be1b.woff2",y1e="/fonts/Xiaolai/Xiaolai-Regular-f5d079153c99a25b9be5b8583c4cc8a7.woff2",E1e="/fonts/Xiaolai/Xiaolai-Regular-10a7ae9a371830a80c3d844acf1c02d7.woff2",v1e="/fonts/Xiaolai/Xiaolai-Regular-60a41c7e1c68f22424e6d22df544bc82.woff2",_1e="/fonts/Xiaolai/Xiaolai-Regular-7ab2bed91166a9dca83a5ebfbe2a7f38.woff2",w1e="/fonts/Xiaolai/Xiaolai-Regular-670ba603758d94268e8606f240a42e12.woff2",T1e="/fonts/Xiaolai/Xiaolai-Regular-15dc6d811c9cd078f9086a740d5a1038.woff2",S1e="/fonts/Xiaolai/Xiaolai-Regular-8c2f33cee3993174f7e87c28e4bf42ee.woff2",I1e="/fonts/Xiaolai/Xiaolai-Regular-761d05e3cd968cf574166867998ef06a.woff2",x1e="/fonts/Xiaolai/Xiaolai-Regular-642b26e2e5f5fb780b51b593dbc8c851.woff2",C1e="/fonts/Xiaolai/Xiaolai-Regular-5572b3513ba8df57a3d5d7303ee6b11b.woff2",A1e="/fonts/Xiaolai/Xiaolai-Regular-3c9de2ae0ea4bc91a510942dfa4be8d2.woff2",M1e="/fonts/Xiaolai/Xiaolai-Regular-671a2c20b1eb9e4ef8a192833940e319.woff2",R1e="/fonts/Xiaolai/Xiaolai-Regular-4dc6d5f188d5c96d44815cd1e81aa885.woff2",k1e="/fonts/Xiaolai/Xiaolai-Regular-ce4884f96f11589608b76b726a755803.woff2",L1e="/fonts/Xiaolai/Xiaolai-Regular-8f476c4c99813d57cbe6eca4727388ad.woff2",D1e="/fonts/Xiaolai/Xiaolai-Regular-5935a5775af3d5c6307ac667bd9ae74e.woff2",N1e="/fonts/Xiaolai/Xiaolai-Regular-79f007c1c6d07557120982951ea67998.woff2",O1e="/fonts/Xiaolai/Xiaolai-Regular-bafff7a14c27403dcc6cf1432e8ea836.woff2",P1e="/fonts/Xiaolai/Xiaolai-Regular-543fa46ace099a7099dad69123399400.woff2",F1e="/fonts/Xiaolai/Xiaolai-Regular-4ddc14ed3eb0c3e46364317dfc0144a3.woff2",B1e="/fonts/Xiaolai/Xiaolai-Regular-0fa55a080fcd0f9dc2e0b0058b793df8.woff2",z1e="/fonts/Xiaolai/Xiaolai-Regular-66493ba5a8367f2928812f446f47b56a.woff2",H1e="/fonts/Xiaolai/Xiaolai-Regular-57862b464a55b18c7bf234ce22907d73.woff2",V1e="/fonts/Xiaolai/Xiaolai-Regular-8d3bcabb847b56243b16afe62adaaf21.woff2",$1e="/fonts/Xiaolai/Xiaolai-Regular-2b77e8ebfb2367ab2662396a60e7d320.woff2",G1e="/fonts/Xiaolai/Xiaolai-Regular-0b5d723fdc4e249c140f0909e87d03b4.woff2",X1e="/fonts/Xiaolai/Xiaolai-Regular-cdbce89e82cc1ab53a2decbf5819278f.woff2",j1e="/fonts/Xiaolai/Xiaolai-Regular-739bc1a567439c7cffcd1614644593d2.woff2",Y1e="/fonts/Xiaolai/Xiaolai-Regular-72252d73220fa3cd856677888cee1635.woff2",W1e="/fonts/Xiaolai/Xiaolai-Regular-cf6ff4e0f491ca0cf3038187a997b9b4.woff2",K1e="/fonts/Xiaolai/Xiaolai-Regular-9cfb2a77a4e45025105ad29a1748b90d.woff2",Z1e="/fonts/Xiaolai/Xiaolai-Regular-450da755d5bcb70906e1295e559b9602.woff2",q1e="/fonts/Xiaolai/Xiaolai-Regular-0986d134c05864f5025962eef9f994a0.woff2",Q1e="/fonts/Xiaolai/Xiaolai-Regular-1ee544f0f1dac422545c505baa788992.woff2",J1e="/fonts/Xiaolai/Xiaolai-Regular-4806e761d750087c2d734fc64596eaff.woff2",e0e="/fonts/Xiaolai/Xiaolai-Regular-33432927cd87d40cfe393c7482bf221f.woff2",t0e="/fonts/Xiaolai/Xiaolai-Regular-be549ab72f0719d606a5c01e2c0219b6.woff2",n0e="/fonts/Xiaolai/Xiaolai-Regular-b5c1596551c256e0e9cf02028595b092.woff2",i0e="/fonts/Xiaolai/Xiaolai-Regular-cf2cc71752631e579e35b0e423bf2638.woff2",r0e="/fonts/Xiaolai/Xiaolai-Regular-6f3256af8454371776bc46670d33cc65.woff2",s0e="/fonts/Xiaolai/Xiaolai-Regular-23f228f3999c01983860012330e4be08.woff2",o0e="/fonts/Xiaolai/Xiaolai-Regular-21430ee05a1248901da8d0de08744d47.woff2",a0e="/fonts/Xiaolai/Xiaolai-Regular-5330a2119a716e4e7224ed108b085dac.woff2",l0e="/fonts/Xiaolai/Xiaolai-Regular-cd145ce4a0ea18469358df53c207bc1b.woff2",c0e="/fonts/Xiaolai/Xiaolai-Regular-36925dfe329a45086cbb7fc5c20d45ac.woff2",u0e="/fonts/Xiaolai/Xiaolai-Regular-4bfaa8ffa64c5ee560aa2daba7c9cbd3.woff2",d0e="/fonts/Xiaolai/Xiaolai-Regular-112c051027b2d766c19a519f6ee1f4f7.woff2",f0e="/fonts/Xiaolai/Xiaolai-Regular-5b0ed6971aaab9c8ad563230bd5471a7.woff2",h0e="/fonts/Xiaolai/Xiaolai-Regular-98f2ad84457de7f3740d9920b8fa8667.woff2",g0e="/fonts/Xiaolai/Xiaolai-Regular-733171b4ffcd17ea1fe1c0ba627173bf.woff2",m0e="/fonts/Xiaolai/Xiaolai-Regular-684d65f1793cac449dde5d59cb3c47fb.woff2",p0e="/fonts/Xiaolai/Xiaolai-Regular-cbaaefaaf326668277aa24dfa93c4d28.woff2",U0e="/fonts/Xiaolai/Xiaolai-Regular-58fd02350d0bc52cf1ca3bb32ce9766e.woff2",b0e="/fonts/Xiaolai/Xiaolai-Regular-7ccce86603f80a099ddb0cb21d4ae3e3.woff2",y0e="/fonts/Xiaolai/Xiaolai-Regular-3717077e38f98d89eae729b6c14e56dc.woff2",E0e="/fonts/Xiaolai/Xiaolai-Regular-dbea1af6dcd9860be40c3d18254338f5.woff2",v0e="/fonts/Xiaolai/Xiaolai-Regular-4a0fdb40036e87b40aa08dd30584cb85.woff2",_0e="/fonts/Xiaolai/Xiaolai-Regular-0f626226ba1272e832aea87bafd9720e.woff2",w0e="/fonts/Xiaolai/Xiaolai-Regular-938d90c10ff8c20386af7f242c05d6b0.woff2",T0e="/fonts/Xiaolai/Xiaolai-Regular-b6d128682ee29e471486354d486a1b90.woff2",S0e="/fonts/Xiaolai/Xiaolai-Regular-9d81066dd2b337c938df6e90380a00dc.woff2",I0e="/fonts/Xiaolai/Xiaolai-Regular-20e7bf72fa05de9adf7dbcc7bf51dde6.woff2",x0e="/fonts/Xiaolai/Xiaolai-Regular-4095eb84ef3874e2600247bee0b04026.woff2",C0e="/fonts/Xiaolai/Xiaolai-Regular-4ee10ae43505e2e0bc62656ced49c0fa.woff2",A0e="/fonts/Xiaolai/Xiaolai-Regular-7494dc504ae00ee9cd0505f990f88c5d.woff2",M0e="/fonts/Xiaolai/Xiaolai-Regular-8de5b863cb50dfefdd07cb11c774d579.woff2",R0e="/fonts/Xiaolai/Xiaolai-Regular-3e1f8f654357353bf0e04ba5c34b5f7f.woff2",k0e="/fonts/Xiaolai/Xiaolai-Regular-2e33e8dc771ef5e1d9127d60a6b73679.woff2",L0e="/fonts/Xiaolai/Xiaolai-Regular-173945821411c09f70c95f98d590e697.woff2",D0e="/fonts/Xiaolai/Xiaolai-Regular-b358f7a51ece39a3247942b1feabdb29.woff2",N0e="/fonts/Xiaolai/Xiaolai-Regular-23ad2d71b280f00b1363b95b7bea94eb.woff2",O0e="/fonts/Xiaolai/Xiaolai-Regular-5882ffa04f32584d26109137e2da4352.woff2",P0e="/fonts/Xiaolai/Xiaolai-Regular-a203b91dad570bf05a58c3c3ddb529bf.woff2",F0e="/fonts/Xiaolai/Xiaolai-Regular-bd77e3c7f9e0b072d96af37f73d1aa32.woff2",B0e="/fonts/Xiaolai/Xiaolai-Regular-5a45d991244d4c7140217e1e5f5ca4f4.woff2",z0e="/fonts/Xiaolai/Xiaolai-Regular-f56414bf9bced67990def8660e306759.woff2",H0e="/fonts/Xiaolai/Xiaolai-Regular-583d166e56ba0de4b77eabb47ef67839.woff2",V0e="/fonts/Xiaolai/Xiaolai-Regular-7f855356ab893b0d2b9c1c83b8116f0e.woff2",$0e="/fonts/Xiaolai/Xiaolai-Regular-b57aaedfd8ebdf3931f25119dc6a5eb2.woff2",G0e="/fonts/Xiaolai/Xiaolai-Regular-b6fd38ca30869792244804b04bc058da.woff2",X0e="/fonts/Xiaolai/Xiaolai-Regular-452225341522a7942f0f6aab1a5c91a3.woff2",j0e="/fonts/Xiaolai/Xiaolai-Regular-866fa7613df6b3fd272bcfd4530c0bb9.woff2",Y0e="/fonts/Xiaolai/Xiaolai-Regular-52a84a22fd1369bffeaf21da2d6158dc.woff2",W0e="/fonts/Xiaolai/Xiaolai-Regular-829615148e6357d826b9242eb7fbbd1e.woff2",K0e="/fonts/Xiaolai/Xiaolai-Regular-c99eda15fc26a2941579560f76c3a5cf.woff2",Z0e="/fonts/Xiaolai/Xiaolai-Regular-395c35dd584b56b0789f58a0559beaf1.woff2",q0e="/fonts/Xiaolai/Xiaolai-Regular-203b0e569e3b14aac86a003dc3fa523e.woff2",Q0e="/fonts/Xiaolai/Xiaolai-Regular-51a0e808bbc8361236ac521a119758a3.woff2",J0e="/fonts/Xiaolai/Xiaolai-Regular-6e092f71c1e634059ada0e52abadce67.woff2",eme="/fonts/Xiaolai/Xiaolai-Regular-0f7fb1e0d5015bb1371343153ecf7ce3.woff2",tme="/fonts/Xiaolai/Xiaolai-Regular-d0cf73942fea1c74edbdf0b3011f4656.woff2",nme="/fonts/Xiaolai/Xiaolai-Regular-968cffdc8ee679da094e77ebf50f58ef.woff2",ime="/fonts/Xiaolai/Xiaolai-Regular-7a07ddc0f0c0f5f4a9bad6ee3dda66b5.woff2",rme="/fonts/Xiaolai/Xiaolai-Regular-ec181b795ac1fb5a50d700b6e996d745.woff2",sme="/fonts/Xiaolai/Xiaolai-Regular-cfb211578629b7e8153b37240de6a9d5.woff2",ome="/fonts/Xiaolai/Xiaolai-Regular-59e9ff77b0efaf684bc09274fb6908c9.woff2",ame="/fonts/Xiaolai/Xiaolai-Regular-2adbc89c11e65905393d3dfc468b9d5b.woff2",lme="/fonts/Xiaolai/Xiaolai-Regular-70e811fd7994e61f408c923de6ddd078.woff2",cme="/fonts/Xiaolai/Xiaolai-Regular-c4a687ac4f0c2766eefc9f77ed99cddf.woff2",ume="/fonts/Xiaolai/Xiaolai-Regular-51502f1206be09c565f1547c406e9558.woff2",dme="/fonts/Xiaolai/Xiaolai-Regular-1fdc0c67ed57263a80fd108c1f6ccf24.woff2",fme="/fonts/Xiaolai/Xiaolai-Regular-e11567fd2accf9957cd0d3c2be937d87.woff2",hme="/fonts/Xiaolai/Xiaolai-Regular-20cc1bbf50e7efb442756cb605672c1f.woff2",gme="/fonts/Xiaolai/Xiaolai-Regular-5d2898fbc097a7e24c6f38d80587621e.woff2",mme="/fonts/Xiaolai/Xiaolai-Regular-ac9ceb44437becc3e9c4dbfebab7fc2d.woff2",pme="/fonts/Xiaolai/Xiaolai-Regular-c16ed9740b85badf16e86ea782a3062f.woff2",Ume="/fonts/Xiaolai/Xiaolai-Regular-aa0d470430e6391eca720c7cfa44446f.woff2",bme="/fonts/Xiaolai/Xiaolai-Regular-f2b54d4e7be0eaefe1c2c56836fa5368.woff2",yme="/fonts/Xiaolai/Xiaolai-Regular-99a16ef6a64934d5781933dbd9c46b2e.woff2",Eme="/fonts/Xiaolai/Xiaolai-Regular-c40533fdf4cc57177b12803598af7e59.woff2",vme="/fonts/Xiaolai/Xiaolai-Regular-91ddb2969bf2d31ba02ad82998d1314c.woff2",_me="/fonts/Xiaolai/Xiaolai-Regular-774d4f764a1299da5d28ec2f2ffe0d69.woff2",wme="/fonts/Xiaolai/Xiaolai-Regular-7718fe60986d8b42b1be9c5ace5ccf25.woff2",Tme="/fonts/Xiaolai/Xiaolai-Regular-aa5c9ca6cf4fba00433b7aa3fa10671a.woff2",Sme="/fonts/Xiaolai/Xiaolai-Regular-4f50e5136e136527280bc902c5817561.woff2",Ime="/fonts/Xiaolai/Xiaolai-Regular-a0ca5df4258213d7fc9fce80f65ce760.woff2",xme="/fonts/Xiaolai/Xiaolai-Regular-d2666cbed13462c5dc36fa2f15c202ca.woff2",Cme="/fonts/Xiaolai/Xiaolai-Regular-1e6fd68f1f3902ce48ce8c69df385622.woff2",Ame="/fonts/Xiaolai/Xiaolai-Regular-87599f94b6cc129d505b375798d0d751.woff2",Mme="/fonts/Xiaolai/Xiaolai-Regular-13ae07ed2e272d26d59bc0691cd7117a.woff2",Rme="/fonts/Xiaolai/Xiaolai-Regular-353f33792a8f60dc69323ddf635a269e.woff2",kme="/fonts/Xiaolai/Xiaolai-Regular-0facdf1ea213ba40261022f5d5ed4493.woff2",Lme="/fonts/Xiaolai/Xiaolai-Regular-f6032fc06eb20480f096199713f70885.woff2",Dme="/fonts/Xiaolai/Xiaolai-Regular-f8ee5d36068a42b51d0e4a1116cfcec1.woff2",Nme="/fonts/Xiaolai/Xiaolai-Regular-79d494361ae093b69e74ee9dbe65bfd4.woff2",Ome="/fonts/Xiaolai/Xiaolai-Regular-74e2263a91439c25b91d5132ce9f4d62.woff2",Pme="/fonts/Xiaolai/Xiaolai-Regular-ee8bae97908d5147b423f77ad0d3c1bb.woff2",Fme="/fonts/Xiaolai/Xiaolai-Regular-56467a5c8840c4d23a60b2f935114848.woff2",Bme="/fonts/Xiaolai/Xiaolai-Regular-145aa02cdd91946e67dc934e1acffe75.woff2",zme="/fonts/Xiaolai/Xiaolai-Regular-54acdfc2166ad7fcbd074f75fd4a56ba.woff2",Hme="/fonts/Xiaolai/Xiaolai-Regular-29cec36cd205b211da97acabaa62f055.woff2",Vme="/fonts/Xiaolai/Xiaolai-Regular-3756e81d3e149cf6099163ee79944fec.woff2",$me="/fonts/Xiaolai/Xiaolai-Regular-8e9f97f01034820170065b2921b4fb5e.woff2",Gme="/fonts/Xiaolai/Xiaolai-Regular-13d2887ec8ee73c43acdabc52a05af7b.woff2",Xme="/fonts/Xiaolai/Xiaolai-Regular-72536a3d71b694a0d53dd90ddceae41e.woff2",jme="/fonts/Xiaolai/Xiaolai-Regular-603aefd23e350ba7eb124273e3c9bcf1.woff2",Yme="/fonts/Xiaolai/Xiaolai-Regular-9544732d2e62d1a429674f8ee41b5d3a.woff2",Wme="/fonts/Xiaolai/Xiaolai-Regular-d3716376641d615e2995605b29bca7b6.woff2",Kme="/fonts/Xiaolai/Xiaolai-Regular-5a1ce3117cfe90c48e8fb4a9a00f694d.woff2",Zme="/fonts/Xiaolai/Xiaolai-Regular-b7d203b051eff504ff59ddca7576b6a9.woff2",qme="/fonts/Xiaolai/Xiaolai-Regular-4a38cc3e9cf104e69ba246d37f8cf135.woff2",Qme="/fonts/Xiaolai/Xiaolai-Regular-982b630266d87db93d2539affb1275c6.woff2",Jme="/fonts/Xiaolai/Xiaolai-Regular-9592bfc861f07bcb8d75c196b370e548.woff2",epe="/fonts/Xiaolai/Xiaolai-Regular-a7accba310e821da5505f71c03b76bdb.woff2",tpe="/fonts/Xiaolai/Xiaolai-Regular-dac48066b5883d8b4551fc584f0c2a3e.woff2",npe="/fonts/Xiaolai/Xiaolai-Regular-a1f916d6039285c4ffb900cd654e418f.woff2",ipe="/fonts/Xiaolai/Xiaolai-Regular-95bfd249da4902577b4b7d76ebdd0b44.woff2",rpe="/fonts/Xiaolai/Xiaolai-Regular-93fc8f28a33234bcadf1527cafabd502.woff2",spe="/fonts/Xiaolai/Xiaolai-Regular-903bb6865f3452e2fda42e3a25547bc5.woff2",ope="/fonts/Xiaolai/Xiaolai-Regular-4aca6a43e59aceee2166b0c7e4e85ef1.woff2",ape="/fonts/Xiaolai/Xiaolai-Regular-24476a126f129212beb33f66853ea151.woff2",lpe="/fonts/Xiaolai/Xiaolai-Regular-1b611157cd46bb184d4fa4dae2d6a2b8.woff2",cpe="/fonts/Xiaolai/Xiaolai-Regular-56a32a7689abd0326e57c10c6c069bb4.woff2",upe="/fonts/Xiaolai/Xiaolai-Regular-3cc70dbb64df5b21f1326cc24dee2195.woff2",dpe="/fonts/Xiaolai/Xiaolai-Regular-e2ead7ea7da0437f085f42ffc05f8d13.woff2",fpe="/fonts/Xiaolai/Xiaolai-Regular-97f7f48ce90c9429bf32ae51469db74d.woff2",hpe="/fonts/Xiaolai/Xiaolai-Regular-24a21c1e4449222e8d1898d69ff3a404.woff2",gpe="/fonts/Xiaolai/Xiaolai-Regular-726303e0774b4e678bff8c2deb6ca603.woff2",mpe="/fonts/Xiaolai/Xiaolai-Regular-5a7fac4b8b23a6e4e5ba0c9bf1756c91.woff2",ppe="/fonts/Xiaolai/Xiaolai-Regular-2b7441d46298788ac94e610ffcc709b6.woff2",Upe=[{uri:Rge,descriptors:{unicodeRange:"U+f9b8-fa6d,U+fe32,U+fe45-fe4f,U+ff02-ff0b,U+ff0d-ff1e,U+ff20-ff2a"}},{uri:Nge,descriptors:{unicodeRange:"U+20dd-20de,U+25ef,U+ff2b-ffbe,U+ffc2-ffc7,U+ffca-ffcf,U+ffd2-ffd7,U+ffda-ffdc,U+ffe0-ffe6,U+ffe8-ffee"}},{uri:Dge,descriptors:{unicodeRange:"U+d7eb-d7fb,U+f900-f9b7"}},{uri:Oge,descriptors:{unicodeRange:"U+d6f2-d7a3,U+d7b0-d7c6,U+d7cb-d7ea"}},{uri:Fge,descriptors:{unicodeRange:"U+d609-d6f1"}},{uri:Bge,descriptors:{unicodeRange:"U+d520-d608"}},{uri:Pge,descriptors:{unicodeRange:"U+d437-d51f"}},{uri:zge,descriptors:{unicodeRange:"U+d34e-d436"}},{uri:Vge,descriptors:{unicodeRange:"U+d265-d34d"}},{uri:$ge,descriptors:{unicodeRange:"U+d17c-d264"}},{uri:Lge,descriptors:{unicodeRange:"U+d093-d17b"}},{uri:Gge,descriptors:{unicodeRange:"U+cfaa-d092"}},{uri:Xge,descriptors:{unicodeRange:"U+cec1-cfa9"}},{uri:Ige,descriptors:{unicodeRange:"U+cdd8-cec0"}},{uri:kge,descriptors:{unicodeRange:"U+ccf1-cdd7"}},{uri:jge,descriptors:{unicodeRange:"U+cc08-ccf0"}},{uri:Sge,descriptors:{unicodeRange:"U+cb43-cc07"}},{uri:Yge,descriptors:{unicodeRange:"U+ca83-cb42"}},{uri:Wge,descriptors:{unicodeRange:"U+c9a1-ca82"}},{uri:Kge,descriptors:{unicodeRange:"U+c8b8-c9a0"}},{uri:Zge,descriptors:{unicodeRange:"U+c7cf-c8b7"}},{uri:qge,descriptors:{unicodeRange:"U+c6e6-c7ce"}},{uri:Qge,descriptors:{unicodeRange:"U+c5fd-c6e5"}},{uri:Jge,descriptors:{unicodeRange:"U+c514-c5fc"}},{uri:e1e,descriptors:{unicodeRange:"U+c42b-c513"}},{uri:t1e,descriptors:{unicodeRange:"U+c341-c34e,U+c350-c42a"}},{uri:n1e,descriptors:{unicodeRange:"U+c258-c340"}},{uri:i1e,descriptors:{unicodeRange:"U+c16f-c257"}},{uri:r1e,descriptors:{unicodeRange:"U+c086-c16e"}},{uri:s1e,descriptors:{unicodeRange:"U+bf9d-c085"}},{uri:Hge,descriptors:{unicodeRange:"U+beb4-bf9c"}},{uri:o1e,descriptors:{unicodeRange:"U+bdcb-beb3"}},{uri:a1e,descriptors:{unicodeRange:"U+bce2-bdca"}},{uri:l1e,descriptors:{unicodeRange:"U+bbf9-bce1"}},{uri:c1e,descriptors:{unicodeRange:"U+bb10-bbf8"}},{uri:u1e,descriptors:{unicodeRange:"U+ba27-bb0f"}},{uri:d1e,descriptors:{unicodeRange:"U+b93e-ba26"}},{uri:f1e,descriptors:{unicodeRange:"U+b855-b93d"}},{uri:h1e,descriptors:{unicodeRange:"U+b76c-b854"}},{uri:y1e,descriptors:{unicodeRange:"U+b683-b76b"}},{uri:E1e,descriptors:{unicodeRange:"U+b59a-b682"}},{uri:g1e,descriptors:{unicodeRange:"U+b4b1-b599"}},{uri:v1e,descriptors:{unicodeRange:"U+11fb-11ff,U+b3cd-b4b0"}},{uri:_1e,descriptors:{unicodeRange:"U+11e6-11fa,U+b2f9-b3cc"}},{uri:w1e,descriptors:{unicodeRange:"U+11d1-11e5,U+b225-b2f8"}},{uri:U1e,descriptors:{unicodeRange:"U+11bc-11d0,U+b151-b224"}},{uri:T1e,descriptors:{unicodeRange:"U+11a7-11bb,U+b07d-b150"}},{uri:b1e,descriptors:{unicodeRange:"U+1191-11a6,U+afaa-b07c"}},{uri:S1e,descriptors:{unicodeRange:"U+117c-1190,U+aed6-afa9"}},{uri:I1e,descriptors:{unicodeRange:"U+1167-117b,U+ae02-aed5"}},{uri:x1e,descriptors:{unicodeRange:"U+1152-115e,U+1160-1166,U+ad2d-ae01"}},{uri:C1e,descriptors:{unicodeRange:"U+113d-1151,U+ac59-ad2c"}},{uri:A1e,descriptors:{unicodeRange:"U+1100-113c,U+9f95-9f98,U+9f9c-9f9e,U+9fa1-9fce,U+9fd0,U+a960-a97c,U+ac00-ac58"}},{uri:M1e,descriptors:{unicodeRange:"U+9771-9772,U+9775,U+9777-977b,U+977d-9784,U+9786-978a,U+978c,U+978e-9790,U+9793,U+9795-9797,U+9799-979f,U+97a1-97a2,U+97a4-97aa,U+97ac,U+97ae,U+97b0-97b1,U+97b3,U+97b5-97e5,U+97e8,U+97ee-97f2,U+97f4,U+97f7-982d"}},{uri:R1e,descriptors:{unicodeRange:"U+9491,U+9496,U+9498,U+94c7,U+94cf,U+94d3-94d4,U+94da,U+94e6,U+94fb,U+951c,U+9520,U+9527,U+9533,U+953d,U+9543,U+9548,U+954b,U+9555,U+955a,U+9560,U+956e,U+9574-9575,U+9577-957e,U+9580-95e7,U+95ec,U+95ff,U+9607,U+9613,U+9618,U+961b,U+961e,U+9620,U+9623-9629,U+962b-962d,U+962f-9630,U+9637-963a,U+963e,U+9641,U+9643,U+964a,U+964e-964f,U+9651-9653,U+9656-965a,U+965c-965e,U+9660,U+9663,U+9665-9666,U+966b,U+966d-9671,U+9673,U+9678-9684,U+9687,U+9689-968a,U+968c,U+968e,U+9691-9693"}},{uri:k1e,descriptors:{unicodeRange:"U+923c-9273,U+9275-928d,U+928f-92ad,U+92af-92c7,U+92c9-92ee"}},{uri:L1e,descriptors:{unicodeRange:"U+9159,U+915b-915c,U+915f-9160,U+9166-9168,U+916b,U+916d,U+9173,U+917a-917c,U+9180-9184,U+9186,U+9188,U+918a,U+918e-918f,U+9193-9199,U+919c-91a1,U+91a4-91a9,U+91ab-91ac,U+91b0-91b3,U+91b6-91b9,U+91bb-91c6,U+91c8,U+91cb,U+91d0,U+91d2-91db,U+91dd-923b"}},{uri:D1e,descriptors:{unicodeRange:"U+902b-902c,U+9030-9034,U+9037,U+9039-903a,U+903d,U+903f-9040,U+9043,U+9045-9046,U+9048-904c,U+904e,U+9054-9056,U+9059-905a,U+905c-9061,U+9064,U+9066-9067,U+9069-906c,U+906f-9073,U+9076-907c,U+907e,U+9081,U+9084-9087,U+9089-908a,U+908c-9090,U+9092,U+9094,U+9096,U+9098,U+909a,U+909c,U+909e-90a0,U+90a4-90a5,U+90a7-90a9,U+90ab,U+90ad,U+90b2,U+90b7,U+90bc-90bd,U+90bf-90c0,U+90c2-90c3,U+90c6,U+90c8-90c9,U+90cb-90cd,U+90d2,U+90d4-90d6,U+90d8-90da,U+90de-90e0,U+90e3-90e5,U+90e9-90ea,U+90ec,U+90ee,U+90f0-90f3,U+90f5-90f7,U+90f9-90fc,U+90ff-9101,U+9103,U+9105-9118,U+911a-911d,U+911f-9121,U+9124-912e,U+9130,U+9132-9138,U+913a-9142,U+9144-9145,U+9147-9148,U+9151,U+9153-9156,U+9158"}},{uri:N1e,descriptors:{unicodeRange:"U+8f03-8f65,U+8f6a,U+8f80,U+8f8c,U+8f92,U+8f9d,U+8fa0-8fa2,U+8fa4-8fa7,U+8faa,U+8fac-8faf,U+8fb2-8fb5,U+8fb7-8fb8,U+8fba-8fbc,U+8fbf-8fc0,U+8fc3,U+8fc6,U+8fc9-8fcd,U+8fcf,U+8fd2,U+8fd6-8fd7,U+8fda,U+8fe0-8fe1,U+8fe3,U+8fe7,U+8fec,U+8fef,U+8ff1-8ff2,U+8ff4-8ff6,U+8ffa-8ffc,U+8ffe-8fff,U+9007-9008,U+900c,U+900e,U+9013,U+9015,U+9018-9019,U+901c,U+9023-9025,U+9027-902a"}},{uri:O1e,descriptors:{unicodeRange:"U+8d03-8d1c,U+8d20,U+8d51-8d52,U+8d57,U+8d5f,U+8d65,U+8d68-8d6a,U+8d6c,U+8d6e-8d6f,U+8d71-8d72,U+8d78-8d80,U+8d82-8d83,U+8d86-8d89,U+8d8c-8d90,U+8d92-8d93,U+8d95-8d9e,U+8da0-8da2,U+8da4-8db0,U+8db2,U+8db6-8db7,U+8db9,U+8dbb,U+8dbd,U+8dc0-8dc2,U+8dc5,U+8dc7-8dca,U+8dcd,U+8dd0,U+8dd2-8dd5,U+8dd8-8dd9,U+8ddc,U+8de0-8de2,U+8de5-8de7,U+8de9,U+8ded-8dee,U+8df0-8df2,U+8df4,U+8df6,U+8dfc,U+8dfe-8e04,U+8e06-8e08,U+8e0b,U+8e0d-8e0e,U+8e10-8e13,U+8e15-8e1c,U+8e20-8e21,U+8e24-8e28,U+8e2b,U+8e2d,U+8e30,U+8e32-8e34,U+8e36-8e38,U+8e3b-8e3c,U+8e3e-8e3f,U+8e43,U+8e45-8e46"}},{uri:P1e,descriptors:{unicodeRange:"U+8bea,U+8c09,U+8c1e,U+8c38-8c40,U+8c42-8c45,U+8c48,U+8c4a-8c4b,U+8c4d-8c54,U+8c56-8c59,U+8c5b-8c60,U+8c63-8c69,U+8c6c-8c72,U+8c74-8c77,U+8c7b-8c81,U+8c83-8c84,U+8c86-8c88,U+8c8b,U+8c8d-8c93,U+8c95-8c97,U+8c99-8d02"}},{uri:F1e,descriptors:{unicodeRange:"U+8a64-8a78,U+8a7a-8a88,U+8a8b-8a92,U+8a94-8b06,U+8b08-8b1b"}},{uri:B1e,descriptors:{unicodeRange:"U+8987-89c0,U+89c3,U+89cd,U+89d3-89d5,U+89d7-89d9,U+89db,U+89dd,U+89df-89e2,U+89e4,U+89e7-89ea,U+89ec-89ee,U+89f0-89f2,U+89f4-89ff,U+8a01-8a06,U+8a08-8a3d,U+8a3f-8a47,U+8a49-8a63"}},{uri:z1e,descriptors:{unicodeRange:"U+87e3-87e4,U+87e6-87e9,U+87eb-87ed,U+87ef-87f8,U+87fa-87fd,U+87ff-8802,U+8804-8809,U+880b-8812,U+8814,U+8817-881a,U+881c-8820,U+8823-8831,U+8833-8838,U+883a-883b,U+883d-883f,U+8841-8843,U+8846-884b,U+884e-8853,U+8855-8856,U+8858,U+885a-8860,U+8866-8867,U+886a,U+886d,U+886f,U+8871,U+8873-8876,U+8878-887c,U+8880,U+8883,U+8886-8887,U+8889-888a,U+888c,U+888e-8891,U+8893-8895,U+8897-889b,U+889d-88a1,U+88a3,U+88a5-88aa,U+88ac,U+88ae-88b0,U+88b2-88b6,U+88b8-88bb"}},{uri:H1e,descriptors:{unicodeRange:"U+86e7-86e8,U+86ea-86ec,U+86ef,U+86f5-86f7,U+86fa-86fd,U+86ff,U+8701,U+8704-8706,U+870b-870c,U+870e-8711,U+8714,U+8716,U+8719,U+871b,U+871d,U+871f-8720,U+8724,U+8726-8728,U+872a-872d,U+872f-8730,U+8732-8733,U+8735-8736,U+8738-873a,U+873c-873d,U+8740-8746,U+874a-874b,U+874d,U+874f-8752,U+8754-8756,U+8758,U+875a-875f,U+8761-8762,U+8766-876d,U+876f,U+8771-8773,U+8775,U+8777-877a,U+877f-8781,U+8784,U+8786-8787,U+8789-878a,U+878c,U+878e-8792,U+8794-8796,U+8798-879e,U+87a0-87a7,U+87a9-87aa,U+87ae,U+87b0-87b2,U+87b4,U+87b6-87b9,U+87bb-87bc,U+87be-87bf,U+87c1-87c5,U+87c7-87c9,U+87cc-87d0,U+87d4-87da,U+87dc-87df,U+87e1-87e2"}},{uri:V1e,descriptors:{unicodeRange:"U+8604,U+8606-8610,U+8612-8615,U+8617-8626,U+8628,U+862a-8637,U+8639-863b,U+863d-864c,U+8652-8653,U+8655-8659,U+865b-865d,U+865f-8661,U+8663-866a,U+866d,U+866f-8670,U+8672-8678,U+8683-8689,U+868e-8692,U+8694,U+8696-869b,U+869e-86a2,U+86a5-86a6,U+86ab,U+86ad-86ae,U+86b2-86b3,U+86b7-86b9,U+86bb-86bf,U+86c1-86c3,U+86c5,U+86c8,U+86cc-86cd,U+86d2-86d3,U+86d5-86d7,U+86da,U+86dc-86dd,U+86e0-86e3,U+86e5-86e6"}},{uri:$1e,descriptors:{unicodeRange:"U+8456,U+8458,U+845d-8460,U+8462,U+8464-8468,U+846a,U+846e-8470,U+8472,U+8474,U+8477,U+8479,U+847b-8481,U+8483-8486,U+848a,U+848d,U+848f-8496,U+8498,U+849a-849b,U+849d-84a0,U+84a2-84ae,U+84b0-84b1,U+84b3,U+84b5-84b7,U+84bb-84bc,U+84be,U+84c0,U+84c2-84c3,U+84c5-84c8,U+84cb-84cc,U+84ce-84cf,U+84d2,U+84d4-84d5,U+84d7-84dc,U+84de,U+84e1-84e2,U+84e4,U+84e7-84eb,U+84ed-84ef,U+84f1-84fb,U+84fd-84fe,U+8500-850b,U+850d-8510,U+8512,U+8514-8516,U+8518-8519,U+851b-851e,U+8520,U+8522-852a,U+852d-8536,U+853e-8542,U+8544-8547,U+854b-854f"}},{uri:G1e,descriptors:{unicodeRange:"U+82c2-82c3,U+82c5-82c6,U+82c9,U+82d0,U+82d6,U+82d9-82da,U+82dd,U+82e2,U+82e7-82ea,U+82ec-82ee,U+82f0,U+82f2-82f3,U+82f5-82f6,U+82f8,U+82fa,U+82fc-8300,U+830a-830b,U+830d,U+8310,U+8312-8313,U+8316,U+8318-8319,U+831d-8326,U+8329-832a,U+832e,U+8330,U+8332,U+8337,U+833b,U+833d-833f,U+8341-8342,U+8344-8345,U+8348,U+834a-834e,U+8353,U+8355-8359,U+835d,U+8362,U+8370-8376,U+8379-837a,U+837e-8384,U+8387-8388,U+838a-838d,U+838f-8391,U+8394-8397,U+8399-839a,U+839d,U+839f,U+83a1-83a7,U+83ac-83af,U+83b5,U+83bb,U+83be-83bf,U+83c2-83c4,U+83c6,U+83c8-83c9,U+83cb,U+83cd-83ce,U+83d0-83d3,U+83d5,U+83d7,U+83d9-83db,U+83de,U+83e2-83e4,U+83e6-83e8,U+83eb-83ef,U+83f3-83f7,U+83fa-83fc,U+83fe-8400,U+8402,U+8405,U+8407-840a,U+8410,U+8412-8417,U+8419-841b,U+841e-8423,U+8429-8430,U+8432-8437,U+8439-843b,U+843e-8445,U+8447-8450,U+8452-8455"}},{uri:X1e,descriptors:{unicodeRange:"U+81a4-81a5,U+81a7,U+81a9,U+81ab-81b2,U+81b4-81b9,U+81bc-81bf,U+81c4-81c5,U+81c7-81c9,U+81cb,U+81cd-81e2,U+81e4-81e6,U+81e8-81e9,U+81eb,U+81ee-81f2,U+81f5-81fa,U+81fd,U+81ff,U+8203,U+8207-820b,U+820e-820f,U+8211,U+8213,U+8215-821a,U+821d,U+8220,U+8224-8227,U+8229,U+822e,U+8232,U+823a,U+823c-823d,U+823f-8243,U+8245-8246,U+8248,U+824a,U+824c-824e,U+8250-8257,U+8259,U+825b-825e,U+8260-8267,U+8269-826d,U+8271,U+8275-8278,U+827b-827c,U+8280-8281,U+8283,U+8285-8287,U+8289,U+828c,U+8290,U+8293-8296,U+829a-829b,U+829e,U+82a0,U+82a2-82a3,U+82a7,U+82b2,U+82b5-82b6,U+82ba-82bc,U+82bf-82c0"}},{uri:j1e,descriptors:{unicodeRange:"U+8059,U+805b-8068,U+806b-8070,U+8072-807e,U+8081-8082,U+8085,U+8088,U+808a,U+808d-8092,U+8094-8095,U+8097,U+8099,U+809e,U+80a3,U+80a6-80a8,U+80ac,U+80b0,U+80b3,U+80b5-80b6,U+80b8-80b9,U+80bb,U+80c5,U+80c7-80cb,U+80cf-80d5,U+80d8,U+80df-80e0,U+80e2-80e3,U+80e6,U+80ee,U+80f5,U+80f7,U+80f9,U+80fb,U+80fe-8101,U+8103-8105,U+8107-8108,U+810b-810c,U+8115,U+8117,U+8119,U+811b-811d,U+811f-812b,U+812d-812e,U+8130,U+8133-8135,U+8137,U+8139-813d,U+813f-8145,U+8147,U+8149,U+814d-814f,U+8152,U+8156-8158,U+815b-815f,U+8161-8164,U+8166,U+8168,U+816a-816c,U+816f,U+8172-8173,U+8175-8178,U+8181,U+8183-8187,U+8189,U+818b-818e,U+8190,U+8192-8197,U+8199-819a,U+819e-81a2"}},{uri:Y1e,descriptors:{unicodeRange:"U+7f3c-7f41,U+7f43,U+7f46-7f4f,U+7f52-7f53,U+7f56,U+7f59,U+7f5b-7f5e,U+7f60,U+7f63-7f67,U+7f6b-7f6d,U+7f6f-7f70,U+7f73,U+7f75-7f78,U+7f7a-7f7d,U+7f7f-7f80,U+7f82-7f89,U+7f8b,U+7f8d,U+7f8f-7f93,U+7f95-7f99,U+7f9b-7f9c,U+7fa0,U+7fa2-7fa3,U+7fa5-7fa6,U+7fa8-7fae,U+7fb1,U+7fb3-7fb7,U+7fba-7fbb,U+7fbe,U+7fc0,U+7fc2-7fc4,U+7fc6-7fc9,U+7fcb,U+7fcd,U+7fcf-7fd3,U+7fd6-7fd7,U+7fd9-7fde,U+7fe2-7fe4,U+7fe7-7fe8,U+7fea-7fed,U+7fef,U+7ff2,U+7ff4-7ffa,U+7ffd-7fff,U+8002,U+8007-800a,U+800e-800f,U+8011,U+8013,U+801a-801b,U+801d-801f,U+8021,U+8023-8024,U+802b-8030,U+8032,U+8034,U+8039-803a,U+803c,U+803e,U+8040-8041,U+8044-8045,U+8047-8049,U+804e-8051,U+8053,U+8055-8057"}},{uri:Cge,descriptors:{unicodeRange:"U+7cd8,U+7cda-7cdb,U+7cdd-7cde,U+7ce1-7ce7,U+7ce9-7cee,U+7cf0-7cf7,U+7cf9-7cfa,U+7cfc-7d09,U+7d0b-7d1f,U+7d21,U+7d23-7d26,U+7d28-7d2a,U+7d2c-7d2e,U+7d30-7d6d,U+7d6f-7d76,U+7d78-7d94"}},{uri:W1e,descriptors:{unicodeRange:"U+7afe,U+7b00-7b02,U+7b05,U+7b07,U+7b09,U+7b0c-7b0e,U+7b10,U+7b12-7b13,U+7b16-7b18,U+7b1a,U+7b1c-7b1d,U+7b1f,U+7b21-7b23,U+7b27,U+7b29,U+7b2d,U+7b2f-7b30,U+7b32,U+7b34-7b37,U+7b39,U+7b3b,U+7b3d,U+7b3f-7b44,U+7b46,U+7b48,U+7b4a,U+7b4d-7b4e,U+7b53,U+7b55,U+7b57,U+7b59,U+7b5c,U+7b5e-7b5f,U+7b61,U+7b63-7b6d,U+7b6f-7b70,U+7b73-7b74,U+7b76,U+7b78,U+7b7a,U+7b7c-7b7d,U+7b7f,U+7b81-7b84,U+7b86-7b8c,U+7b8e-7b8f,U+7b91-7b93,U+7b96,U+7b98-7b9b,U+7b9e-7ba0,U+7ba3-7ba5,U+7bae-7bb0,U+7bb2-7bb3,U+7bb5-7bb7,U+7bb9-7bc0,U+7bc2-7bc5,U+7bc8-7bcb,U+7bcd-7bd0,U+7bd2,U+7bd4-7bd8,U+7bdb-7bdc,U+7bde-7be0,U+7be2-7be4,U+7be7-7be9,U+7beb-7bed,U+7bef-7bf0,U+7bf2-7bf6,U+7bf8-7bfb,U+7bfd,U+7bff-7c06,U+7c08-7c0a,U+7c0d-7c0e,U+7c10-7c13"}},{uri:K1e,descriptors:{unicodeRange:"U+7a10-7a13,U+7a15-7a16,U+7a18-7a19,U+7a1b-7a1d,U+7a1f,U+7a21-7a22,U+7a24-7a32,U+7a34-7a36,U+7a38,U+7a3a,U+7a3e,U+7a40-7a45,U+7a47-7a50,U+7a52-7a56,U+7a58-7a6f,U+7a71-7a73,U+7a75,U+7a7b-7a7e,U+7a82,U+7a85,U+7a87,U+7a89-7a8c,U+7a8e-7a90,U+7a93-7a94,U+7a99-7a9b,U+7a9e,U+7aa1-7aa4,U+7aa7,U+7aa9-7aab,U+7aae-7ab2,U+7ab4-7abe,U+7ac0-7aca,U+7acc-7ad5,U+7ad7-7ad8,U+7ada-7add,U+7ae1-7ae2,U+7ae4,U+7ae7-7aec,U+7aee,U+7af0-7af8,U+7afb-7afc"}},{uri:Z1e,descriptors:{unicodeRange:"U+790d-7912,U+7914-791d,U+791f-7923,U+7925-7933,U+7935-7939,U+793d,U+793f,U+7942-7945,U+7947,U+794a-7952,U+7954-7955,U+7958-7959,U+7961,U+7963-7964,U+7966,U+7969-796c,U+796e,U+7970-7976,U+7979,U+797b-797f,U+7982-7983,U+7986-7989,U+798b-798e,U+7990-7999,U+799b-79a6,U+79a8-79b2,U+79b4-79b8,U+79bc,U+79bf,U+79c2,U+79c4-79c5,U+79c7-79c8,U+79ca,U+79cc,U+79ce-79d0,U+79d3-79d4,U+79d6-79d7,U+79d9-79de,U+79e0-79e2,U+79e5,U+79e8,U+79ea,U+79ec,U+79ee,U+79f1-79f7,U+79f9-79fa,U+79fc,U+79fe-79ff,U+7a01,U+7a04-7a05,U+7a07-7a0a,U+7a0c,U+7a0f"}},{uri:q1e,descriptors:{unicodeRange:"U+77d8-77da,U+77dd-77e1,U+77e4,U+77e6,U+77e8,U+77ea,U+77ef-77f2,U+77f4-77f5,U+77f7,U+77f9-77fc,U+7803-7808,U+780a-780b,U+780e-7810,U+7813,U+7815,U+7819,U+781b,U+781e,U+7820-7822,U+7824,U+7828,U+782a-782b,U+782e-782f,U+7831-7833,U+7835-7836,U+783d,U+783f,U+7841-7844,U+7846,U+7848-784b,U+784d,U+784f,U+7851,U+7853-7854,U+7858-785c,U+785e-7869,U+786f-7876,U+7878-787b,U+787d-7886,U+7888,U+788a-788b,U+788f-7890,U+7892,U+7894-7896,U+7899,U+789d-789e,U+78a0,U+78a2,U+78a4,U+78a6,U+78a8-78af,U+78b5-78b8,U+78ba-78bd,U+78bf-78c0,U+78c2-78c4,U+78c6-78c8,U+78cc-78cf,U+78d1-78d3,U+78d6-78d8,U+78da-78e7,U+78e9-78eb,U+78ed-78f1,U+78f3,U+78f5-78f6,U+78f8-78f9,U+78fb-7900,U+7902-7904,U+7906-790c"}},{uri:Q1e,descriptors:{unicodeRange:"U+76af-76b0,U+76b3,U+76b5-76be,U+76c0-76c1,U+76c3-76c4,U+76c7,U+76c9,U+76cb-76cc,U+76d3,U+76d5,U+76d9-76da,U+76dc-76de,U+76e0-76e4,U+76e6-76ed,U+76f0,U+76f3,U+76f5-76f7,U+76fa-76fb,U+76fd,U+76ff-7703,U+7705-7706,U+770a,U+770c,U+770e-7718,U+771b-771e,U+7721,U+7723-7725,U+7727,U+772a-772c,U+772e,U+7730-7734,U+7739,U+773b,U+773d-773f,U+7742,U+7744-7746,U+7748-774f,U+7752-7759,U+775c-7760,U+7764,U+7767,U+7769-776a,U+776d-7778,U+777a-777c,U+7781-7783,U+7786-778b,U+778f-7790,U+7793-779e,U+77a1,U+77a3-77a4,U+77a6,U+77a8,U+77ab,U+77ad-77af,U+77b1-77b2,U+77b4,U+77b6-77ba,U+77bc,U+77be,U+77c0-77cc,U+77ce-77d6"}},{uri:J1e,descriptors:{unicodeRange:"U+7589-758a,U+758c-758e,U+7590,U+7593,U+7595,U+7598,U+759b-759c,U+759e,U+75a2,U+75a6-75aa,U+75ad,U+75b6-75b7,U+75ba-75bb,U+75bf-75c1,U+75c6,U+75cb-75cc,U+75ce-75d1,U+75d3,U+75d7,U+75d9-75da,U+75dc-75dd,U+75df-75e1,U+75e5,U+75e9,U+75ec-75ef,U+75f2-75f3,U+75f5-75f8,U+75fa-75fb,U+75fd-75fe,U+7602,U+7604,U+7606-7609,U+760b,U+760d-760f,U+7611-7614,U+7616,U+761a,U+761c-761e,U+7621,U+7623,U+7627-7628,U+762c,U+762e-762f,U+7631-7632,U+7636-7637,U+7639-763b,U+763d,U+7641-7642,U+7644-764b,U+764e-7653,U+7655,U+7657-765b,U+765d,U+765f-7662,U+7664-766a,U+766c-766e,U+7670-7677,U+7679-767a,U+767c,U+767f-7681,U+7683,U+7685,U+7689-768a,U+768c-768d,U+768f-7690,U+7692,U+7694-7695,U+7697-7698,U+769a-76a3,U+76a5-76ad"}},{uri:e0e,descriptors:{unicodeRange:"U+7492-749b,U+749d,U+749f-74a6,U+74aa-74b9,U+74bb-74d1,U+74d3-74db,U+74dd,U+74df,U+74e1,U+74e5,U+74e7-74ed,U+74f0-74f3,U+74f5,U+74f8-74fe,U+7500-7503,U+7505-750c,U+750e,U+7510,U+7512,U+7514-7517,U+751b,U+751d-751e,U+7520-7524,U+7526-7527,U+752a,U+752e,U+7534,U+7536,U+7539,U+753c-753d,U+753f,U+7541-7544,U+7546-7547,U+7549-754a,U+754d,U+7550-7553,U+7555-7558,U+755d-7564,U+7567-7569,U+756b-7571,U+7573,U+7575-7577,U+757a-757e,U+7580-7582,U+7584-7585,U+7587-7588"}},{uri:t0e,descriptors:{unicodeRange:"U+7372-737d,U+737f-7383,U+7385-7386,U+7388,U+738a,U+738c-738d,U+738f-7390,U+7392-7395,U+7397-739a,U+739c-739e,U+73a0-73a1,U+73a3-73a8,U+73aa,U+73ac-73ad,U+73b1,U+73b4-73b6,U+73b8-73b9,U+73bc-73bf,U+73c1,U+73c3-73c7,U+73cb-73cc,U+73ce,U+73d2-73d8,U+73da-73dd,U+73df,U+73e1-73e4,U+73e6,U+73e8,U+73ea-73ec,U+73ee-73f1,U+73f3-7402,U+7404,U+7407-7408,U+740b-740e,U+7411-7419,U+741c-7421,U+7423-7424,U+7427,U+7429,U+742b,U+742d,U+742f,U+7431-7432,U+7437-743b,U+743d-7440,U+7442-7454,U+7456,U+7458,U+745d,U+7460-746c,U+746e-746f,U+7471-7475,U+7478-747d,U+747f,U+7482,U+7484-7486,U+7488-748a,U+748c-748d,U+748f,U+7491"}},{uri:Tge,descriptors:{unicodeRange:"U+7054-705d,U+705f-706a,U+706e,U+7071-7074,U+7077,U+7079-707b,U+707d,U+7081-7084,U+7086-7088,U+708b-708d,U+708f-7091,U+7093,U+7097-7098,U+709a-709b,U+709e-70aa,U+70b0,U+70b2,U+70b4-70b6,U+70ba,U+70be-70bf,U+70c4-70c7,U+70c9,U+70cb-70d7,U+70da,U+70dc-70de,U+70e0-70e3,U+70e5,U+70ea,U+70ee,U+70f0-70f6,U+70f8,U+70fa-70fc,U+70fe-7108,U+710b-710f,U+7111-7112,U+7114,U+7117,U+711b-7125,U+7127-712e,U+7132-7135,U+7137-7144,U+7146-7149,U+714b,U+714d,U+714f-715b,U+715d,U+715f-7163,U+7165,U+7169-716d,U+716f-7171,U+7174-7177"}},{uri:n0e,descriptors:{unicodeRange:"U+722e-722f,U+7232-7234,U+723a,U+723c,U+723e,U+7240-7246,U+7249-724b,U+724e-7251,U+7253-7255,U+7257-7258,U+725a,U+725c,U+725e,U+7260,U+7263-7265,U+7268,U+726a-726d,U+7270-7271,U+7273-7274,U+7276-7278,U+727b-727d,U+7282-7283,U+7285-7289,U+728c,U+728e,U+7290-7291,U+7293-729e,U+72a0-72ab,U+72ae,U+72b1-72b3,U+72b5,U+72ba-72c0,U+72c5-72c7,U+72c9-72cc,U+72cf,U+72d1,U+72d3-72d6,U+72d8,U+72da-72dd,U+72df,U+72e2-72e7,U+72ea-72eb,U+72f5-72f6,U+72f9,U+72fd-7300,U+7302,U+7304-7309,U+730b-730d,U+730f-7312,U+7314,U+7318-731a,U+731f-7320,U+7323-7324,U+7326-7328,U+732d,U+732f-7330,U+7332-7333,U+7335-7336,U+733a-733d,U+7340-734c,U+734e-734f,U+7351,U+7353-7356,U+7358-735f,U+7361-736b,U+736e,U+7370-7371"}},{uri:p1e,descriptors:{unicodeRange:"U+6ec5-6ec6,U+6ec8-6eca,U+6ecc-6ece,U+6ed0,U+6ed2,U+6ed6,U+6ed8-6ed9,U+6edb-6edd,U+6ee3,U+6ee7,U+6eea-6ef3,U+6ef5-6ef8,U+6efa-6f01,U+6f03-6f05,U+6f07-6f08,U+6f0a-6f0e,U+6f10-6f12,U+6f16-6f1f,U+6f21-6f23,U+6f25-6f28,U+6f2c,U+6f2e,U+6f30,U+6f32,U+6f34-6f35,U+6f37-6f3d,U+6f3f-6f45,U+6f48-6f4a,U+6f4c,U+6f4e-6f57,U+6f59-6f5b,U+6f5d,U+6f5f-6f61,U+6f63-6f65,U+6f67-6f6c,U+6f6f-6f71,U+6f73,U+6f75-6f77,U+6f79,U+6f7b,U+6f7d-6f83,U+6f85-6f87,U+6f8a-6f8b,U+6f8f-6f9b,U+6f9d-6fa0,U+6fa2-6fa6,U+6fa8-6fb1"}},{uri:i0e,descriptors:{unicodeRange:"U+6d73,U+6d75-6d76,U+6d79-6d7b,U+6d7d-6d81,U+6d83-6d84,U+6d86-6d87,U+6d8a-6d8b,U+6d8d,U+6d8f-6d90,U+6d92,U+6d96-6d9a,U+6d9c,U+6da2,U+6da5,U+6dac-6dad,U+6db0-6db1,U+6db3-6db4,U+6db6-6db7,U+6db9-6dbe,U+6dc1-6dc3,U+6dc8-6dca,U+6dcd-6dd0,U+6dd2-6dd5,U+6dd7,U+6dda-6ddc,U+6ddf,U+6de2-6de3,U+6de5,U+6de7-6dea,U+6ded,U+6def-6df0,U+6df2,U+6df4-6df6,U+6df8,U+6dfa,U+6dfd-6e04,U+6e06-6e09,U+6e0b,U+6e0f,U+6e12-6e13,U+6e15,U+6e18-6e19,U+6e1b-6e1c,U+6e1e-6e1f,U+6e22,U+6e26-6e28,U+6e2a,U+6e2c,U+6e2e,U+6e30-6e31,U+6e33,U+6e35-6e37,U+6e39,U+6e3b-6e42,U+6e45-6e4c,U+6e4f-6e52,U+6e55,U+6e57,U+6e59-6e5a,U+6e5c-6e5e,U+6e60-6e6a,U+6e6c-6e6d,U+6e6f-6e7d,U+6e80-6e82,U+6e84,U+6e87-6e88,U+6e8a-6e8e,U+6e91-6e97,U+6e99-6e9b,U+6e9d-6e9e,U+6ea0-6ea1,U+6ea3-6ea4,U+6ea6,U+6ea8-6ea9,U+6eab-6eae,U+6eb0,U+6eb3,U+6eb5,U+6eb8-6eb9,U+6ebc,U+6ebe-6ec0,U+6ec3-6ec4"}},{uri:r0e,descriptors:{unicodeRange:"U+6bbb-6bbe,U+6bc0,U+6bc3-6bc4,U+6bc6-6bca,U+6bcc,U+6bce,U+6bd0-6bd1,U+6bd8,U+6bda,U+6bdc-6be0,U+6be2-6be9,U+6bec-6bee,U+6bf0-6bf2,U+6bf4,U+6bf6-6bf8,U+6bfa-6bfc,U+6bfe-6c04,U+6c08-6c0c,U+6c0e,U+6c12,U+6c17,U+6c1c-6c1e,U+6c20,U+6c23,U+6c25,U+6c2b-6c2d,U+6c31,U+6c33,U+6c36-6c37,U+6c39-6c3c,U+6c3e-6c3f,U+6c43-6c45,U+6c48,U+6c4b-6c4f,U+6c51-6c53,U+6c56,U+6c58-6c5a,U+6c62-6c63,U+6c65-6c67,U+6c6b-6c6f,U+6c71,U+6c73,U+6c75,U+6c77-6c78,U+6c7a-6c7c,U+6c7f-6c80,U+6c84,U+6c87,U+6c8a-6c8b,U+6c8d-6c8e,U+6c91-6c92,U+6c95-6c98,U+6c9a,U+6c9c-6c9e,U+6ca0,U+6ca2,U+6ca8,U+6cac,U+6caf-6cb0,U+6cb4-6cb7,U+6cba,U+6cc0-6cc3,U+6cc6-6cc8,U+6ccb,U+6ccd-6ccf,U+6cd1-6cd2,U+6cd8-6cda,U+6cdc-6cdd,U+6cdf,U+6ce4,U+6ce6-6ce7,U+6ce9,U+6cec-6ced,U+6cf2,U+6cf4,U+6cf9,U+6cff-6d00,U+6d02-6d03,U+6d05-6d06,U+6d08-6d0a,U+6d0d,U+6d0f-6d11,U+6d13-6d16,U+6d18,U+6d1c-6d1d,U+6d1f-6d24,U+6d26,U+6d28-6d29,U+6d2c-6d2d,U+6d2f-6d30,U+6d34,U+6d36-6d38,U+6d3a,U+6d3f-6d40,U+6d42,U+6d44,U+6d49,U+6d4c,U+6d50,U+6d55-6d58,U+6d5b,U+6d5d,U+6d5f,U+6d61-6d62,U+6d64-6d65,U+6d67-6d68,U+6d6b-6d6d,U+6d70-6d72"}},{uri:s0e,descriptors:{unicodeRange:"U+6967-696a,U+696c-696d,U+696f-6970,U+6972-6976,U+697a-697b,U+697d-697f,U+6981,U+6983,U+6985,U+698a-698c,U+698e-6993,U+6996-6997,U+6999-699a,U+699d-69a6,U+69a9-69aa,U+69ac,U+69ae-69b0,U+69b2-69b3,U+69b5-69b6,U+69b8-69ba,U+69bc-69c0,U+69c2-69c9,U+69cb,U+69cd,U+69cf,U+69d1-69d3,U+69d5-69da,U+69dc-69de,U+69e1-69ec,U+69ee-69f1,U+69f3-69fc,U+69fe,U+6a00-6a09,U+6a0b-6a16,U+6a19-6a1e,U+6a20,U+6a22-6a27,U+6a29,U+6a2b-6a2e,U+6a30,U+6a32-6a34,U+6a36-6a3c,U+6a3f-6a43,U+6a45-6a46,U+6a48-6a4a"}},{uri:o0e,descriptors:{unicodeRange:"U+6830-6831,U+6834-6836,U+683a-683b,U+683f,U+6847,U+684b,U+684d,U+684f,U+6852,U+6856-685f,U+686a,U+686c-6873,U+6875,U+6878-6880,U+6882,U+6884,U+6887-688e,U+6890-6892,U+6894-6896,U+6898-68a1,U+68a3-68a5,U+68a9-68ac,U+68ae,U+68b1-68b2,U+68b4,U+68b6-68bf,U+68c1,U+68c3-68c8,U+68ca,U+68cc,U+68ce-68d1,U+68d3-68d4,U+68d6-68d7,U+68d9,U+68db-68df,U+68e1-68e2,U+68e4-68ed,U+68ef,U+68f2-68f4,U+68f6-68f8,U+68fb,U+68fd-6900,U+6902-6904,U+6906-690a,U+690c,U+690f,U+6911,U+6913-691e,U+6921-6923,U+6925-692c,U+692e-692f,U+6931-6933,U+6935-6938,U+693a-693c,U+693e,U+6940-6941,U+6943-6953,U+6955-6956,U+6958-6959,U+695b-695c,U+695f,U+6961-6962,U+6964-6965"}},{uri:a0e,descriptors:{unicodeRange:"U+66b8,U+66ba-66bd,U+66bf-66d8,U+66da,U+66de-66e5,U+66e7-66e8,U+66ea-66ef,U+66f1,U+66f5-66f6,U+66f8,U+66fa-66fb,U+66fd,U+6701-6707,U+670c,U+670e-670f,U+6711-6713,U+6716,U+6718-671a,U+671c,U+671e,U+6720-6725,U+6727,U+6729,U+672e,U+6730,U+6732-6733,U+6736-6739,U+673b-673c,U+673e-673f,U+6741,U+6744-6745,U+6747,U+674a-674b,U+674d,U+6752,U+6754-6755,U+6757-675b,U+675d,U+6762-6764,U+6766-6767,U+676b-676c,U+676e,U+6771,U+6774,U+6776,U+6778-677b,U+677d,U+6780,U+6782-6783,U+6785-6786,U+6788,U+678a,U+678c-678f,U+6791-6794,U+6796,U+6799,U+679b,U+679f-67a1,U+67a4,U+67a6,U+67a9,U+67ac,U+67ae,U+67b1-67b2,U+67b4,U+67b9-67c0,U+67c2,U+67c5-67ce,U+67d5-67d7,U+67db,U+67df,U+67e1,U+67e3-67e4,U+67e6-67e8,U+67ea-67eb,U+67ed-67ee,U+67f2,U+67f5-67fc,U+67fe,U+6801-6804,U+6806,U+680d,U+6810,U+6812,U+6814-6815,U+6818-681c,U+681e-6820,U+6822-6828,U+682b-682f"}},{uri:l0e,descriptors:{unicodeRange:"U+6569-656a,U+656d-656f,U+6571,U+6573,U+6575-6576,U+6578-6586,U+6588-658a,U+658d-658f,U+6592,U+6594-6596,U+6598,U+659a,U+659d-659e,U+65a0,U+65a2-65a3,U+65a6,U+65a8,U+65aa,U+65ac,U+65ae,U+65b1-65b8,U+65ba-65bb,U+65be-65c0,U+65c2,U+65c7-65ca,U+65cd,U+65d0-65d1,U+65d3-65d5,U+65d8-65df,U+65e1,U+65e3-65e4,U+65ea-65eb,U+65f2-65f5,U+65f8-65f9,U+65fb-65ff,U+6601,U+6604-6605,U+6607-6609,U+660b,U+660d,U+6610-6612,U+6616-6618,U+661a-661c,U+661e,U+6621-6624,U+6626,U+6629-662c,U+662e,U+6630,U+6632-6633,U+6637-663b,U+663d,U+663f-6640,U+6642,U+6644-664a,U+664d-664e,U+6650-6651,U+6658-6659,U+665b-665e,U+6660,U+6662-6663,U+6665,U+6667,U+6669-666d,U+6671-6673,U+6675,U+6678-6679,U+667b-667d,U+667f-6681,U+6683,U+6685-6686,U+6688-668b,U+668d-6690,U+6692-6695,U+6698-669c,U+669e-66a6,U+66a9-66ad,U+66af-66b3,U+66b5-66b7"}},{uri:c0e,descriptors:{unicodeRange:"U+5f30,U+5f32-5f38,U+5f3b,U+5f3d-5f3f,U+5f41-5f4f,U+5f51,U+5f54,U+5f59-5f5c,U+5f5e-5f60,U+5f63,U+5f65,U+5f67-5f68,U+5f6b,U+5f6e-5f6f,U+5f72,U+5f74-5f76,U+5f78,U+5f7a,U+5f7d-5f7f,U+5f83,U+5f86,U+5f8d-5f8f,U+5f91,U+5f93-5f94,U+5f96,U+5f9a-5f9b,U+5f9d-5fa0,U+5fa2-5fa7,U+5fa9,U+5fab-5fac,U+5faf-5fb4,U+5fb6,U+5fb8-5fbb,U+5fbe-5fc2,U+5fc7-5fc8,U+5fca-5fcb,U+5fce,U+5fd3-5fd5,U+5fda-5fdc,U+5fde-5fdf,U+5fe2-5fe3,U+5fe5-5fe6,U+5fe8-5fe9,U+5fec,U+5fef-5ff0,U+5ff2-5ff4,U+5ff6-5ff7,U+5ff9-5ffa,U+5ffc,U+6007-6009,U+600b-600c,U+6010-6011,U+6013,U+6017-6018,U+601a,U+601e-601f,U+6022-6024,U+602c-602e,U+6030-6034,U+6036-603a,U+603d-603e,U+6040,U+6044-604a,U+604c,U+604e-604f,U+6051,U+6053-6054,U+6056-6058,U+605b-605c,U+605e-6061,U+6065-6066,U+606e,U+6071-6072,U+6074-6075,U+6077,U+607e,U+6080-6082,U+6085-6088,U+608a-608b,U+608e-6091,U+6093,U+6095,U+6097-6099,U+609c,U+609e,U+60a1-60a2,U+60a4-60a5,U+60a7,U+60a9-60aa,U+60ae,U+60b0,U+60b3,U+60b5-60b7,U+60b9-60ba,U+60bd-60c4,U+60c7-60c9,U+60cc"}},{uri:u0e,descriptors:{unicodeRange:"U+635a-635d,U+6360,U+6364-6366,U+6368,U+636a-636c,U+636f-6370,U+6372-6375,U+6378-6379,U+637c-637f,U+6381,U+6383-6386,U+638b,U+638d,U+6391,U+6393-6395,U+6397,U+6399-639f,U+63a1,U+63a4,U+63a6,U+63ab,U+63af,U+63b1-63b2,U+63b5-63b6,U+63b9,U+63bb,U+63bd,U+63bf-63c3,U+63c5,U+63c7-63c8,U+63ca-63cc,U+63d1,U+63d3-63d5,U+63d7-63dd,U+63df,U+63e2,U+63e4-63e8,U+63eb-63ec,U+63ee-63f1,U+63f3,U+63f5,U+63f7,U+63f9-63fc,U+63fe,U+6403-6404,U+6406-640a,U+640d-640e,U+6411-6412,U+6415-641a,U+641d,U+641f,U+6422-6425,U+6427-6429,U+642b,U+642e-6433,U+6435-6439,U+643b-643c,U+643e,U+6440,U+6442-6443,U+6449,U+644b-6451,U+6453,U+6455-6457,U+6459-645d,U+645f-6466,U+6468,U+646a-646c,U+646e-6477,U+647b-6481,U+6483,U+6486,U+6488-648f"}},{uri:d0e,descriptors:{unicodeRange:"U+61c5-61c7,U+61c9,U+61cc-61d0,U+61d3,U+61d5-61e5,U+61e7-61f4,U+61f6-61fe,U+6200-6205,U+6207,U+6209,U+6213-6214,U+6219,U+621c-621e,U+6220,U+6223,U+6226-6229,U+622b,U+622d,U+622f-6232,U+6235-6236,U+6238-623c,U+6242,U+6244-6246,U+624a,U+624f-6250,U+6255-6257,U+6259-625a,U+625c-6262,U+6264-6265,U+6268,U+6271-6272,U+6274-6275,U+6277-6278,U+627a-627b,U+627d,U+6281-6283,U+6285-6288,U+628b-6290,U+6294,U+6299,U+629c-629e,U+62a3,U+62a6-62a7,U+62a9-62aa,U+62ad-62b0,U+62b2-62b4,U+62b6-62b8,U+62ba,U+62be,U+62c0-62c1,U+62c3,U+62cb,U+62cf,U+62d1,U+62d5,U+62dd-62de,U+62e0-62e1,U+62e4,U+62ea-62eb,U+62f0,U+62f2,U+62f5,U+62f8-62fb,U+6300,U+6303-6306,U+630a-630d,U+630f-6310,U+6312-6315,U+6317-6319,U+631c,U+6326-6327,U+6329,U+632c-632e,U+6330-6331,U+6333-6338,U+633b-633c,U+633e-6341,U+6344,U+6347-6348,U+634a,U+6351-6354,U+6356-6359"}},{uri:f0e,descriptors:{unicodeRange:"U+5dd0-5dda,U+5ddc,U+5ddf-5de0,U+5de3-5de4,U+5dea,U+5dec-5ded,U+5df0,U+5df5-5df6,U+5df8-5dfc,U+5dff-5e00,U+5e04,U+5e07,U+5e09-5e0b,U+5e0d-5e0e,U+5e12-5e13,U+5e17,U+5e1e-5e25,U+5e28-5e2c,U+5e2f-5e30,U+5e32-5e36,U+5e39-5e3a,U+5e3e-5e41,U+5e43,U+5e46-5e4b,U+5e4d-5e53,U+5e56-5e5a,U+5e5c-5e5d,U+5e5f-5e60,U+5e63-5e71,U+5e75,U+5e77,U+5e79,U+5e7e,U+5e81-5e83,U+5e85,U+5e88-5e89,U+5e8c-5e8e,U+5e92,U+5e98,U+5e9b,U+5e9d,U+5ea1-5ea4,U+5ea8-5eac,U+5eae-5eb2,U+5eb4,U+5eba-5ebd,U+5ebf-5ec8,U+5ecb-5ed0,U+5ed4-5ed5,U+5ed7-5eda,U+5edc-5ee7,U+5ee9,U+5eeb-5ef3,U+5ef5,U+5ef8-5ef9,U+5efb-5efd,U+5f05-5f07,U+5f09,U+5f0c-5f0e,U+5f10,U+5f12,U+5f14,U+5f16,U+5f19-5f1a,U+5f1c-5f1e,U+5f21-5f24,U+5f28,U+5f2b-5f2c,U+5f2e"}},{uri:h0e,descriptors:{unicodeRange:"U+60cd-60d0,U+60d2-60d4,U+60d6-60d7,U+60d9,U+60db,U+60de,U+60e1-60e5,U+60ea,U+60f1-60f2,U+60f5,U+60f7-60f8,U+60fb-60ff,U+6102-6105,U+6107,U+610a-610c,U+6110-6114,U+6116-6119,U+611b-611e,U+6121-6122,U+6125,U+6128-612a,U+612c-613e,U+6140-6147,U+6149,U+614b,U+614d,U+614f-6150,U+6152-6154,U+6156-615c,U+615e-6161,U+6163-6166,U+6169-616f,U+6171-6174,U+6176,U+6178-618a,U+618c-618d,U+618f-6193,U+6195-619c,U+619e-61a6,U+61aa-61ab,U+61ad-61b6,U+61b8-61bd,U+61bf-61c1,U+61c3-61c4"}},{uri:g0e,descriptors:{unicodeRange:"U+5cf4-5cfa,U+5cfc-5d01,U+5d04-5d05,U+5d08-5d0d,U+5d0f-5d13,U+5d15,U+5d17-5d1a,U+5d1c-5d1d,U+5d1f-5d23,U+5d25,U+5d28,U+5d2a-5d2c,U+5d2f-5d33,U+5d35-5d3c,U+5d3f-5d46,U+5d48-5d49,U+5d4d-5d57,U+5d59-5d5a,U+5d5c,U+5d5e-5d68,U+5d6a,U+5d6d-5d6e,U+5d70-5d73,U+5d75-5d81,U+5d83-5d98,U+5d9a-5d9c,U+5d9e-5db6,U+5db8-5dc4,U+5dc6-5dcc,U+5dce-5dcf"}},{uri:m0e,descriptors:{unicodeRange:"U+5b52,U+5b56,U+5b5e,U+5b60-5b61,U+5b67-5b68,U+5b6b,U+5b6d-5b6f,U+5b72,U+5b74,U+5b76-5b79,U+5b7b-5b7c,U+5b7e-5b7f,U+5b82,U+5b86,U+5b8a,U+5b8d-5b8e,U+5b90-5b92,U+5b94,U+5b96,U+5b9f,U+5ba7-5ba9,U+5bac-5baf,U+5bb1-5bb2,U+5bb7,U+5bba-5bbc,U+5bc0-5bc1,U+5bc3,U+5bc8-5bcb,U+5bcd-5bcf,U+5bd1,U+5bd4-5bdc,U+5be0,U+5be2-5be3,U+5be6-5be7,U+5be9-5bed,U+5bef,U+5bf1-5bf7,U+5bfd-5bfe,U+5c00,U+5c02-5c03,U+5c05,U+5c07-5c08,U+5c0b-5c0e,U+5c10,U+5c12-5c13,U+5c17,U+5c19,U+5c1b,U+5c1e-5c21,U+5c23,U+5c26,U+5c28-5c2b,U+5c2d-5c30,U+5c32-5c33,U+5c35-5c37,U+5c43-5c44,U+5c46-5c47,U+5c4c-5c4d,U+5c52-5c54,U+5c56-5c58,U+5c5a-5c5d,U+5c5f,U+5c62,U+5c64,U+5c67-5c6d,U+5c70,U+5c72-5c78,U+5c7b-5c7e,U+5c80,U+5c83-5c87,U+5c89-5c8b,U+5c8e-5c8f,U+5c92-5c93,U+5c95,U+5c9d-5ca1,U+5ca4-5ca8,U+5caa,U+5cae-5cb0,U+5cb2,U+5cb4,U+5cb6,U+5cb9-5cbc,U+5cbe,U+5cc0,U+5cc2-5cc3,U+5cc5-5cca,U+5ccc-5cd1,U+5cd3-5cd8,U+5cda-5ce0,U+5ce2-5ce3,U+5ce7,U+5ce9,U+5ceb-5cec,U+5cee-5cef,U+5cf1-5cf3"}},{uri:p0e,descriptors:{unicodeRange:"U+593b,U+593d-5940,U+5943,U+5945-5946,U+594a,U+594c-594d,U+5950,U+5952-5953,U+5959,U+595b-595f,U+5961,U+5963-5964,U+5966-5972,U+5975,U+5977,U+597a-597c,U+597e-5980,U+5985,U+5989,U+598b-598c,U+598e-5991,U+5994-5995,U+5998,U+599a-599d,U+599f-59a2,U+59a6-59a7,U+59ac-59ad,U+59b0-59b1,U+59b3-59b8,U+59ba,U+59bc-59bd,U+59bf-59c5,U+59c7-59c9,U+59cc-59cf,U+59d5-59d6,U+59d9,U+59db,U+59de-59e2,U+59e4,U+59e6-59e7,U+59e9-59eb,U+59ed-59f8,U+59fa,U+59fc-59fe,U+5a00,U+5a02,U+5a0a-5a0b,U+5a0d-5a10,U+5a12,U+5a14-5a17,U+5a19-5a1b,U+5a1d-5a1e,U+5a21-5a22,U+5a24,U+5a26-5a28,U+5a2a-5a30,U+5a33,U+5a35,U+5a37-5a3b,U+5a3d-5a3f,U+5a41-5a45,U+5a47-5a48,U+5a4b-5a54,U+5a56-5a59,U+5a5b-5a61,U+5a63-5a66,U+5a68-5a69,U+5a6b-5a73,U+5a78-5a79,U+5a7b-5a7e,U+5a80-5a90"}},{uri:U0e,descriptors:{unicodeRange:"U+5a91,U+5a93-5a99,U+5a9c-5aa9,U+5aab-5ab1,U+5ab4,U+5ab6-5ab7,U+5ab9-5abd,U+5abf-5ac0,U+5ac3-5ac8,U+5aca-5acb,U+5acd-5ad1,U+5ad3,U+5ad5,U+5ad7,U+5ad9-5adb,U+5add-5adf,U+5ae2,U+5ae4-5ae5,U+5ae7-5ae8,U+5aea,U+5aec-5af0,U+5af2-5b08,U+5b0a-5b15,U+5b18-5b31,U+5b33,U+5b35-5b36,U+5b38-5b3f,U+5b41-5b4f"}},{uri:b0e,descriptors:{unicodeRange:"U+5843,U+5845-584b,U+584e-5850,U+5852-5853,U+5855-5857,U+5859-585d,U+585f-5864,U+5866-586a,U+586d-587d,U+587f,U+5882,U+5884,U+5886-5888,U+588a-5891,U+5894-5898,U+589b-589d,U+58a0-58a7,U+58aa-58bb,U+58bd-58c0,U+58c2-58c4,U+58c6-58d0,U+58d2-58d4,U+58d6-58e3,U+58e5-58ea,U+58ed,U+58ef,U+58f1-58f2,U+58f4-58f5,U+58f7-58f8,U+58fa-5901,U+5903,U+5905-5906,U+5908-590c,U+590e,U+5910-5913,U+5917-5918,U+591b,U+591d-591e,U+5920-5923,U+5926,U+5928,U+592c,U+5930,U+5932-5933,U+5935-5936"}},{uri:y0e,descriptors:{unicodeRange:"U+56d0-56d3,U+56d5-56d6,U+56d8-56d9,U+56dc,U+56e3,U+56e5-56ea,U+56ec,U+56ee-56ef,U+56f2-56f3,U+56f6-56f8,U+56fb-56fc,U+5700-5702,U+5705,U+5707,U+570b-571b,U+571d-571e,U+5720-5722,U+5724-5727,U+572b,U+5731-5732,U+5734-5738,U+573c-573d,U+573f,U+5741,U+5743-5746,U+5748-5749,U+574b,U+5752-5756,U+5758-5759,U+5762-5763,U+5765,U+5767,U+576c,U+576e,U+5770-5772,U+5774-5775,U+5778-577a,U+577d-5781,U+5787-578a,U+578d-5791,U+5794-579a,U+579c-579f,U+57a5,U+57a8,U+57aa,U+57ac,U+57af-57b1,U+57b3,U+57b5-57b7,U+57b9-57c1,U+57c4-57ca,U+57cc-57cd,U+57d0-57d1,U+57d3,U+57d6-57d7,U+57db-57dc,U+57de,U+57e1-57e3,U+57e5-57ec,U+57ee,U+57f0-57f3,U+57f5-57f7,U+57fb-57fc,U+57fe-57ff,U+5801,U+5803-5805,U+5808-580a,U+580c,U+580e-5810,U+5812-5814,U+5816-5818,U+581a-581d,U+581f,U+5822-5823,U+5825-5829,U+582b-582f,U+5831-5834,U+5836-5842"}},{uri:E0e,descriptors:{unicodeRange:"U+55f9-55fc,U+55ff,U+5602-5607,U+560a-560b,U+560d,U+5610-5617,U+5619-561a,U+561c-561d,U+5620-5622,U+5625-5626,U+5628-562b,U+562e-5630,U+5633,U+5635,U+5637-5638,U+563a,U+563c-563e,U+5640-564b,U+564f-5653,U+5655-5656,U+565a-565b,U+565d-5661,U+5663,U+5665-5667,U+566d-5670,U+5672-5675,U+5677-567a,U+567d-5684,U+5687-568d,U+5690-5692,U+5694-56a2,U+56a4-56ae,U+56b0-56b6,U+56b8-56bb,U+56bd-56c9,U+56cb-56cf"}},{uri:v0e,descriptors:{unicodeRange:"U+5286-5287,U+5289-528f,U+5291-5292,U+5294-529a,U+529c,U+52a4-52a7,U+52ae-52b0,U+52b4-52bd,U+52c0-52c2,U+52c4-52c6,U+52c8,U+52ca,U+52cc-52cf,U+52d1,U+52d3-52d5,U+52d7,U+52d9-52de,U+52e0-52e3,U+52e5-52ef,U+52f1-52f8,U+52fb-52fd,U+5301-5304,U+5307,U+5309-530c,U+530e,U+5311-5314,U+5318,U+531b-531c,U+531e-531f,U+5322,U+5324-5325,U+5327-5329,U+532b-532d,U+532f-5338,U+533c-533d,U+5340,U+5342,U+5344,U+5346,U+534b-534d,U+5350,U+5354,U+5358-5359,U+535b,U+535d,U+5365,U+5368,U+536a,U+536c-536d,U+5372,U+5376,U+5379,U+537b-537e,U+5380-5381,U+5383,U+5387-5388,U+538a,U+538e-5394,U+5396-5397,U+5399,U+539b-539c,U+539e,U+53a0-53a1,U+53a4,U+53a7,U+53aa-53ad,U+53af-53b5,U+53b7-53ba,U+53bc-53be,U+53c0,U+53c3-53c7,U+53ce-53d0,U+53d2-53d3,U+53d5,U+53da,U+53dc-53de,U+53e1-53e2,U+53e7,U+53f4,U+53fa,U+53fe-5400,U+5402,U+5405,U+5407,U+540b,U+5414,U+5418-541a,U+541c,U+5422,U+5424-5425,U+542a,U+5430,U+5433,U+5436-5437,U+543a"}},{uri:_0e,descriptors:{unicodeRange:"U+5101-5105,U+5108-510a,U+510c-5111,U+5113-5120,U+5122-513e,U+5142,U+5147,U+514a,U+514c,U+514e-5150,U+5152-5153,U+5157-5159,U+515b,U+515d-5161,U+5163-5164,U+5166-5167,U+5169-516a,U+516f,U+5172,U+517a,U+517e-517f,U+5183-5184,U+5186-5187,U+518a-518b,U+518e-5191,U+5193-5194,U+5198,U+519a,U+519d-519f,U+51a1,U+51a3,U+51a6-51aa,U+51ad-51ae,U+51b4,U+51b8-51ba,U+51be-51bf,U+51c1-51c3,U+51c5,U+51c8,U+51ca,U+51cd-51ce,U+51d0,U+51d2-51da,U+51dc,U+51de-51df,U+51e2-51e3,U+51e5-51ea,U+51ec,U+51ee,U+51f1-51f2,U+51f4,U+51f7,U+51fe,U+5204-5205,U+5209,U+520b-520c,U+520f-5210,U+5213-5215,U+521c,U+521e-521f,U+5221-5223,U+5225-5227,U+522a,U+522c,U+522f,U+5231-5232,U+5234-5235,U+523c,U+523e,U+5244-5249,U+524b,U+524e-524f,U+5252-5253,U+5255,U+5257-525b,U+525d,U+525f-5260,U+5262-5264,U+5266,U+5268,U+526b-526e,U+5270-5271,U+5273-527c,U+527e,U+5280,U+5283-5285"}},{uri:w0e,descriptors:{unicodeRange:"U+543d,U+543f,U+5441-5442,U+5444-5445,U+5447,U+5449,U+544c-544f,U+5451,U+545a,U+545d-5461,U+5463,U+5465,U+5467,U+5469-5470,U+5474,U+5479-547a,U+547e-547f,U+5481,U+5483,U+5485,U+5487-548a,U+548d,U+5491,U+5493,U+5497-5498,U+549c,U+549e-54a2,U+54a5,U+54ae,U+54b0,U+54b2,U+54b5-54b7,U+54b9-54ba,U+54bc,U+54be,U+54c3,U+54c5,U+54ca-54cb,U+54d6,U+54d8,U+54db,U+54e0-54e4,U+54eb-54ec,U+54ef-54f1,U+54f4-54f9,U+54fb,U+54fe,U+5500,U+5502-5505,U+5508,U+550a-550e,U+5512-5513,U+5515-551a,U+551c-551f,U+5521,U+5525-5526,U+5528-5529,U+552b,U+552d,U+5532,U+5534-5536,U+5538-553b,U+553d,U+5540,U+5542,U+5545,U+5547-5548,U+554b-554f,U+5551-5554,U+5557-555b,U+555d-5560,U+5562-5563,U+5568-5569,U+556b,U+556f-5574,U+5579-557a,U+557d,U+557f,U+5585-5586,U+558c-558e,U+5590,U+5592-5593,U+5595-5597,U+559a-559b,U+559e,U+55a0-55a6,U+55a8-55b0,U+55b2,U+55b4,U+55b6,U+55b8,U+55ba,U+55bc,U+55bf-55c3,U+55c6-55c8,U+55ca-55cb,U+55ce-55d0,U+55d5,U+55d7-55db,U+55de,U+55e0,U+55e2,U+55e7,U+55e9,U+55ed-55ee,U+55f0-55f1,U+55f4,U+55f6,U+55f8"}},{uri:T0e,descriptors:{unicodeRange:"U+4fe0,U+4fe2,U+4fe4-4fe5,U+4fe7,U+4feb-4fec,U+4ff0,U+4ff2,U+4ff4-4ff7,U+4ff9,U+4ffb-4ffd,U+4fff-500b,U+500e,U+5010-5011,U+5013,U+5015-5017,U+501b,U+501d-501e,U+5020,U+5022-5024,U+5027,U+502b,U+502f-5039,U+503b,U+503d,U+503f-5042,U+5044-5046,U+5049-504b,U+504d,U+5050-5054,U+5056-5059,U+505b,U+505d-5064,U+5066-506b,U+506d-5075,U+5078-507a,U+507c-507d,U+5081-5084,U+5086-5087,U+5089-508c,U+508e-50a2,U+50a4,U+50a6,U+50aa-50ab,U+50ad-50b1,U+50b3-50b9,U+50bc-50ce,U+50d0-50d5,U+50d7-50d9,U+50db-50e5,U+50e8-50eb,U+50ef-50f2,U+50f4,U+50f6-50fa,U+50fc-5100"}},{uri:m1e,descriptors:{unicodeRange:"U+49d5-4a77"}},{uri:S0e,descriptors:{unicodeRange:"U+4dac-4dad,U+4daf-4db5,U+4e02,U+4e04-4e06,U+4e0f,U+4e12,U+4e17,U+4e1f-4e21,U+4e23,U+4e26,U+4e29,U+4e2e-4e2f,U+4e31,U+4e33,U+4e35,U+4e37,U+4e3c,U+4e40-4e42,U+4e44,U+4e46,U+4e4a,U+4e51,U+4e55,U+4e57,U+4e5a-4e5b,U+4e62-4e65,U+4e67-4e68,U+4e6a-4e6f,U+4e72,U+4e74-4e7d,U+4e7f-4e85,U+4e87,U+4e8a,U+4e90,U+4e96-4e97,U+4e99,U+4e9c-4e9e,U+4ea3,U+4eaa,U+4eaf-4eb1,U+4eb4,U+4eb6-4eb9,U+4ebc-4ebe,U+4ec8,U+4ecc,U+4ecf-4ed0,U+4ed2,U+4eda-4edc,U+4ee0,U+4ee2,U+4ee6-4ee7,U+4ee9,U+4eed-4eef,U+4ef1,U+4ef4,U+4ef8-4efa,U+4efc,U+4efe,U+4f00,U+4f02-4f08,U+4f0b-4f0c,U+4f12-4f16,U+4f1c-4f1d,U+4f21,U+4f23,U+4f28-4f29,U+4f2c-4f2e,U+4f31,U+4f33,U+4f35,U+4f37,U+4f39,U+4f3b,U+4f3e-4f42,U+4f44-4f45,U+4f47-4f4c,U+4f52,U+4f54,U+4f56,U+4f61-4f62,U+4f66,U+4f68,U+4f6a-4f6b,U+4f6d-4f6e,U+4f71-4f72,U+4f75,U+4f77-4f7a,U+4f7d,U+4f80-4f82,U+4f85-4f87,U+4f8a,U+4f8c,U+4f8e,U+4f90,U+4f92-4f93,U+4f95-4f96,U+4f98-4f9a,U+4f9c,U+4f9e-4f9f,U+4fa1-4fa2,U+4fa4,U+4fab,U+4fad,U+4fb0-4fb4,U+4fb6-4fbe,U+4fc0-4fc2,U+4fc6-4fc9,U+4fcb-4fcd,U+4fd2-4fd6,U+4fd9,U+4fdb"}},{uri:I0e,descriptors:{unicodeRange:"U+4933-49d4"}},{uri:x0e,descriptors:{unicodeRange:"U+487a-4932"}},{uri:C0e,descriptors:{unicodeRange:"U+47d2-4879,U+2ce7c,U+2ce88,U+2ce93"}},{uri:A0e,descriptors:{unicodeRange:"U+4756-47d1,U+2ca02,U+2ca0e,U+2ca7d,U+2caa9,U+2cb29,U+2cb2e,U+2cb31,U+2cb38-2cb39,U+2cb3f,U+2cb41,U+2cb4e,U+2cb5a,U+2cb64,U+2cb69,U+2cb6c,U+2cb6f,U+2cb76,U+2cb78,U+2cb7c,U+2cbb1,U+2cbbf-2cbc0,U+2cbce,U+2cc5f,U+2ccf5-2ccf6,U+2ccfd,U+2ccff,U+2cd02-2cd03,U+2cd0a,U+2cd8b,U+2cd8d,U+2cd8f-2cd90,U+2cd9f-2cda0,U+2cda8,U+2cdad-2cdae,U+2cdd5,U+2ce18,U+2ce1a,U+2ce23,U+2ce26,U+2ce2a"}},{uri:M0e,descriptors:{unicodeRange:"U+46c3-4755,U+2c488,U+2c494,U+2c497,U+2c542,U+2c613,U+2c618,U+2c621,U+2c629,U+2c62b-2c62d,U+2c62f,U+2c642,U+2c64a-2c64b,U+2c72c,U+2c72f,U+2c79f,U+2c7c1,U+2c7fd,U+2c8d9,U+2c8de,U+2c8e1,U+2c8f3,U+2c907,U+2c90a,U+2c91d"}},{uri:R0e,descriptors:{unicodeRange:"U+4629-46c2,U+2bdf7,U+2be29,U+2c029-2c02a,U+2c0a9,U+2c0ca,U+2c1d5,U+2c1d9,U+2c1f9,U+2c27c,U+2c288,U+2c2a4,U+2c317,U+2c35b,U+2c361,U+2c364"}},{uri:k0e,descriptors:{unicodeRange:"U+458e-4628,U+2b7a9,U+2b7c5,U+2b7e6,U+2b7f9,U+2b806,U+2b80a,U+2b81c,U+2b8b8,U+2bac7,U+2bb5f,U+2bb62,U+2bb7c,U+2bb83,U+2bc1b,U+2bd77,U+2bd87"}},{uri:L0e,descriptors:{unicodeRange:"U+4449-4511,U+2afa2,U+2b127-2b128,U+2b137-2b138,U+2b1ed"}},{uri:D0e,descriptors:{unicodeRange:"U+439b-4448,U+2a437,U+2a5f1,U+2a602,U+2a61a,U+2a6b2,U+2a7dd,U+2a8fb,U+2a917,U+2aa30,U+2aa36,U+2aa58"}},{uri:N0e,descriptors:{unicodeRange:"U+4275-430d,U+298c6,U+29a72,U+29d98,U+29ddb,U+29e15,U+29e3d,U+29e49"}},{uri:O0e,descriptors:{unicodeRange:"U+4132-41de,U+28bef,U+28c47,U+28c4f,U+28c51,U+28c54,U+28d10,U+28d71,U+28dfb,U+28e1f,U+28e36,U+28e89,U+28e99,U+28eeb,U+28f32,U+28ff8,U+292a0"}},{uri:P0e,descriptors:{unicodeRange:"U+41df-4274,U+292b1,U+29490,U+295cf,U+2967f,U+296f0,U+29719,U+29750"}},{uri:F0e,descriptors:{unicodeRange:"U+408e-4131,U+285c8-285c9,U+28678,U+28695,U+286d7,U+286fa,U+287e0,U+28946,U+28949,U+2896b,U+28987-28988,U+289ba-289bb,U+28a1e,U+28a29,U+28a43,U+28a71,U+28a99,U+28acd,U+28add,U+28ae4,U+28b49,U+28bc1"}},{uri:B0e,descriptors:{unicodeRange:"U+3e83-3f2f,U+27139,U+273da-273db,U+273fe,U+27410,U+27449,U+27614-27615,U+27631,U+27684,U+27693,U+2770e,U+27723,U+27752"}},{uri:z0e,descriptors:{unicodeRange:"U+3f30-3fdb,U+27985,U+27a84,U+27bb3,U+27bbe,U+27bc7,U+27cb8,U+27da0,U+27e10"}},{uri:H0e,descriptors:{unicodeRange:"U+3fdc-408d,U+27fb7,U+27ff9,U+2808a,U+280bb,U+2815d,U+28277,U+28282,U+282e2,U+282f3,U+283cd,U+28408,U+2840c,U+28455,U+28468,U+2856b"}},{uri:V0e,descriptors:{unicodeRange:"U+3dd2-3e82,U+26a58,U+26a8c,U+26ab7,U+26aff,U+26b5c,U+26c21,U+26c29,U+26c73,U+26cdd,U+26e40,U+26e65,U+26f94,U+26ff6-26ff8,U+270f4,U+2710d"}},{uri:$0e,descriptors:{unicodeRange:"U+3d34-3dd1,U+2648d,U+26676,U+2667e,U+266b0,U+2671d,U+2677c,U+267cc,U+268dd,U+268ea,U+26951,U+2696f,U+269dd,U+269fa,U+26a1e"}},{uri:G0e,descriptors:{unicodeRange:"U+3c76-3d33,U+25d0a,U+25da1,U+25e2e,U+25e56,U+25e62,U+25e65,U+25ec2,U+25ed7-25ed8,U+25ee8,U+25f23,U+25f5c,U+25fd4,U+25fe0,U+25ffb,U+2600c,U+26017,U+26060,U+260ed,U+26221,U+26270,U+26286,U+2634c,U+26402"}},{uri:X0e,descriptors:{unicodeRange:"U+3bda-3c75,U+25771,U+257a9,U+257b4,U+259c4,U+259d4,U+25ae3-25ae4,U+25af1,U+25bb2,U+25c14,U+25c4b,U+25c64"}},{uri:j0e,descriptors:{unicodeRange:"U+3b25-3bd9,U+2504a,U+25055,U+25122,U+2512b,U+251a9,U+251cd,U+251e5,U+2521e,U+2524c,U+2542e,U+2548e,U+254d9,U+2550e,U+25532,U+25562,U+255a7-255a8"}},{uri:Y0e,descriptors:{unicodeRange:"U+3a6b-3b24,U+24896,U+249db,U+24a4d,U+24a7d,U+24ac9,U+24b56,U+24b6f,U+24c16,U+24d14,U+24dea,U+24e0e,U+24e37,U+24e6a,U+24e8b,U+24eaa"}},{uri:W0e,descriptors:{unicodeRange:"U+39a9-3a6a,U+24096,U+24103,U+241ac,U+241c6,U+241fe,U+243bc,U+243f8,U+244d3,U+24629,U+246a5,U+247f1"}},{uri:K0e,descriptors:{unicodeRange:"U+38e3-39a8,U+23a98,U+23c7f,U+23c97-23c98,U+23cfe,U+23d00,U+23d0e,U+23d40,U+23dd3,U+23df9-23dfa,U+23e23,U+23f7e"}},{uri:Z0e,descriptors:{unicodeRange:"U+3760-382a,U+22ab8,U+22b43,U+22b46,U+22b4f-22b50,U+22ba6,U+22bca,U+22c1d,U+22c24,U+22c55,U+22d4c,U+22de1"}},{uri:q0e,descriptors:{unicodeRange:"U+382b-38e2,U+231b6,U+231c3-231c4,U+231f5,U+23350,U+23372,U+233d0,U+233d2-233d3,U+233d5,U+233da,U+233df,U+233e4,U+2344a-2344b,U+23451,U+23465,U+234e4,U+2355a,U+23594,U+235c4,U+235cb,U+23638-2363a,U+23647,U+2370c,U+2371c,U+2373f,U+23763-23764,U+237e7,U+237ff,U+23824,U+2383d"}},{uri:Q0e,descriptors:{unicodeRange:"U+3698-375f,U+22218,U+2231e,U+223ad,U+224dc,U+226f3,U+2285b,U+228ab,U+2298f"}},{uri:J0e,descriptors:{unicodeRange:"U+35e6-3697,U+21c56,U+21cde,U+21d2d,U+21d45,U+21d62,U+21d78,U+21d92,U+21d9c,U+21da1,U+21db7,U+21de0,U+21e33-21e34,U+21f1e,U+21f76,U+21ffa,U+2217b"}},{uri:eme,descriptors:{unicodeRange:"U+3444-350e,U+20ad3,U+20b1d,U+20b9f,U+20c41,U+20cbf,U+20cd0,U+20d45,U+20de1,U+20e64,U+20e6d,U+20e95,U+20e9d,U+20ea2,U+20f5f,U+210c1,U+21201,U+2123d,U+21255,U+21274,U+2127b"}},{uri:tme,descriptors:{unicodeRange:"U+350f-35e5,U+212d7,U+212e4,U+212fd,U+2131b,U+21336,U+21344,U+2139a,U+213c4,U+21413,U+2146d-2146e,U+215d7,U+21647,U+216b4,U+21706,U+21742,U+218bd,U+219c3"}},{uri:nme,descriptors:{unicodeRange:"U+336d-3443,U+2032b,U+20371,U+20381,U+203f9,U+2044a,U+20509,U+20547,U+205d6,U+20628,U+20676,U+2074f,U+20779,U+20807,U+2083a,U+20895,U+208b9,U+2097c,U+2099d"}},{uri:ime,descriptors:{unicodeRange:"U+328b-336c,U+2000b,U+20089,U+200a2,U+200a4,U+20164,U+201a2,U+20213"}},{uri:rme,descriptors:{unicodeRange:"U+3192-31ba,U+31c0-31e3,U+31f0-321e,U+3220-328a,U+1f250-1f251"}},{uri:sme,descriptors:{unicodeRange:"U+2f74-2fd5,U+3000,U+3003-3007,U+3012-3013,U+3018-301c,U+3020-3029,U+302f-303f,U+3041-3096,U+3099-30a1"}},{uri:ome,descriptors:{unicodeRange:"U+30a2-30ff,U+3105-312f,U+3131-318e,U+3190-3191"}},{uri:ame,descriptors:{unicodeRange:"U+4e36,U+4ea0,U+4f74,U+4f91,U+4f94,U+4fc5,U+507e,U+50ed,U+5182,U+51f5,U+525e,U+5282,U+52f9,U+5326,U+537a,U+53a3,U+5423,U+5459,U+54b4,U+54d9,U+55c9,U+57f4,U+580b,U+5902,U+5925,U+5a08,U+5ab5,U+5b84,U+5be4,U+5c22,U+5cb5,U+5cbd,U+5d3e,U+5e31,U+5e5e,U+5e80,U+5ee8,U+5f82,U+5fc9,U+5fed,U+600a,U+605d,U+609b,U+609d,U+60dd,U+6243,U+6322,U+63ce,U+640c,U+643f,U+6445,U+64d7,U+6534,U+6549,U+656b,U+6603,U+674c,U+680a,U+6864,U+69d4,U+6a65,U+6c2a,U+6c46,U+6c5c,U+6d0e,U+6d48,U+6e2b,U+6eb2,U+6eb7,U+6f89,U+706c,U+70b1,U+7113,U+71d4,U+727f,U+72f3,U+7303,U+7321,U+736c,U+736f,U+74a9,U+74de,U+750d,U+7513,U+7592,U+75c4,U+7605,U+760a,U+761b,U+7625,U+762d,U+7643,U+7707,U+7747,U+77b5,U+7839,U+784e,U+78a5,U+7924,U+793b,U+798a,U+7a03,U+7a06,U+7a78,U+7a80,U+7aad,U+7ba8,U+7be5,U+7cc8,U+7ec1,U+7f0b,U+7f0f,U+7f12,U+7f68,U+7f9d,U+8025,U+809c,U+80ad,U+80b7,U+80e8,U+811e,U+8204,U+8223,U+822d,U+823b,U+824b,U+825a,U+827d,U+827f,U+828f,U+82c8,U+8307,U+831b,U+8347,U+837d,U+839b,U+83a9,U+83f9,U+84b9,U+8579,U+864d,U+867f,U+86b0,U+86d1,U+86d8,U+86f2,U+8764,U+8770,U+8788,U+8797,U+87ac-87ad,U+87b5,U+881b,U+8844,U+88bc,U+88fc,U+8930,U+89cf,U+89d6,U+8ba0,U+8bd4,U+8c02,U+8c2b,U+8c85,U+8e23,U+8f81-8f82,U+8fd5,U+90b6,U+90db,U+914e,U+9164,U+91ad,U+943e,U+94b7-94b8,U+94eb,U+950d,U+9514,U+9516,U+9518,U+9529,U+9538,U+953f,U+954e,U+955f,U+95fc,U+9667,U+96b3,U+9792,U+97b2,U+98a1,U+9969,U+9987,U+9998,U+9a80,U+9a92,U+9a96,U+9adf,U+9cb4,U+9cbd,U+9cd0,U+9cd4,U+9e31,U+9e3a,U+9e71,U+9ee5,U+9eea,U+9ef9,U+9fa0"}},{uri:lme,descriptors:{unicodeRange:"U+4e0c,U+4e28,U+4e3f,U+4ec2,U+502e,U+50ba,U+5155,U+5181,U+522d,U+5281,U+5290,U+5369,U+53b6,U+54d5,U+54dc,U+54ff,U+552a,U+553c,U+5588,U+55b5,U+5686,U+570a,U+5776,U+5786,U+57a4,U+5820,U+5865,U+58bc,U+5b32,U+5b65,U+5c1c,U+5c66,U+5c6e,U+5c8d,U+5ddb,U+5f2a,U+5f50,U+5f61,U+6067,U+614a,U+615d,U+619d,U+61d4,U+620b,U+6224-6225,U+6343,U+63ad,U+63f2,U+640b,U+6420,U+6434,U+6496,U+64d0,U+6509,U+652e,U+67a8,U+6833,U+6844,U+684a,U+6920,U+6957,U+6971,U+6a8e,U+6a91,U+6aa0,U+6b43,U+6bea,U+6bf5,U+6c15,U+6cd0,U+6ee0,U+6f24,U+6f2d,U+70c0,U+721d,U+728b,U+72c3,U+72e8,U+730a,U+7338-7339,U+734d,U+746d,U+752f,U+754e,U+770d,U+7735,U+778d,U+77a2,U+77e7,U+7857,U+786d,U+78c9,U+78f2,U+791e,U+7953,U+7b58,U+7b9d,U+7bda,U+7cd7,U+7f32-7f33,U+8022,U+8028-8029,U+8035,U+804d,U+8080,U+80c2,U+80e9,U+80ec,U+80f2,U+810e,U+8221,U+8274,U+82b0,U+82e0,U+83b0,U+8487-8488,U+848e,U+84cd,U+84d0,U+8539,U+857a,U+85a8,U+85b7,U+867c,U+871e,U+8723,U+877e,U+878b,U+8793,U+8803,U+88d2,U+8966,U+89cc,U+89eb,U+8b26,U+8c8a,U+8c98,U+8d33,U+8d47,U+8d55,U+8dbc,U+8e40,U+8e94,U+8f77,U+8f79,U+9058,U+91a2,U+91b5,U+928e,U+9494,U+94b6,U+94de,U+94f4,U+94f9,U+950a,U+950e,U+951e,U+952b,U+953c,U+953e,U+9544,U+9561,U+9564,U+9569,U+95f6,U+9603,U+960d,U+963d,U+9674,U+9794,U+97ab,U+98a5,U+9a9f,U+9ab1,U+9ad1,U+9b0f,U+9b2f,U+9c92,U+9c95,U+9cba,U+9cbc,U+9cc6,U+9ccb,U+9cd8,U+9e32,U+9e38,U+9e5b,U+9e7e,U+9eb4,U+9efb-9efc,U+9f3d"}},{uri:cme,descriptors:{unicodeRange:"U+2e3b,U+2e80-2e99,U+2e9b-2ef3,U+2f00-2f73,U+ffffd"}},{uri:ume,descriptors:{unicodeRange:"U+4e69,U+4f1b,U+4f67,U+4f7e,U+4fdc,U+50e6,U+5196,U+5202,U+5233,U+523f,U+52a2,U+536e,U+5476,U+54ad,U+54cf,U+5537,U+561e,U+56dd,U+56df,U+5709,U+572c,U+57cf,U+57f8,U+580d,U+5881,U+589a,U+5941,U+59b2,U+5c25,U+5d24,U+5d74,U+5e42,U+5e8b,U+5eb3,U+5ed2,U+5fad,U+6003,U+603c,U+6083,U+6100,U+6126,U+6206,U+62ca,U+638e,U+63b4,U+6426,U+646d,U+6535,U+65c4,U+66db,U+6715,U+6769,U+6798,U+67c3,U+6861,U+698d,U+69ca,U+69ed,U+69f2,U+69ff,U+6a18,U+6b39,U+6bb3,U+6c0d,U+6cb2,U+6cd6,U+6cf7,U+6cfa,U+6d33,U+6e16,U+6e53-6e54,U+6ebb,U+6fb6,U+709d,U+72ad,U+72f7,U+72fb,U+7313,U+739f,U+74ba,U+754b,U+755b,U+758b,U+75ac,U+75d6,U+7617,U+7635,U+7640,U+76a4,U+76b2,U+775a,U+77bd,U+781f,U+79b3,U+7b2b,U+7b31,U+7b3e,U+7b6e,U+7b9c,U+7c0b,U+7c9e,U+7cc1,U+7ce8,U+7ea5,U+7f21,U+7f27,U+7f74,U+7fb0,U+8031,U+8071,U+80ea,U+8114,U+8160,U+81a6,U+81c1,U+829f,U+82a4,U+82fb,U+831a,U+8333,U+836c,U+83b6,U+83f8,U+8411,U+841c,U+8489,U+848c,U+85a4,U+8627,U+8629,U+866e,U+86b5,U+872e,U+8731,U+877b,U+877d,U+87ea,U+8813,U+8816,U+8864,U+88ce,U+88e5,U+897b,U+89cb,U+89f3,U+8bfc,U+8c35,U+8d46,U+8d4d,U+8dba,U+8e3a,U+8f75,U+8f7e,U+8fd3,U+9161,U+9179,U+917e,U+91a3,U+94ac,U+94d7,U+94e5,U+952a,U+952c,U+9545,U+9565,U+9568,U+956a,U+961d,U+96e0,U+972a,U+9730,U+989f,U+98e7,U+990d,U+9967,U+9993,U+9aa3,U+9ac0,U+9ae1,U+9aeb,U+9af9,U+9c86,U+9c8b,U+9ca0-9ca1,U+9ca3,U+9ce2,U+9e48,U+9e6a,U+9e87,U+9ee2,U+9ee9,U+9f17,U+9f19,U+9f2c,U+9f80"}},{uri:dme,descriptors:{unicodeRange:"U+4ef3,U+50d6,U+50ec,U+51ab,U+51b1,U+52d6,U+54a9,U+54da,U+55be,U+55cd,U+564d,U+572f,U+574c,U+576b,U+57d8,U+57fd,U+5844,U+59d2,U+5ae0,U+5b16,U+5b37,U+5b5b,U+5b80,U+5d1e,U+5d6b,U+5efe,U+5f11,U+5f56,U+5f58,U+5f73,U+5f8c,U+5fc4,U+5fe4,U+602b,U+6106,U+610d,U+63de,U+63f8,U+641b,U+64e4,U+6634,U+676a,U+67b5,U+681d,U+6883,U+69b1,U+69e0,U+6b37,U+6b9b,U+6d7c,U+6ed7,U+6f36,U+6f72,U+6f8c,U+7035,U+7039,U+7173,U+7178,U+7228,U+728f,U+72b4,U+72ef,U+72f4,U+7331,U+7481,U+74e0,U+7540,U+75c3,U+75e6,U+763c,U+764d,U+76cd,U+7704,U+7743,U+7780,U+7847,U+786a,U+78b9,U+7962,U+7a02,U+7aac,U+7ab3,U+7b0a,U+7b4c,U+7b7b,U+7bfc,U+7c0f,U+7c16,U+7c40,U+7ca2,U+7cc7,U+7cf8,U+7d77,U+7e3b,U+7ea1,U+7ea9,U+7ef2,U+7f02,U+7f07,U+7f0c,U+7f23,U+7f2f,U+7fbc,U+8016,U+8020,U+812c,U+8136,U+8182,U+822f,U+8233,U+825f,U+8268,U+8284,U+8288,U+8291,U+8308,U+8311,U+835b,U+836d,U+83dd,U+8406,U+840f,U+845c,U+84b4,U+84e3,U+850c,U+855e,U+863c,U+86ba,U+86c4,U+86de,U+86f1,U+873e,U+87bd,U+87db,U+880a,U+883c,U+887f,U+88f0,U+890a,U+892b,U+895e,U+89ef,U+8a48,U+8bdc,U+8c18,U+8c33,U+8c94,U+8db1,U+8dcf,U+8dd6,U+8de3,U+8e6f,U+8e90,U+8f7a,U+8fb6,U+902d,U+90be,U+91af,U+936a,U+948b,U+94d8,U+9513,U+953a,U+956c,U+963c,U+9654,U+966c,U+9688,U+97b4,U+996b,U+9a75,U+9a7a,U+9aba,U+9aed,U+9b08,U+9b43,U+9c8e,U+9c94,U+9c9a,U+9e2b,U+9e36,U+9e4b,U+9e4e,U+9e55,U+9e63,U+9e68-9e69,U+9ebd,U+9ec9,U+9f0d,U+9f37,U+9f51"}},{uri:fme,descriptors:{unicodeRange:"U+50a7,U+5240,U+5261,U+52ac,U+531a,U+5363,U+5432,U+5452,U+5456,U+5472,U+5478,U+553f,U+5575,U+5581,U+55cc,U+55fe,U+5601,U+572e,U+57d2,U+57ef,U+581e,U+5924,U+5981,U+5997,U+59a3,U+5aaa,U+5ab8,U+5b34,U+5d5d,U+5def,U+5e11,U+5e91,U+5ed1,U+5ef4,U+5f40,U+600d,U+6019,U+601b,U+605a,U+6092,U+60ab,U+6217,U+623d,U+6369,U+65d2,U+6661,U+670a,U+6753,U+67a7,U+6855,U+68f9,U+6939,U+696e,U+6980,U+6a7c,U+6aab,U+6b82,U+6bf3,U+6bf9,U+6c05,U+6c19-6c1a,U+6ca9,U+6cf6,U+6d1a,U+6dab,U+6f74,U+7085,U+7198,U+71b5,U+7256,U+725d,U+727e,U+72fa,U+7322,U+738e,U+73e5,U+750f,U+755a,U+7594,U+75b3,U+760c,U+7615,U+7630,U+763f,U+77ec,U+7817,U+78a1,U+78d9,U+7905,U+7b2a,U+7b2e,U+7b62,U+7b85,U+7bcc,U+7bea,U+7c26,U+7c74,U+7c9c-7c9d,U+7e47,U+7e9b,U+7e9f,U+7ee0,U+7ee8,U+7ef1,U+7f01,U+7f11,U+7f17,U+7f36,U+7f7e,U+7fee,U+802a,U+80cd,U+8112,U+8169,U+8234,U+8279,U+8298,U+82ca,U+82d8,U+82e1,U+83c0,U+83d4,U+83df,U+8401,U+8451,U+845a,U+8476,U+8478,U+84ba,U+84bd,U+84e0,U+851f,U+8548,U+8556,U+8585,U+868d,U+86e9,U+86f4,U+86f8,U+8765,U+8785,U+87ab,U+87ee,U+8832,U+8872,U+88b7,U+88e2-88e3,U+89da,U+8bce,U+8bd3,U+8bd6,U+8bf9,U+8c16,U+8c73,U+8d5c,U+8dde,U+8f6d,U+8f94,U+8fe8,U+9011,U+915e,U+9185,U+918c,U+94ab,U+94d1,U+94f3,U+9515,U+951d,U+9558,U+9567,U+96ce,U+96e9,U+9785,U+9878,U+987c,U+9883,U+98d1,U+9954,U+9963,U+9a93,U+9ac1,U+9acc,U+9b1f,U+9b49,U+9b4d,U+9b51,U+9ca7,U+9cae,U+9cce,U+9cd3,U+9e37,U+9e39,U+9e41,U+9e46,U+9f22,U+9f2f,U+9f39,U+9f85"}},{uri:hme,descriptors:{unicodeRange:"U+4e5c,U+4edf,U+4f25,U+4f32,U+4f5e,U+4f76,U+4faa,U+4fe6,U+5028,U+5048,U+5250,U+535f,U+538d,U+53c1,U+5412,U+5443,U+54d4,U+54dd,U+5541,U+5550,U+5577,U+55dd,U+55f3,U+560f,U+562c,U+5657-5658,U+5664,U+56af,U+575c,U+577c,U+57b2,U+57da,U+5800,U+5a62,U+5aeb,U+5c3b,U+5ca3,U+5d26,U+5d9d,U+5f01,U+5fb5,U+5fdd,U+5ff8,U+6029,U+6041,U+6079,U+60b1,U+6222,U+629f,U+6332,U+63bc,U+63e0,U+6485,U+65ab,U+65c3,U+65c6,U+668c,U+669d,U+66be,U+67fd,U+6800,U+68fc,U+690b,U+6924,U+6978,U+69a7,U+6a3e,U+6a50,U+6a5b,U+6a97,U+6b24,U+6b8d,U+6baa,U+6c10,U+6c54,U+6ceb,U+6d04,U+6d4d,U+6eb1,U+6ebd,U+7110,U+71b3,U+71f9,U+7230,U+728d,U+7292,U+72b8,U+72d2,U+7360,U+73a2,U+7511,U+75a0,U+75c8,U+779f,U+7826,U+7877,U+7a39,U+7aa8,U+7ae6,U+7b04,U+7b0f,U+7baa,U+7bac,U+7c1f,U+7ccd,U+7ecb,U+7ed4,U+7ed7,U+7efb,U+7f0d,U+7f5f,U+7faf,U+7fd5,U+7fe5,U+8027,U+80bc,U+80dd,U+80fc,U+8132,U+815a,U+8167,U+816d,U+81ca,U+8228,U+82a1,U+82a9,U+82ab,U+82cc,U+8351,U+8368,U+83b8,U+83d8,U+83ea,U+83f0,U+8497,U+84c1,U+858f,U+85ff,U+867b,U+86a8-86a9,U+870a,U+8722,U+876e,U+877c,U+87e5,U+8888,U+88df,U+8919,U+8bcc,U+8bdf,U+8be8,U+8bee,U+8c20,U+8c2f,U+8d36,U+8df8,U+8e05,U+8e2f,U+8f9a,U+9021,U+908b,U+90b4,U+90ba,U+90d0,U+90eb,U+90fe,U+91aa,U+933e,U+9486-9487,U+948d,U+9490,U+94ad,U+94bd,U+94d6,U+94d9,U+9507,U+9546,U+955e,U+956b,U+95e9,U+9604,U+960b,U+9612,U+9615,U+9617,U+96b9,U+989a-989b,U+989e,U+9a78,U+9a7d,U+9aa0,U+9aa2,U+9ac2,U+9b23,U+9b3b,U+9c82,U+9cca,U+9cd9,U+9e28,U+9e5a,U+9e5e,U+9e6c,U+9efe,U+9f0b"}},{uri:gme,descriptors:{unicodeRange:"U+4e47,U+4e8d,U+4f65,U+4f89,U+50ee,U+520e,U+5416,U+5454,U+54bb,U+54c2,U+54d3,U+54de,U+5591,U+55e5,U+560c,U+566b,U+5769,U+578c,U+5793,U+57e4,U+5889,U+593c,U+59ab,U+5ad4,U+5ad8,U+5af1,U+5b53,U+5ba5,U+5c59,U+5c63,U+5d5b,U+5e0f,U+5e14,U+5edb,U+5fbc,U+6004,U+60ad,U+610e,U+61b7,U+624c,U+634c,U+647a,U+64ba,U+65f0,U+6600,U+66f7,U+67e2,U+67f0,U+680c,U+686b,U+6874,U+691f,U+6989,U+6a17,U+6b81,U+6b84,U+6c06-6c07,U+6c3d,U+6d07,U+6d27,U+6d2b,U+6d91,U+6e6b,U+6e8f,U+6fde,U+70bb,U+723b,U+726e,U+72b0,U+72ce,U+72f2,U+7301,U+731e,U+737e,U+7477,U+748e,U+74ff,U+7633,U+7654,U+771a,U+7726,U+7765,U+7768,U+781c,U+7829,U+78d4,U+7913,U+7957,U+79d5,U+79eb,U+7a70,U+7a86,U+7b25,U+7b38,U+7b47,U+7b72,U+7ba6-7ba7,U+7dae,U+7ee1,U+7efe,U+7f26,U+7f31,U+7f35,U+801c,U+8043,U+809f,U+80ab,U+80d7,U+8118,U+8188,U+81cc,U+823e,U+8244,U+824f,U+82b4,U+82c1,U+82e4,U+82f4,U+8306,U+833a,U+835c,U+839c,U+83b3,U+83bc,U+846d,U+867a,U+868b,U+8734,U+87ca,U+886e,U+887e,U+88a2,U+88c9,U+8921,U+8bb5,U+8bf3,U+8c04,U+8c17,U+8c1d,U+8c25,U+8c36,U+8c55,U+8c78,U+8d3d,U+8d40,U+8d59,U+8d67,U+8d91,U+8dbf,U+8deb-8dec,U+8dfd,U+8e14,U+8e41,U+8f8e,U+900b,U+9044,U+9062,U+90cf,U+9123,U+9146,U+9162,U+9172,U+918d,U+9190,U+92c8,U+93ca,U+948c,U+94aa,U+94b2,U+94c8,U+94ca,U+94d5,U+94df,U+94e9-94ea,U+94f7,U+94fc-94fd,U+951b,U+954f,U+9554,U+9559,U+9566,U+9571-9572,U+95f1,U+9608,U+960f,U+97af,U+988f,U+98d5,U+992e,U+9955,U+9ab0,U+9b32,U+9c90,U+9c9e,U+9ca5,U+9ca9,U+9cad,U+9cb1,U+9cc3,U+9e47,U+9ee7,U+9f87"}},{uri:mme,descriptors:{unicodeRange:"U+4e93,U+4ec4,U+4ef5,U+4f27,U+4f7b,U+4fe3,U+5080,U+5121,U+51eb,U+5208,U+52f0,U+53f5,U+5453,U+5466,U+54a6,U+54bf,U+54d0,U+5533,U+5549,U+5556,U+556d,U+558f,U+55f2,U+55f5,U+5627,U+567b,U+56d4,U+571c,U+5739,U+57b4,U+5807,U+58c5,U+59a4,U+59af,U+59d8,U+5a09,U+5a0c,U+5a4a,U+5ad2,U+5b6c,U+5ca2,U+5cac,U+5d03,U+5d6c,U+5db7,U+5ebe,U+5f2d,U+5fea,U+6042,U+6120,U+6175,U+6221,U+623e,U+6339,U+638a,U+643d,U+64b8,U+64e2,U+66e9,U+67b3,U+67c1,U+67d2,U+6832,U+6877,U+68f0,U+6934,U+6966,U+6987,U+6998,U+69c1,U+69ce,U+6a3d,U+6a84,U+6aa9,U+6b87,U+6bd6,U+6c16,U+6c18,U+6cd4,U+6cee,U+6de0,U+6e0c,U+6ecf,U+6f4b,U+70b7,U+7168,U+72d9,U+7352,U+73b3,U+73d0,U+7441,U+74d2,U+75a5,U+75e7-75e8,U+7610,U+7619,U+765e,U+772d,U+7812,U+782c,U+784c,U+7850,U+7856,U+789b,U+78f4,U+7a51,U+7b15,U+7b1e,U+7b24,U+7b5a,U+7bb8,U+7bc1,U+7bd9,U+7ed0,U+7ee6,U+7efa,U+7f1b,U+7f1f,U+7f22,U+7f45,U+7f71,U+7fa7,U+7fbf,U+7ff3,U+8052,U+80b1,U+80db,U+80f4,U+81bb,U+81ec,U+8202,U+8210,U+8249,U+828a,U+828e,U+82e3,U+8315,U+8369,U+8378,U+83a8,U+83aa,U+83b4,U+83e1,U+84fc,U+8538,U+853b,U+859c,U+85ae,U+86b4,U+86c9,U+86cf,U+8725,U+879f,U+87b3,U+887d,U+88fe,U+8a8a,U+8ba7,U+8c07,U+8c14,U+8c30,U+8c47,U+8db5,U+8dd7,U+8e1f,U+8e69,U+8e70,U+8e85,U+8f78,U+8f87,U+8f8b,U+8f8f,U+90c4,U+9143,U+917d,U+948f,U+94cd,U+94d2,U+94ef,U+954a,U+9609-960a,U+96d2,U+9708,U+9765,U+97ea,U+9880,U+98a7,U+996c,U+9980,U+9991,U+9a88,U+9ab6,U+9afb,U+9b47,U+9c87,U+9c9b,U+9cb5,U+9cc7,U+9e2c,U+9e42,U+9e58,U+9ecd,U+9ecf,U+9f8a,U+9f8c"}},{uri:pme,descriptors:{unicodeRange:"U+4ebb,U+4edd,U+4fa9,U+502c,U+50a5,U+51c7,U+51fc,U+523d,U+5241,U+530f,U+5464,U+549d,U+54a3,U+5514,U+5527,U+555c,U+556e,U+5576,U+55b1,U+55b9,U+55eb,U+5624,U+564c,U+5671,U+5685,U+568f,U+56d7,U+56e1,U+57a1,U+57d9,U+5942,U+5a67,U+5c50,U+5c7a,U+5c98,U+5d06,U+5d27,U+5d6f,U+5df3,U+5dfd,U+5e19,U+5ea0,U+5eb9,U+5eea,U+5ffe,U+600f,U+606b,U+6215,U+622c,U+6266,U+62bb,U+62bf,U+6308,U+6387,U+63b8,U+63c4,U+63c6,U+63f6,U+6441,U+6555,U+659b,U+6677,U+66a7,U+6775,U+678b,U+679e,U+6840,U+6849,U+6860,U+68c2,U+6910,U+6a28,U+6a2f,U+6a79,U+6b92-6b93,U+6bc2,U+6bfd,U+6c29,U+6c32,U+6c86,U+6cc5,U+6d0c,U+6d60,U+6da0,U+6ddd,U+6e86,U+6ed3,U+6edf,U+6fb9,U+6fd1,U+6fef,U+7023,U+7080,U+70ca,U+712f,U+7145,U+7284,U+732c,U+73c8,U+73d9,U+740a,U+7457,U+7596,U+759d,U+75a3,U+75d8,U+75e3-75e4,U+75ff,U+7622,U+7688,U+76b4,U+76e5,U+7818,U+7887,U+789a,U+78b2,U+7b08,U+7b33,U+7c2a,U+7ccc,U+7ea8,U+7ec0,U+7fe6,U+8012,U+8084,U+8093,U+80e4,U+80ef,U+8297,U+82a8,U+82be,U+8331,U+8366,U+83c5,U+83fd,U+8473,U+84a1,U+84ca,U+84d1,U+857b,U+85c1,U+85d3,U+8605,U+8662,U+86aa,U+86b1,U+86d4,U+86ed,U+86f3,U+8709,U+8748,U+874c,U+8763,U+89c7,U+89de,U+89e5,U+8a3e,U+8ba6,U+8c00,U+8c21,U+8c49,U+8c7a,U+8d30,U+8df9,U+8e51,U+8e59,U+8f6b,U+8f73,U+8ff3,U+9016,U+9026,U+902f,U+9099,U+909b,U+90c7,U+914a,U+91ae,U+91ba,U+9495,U+94a3,U+94af,U+94ba,U+94bf,U+94cc,U+94e1,U+94f0,U+9531,U+955d,U+95f3,U+9697,U+96bc,U+975b,U+977c,U+98a2,U+998a,U+9994-9995,U+9a9b,U+9ab7,U+9ac5,U+9c91,U+9ccf,U+9cd5,U+9e29,U+9edc,U+9edf,U+9f83,U+9f88-9f89"}},{uri:Ume,descriptors:{unicodeRange:"U+4ee8,U+4f22,U+4f43,U+4f57,U+4f5d,U+4f6f,U+4ff8,U+502d,U+507b,U+5345,U+53df,U+53fb,U+544b,U+5482,U+54a7,U+54cc,U+550f,U+5544,U+5555,U+5594,U+55e8,U+55ec,U+55ef,U+564e,U+56f9,U+5704,U+576d,U+5785,U+57ad,U+5914,U+5958,U+599e,U+59aa,U+59be,U+5a06,U+5abe,U+5ae1,U+5b40,U+5bee,U+5cbf,U+5cc4,U+5ccb,U+5d47,U+603f,U+6078,U+607d,U+607f,U+608c,U+609a,U+60fa,U+61ff,U+621b,U+622e,U+626a,U+6371,U+63ae,U+63cd,U+63d6,U+6410,U+6414,U+6421,U+6448,U+64d8,U+6710,U+6748,U+6772,U+680e,U+6954,U+69ab,U+6c68,U+6c8f,U+6ca4,U+6d2e,U+6e4e,U+6e98,U+6fe0,U+7094,U+70e9,U+7116,U+7119,U+723f,U+73c9,U+74e4,U+753e,U+7548,U+75bd,U+75cd,U+7618,U+7634,U+76c5,U+76f1,U+7708,U+7719,U+777e,U+7791,U+77b3,U+7823,U+7827,U+7830,U+7889,U+7893,U+7949,U+795c,U+79e3,U+7a14,U+7a88,U+7a95,U+7aa0,U+7afd,U+7b90,U+7bd1,U+7bfe,U+7da6,U+7ec2,U+7eef,U+7f03-7f04,U+7f08,U+7f58,U+7f61,U+7f9f,U+8174,U+8200,U+828d,U+82c4,U+82d5,U+82dc,U+82f7,U+832d,U+835a,U+840b,U+8438,U+852b,U+869d,U+86ac,U+86d0,U+86f0,U+8782,U+87a8,U+87d1-87d2,U+87e0,U+8839,U+8913,U+891b,U+8934,U+8941,U+89ca,U+89ce,U+8a07,U+8ba3,U+8bc5,U+8bcb,U+8bdb,U+8c11,U+8c15,U+8c29,U+8c32,U+8dc4,U+8dce,U+8ddb,U+8dfa,U+8e09,U+8e1d,U+8e39,U+8e42,U+8e49,U+8e4b,U+8e8f,U+8f71-8f72,U+9004,U+9036,U+9097,U+90dc,U+90e2,U+90e6,U+90ef,U+9104,U+919a,U+91b4,U+938f,U+9497,U+950f,U+9557,U+9562-9563,U+9573,U+9606,U+9649,U+972d,U+973e,U+97a3,U+97eb,U+988c,U+9894,U+98a6,U+9974,U+9977,U+997d,U+9a90,U+9a9d,U+9aef,U+9ca2,U+9ccd,U+9cdf,U+9e20,U+9e4c,U+9e6b,U+9f3e"}},{uri:bme,descriptors:{unicodeRange:"U+4ede,U+4ee1,U+4eeb,U+4fda,U+4ffe,U+5025,U+506c,U+50f3,U+5106,U+520d,U+525c,U+52ad,U+530d,U+5310,U+539d,U+53a9,U+53fc,U+5421,U+5477,U+54e7,U+551b,U+5530,U+557e,U+5599,U+55c4,U+55d1,U+55d4,U+55df,U+55e4,U+55ea,U+5623,U+562d,U+5654,U+56eb,U+56f5,U+57a7,U+57d5,U+57dd,U+584d,U+5880,U+58ec,U+59dd,U+5a32,U+5a55,U+5a75,U+5b51,U+5b71,U+5b73,U+5cd2,U+5ce4,U+5e5b,U+5e96,U+5fd2,U+607b,U+61d1,U+634b,U+636d,U+63b3,U+63ff,U+64c0,U+661d,U+6657,U+66dc,U+67a5,U+6841,U+6867,U+6901,U+699b,U+6a47,U+6b46,U+6c21,U+6c24,U+6c35,U+6c4a,U+6c94,U+6ca3,U+6d39,U+6d63,U+6d6f,U+6d94,U+705e,U+71e7,U+726f,U+72cd,U+72de,U+72f0,U+7325,U+7350,U+7391,U+741a,U+757f,U+7583,U+75b1,U+75b4,U+75b8,U+75c2,U+75f1,U+766f,U+7699,U+7751,U+789c,U+7a17,U+7be6,U+7cb2,U+7ea3,U+7eb0,U+7ebe,U+7eeb,U+7f25,U+7f2c,U+7fb8,U+8026,U+8037,U+8153,U+8171,U+8191,U+8214,U+821b,U+8222,U+826e,U+82eb,U+830c,U+8314,U+8334,U+83d6,U+8418,U+843c,U+84ff,U+8564,U+8572,U+8616,U+866c,U+8693,U+86a3,U+86a7,U+86af,U+86b6,U+86c6,U+86ca,U+8708,U+870d,U+8759,U+8760,U+87af,U+87c6,U+8869,U+88c6,U+89d0,U+8b07,U+8baa-8bab,U+8bc2,U+8be4,U+8bf0,U+8c2a,U+8c62,U+8c89,U+8d49,U+8d6d,U+8d84,U+8d94,U+8db8,U+8dc6,U+8e2e,U+8e3d,U+8e47,U+8e7f,U+9005,U+9051,U+907d,U+9082,U+9088,U+90b0,U+90d3,U+9150,U+949c,U+94a4,U+94b9,U+94cb,U+94e0,U+9509,U+9512,U+951f,U+9534,U+9552-9553,U+965f,U+96b0,U+9791,U+9889,U+9990,U+9a9c,U+9aa7,U+9c88,U+9cb2-9cb3,U+9cb6-9cb7,U+9cc5,U+9cdc,U+9e22,U+9e2a,U+9e57,U+9e67,U+9e73,U+9e82,U+9eb8,U+9ee0,U+9f9b"}},{uri:yme,descriptors:{unicodeRange:"U+4eb5,U+4f09,U+4f5a,U+4f8f,U+4fce,U+4fdf,U+4fea,U+4ff3,U+500c,U+500f,U+504e,U+5088,U+52be,U+5420,U+5457,U+5499,U+549b,U+54c6,U+54d2,U+558b,U+559f,U+55bd,U+55d6,U+565c,U+567c,U+568e,U+5768,U+577b,U+57a9,U+57ed,U+59f9,U+5a11,U+5a40,U+5ae6,U+5b6a,U+5b93,U+5bb8,U+5c15,U+5c99,U+5c9c,U+5cc1,U+5d2e,U+5d4b,U+5d99,U+5e54,U+5e61,U+5fcf-5fd1,U+6002,U+6006,U+6014,U+60af,U+60c6,U+60da,U+60f4,U+621f,U+62c8,U+631b,U+631e,U+63e9,U+64b5,U+655d,U+6619,U+6635,U+6641,U+67ad,U+67b0,U+67b7,U+67e9,U+684e,U+688f,U+695d,U+696b,U+69b7,U+6a58,U+6c26,U+6d35,U+6d43,U+6d9e,U+6dd9,U+6dec,U+6e11,U+6e6e,U+6e9f,U+6ec2,U+6ee2,U+6ef9,U+6f09,U+6f66,U+6f8d,U+6fc2,U+6fc9,U+729f,U+72c8,U+73de,U+7430,U+7566,U+7579,U+75c9,U+75e2,U+75fc,U+762a,U+7638,U+7678,U+76c2,U+76f9,U+778c,U+77cd,U+77dc,U+7800,U+781d,U+782d,U+783b-783c,U+78a3,U+78ec,U+7980,U+7a23,U+7b95,U+7bdd,U+7c0c,U+7c41,U+7c91,U+7cb3,U+7cc5,U+7ecc,U+7f19,U+7fca,U+8006,U+8069,U+807f,U+80bd,U+80ed,U+814b,U+8198,U+82cb,U+82d2,U+834f,U+8360,U+847a,U+84d6,U+84e5,U+8537,U+85d0,U+8671,U+86a4,U+86ce,U+86f9,U+8703,U+8707,U+8737,U+873b,U+8815,U+8936,U+8bc3,U+8bcf,U+8bd2,U+8bd8,U+8be9,U+8c0c,U+8c0f,U+8c4c,U+8d45,U+8d5d,U+8d73,U+8e31,U+8e6d,U+8e76,U+8fe4,U+9041,U+90d7,U+9169,U+92ae,U+94a1,U+94c4,U+94c9,U+94db,U+94e7,U+9503,U+9506,U+9517,U+9528,U+9537,U+9542,U+9549,U+95fe,U+9616,U+961a,U+96c9,U+96f3,U+9701,U+970e,U+9739,U+9753,U+9798,U+98d2-98d3,U+98d9-98da,U+9968,U+996f,U+9984,U+9997,U+9acb,U+9b03,U+9c85,U+9ca8,U+9cab,U+9e49,U+9e51,U+9e66,U+9f10"}},{uri:Eme,descriptors:{unicodeRange:"U+4e15,U+4e1e,U+4e2b,U+4eb3,U+4ec9,U+4f0e,U+4f64,U+501c,U+50a9,U+510b,U+51a2,U+51bc,U+527d,U+52d0,U+53fd,U+5429,U+542e,U+5486,U+54af,U+5506,U+5511,U+5522,U+552c,U+556c,U+55b3,U+55d2,U+55e6,U+55fd,U+561f,U+5639,U+5659,U+5662,U+5693,U+572a,U+5892,U+598a,U+5992,U+59a9,U+5a20,U+5ae3,U+5b17,U+5b7d,U+5d34,U+5d3d,U+5d4a,U+5d82,U+5e1a-5e1b,U+5ea5,U+5f0b,U+5f77,U+5fd6,U+5fff,U+6026,U+6035,U+6063,U+60b4,U+60bb,U+60ee,U+612b,U+6194,U+61ca,U+61e6,U+61f5,U+620a,U+6248,U+62a1,U+62d7,U+6376,U+637b,U+652b,U+65bc,U+65cc,U+65ce,U+65d6,U+664c,U+665f,U+6666,U+6684,U+66b9,U+6773,U+6777,U+6787,U+67de,U+6845,U+693d,U+6994,U+6a35,U+6d54,U+6d5c,U+6d8e,U+6dd6,U+6eb4,U+6f2a,U+6f78,U+704f,U+70ec,U+7118,U+714a,U+7172,U+71b9,U+724d,U+728a,U+7337,U+733e,U+7396,U+73b7,U+73cf,U+7428,U+742c,U+742e,U+74ee,U+74f4,U+7525,U+753a,U+7572,U+75d4,U+765c,U+768e,U+7762,U+777d,U+77fd,U+7825,U+7837,U+78b4,U+795f,U+79ed,U+7a1e,U+7b06,U+7b20,U+7ba9,U+7bab,U+7c7c,U+7cbd,U+7cdc,U+7ec9,U+7ef6,U+7f30,U+7f42,U+7f44,U+7f54,U+7f94,U+8004,U+800b,U+8019,U+809b,U+80ae,U+80c4,U+80f1,U+8146,U+816e,U+817c,U+81c0,U+81fc,U+81fe,U+822b,U+830f,U+832f,U+8340,U+8365,U+8385,U+8392,U+83a0,U+8424,U+84af,U+869c,U+8713,U+8717-8718,U+87c0,U+87cb,U+87fe,U+8821,U+8902,U+89d1,U+8bb9,U+8c12,U+8d32,U+8d53,U+8df7,U+8e7c,U+8f7c,U+8f95,U+8fab,U+9052,U+905b,U+9095,U+909d,U+90c5,U+911e,U+9122,U+916a,U+919b,U+948e,U+9492,U+949a,U+94b5,U+94bc,U+94c6,U+94f1,U+9502,U+9511,U+9536,U+956f-9570,U+9602,U+9621,U+9631,U+998b,U+99a5,U+9a81,U+9a9e,U+9ebe,U+9f8b"}},{uri:vme,descriptors:{unicodeRange:"U+4f2b,U+4f3d,U+4fac,U+5043,U+5055,U+5140,U+5156,U+51cb,U+5243,U+531d,U+536f,U+53a5,U+53ae,U+53f1,U+541d,U+5431,U+547b,U+5492,U+5494,U+54a4,U+54aa,U+54ce,U+54fd,U+5509,U+5520,U+553e,U+557b,U+55c5,U+55e1,U+55f7,U+5608,U+5636,U+563b,U+5773,U+57a0,U+5811,U+587e,U+58d5,U+59e3,U+5a29,U+5a6a,U+5a76,U+5a7a,U+5ac9,U+5b62,U+5b95,U+5c49,U+5c8c,U+5cab,U+5cb7,U+5d02,U+5d58,U+5e44,U+5e7a,U+5eff,U+5f29,U+5f89,U+5f9c,U+5fa8,U+6005,U+6043,U+60b8,U+60d8,U+60ec,U+60f0,U+6115,U+618e,U+630e,U+637a,U+6390,U+63ac,U+63b0,U+64de,U+6525,U+6538,U+65ee-65ef,U+6631,U+6636,U+6654,U+677c,U+67b8,U+67d8,U+683e,U+6886,U+68b5,U+692d,U+6963,U+6979,U+6988,U+6b59,U+6b9a,U+6c69,U+6c74,U+6cae,U+6ce0,U+6cef,U+6d95,U+6dc5,U+6dde,U+6de6,U+6dfc,U+6ea7,U+6f15,U+6f29,U+7096,U+70c3,U+7131,U+715c,U+7166,U+7266,U+7317,U+731d,U+7329,U+73e9,U+7425,U+7455,U+7490,U+74ef,U+7519,U+75b5,U+75b9,U+75de,U+7656,U+7663,U+7691,U+7729,U+77fe,U+783e,U+787c,U+795a,U+7a79,U+7abf,U+7b3a,U+7b4f,U+7b60,U+7b75,U+7b8d,U+7bb4,U+7bd3,U+7be1,U+7cbc,U+7edb,U+7f1c,U+7f8c,U+7fb2,U+7fb9,U+7fce,U+7ff1,U+810d,U+81c6,U+82a5,U+82aa,U+82de,U+8317,U+8343,U+835e,U+8364,U+836a,U+853a,U+8543,U+854a,U+8559,U+8568,U+85b0,U+85b9,U+864f,U+86e4,U+8715,U+8845,U+8884,U+88e8,U+88f1,U+8983,U+8be1,U+8c1f,U+8c27,U+8c5a,U+8c82,U+8d58,U+8dbe,U+8f98,U+9035,U+9074,U+90a1,U+9149,U+9157,U+93d6,U+949d,U+94c2,U+94e3-94e4,U+95eb,U+95f0,U+9611,U+9619,U+9642,U+968d,U+9706,U+970f,U+97ed,U+988a,U+9893,U+98e8,U+9a77,U+9a87,U+9aa1,U+9abc,U+9cdd,U+9e2f,U+9e33,U+9e44,U+9e5c,U+9e9d,U+9edd"}},{uri:_me,descriptors:{unicodeRange:"U+4f58,U+4f6c,U+4f70,U+4fd0,U+5014,U+51bd,U+524c,U+5315,U+5323,U+535e,U+540f,U+542d,U+545b,U+548e,U+549a,U+54ab,U+54fc,U+5567,U+556a,U+5600,U+5618,U+563f,U+5669,U+56f1,U+56ff,U+573b,U+574d,U+579b,U+57b8,U+57c2,U+586c,U+58f9,U+595a,U+598d,U+5993,U+5996,U+59d7,U+5b7a,U+5ba6,U+5c4e,U+5c96,U+5ce5,U+5eb6,U+5f08,U+5f99,U+602f,U+6059,U+606c,U+607a,U+60ed,U+61a9,U+620c,U+6249,U+62a8,U+62c4,U+62ed,U+62fd,U+6342,U+6345,U+6396,U+63a3,U+6402,U+6413,U+642a,U+6487,U+64a9,U+64ac,U+64ae,U+64b7,U+659f,U+65a1,U+667e,U+66f3,U+67e0,U+69db,U+69df,U+6aac,U+6b86,U+6c50,U+6c5e,U+6c76,U+6c85,U+6c8c,U+6cde,U+6d19,U+6d52,U+6da7,U+6db8,U+6e1a,U+6e25,U+6e4d,U+6e5f,U+6ec1,U+6f31,U+6f7a,U+6fa7,U+6fe1,U+701b,U+70ab,U+70f7,U+717d,U+71a8,U+7252,U+72c4,U+72e1,U+7315,U+736d,U+73ae,U+73c0,U+73c2,U+740f,U+75a4,U+7600-7601,U+768b,U+76bf,U+76d4,U+7728,U+772f,U+776c,U+77a0,U+77b0,U+77f8,U+783a,U+78d0,U+78fa,U+7977,U+7a37,U+7a92,U+7afa,U+7b71,U+7b94,U+7cef,U+7f28,U+7fe1,U+808b,U+80e5,U+80eb,U+8110,U+8113,U+812f,U+814c,U+81c3,U+8235,U+82d4,U+8309,U+83c1,U+8431,U+8469,U+84bf,U+84d3,U+84df,U+84e6,U+8511,U+8638,U+86c0,U+86db,U+86fe,U+8757,U+8822,U+8882,U+8885,U+8892,U+88f3,U+892a,U+8ba5,U+8bd9,U+8be0,U+8be7,U+8bfd,U+8c1a,U+8d4a,U+8d4e,U+8d66,U+8dda,U+8e0c,U+8e52,U+8e74,U+8e87,U+8f76,U+8fc2,U+8fe6,U+900d,U+9068,U+90ac,U+90b3,U+90b8,U+90e7,U+9119,U+9131,U+915a,U+916e,U+94b4,U+94d0,U+94e2,U+94ec,U+94ff,U+9522,U+9535,U+9556,U+965b,U+96f9,U+9774,U+9981,U+998d,U+998f,U+9a6e,U+9a7f,U+9a8a,U+9b13,U+9c9f,U+9e3e,U+9e43,U+9e6d,U+9e8b,U+9e92,U+9edb,U+9eef"}},{uri:wme,descriptors:{unicodeRange:"U+4e10,U+4e56,U+4e98,U+4ec3,U+4f3a,U+4f5f,U+4f88,U+4f97,U+4fa5,U+4fe8,U+504c,U+5197,U+52fa,U+5364,U+53e8,U+5406,U+543c,U+545c,U+5471,U+5480,U+5495,U+54b3,U+54df,U+54e6,U+54ee,U+557c,U+5583,U+55dc,U+55e3,U+566c,U+592f,U+5944,U+5983,U+59ca,U+59e5,U+5a13,U+5a7f,U+5b09,U+5bd0,U+5e4c,U+5eb5,U+5f1b,U+5f3c,U+608d,U+60cb,U+61a7,U+61ac,U+61cb,U+6233,U+62a0,U+62e7,U+62ee,U+62f4,U+62f7,U+634e,U+6382,U+63c9,U+63ea,U+6400,U+645e,U+6482,U+6556,U+6593,U+6615,U+664f,U+66e6,U+672d,U+675e,U+67da,U+6805,U+6808,U+6868,U+68a2,U+695e,U+69ad,U+6a80,U+6a90,U+6b83,U+6be1,U+6c30,U+6cad,U+6cb1,U+6cf1,U+6d31,U+6d93,U+6dae,U+6dbf,U+6dc6-6dc7,U+6e0d,U+6e32,U+6e3a,U+6e85,U+6eba,U+6f3e,U+6f5e,U+6f7c,U+6fee,U+71ee,U+722a,U+72b7,U+72e9,U+73ba,U+73d1,U+7409,U+7435-7436,U+7459-745a,U+747e,U+7487,U+74e2,U+7504,U+752c-752d,U+7599,U+759f,U+75a1,U+75ca,U+75f0,U+761f,U+7629,U+777f,U+7785,U+77a5,U+77bf,U+78d5,U+7934,U+7940,U+79a7,U+7b19,U+7c38,U+7c95,U+7cb1,U+7ce0,U+7eca,U+7ef7,U+7f2b,U+7f81,U+7fcc,U+8046,U+8148,U+8165,U+819b,U+81ba,U+828b,U+82ae,U+82b7,U+82d3,U+8301,U+830e,U+831c,U+8338,U+837c,U+8393,U+8398,U+83ba,U+83e0,U+83e9,U+853c,U+8654,U+86df,U+8712,U+873f,U+874e,U+8783,U+8859,U+88a4,U+8925,U+8bb7,U+8bff,U+8c19,U+8c1b,U+8c24,U+8c2c,U+8d61,U+8db4,U+8e6c,U+8f8a,U+8fe5,U+8ff8,U+901e,U+90f4,U+912f,U+9163,U+9170,U+91dc,U+949b,U+94a8,U+94b3,U+94c0,U+94e8,U+9525,U+9530,U+9539,U+954c-954d,U+9550,U+955b,U+962a,U+9685,U+96cc,U+9776,U+988d,U+9975,U+9985,U+9a6f,U+9aa5,U+9ab8,U+9c7f,U+9ca4,U+9cb8,U+9e25,U+9e35,U+9e4a"}},{uri:Tme,descriptors:{unicodeRange:"U+4ea2,U+4ea5,U+4f36,U+4f84,U+4f8d,U+501a,U+5029,U+516e,U+51a5,U+51c4,U+51f8,U+5201,U+527f,U+5321,U+5352,U+5366,U+53e9,U+54c7,U+5632,U+5676,U+56b7,U+56bc,U+56da,U+56e4,U+5703,U+5729,U+5742,U+57a2-57a3,U+5815,U+58d1,U+5919,U+592d,U+5955,U+5a05,U+5a25,U+5a34,U+5b70,U+5b75,U+5bdd,U+5bf0,U+5c41,U+5c79,U+5c91,U+5c94,U+5ce6,U+5ced,U+5d69,U+5dc5,U+5e16,U+5e27,U+5f27,U+5f95,U+5ffb,U+6020,U+604d,U+6055,U+60e6,U+60eb,U+6123,U+618b,U+61a8,U+620d,U+62c7,U+62ce,U+62d9,U+631f,U+634d,U+6452,U+6479,U+64ce,U+64d2,U+655b,U+660a,U+6726,U+67c4,U+6809,U+6853,U+68e3,U+68f1,U+68fa,U+693f,U+6942,U+6995,U+69a8,U+69b4,U+6a71,U+6b89,U+6bcb,U+6bd3,U+6bd9,U+6c40,U+6cf8,U+6cfe,U+6d85,U+6da3,U+6daa,U+6e0e,U+6e43-6e44,U+6f88,U+7078,U+7099,U+70bd,U+70d9,U+70fd,U+7109,U+7184,U+7239,U+733f,U+73f2,U+748b,U+749c,U+749e,U+759a,U+75d2,U+75eb,U+7620,U+766b,U+7693,U+76cf,U+7738,U+773a,U+776b,U+778e,U+77aa,U+7852,U+78be,U+7948,U+795b,U+7960,U+796f,U+79ba,U+7a20,U+7a96,U+7aa5,U+7b03,U+7b28,U+7b50,U+7b77,U+7bc6,U+7bf1,U+7c27,U+7d0a,U+7ead,U+7ec5,U+7ee2,U+7ef0,U+7efd,U+7f0e,U+7f2e,U+7f79,U+7f9a,U+8098,U+80da,U+80e7,U+80f0,U+80f3,U+80fa,U+818a,U+81e7,U+8237-8238,U+8299,U+82b8,U+82ce,U+837b,U+83bd,U+83cf,U+8426,U+8475,U+85c9,U+85d5,U+85dc,U+85e9,U+871a,U+8747,U+8749,U+888d,U+8910,U+891a,U+8bb4,U+8be3,U+8bec,U+8bf2,U+8c06,U+8c0d,U+8d31,U+8d48,U+8de4,U+8e1e,U+8e4a,U+8e66,U+8f84,U+8f97,U+9083,U+90e1,U+9165,U+91c9,U+94b0,U+94f5,U+9504,U+9532,U+956d,U+95f5,U+95fa,U+9668,U+9698,U+96bd,U+9704,U+9773,U+9890,U+996a,U+997a,U+9a74,U+9a8b,U+9cc4,U+9ccc"}},{uri:Sme,descriptors:{unicodeRange:"U+4ea8,U+4f1e,U+4f51,U+4f63,U+4f7c,U+4f83,U+4fa0,U+4fd1,U+4ffa,U+5018,U+5026,U+508d,U+50bb,U+50f5,U+50fb,U+5162,U+5319,U+5320,U+538c,U+5413,U+541f,U+5475,U+54bd,U+54d1,U+5589,U+5598,U+575f,U+57ae,U+57e0,U+5937,U+5974,U+5978,U+59ae,U+5a1f,U+5a49,U+5ab3,U+5b99,U+5b9b,U+5ba0,U+5be1,U+5be5,U+5c09,U+5c27,U+5de2,U+5e9a,U+5f26,U+5f8a,U+5f98,U+6021,U+606d,U+60bc,U+60d5,U+60e7,U+611a,U+614c,U+6254,U+626f,U+6292,U+6296,U+62b9,U+62e2,U+631a,U+631d,U+6320,U+6346,U+63ba,U+6467,U+64bc,U+658b,U+663c,U+6643,U+6652,U+6656,U+6687,U+66d9,U+66dd,U+66f0,U+673d,U+67ab,U+6816-6817,U+68a7,U+68ad,U+68cd,U+68e0,U+6986,U+69fd,U+6b47,U+6bd7,U+6c1f,U+6c2e-6c2f,U+6cbe,U+6de4,U+6e1d,U+6e83,U+6e9c,U+6ed4-6ed5,U+6f4d,U+70f9,U+7130,U+716e,U+718f,U+71ac,U+71e5,U+72fc,U+731c,U+7334,U+73ca,U+7422,U+7426,U+745f,U+7470,U+75af,U+75f4,U+762b,U+763e,U+7696,U+7737,U+7741,U+77a7,U+77bb,U+77ee,U+785d,U+788c,U+78ca,U+7901,U+796d,U+7985,U+79fd,U+7a3c,U+7a57,U+7a74,U+7b5b,U+7caa,U+7cb9,U+7cd5,U+7eac,U+7eb6,U+7ed1,U+7ee5,U+7f20,U+7f2a,U+7f38,U+7f69,U+7fa1,U+8018,U+8038,U+803f,U+804b,U+80a2,U+80be,U+80d6,U+817a,U+81fb,U+820c,U+82ad,U+82af,U+82bd,U+8327,U+8354,U+835f,U+8367,U+836b,U+840c,U+841d,U+8471,U+849c,U+84b2,U+84c9,U+8517,U+851a,U+8549,U+8681,U+8721,U+8776,U+88d9,U+88f9,U+89c5,U+8c1c,U+8c34,U+8d81,U+8d9f,U+8e0a,U+8e72,U+8eb2,U+8fed,U+901b,U+902e,U+906e,U+9091,U+90aa,U+90af,U+915d,U+9171,U+946b,U+9489,U+9499,U+94a5,U+9508,U+9524,U+952d,U+9551,U+9576,U+95f7,U+9600,U+96b6,U+96c0,U+9756,U+97f6,U+98a0,U+98a4,U+997f,U+9a73,U+9a86,U+9ad3,U+9e3d,U+9ed4"}},{uri:Age,descriptors:{unicodeRange:"U+4e4d,U+4e5e,U+4ec7,U+4ed5,U+50da,U+50e7,U+515c,U+51a4,U+51ff,U+5203,U+5254,U+5300,U+533e,U+5375,U+53ee,U+5435,U+543b,U+5455,U+548b,U+548f,U+54d7,U+54fa,U+5578,U+5587,U+55a7,U+560e,U+5760,U+576f,U+5777,U+5830,U+58a9,U+5962,U+59e8,U+5a07,U+5a23,U+5a3c,U+5b5a,U+5bb5,U+5bc5,U+5bde,U+5c7f,U+5cb1,U+5ce8,U+5cea,U+5d29,U+5d4c,U+5e18,U+5f57,U+5f5d,U+5f87,U+5ff1,U+6016,U+601c,U+6064,U+6177,U+61d2,U+625b,U+62e3,U+62f1,U+634f,U+63a0,U+6401,U+6405,U+6495,U+64c2,U+6512,U+6577,U+6590,U+65a7,U+65a9,U+65f7,U+6627,U+6655,U+6714,U+6795,U+67d1,U+67ff,U+68b3,U+68d5,U+68d8,U+6930,U+6960,U+6977,U+69bb,U+69d0,U+6a31,U+6b7c,U+6bb4,U+6c22,U+6c72,U+6c79,U+6c7e,U+6c81,U+6c93,U+6ca5,U+6cbc,U+6ce3,U+6cfb,U+6d3c,U+6da9,U+6df3,U+6e2d,U+6eaf,U+6ec7,U+6f13,U+6f33,U+6f62,U+6fa1,U+7011,U+707c,U+708a,U+70c1,U+70d8,U+70eb,U+711a,U+7194,U+7281,U+7316,U+7357,U+7384,U+7405,U+742a,U+745b,U+7574,U+7578,U+75ea,U+7682,U+7792,U+77d7,U+77e9,U+77eb,U+77f6,U+780c,U+78c5,U+7941,U+79e4,U+7a1a,U+7a9c,U+7ad6,U+7b5d,U+7bf7,U+7c07,U+7c3f,U+7c9f,U+7ca5,U+7cdf,U+7e82,U+7eab,U+7ece,U+7eda,U+7f09,U+7f15,U+7f9e,U+7fdf,U+7fe9,U+803b,U+803d,U+80aa,U+80b4,U+813e,U+8155,U+817b,U+819d,U+821c,U+82b9,U+82df,U+82ef,U+8304,U+83b9,U+8446,U+853d,U+85af,U+85fb,U+8650,U+865e,U+86d9,U+86ee,U+8700,U+8862,U+889c,U+88d4,U+88f8,U+895f,U+8a79,U+8bb3,U+8bb6,U+8bc0,U+8beb,U+8bf5,U+8c23,U+8c79,U+8d1e,U+8dcb,U+8e29,U+8e44,U+8e81,U+8eac,U+8eaf,U+8f8d,U+9050,U+90f8,U+914b,U+948a,U+94be,U+94ee,U+950c,U+9540,U+962e,U+9647,U+9661,U+9699,U+96cf,U+9716,U+9761,U+97a0,U+97e7,U+9a7c,U+9a8f,U+9ae6,U+9cd6,U+9e26"}},{uri:Ime,descriptors:{unicodeRange:"U+4fa3,U+4fae,U+4fd8,U+4fef,U+50a3,U+5189,U+5195,U+51db,U+51f3,U+51f9,U+5220,U+5228,U+5288,U+52ff,U+532e,U+533f,U+5351,U+53db,U+53ed,U+5450,U+5484,U+5490,U+54c9,U+54e9,U+5501,U+5507,U+5543,U+55d3,U+56a3,U+575e,U+589f,U+5984,U+59ec,U+5a04,U+5a36,U+5a77,U+5a9a-5a9b,U+5ab2,U+5ac2,U+5ad6,U+5bc7,U+5c2c,U+5c34,U+5c51,U+5cd9,U+5d0e,U+5deb,U+5e3c,U+5e87,U+5ed3,U+5f13,U+5f64,U+5fe1,U+606a,U+6096,U+60df,U+60f6,U+60f9,U+6151,U+620e,U+6241,U+6252,U+6273,U+627c,U+6289,U+62c2,U+62cc,U+62ef,U+6361,U+6363,U+63b7,U+63e3,U+6518,U+66ae,U+6756,U+6789,U+6813,U+6829,U+6862,U+6866,U+6893,U+6897,U+690e,U+6984,U+69cc,U+6a1f,U+6a44,U+6a59,U+6ba1,U+6c13,U+6c90,U+6ca6,U+6cbd,U+6ccc,U+6cd3,U+6cd7,U+6d4a,U+6d4f,U+6d5a,U+6d9f,U+6da1,U+6dcc,U+6ea5,U+6ee4,U+6ee6,U+6f2f,U+6f8e,U+701a,U+7095,U+709c,U+70af,U+70db,U+70e8,U+714e,U+715e,U+71a0,U+71ce,U+7235,U+7280,U+72d0,U+72f8,U+73ab,U+7410,U+745c,U+7480,U+74a7-74a8,U+74e3,U+75ae,U+75f9,U+76b1,U+76ce,U+7736,U+77e2-77e3,U+781a,U+789f,U+797a,U+79be,U+79c3,U+79c6,U+79f8,U+7a8d,U+7a98,U+7aa6,U+7aff,U+7b1b,U+7cd9,U+7d6e,U+7ede,U+7eee,U+7f00,U+7f24,U+7f2d,U+7fd8,U+800d,U+8116,U+8151,U+81b3,U+8205,U+82c7,U+82db,U+832c,U+8335,U+8339,U+8386,U+846b,U+8587,U+8611,U+8682,U+868a,U+868c,U+8774,U+88d8,U+88f4,U+8912,U+8b6c,U+8bbd,U+8c0e,U+8c41,U+8d26,U+8d3b-8d3c,U+8d50,U+8dea,U+8e35,U+8f99,U+8fe2,U+8fe9,U+9017,U+914c,U+916f,U+9175-9176,U+918b,U+94a0,U+94ae,U+94ce,U+94f2,U+951a,U+952f,U+9541,U+9640,U+9672,U+968b,U+96cd,U+96ef,U+9713,U+97ec,U+9885,U+9992,U+9a6d,U+9a79,U+9a85,U+9cbb,U+9cd7,U+9cde,U+9e93,U+9f9f"}},{uri:xme,descriptors:{unicodeRange:"U+4e11,U+4ed7,U+4fcf,U+4fe9,U+4fed,U+50ac,U+50b2,U+5112,U+5180,U+5188,U+51f6,U+522e,U+5265,U+52cb,U+52df,U+5349,U+5367,U+5378,U+537f,U+5395,U+5398,U+53d4,U+543e,U+5440,U+5446,U+54b8,U+5565-5566,U+5580,U+55bb,U+56ca,U+572d,U+573e,U+574e,U+5782-5784,U+58f3,U+5938-5939,U+5948,U+594e,U+5a1c,U+5a74,U+5ae9,U+5b55,U+5b5c,U+5bb0,U+5bd3,U+5bf8,U+5c3f,U+5d14,U+5d2d,U+5df7,U+5dfe,U+5e05-5e06,U+5e1c,U+5e62,U+5e7b,U+5e7d,U+5ed6,U+5f2f,U+5f66,U+5f6c,U+5fa1,U+604b,U+609f,U+60a6,U+60e8,U+6101,U+6124,U+6127,U+6148,U+61be,U+6247,U+62d8,U+62da,U+633d,U+635e,U+6367,U+6380,U+638f,U+63a9,U+63fd,U+641c,U+64e6,U+655e,U+6572,U+6591,U+65a5,U+6691,U+6735,U+67a2-67a3,U+67ef,U+680b,U+6876,U+6905,U+6a0a,U+6a61,U+6b79,U+6bb7,U+6bbf,U+6c41,U+6c55,U+6c83,U+6c9b,U+6ca7,U+6cfc,U+6d46,U+6d51,U+6d74,U+6d9d,U+6daf,U+6dc0,U+6deb,U+6e17,U+6e24,U+6e89,U+6ea2,U+6ef4,U+6f6d,U+707f,U+70b3,U+70e4,U+70ef,U+710a,U+722c,U+725f,U+7261,U+72ee,U+72f1,U+730e,U+732b,U+7433,U+7538,U+75bc,U+7624,U+7709,U+7750,U+7779,U+7802,U+7898,U+78a7,U+78b1,U+78cb,U+78f7,U+7984,U+7a83,U+7aed,U+7b3c,U+7b4b,U+7c92,U+7c98,U+7ca4,U+7eb9,U+7ee3,U+7ef3,U+7ef5,U+7f05,U+7f55,U+7f62,U+7fc1,U+7fd4,U+7fe0,U+8042,U+806a,U+80a0,U+80a4,U+80c3,U+8102,U+8106,U+814a,U+8154,U+8247,U+8258,U+82cd,U+8328,U+832b,U+8389,U+83ca,U+845b,U+846c,U+84b8,U+8574,U+859b,U+8680,U+8695,U+86c7,U+8702,U+886c,U+8896,U+88b1,U+88e4,U+8bc8,U+8c10,U+8c26,U+8c28,U+8c2d,U+8d4c,U+8d63,U+8f67,U+8f74,U+8fc4,U+9006,U+9063,U+90a2,U+90b1,U+90c1,U+9177,U+9189,U+9493,U+949e,U+94fe,U+9610,U+961c,U+96a7,U+96fe,U+978d,U+97f5,U+9888,U+997c,U+9a84,U+9b3c,U+9b44-9b45,U+9b54,U+9e64,U+9f0e,U+9f9a"}},{uri:Cme,descriptors:{unicodeRange:"U+4e19,U+4e38,U+4e53,U+4e7e,U+4e9f,U+4ec6,U+4f50,U+4fde,U+502a,U+5154,U+517d,U+51d1,U+51f0,U+5239,U+5256,U+52c9,U+52fe,U+5308,U+532a,U+535c,U+5384,U+53a2,U+53a8,U+53c9,U+53e0,U+5496,U+54ac,U+54c0,U+54c4,U+54e8,U+5561,U+5582,U+561b,U+5631,U+566a,U+5764,U+576a,U+5792,U+57ab,U+584c,U+5885,U+58f6,U+59a8,U+5acc,U+5bc2,U+5c38-5c39,U+5c60,U+5c6f,U+5c82,U+5c90,U+5d16,U+5dcd,U+5e37,U+5e90,U+5eb8,U+5f6a,U+5fcc,U+6012,U+6068,U+6073,U+607c,U+6094,U+6109,U+621a,U+626e,U+6284,U+62d0,U+62e6,U+62fe,U+6321,U+6328,U+632b,U+6349,U+6454,U+65ed,U+660f,U+6674,U+66a8,U+6749,U+674f,U+6760,U+67af,U+6850,U+6854,U+6869,U+68a8,U+68d2,U+68f5,U+6912,U+6b49,U+6b6a,U+6bef,U+6c28,U+6c5d,U+6c82,U+6cab,U+6cb8,U+6cc4,U+6cf5,U+6d47,U+6d78,U+6da4,U+6dc4,U+6dcb,U+6df9,U+6e0a,U+6e23,U+6e5b,U+6eb6,U+6f06,U+6f47,U+6f84,U+6f9c,U+6fd2,U+7076,U+70ac,U+7199,U+723d,U+72ac,U+72ed,U+7476,U+7529,U+752b,U+754f,U+7554,U+75d5,U+7626,U+76ef,U+7720,U+7766,U+7784,U+77ac,U+780d,U+7838,U+7845,U+786b,U+78b3,U+7978,U+79b9,U+79c9,U+79e7,U+7a3d,U+7a84,U+7a9f,U+7b0b,U+7b52,U+7c7d,U+7f1a,U+7fc5,U+7ff0,U+804a,U+8086-8087,U+808c,U+809a,U+80ba,U+810a,U+8180,U+818f,U+81c2,U+81ed,U+8231,U+8292,U+829c,U+82a6,U+82d1,U+8346,U+838e,U+839e,U+83c7,U+83f1,U+8403,U+840e,U+8513,U+857e,U+85e4,U+867e,U+871c,U+87ba,U+87f9,U+884d,U+8944,U+8a93,U+8c05,U+8d2c,U+8d2e,U+8d42-8d43,U+8dfb,U+8e22,U+8eba,U+8f69,U+8f9c,U+8fa3,U+8fa8,U+8fb1,U+900a,U+9038,U+903b,U+9042,U+904f,U+90b5,U+90dd,U+9102,U+9187,U+94a7,U+94c5,U+9523,U+95f8,U+95fd,U+960e,U+964b-964c,U+96c1,U+9709,U+971c,U+97ad,U+9882,U+9965,U+9976,U+9988,U+99a8,U+9a82,U+9a9a,U+9b41,U+9c8d,U+9e45,U+9e70,U+9e9f,U+9f3b,U+9f7f"}},{uri:Ame,descriptors:{unicodeRange:"U+4e08,U+4e18,U+4e1b,U+4e22,U+4e27,U+4e32,U+4e52,U+4e73,U+4ead,U+4ed4,U+4ed9,U+4ef0,U+4fa6,U+5076,U+5179,U+51bb,U+51c9,U+51ef,U+51fd,U+524a,U+526a,U+529d,U+52ab,U+5306,U+5339,U+53d9,U+540a,U+5410,U+541e,U+5439,U+54b1,U+54ed,U+5564,U+558a,U+55b7,U+5634,U+574a,U+5751,U+57a6,U+57cb,U+57d4,U+5824,U+582a,U+5835,U+5858,U+5893,U+58e4,U+5951,U+5986,U+59da,U+59fb,U+59ff,U+5a03,U+5a46,U+5ac1,U+5b5d,U+5bfa,U+5c18,U+5c3a,U+5c48,U+5c4f,U+5c61,U+5cb3,U+5d1b,U+5e15,U+5e3d,U+5e99,U+5e9e,U+5eca,U+5f0a,U+5f17-5f18,U+5f25,U+5f7c,U+5fcd,U+6028,U+60a0,U+60ac,U+60d1,U+614e,U+6155,U+6168,U+61c8,U+6208,U+6212,U+6251,U+629a-629b,U+62ab-62ac,U+62fc,U+6323,U+632a,U+63d2,U+643a,U+6491-6492,U+649e,U+64b0,U+64c5,U+659c,U+6614,U+662d,U+6664,U+6670,U+6676,U+6746,U+67cf,U+67d4,U+682a,U+6843,U+6846,U+68da,U+6b3a,U+6b67,U+6c27,U+6c5b,U+6c64,U+6c70,U+6caa,U+6cca,U+6ce1,U+6d12,U+6d45,U+6dd1,U+6dd8,U+6e34,U+6e7f,U+6ee5,U+6f02,U+7092,U+70c2,U+70e6,U+7115,U+7237,U+7272,U+727a,U+72c2,U+739b,U+73b2,U+743c,U+751c,U+758f,U+75b2,U+7686,U+76c6,U+76d2,U+76fc,U+775b,U+77a9,U+7816,U+788e,U+7897,U+78b0,U+79bd,U+7a0d,U+7a91,U+7a9d,U+7ae3,U+7bad,U+7cca,U+7d2b,U+7eb1,U+7f06,U+7f14,U+7f1d,U+7f50,U+7ffc,U+8036,U+80bf,U+80c1,U+80ce,U+80f8,U+8109,U+810f,U+8170,U+8179,U+819c,U+821f,U+8230,U+8236,U+8273,U+829d,U+82f9,U+8305,U+8350,U+83b2,U+83cc,U+8404,U+840d,U+8427,U+8482,U+8679,U+8854,U+886b,U+8bbc,U+8be6,U+8c31,U+8c6b,U+8d4b,U+8dcc,U+8e2a,U+8e48,U+8f90,U+8fb0,U+9022,U+903c,U+903e,U+9065,U+916c,U+917f,U+94a9,U+94c3,U+94dd,U+94ed,U+9510,U+953b,U+96c7,U+970d,U+9738,U+9877,U+987d,U+989c,U+98d8,U+9a70,U+9a91,U+9aa4,U+9b42,U+9b4f,U+9e2d,U+9e3f,U+9e7f,U+9f20"}},{uri:xge,descriptors:{unicodeRange:"U+4e59,U+4ed3,U+4f0f,U+4f38,U+4f69,U+4fa7,U+4faf,U+4ff1,U+5077,U+5085,U+5144,U+5151,U+51af,U+51b6,U+51cc,U+523a,U+5251,U+5269,U+5272,U+52d8,U+5353,U+5389,U+53f9,U+5401,U+5415,U+541b,U+54f2,U+5524,U+554a,U+559d,U+5609,U+5740,U+575d,U+5806,U+5821,U+586b,U+5915,U+594f,U+5960,U+5999,U+59a5,U+59b9,U+59c6,U+59d1,U+59dc,U+5b5f,U+5b64,U+5b87,U+5bb4,U+5bbf,U+5c16,U+5c1d,U+5c3e,U+5c9a,U+5ca9,U+5cad,U+5cfb,U+5de1,U+5de7,U+5de9,U+5ef7,U+5f04,U+5f70,U+5f79,U+5fc6,U+602a,U+6050,U+6052,U+6070,U+6084,U+60b2,U+60dc,U+60e9,U+6167,U+6170,U+61c2,U+6270,U+6291,U+62b1,U+62bc,U+62dc,U+62df,U+62f3,U+6324,U+633a,U+6377,U+6398,U+63cf,U+640f,U+642c-642d,U+6458,U+6478,U+6500,U+654c,U+6566,U+658c,U+65c1,U+65cb,U+65e8,U+65ec,U+6696-6697,U+6734,U+679a,U+679d,U+67dc,U+67f3-67f4,U+680f,U+683d,U+684c,U+68af,U+699c,U+6bc1,U+6c0f,U+6c1b,U+6c57,U+6c6a,U+6d3d,U+6d6e,U+6d82,U+6db5,U+6dee,U+6e58,U+6eaa,U+6ecb,U+6ede,U+6ee9,U+6f0f,U+6f20,U+6f58,U+704c,U+7070,U+70b8,U+718a,U+7238,U+7262,U+7275,U+72b9,U+72d7,U+72e0,U+741b,U+7434,U+7483,U+74f6-74f7,U+75ab,U+764c,U+7761,U+7855,U+7891,U+78c1,U+79d2,U+7a00,U+7a3b,U+7c97,U+7ea4,U+7eb2,U+7ed2,U+7eea,U+7ef8,U+7f18,U+7fbd,U+8000,U+8010,U+8096,U+809d,U+80a9,U+817f,U+81e3,U+8206,U+8212,U+82ac,U+8302,U+8361,U+8377,U+83f2,U+8461,U+848b,U+84ec,U+8521,U+85aa,U+8870,U+8877,U+8881,U+888b,U+88ad,U+88c2,U+8986,U+8bd1,U+8bf1,U+8d24,U+8d2a,U+8d3e-8d3f,U+8d41,U+8d56,U+8d64,U+8d6b,U+8e0f,U+8f70,U+8f85,U+8f88,U+8fa9,U+9003,U+901d,U+90b9,U+90ce,U+94a6,U+94f8,U+9505,U+95ea,U+95ef,U+95f2,U+95f9,U+9601,U+9605,U+9634,U+966a,U+9677,U+9690,U+9694,U+96d5,U+971e,U+9896-9897,U+9972,U+9a71,U+9a76,U+9a7e,U+9e1f,U+9e23"}},{uri:Mme,descriptors:{unicodeRange:"U+4e01,U+4e43,U+4ea6,U+4ef2,U+4eff,U+4f26,U+4f2a,U+4f2f,U+4f5b,U+4fa8,U+4fca,U+4fd7,U+5021,U+504f,U+5141,U+51c0,U+51dd,U+51e4,U+51ed,U+5200,U+5237,U+5427,U+5448,U+54a8,U+5706,U+5708,U+5723,U+575b,U+57c3,U+5899,U+58a8,U+58c1,U+5976,U+5988,U+59bb,U+59d0,U+59d3,U+5a18,U+5a31,U+5a92,U+5b54,U+5b85,U+5baa-5bab,U+5bc4,U+5bd2,U+5be8,U+5bff,U+5c65,U+5d07,U+5e1d,U+5e78,U+5e7c,U+5f03,U+5f1f,U+5f39,U+5f6d,U+5f92,U+5faa,U+5fbd,U+5fe7,U+5ffd,U+60a8,U+60ef,U+6108,U+6162,U+622a,U+6234,U+626b,U+626d,U+62c6,U+62d2,U+62d4,U+62d6,U+62e8,U+6316,U+6355,U+63ed,U+6447,U+64a4,U+65f1,U+6606,U+6628,U+664b,U+6668,U+6682,U+66f9,U+66fc,U+66ff,U+6717,U+6740,U+676d,U+67aa,U+67ec,U+67f1,U+6842,U+6851,U+695a,U+6982,U+6a2a,U+6b20,U+6b23,U+6b32,U+6b96,U+6bc5,U+6beb,U+6c60,U+6c9f,U+6cea,U+6cf3,U+6d1e,U+6d53,U+6d66,U+6d69,U+6d8c,U+6d9b,U+6db2,U+6de1,U+6dfb,U+6e14,U+6ed1,U+6eda,U+6ee8,U+6f2b,U+706d,U+7089,U+708e,U+70ad-70ae,U+70e7,U+7126,U+714c,U+71c3,U+71d5,U+7206,U+7259,U+731b,U+73a9,U+73bb,U+74dc,U+7532,U+7545,U+755c,U+75c7,U+7687,U+76d7,U+76f2,U+788d,U+78e8,U+79e6,U+79e9,U+7a3f,U+7a46,U+7a97,U+7af9,U+7bee,U+7c4d,U+7c89,U+7cd6,U+7eb5,U+7ebd,U+7ed8,U+8017,U+8033,U+80c0,U+80de,U+80f6,U+8138,U+817e,U+81a8,U+820d,U+827e,U+82b3,U+82d7,U+83b1,U+84c4,U+84dd,U+8584,U+864e,U+865a,U+866b,U+86cb,U+88d5,U+89e6,U+8bca,U+8bde,U+8bfa,U+8c0a,U+8c37,U+8c46,U+8c6a,U+8c8c,U+8d1d,U+8d29,U+8d4f,U+8d54,U+8d5a,U+8d60,U+8d62,U+8f7f,U+8f96,U+8f9e-8f9f,U+8fc1,U+8fdf,U+8fea,U+8ff7,U+9012,U+906d,U+9075,U+90a6,U+90bb,U+90ca,U+9178,U+9192,U+91ca,U+94bb,U+94dc,U+94fa,U+9501,U+950b,U+9521,U+955c,U+963b,U+9655,U+9675-9676,U+9887,U+9891,U+9971,U+9a97,U+9ece,U+9ed8"}},{uri:Rme,descriptors:{unicodeRange:"U+4e1d,U+4e39,U+4e4c,U+4e4f,U+4e54,U+4e58,U+4e95,U+4ea1,U+4eab,U+4eae,U+4ec1,U+4f10,U+4f19,U+4f30,U+4f34,U+4fb5,U+503e,U+518c,U+5192,U+51a0,U+51ac,U+51b0,U+51e1,U+5211,U+5242,U+52a3,U+52b2,U+52c3,U+52c7,U+52d2,U+52e4,U+5377,U+539a,U+53a6,U+53e5,U+5417,U+5510,U+552f,U+5531,U+574f-5750,U+5761,U+5851,U+5854,U+58ee,U+593a,U+5949,U+5954,U+5a5a,U+5b8b,U+5bbd,U+5c04,U+5c0a,U+5c4b,U+5ce1,U+5cf0,U+5e10,U+5e8a,U+5e9f,U+5ec9,U+5f31,U+5f84,U+5fd8-5fd9,U+5fe0,U+6015,U+6062,U+6069,U+6076,U+6089,U+60a3,U+60ca,U+620f,U+624e,U+6263,U+6298,U+62a2,U+62bd,U+6311,U+6350,U+6389,U+638c,U+63f4,U+6446,U+644a,U+6469,U+64cd,U+654f,U+6562,U+656c,U+65d7,U+65e6,U+65fa,U+660c,U+6653,U+66b4,U+670b,U+672b,U+676f-6770,U+6881,U+6885,U+68a6,U+68cb,U+68ee,U+6b8a,U+6c88-6c89,U+6cc9,U+6ce5,U+6d01,U+6d17,U+6d1b,U+6d59,U+6d6a,U+6da8,U+6df7,U+6e10,U+6e20-6e21,U+6f5c,U+706f,U+70bc,U+719f,U+7267,U+732a,U+73cd,U+7518,U+756a,U+7586,U+7591,U+75db,U+76c8,U+76d0,U+76d6,U+76d8,U+76df,U+76fe,U+77db,U+7801,U+786c,U+795d,U+7965,U+79cb,U+7a77,U+7a7f,U+7aef,U+7b11,U+7bb1,U+7bc7,U+7ea0,U+7eaf,U+7ed5,U+7edc,U+7f13,U+7f29,U+7f34,U+7f8a,U+7ffb,U+8015,U+8058,U+805a,U+8083,U+80af,U+80c6,U+80cc,U+811a,U+8150,U+82e5,U+8336,U+8352,U+83ab,U+8428,U+8463,U+852c,U+8861,U+89c8,U+8bcd,U+8bd7,U+8bda,U+8be2,U+8bef,U+8bf8,U+8c0b,U+8c13,U+8d34,U+8d3a,U+8d74,U+8d76,U+8da3,U+8dd1,U+8ddd,U+8ddf,U+8df3,U+8f68,U+8f6f,U+8f7d,U+8f91,U+8f9b,U+8fbd,U+8fc8,U+8fd4,U+8feb,U+8ff9,U+900f,U+9057,U+907f-9080,U+90d1,U+90ed,U+91ce,U+9519,U+9526,U+95ed,U+9614,U+9635,U+9644,U+9686,U+96c5,U+96ea,U+9707,U+9732,U+9759,U+978b,U+9876,U+9881,U+9910,U+996e,U+9970,U+9c81,U+9e21,U+9ebb,U+9f84"}},{uri:kme,descriptors:{unicodeRange:"U+4e3d,U+4e4e,U+4e71,U+4e8f,U+4ed8,U+4eea,U+4f0a,U+4f0d,U+4f11,U+4f1f,U+4f24,U+4f3c,U+4f73,U+4fc4,U+500d,U+5012,U+501f,U+503a,U+505c,U+507f,U+50a8,U+514d,U+5178,U+517c,U+51b2,U+51b7,U+520a,U+5238,U+523b,U+52b1,U+535a,U+5371,U+5385,U+53eb-53ec,U+53f3,U+53f6,U+5409,U+542b,U+542f,U+5434,U+5462,U+5473,U+547c,U+54c8,U+54ea,U+56fa,U+5733,U+5757,U+5766,U+5802,U+585e,U+590f,U+591c,U+591f,U+5947,U+594b,U+5987,U+5a01,U+5b59,U+5b63,U+5b88,U+5b97,U+5b9c,U+5bbe,U+5bfb,U+5c01,U+5c1a,U+5c24,U+5c3c,U+5c97,U+5c9b,U+5cb8,U+5de6,U+5e01,U+5e2e,U+5e45,U+5e55,U+5e84,U+5ef6,U+5f02,U+5f52,U+5f69,U+5f7b,U+5f90,U+5fae,U+6000,U+600e,U+6025,U+60e0,U+6276,U+6297,U+62b5,U+62cd,U+62d3,U+62e5,U+62e9,U+62ff,U+6302,U+632f,U+63e1,U+6444,U+64ad,U+653b,U+6551,U+6563,U+65a4,U+65e7,U+6620,U+667a,U+66f2,U+671d,U+6731,U+6742,U+675f,U+6768,U+677e-677f,U+6790,U+67b6,U+67d3,U+6863,U+68b0,U+68c9,U+690d,U+6b8b,U+6bcd,U+6bd2,U+6bd5,U+6c38,U+6c61,U+6cbf,U+6cdb,U+6cf0,U+6d2a,U+6d89,U+6da6,U+6f6e,U+6fb3,U+7075,U+707e,U+70df,U+7164,U+7236,U+725b,U+7389,U+73e0,U+745e,U+74e6,U+751a,U+7537,U+75be,U+76ae,U+76db,U+793c,U+7956,U+7981,U+79d8,U+79df,U+79fb,U+7adf,U+7ae5,U+7b14,U+7b26,U+7b54,U+7b79,U+7d2f,U+7eb8,U+7eba,U+7ec6,U+7ee9,U+7eff,U+7f5a,U+7f6a,U+7f72,U+8089,U+80a5,U+80e1,U+8111,U+8131,U+821e,U+822c,U+8270,U+8499,U+8651,U+867d,U+8840,U+8857,U+8863,U+88c1,U+89c9,U+89d2,U+8a89,U+8bed,U+8bfe,U+8c01,U+8c22,U+8d21,U+8d25,U+8d2f,U+8d5e,U+8d75,U+8d8b,U+8dc3,U+8de8,U+8df5,U+8f6e,U+8f86,U+8f89,U+8fc5,U+8ff0,U+8ffd,U+9014,U+904d,U+90ae,U+9274,U+949f,U+952e,U+969c,U+96c4,U+96e8,U+96f6-96f7,U+97e9,U+987f,U+996d,U+9a7b,U+9aa8,U+9c7c,U+9c9c,U+9e4f,U+9f13,U+9f50"}},{uri:Dme,descriptors:{unicodeRange:"U+4e13,U+4e16,U+4e1c,U+4e24,U+4e3e,U+4e49,U+4e61,U+4e66,U+4e89,U+4e8c,U+4e94,U+4e9b,U+4ea4,U+4eac,U+4ebf,U+4eca,U+4ef6-4ef7,U+4efb,U+4f18,U+4f20,U+4f46,U+4f7f,U+4fe1,U+503c,U+505a,U+5146,U+5148,U+515a,U+5171,U+5177,U+519b,U+51b3,U+51c6,U+51e0,U+5212,U+521b,U+522b,U+529e,U+52bf,U+534e-534f,U+5355,U+5357,U+5382,U+539f,U+53bb,U+53bf,U+53c2,U+53c8,U+53ca,U+53d6-53d8,U+53e3,U+53ea,U+53f0,U+540d,U+5411,U+56db,U+56de,U+56e0,U+56e2,U+578b,U+57ce,U+57fa,U+589e,U+5904,U+5934,U+5982,U+5b89,U+5b8c,U+5bfc,U+5c06,U+5c11,U+5c40,U+5c71,U+5e38,U+5e72,U+5e76,U+5e7f,U+5e94,U+5e9c,U+5f0f,U+5f15,U+5f20,U+5f3a,U+5f62,U+5f88,U+5fc5,U+5fd7,U+5feb,U+601d,U+6027,U+60c5,U+60f3,U+610f,U+6216,U+6218,U+624b,U+624d,U+6279,U+628a,U+6295,U+6301,U+6307,U+636e,U+63a5,U+63a8,U+652f,U+6536,U+653e,U+6548,U+6559,U+6570,U+65bd,U+65e0,U+6602,U+660e,U+6613,U+66f4,U+6700,U+670d,U+671f,U+672f,U+6743,U+674e,U+6751,U+6761,U+6784,U+6797,U+679c,U+67e5,U+6807,U+6837,U+683c,U+6b21,U+6b63-6b65,U+6bcf,U+6bd4,U+6c42,U+6c5f,U+6ca1,U+6cbb,U+6d3b,U+6d41,U+6d88,U+6df1,U+70b9,U+7136,U+7269,U+7279,U+7531,U+754c,U+767e,U+76ca,U+76f8,U+770b,U+7740,U+7814,U+79ef,U+7a0b,U+7a0e,U+7a76,U+7b80,U+7cbe,U+7cfb,U+7e41,U+7ea7,U+7ec4,U+7ec7,U+7ed3,U+7ed9,U+7edf,U+7f8e,U+8001,U+804c,U+8054,U+80b2,U+81f3,U+8425,U+8868,U+88ab,U+897f,U+89c1-89c2,U+89c4,U+89c6,U+89e3,U+8ba1,U+8ba4,U+8bae,U+8bb0,U+8bba,U+8bc1,U+8c03,U+8d28,U+8d39,U+8def,U+8f66,U+8f6c,U+8fd0-8fd1,U+9020,U+9053,U+90a3,U+90fd,U+91cc,U+9500,U+9547,U+95e8,U+95f4,U+961f,U+9645,U+9662,U+96be,U+96c6,U+9700,U+9769,U+97e6,U+9875,U+9879,U+9886,U+9898,U+98ce,U+9996,U+2b5af,U+2cc56,U+2e9f5,U+30edd-30ede"}},{uri:Nme,descriptors:{unicodeRange:"U+4e03,U+4e30,U+4e34,U+4e45,U+4e60,U+4e70,U+4e88,U+4e91-4e92,U+4ea9,U+4eb2,U+4ec0,U+4ecb,U+4ecd,U+4ee4,U+4fee,U+5019,U+5047,U+50cf,U+5145,U+516d,U+5170,U+5175,U+5199,U+51cf,U+51fb,U+521a,U+5224,U+5267,U+52aa,U+5347-5348,U+534a,U+5356,U+5361,U+536b,U+5370,U+538b,U+53e4,U+53e6,U+5403,U+5426,U+5428,U+542c,U+5438,U+5668,U+56ed,U+56f4,U+56fe,U+57df,U+592a,U+5957,U+5b69,U+5b81,U+5b8f,U+5b98,U+5b9d,U+5ba1,U+5ba4,U+5bb3,U+5bc6,U+5bdf,U+5c3d,U+5c5e,U+5c81,U+5ddd,U+5de8,U+5dee,U+5e0c,U+5e86,U+5e8f,U+5e93,U+5e95,U+5e97,U+5ea7,U+5ead,U+5eb7,U+5f55,U+5f81,U+5f85,U+5ff5,U+6001,U+613f,U+6258,U+6267,U+6269,U+626c,U+627e,U+62db,U+62ec,U+6325,U+635f,U+6362,U+6388,U+6392,U+63a2,U+63a7,U+63aa,U+641e,U+6545,U+6597,U+65e2,U+65e9,U+661f,U+665a,U+666e-666f,U+66fe,U+6728,U+67d0,U+6811,U+6838,U+6865,U+697c,U+6b22,U+6b27,U+6b4c,U+6b62,U+6b66,U+6b7b,U+6bdb,U+6c47,U+6c49,U+6c7d,U+6c99,U+6cfd,U+6d0b,U+6d25,U+6d32,U+6d3e,U+6d4b,U+6e29,U+6e56,U+6e7e,U+6f14,U+6fc0,U+706b,U+70c8,U+7247,U+72af,U+72b6,U+72ec,U+732e,U+73ed,U+7403,U+7533,U+753b,U+7559,U+7565,U+7597,U+767b,U+773c,U+7763,U+77ed,U+77ff,U+7968,U+798f,U+79bb,U+79c0-79c1,U+7ad9,U+7ae0,U+7b51,U+7b7e,U+7cae,U+7d22,U+7ea2,U+7eb3,U+7eb7,U+7ec3,U+7ec8,U+7ecd,U+7edd,U+7efc,U+7f16,U+7f3a,U+7f51,U+7f57,U+7f6e,U+80dc,U+822a,U+8239,U+826f,U+82cf,U+82e6,U+8349,U+8363,U+83dc,U+8457,U+85cf,U+878d,U+8865,U+8a00,U+8b66,U+8ba2,U+8ba8,U+8bad,U+8bb2,U+8bc9,U+8bd5,U+8bfb,U+8d2b,U+8d35,U+8d37,U+8f7b,U+8f93,U+8fce,U+8fdd,U+9000-9002,U+9010,U+9047,U+9093,U+9152,U+9488,U+94a2,U+9633,U+9636,U+963f,U+9646,U+9648,U+964d,U+9664,U+9669,U+9760,U+97f3,U+987a,U+987e,U+9884,U+98de,U+9986,U+9ed1"}},{uri:Ome,descriptors:{unicodeRange:"U+4e14,U+4e25,U+4e48,U+4e50,U+4e5d,U+4e9a,U+4ec5,U+4efd,U+4f17,U+4f4e-4f4f,U+4f55,U+4f59,U+4f60,U+4f8b,U+4f9b,U+4f9d,U+4fbf,U+4fc3,U+5065,U+513f,U+5149,U+514b,U+516b,U+5174,U+517b,U+518d,U+51b5,U+5207,U+5217-5219,U+521d,U+526f,U+529f,U+52a9,U+52b3,U+5305,U+533b,U+5343,U+5360,U+5373-5374,U+5386,U+53cb-53cd,U+53f2,U+53f7,U+544a,U+5468,U+547d,U+54cd,U+552e,U+5584,U+56f0,U+571f,U+5747,U+575a,U+57f9,U+5883,U+58eb,U+58f0,U+5907,U+590d,U+592e,U+5931,U+5956,U+5965,U+5973,U+5979,U+59cb,U+5b57-5b58,U+5b83,U+5ba2-5ba3,U+5bb9,U+5bcc,U+5c42,U+5c45,U+5c4a,U+5dde,U+5df1,U+5df4,U+5e03,U+5e08,U+5e26,U+5e2d,U+5f71,U+5f80,U+5f8b,U+5fb7,U+606f,U+611f,U+6237,U+623f,U+6253,U+627f,U+6293,U+62a4,U+62c5,U+62c9,U+6309,U+6574,U+6599,U+65ad,U+65af,U+65c5,U+65cf,U+6625,U+663e,U+671b,U+672a,U+6750,U+6781,U+6821,U+6839,U+6848,U+68c0,U+6a21,U+6b3e,U+6bb5,U+6c14,U+6cb3,U+6cb9,U+6ce8,U+6e05,U+6e2f,U+6e38,U+6e90,U+6ee1,U+70ed,U+7167,U+7231,U+7248,U+724c,U+7387,U+738b,U+73af,U+7530,U+75c5,U+767d,U+76d1,U+76f4,U+771f,U+77e5,U+77f3,U+7834,U+7840,U+786e,U+793a,U+795e,U+79f0,U+7a33,U+7a7a,U+7a81,U+7ade,U+7b56,U+7b97,U+7c73,U+7c7b,U+7d20,U+7d27,U+7ea6,U+7eaa,U+7ebf,U+7ee7,U+7eed,U+7ef4,U+7fa4,U+8003,U+80a1,U+81f4,U+8272,U+827a,U+8282,U+82b1,U+82f1,U+8303,U+836f,U+83b7,U+843d,U+88c5,U+8ba9,U+8baf,U+8bb8,U+8bbf,U+8bc4,U+8bc6,U+8bdd,U+8be5,U+8bf7,U+8c08,U+8c61,U+8d1f,U+8d22-8d23,U+8d27,U+8d2d,U+8d38,U+8d5b,U+8d70,U+8d85,U+8d8a,U+8db3,U+8eab,U+8f83,U+8fb9,U+8fdc,U+8fde,U+9009,U+901f,U+914d,U+91c7,U+94b1,U+94c1,U+94f6,U+95fb,U+9632,U+9650,U+968f,U+9752,U+975e,U+987b,U+989d,U+98df,U+9999,U+9a6c,U+9a8c,U+9ec4,U+9feb-9fec"}},{uri:Pme,descriptors:{unicodeRange:"U+98fb-990c,U+990e-990f,U+9911-992d,U+992f-9953,U+9956-9962,U+9964,U+9966,U+9973,U+9978-9979,U+997b,U+997e,U+9982-9983,U+9989,U+998c,U+998e,U+999a-99a4,U+99a6-99a7,U+99a9-99c8"}},{uri:Fme,descriptors:{unicodeRange:"U+8e4c-8e50,U+8e53-8e58,U+8e5a-8e65,U+8e67-8e68,U+8e6a-8e6b,U+8e6e,U+8e71,U+8e73,U+8e75,U+8e77-8e7b,U+8e7d-8e7e,U+8e80,U+8e82-8e84,U+8e86,U+8e88-8e8e,U+8e91-8e93,U+8e95-8e9b,U+8e9d,U+8e9f-8eaa,U+8ead-8eae,U+8eb0-8eb1,U+8eb3-8eb9,U+8ebb-8ecd,U+8ecf-8f02"}},{uri:Bme,descriptors:{unicodeRange:"U+2e3a,U+3001-3002,U+3008-3011,U+3014-3017,U+301d-301f,U+4dae,U+4e00,U+4e07,U+4e09-4e0b,U+4e0d-4e0e,U+4e1a,U+4e2a,U+4e2d,U+4e3a-4e3b,U+4e4b,U+4e5f,U+4e86,U+4e8b,U+4e8e,U+4ea7,U+4eba,U+4ece,U+4ed1,U+4ed6,U+4ee3,U+4ee5,U+4eec,U+4f01,U+4f1a,U+4f4d,U+4f53,U+4f5c,U+4fdd,U+5143,U+5165,U+5168,U+516c,U+5173,U+5176,U+5185,U+519c,U+51fa,U+5206,U+5229,U+5230,U+5236,U+524d,U+529b,U+52a0-52a1,U+52a8,U+5316-5317,U+533a,U+5341,U+5362,U+53d1,U+53ef,U+53f8,U+5404,U+5408,U+540c,U+540e,U+5458,U+548c,U+54c1,U+54e5,U+5546,U+559c,U+56fd,U+5728,U+5730,U+573a,U+5916,U+591a,U+5927,U+5929,U+592b,U+597d,U+59d4,U+5b50,U+5b66,U+5b9a,U+5b9e,U+5bb6,U+5bf9,U+5c0f,U+5c14,U+5c31,U+5c55,U+5de5,U+5df2,U+5e02,U+5e73-5e74,U+5ea6,U+5efa,U+5f00,U+5f53,U+5f97,U+5fc3,U+603b,U+6210-6211,U+6240,U+6280,U+62a5,U+63d0,U+6539,U+653f,U+6587,U+65b0,U+65b9,U+65e5,U+65f6,U+662f,U+6708-6709,U+672c,U+673a,U+675c,U+6765,U+6c11,U+6c34,U+6cd5,U+6ce2,U+6d4e,U+6d77,U+73b0,U+7406,U+751f,U+7528,U+7535,U+7684,U+76ee,U+793e,U+79cd,U+79d1,U+7acb,U+7b2c,U+7b49,U+7ba1,U+7ecf,U+8005,U+800c,U+80fd,U+81ea,U+884c,U+8981,U+8bbe,U+8bf4,U+8d44,U+8d77,U+8fbe,U+8fc7,U+8fd8-8fd9,U+8fdb,U+901a,U+90e8,U+91cd,U+91cf,U+91d1,U+9485,U+957f,U+95ee,U+9762,U+9ad8,U+9ea6,U+9f99,U+9fcf,U+9fd4,U+9fed,U+fe10-fe19,U+fe30-fe31,U+fe33-fe44,U+ff01,U+ff0c,U+ff1f,U+2b4e7,U+2b7f7,U+2b7fc,U+2cb2d,U+2cb3b,U+2cb4a,U+2cb5b,U+2cb73"}},{uri:zme,descriptors:{unicodeRange:"U+6490,U+6493-6494,U+6497-6498,U+649a-649d,U+649f-64a3,U+64a5-64a8,U+64aa-64ab,U+64af,U+64b1-64b4,U+64b6,U+64b9,U+64bb,U+64bd-64bf,U+64c1,U+64c3-64c4,U+64c6-64cc,U+64cf,U+64d1,U+64d3-64d6,U+64d9-64dd,U+64df-64e1,U+64e3,U+64e5,U+64e7-64ff,U+6501-6508,U+650a-6511,U+6513-6517,U+6519-6524,U+6526-652a,U+652c-652d,U+6530-6533,U+6537,U+653a,U+653c-653d,U+6540-6544,U+6546-6547,U+654a-654b,U+654d-654e,U+6550,U+6552-6554,U+6557-6558,U+655a,U+655c,U+655f-6561,U+6564-6565,U+6567-6568"}},{uri:Hme,descriptors:{unicodeRange:"U+9695-9696,U+969a-969b,U+969d-96a6,U+96a8-96af,U+96b1-96b2,U+96b4-96b5,U+96b7-96b8,U+96ba-96bb,U+96bf,U+96c2-96c3,U+96c8,U+96ca-96cb,U+96d0-96d1,U+96d3-96d4,U+96d6-96df,U+96e1-96e7,U+96eb-96ee,U+96f0-96f2,U+96f4-96f5,U+96f8,U+96fa-96fd,U+96ff,U+9702-9703,U+9705,U+970a-970c,U+9710-9712,U+9714-9715,U+9717-971b,U+971d,U+971f-9729,U+972b-972c,U+972e-972f,U+9731,U+9733-9737,U+973a-973d,U+973f-9751,U+9754-9755,U+9757-9758,U+975a,U+975c-975d,U+975f,U+9763-9764,U+9766-9768,U+976a-9770"}},{uri:Vme,descriptors:{unicodeRange:"U+6af0-6b1f,U+6b25-6b26,U+6b28-6b31,U+6b33-6b36,U+6b38,U+6b3b-6b3d,U+6b3f-6b42,U+6b44-6b45,U+6b48,U+6b4a-6b4b,U+6b4d-6b58,U+6b5a-6b61,U+6b68-6b69,U+6b6b-6b78,U+6b7a,U+6b7d-6b80,U+6b85,U+6b88,U+6b8c,U+6b8e-6b91,U+6b94-6b95,U+6b97-6b99,U+6b9c-6ba0,U+6ba2-6ba9,U+6bab-6bb2,U+6bb6,U+6bb8-6bba"}},{uri:$me,descriptors:{unicodeRange:"U+430e-439a,U+29e8a,U+29ec4,U+29edb,U+29ee9,U+29f7e,U+29f83,U+29f8c,U+29fce,U+2a01a,U+2a02f,U+2a082,U+2a0f9,U+2a190,U+2a38c"}},{uri:Gme,descriptors:{unicodeRange:"U+92ef-933d,U+933f-9369,U+936b-9388"}},{uri:Xme,descriptors:{unicodeRange:"U+4512-458d,U+2b300,U+2b363,U+2b36f,U+2b372,U+2b37d,U+2b404,U+2b410,U+2b413,U+2b461,U+2b4ef,U+2b4f6,U+2b4f9,U+2b50d-2b50e,U+2b536,U+2b5ae,U+2b5b3,U+2b5e7,U+2b5f4,U+2b61c-2b61d,U+2b626-2b628,U+2b62a,U+2b62c,U+2b695-2b696,U+2b6ad,U+2b6ed"}},{uri:jme,descriptors:{unicodeRange:"U+88bd-88c0,U+88c3-88c4,U+88c7-88c8,U+88ca-88cd,U+88cf-88d1,U+88d3,U+88d6-88d7,U+88da-88de,U+88e0-88e1,U+88e6-88e7,U+88e9-88ef,U+88f2,U+88f5-88f7,U+88fa-88fb,U+88fd,U+88ff-8901,U+8903-8909,U+890b-890f,U+8911,U+8914-8918,U+891c-8920,U+8922-8924,U+8926-8929,U+892c-892f,U+8931-8933,U+8935,U+8937-8940,U+8942-8943,U+8945-895d,U+8960-8965,U+8967-897a,U+897c-897e,U+8980,U+8982,U+8984-8985"}},{uri:Mge,descriptors:{unicodeRange:"U+4b0b-4ba0"}},{uri:Yme,descriptors:{unicodeRange:"U+7179,U+717b-717c,U+717e-7183,U+7185-7189,U+718b-718e,U+7190-7193,U+7195-7197,U+719a-719e,U+71a1-71a7,U+71a9-71ab,U+71ad-71b2,U+71b4,U+71b6-71b8,U+71ba-71c2,U+71c4-71cd,U+71cf-71d3,U+71d6-71df,U+71e1-71e4,U+71e6,U+71e8-71ed,U+71ef-71f8,U+71fa-7205,U+7207-721c,U+721e-7227,U+7229,U+722b,U+722d"}},{uri:Wme,descriptors:{unicodeRange:"U+982e-9874,U+988b,U+988e,U+9892,U+9895,U+9899,U+98a3,U+98a8-98cd,U+98cf-98d0,U+98d4,U+98d6-98d7,U+98db-98dd,U+98e0-98e6,U+98e9-98fa"}},{uri:Kme,descriptors:{unicodeRange:"U+7c14-7c15,U+7c17-7c1e,U+7c20-7c25,U+7c28-7c29,U+7c2b-7c37,U+7c39-7c3e,U+7c42-7c4c,U+7c4e-7c72,U+7c75-7c7a,U+7c7e-7c88,U+7c8a-7c90,U+7c93-7c94,U+7c96,U+7c99-7c9b,U+7ca0-7ca1,U+7ca3,U+7ca6-7ca9,U+7cab-7cad,U+7caf-7cb0,U+7cb4-7cb8,U+7cba-7cbb,U+7cbf-7cc0,U+7cc2-7cc4,U+7cc6,U+7cc9,U+7ccb,U+7cce-7cd4"}},{uri:Zme,descriptors:{unicodeRange:"U+7d95-7da5,U+7da7-7dad,U+7daf-7e2a"}},{uri:qme,descriptors:{unicodeRange:"U+4a78-4b0a"}},{uri:Qme,descriptors:{unicodeRange:"U+9b30-9b31,U+9b33-9b3a,U+9b3d-9b40,U+9b46,U+9b4a-9b4c,U+9b4e,U+9b50,U+9b52-9b53,U+9b55-9bcf"}},{uri:Jme,descriptors:{unicodeRange:"U+6a4b-6a4f,U+6a51-6a57,U+6a5a,U+6a5c-6a60,U+6a62-6a64,U+6a66-6a70,U+6a72-6a78,U+6a7a-6a7b,U+6a7d-6a7f,U+6a81-6a83,U+6a85-6a8d,U+6a8f,U+6a92-6a96,U+6a98-6a9f,U+6aa1-6aa8,U+6aaa,U+6aad-6aef"}},{uri:epe,descriptors:{unicodeRange:"U+99c9-9a53"}},{uri:tpe,descriptors:{unicodeRange:"U+8550-8555,U+8557-8558,U+855a-855d,U+855f-8563,U+8565-8567,U+8569-8571,U+8573,U+8575-8578,U+857c-857d,U+857f-8583,U+8586,U+8588-858e,U+8590-859a,U+859d-85a3,U+85a5-85a7,U+85a9,U+85ab-85ad,U+85b1-85b6,U+85b8,U+85ba-85c0,U+85c2-85c8,U+85ca-85ce,U+85d1-85d2,U+85d4,U+85d6-85db,U+85dd-85e3,U+85e5-85e8,U+85ea-85fa,U+85fc-85fe,U+8600-8603"}},{uri:npe,descriptors:{unicodeRange:"U+6fb2,U+6fb4-6fb5,U+6fb7-6fb8,U+6fba-6fbf,U+6fc1,U+6fc3-6fc8,U+6fca-6fd0,U+6fd3-6fdd,U+6fdf,U+6fe2-6fed,U+6ff0-7010,U+7012-7019,U+701c-7022,U+7024-7034,U+7036-7038,U+703a-704b,U+704d-704e,U+7050-7053"}},{uri:ipe,descriptors:{unicodeRange:"U+4ba1-4c2c"}},{uri:rpe,descriptors:{unicodeRange:"U+9a54-9a6b,U+9a72,U+9a83,U+9a89,U+9a8d-9a8e,U+9a94-9a95,U+9a99,U+9aa6,U+9aa9-9aaf,U+9ab2-9ab5,U+9ab9,U+9abb,U+9abd-9abf,U+9ac3-9ac4,U+9ac6-9aca,U+9acd-9ad0,U+9ad2,U+9ad4-9ad7,U+9ad9-9ade,U+9ae0,U+9ae2-9ae5,U+9ae7-9aea,U+9aec,U+9aee,U+9af0-9af8,U+9afa,U+9afc-9b02,U+9b04-9b07,U+9b09-9b0e,U+9b10-9b12,U+9b14-9b1e,U+9b20-9b22,U+9b24-9b2e"}},{uri:spe,descriptors:{unicodeRange:"U+9d1a-9da1"}},{uri:ope,descriptors:{unicodeRange:"U+9e13-9e1e,U+9e24,U+9e27,U+9e2e,U+9e30,U+9e34,U+9e3b-9e3c,U+9e40,U+9e4d,U+9e50,U+9e52-9e54,U+9e56,U+9e59,U+9e5d,U+9e5f-9e62,U+9e65,U+9e6e-9e6f,U+9e72,U+9e74-9e7d,U+9e80-9e81,U+9e83-9e86,U+9e89-9e8a,U+9e8c-9e91,U+9e94-9e9c,U+9e9e,U+9ea0-9ea5,U+9ea7-9eb3,U+9eb5-9eb7,U+9eb9-9eba,U+9ebc,U+9ebf-9ec3,U+9ec5-9ec8,U+9eca-9ecc,U+9ed0,U+9ed2-9ed3,U+9ed5-9ed7,U+9ed9-9eda,U+9ede,U+9ee1,U+9ee3-9ee4,U+9ee6,U+9ee8,U+9eeb-9eee,U+9ef0-9ef8"}},{uri:ape,descriptors:{unicodeRange:"U+8b1c-8b25,U+8b27-8b65,U+8b67-8b6b,U+8b6d-8b9f,U+8bac,U+8bb1,U+8bbb,U+8bc7,U+8bd0"}},{uri:lpe,descriptors:{unicodeRange:"U+4cad-4d2f"}},{uri:cpe,descriptors:{unicodeRange:"U+9c4b-9c7b,U+9c7d-9c7e,U+9c80,U+9c83-9c84,U+9c89-9c8a,U+9c8c,U+9c8f,U+9c93,U+9c96-9c99,U+9c9d,U+9caa,U+9cac,U+9caf,U+9cb9,U+9cbe-9cc2,U+9cc8-9cc9,U+9cd1-9cd2,U+9cda-9cdb,U+9ce0-9ce1,U+9ce3-9d19"}},{uri:upe,descriptors:{unicodeRange:"U+9389-938e,U+9390-93c9,U+93cb-93d5,U+93d7-9410"}},{uri:Lme,descriptors:{unicodeRange:"U+20a0-20b5,U+20b9-20ba,U+20bc-20bd,U+4e2c,U+5107,U+5216,U+5293,U+54f3,U+5523,U+5819,U+5adc,U+5c88,U+5e3b,U+5fee,U+62f6,U+63be,U+6484,U+6499,U+67d9,U+67dd,U+6d5e,U+6f46,U+717a,U+71e0,U+72c1,U+73e7,U+75b0,U+7603,U+7722,U+7809,U+7811,U+7946,U+7967,U+799a,U+7b45,U+7ba2,U+8014,U+80d9,U+8159,U+817d,U+81a3,U+81aa,U+8201,U+833c,U+836e,U+83e5,U+8459,U+84f0,U+8729,U+8753,U+87d3,U+89dc,U+8bf6,U+8c2e,U+8e2c,U+8e9c,U+8e9e,U+8ece,U+8fee,U+9139,U+914f,U+9174,U+9191,U+960c,U+9622,U+9a98,U+9b48,U+9ca6,U+9cb0,U+9da2-9e12,U+9e88,U+9f44,U+9f86"}},{uri:dpe,descriptors:{unicodeRange:"U+9bd0-9c4a"}},{uri:fpe,descriptors:{unicodeRange:"U+4c2d-4cac"}},{uri:hpe,descriptors:{unicodeRange:"U+4d30-4dab"}},{uri:gpe,descriptors:{unicodeRange:"U+9411-943d,U+943f-946a,U+946c-9484"}},{uri:mpe,descriptors:{unicodeRange:"U+9efa,U+9efd,U+9eff-9f0a,U+9f0c,U+9f0f,U+9f11-9f12,U+9f14-9f16,U+9f18,U+9f1a-9f1f,U+9f21,U+9f23-9f2b,U+9f2d-9f2e,U+9f30-9f36,U+9f38,U+9f3a,U+9f3c,U+9f3f-9f43,U+9f45-9f4f,U+9f52-9f7e,U+9f81-9f82,U+9f8d-9f94"}},{uri:ppe,descriptors:{unicodeRange:"U+7e2b-7e3a,U+7e3c-7e40,U+7e42-7e46,U+7e48-7e81,U+7e83-7e9a,U+7e9c-7e9e,U+7eae,U+7eb4,U+7ebb-7ebc,U+7ed6,U+7ee4,U+7eec,U+7ef9,U+7f0a,U+7f10,U+7f1e,U+7f37,U+7f39,U+7f3b"}}],qe=class qe{constructor(t){F(this,"scene");F(this,"getSceneFamilies",()=>qe.getUniqueFamilies(this.scene.getNonDeletedElements()));F(this,"onLoaded",t=>{let n=!0;for(const s of t){const o=`${s.family}-${s.style}-${s.weight}-${s.unicodeRange}`;qe.loadedFontsCache.has(o)||(qe.loadedFontsCache.add(o),n=!1)}if(n)return;let i=!1;const r=this.scene.getNonDeletedElementsMap();for(const s of this.scene.getNonDeletedElements())if(ue(s)){i=!0,Xt.delete(s),Hm.clearCache(Ct(s));const o=ui(s,r);o&&Xt.delete(o)}i&&this.scene.triggerUpdate()});F(this,"loadSceneFonts",async()=>{const t=this.getSceneFamilies(),n=qe.getCharsPerFamily(this.scene.getNonDeletedElements());return qe.loadFontFaces(t,n)});this.scene=t}static get registered(){return qe._registered?qe._initialized||(qe._registered=new Map([...qe.init().entries(),...qe._registered.entries()])):qe._registered=qe.init(),qe._registered}get registered(){return qe.registered}static async generateFontFaceDeclarations(t){const n=qe.getUniqueFamilies(t),i=qe.getCharsPerFamily(t),r=n.find(l=>uP(l).includes(Sf));if(r){const l=qe.getCharacters(i,r);if(ose(l)){const c=If[Sf];i[c]=new Set(l),n.unshift(If[Sf])}}const s=qe.fontFacesStylesGenerator(n,i),o=3,a=await new Ax(s,o).all();return Array.from(new Set(a))}static async loadFontFaces(t,n){for(const{fontFaces:o,metadata:a}of qe.registered.values())if(!a.local)for(const{fontFace:l}of o)window.document.fonts.has(l)||window.document.fonts.add(l);const i=qe.fontFacesLoader(t,n),r=10;return(await new Ax(i,r).all()).flat().filter(Boolean)}static*fontFacesLoader(t,n){for(const[i,r]of t.entries()){const s=Ct({fontFamily:r,fontSize:16}),o=qe.getCharacters(n,r);window.document.fonts.check(s,o)||(yield vc(async()=>{var a;try{const l=await window.document.fonts.load(s,o);return[i,l]}catch(l){console.error(`Failed to load font "${s}" from urls "${(a=qe.registered.get(r))==null?void 0:a.fontFaces.map(c=>c.urls)}"`,l)}}))}}static*fontFacesStylesGenerator(t,n){for(const[i,r]of t.entries()){const{fontFaces:s,metadata:o}=qe.registered.get(r)??{};if(!Array.isArray(s)){console.error(`Couldn't find registered fonts for font-family "${r}"`,qe.registered);continue}if(!(o!=null&&o.local))for(const[a,l]of s.entries())yield vc(async()=>{try{const c=qe.getCharacters(n,r),u=await l.toCSS(c);return u?[i*1e4+a,u]:void 0}catch(c){console.error(`Couldn't transform font-face to css for family "${l.fontFace.family}"`,c)}})}}static register(t,n,...i){const r=It[t]??If[t];return this.registered.get(r)||this.registered.set(r,{metadata:n,fontFaces:i.map(({uri:o,descriptors:a})=>new KE(t,o,a))}),this.registered}static init(){const t={registered:new Map},n=(i,...r)=>{const s=It[i]??If[i],o=ph[s]??ph[It.Excalifont];qe.register.call(t,i,o,...r)};return n("Cascadia",...Ghe),n("Comic Shanns",...Khe),n("Excalifont",...cge),n("Helvetica",...uge),n("Liberation Sans",...fge),n("Lilita One",...mge),n("Nunito",...vge),n("Virgil",...wge),n(Sf,...Upe),n(A0,...Zhe),qe._initialized=!0,t.registered}static getUniqueFamilies(t){return Array.from(t.reduce((n,i)=>(ue(i)&&n.add(i.fontFamily),n),new Set))}static getCharsPerFamily(t){const n={};for(const i of t)if(ue(i))for(const r of i.originalText)n[i.fontFamily]||(n[i.fontFamily]=new Set),n[i.fontFamily].add(r);return n}static getCharacters(t,n){return t[n]?Array.from(t[n]).join(""):""}static getAllFamilies(){return Array.from(qe.registered.keys())}};F(qe,"loadedFontsCache",new Set),F(qe,"_registered"),F(qe,"_initialized",!1),F(qe,"loadElementsFonts",async t=>{const n=qe.getUniqueFamilies(t),i=qe.getCharsPerFamily(t);return qe.loadFontFaces(n,i)});let Pa=qe;const ZH=se.forwardRef(({className:e,placeholder:t,onChange:n},i)=>P("div",{className:me("QuickSearch__wrapper",e),children:[rd,g("input",{ref:i,className:"QuickSearch__input",type:"text",placeholder:t,onChange:r=>n(r.target.value.trim().toLowerCase())})]})),qH=({className:e,placeholder:t,children:n})=>{const i=!N.Children.count(n);return g("div",{className:me("ScrollableList__wrapper",e),role:"menu",children:i?g("div",{className:"empty",children:t}):n})},Ob=({children:e,className:t="",style:n,title:i})=>P("div",{className:`dropdown-menu-group ${t}`,style:n,children:[i&&g("p",{className:"dropdown-menu-group-title",children:i}),e]});Ob.displayName="DropdownMenuGroup";const QH=({textStyle:e,icon:t,shortcut:n,children:i})=>{const r=qn();return P(ge,{children:[t&&g("div",{className:"dropdown-menu-item__icon",children:t}),g("div",{style:e,className:"dropdown-menu-item__text",children:i}),n&&!r.editor.isMobile&&g("div",{className:"dropdown-menu-item__shortcut",children:n})]})},JH=se.createContext({}),eV=(e="",t=!1,n=!1)=>`dropdown-menu-item dropdown-menu-item-base ${e}
  ${t?"dropdown-menu-item--selected":""} ${n?"dropdown-menu-item--hovered":""}`.trim(),tV=(e,t)=>{const n=N.useContext(JH);return X6(e,i=>{var s;const r=new CustomEvent(te.MENU_ITEM_SELECT,{bubbles:!0,cancelable:!0});t==null||t(r),r.defaultPrevented||(s=n.onSelect)==null||s.call(n,r)})},Er=({icon:e,value:t,order:n,children:i,shortcut:r,className:s,hovered:o,selected:a,textStyle:l,onSelect:c,onClick:u,...d})=>{const f=tV(u,c),h=N.useRef(null);return N.useEffect(()=>{var m,p;o&&(n===0?(m=h.current)==null||m.scrollIntoView({block:"end"}):(p=h.current)==null||p.scrollIntoView({block:"nearest"}))},[o,n]),g("button",{...d,ref:h,value:t,onClick:f,className:eV(s,a,o),title:d.title??d["aria-label"],children:g(QH,{textStyle:l,icon:e,shortcut:r,children:i})})};Er.displayName="DropdownMenuItem";const f1={GREEN:"green",RED:"red",BLUE:"blue"},C_=({type:e=f1.BLUE,children:t})=>{const{theme:n}=np(),i={display:"inline-flex",marginLeft:"auto",padding:"2px 4px",borderRadius:6,fontSize:9,fontFamily:"Cascadia, monospace",border:n===xe.LIGHT?"1.5px solid white":"none"};switch(e){case f1.GREEN:Object.assign(i,{backgroundColor:"var(--background-color-badge)",color:"var(--color-badge)"});break;case f1.RED:Object.assign(i,{backgroundColor:"pink",color:"darkred"});break;case f1.BLUE:default:Object.assign(i,{background:"var(--color-promo)",color:"var(--color-surface-lowest)"})}return g("div",{className:"DropDownMenuItemBadge",style:i,children:t})};C_.displayName="DropdownMenuItemBadge";Er.Badge=C_;const bpe=({event:e,inputRef:t,hoveredFont:n,filteredFonts:i,onClose:r,onSelect:s,onHover:o})=>{var a,l,c;if(!e[z.CTRL_OR_CMD]&&e.shiftKey&&e.key.toLowerCase()===z.F)return(a=t.current)==null||a.focus(),!0;if(e.key===z.ESCAPE)return r(),!0;if(e.key===z.ENTER)return n!=null&&n.value&&s(n.value),!0;if(e.key===z.ARROW_DOWN)return n!=null&&n.next?o(n.next.value):(l=i[0])!=null&&l.value&&o(i[0].value),!0;if(e.key===z.ARROW_UP)return n!=null&&n.prev?o(n.prev.value):(c=i[i.length-1])!=null&&c.value&&o(i[i.length-1].value),!0},ype=e=>{switch(e){case It.Excalifont:case It.Virgil:return l5;case It.Nunito:case It.Helvetica:return BE;case It["Lilita One"]:return Yce;case It["Comic Shanns"]:case It.Cascadia:return xz;default:return BE}},Epe=se.memo(({selectedFontFamily:e,hoveredFontFamily:t,onSelect:n,onHover:i,onLeave:r,onOpen:s,onClose:o})=>{const{container:a}=Zo(),{fonts:l}=ao(),{showDeprecatedFonts:c}=tp(),[u,d]=N.useState(""),f=N.useRef(null),h=N.useMemo(()=>Array.from(Pa.registered.entries()).filter(([T,{metadata:A}])=>!A.serverSide&&!A.fallback).map(([T,{metadata:A,fontFaces:I}])=>{var D,L;const R={value:T,icon:ype(T),text:((L=(D=I[0])==null?void 0:D.fontFace)==null?void 0:L.family)??"Unknown"};return A.deprecated&&Object.assign(R,{deprecated:A.deprecated,badge:{type:f1.RED,placeholder:k("fontList.badge.old")}}),R}).sort((T,A)=>T.text.toLowerCase()>A.text.toLowerCase()?1:-1),[]),m=N.useMemo(()=>new Set(l.getSceneFamilies()),[e]),p=N.useMemo(()=>h.filter(T=>m.has(T.value)),[h,m]),b=N.useMemo(()=>h.filter(T=>!m.has(T.value)&&(c||!T.deprecated)),[h,m,c]),E=N.useMemo(()=>Aie([...p,...b].filter(T=>{var A;return(A=T.text)==null?void 0:A.toLowerCase().includes(u)})),[p,b,u]),y=N.useMemo(()=>{var A;let T;return t?T=E.find(I=>I.value===t):e&&(T=E.find(I=>I.value===e)),!T&&u&&((A=E[0])!=null&&A.value?i(E[0].value):r()),T},[t,e,u,E,i,r]),v=N.useCallback(T=>{bpe({event:T,inputRef:f,hoveredFont:y,filteredFonts:E,onSelect:n,onHover:i,onClose:o})&&(T.preventDefault(),T.stopPropagation())},[y,E,n,i,o]);N.useEffect(()=>(s(),()=>{o()}),[]);const _=N.useMemo(()=>E.filter(T=>m.has(T.value)),[E,m]),S=N.useMemo(()=>E.filter(T=>!m.has(T.value)),[E,m]),M=(T,A)=>P(Er,{icon:T.icon,value:T.value,order:A,textStyle:{fontFamily:Om({fontFamily:T.value})},hovered:T.value===(y==null?void 0:y.value),selected:T.value===e,tabIndex:T.value===e?0:-1,onClick:I=>{n(Number(I.currentTarget.value))},onMouseMove:()=>{(y==null?void 0:y.value)!==T.value&&i(T.value)},children:[T.text,T.badge&&g(C_,{type:T.badge.type,children:T.badge.placeholder})]},T.value),w=[];return _.length&&w.push(g(Ob,{title:k("fontList.sceneFonts"),children:_.map(M)},"group_1")),S.length&&w.push(g(Ob,{title:k("fontList.availableFonts"),children:S.map((T,A)=>M(T,A+_.length))},"group_2")),P(WH,{className:"properties-content",container:a,style:{width:"15rem"},onClose:o,onPointerLeave:r,onKeyDown:v,children:[g(ZH,{ref:f,placeholder:k("quickSearch.placeholder"),onChange:$a(d,20)}),g(qH,{className:"dropdown-menu fonts manual-hover",placeholder:k("fontList.empty"),children:w.length?w:null})]})},(e,t)=>e.selectedFontFamily===t.selectedFontFamily&&e.hoveredFontFamily===t.hoveredFontFamily),vpe=({selectedFontFamily:e})=>{const t=N.useMemo(()=>!!(e&&!wpe(e)),[e]);return g(U5,{asChild:!0,children:g("div",{children:g(Wz,{standalone:!0,icon:yz,title:k("labels.showFonts"),className:"properties-trigger",testId:"font-family-show-fonts",active:t,onClick:()=>{}})})})},nV=[{value:It.Excalifont,icon:l5,text:k("labels.handDrawn"),testId:"font-family-hand-drawn"},{value:It.Nunito,icon:BE,text:k("labels.normal"),testId:"font-family-normal"},{value:It["Comic Shanns"],icon:xz,text:k("labels.code"),testId:"font-family-code"}],_pe=new Set(nV.map(e=>e.value)),wpe=e=>e?_pe.has(e):!1,Tpe=se.memo(({isOpened:e,selectedFontFamily:t,hoveredFontFamily:n,onSelect:i,onHover:r,onLeave:s,onPopupChange:o})=>{const a=N.useMemo(()=>nV,[]),l=N.useCallback(c=>{c&&i(c)},[i]);return P("div",{role:"dialog","aria-modal":"true",className:"FontPicker__container",children:[g(Wo,{type:"button",options:a,value:t,onClick:l}),g(XH,{}),P(p5,{open:e,onOpenChange:o,children:[g(vpe,{selectedFontFamily:t}),e&&g(Epe,{selectedFontFamily:t,hoveredFontFamily:n,onSelect:l,onHover:r,onLeave:s,onOpen:()=>o(!0),onClose:()=>o(!1)})]})]})},(e,t)=>e.isOpened===t.isOpened&&e.selectedFontFamily===t.selectedFontFamily&&e.hoveredFontFamily===t.hoveredFontFamily),v5=({icon:e})=>g("span",{style:{width:"1em",margin:"0 0.5ex 0 0.5ex",display:"inline-block",lineHeight:0,verticalAlign:"middle"},children:e}),ZE=({label:e,open:t,openTrigger:n,children:i,className:r})=>P(ge,{children:[P("div",{style:{cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center"},className:r,onClick:n,children:[e,g(v5,{icon:t?Mue:Fz})]}),t&&g("div",{style:{display:"flex",flexDirection:"column"},children:i})]}),Spe=Jt(!1);function Ipe({options:e,value:t,label:n,onChange:i,onClose:r,numberOfOptionsToAlwaysShow:s=e.length}){const o=qn(),a=h=>{const m=e.find(p=>p.keyBinding===h.key.toLowerCase());if(!(h.metaKey||h.altKey||h.ctrlKey)&&m)i(m.value),h.preventDefault();else if(h.key===z.TAB){const p=e.findIndex(E=>E.value===t),b=h.shiftKey?(e.length+p-1)%e.length:(p+1)%e.length;i(e[b].value)}else if(c1(h.key)){const p=z0().rtl,b=e.findIndex(E=>E.value===t);if(b!==-1){const E=e.length;let y=b;switch(h.key){case(p?z.ARROW_LEFT:z.ARROW_RIGHT):y=(b+1)%E;break;case(p?z.ARROW_RIGHT:z.ARROW_LEFT):y=(E+b-1)%E;break;case z.ARROW_DOWN:{y=(b+(s??1))%E;break}case z.ARROW_UP:{y=(E+b-(s??1))%E;break}}i(e[y].value)}h.preventDefault()}else(h.key===z.ESCAPE||h.key===z.ENTER)&&(h.preventDefault(),r());h.nativeEvent.stopImmediatePropagation(),h.stopPropagation()},[l,c]=hn(Spe),u=se.useMemo(()=>e.slice(0,s),[e,s]),d=se.useMemo(()=>e.slice(s),[e,s]);N.useEffect(()=>{u.some(h=>h.value===t)||c(!0)},[t,u,c]);const f=h=>g("div",{className:"picker-content",children:h.map((m,p)=>P("button",{type:"button",className:me("picker-option",{active:t===m.value}),onClick:b=>{i(m.value)},title:`${m.text} ${m.keyBinding&&`— ${m.keyBinding.toUpperCase()}`}`,"aria-label":m.text||"none","aria-keyshortcuts":m.keyBinding||void 0,ref:b=>{t===m.value&&setTimeout(()=>{b==null||b.focus()},0)},children:[m.icon,m.keyBinding&&g("span",{className:"picker-keybinding",children:m.keyBinding})]},m.text))});return g(__,{side:o.editor.isMobile&&!o.viewport.isLandscape?"top":"bottom",align:"start",sideOffset:12,style:{zIndex:"var(--zIndex-popup)"},onKeyDown:a,children:P("div",{className:"picker",role:"dialog","aria-modal":"true","aria-label":n,children:[f(u),d.length>0&&g(ZE,{label:k("labels.more_options"),open:l,openTrigger:()=>{c(h=>!h)},className:"picker-collapsible",children:f(d)})]})})}function FA({value:e,label:t,options:n,onChange:i,group:r="",numberOfOptionsToAlwaysShow:s}){var c;const[o,a]=se.useState(!1),l=se.useRef(null);return g("div",{children:P(p5,{open:o,onOpenChange:u=>a(u),children:[g(U5,{name:r,type:"button","aria-label":t,onClick:()=>a(!o),ref:l,className:o?"active":"",children:(c=n.find(u=>u.value===e))==null?void 0:c.icon}),o&&g(Ipe,{options:n,value:e,label:t,onChange:i,onClose:()=>{a(!1)},numberOfOptionsToAlwaysShow:s})]})})}const xpe=({updateData:e,appState:t,elements:n,testId:i})=>{const r=se.useRef(null),s=se.useRef(null),o=tr(n,t,a=>a.opacity,!0,t.currentItemOpacity);return N.useEffect(()=>{if(r.current&&s.current){const a=r.current,l=s.current,c=a.offsetWidth,u=15,d=o/100*(c-u)+u/2;l.style.left=`${d}px`,a.style.background=`linear-gradient(to right, var(--color-slider-track) 0%, var(--color-slider-track) ${o}%, var(--button-bg) ${o}%, var(--button-bg) 100%)`}},[o]),P("label",{className:"control-label",children:[k("labels.opacity"),P("div",{className:"range-wrapper",children:[g("input",{ref:r,type:"range",min:"0",max:"100",step:"10",onChange:a=>{e(+a.target.value)},value:o,className:"range-input","data-testid":i}),g("div",{className:"value-bubble",ref:s,children:o!==0?o:null}),g("div",{className:"zero-label",children:"0"})]})]})},iV=.1,er=(e,t,n,i=!1)=>{const r=Se(Be(e,t,{includeBoundTextElement:i}));return e.map(s=>{var o;return r.get(s.id)||s.id===((o=t.editingTextElement)==null?void 0:o.id)?n(s):s})},tr=function(e,t,n,i,r){const s=t.editingTextElement,o=Nt(e);let a=null;return s&&(a=n(s)),a||(Fn(o,t)?a=boe(i===!0?o:o.filter(c=>i(c)),t,n)??(typeof r=="function"?r(!0):r):a=typeof r=="function"?r(!1):r),a},Cpe=(e,t)=>jt(t)||!t.autoResize?t:ee(t,{x:e.textAlign==="left"?e.x:e.x+(e.width-t.width)/(e.textAlign==="center"?2:1),y:e.y+(e.height-t.height)/2},!1),A_=(e,t,n,i,r)=>{const s=new Set,o=er(e,t,l=>{if(ue(l)){const c=i(l);s.add(c);let u=Ce(l,{fontSize:c});return Ji(u,n.scene.getContainerElement(l),n.scene.getNonDeletedElementsMap()),u=Cpe(l,u),u}return l},!0),a=Se(o);return Be(e,t,{includeBoundTextElement:!0}).forEach(l=>{ue(l)&&pr(l,a)}),{elements:o,appState:{...t,currentItemFontSize:s.size===1?[...s][0]:r??t.currentItemFontSize},captureUpdate:Z.IMMEDIATELY}};oe({name:"changeStrokeColor",label:"labels.stroke",trackEvent:!1,perform:(e,t,n)=>({...n.currentItemStrokeColor&&{elements:er(e,t,i=>UE(i.type)?Ce(i,{strokeColor:n.currentItemStrokeColor}):i,!0)},appState:{...t,...n},captureUpdate:n.currentItemStrokeColor?Z.IMMEDIATELY:Z.EVENTUALLY}),PanelComponent:({elements:e,appState:t,updateData:n,appProps:i})=>P(ge,{children:[g("h3",{"aria-hidden":"true",children:k("labels.stroke")}),g(I_,{topPicks:rP,palette:vne,type:"elementStroke",label:k("labels.stroke"),color:tr(e,t,r=>r.strokeColor,!0,t.currentItemStrokeColor),onChange:r=>n({currentItemStrokeColor:r}),elements:e,appState:t,updateData:n})]})});oe({name:"changeBackgroundColor",label:"labels.changeBackground",trackEvent:!1,perform:(e,t,n)=>({...n.currentItemBackgroundColor&&{elements:er(e,t,i=>Ce(i,{backgroundColor:n.currentItemBackgroundColor}))},appState:{...t,...n},captureUpdate:n.currentItemBackgroundColor?Z.IMMEDIATELY:Z.EVENTUALLY}),PanelComponent:({elements:e,appState:t,updateData:n,appProps:i})=>P(ge,{children:[g("h3",{"aria-hidden":"true",children:k("labels.background")}),g(I_,{topPicks:sP,palette:_ne,type:"elementBackground",label:k("labels.background"),color:tr(e,t,r=>r.backgroundColor,!0,t.currentItemBackgroundColor),onChange:r=>n({currentItemBackgroundColor:r}),elements:e,appState:t,updateData:n})]})});oe({name:"changeFillStyle",label:"labels.fill",trackEvent:!1,perform:(e,t,n,i)=>(ct("element","changeFillStyle",`${n} (${i.device.editor.isMobile?"mobile":"desktop"})`),{elements:er(e,t,r=>Ce(r,{fillStyle:n})),appState:{...t,currentItemFillStyle:n},captureUpdate:Z.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n})=>{const i=Be(e,t),r=i.length>0&&i.every(s=>s.fillStyle==="zigzag");return P("fieldset",{children:[g("legend",{children:k("labels.fill")}),g(Wo,{type:"button",options:[{value:"hachure",text:`${k(r?"labels.zigzag":"labels.hachure")} (${Q("Alt-Click")})`,icon:r?yce:Ece,active:r?!0:void 0,testId:"fill-hachure"},{value:"cross-hatch",text:k("labels.crossHatch"),icon:vce,testId:"fill-cross-hatch"},{value:"solid",text:k("labels.solid"),icon:_ce,testId:"fill-solid"}],value:tr(e,t,s=>s.fillStyle,s=>s.hasOwnProperty("fillStyle"),s=>s?null:t.currentItemFillStyle),onClick:(s,o)=>{const a=o.altKey&&s==="hachure"&&i.every(l=>l.fillStyle==="hachure")?"zigzag":s;n(a)}})]})}});oe({name:"changeStrokeWidth",label:"labels.strokeWidth",trackEvent:!1,perform:(e,t,n)=>({elements:er(e,t,i=>Ce(i,{strokeWidth:n})),appState:{...t,currentItemStrokeWidth:n},captureUpdate:Z.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n})=>P("fieldset",{children:[g("legend",{children:k("labels.strokeWidth")}),g(Wo,{group:"stroke-width",options:[{value:h8.thin,text:k("labels.thin"),icon:Iz,testId:"strokeWidth-thin"},{value:h8.bold,text:k("labels.bold"),icon:wce,testId:"strokeWidth-bold"},{value:h8.extraBold,text:k("labels.extraBold"),icon:Tce,testId:"strokeWidth-extraBold"}],value:tr(e,t,i=>i.strokeWidth,i=>i.hasOwnProperty("strokeWidth"),i=>i?null:t.currentItemStrokeWidth),onChange:i=>n(i)})]})});oe({name:"changeSloppiness",label:"labels.sloppiness",trackEvent:!1,perform:(e,t,n)=>({elements:er(e,t,i=>Ce(i,{seed:Ga(),roughness:n})),appState:{...t,currentItemRoughness:n},captureUpdate:Z.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n})=>P("fieldset",{children:[g("legend",{children:k("labels.sloppiness")}),g(Wo,{group:"sloppiness",options:[{value:0,text:k("labels.architect"),icon:xce},{value:1,text:k("labels.artist"),icon:Cce},{value:2,text:k("labels.cartoonist"),icon:Ace}],value:tr(e,t,i=>i.roughness,i=>i.hasOwnProperty("roughness"),i=>i?null:t.currentItemRoughness),onChange:i=>n(i)})]})});oe({name:"changeStrokeStyle",label:"labels.strokeStyle",trackEvent:!1,perform:(e,t,n)=>({elements:er(e,t,i=>Ce(i,{strokeStyle:n})),appState:{...t,currentItemStrokeStyle:n},captureUpdate:Z.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n})=>P("fieldset",{children:[g("legend",{children:k("labels.strokeStyle")}),g(Wo,{group:"strokeStyle",options:[{value:"solid",text:k("labels.strokeStyle_solid"),icon:Iz},{value:"dashed",text:k("labels.strokeStyle_dashed"),icon:Sce},{value:"dotted",text:k("labels.strokeStyle_dotted"),icon:Ice}],value:tr(e,t,i=>i.strokeStyle,i=>i.hasOwnProperty("strokeStyle"),i=>i?null:t.currentItemStrokeStyle),onChange:i=>n(i)})]})});oe({name:"changeOpacity",label:"labels.opacity",trackEvent:!1,perform:(e,t,n)=>({elements:er(e,t,i=>Ce(i,{opacity:n}),!0),appState:{...t,currentItemOpacity:n},captureUpdate:Z.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n})=>g(xpe,{updateData:n,elements:e,appState:t,testId:"opacity"})});oe({name:"changeFontSize",label:"labels.fontSize",trackEvent:!1,perform:(e,t,n,i)=>A_(e,t,i,()=>n,n),PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>P("fieldset",{children:[g("legend",{children:k("labels.fontSize")}),g(Wo,{group:"font-size",options:[{value:16,text:k("labels.small"),icon:$ce,testId:"fontSize-small"},{value:20,text:k("labels.medium"),icon:Gce,testId:"fontSize-medium"},{value:28,text:k("labels.large"),icon:Xce,testId:"fontSize-large"},{value:36,text:k("labels.veryLarge"),icon:jce,testId:"fontSize-veryLarge"}],value:tr(e,t,r=>{if(ue(r))return r.fontSize;const s=Pe(r,i.scene.getNonDeletedElementsMap());return s?s.fontSize:null},r=>ue(r)||Pe(r,i.scene.getNonDeletedElementsMap())!==null,r=>r?null:t.currentItemFontSize||ul),onChange:r=>n(r)})]})});const BA=oe({name:"decreaseFontSize",label:"labels.decreaseFontSize",icon:u5,trackEvent:!1,perform:(e,t,n,i)=>A_(e,t,i,r=>Math.round(1/(1+iV)*r.fontSize)),keyTest:e=>e[z.CTRL_OR_CMD]&&e.shiftKey&&(e.key===z.CHEVRON_LEFT||e.key===z.COMMA)}),zA=oe({name:"increaseFontSize",label:"labels.increaseFontSize",icon:u5,trackEvent:!1,perform:(e,t,n,i)=>A_(e,t,i,r=>Math.round(r.fontSize*(1+iV))),keyTest:e=>e[z.CTRL_OR_CMD]&&e.shiftKey&&(e.key===z.CHEVRON_RIGHT||e.key===z.PERIOD)});oe({name:"changeFontFamily",label:"labels.fontFamily",trackEvent:!1,perform:(e,t,n,i)=>{var m;const{cachedElements:r,resetAll:s,resetContainers:o,...a}=n;if(s)return{elements:er(e,t,b=>{const E=r==null?void 0:r.get(b.id);return E?Ce(b,{...E}):b},!0),appState:{...t,...a},captureUpdate:Z.NEVER};const{currentItemFontFamily:l,currentHoveredFontFamily:c}=n;let u=Z.EVENTUALLY,d,f=!1;if(l)d=l,u=Z.IMMEDIATELY;else if(c){d=c,u=Z.EVENTUALLY;const p=Be(e,t,{includeBoundTextElement:!0}).filter(b=>ue(b));if(p.length>200)f=!0;else{let b=0,E=0;for(;b<p.length&&E<5e3;){const y=p[b];E+=(y==null?void 0:y.originalText.length)||0,b++}E>5e3&&(f=!0)}}const h={appState:{...t,...a},captureUpdate:u};if(d&&!f){const p=new Map;let b=new Set,E=!1;const y=Array.from(Pa.loadedFontsCache.values()),v=(m=Object.entries(It).find(([M,w])=>w===d))==null?void 0:m[0];c&&v&&y.some(M=>M.startsWith(v))&&(E=!0),Object.assign(h,{elements:er(e,t,M=>{if(ue(M)&&(M.fontFamily!==d||l)){const w=Ce(M,{fontFamily:d,lineHeight:Ju(d)}),T=(r==null?void 0:r.get(M.containerId||""))||{},A=i.scene.getContainerElement(M);return o&&A&&T&&ee(A,{...T},!1),E||(b=new Set([...b,...Array.from(w.originalText)])),p.set(w,A),w}return M},!0)});const _=`10px ${Om({fontFamily:d})}`,S=Array.from(b.values()).join();if(E||window.document.fonts.check(_,S))for(const[M,w]of p)Ji(M,w,i.scene.getNonDeletedElementsMap(),!1);else window.document.fonts.load(_,S).then(M=>{for(const[w,T]of p){const A=i.scene.getElement(w.id),I=T?i.scene.getElement(T.id):null;A&&Ji(A,I,i.scene.getNonDeletedElementsMap(),!1)}i.fonts.onLoaded(M)})}return h},PanelComponent:({elements:e,appState:t,app:n,updateData:i})=>{const r=N.useRef(new Map),s=N.useRef(null),[o,a]=N.useState({}),l=N.useRef(!0),c=N.useMemo(()=>{var d;const u=(f,h)=>tr(f,t,m=>{if(ue(m))return m.fontFamily;const p=Pe(m,h);return p?p.fontFamily:null},m=>ue(m)||Pe(m,h)!==null,m=>m?null:t.currentItemFontFamily||Pc);return o.openPopup==="fontFamily"&&t.openPopup==="fontFamily"?u(Array.from(((d=r.current)==null?void 0:d.values())??[]),r.current):!o.openPopup&&t.openPopup!=="fontFamily"?u(e,n.scene.getNonDeletedElementsMap()):s.current},[o.openPopup,t,e,n.scene]);return N.useEffect(()=>{s.current=c},[c]),N.useEffect(()=>{Object.keys(o).length&&(i(o),a({}))},[o]),N.useEffect(()=>(l.current=!1,()=>{l.current=!0}),[]),P("fieldset",{children:[g("legend",{children:k("labels.fontFamily")}),g(Tpe,{isOpened:t.openPopup==="fontFamily",selectedFontFamily:c,hoveredFontFamily:t.currentHoveredFontFamily,onSelect:u=>{a({openPopup:null,currentHoveredFontFamily:null,currentItemFontFamily:u}),r.current.clear()},onHover:u=>{a({currentHoveredFontFamily:u,cachedElements:new Map(r.current),resetContainers:!0})},onLeave:()=>{a({currentHoveredFontFamily:null,cachedElements:new Map(r.current),resetAll:!0})},onPopupChange:u=>{if(u){r.current.clear();const{editingTextElement:d}=t;if((d==null?void 0:d.type)==="text"){const f=n.scene.getElement(d.id);r.current.set(d.id,Ce(f||d,{},!0))}else{const f=Be(e,t,{includeBoundTextElement:!0});for(const h of f)r.current.set(h.id,Ce(h,{},!0))}a({openPopup:"fontFamily"})}else{const d={openPopup:null,currentHoveredFontFamily:null,cachedElements:new Map(r.current),resetAll:!0};l.current?i({...o,...d}):a(d),r.current.clear()}}})]})}});oe({name:"changeTextAlign",label:"Change text alignment",trackEvent:!1,perform:(e,t,n,i)=>({elements:er(e,t,r=>{if(ue(r)){const s=Ce(r,{textAlign:n});return Ji(s,i.scene.getContainerElement(r),i.scene.getNonDeletedElementsMap()),s}return r},!0),appState:{...t,currentItemTextAlign:n},captureUpdate:Z.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>{const r=i.scene.getNonDeletedElementsMap();return P("fieldset",{children:[g("legend",{children:k("labels.textAlign")}),g(Wo,{group:"text-align",options:[{value:"left",text:k("labels.left"),icon:Wce,testId:"align-left"},{value:"center",text:k("labels.center"),icon:Kce,testId:"align-horizontal-center"},{value:"right",text:k("labels.right"),icon:Zce,testId:"align-right"}],value:tr(e,t,s=>{if(ue(s))return s.textAlign;const o=Pe(s,r);return o?o.textAlign:null},s=>ue(s)||Pe(s,r)!==null,s=>s?null:t.currentItemTextAlign),onChange:s=>n(s)})]})}});oe({name:"changeVerticalAlign",label:"Change vertical alignment",trackEvent:{category:"element"},perform:(e,t,n,i)=>({elements:er(e,t,r=>{if(ue(r)){const s=Ce(r,{verticalAlign:n});return Ji(s,i.scene.getContainerElement(r),i.scene.getNonDeletedElementsMap()),s}return r},!0),appState:{...t},captureUpdate:Z.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g("fieldset",{children:g(Wo,{group:"text-align",options:[{value:kr.TOP,text:k("labels.alignTop"),icon:g(qce,{theme:t.theme}),testId:"align-top"},{value:kr.MIDDLE,text:k("labels.centerVertically"),icon:g(Jce,{theme:t.theme}),testId:"align-middle"},{value:kr.BOTTOM,text:k("labels.alignBottom"),icon:g(Qce,{theme:t.theme}),testId:"align-bottom"}],value:tr(e,t,r=>{if(ue(r)&&r.containerId)return r.verticalAlign;const s=Pe(r,i.scene.getNonDeletedElementsMap());return s?s.verticalAlign:null},r=>ue(r)||Pe(r,i.scene.getNonDeletedElementsMap())!==null,r=>r?null:kr.MIDDLE),onChange:r=>n(r)})})});oe({name:"changeRoundness",label:"Change edge roundness",trackEvent:!1,perform:(e,t,n)=>({elements:er(e,t,i=>fe(i)?i:Ce(i,{roundness:n==="round"?{type:eg(i.type)?Nn.ADAPTIVE_RADIUS:Nn.PROPORTIONAL_RADIUS}:null})),appState:{...t,currentItemRoundness:n},captureUpdate:Z.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n})=>{const r=TF(Nt(e),t).some(s=>{var o;return((o=s.roundness)==null?void 0:o.type)===Nn.LEGACY});return P("fieldset",{children:[g("legend",{children:k("labels.edges")}),g(Wo,{group:"edges",options:[{value:"sharp",text:k("labels.sharp"),icon:Mce},{value:"round",text:k("labels.round"),icon:Rce}],value:tr(e,t,s=>r?null:s.roundness?"round":"sharp",s=>!ze(s)&&s.hasOwnProperty("roundness"),s=>s?null:t.currentItemRoundness),onChange:s=>n(s)})]})}});const HA=e=>[{value:null,text:k("labels.arrowhead_none"),keyBinding:"q",icon:kce},{value:"arrow",text:k("labels.arrowhead_arrow"),keyBinding:"w",icon:g(FE,{flip:e})},{value:"triangle",text:k("labels.arrowhead_triangle"),icon:g(Oce,{flip:e}),keyBinding:"e"},{value:"triangle_outline",text:k("labels.arrowhead_triangle_outline"),icon:g(Pce,{flip:e}),keyBinding:"r"},{value:"circle",text:k("labels.arrowhead_circle"),keyBinding:"a",icon:g(Lce,{flip:e})},{value:"circle_outline",text:k("labels.arrowhead_circle_outline"),keyBinding:"s",icon:g(Dce,{flip:e})},{value:"diamond",text:k("labels.arrowhead_diamond"),icon:g(Fce,{flip:e}),keyBinding:"d"},{value:"diamond_outline",text:k("labels.arrowhead_diamond_outline"),icon:g(Bce,{flip:e}),keyBinding:"f"},{value:"bar",text:k("labels.arrowhead_bar"),keyBinding:"z",icon:g(Nce,{flip:e})},{value:"crowfoot_one",text:k("labels.arrowhead_crowfoot_one"),icon:g(Hce,{flip:e}),keyBinding:"c"},{value:"crowfoot_many",text:k("labels.arrowhead_crowfoot_many"),icon:g(zce,{flip:e}),keyBinding:"x"},{value:"crowfoot_one_or_many",text:k("labels.arrowhead_crowfoot_one_or_many"),icon:g(Vce,{flip:e}),keyBinding:"v"}];oe({name:"changeArrowhead",label:"Change arrowheads",trackEvent:!1,perform:(e,t,n)=>({elements:er(e,t,i=>{if(ke(i)){const{position:r,type:s}=n;if(r==="start")return Ce(i,{startArrowhead:s});if(r==="end")return Ce(i,{endArrowhead:s})}return i}),appState:{...t,[n.position==="start"?"currentItemStartArrowhead":"currentItemEndArrowhead"]:n.type},captureUpdate:Z.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n})=>{const i=z0().rtl;return P("fieldset",{children:[g("legend",{children:k("labels.arrowheads")}),P("div",{className:"iconSelectList buttonList",children:[g(FA,{label:"arrowhead_start",options:HA(!i),value:tr(e,t,r=>ke(r)&&Tb(r.type)?r.startArrowhead:t.currentItemStartArrowhead,!0,t.currentItemStartArrowhead),onChange:r=>n({position:"start",type:r}),numberOfOptionsToAlwaysShow:4}),g(FA,{label:"arrowhead_end",group:"arrowheads",options:HA(!!i),value:tr(e,t,r=>ke(r)&&Tb(r.type)?r.endArrowhead:t.currentItemEndArrowhead,!0,t.currentItemEndArrowhead),onChange:r=>n({position:"end",type:r}),numberOfOptionsToAlwaysShow:4})]})]})}});oe({name:"changeArrowType",label:"Change arrow types",trackEvent:!1,perform:(e,t,n,i)=>{var a;const r=er(e,t,l=>{if(!ze(l))return l;let c=Ce(l,{roundness:n===ei.round?{type:Nn.PROPORTIONAL_RADIUS}:null,elbowed:n===ei.elbow,points:n===ei.elbow||l.elbowed?[l.points[0],l.points[l.points.length-1]]:l.points});if(fe(c)){c.fixedSegments=null;const u=i.scene.getNonDeletedElementsMap();i.dismissLinearEditor();const d=ce.getPointAtIndexGlobalCoordinates(c,0,u),f=ce.getPointAtIndexGlobalCoordinates(c,-1,u),h=!c.startBinding&&Bs(Ps(d),e,u,t.zoom,!1,!0),m=!c.endBinding&&Bs(Ps(f),e,u,t.zoom,!1,!0),p=h||c.startBinding&&u.get(c.startBinding.elementId),b=m||c.endBinding&&u.get(c.endBinding.elementId),E=h?O0(c,h,"start"):d,y=m?O0(c,m,"end"):f;h&&as(c,h,"start",u),m&&as(c,m,"end",u);const v=p&&c.startBinding?{...c.startBinding,...bb(c,p,"start")}:null,_=b&&c.endBinding?{...c.endBinding,...bb(c,b,"end")}:null;c={...c,startBinding:v,endBinding:_,...tg(c,u,{points:[E,y].map(S=>C(S[0]-c.x,S[1]-c.y)),startBinding:v,endBinding:_,fixedSegments:null})},ce.updateEditorMidPointsCache(c,u,i.state)}else{const u=i.scene.getNonDeletedElementsMap();if(c.startBinding){const d=u.get(c.startBinding.elementId);d&&as(c,d,"start",u)}if(c.endBinding){const d=u.get(c.endBinding.elementId);d&&as(c,d,"end",u)}}return c}),s={...t,currentItemArrowType:n},o=(a=t.selectedLinearElement)==null?void 0:a.elementId;if(o){const l=r.find(c=>c.id===o);l&&(s.selectedLinearElement=new ce(l))}return{elements:r,appState:s,captureUpdate:Z.IMMEDIATELY}},PanelComponent:({elements:e,appState:t,updateData:n})=>P("fieldset",{children:[g("legend",{children:k("labels.arrowtypes")}),g(Wo,{group:"arrowtypes",options:[{value:ei.sharp,text:k("labels.arrowtype_sharp"),icon:xue,testId:"sharp-arrow"},{value:ei.round,text:k("labels.arrowtype_round"),icon:Aue,testId:"round-arrow"},{value:ei.elbow,text:k("labels.arrowtype_elbowed"),icon:Cue,testId:"elbow-arrow"}],value:tr(e,t,i=>ze(i)?i.elbowed?ei.elbow:i.roundness?ei.round:ei.sharp:null,i=>ze(i),i=>i?null:t.currentItemArrowType),onChange:i=>n(i)})]})});const Z1=()=>{const e=document.querySelector(".excalidraw-tooltip");if(e)return e;const t=document.createElement("div");return document.body.appendChild(t),t.classList.add("excalidraw-tooltip"),t},rV=(e,t,n="bottom")=>{const i=e.getBoundingClientRect(),r=window.innerWidth,s=window.innerHeight,o=5;let a=t.left+t.width/2-i.width/2;a<0?a=o:a+i.width>=r&&(a=r-i.width-o);let l;n==="bottom"?(l=t.top+t.height+o,l+i.height>=s&&(l=t.top-i.height-o)):(l=t.top-i.height-o,l<0&&(l=t.top+t.height+o)),Object.assign(e.style,{top:`${l}px`,left:`${a}px`})},Ape=(e,t,n,i)=>{t.classList.add("excalidraw-tooltip--visible"),t.style.minWidth=i?"50ch":"10ch",t.style.maxWidth=i?"50ch":"15ch",t.textContent=n;const r=e.getBoundingClientRect();rV(t,r)},nl=({children:e,label:t,long:n=!1,style:i,disabled:r})=>(N.useEffect(()=>()=>Z1().classList.remove("excalidraw-tooltip--visible"),[]),r?null:g("div",{className:"excalidraw-tooltip-wrapper",onPointerEnter:s=>Ape(s.currentTarget,Z1(),t,n),onPointerLeave:()=>Z1().classList.remove("excalidraw-tooltip--visible"),style:i,children:e})),sV='<svg viewBox="0 0 24 24" stroke-width="1" width="28" height="28" xmlns="http://www.w3.org/2000/svg">',Mpe='<path d="M6.164 11.755a5.314 5.314 0 0 1-4.932-5.298 5.314 5.314 0 0 1 5.311-5.311 5.314 5.314 0 0 1 5.307 5.113l8.773 8.773a3.322 3.322 0 0 1 0 4.696l-.895.895a3.322 3.322 0 0 1-4.696 0l-8.868-8.868Z" style="fill:#fff"/>',oV='<path stroke="#1b1b1f" fill="#fff" d="m7.868 11.113 7.773 7.774a2.359 2.359 0 0 0 1.667.691 2.368 2.368 0 0 0 2.357-2.358c0-.625-.248-1.225-.69-1.667L11.201 7.78 9.558 9.469l-1.69 1.643v.001Zm10.273 3.606-3.333 3.333m-3.25-6.583 2 2m-7-7 3 3M3.664 3.625l1 1M2.529 6.922l1.407-.144m5.735-2.932-1.118.866M4.285 9.823l.758-1.194m1.863-6.207-.13 1.408"/>',Rpe=`data:${be.svg},${encodeURIComponent(`${sV}${oV}</svg>`)}`,kpe=`data:${be.svg},${encodeURIComponent(`${sV}${Mpe}${oV}</svg>`)}`,xs=e=>{e&&(e.style.cursor="")},xt=(e,t)=>{e&&(e.style.cursor=t)};let ho,VA;const aV=(e,t)=>{const i=()=>{const r=t===xe.DARK;ho=document.createElement("canvas"),ho.theme=t,ho.height=20,ho.width=20;const s=ho.getContext("2d");s.lineWidth=1,s.beginPath(),s.arc(ho.width/2,ho.height/2,5,0,2*Math.PI),s.fillStyle=r?ai.black:ai.white,s.fill(),s.strokeStyle=r?ai.white:ai.black,s.stroke(),VA=ho.toDataURL(be.svg)};(!ho||ho.theme!==t)&&i(),xt(e,`url(${VA}) ${20/2} ${20/2}, auto`)},po=(e,t)=>{if(e)if(t.activeTool.type==="selection")xs(e);else if(Ih(t))e.style.cursor=Tt.GRAB;else if(Eo(t))aV(e,t.theme);else if(t.activeTool.type==="laser"){const n=t.theme===xe.LIGHT?Rpe:kpe;e.style.cursor=`url(${n}), auto`}else["image","custom"].includes(t.activeTool.type)?t.activeTool.type!=="image"&&(e.style.cursor=Tt.AUTO):e.style.cursor=Tt.CROSSHAIR},yu=({viewportX:e,viewportY:t,nextZoom:n},i)=>{const r=e-i.offsetLeft,s=t-i.offsetTop,o=i.zoom.value,a=i.scrollX+(r-r/o),l=i.scrollY+(s-s/o),c=-(r-r/n),u=-(s-s/n);return{scrollX:a+c,scrollY:l+u,zoom:{value:n}}};oe({name:"changeViewBackgroundColor",label:"labels.canvasBackground",paletteName:"Change canvas background color",trackEvent:!1,predicate:(e,t,n,i)=>!!i.props.UIOptions.canvasActions.changeViewBackgroundColor&&!t.viewModeEnabled,perform:(e,t,n)=>({appState:{...t,...n},captureUpdate:n.viewBackgroundColor?Z.IMMEDIATELY:Z.EVENTUALLY}),PanelComponent:({elements:e,appState:t,updateData:n,appProps:i})=>g(I_,{palette:null,topPicks:oP,label:k("labels.canvasBackground"),type:"canvasBackground",color:t.viewBackgroundColor,onChange:r=>n({viewBackgroundColor:r}),"data-testid":"canvas-background-picker",elements:e,appState:t,updateData:n})});const q1=oe({name:"clearCanvas",label:"labels.clearCanvas",paletteName:"Clear canvas",icon:Tc,trackEvent:{category:"canvas"},predicate:(e,t,n,i)=>{var r;return!!i.props.UIOptions.canvasActions.clearCanvas&&!t.viewModeEnabled&&((r=t.openDialog)==null?void 0:r.name)!=="elementLinkSelector"},perform:(e,t,n,i)=>(i.imageCache.clear(),{elements:e.map(r=>Ce(r,{isDeleted:!0})),appState:{...to(),files:{},theme:t.theme,penMode:t.penMode,penDetected:t.penDetected,exportBackground:t.exportBackground,exportEmbedScene:t.exportEmbedScene,gridSize:t.gridSize,gridStep:t.gridStep,gridModeEnabled:t.gridModeEnabled,stats:t.stats,pasteDialog:t.pasteDialog,activeTool:t.activeTool.type==="image"?{...t.activeTool,type:"selection"}:t.activeTool},captureUpdate:Z.IMMEDIATELY})}),$A=oe({name:"zoomIn",label:"buttons.zoomIn",viewMode:!0,icon:YC,trackEvent:{category:"canvas"},perform:(e,t,n,i)=>({appState:{...t,...yu({viewportX:t.width/2+t.offsetLeft,viewportY:t.height/2+t.offsetTop,nextZoom:Aa(t.zoom.value+V6)},t),userToFollow:null},captureUpdate:Z.EVENTUALLY}),PanelComponent:({updateData:e,appState:t})=>g(Ze,{type:"button",className:"zoom-in-button zoom-button",icon:YC,title:`${k("buttons.zoomIn")} — ${Q("CtrlOrCmd++")}`,"aria-label":k("buttons.zoomIn"),disabled:t.zoom.value>=a9,onClick:()=>{e(null)}}),keyTest:e=>(e.code===Je.EQUAL||e.code===Je.NUM_ADD)&&(e[z.CTRL_OR_CMD]||e.shiftKey)}),GA=oe({name:"zoomOut",label:"buttons.zoomOut",icon:WC,viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t,n,i)=>({appState:{...t,...yu({viewportX:t.width/2+t.offsetLeft,viewportY:t.height/2+t.offsetTop,nextZoom:Aa(t.zoom.value-V6)},t),userToFollow:null},captureUpdate:Z.EVENTUALLY}),PanelComponent:({updateData:e,appState:t})=>g(Ze,{type:"button",className:"zoom-out-button zoom-button",icon:WC,title:`${k("buttons.zoomOut")} — ${Q("CtrlOrCmd+-")}`,"aria-label":k("buttons.zoomOut"),disabled:t.zoom.value<=o9,onClick:()=>{e(null)}}),keyTest:e=>(e.code===Je.MINUS||e.code===Je.NUM_SUBTRACT)&&(e[z.CTRL_OR_CMD]||e.shiftKey)}),XA=oe({name:"resetZoom",label:"buttons.resetZoom",icon:nce,viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t,n,i)=>({appState:{...t,...yu({viewportX:t.width/2+t.offsetLeft,viewportY:t.height/2+t.offsetTop,nextZoom:Aa(1)},t),userToFollow:null},captureUpdate:Z.EVENTUALLY}),PanelComponent:({updateData:e,appState:t})=>g(nl,{label:k("buttons.resetZoom"),style:{height:"100%"},children:P(Ze,{type:"button",className:"reset-zoom-button zoom-button",title:k("buttons.resetZoom"),"aria-label":k("buttons.resetZoom"),onClick:()=>{e(null)},children:[(t.zoom.value*100).toFixed(0),"%"]})}),keyTest:e=>(e.code===Je.ZERO||e.code===Je.NUM_ZERO)&&(e[z.CTRL_OR_CMD]||e.shiftKey)}),Lpe=(e,t,n=1)=>{const[i,r,s,o]=e,a=s-i,l=t.width/a,c=o-r,u=t.height/c,f=Math.min(l,u)*Ge(n,.1,1);return Math.min(f,1)},lV=({bounds:e,appState:t,canvasOffsets:n,fitToViewport:i=!1,viewportZoomFactor:r=1,minZoom:s=-1/0,maxZoom:o=1/0})=>{r=Ge(r,o9,a9);const[a,l,c,u]=e,d=(a+c)/2,f=(l+u)/2,h=(n==null?void 0:n.left)??0,m=(n==null?void 0:n.top)??0,p=(n==null?void 0:n.right)??0,b=(n==null?void 0:n.bottom)??0,E=t.width-h-p,y=t.height-m-b;let v;if(i){const M=c-a,w=u-l;v=Math.min(E/M,y/w)*r}else v=Lpe(e,{width:E,height:y},r);const _=Aa(Ge(iie(v,V6,"floor"),s,o)),S=hz({scenePoint:{x:d,y:f},viewportDimensions:{width:t.width,height:t.height},offsets:n,zoom:{value:_}});return{appState:{...t,scrollX:S.scrollX,scrollY:S.scrollY,zoom:{value:_}},captureUpdate:Z.EVENTUALLY}},_5=({canvasOffsets:e,targetElements:t,appState:n,fitToViewport:i,viewportZoomFactor:r,minZoom:s,maxZoom:o})=>{const a=_t(Nt(t));return lV({canvasOffsets:e,bounds:a,appState:n,fitToViewport:i,viewportZoomFactor:r,minZoom:s,maxZoom:o})};oe({name:"zoomToFitSelectionInViewport",label:"labels.zoomToFitViewport",icon:l_,trackEvent:{category:"canvas"},perform:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t);return _5({targetElements:r.length?r:e,appState:{...t,userToFollow:null},fitToViewport:!1,canvasOffsets:i.getEditorUIOffsets()})},keyTest:e=>e.code===Je.TWO&&e.shiftKey&&!e.altKey&&!e[z.CTRL_OR_CMD]});oe({name:"zoomToFitSelection",label:"helpDialog.zoomToSelection",icon:l_,trackEvent:{category:"canvas"},perform:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t);return _5({targetElements:r.length?r:e,appState:{...t,userToFollow:null},fitToViewport:!0,canvasOffsets:i.getEditorUIOffsets()})},keyTest:e=>e.code===Je.THREE&&e.shiftKey&&!e.altKey&&!e[z.CTRL_OR_CMD]});oe({name:"zoomToFit",label:"helpDialog.zoomToFit",icon:l_,viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t,n,i)=>_5({targetElements:e,appState:{...t,userToFollow:null},fitToViewport:!1,canvasOffsets:i.getEditorUIOffsets()}),keyTest:e=>e.code===Je.ONE&&e.shiftKey&&!e.altKey&&!e[z.CTRL_OR_CMD]});const Pb=oe({name:"toggleTheme",label:(e,t)=>t.theme===xe.DARK?"buttons.lightMode":"buttons.darkMode",keywords:["toggle","dark","light","mode","theme"],icon:e=>e.theme===xe.LIGHT?OE:PE,viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t,n)=>({appState:{...t,theme:n||(t.theme===xe.LIGHT?xe.DARK:xe.LIGHT)},captureUpdate:Z.EVENTUALLY}),keyTest:e=>e.altKey&&e.shiftKey&&e.code===Je.D,predicate:(e,t,n,i)=>!!i.props.UIOptions.canvasActions.toggleTheme});oe({name:"toggleEraserTool",label:"toolBar.eraser",trackEvent:{category:"toolbar"},perform:(e,t)=>{let n;return Eo(t)?n=Tn(t,{...t.activeTool.lastActiveTool||{type:"selection"},lastActiveToolBeforeEraser:null}):n=Tn(t,{type:"eraser",lastActiveToolBeforeEraser:t.activeTool}),{appState:{...t,selectedElementIds:{},selectedGroupIds:{},activeEmbeddable:null,activeTool:n},captureUpdate:Z.IMMEDIATELY}},keyTest:e=>e.key===z.E});const Dpe=oe({name:"toggleHandTool",label:"toolBar.hand",paletteName:"Toggle hand tool",trackEvent:{category:"toolbar"},icon:Az,viewMode:!1,perform:(e,t,n,i)=>{let r;return Ih(t)?r=Tn(t,{...t.activeTool.lastActiveTool||{type:"selection"},lastActiveToolBeforeEraser:null}):(r=Tn(t,{type:"hand",lastActiveToolBeforeEraser:t.activeTool}),xt(i.interactiveCanvas,Tt.GRAB)),{appState:{...t,selectedElementIds:{},selectedGroupIds:{},activeEmbeddable:null,activeTool:r},captureUpdate:Z.IMMEDIATELY}},keyTest:e=>!e.altKey&&!e[z.CTRL_OR_CMD]&&e.key===z.H});oe({name:"setEmbeddableAsActiveTool",trackEvent:{category:"toolbar"},target:"Tool",label:"toolBar.embeddable",perform:(e,t,n,i)=>{const r=Tn(t,{type:"embeddable"});return po(i.canvas,{...t,activeTool:r}),{elements:e,appState:{...t,activeTool:Tn(t,{type:"embeddable"})},captureUpdate:Z.EVENTUALLY}}});const Ss=oe({name:"finalize",label:"",trackEvent:!1,perform:(e,t,n,i)=>{var f;const{interactiveCanvas:r,focusContainer:s,scene:o}=i,a=o.getNonDeletedElementsMap();if(t.editingLinearElement){const{elementId:h,startBindingElement:m,endBindingElement:p}=t.editingLinearElement,b=ce.getElement(h,a);if(b)return Ea(b)&&q6(b,m,p,a,o),{elements:b.points.length<2||id(b)?e.filter(E=>E.id!==b.id):void 0,appState:{...t,cursorButton:"up",editingLinearElement:null},captureUpdate:Z.IMMEDIATELY}}let l=e;const c=t.pendingImageElementId&&o.getElement(t.pendingImageElementId);c&&ee(c,{isDeleted:!0},!1),window.document.activeElement instanceof HTMLElement&&s();const u=t.multiElement?t.multiElement:((f=t.newElement)==null?void 0:f.type)==="freedraw"?t.newElement:null;if(u){if(u.type!=="freedraw"&&t.lastPointerDownWith!=="touch"){const{points:m,lastCommittedPoint:p}=u;(!p||m[m.length-1]!==p)&&ee(u,{points:u.points.slice(0,-1)})}id(u)&&(l=l.filter(m=>m.id!==u.id));const h=Wa(u.points,t.zoom.value);if((u.type==="line"||u.type==="freedraw")&&h){const m=u.points,p=m[0];ee(u,{points:m.map((b,E)=>E===m.length-1?C(p[0],p[1]):b)})}if(Ea(u)&&!h&&u.points.length>1){const[m,p]=ce.getPointAtIndexGlobalCoordinates(u,-1,Se(e));uE(u,t,{x:m,y:p},a,e)}}(!t.activeTool.locked&&t.activeTool.type!=="freedraw"||!u)&&xs(r);let d;return t.activeTool.type==="eraser"?d=Tn(t,{...t.activeTool.lastActiveTool||{type:"selection"},lastActiveToolBeforeEraser:null}):d=Tn(t,{type:"selection"}),{elements:l,appState:{...t,cursorButton:"up",activeTool:(t.activeTool.locked||t.activeTool.type==="freedraw")&&u?t.activeTool:d,activeEmbeddable:null,newElement:null,selectionElement:null,multiElement:null,editingTextElement:null,startBoundElement:null,suggestedBindings:[],selectedElementIds:u&&!t.activeTool.locked&&t.activeTool.type!=="freedraw"?{...t.selectedElementIds,[u.id]:!0}:t.selectedElementIds,selectedLinearElement:u&&ke(u)?new ce(u):t.selectedLinearElement,pendingImageElementId:null},captureUpdate:Z.IMMEDIATELY}},keyTest:(e,t)=>e.key===z.ESCAPE&&(t.editingLinearElement!==null||!t.newElement&&t.multiElement===null)||(e.key===z.ESCAPE||e.key===z.ENTER)&&t.multiElement!==null,PanelComponent:({appState:e,updateData:t,data:n})=>g(Ze,{type:"button",icon:uce,title:k("buttons.done"),"aria-label":k("buttons.done"),onClick:t,visible:e.multiElement!=null,size:(n==null?void 0:n.size)||"medium",style:{pointerEvents:"all"}})}),M_=({children:e,checked:t,onChange:n,className:i})=>P("div",{className:me("Checkbox",i,{"is-checked":t}),onClick:r=>{n(!t,r),r.currentTarget.querySelector(".Checkbox-box").focus()},children:[g("button",{type:"button",className:"Checkbox-box",role:"checkbox","aria-checked":t,children:sce}),g("div",{className:"Checkbox-label",children:e})]}),Npe=e=>{const t=e.title||(e.value===xe.DARK?k("buttons.lightMode"):k("buttons.darkMode"));return g(Ze,{type:"icon",icon:e.value===xe.LIGHT?jA.MOON:jA.SUN,title:t,"aria-label":t,onClick:()=>e.onChange(e.value===xe.DARK?xe.LIGHT:xe.DARK),"data-testid":"toggle-dark-mode"})},jA={SUN:g("svg",{width:"512",height:"512",className:"rtl-mirror",viewBox:"0 0 512 512",children:g("path",{fill:"currentColor",d:"M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"})}),MOON:g("svg",{width:"512",height:"512",className:"rtl-mirror",viewBox:"0 0 512 512",children:g("path",{fill:"currentColor",d:"M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"})})},Ope=e=>{const{id:t}=Zo(),[n,i]=N.useState(e.value),r=o=>{e.ignoreFocus||xie(o.target);const a=o.target.value;a!==e.value&&e.onChange(a)},s=o=>{if(o.key===z.ENTER){if(o.preventDefault(),o.nativeEvent.isComposing||o.keyCode===229)return;o.currentTarget.blur()}};return P("div",{className:"ProjectName",children:[g("label",{className:"ProjectName-label",htmlFor:"filename",children:`${e.label}:`}),g("input",{type:"text",className:"TextInput",onBlur:r,onKeyDown:s,id:`${t}-filename`,value:n,onChange:o=>i(o.target.value)})]})};/*! pako 2.0.3 https://github.com/nodeca/pako @license (MIT AND Zlib) */const Ppe=4,YA=0,WA=1,Fpe=2;function sg(e){let t=e.length;for(;--t>=0;)e[t]=0}const Bpe=0,cV=1,zpe=2,Hpe=3,Vpe=258,R_=29,qm=256,j0=qm+1+R_,Zf=30,k_=19,uV=2*j0+1,Eu=15,j8=16,$pe=7,L_=256,dV=16,fV=17,hV=18,qE=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),o2=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Gpe=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),gV=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Xpe=512,ha=new Array((j0+2)*2);sg(ha);const Q1=new Array(Zf*2);sg(Q1);const Y0=new Array(Xpe);sg(Y0);const W0=new Array(Vpe-Hpe+1);sg(W0);const D_=new Array(R_);sg(D_);const Fb=new Array(Zf);sg(Fb);function Y8(e,t,n,i,r){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=e&&e.length}let mV,pV,UV;function W8(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}const bV=e=>e<256?Y0[e]:Y0[256+(e>>>7)],K0=(e,t)=>{e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255},hr=(e,t,n)=>{e.bi_valid>j8-n?(e.bi_buf|=t<<e.bi_valid&65535,K0(e,e.bi_buf),e.bi_buf=t>>j8-e.bi_valid,e.bi_valid+=n-j8):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},Co=(e,t,n)=>{hr(e,n[t*2],n[t*2+1])},yV=(e,t)=>{let n=0;do n|=e&1,e>>>=1,n<<=1;while(--t>0);return n>>>1},jpe=e=>{e.bi_valid===16?(K0(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},Ype=(e,t)=>{const n=t.dyn_tree,i=t.max_code,r=t.stat_desc.static_tree,s=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,a=t.stat_desc.extra_base,l=t.stat_desc.max_length;let c,u,d,f,h,m,p=0;for(f=0;f<=Eu;f++)e.bl_count[f]=0;for(n[e.heap[e.heap_max]*2+1]=0,c=e.heap_max+1;c<uV;c++)u=e.heap[c],f=n[n[u*2+1]*2+1]+1,f>l&&(f=l,p++),n[u*2+1]=f,!(u>i)&&(e.bl_count[f]++,h=0,u>=a&&(h=o[u-a]),m=n[u*2],e.opt_len+=m*(f+h),s&&(e.static_len+=m*(r[u*2+1]+h)));if(p!==0){do{for(f=l-1;e.bl_count[f]===0;)f--;e.bl_count[f]--,e.bl_count[f+1]+=2,e.bl_count[l]--,p-=2}while(p>0);for(f=l;f!==0;f--)for(u=e.bl_count[f];u!==0;)d=e.heap[--c],!(d>i)&&(n[d*2+1]!==f&&(e.opt_len+=(f-n[d*2+1])*n[d*2],n[d*2+1]=f),u--)}},EV=(e,t,n)=>{const i=new Array(Eu+1);let r=0,s,o;for(s=1;s<=Eu;s++)i[s]=r=r+n[s-1]<<1;for(o=0;o<=t;o++){let a=e[o*2+1];a!==0&&(e[o*2]=yV(i[a]++,a))}},Wpe=()=>{let e,t,n,i,r;const s=new Array(Eu+1);for(n=0,i=0;i<R_-1;i++)for(D_[i]=n,e=0;e<1<<qE[i];e++)W0[n++]=i;for(W0[n-1]=i,r=0,i=0;i<16;i++)for(Fb[i]=r,e=0;e<1<<o2[i];e++)Y0[r++]=i;for(r>>=7;i<Zf;i++)for(Fb[i]=r<<7,e=0;e<1<<o2[i]-7;e++)Y0[256+r++]=i;for(t=0;t<=Eu;t++)s[t]=0;for(e=0;e<=143;)ha[e*2+1]=8,e++,s[8]++;for(;e<=255;)ha[e*2+1]=9,e++,s[9]++;for(;e<=279;)ha[e*2+1]=7,e++,s[7]++;for(;e<=287;)ha[e*2+1]=8,e++,s[8]++;for(EV(ha,j0+1,s),e=0;e<Zf;e++)Q1[e*2+1]=5,Q1[e*2]=yV(e,5);mV=new Y8(ha,qE,qm+1,j0,Eu),pV=new Y8(Q1,o2,0,Zf,Eu),UV=new Y8(new Array(0),Gpe,0,k_,$pe)},vV=e=>{let t;for(t=0;t<j0;t++)e.dyn_ltree[t*2]=0;for(t=0;t<Zf;t++)e.dyn_dtree[t*2]=0;for(t=0;t<k_;t++)e.bl_tree[t*2]=0;e.dyn_ltree[L_*2]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0},_V=e=>{e.bi_valid>8?K0(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},Kpe=(e,t,n,i)=>{_V(e),K0(e,n),K0(e,~n),e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n},KA=(e,t,n,i)=>{const r=t*2,s=n*2;return e[r]<e[s]||e[r]===e[s]&&i[t]<=i[n]},K8=(e,t,n)=>{const i=e.heap[n];let r=n<<1;for(;r<=e.heap_len&&(r<e.heap_len&&KA(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!KA(t,i,e.heap[r],e.depth));)e.heap[n]=e.heap[r],n=r,r<<=1;e.heap[n]=i},ZA=(e,t,n)=>{let i,r,s=0,o,a;if(e.last_lit!==0)do i=e.pending_buf[e.d_buf+s*2]<<8|e.pending_buf[e.d_buf+s*2+1],r=e.pending_buf[e.l_buf+s],s++,i===0?Co(e,r,t):(o=W0[r],Co(e,o+qm+1,t),a=qE[o],a!==0&&(r-=D_[o],hr(e,r,a)),i--,o=bV(i),Co(e,o,n),a=o2[o],a!==0&&(i-=Fb[o],hr(e,i,a)));while(s<e.last_lit);Co(e,L_,t)},QE=(e,t)=>{const n=t.dyn_tree,i=t.stat_desc.static_tree,r=t.stat_desc.has_stree,s=t.stat_desc.elems;let o,a,l=-1,c;for(e.heap_len=0,e.heap_max=uV,o=0;o<s;o++)n[o*2]!==0?(e.heap[++e.heap_len]=l=o,e.depth[o]=0):n[o*2+1]=0;for(;e.heap_len<2;)c=e.heap[++e.heap_len]=l<2?++l:0,n[c*2]=1,e.depth[c]=0,e.opt_len--,r&&(e.static_len-=i[c*2+1]);for(t.max_code=l,o=e.heap_len>>1;o>=1;o--)K8(e,n,o);c=s;do o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],K8(e,n,1),a=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=a,n[c*2]=n[o*2]+n[a*2],e.depth[c]=(e.depth[o]>=e.depth[a]?e.depth[o]:e.depth[a])+1,n[o*2+1]=n[a*2+1]=c,e.heap[1]=c++,K8(e,n,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],Ype(e,t),EV(n,l,e.bl_count)},qA=(e,t,n)=>{let i,r=-1,s,o=t[0*2+1],a=0,l=7,c=4;for(o===0&&(l=138,c=3),t[(n+1)*2+1]=65535,i=0;i<=n;i++)s=o,o=t[(i+1)*2+1],!(++a<l&&s===o)&&(a<c?e.bl_tree[s*2]+=a:s!==0?(s!==r&&e.bl_tree[s*2]++,e.bl_tree[dV*2]++):a<=10?e.bl_tree[fV*2]++:e.bl_tree[hV*2]++,a=0,r=s,o===0?(l=138,c=3):s===o?(l=6,c=3):(l=7,c=4))},QA=(e,t,n)=>{let i,r=-1,s,o=t[0*2+1],a=0,l=7,c=4;for(o===0&&(l=138,c=3),i=0;i<=n;i++)if(s=o,o=t[(i+1)*2+1],!(++a<l&&s===o)){if(a<c)do Co(e,s,e.bl_tree);while(--a!==0);else s!==0?(s!==r&&(Co(e,s,e.bl_tree),a--),Co(e,dV,e.bl_tree),hr(e,a-3,2)):a<=10?(Co(e,fV,e.bl_tree),hr(e,a-3,3)):(Co(e,hV,e.bl_tree),hr(e,a-11,7));a=0,r=s,o===0?(l=138,c=3):s===o?(l=6,c=3):(l=7,c=4)}},Zpe=e=>{let t;for(qA(e,e.dyn_ltree,e.l_desc.max_code),qA(e,e.dyn_dtree,e.d_desc.max_code),QE(e,e.bl_desc),t=k_-1;t>=3&&e.bl_tree[gV[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t},qpe=(e,t,n,i)=>{let r;for(hr(e,t-257,5),hr(e,n-1,5),hr(e,i-4,4),r=0;r<i;r++)hr(e,e.bl_tree[gV[r]*2+1],3);QA(e,e.dyn_ltree,t-1),QA(e,e.dyn_dtree,n-1)},Qpe=e=>{let t=4093624447,n;for(n=0;n<=31;n++,t>>>=1)if(t&1&&e.dyn_ltree[n*2]!==0)return YA;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return WA;for(n=32;n<qm;n++)if(e.dyn_ltree[n*2]!==0)return WA;return YA};let JA=!1;const Jpe=e=>{JA||(Wpe(),JA=!0),e.l_desc=new W8(e.dyn_ltree,mV),e.d_desc=new W8(e.dyn_dtree,pV),e.bl_desc=new W8(e.bl_tree,UV),e.bi_buf=0,e.bi_valid=0,vV(e)},wV=(e,t,n,i)=>{hr(e,(Bpe<<1)+(i?1:0),3),Kpe(e,t,n)},eUe=e=>{hr(e,cV<<1,3),Co(e,L_,ha),jpe(e)},tUe=(e,t,n,i)=>{let r,s,o=0;e.level>0?(e.strm.data_type===Fpe&&(e.strm.data_type=Qpe(e)),QE(e,e.l_desc),QE(e,e.d_desc),o=Zpe(e),r=e.opt_len+3+7>>>3,s=e.static_len+3+7>>>3,s<=r&&(r=s)):r=s=n+5,n+4<=r&&t!==-1?wV(e,t,n,i):e.strategy===Ppe||s===r?(hr(e,(cV<<1)+(i?1:0),3),ZA(e,ha,Q1)):(hr(e,(zpe<<1)+(i?1:0),3),qpe(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),ZA(e,e.dyn_ltree,e.dyn_dtree)),vV(e),i&&_V(e)},nUe=(e,t,n)=>(e.pending_buf[e.d_buf+e.last_lit*2]=t>>>8&255,e.pending_buf[e.d_buf+e.last_lit*2+1]=t&255,e.pending_buf[e.l_buf+e.last_lit]=n&255,e.last_lit++,t===0?e.dyn_ltree[n*2]++:(e.matches++,t--,e.dyn_ltree[(W0[n]+qm+1)*2]++,e.dyn_dtree[bV(t)*2]++),e.last_lit===e.lit_bufsize-1);var iUe=Jpe,rUe=wV,sUe=tUe,oUe=nUe,aUe=eUe,lUe={_tr_init:iUe,_tr_stored_block:rUe,_tr_flush_block:sUe,_tr_tally:oUe,_tr_align:aUe};const cUe=(e,t,n,i)=>{let r=e&65535|0,s=e>>>16&65535|0,o=0;for(;n!==0;){o=n>2e3?2e3:n,n-=o;do r=r+t[i++]|0,s=s+r|0;while(--o);r%=65521,s%=65521}return r|s<<16|0};var Z0=cUe;const uUe=()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var i=0;i<8;i++)e=e&1?3988292384^e>>>1:e>>>1;t[n]=e}return t},dUe=new Uint32Array(uUe()),fUe=(e,t,n,i)=>{const r=dUe,s=i+n;e^=-1;for(let o=i;o<s;o++)e=e>>>8^r[(e^t[o])&255];return e^-1};var Jn=fUe,ad={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},w5={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:hUe,_tr_stored_block:gUe,_tr_flush_block:mUe,_tr_tally:ic,_tr_align:pUe}=lUe,{Z_NO_FLUSH:Md,Z_PARTIAL_FLUSH:UUe,Z_FULL_FLUSH:bUe,Z_FINISH:rc,Z_BLOCK:eM,Z_OK:Ao,Z_STREAM_END:tM,Z_STREAM_ERROR:hs,Z_DATA_ERROR:yUe,Z_BUF_ERROR:Z8,Z_DEFAULT_COMPRESSION:EUe,Z_FILTERED:vUe,Z_HUFFMAN_ONLY:dU,Z_RLE:_Ue,Z_FIXED:wUe,Z_DEFAULT_STRATEGY:TUe,Z_UNKNOWN:SUe,Z_DEFLATED:T5}=w5,IUe=9,xUe=15,CUe=8,AUe=29,MUe=256,JE=MUe+1+AUe,RUe=30,kUe=19,LUe=2*JE+1,DUe=15,nt=3,Hl=258,Ys=Hl+nt+1,NUe=32,S5=42,e4=69,a2=73,l2=91,c2=103,vu=113,h1=666,Yn=1,Qm=2,ld=3,og=4,OUe=3,Vl=(e,t)=>(e.msg=ad[t],t),nM=e=>(e<<1)-(e>4?9:0),Ol=e=>{let t=e.length;for(;--t>=0;)e[t]=0};let PUe=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask,sc=PUe;const wl=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),n!==0&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,t.pending===0&&(t.pending_out=0))},wi=(e,t)=>{mUe(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,wl(e.strm)},bt=(e,t)=>{e.pending_buf[e.pending++]=t},Gg=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255},FUe=(e,t,n,i)=>{let r=e.avail_in;return r>i&&(r=i),r===0?0:(e.avail_in-=r,t.set(e.input.subarray(e.next_in,e.next_in+r),n),e.state.wrap===1?e.adler=Z0(e.adler,t,r,n):e.state.wrap===2&&(e.adler=Jn(e.adler,t,r,n)),e.next_in+=r,e.total_in+=r,r)},TV=(e,t)=>{let n=e.max_chain_length,i=e.strstart,r,s,o=e.prev_length,a=e.nice_match;const l=e.strstart>e.w_size-Ys?e.strstart-(e.w_size-Ys):0,c=e.window,u=e.w_mask,d=e.prev,f=e.strstart+Hl;let h=c[i+o-1],m=c[i+o];e.prev_length>=e.good_match&&(n>>=2),a>e.lookahead&&(a=e.lookahead);do if(r=t,!(c[r+o]!==m||c[r+o-1]!==h||c[r]!==c[i]||c[++r]!==c[i+1])){i+=2,r++;do;while(c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&i<f);if(s=Hl-(f-i),i=f-Hl,s>o){if(e.match_start=t,o=s,s>=a)break;h=c[i+o-1],m=c[i+o]}}while((t=d[t&u])>l&&--n!==0);return o<=e.lookahead?o:e.lookahead},cd=e=>{const t=e.w_size;let n,i,r,s,o;do{if(s=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-Ys)){e.window.set(e.window.subarray(t,t+t),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,i=e.hash_size,n=i;do r=e.head[--n],e.head[n]=r>=t?r-t:0;while(--i);i=t,n=i;do r=e.prev[--n],e.prev[n]=r>=t?r-t:0;while(--i);s+=t}if(e.strm.avail_in===0)break;if(i=FUe(e.strm,e.window,e.strstart+e.lookahead,s),e.lookahead+=i,e.lookahead+e.insert>=nt)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=sc(e,e.ins_h,e.window[o+1]);e.insert&&(e.ins_h=sc(e,e.ins_h,e.window[o+nt-1]),e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<nt)););}while(e.lookahead<Ys&&e.strm.avail_in!==0)},BUe=(e,t)=>{let n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(cd(e),e.lookahead===0&&t===Md)return Yn;if(e.lookahead===0)break}e.strstart+=e.lookahead,e.lookahead=0;const i=e.block_start+n;if((e.strstart===0||e.strstart>=i)&&(e.lookahead=e.strstart-i,e.strstart=i,wi(e,!1),e.strm.avail_out===0)||e.strstart-e.block_start>=e.w_size-Ys&&(wi(e,!1),e.strm.avail_out===0))return Yn}return e.insert=0,t===rc?(wi(e,!0),e.strm.avail_out===0?ld:og):(e.strstart>e.block_start&&(wi(e,!1),e.strm.avail_out===0),Yn)},q8=(e,t)=>{let n,i;for(;;){if(e.lookahead<Ys){if(cd(e),e.lookahead<Ys&&t===Md)return Yn;if(e.lookahead===0)break}if(n=0,e.lookahead>=nt&&(e.ins_h=sc(e,e.ins_h,e.window[e.strstart+nt-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),n!==0&&e.strstart-n<=e.w_size-Ys&&(e.match_length=TV(e,n)),e.match_length>=nt)if(i=ic(e,e.strstart-e.match_start,e.match_length-nt),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=nt){e.match_length--;do e.strstart++,e.ins_h=sc(e,e.ins_h,e.window[e.strstart+nt-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=sc(e,e.ins_h,e.window[e.strstart+1]);else i=ic(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(wi(e,!1),e.strm.avail_out===0))return Yn}return e.insert=e.strstart<nt-1?e.strstart:nt-1,t===rc?(wi(e,!0),e.strm.avail_out===0?ld:og):e.last_lit&&(wi(e,!1),e.strm.avail_out===0)?Yn:Qm},Kd=(e,t)=>{let n,i,r;for(;;){if(e.lookahead<Ys){if(cd(e),e.lookahead<Ys&&t===Md)return Yn;if(e.lookahead===0)break}if(n=0,e.lookahead>=nt&&(e.ins_h=sc(e,e.ins_h,e.window[e.strstart+nt-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=nt-1,n!==0&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-Ys&&(e.match_length=TV(e,n),e.match_length<=5&&(e.strategy===vUe||e.match_length===nt&&e.strstart-e.match_start>4096)&&(e.match_length=nt-1)),e.prev_length>=nt&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-nt,i=ic(e,e.strstart-1-e.prev_match,e.prev_length-nt),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=r&&(e.ins_h=sc(e,e.ins_h,e.window[e.strstart+nt-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=nt-1,e.strstart++,i&&(wi(e,!1),e.strm.avail_out===0))return Yn}else if(e.match_available){if(i=ic(e,0,e.window[e.strstart-1]),i&&wi(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return Yn}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=ic(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<nt-1?e.strstart:nt-1,t===rc?(wi(e,!0),e.strm.avail_out===0?ld:og):e.last_lit&&(wi(e,!1),e.strm.avail_out===0)?Yn:Qm},zUe=(e,t)=>{let n,i,r,s;const o=e.window;for(;;){if(e.lookahead<=Hl){if(cd(e),e.lookahead<=Hl&&t===Md)return Yn;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=nt&&e.strstart>0&&(r=e.strstart-1,i=o[r],i===o[++r]&&i===o[++r]&&i===o[++r])){s=e.strstart+Hl;do;while(i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&r<s);e.match_length=Hl-(s-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=nt?(n=ic(e,1,e.match_length-nt),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=ic(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(wi(e,!1),e.strm.avail_out===0))return Yn}return e.insert=0,t===rc?(wi(e,!0),e.strm.avail_out===0?ld:og):e.last_lit&&(wi(e,!1),e.strm.avail_out===0)?Yn:Qm},HUe=(e,t)=>{let n;for(;;){if(e.lookahead===0&&(cd(e),e.lookahead===0)){if(t===Md)return Yn;break}if(e.match_length=0,n=ic(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(wi(e,!1),e.strm.avail_out===0))return Yn}return e.insert=0,t===rc?(wi(e,!0),e.strm.avail_out===0?ld:og):e.last_lit&&(wi(e,!1),e.strm.avail_out===0)?Yn:Qm};function go(e,t,n,i,r){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=i,this.func=r}const g1=[new go(0,0,0,0,BUe),new go(4,4,8,4,q8),new go(4,5,16,8,q8),new go(4,6,32,32,q8),new go(4,4,16,16,Kd),new go(8,16,32,32,Kd),new go(8,16,128,128,Kd),new go(8,32,128,256,Kd),new go(32,128,258,1024,Kd),new go(32,258,258,4096,Kd)],VUe=e=>{e.window_size=2*e.w_size,Ol(e.head),e.max_lazy_match=g1[e.level].max_lazy,e.good_match=g1[e.level].good_length,e.nice_match=g1[e.level].nice_length,e.max_chain_length=g1[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=nt-1,e.match_available=0,e.ins_h=0};function $Ue(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=T5,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(LUe*2),this.dyn_dtree=new Uint16Array((2*RUe+1)*2),this.bl_tree=new Uint16Array((2*kUe+1)*2),Ol(this.dyn_ltree),Ol(this.dyn_dtree),Ol(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(DUe+1),this.heap=new Uint16Array(2*JE+1),Ol(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*JE+1),Ol(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const SV=e=>{if(!e||!e.state)return Vl(e,hs);e.total_in=e.total_out=0,e.data_type=SUe;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?S5:vu,e.adler=t.wrap===2?0:1,t.last_flush=Md,hUe(t),Ao},IV=e=>{const t=SV(e);return t===Ao&&VUe(e.state),t},GUe=(e,t)=>!e||!e.state||e.state.wrap!==2?hs:(e.state.gzhead=t,Ao),xV=(e,t,n,i,r,s)=>{if(!e)return hs;let o=1;if(t===EUe&&(t=6),i<0?(o=0,i=-i):i>15&&(o=2,i-=16),r<1||r>IUe||n!==T5||i<8||i>15||t<0||t>9||s<0||s>wUe)return Vl(e,hs);i===8&&(i=9);const a=new $Ue;return e.state=a,a.strm=e,a.wrap=o,a.gzhead=null,a.w_bits=i,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=r+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+nt-1)/nt),a.window=new Uint8Array(a.w_size*2),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<r+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new Uint8Array(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=3*a.lit_bufsize,a.level=t,a.strategy=s,a.method=n,IV(e)},XUe=(e,t)=>xV(e,t,T5,xUe,CUe,TUe),jUe=(e,t)=>{let n,i;if(!e||!e.state||t>eM||t<0)return e?Vl(e,hs):hs;const r=e.state;if(!e.output||!e.input&&e.avail_in!==0||r.status===h1&&t!==rc)return Vl(e,e.avail_out===0?Z8:hs);r.strm=e;const s=r.last_flush;if(r.last_flush=t,r.status===S5)if(r.wrap===2)e.adler=0,bt(r,31),bt(r,139),bt(r,8),r.gzhead?(bt(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),bt(r,r.gzhead.time&255),bt(r,r.gzhead.time>>8&255),bt(r,r.gzhead.time>>16&255),bt(r,r.gzhead.time>>24&255),bt(r,r.level===9?2:r.strategy>=dU||r.level<2?4:0),bt(r,r.gzhead.os&255),r.gzhead.extra&&r.gzhead.extra.length&&(bt(r,r.gzhead.extra.length&255),bt(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=Jn(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=e4):(bt(r,0),bt(r,0),bt(r,0),bt(r,0),bt(r,0),bt(r,r.level===9?2:r.strategy>=dU||r.level<2?4:0),bt(r,OUe),r.status=vu);else{let o=T5+(r.w_bits-8<<4)<<8,a=-1;r.strategy>=dU||r.level<2?a=0:r.level<6?a=1:r.level===6?a=2:a=3,o|=a<<6,r.strstart!==0&&(o|=NUe),o+=31-o%31,r.status=vu,Gg(r,o),r.strstart!==0&&(Gg(r,e.adler>>>16),Gg(r,e.adler&65535)),e.adler=1}if(r.status===e4)if(r.gzhead.extra){for(n=r.pending;r.gzindex<(r.gzhead.extra.length&65535)&&!(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>n&&(e.adler=Jn(e.adler,r.pending_buf,r.pending-n,n)),wl(e),n=r.pending,r.pending===r.pending_buf_size));)bt(r,r.gzhead.extra[r.gzindex]&255),r.gzindex++;r.gzhead.hcrc&&r.pending>n&&(e.adler=Jn(e.adler,r.pending_buf,r.pending-n,n)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=a2)}else r.status=a2;if(r.status===a2)if(r.gzhead.name){n=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>n&&(e.adler=Jn(e.adler,r.pending_buf,r.pending-n,n)),wl(e),n=r.pending,r.pending===r.pending_buf_size)){i=1;break}r.gzindex<r.gzhead.name.length?i=r.gzhead.name.charCodeAt(r.gzindex++)&255:i=0,bt(r,i)}while(i!==0);r.gzhead.hcrc&&r.pending>n&&(e.adler=Jn(e.adler,r.pending_buf,r.pending-n,n)),i===0&&(r.gzindex=0,r.status=l2)}else r.status=l2;if(r.status===l2)if(r.gzhead.comment){n=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>n&&(e.adler=Jn(e.adler,r.pending_buf,r.pending-n,n)),wl(e),n=r.pending,r.pending===r.pending_buf_size)){i=1;break}r.gzindex<r.gzhead.comment.length?i=r.gzhead.comment.charCodeAt(r.gzindex++)&255:i=0,bt(r,i)}while(i!==0);r.gzhead.hcrc&&r.pending>n&&(e.adler=Jn(e.adler,r.pending_buf,r.pending-n,n)),i===0&&(r.status=c2)}else r.status=c2;if(r.status===c2&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&wl(e),r.pending+2<=r.pending_buf_size&&(bt(r,e.adler&255),bt(r,e.adler>>8&255),e.adler=0,r.status=vu)):r.status=vu),r.pending!==0){if(wl(e),e.avail_out===0)return r.last_flush=-1,Ao}else if(e.avail_in===0&&nM(t)<=nM(s)&&t!==rc)return Vl(e,Z8);if(r.status===h1&&e.avail_in!==0)return Vl(e,Z8);if(e.avail_in!==0||r.lookahead!==0||t!==Md&&r.status!==h1){let o=r.strategy===dU?HUe(r,t):r.strategy===_Ue?zUe(r,t):g1[r.level].func(r,t);if((o===ld||o===og)&&(r.status=h1),o===Yn||o===ld)return e.avail_out===0&&(r.last_flush=-1),Ao;if(o===Qm&&(t===UUe?pUe(r):t!==eM&&(gUe(r,0,0,!1),t===bUe&&(Ol(r.head),r.lookahead===0&&(r.strstart=0,r.block_start=0,r.insert=0))),wl(e),e.avail_out===0))return r.last_flush=-1,Ao}return t!==rc?Ao:r.wrap<=0?tM:(r.wrap===2?(bt(r,e.adler&255),bt(r,e.adler>>8&255),bt(r,e.adler>>16&255),bt(r,e.adler>>24&255),bt(r,e.total_in&255),bt(r,e.total_in>>8&255),bt(r,e.total_in>>16&255),bt(r,e.total_in>>24&255)):(Gg(r,e.adler>>>16),Gg(r,e.adler&65535)),wl(e),r.wrap>0&&(r.wrap=-r.wrap),r.pending!==0?Ao:tM)},YUe=e=>{if(!e||!e.state)return hs;const t=e.state.status;return t!==S5&&t!==e4&&t!==a2&&t!==l2&&t!==c2&&t!==vu&&t!==h1?Vl(e,hs):(e.state=null,t===vu?Vl(e,yUe):Ao)},WUe=(e,t)=>{let n=t.length;if(!e||!e.state)return hs;const i=e.state,r=i.wrap;if(r===2||r===1&&i.status!==S5||i.lookahead)return hs;if(r===1&&(e.adler=Z0(e.adler,t,n,0)),i.wrap=0,n>=i.w_size){r===0&&(Ol(i.head),i.strstart=0,i.block_start=0,i.insert=0);let l=new Uint8Array(i.w_size);l.set(t.subarray(n-i.w_size,n),0),t=l,n=i.w_size}const s=e.avail_in,o=e.next_in,a=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,cd(i);i.lookahead>=nt;){let l=i.strstart,c=i.lookahead-(nt-1);do i.ins_h=sc(i,i.ins_h,i.window[l+nt-1]),i.prev[l&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=l,l++;while(--c);i.strstart=l,i.lookahead=nt-1,cd(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=nt-1,i.match_available=0,e.next_in=o,e.input=a,e.avail_in=s,i.wrap=r,Ao};var KUe=XUe,ZUe=xV,qUe=IV,QUe=SV,JUe=GUe,e2e=jUe,t2e=YUe,n2e=WUe,i2e="pako deflate (from Nodeca project)",J1={deflateInit:KUe,deflateInit2:ZUe,deflateReset:qUe,deflateResetKeep:QUe,deflateSetHeader:JUe,deflate:e2e,deflateEnd:t2e,deflateSetDictionary:n2e,deflateInfo:i2e};const r2e=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var s2e=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const i in n)r2e(n,i)&&(e[i]=n[i])}}return e},o2e=e=>{let t=0;for(let i=0,r=e.length;i<r;i++)t+=e[i].length;const n=new Uint8Array(t);for(let i=0,r=0,s=e.length;i<s;i++){let o=e[i];n.set(o,r),r+=o.length}return n},I5={assign:s2e,flattenChunks:o2e};let CV=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{CV=!1}const q0=new Uint8Array(256);for(let e=0;e<256;e++)q0[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;q0[254]=q0[254]=1;var a2e=e=>{let t,n,i,r,s,o=e.length,a=0;for(r=0;r<o;r++)n=e.charCodeAt(r),(n&64512)===55296&&r+1<o&&(i=e.charCodeAt(r+1),(i&64512)===56320&&(n=65536+(n-55296<<10)+(i-56320),r++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(a),s=0,r=0;s<a;r++)n=e.charCodeAt(r),(n&64512)===55296&&r+1<o&&(i=e.charCodeAt(r+1),(i&64512)===56320&&(n=65536+(n-55296<<10)+(i-56320),r++)),n<128?t[s++]=n:n<2048?(t[s++]=192|n>>>6,t[s++]=128|n&63):n<65536?(t[s++]=224|n>>>12,t[s++]=128|n>>>6&63,t[s++]=128|n&63):(t[s++]=240|n>>>18,t[s++]=128|n>>>12&63,t[s++]=128|n>>>6&63,t[s++]=128|n&63);return t};const l2e=(e,t)=>{if(t<65534&&e.subarray&&CV)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let i=0;i<t;i++)n+=String.fromCharCode(e[i]);return n};var c2e=(e,t)=>{let n,i;const r=t||e.length,s=new Array(r*2);for(i=0,n=0;n<r;){let o=e[n++];if(o<128){s[i++]=o;continue}let a=q0[o];if(a>4){s[i++]=65533,n+=a-1;continue}for(o&=a===2?31:a===3?15:7;a>1&&n<r;)o=o<<6|e[n++]&63,a--;if(a>1){s[i++]=65533;continue}o<65536?s[i++]=o:(o-=65536,s[i++]=55296|o>>10&1023,s[i++]=56320|o&1023)}return l2e(s,i)},u2e=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let n=t-1;for(;n>=0&&(e[n]&192)===128;)n--;return n<0||n===0?t:n+q0[e[n]]>t?n:t},Q0={string2buf:a2e,buf2string:c2e,utf8border:u2e};function d2e(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var AV=d2e;const MV=Object.prototype.toString,{Z_NO_FLUSH:f2e,Z_SYNC_FLUSH:h2e,Z_FULL_FLUSH:g2e,Z_FINISH:m2e,Z_OK:Bb,Z_STREAM_END:p2e,Z_DEFAULT_COMPRESSION:U2e,Z_DEFAULT_STRATEGY:b2e,Z_DEFLATED:y2e}=w5;function x5(e){this.options=I5.assign({level:U2e,method:y2e,chunkSize:16384,windowBits:15,memLevel:8,strategy:b2e},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new AV,this.strm.avail_out=0;let n=J1.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==Bb)throw new Error(ad[n]);if(t.header&&J1.deflateSetHeader(this.strm,t.header),t.dictionary){let i;if(typeof t.dictionary=="string"?i=Q0.string2buf(t.dictionary):MV.call(t.dictionary)==="[object ArrayBuffer]"?i=new Uint8Array(t.dictionary):i=t.dictionary,n=J1.deflateSetDictionary(this.strm,i),n!==Bb)throw new Error(ad[n]);this._dict_set=!0}}x5.prototype.push=function(e,t){const n=this.strm,i=this.options.chunkSize;let r,s;if(this.ended)return!1;for(t===~~t?s=t:s=t===!0?m2e:f2e,typeof e=="string"?n.input=Q0.string2buf(e):MV.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){if(n.avail_out===0&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),(s===h2e||s===g2e)&&n.avail_out<=6){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(r=J1.deflate(n,s),r===p2e)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),r=J1.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===Bb;if(n.avail_out===0){this.onData(n.output);continue}if(s>0&&n.next_out>0){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(n.avail_in===0)break}return!0};x5.prototype.onData=function(e){this.chunks.push(e)};x5.prototype.onEnd=function(e){e===Bb&&(this.result=I5.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function E2e(e,t){const n=new x5(t);if(n.push(e,!0),n.err)throw n.msg||ad[n.err];return n.result}var v2e=E2e,_2e={deflate:v2e};const fU=30,w2e=12;var T2e=function(t,n){let i,r,s,o,a,l,c,u,d,f,h,m,p,b,E,y,v,_,S,M,w,T,A,I;const R=t.state;i=t.next_in,A=t.input,r=i+(t.avail_in-5),s=t.next_out,I=t.output,o=s-(n-t.avail_out),a=s+(t.avail_out-257),l=R.dmax,c=R.wsize,u=R.whave,d=R.wnext,f=R.window,h=R.hold,m=R.bits,p=R.lencode,b=R.distcode,E=(1<<R.lenbits)-1,y=(1<<R.distbits)-1;e:do{m<15&&(h+=A[i++]<<m,m+=8,h+=A[i++]<<m,m+=8),v=p[h&E];t:for(;;){if(_=v>>>24,h>>>=_,m-=_,_=v>>>16&255,_===0)I[s++]=v&65535;else if(_&16){S=v&65535,_&=15,_&&(m<_&&(h+=A[i++]<<m,m+=8),S+=h&(1<<_)-1,h>>>=_,m-=_),m<15&&(h+=A[i++]<<m,m+=8,h+=A[i++]<<m,m+=8),v=b[h&y];n:for(;;){if(_=v>>>24,h>>>=_,m-=_,_=v>>>16&255,_&16){if(M=v&65535,_&=15,m<_&&(h+=A[i++]<<m,m+=8,m<_&&(h+=A[i++]<<m,m+=8)),M+=h&(1<<_)-1,M>l){t.msg="invalid distance too far back",R.mode=fU;break e}if(h>>>=_,m-=_,_=s-o,M>_){if(_=M-_,_>u&&R.sane){t.msg="invalid distance too far back",R.mode=fU;break e}if(w=0,T=f,d===0){if(w+=c-_,_<S){S-=_;do I[s++]=f[w++];while(--_);w=s-M,T=I}}else if(d<_){if(w+=c+d-_,_-=d,_<S){S-=_;do I[s++]=f[w++];while(--_);if(w=0,d<S){_=d,S-=_;do I[s++]=f[w++];while(--_);w=s-M,T=I}}}else if(w+=d-_,_<S){S-=_;do I[s++]=f[w++];while(--_);w=s-M,T=I}for(;S>2;)I[s++]=T[w++],I[s++]=T[w++],I[s++]=T[w++],S-=3;S&&(I[s++]=T[w++],S>1&&(I[s++]=T[w++]))}else{w=s-M;do I[s++]=I[w++],I[s++]=I[w++],I[s++]=I[w++],S-=3;while(S>2);S&&(I[s++]=I[w++],S>1&&(I[s++]=I[w++]))}}else if(_&64){t.msg="invalid distance code",R.mode=fU;break e}else{v=b[(v&65535)+(h&(1<<_)-1)];continue n}break}}else if(_&64)if(_&32){R.mode=w2e;break e}else{t.msg="invalid literal/length code",R.mode=fU;break e}else{v=p[(v&65535)+(h&(1<<_)-1)];continue t}break}}while(i<r&&s<a);S=m>>3,i-=S,m-=S<<3,h&=(1<<m)-1,t.next_in=i,t.next_out=s,t.avail_in=i<r?5+(r-i):5-(i-r),t.avail_out=s<a?257+(a-s):257-(s-a),R.hold=h,R.bits=m};const Zd=15,iM=852,rM=592,sM=0,Q8=1,oM=2,S2e=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),I2e=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),x2e=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),C2e=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),A2e=(e,t,n,i,r,s,o,a)=>{const l=a.bits;let c=0,u=0,d=0,f=0,h=0,m=0,p=0,b=0,E=0,y=0,v,_,S,M,w,T=null,A=0,I;const R=new Uint16Array(Zd+1),D=new Uint16Array(Zd+1);let L=null,G=0,V,H,$;for(c=0;c<=Zd;c++)R[c]=0;for(u=0;u<i;u++)R[t[n+u]]++;for(h=l,f=Zd;f>=1&&R[f]===0;f--);if(h>f&&(h=f),f===0)return r[s++]=1<<24|64<<16|0,r[s++]=1<<24|64<<16|0,a.bits=1,0;for(d=1;d<f&&R[d]===0;d++);for(h<d&&(h=d),b=1,c=1;c<=Zd;c++)if(b<<=1,b-=R[c],b<0)return-1;if(b>0&&(e===sM||f!==1))return-1;for(D[1]=0,c=1;c<Zd;c++)D[c+1]=D[c]+R[c];for(u=0;u<i;u++)t[n+u]!==0&&(o[D[t[n+u]]++]=u);if(e===sM?(T=L=o,I=19):e===Q8?(T=S2e,A-=257,L=I2e,G-=257,I=256):(T=x2e,L=C2e,I=-1),y=0,u=0,c=d,w=s,m=h,p=0,S=-1,E=1<<h,M=E-1,e===Q8&&E>iM||e===oM&&E>rM)return 1;for(;;){V=c-p,o[u]<I?(H=0,$=o[u]):o[u]>I?(H=L[G+o[u]],$=T[A+o[u]]):(H=96,$=0),v=1<<c-p,_=1<<m,d=_;do _-=v,r[w+(y>>p)+_]=V<<24|H<<16|$|0;while(_!==0);for(v=1<<c-1;y&v;)v>>=1;if(v!==0?(y&=v-1,y+=v):y=0,u++,--R[c]===0){if(c===f)break;c=t[n+o[u]]}if(c>h&&(y&M)!==S){for(p===0&&(p=h),w+=d,m=c-p,b=1<<m;m+p<f&&(b-=R[m+p],!(b<=0));)m++,b<<=1;if(E+=1<<m,e===Q8&&E>iM||e===oM&&E>rM)return 1;S=y&M,r[S]=h<<24|m<<16|w-s|0}}return y!==0&&(r[w+y]=c-p<<24|64<<16|0),a.bits=h,0};var e0=A2e;const M2e=0,RV=1,kV=2,{Z_FINISH:aM,Z_BLOCK:R2e,Z_TREES:hU,Z_OK:ud,Z_STREAM_END:k2e,Z_NEED_DICT:L2e,Z_STREAM_ERROR:Es,Z_DATA_ERROR:LV,Z_MEM_ERROR:DV,Z_BUF_ERROR:D2e,Z_DEFLATED:lM}=w5,NV=1,cM=2,uM=3,dM=4,fM=5,hM=6,gM=7,mM=8,pM=9,UM=10,zb=11,aa=12,J8=13,bM=14,e7=15,yM=16,EM=17,vM=18,_M=19,gU=20,mU=21,wM=22,TM=23,SM=24,IM=25,xM=26,t7=27,CM=28,AM=29,tn=30,OV=31,N2e=32,O2e=852,P2e=592,F2e=15,B2e=F2e,MM=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function z2e(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const PV=e=>{if(!e||!e.state)return Es;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=NV,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(O2e),t.distcode=t.distdyn=new Int32Array(P2e),t.sane=1,t.back=-1,ud},FV=e=>{if(!e||!e.state)return Es;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,PV(e)},BV=(e,t)=>{let n;if(!e||!e.state)return Es;const i=e.state;return t<0?(n=0,t=-t):(n=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15)?Es:(i.window!==null&&i.wbits!==t&&(i.window=null),i.wrap=n,i.wbits=t,FV(e))},zV=(e,t)=>{if(!e)return Es;const n=new z2e;e.state=n,n.window=null;const i=BV(e,t);return i!==ud&&(e.state=null),i},H2e=e=>zV(e,B2e);let RM=!0,n7,i7;const V2e=e=>{if(RM){n7=new Int32Array(512),i7=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(e0(RV,e.lens,0,288,n7,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;e0(kV,e.lens,0,32,i7,0,e.work,{bits:5}),RM=!1}e.lencode=n7,e.lenbits=9,e.distcode=i7,e.distbits=5},HV=(e,t,n,i)=>{let r;const s=e.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),i>=s.wsize?(s.window.set(t.subarray(n-s.wsize,n),0),s.wnext=0,s.whave=s.wsize):(r=s.wsize-s.wnext,r>i&&(r=i),s.window.set(t.subarray(n-i,n-i+r),s.wnext),i-=r,i?(s.window.set(t.subarray(n-i,n),0),s.wnext=i,s.whave=s.wsize):(s.wnext+=r,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=r))),0},$2e=(e,t)=>{let n,i,r,s,o,a,l,c,u,d,f,h,m,p,b=0,E,y,v,_,S,M,w,T;const A=new Uint8Array(4);let I,R;const D=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!e||!e.state||!e.output||!e.input&&e.avail_in!==0)return Es;n=e.state,n.mode===aa&&(n.mode=J8),o=e.next_out,r=e.output,l=e.avail_out,s=e.next_in,i=e.input,a=e.avail_in,c=n.hold,u=n.bits,d=a,f=l,T=ud;e:for(;;)switch(n.mode){case NV:if(n.wrap===0){n.mode=J8;break}for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(n.wrap&2&&c===35615){n.check=0,A[0]=c&255,A[1]=c>>>8&255,n.check=Jn(n.check,A,2,0),c=0,u=0,n.mode=cM;break}if(n.flags=0,n.head&&(n.head.done=!1),!(n.wrap&1)||(((c&255)<<8)+(c>>8))%31){e.msg="incorrect header check",n.mode=tn;break}if((c&15)!==lM){e.msg="unknown compression method",n.mode=tn;break}if(c>>>=4,u-=4,w=(c&15)+8,n.wbits===0)n.wbits=w;else if(w>n.wbits){e.msg="invalid window size",n.mode=tn;break}n.dmax=1<<n.wbits,e.adler=n.check=1,n.mode=c&512?UM:aa,c=0,u=0;break;case cM:for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(n.flags=c,(n.flags&255)!==lM){e.msg="unknown compression method",n.mode=tn;break}if(n.flags&57344){e.msg="unknown header flags set",n.mode=tn;break}n.head&&(n.head.text=c>>8&1),n.flags&512&&(A[0]=c&255,A[1]=c>>>8&255,n.check=Jn(n.check,A,2,0)),c=0,u=0,n.mode=uM;case uM:for(;u<32;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}n.head&&(n.head.time=c),n.flags&512&&(A[0]=c&255,A[1]=c>>>8&255,A[2]=c>>>16&255,A[3]=c>>>24&255,n.check=Jn(n.check,A,4,0)),c=0,u=0,n.mode=dM;case dM:for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}n.head&&(n.head.xflags=c&255,n.head.os=c>>8),n.flags&512&&(A[0]=c&255,A[1]=c>>>8&255,n.check=Jn(n.check,A,2,0)),c=0,u=0,n.mode=fM;case fM:if(n.flags&1024){for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}n.length=c,n.head&&(n.head.extra_len=c),n.flags&512&&(A[0]=c&255,A[1]=c>>>8&255,n.check=Jn(n.check,A,2,0)),c=0,u=0}else n.head&&(n.head.extra=null);n.mode=hM;case hM:if(n.flags&1024&&(h=n.length,h>a&&(h=a),h&&(n.head&&(w=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(i.subarray(s,s+h),w)),n.flags&512&&(n.check=Jn(n.check,i,h,s)),a-=h,s+=h,n.length-=h),n.length))break e;n.length=0,n.mode=gM;case gM:if(n.flags&2048){if(a===0)break e;h=0;do w=i[s+h++],n.head&&w&&n.length<65536&&(n.head.name+=String.fromCharCode(w));while(w&&h<a);if(n.flags&512&&(n.check=Jn(n.check,i,h,s)),a-=h,s+=h,w)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=mM;case mM:if(n.flags&4096){if(a===0)break e;h=0;do w=i[s+h++],n.head&&w&&n.length<65536&&(n.head.comment+=String.fromCharCode(w));while(w&&h<a);if(n.flags&512&&(n.check=Jn(n.check,i,h,s)),a-=h,s+=h,w)break e}else n.head&&(n.head.comment=null);n.mode=pM;case pM:if(n.flags&512){for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(c!==(n.check&65535)){e.msg="header crc mismatch",n.mode=tn;break}c=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=aa;break;case UM:for(;u<32;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}e.adler=n.check=MM(c),c=0,u=0,n.mode=zb;case zb:if(n.havedict===0)return e.next_out=o,e.avail_out=l,e.next_in=s,e.avail_in=a,n.hold=c,n.bits=u,L2e;e.adler=n.check=1,n.mode=aa;case aa:if(t===R2e||t===hU)break e;case J8:if(n.last){c>>>=u&7,u-=u&7,n.mode=t7;break}for(;u<3;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}switch(n.last=c&1,c>>>=1,u-=1,c&3){case 0:n.mode=bM;break;case 1:if(V2e(n),n.mode=gU,t===hU){c>>>=2,u-=2;break e}break;case 2:n.mode=EM;break;case 3:e.msg="invalid block type",n.mode=tn}c>>>=2,u-=2;break;case bM:for(c>>>=u&7,u-=u&7;u<32;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if((c&65535)!==(c>>>16^65535)){e.msg="invalid stored block lengths",n.mode=tn;break}if(n.length=c&65535,c=0,u=0,n.mode=e7,t===hU)break e;case e7:n.mode=yM;case yM:if(h=n.length,h){if(h>a&&(h=a),h>l&&(h=l),h===0)break e;r.set(i.subarray(s,s+h),o),a-=h,s+=h,l-=h,o+=h,n.length-=h;break}n.mode=aa;break;case EM:for(;u<14;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(n.nlen=(c&31)+257,c>>>=5,u-=5,n.ndist=(c&31)+1,c>>>=5,u-=5,n.ncode=(c&15)+4,c>>>=4,u-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=tn;break}n.have=0,n.mode=vM;case vM:for(;n.have<n.ncode;){for(;u<3;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}n.lens[D[n.have++]]=c&7,c>>>=3,u-=3}for(;n.have<19;)n.lens[D[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,I={bits:n.lenbits},T=e0(M2e,n.lens,0,19,n.lencode,0,n.work,I),n.lenbits=I.bits,T){e.msg="invalid code lengths set",n.mode=tn;break}n.have=0,n.mode=_M;case _M:for(;n.have<n.nlen+n.ndist;){for(;b=n.lencode[c&(1<<n.lenbits)-1],E=b>>>24,y=b>>>16&255,v=b&65535,!(E<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(v<16)c>>>=E,u-=E,n.lens[n.have++]=v;else{if(v===16){for(R=E+2;u<R;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(c>>>=E,u-=E,n.have===0){e.msg="invalid bit length repeat",n.mode=tn;break}w=n.lens[n.have-1],h=3+(c&3),c>>>=2,u-=2}else if(v===17){for(R=E+3;u<R;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}c>>>=E,u-=E,w=0,h=3+(c&7),c>>>=3,u-=3}else{for(R=E+7;u<R;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}c>>>=E,u-=E,w=0,h=11+(c&127),c>>>=7,u-=7}if(n.have+h>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=tn;break}for(;h--;)n.lens[n.have++]=w}}if(n.mode===tn)break;if(n.lens[256]===0){e.msg="invalid code -- missing end-of-block",n.mode=tn;break}if(n.lenbits=9,I={bits:n.lenbits},T=e0(RV,n.lens,0,n.nlen,n.lencode,0,n.work,I),n.lenbits=I.bits,T){e.msg="invalid literal/lengths set",n.mode=tn;break}if(n.distbits=6,n.distcode=n.distdyn,I={bits:n.distbits},T=e0(kV,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,I),n.distbits=I.bits,T){e.msg="invalid distances set",n.mode=tn;break}if(n.mode=gU,t===hU)break e;case gU:n.mode=mU;case mU:if(a>=6&&l>=258){e.next_out=o,e.avail_out=l,e.next_in=s,e.avail_in=a,n.hold=c,n.bits=u,T2e(e,f),o=e.next_out,r=e.output,l=e.avail_out,s=e.next_in,i=e.input,a=e.avail_in,c=n.hold,u=n.bits,n.mode===aa&&(n.back=-1);break}for(n.back=0;b=n.lencode[c&(1<<n.lenbits)-1],E=b>>>24,y=b>>>16&255,v=b&65535,!(E<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(y&&!(y&240)){for(_=E,S=y,M=v;b=n.lencode[M+((c&(1<<_+S)-1)>>_)],E=b>>>24,y=b>>>16&255,v=b&65535,!(_+E<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}c>>>=_,u-=_,n.back+=_}if(c>>>=E,u-=E,n.back+=E,n.length=v,y===0){n.mode=xM;break}if(y&32){n.back=-1,n.mode=aa;break}if(y&64){e.msg="invalid literal/length code",n.mode=tn;break}n.extra=y&15,n.mode=wM;case wM:if(n.extra){for(R=n.extra;u<R;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=TM;case TM:for(;b=n.distcode[c&(1<<n.distbits)-1],E=b>>>24,y=b>>>16&255,v=b&65535,!(E<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(!(y&240)){for(_=E,S=y,M=v;b=n.distcode[M+((c&(1<<_+S)-1)>>_)],E=b>>>24,y=b>>>16&255,v=b&65535,!(_+E<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}c>>>=_,u-=_,n.back+=_}if(c>>>=E,u-=E,n.back+=E,y&64){e.msg="invalid distance code",n.mode=tn;break}n.offset=v,n.extra=y&15,n.mode=SM;case SM:if(n.extra){for(R=n.extra;u<R;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=tn;break}n.mode=IM;case IM:if(l===0)break e;if(h=f-l,n.offset>h){if(h=n.offset-h,h>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=tn;break}h>n.wnext?(h-=n.wnext,m=n.wsize-h):m=n.wnext-h,h>n.length&&(h=n.length),p=n.window}else p=r,m=o-n.offset,h=n.length;h>l&&(h=l),l-=h,n.length-=h;do r[o++]=p[m++];while(--h);n.length===0&&(n.mode=mU);break;case xM:if(l===0)break e;r[o++]=n.length,l--,n.mode=mU;break;case t7:if(n.wrap){for(;u<32;){if(a===0)break e;a--,c|=i[s++]<<u,u+=8}if(f-=l,e.total_out+=f,n.total+=f,f&&(e.adler=n.check=n.flags?Jn(n.check,r,f,o-f):Z0(n.check,r,f,o-f)),f=l,(n.flags?c:MM(c))!==n.check){e.msg="incorrect data check",n.mode=tn;break}c=0,u=0}n.mode=CM;case CM:if(n.wrap&&n.flags){for(;u<32;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(c!==(n.total&4294967295)){e.msg="incorrect length check",n.mode=tn;break}c=0,u=0}n.mode=AM;case AM:T=k2e;break e;case tn:T=LV;break e;case OV:return DV;case N2e:default:return Es}return e.next_out=o,e.avail_out=l,e.next_in=s,e.avail_in=a,n.hold=c,n.bits=u,(n.wsize||f!==e.avail_out&&n.mode<tn&&(n.mode<t7||t!==aM))&&HV(e,e.output,e.next_out,f-e.avail_out),d-=e.avail_in,f-=e.avail_out,e.total_in+=d,e.total_out+=f,n.total+=f,n.wrap&&f&&(e.adler=n.check=n.flags?Jn(n.check,r,f,e.next_out-f):Z0(n.check,r,f,e.next_out-f)),e.data_type=n.bits+(n.last?64:0)+(n.mode===aa?128:0)+(n.mode===gU||n.mode===e7?256:0),(d===0&&f===0||t===aM)&&T===ud&&(T=D2e),T},G2e=e=>{if(!e||!e.state)return Es;let t=e.state;return t.window&&(t.window=null),e.state=null,ud},X2e=(e,t)=>{if(!e||!e.state)return Es;const n=e.state;return n.wrap&2?(n.head=t,t.done=!1,ud):Es},j2e=(e,t)=>{const n=t.length;let i,r,s;return!e||!e.state||(i=e.state,i.wrap!==0&&i.mode!==zb)?Es:i.mode===zb&&(r=1,r=Z0(r,t,n,0),r!==i.check)?LV:(s=HV(e,t,n,n),s?(i.mode=OV,DV):(i.havedict=1,ud))};var Y2e=FV,W2e=BV,K2e=PV,Z2e=H2e,q2e=zV,Q2e=$2e,J2e=G2e,ebe=X2e,tbe=j2e,nbe="pako inflate (from Nodeca project)",ga={inflateReset:Y2e,inflateReset2:W2e,inflateResetKeep:K2e,inflateInit:Z2e,inflateInit2:q2e,inflate:Q2e,inflateEnd:J2e,inflateGetHeader:ebe,inflateSetDictionary:tbe,inflateInfo:nbe};function ibe(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var rbe=ibe;const VV=Object.prototype.toString,{Z_NO_FLUSH:sbe,Z_FINISH:obe,Z_OK:J0,Z_STREAM_END:r7,Z_NEED_DICT:s7,Z_STREAM_ERROR:abe,Z_DATA_ERROR:kM,Z_MEM_ERROR:lbe}=w5;function C5(e){this.options=I5.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new AV,this.strm.avail_out=0;let n=ga.inflateInit2(this.strm,t.windowBits);if(n!==J0)throw new Error(ad[n]);if(this.header=new rbe,ga.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=Q0.string2buf(t.dictionary):VV.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=ga.inflateSetDictionary(this.strm,t.dictionary),n!==J0)))throw new Error(ad[n])}C5.prototype.push=function(e,t){const n=this.strm,i=this.options.chunkSize,r=this.options.dictionary;let s,o,a;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?obe:sbe,VV.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),s=ga.inflate(n,o),s===s7&&r&&(s=ga.inflateSetDictionary(n,r),s===J0?s=ga.inflate(n,o):s===kM&&(s=s7));n.avail_in>0&&s===r7&&n.state.wrap>0&&e[n.next_in]!==0;)ga.inflateReset(n),s=ga.inflate(n,o);switch(s){case abe:case kM:case s7:case lbe:return this.onEnd(s),this.ended=!0,!1}if(a=n.avail_out,n.next_out&&(n.avail_out===0||s===r7))if(this.options.to==="string"){let l=Q0.utf8border(n.output,n.next_out),c=n.next_out-l,u=Q0.buf2string(n.output,l);n.next_out=c,n.avail_out=i-c,c&&n.output.set(n.output.subarray(l,l+c),0),this.onData(u)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(s===J0&&a===0)){if(s===r7)return s=ga.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};C5.prototype.onData=function(e){this.chunks.push(e)};C5.prototype.onEnd=function(e){e===J0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=I5.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function cbe(e,t){const n=new C5(t);if(n.push(e),n.err)throw n.msg||ad[n.err];return n.result}var ube=cbe,dbe={inflate:ube};const{deflate:fbe}=_2e,{inflate:hbe}=dbe;var $V=fbe,GV=hbe;const u2=12,gbe=()=>{const e=new Uint8Array(u2);return window.crypto.getRandomValues(e)},N_=async e=>{const t=await window.crypto.subtle.generateKey({name:"AES-GCM",length:hP},!0,["encrypt","decrypt"]);return e==="cryptoKey"?t:(await window.crypto.subtle.exportKey("jwk",t)).k},XV=(e,t)=>window.crypto.subtle.importKey("jwk",{alg:"A128GCM",ext:!0,k:e,key_ops:["encrypt","decrypt"],kty:"oct"},{name:"AES-GCM",length:hP},!1,[t]),A5=async(e,t)=>{const n=typeof e=="string"?await XV(e,"encrypt"):e,i=gbe(),r=typeof t=="string"?new TextEncoder().encode(t):t instanceof Uint8Array?t:t instanceof Blob?await $l(t):t;return{encryptedBuffer:await window.crypto.subtle.encrypt({name:"AES-GCM",iv:i},n,r),iv:i}},em=async(e,t,n)=>{const i=await XV(n,"decrypt");return window.crypto.subtle.decrypt({name:"AES-GCM",iv:e},i,t)},Hb=e=>{const t=typeof e=="string"?new TextEncoder().encode(e):e instanceof Uint8Array?e:new Uint8Array(e);let n="";for(const i of t)n+=String.fromCharCode(i);return n},jV=e=>{const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let i=0,r=e.length;i<r;i++)n[i]=e.charCodeAt(i);return t},YV=e=>new TextDecoder("utf-8").decode(jV(e)),WV=(e,t=!1)=>t?window.btoa(e):window.btoa(Hb(e)),KV=(e,t=!1)=>t?window.atob(e):YV(window.atob(e)),LM=e=>window.atob(e.replace(/-/g,"+").replace(/_/g,"/").padEnd(e.length+(4-e.length%4)%4,"=")),ZV=({text:e,compress:t})=>{let n;if(t!==!1)try{n=Hb($V(e))}catch(i){console.error("encode: cannot deflate",i)}return{version:"1",encoding:"bstring",compressed:!!n,encoded:n||Hb(e)}},qV=e=>{let t;switch(e.encoding){case"bstring":t=e.compressed?e.encoded:YV(e.encoded);break;default:throw new Error(`decode: unknown encoding "${e.encoding}"`)}return e.compressed?GV(new Uint8Array(jV(t)),{to:"string"}):t},QV=1,d2=4,qf=4,o7={1:8,2:16,4:32};function Vb(e,t,n,i){if(i!=null){if(i>Math.pow(2,o7[t])-1)throw new Error(`attempting to set value higher than the allocated bytes (value: ${i}, bytes: ${t})`);const s=`setUint${o7[t]}`;return new DataView(e.buffer)[s](n,i),e}const r=`getUint${o7[t]}`;return new DataView(e.buffer)[r](n)}const DM=(...e)=>{const t=new Uint8Array(d2+qf*e.length+e.reduce((i,r)=>i+r.byteLength,0));let n=0;Vb(t,d2,n,QV),n+=d2;for(const i of e)Vb(t,qf,n,i.byteLength),n+=qf,t.set(i,n),n+=i.byteLength;return t},NM=e=>{const t=[];let n=0;const i=Vb(e,qf,n);if(i>QV)throw new Error(`invalid version ${i}`);for(n+=d2;;){const r=Vb(e,qf,n);if(n+=qf,t.push(e.slice(n,n+r)),n+=r,n>=e.byteLength)break}return t},mbe=async(e,t)=>{const{encryptedBuffer:n,iv:i}=await A5(t,$V(e));return{iv:i,buffer:new Uint8Array(n)}},JV=async(e,t)=>{const n={version:2,compression:"pako@1",encryption:"AES-GCM"},i=new TextEncoder().encode(JSON.stringify(n)),r=new TextEncoder().encode(JSON.stringify(t.metadata||null)),{iv:s,buffer:o}=await mbe(DM(r,e),t.encryptionKey);return DM(i,s,o)},pbe=async(e,t,n,i)=>(t=new Uint8Array(await em(e,t,n)),i?GV(t):t),e$=async(e,t)=>{const[n,i,r]=NM(e),s=JSON.parse(new TextDecoder().decode(n));try{const[o,a]=NM(await pbe(i,r,t.decryptionKey,!!s.compression));return{metadata:JSON.parse(new TextDecoder().decode(o)),data:a}}catch(o){throw console.error("Error during decompressing and decrypting the file.",s),o}},Rd=(()=>{if(typeof self>"u")return!1;if("top"in self&&self!==top)try{}catch{return!1}else if("showOpenFilePicker"in self)return"showOpenFilePicker";return!1})(),Ube=Ue(Rd?()=>import("./file-open-002ab408-DIuFHtCF.js"):()=>import("./file-open-7c801643-684qeFg4.js"),__vite__mapDeps([]));async function bbe(...e){return(await Ube).default(...e)}Ue(Rd?()=>import("./directory-open-4ed118d0-BzWybGaI.js"):()=>import("./directory-open-01563666-DWU9wJ6I.js"),__vite__mapDeps([]));const ybe=Ue(Rd?()=>import("./file-save-745eba88-Bb9F9Kg7.js"):()=>import("./file-save-3189631c-x92wctJd.js"),__vite__mapDeps([]));async function Ebe(...e){return(await ybe).default(...e)}const OM=500,O_=e=>{var i,r;const t=(i=e.extensions)==null?void 0:i.reduce((s,o)=>(s.push(be[o]),s),[]),n=(r=e.extensions)==null?void 0:r.reduce((s,o)=>o==="jpg"?s.concat(".jpg",".jpeg"):s.concat(`.${o}`),[]);return bbe({description:e.description,extensions:n,mimeTypes:t,multiple:e.multiple??!1,legacySetup:(s,o,a)=>{const l=$a(o,OM),c=()=>{u(),document.addEventListener(te.KEYUP,l),document.addEventListener(te.POINTER_UP,l),l()},u=()=>{var f;if((f=a.files)!=null&&f.length){const h=e.multiple?[...a.files]:a.files[0];s(h)}};requestAnimationFrame(()=>{window.addEventListener(te.FOCUS,c)});const d=window.setInterval(()=>{u()},OM);return f=>{clearInterval(d),l.cancel(),window.removeEventListener(te.FOCUS,c),document.removeEventListener(te.KEYUP,l),document.removeEventListener(te.POINTER_UP,l),f&&(console.warn("Opening the file was canceled (legacy-fs)."),f(new xh))}}})},$b=(e,t)=>Ebe(e,{fileName:`${t.name}.${t.extension}`,description:t.description,extensions:[`.${t.extension}`],mimeTypes:t.mimeTypes},t.fileHandle),vbe=(e,t)=>{const n={};for(const i of e)!i.isDeleted&&"fileId"in i&&i.fileId&&t[i.fileId]&&(n[i.fileId]=t[i.fileId]);return n},ag=(e,t,n,i)=>{const r={type:ds.excalidraw,version:$6.excalidraw,source:s9,elements:i==="local"?pF(e):roe(e),appState:i==="local"?pz(t):Ple(t),files:i==="local"?vbe(e,n):void 0};return JSON.stringify(r,null,2)},t$=async(e,t,n,i=t.name||pP)=>{const r=ag(e,t,n,"local"),s=new Blob([r],{type:be.excalidraw});return{fileHandle:await $b(s,{name:i,extension:"excalidraw",description:"Excalidraw file",fileHandle:z_(t.fileHandle)?null:t.fileHandle})}},_be=async(e,t)=>{const n=await O_({description:"Excalidraw files"});return H_(await V_(n),e,t,n.handle)},wbe=e=>(e==null?void 0:e.type)===ds.excalidraw&&(!e.elements||Array.isArray(e.elements)&&(!e.appState||typeof e.appState=="object")),n$=e=>typeof e=="object"&&e&&e.type===ds.excalidrawLibrary&&(e.version===1||e.version===2),i$=e=>{const t={type:ds.excalidrawLibrary,version:$6.excalidrawLibrary,source:s9,libraryItems:e};return JSON.stringify(t,null,2)},Tbe=async e=>{const t=i$(e);await $b(new Blob([t],{type:be.excalidrawlib}),{name:"library",extension:"excalidrawlib",description:"Excalidraw library file"})},r$=document.createElement("img");r$.src=`data:${be.svg}, ${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#1971c2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>')}`;const s$=document.createElement("img");s$.src=`data:${be.svg}, ${encodeURIComponent('<svg  xmlns="http://www.w3.org/2000/svg"  width="16"  height="16"  viewBox="0 0 24 24"  fill="none"  stroke="#1971c2"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-arrow-big-right-line"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 9v-3.586a1 1 0 0 1 1.707 -.707l6.586 6.586a1 1 0 0 1 0 1.414l-6.586 6.586a1 1 0 0 1 -1.707 -.707v-3.586h-6v-6h6z" /><path d="M3 9v6" /></svg>')}`;const P_=([e,t,n,i],r,s)=>{const o=qoe,a=o/s.zoom.value,l=o/s.zoom.value,c=o/s.zoom.value,u=(e+n)/2,d=(t+i)/2,f=(o-8)/(2*s.zoom.value),h=4/s.zoom.value,m=n+h-f,p=t-h-c+f,[b,E]=q(C(m+a/2,p+l/2),C(u,d),r);return[b-a/2,E-l/2,a,l]},o$=(e,t,n,[i,r])=>{const s=4/n.zoom.value,[o,a,l,c]=Ne(e,t),[u,d,f,h]=P_([o,a,l,c],e.angle,n);return i>u-s&&i<u+s+f&&r>d-s&&r<d+h+s},a7=(e,t,n,[i,r],s)=>!e.link||n.selectedElementIds[e.id]?!1:!s&&n.viewModeEnabled&&v9(i,r,e,t)?!0:o$(e,t,n,C(i,r)),M5=(e,t,n,i,r=!0)=>{e.beginPath(),e.arc(t,n,i,0,Math.PI*2),e.fill(),r&&e.stroke()},R5=(e,t)=>[e.width/t,e.height/t],k5=({canvas:e,scale:t,normalizedWidth:n,normalizedHeight:i,theme:r,isExporting:s,viewBackgroundColor:o})=>{const a=e.getContext("2d");return a.setTransform(1,0,0,1,0,0),a.scale(t,t),s&&r===xe.DARK&&(a.filter=l9),typeof o=="string"?((o==="transparent"||o.length===5||o.length===9||/(hsla|rgba)\(/.test(o))&&a.clearRect(0,0,n,i),a.save(),a.fillStyle=o,a.fillRect(0,0,n,i),a.restore()):a.clearRect(0,0,n,i),a},pU={Bold:"#dddddd",Regular:"#e5e5e5"},Sbe=(e,t,n,i,r,s,o,a)=>{const l=i%t-t,c=r%t-t,u=t*s.value,d=1/s.value;e.save(),s.value===1&&e.translate(l%1?0:.5,c%1?0:.5);for(let f=l;f<l+o+t*2;f+=t){const h=n>1&&Math.round(f-i)%(n*t)===0;if(!h&&u<10)continue;const m=Math.min(1/s.value,h?4:1);e.lineWidth=m;const p=[m*3,d+(m+d)];e.beginPath(),e.setLineDash(h?[]:p),e.strokeStyle=h?pU.Bold:pU.Regular,e.moveTo(f,c-t),e.lineTo(f,Math.ceil(c+a+t*2)),e.stroke()}for(let f=c;f<c+a+t*2;f+=t){const h=n>1&&Math.round(f-r)%(n*t)===0;if(!h&&u<10)continue;const m=Math.min(1/s.value,h?4:1);e.lineWidth=m;const p=[m*3,d+(m+d)];e.beginPath(),e.setLineDash(h?[]:p),e.strokeStyle=h?pU.Bold:pU.Regular,e.moveTo(l-t,f),e.lineTo(Math.ceil(l+o+t*2),f),e.stroke()}e.restore()},PM=(e,t,n,i)=>{t.translate(e.x+i.scrollX,e.y+i.scrollY),t.beginPath(),t.roundRect?t.roundRect(0,0,e.width,e.height,sn.radius/i.zoom.value):t.rect(0,0,e.width,e.height),t.clip(),t.translate(-(e.x+i.scrollX),-(e.y+i.scrollY))},FM={regularLink:null,elementLink:null},BM=(e,t,n,i)=>{if(e.link&&!n.selectedElementIds[e.id]){const[r,s,o,a]=Ne(e,i),[l,c,u,d]=P_([r,s,o,a],e.angle,n),f=l+u/2,h=c+d/2;t.save(),t.translate(n.scrollX+f,n.scrollY+h),t.rotate(e.angle);const m=Yf(e.link)?"elementLink":"regularLink";let p=FM[m];if(!p||p.zoom!==n.zoom.value){p=Object.assign(document.createElement("canvas"),{zoom:n.zoom.value}),p.width=u*window.devicePixelRatio*n.zoom.value,p.height=d*window.devicePixelRatio*n.zoom.value,FM[m]=p;const b=p.getContext("2d");b.scale(window.devicePixelRatio*n.zoom.value,window.devicePixelRatio*n.zoom.value),b.fillStyle="#fff",b.fillRect(0,0,u,d),m==="elementLink"?b.drawImage(s$,0,0,u,d):b.drawImage(r$,0,0,u,d),b.restore()}t.drawImage(p,l-f,c-h,u,d),t.restore()}},a$=({canvas:e,rc:t,elementsMap:n,allElementsMap:i,visibleElements:r,scale:s,appState:o,renderConfig:a})=>{var p;if(e===null)return;const{renderGrid:l=!0,isExporting:c}=a,[u,d]=R5(e,s),f=k5({canvas:e,scale:s,normalizedWidth:u,normalizedHeight:d,theme:o.theme,isExporting:c,viewBackgroundColor:o.viewBackgroundColor});f.scale(o.zoom.value,o.zoom.value),l&&Sbe(f,o.gridSize,o.gridStep,o.scrollX,o.scrollY,o.zoom,u/o.zoom.value,d/o.zoom.value);const h=new Set;r.forEach(b=>{b.groupIds.length>0&&o.frameToHighlight&&o.selectedElementIds[b.id]&&(wc(b,o.frameToHighlight,n)||b.groupIds.find(E=>h.has(E)))&&b.groupIds.forEach(E=>h.add(E))});const m=new Map;r.filter(b=>!is(b)).forEach(b=>{var E;try{const y=b.frameId||((E=o.frameToHighlight)==null?void 0:E.id);if(ue(b)&&b.containerId&&n.has(b.containerId))return;if(f.save(),y&&o.frameRendering.enabled&&o.frameRendering.clip){const _=gE(b,n,o);_&&nC(b,_,o,n,m)&&PM(_,f,a,o),iu(b,n,i,t,f,a,o)}else iu(b,n,i,t,f,a,o);const v=Pe(b,n);v&&iu(v,n,i,t,f,a,o),f.restore(),c||BM(b,f,o,n)}catch(y){console.error(y,b.id,b.x,b.y,b.width,b.height)}}),r.filter(b=>is(b)).forEach(b=>{var E;try{const y=()=>{if(iu(b,n,i,t,f,a,o),is(b)&&(c||lr(b)&&a.embedsValidationStatus.get(b.id)!==!0)&&b.width&&b.height){const _=sB(b);iu(_,n,i,t,f,a,o)}c||BM(b,f,o,n)};if((b.frameId||((E=o.frameToHighlight)==null?void 0:E.id))&&o.frameRendering.enabled&&o.frameRendering.clip){f.save();const _=gE(b,n,o);_&&nC(b,_,o,n,m)&&PM(_,f,a,o),y(),f.restore()}else y()}catch(y){console.error(y)}}),(p=a.pendingFlowchartNodes)==null||p.forEach(b=>{try{iu(b,n,i,t,f,a,o)}catch(E){console.error(E)}})},l$=Qh(e=>{a$(e)},{trailing:!0}),c$=(e,t)=>{if(t){l$(e);return}a$(e)},Xg=(e,t,n)=>{const i={sets:t.sets,shape:t.shape,options:{...t.options,fixedDecimalPlaceDigits:n}};return e.draw(i)},jg=(e,t,n,i,r)=>{if(!i.enabled||!i.clip)return null;const s=Ur(e,r);if(s){const o=t.ownerDocument.createElementNS(at,"g");return o.setAttributeNS(at,"clip-path",`url(#${s.id})`),n.forEach(a=>o.appendChild(a)),o}return null},f2=(e,t,n,i,r,s,o,a)=>{var v;const l={x:s,y:o},[c,u,d,f]=Ne(e,t);let h=(d-c)/2-(e.x-c),m=(f-u)/2-(e.y-u);if(ue(e)){const _=ui(e,t);if(ze(_)){const[S,M,w,T]=Ne(_,t),A=ce.getBoundTextElementPosition(_,e,t);h=(w-S)/2-(A.x-S),m=(T-M)/2-(A.y-M),s=s+A.x-e.x,o=o+A.y-e.y}}const p=180*e.angle/Math.PI;let b=i;if(e.link){const _=i.ownerDocument.createElementNS(at,"a");_.setAttribute("href",Pr(e.link)),b.appendChild(_),b=_}const E=(_,S)=>{b.appendChild(_)},y=(((v=Ur(e,t))==null?void 0:v.opacity)??100)*e.opacity/1e4;switch(e.type){case"selection":throw new Error("Selection rendering is not supported for SVG");case"rectangle":case"diamond":case"ellipse":{const _=Xt.generateElementShape(e,null),S=Xg(n,_,Dg);y!==1&&(S.setAttribute("stroke-opacity",`${y}`),S.setAttribute("fill-opacity",`${y}`)),S.setAttribute("stroke-linecap","round"),S.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${p} ${h} ${m})`);const M=jg(e,b,[S],a.frameRendering,t);E(M||S);break}case"iframe":case"embeddable":{const _=Xt.generateElementShape(e,a),S=Xg(n,_,Dg),M=e.opacity/100;M!==1&&(S.setAttribute("stroke-opacity",`${M}`),S.setAttribute("fill-opacity",`${M}`)),S.setAttribute("stroke-linecap","round"),S.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${p} ${h} ${m})`),E(S);const w=sB(e);f2(w,t,n,b,r,w.x+l.x-e.x,w.y+l.y-e.y,a);const T=Xg(n,_,Dg);for(T.setAttribute("stroke-linecap","round"),T.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${p} ${h} ${m})`);T.firstChild;)T.removeChild(T.firstChild);const A=Gs(Math.min(e.width,e.height),e),I=kf(p9(e.link||""));if(a.renderEmbeddables===!1||(I==null?void 0:I.type)==="document"){const R=i.ownerDocument.createElementNS(at,"a");R.setAttribute("href",Pr(e.link||"")),R.setAttribute("target","_blank"),R.setAttribute("rel","noopener noreferrer"),R.style.borderRadius=`${A}px`,T.appendChild(R)}else{const R=i.ownerDocument.createElementNS(at,"foreignObject");R.style.width=`${e.width}px`,R.style.height=`${e.height}px`,R.style.border="none";const D=R.ownerDocument.createElementNS(at,"div");D.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),D.style.width="100%",D.style.height="100%";const L=D.ownerDocument.createElement("iframe");L.src=(I==null?void 0:I.link)??"",L.style.width="100%",L.style.height="100%",L.style.border="none",L.style.borderRadius=`${A}px`,L.style.top="0",L.style.left="0",L.allowFullscreen=!0,D.appendChild(L),R.appendChild(D),T.appendChild(R)}E(T);break}case"line":case"arrow":{const _=Pe(e,t),S=i.ownerDocument.createElementNS(at,"mask");if(_){S.setAttribute("id",`mask-${e.id}`);const A=i.ownerDocument.createElementNS(at,"rect");s=s||0,o=o||0,A.setAttribute("x","0"),A.setAttribute("y","0"),A.setAttribute("fill","#fff"),A.setAttribute("width",`${e.width+100+s}`),A.setAttribute("height",`${e.height+100+o}`),S.appendChild(A);const I=i.ownerDocument.createElementNS(at,"rect"),R=ce.getBoundTextElementPosition(e,_,t),D=s+R.x-e.x,L=o+R.y-e.y;I.setAttribute("x",D.toString()),I.setAttribute("y",L.toString()),I.setAttribute("fill","#000"),I.setAttribute("width",`${_.width}`),I.setAttribute("height",`${_.height}`),I.setAttribute("opacity","1"),S.appendChild(I)}const M=i.ownerDocument.createElementNS(at,"g");_&&M.setAttribute("mask",`url(#mask-${e.id})`),M.setAttribute("stroke-linecap","round"),Xt.generateElementShape(e,a).forEach(A=>{const I=Xg(n,A,Dg);y!==1&&(I.setAttribute("stroke-opacity",`${y}`),I.setAttribute("fill-opacity",`${y}`)),I.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${p} ${h} ${m})`),e.type==="line"&&Wa(e.points)&&e.backgroundColor!=="transparent"&&I.setAttribute("fill-rule","evenodd"),M.appendChild(I)});const T=jg(e,b,[M,S],a.frameRendering,t);T?(E(T),b.appendChild(T)):(E(M),b.append(S));break}case"freedraw":{const _=Xt.generateElementShape(e,a),S=_?Xg(n,_,Dg):i.ownerDocument.createElementNS(at,"g");y!==1&&(S.setAttribute("stroke-opacity",`${y}`),S.setAttribute("fill-opacity",`${y}`)),S.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${p} ${h} ${m})`),S.setAttribute("stroke","none");const M=i.ownerDocument.createElementNS(at,"path");M.setAttribute("fill",e.strokeColor),M.setAttribute("d",WF(e)),S.appendChild(M);const w=jg(e,b,[S],a.frameRendering,t);E(w||S);break}case"image":{const _=Math.round(e.width),S=Math.round(e.height),M=In(e)&&r[e.fileId];if(M){const{reuseImages:w=!0}=a;let T=`image-${M.id}`,A=e.width,I=e.height;e.crop&&({width:A,height:I}=Ka(e),T=`image-crop-${M.id}-${mF(`${A}x${I}`)}`),w||(T=`image-${e.id}`);let R=i.querySelector(`#${T}`);if(!R){R=i.ownerDocument.createElementNS(at,"symbol"),R.id=T;const X=i.ownerDocument.createElementNS(at,"image");X.setAttribute("href",M.dataURL),X.setAttribute("preserveAspectRatio","none"),e.crop||!w?(X.setAttribute("width",`${A}`),X.setAttribute("height",`${I}`)):(X.setAttribute("width","100%"),X.setAttribute("height","100%")),R.appendChild(X),(b.querySelector("defs")||b).prepend(R)}const D=i.ownerDocument.createElementNS(at,"use");D.setAttribute("href",`#${T}`),a.exportWithDarkMode&&M.mimeType!==be.svg&&D.setAttribute("filter",zF);let L=0,G=0;if(e.crop){const{width:X,height:K}=Ka(e);L=e.crop.x/(e.crop.naturalWidth/X),G=e.crop.y/(e.crop.naturalHeight/K)}const V=h+L,H=m+G;D.setAttribute("width",`${_+L}`),D.setAttribute("height",`${S+G}`),D.setAttribute("opacity",`${y}`),(e.scale[0]!==1||e.scale[1]!==1)&&D.setAttribute("transform",`translate(${V} ${H}) scale(${e.scale[0]} ${e.scale[1]}) translate(${-V} ${-H})`);const $=i.ownerDocument.createElementNS(at,"g");if(e.crop){const X=i.ownerDocument.createElementNS(at,"mask");X.setAttribute("id",`mask-image-crop-${e.id}`),X.setAttribute("fill","#fff");const K=i.ownerDocument.createElementNS(at,"rect");K.setAttribute("x",`${L}`),K.setAttribute("y",`${G}`),K.setAttribute("width",`${_}`),K.setAttribute("height",`${S}`),X.appendChild(K),b.appendChild(X),$.setAttribute("mask",`url(#${X.id})`)}if($.appendChild(D),$.setAttribute("transform",`translate(${s-L} ${o-G}) rotate(${p} ${V} ${H})`),e.roundness){const X=i.ownerDocument.createElementNS(at,"clipPath");X.id=`image-clipPath-${e.id}`;const K=i.ownerDocument.createElementNS(at,"rect"),le=Gs(Math.min(e.width,e.height),e);K.setAttribute("width",`${e.width}`),K.setAttribute("height",`${e.height}`),K.setAttribute("rx",`${le}`),K.setAttribute("ry",`${le}`),X.appendChild(K),E(X),$.setAttributeNS(at,"clip-path",`url(#${X.id})`)}const j=jg(e,b,[$],a.frameRendering,t);E(j||$)}break}case"frame":case"magicframe":{if(a.frameRendering.enabled&&a.frameRendering.outline){const _=document.createElementNS(at,"rect");_.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${p} ${h} ${m})`),_.setAttribute("width",`${e.width}px`),_.setAttribute("height",`${e.height}px`),_.setAttribute("rx",sn.radius.toString()),_.setAttribute("ry",sn.radius.toString()),_.setAttribute("fill","none"),_.setAttribute("stroke",sn.strokeColor),_.setAttribute("stroke-width",sn.strokeWidth.toString()),E(_)}break}default:if(ue(e)){const _=i.ownerDocument.createElementNS(at,"g");y!==1&&(_.setAttribute("stroke-opacity",`${y}`),_.setAttribute("fill-opacity",`${y}`)),_.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${p} ${h} ${m})`);const S=e.text.replace(/\r\n?/g,`
`).split(`
`),M=zm(e.fontSize,e.lineHeight),w=e.textAlign==="center"?e.width/2:e.textAlign==="right"?e.width:0,T=bP(e.fontFamily,e.fontSize,M),A=IP(e.text)?"rtl":"ltr",I=e.textAlign==="center"?"middle":e.textAlign==="right"||A==="rtl"?"end":"start";for(let D=0;D<S.length;D++){const L=i.ownerDocument.createElementNS(at,"text");L.textContent=S[D],L.setAttribute("x",`${w}`),L.setAttribute("y",`${D*M+T}`),L.setAttribute("font-family",Om(e)),L.setAttribute("font-size",`${e.fontSize}px`),L.setAttribute("fill",e.strokeColor),L.setAttribute("text-anchor",I),L.setAttribute("style","white-space: pre;"),L.setAttribute("direction",A),L.setAttribute("dominant-baseline","alphabetic"),_.appendChild(L)}const R=jg(e,b,[_],a.frameRendering,t);E(R||_)}else throw new Error(`Unimplemented type ${e.type}`)}},Ibe=(e,t,n,i,r,s)=>{i&&(e.filter(o=>!is(o)).forEach(o=>{if(!o.isDeleted){if(ue(o)&&o.containerId&&t.has(o.containerId))return;try{f2(o,t,n,i,r,o.x+s.offsetX,o.y+s.offsetY,s);const a=Pe(o,t);a&&f2(a,t,n,i,r,a.x+s.offsetX,a.y+s.offsetY,s)}catch(a){console.error(a)}}}),e.filter(o=>is(o)).forEach(o=>{if(!o.isDeleted)try{f2(o,t,n,i,r,o.x+s.offsetX,o.y+s.offsetY,s)}catch(a){console.error(a)}}))},xbe=(e,t)=>{if(e.width<=t)return e;const i=document.createElement("canvas").getContext("2d");i.font=Ct({fontFamily:e.fontFamily,fontSize:e.fontSize});let r=e.text;if(i.measureText(r).width>t)for(let o=r.length;o>0;o--){const a=`${r.slice(0,o)}...`;if(i.measureText(a).width<=t){r=a;break}}return Ce(e,{text:r,width:t})},Cbe=(e,t)=>{const n=[];for(const i of e){if(Ie(i)){let r=Hr({x:i.x,y:i.y-sn.nameOffsetY,fontFamily:It.Helvetica,fontSize:sn.nameFontSize,lineHeight:sn.nameLineHeight,strokeColor:t.exportWithDarkMode?sn.nameColorDarkTheme:sn.nameColorLightTheme,text:vF(i)});r.y-=r.height,r=xbe(r,i.width),n.push(r)}n.push(i)}return n},u$=(e,t)=>(t=t||to().frameRendering,{enabled:e?!0:t.enabled,outline:e?!1:t.outline,name:e?!1:t.name,clip:e?!0:t.clip}),d$=({elements:e,exportingFrame:t,frameRendering:n,exportWithDarkMode:i})=>{let r;return t?r=B9(e,t):n.enabled&&n.name?r=Cbe(e,{exportWithDarkMode:i}):r=e,r},f$=async(e,t,n,{exportBackground:i,exportPadding:r=qh,viewBackgroundColor:s,exportingFrame:o},a=(c,u)=>{const d=document.createElement("canvas");return d.width=c*t.exportScale,d.height=u*t.exportScale,{canvas:d,scale:t.exportScale}},l=async()=>{await Pa.loadElementsFonts(e)})=>{await l();const c=u$(o??null,t.frameRendering??null);o&&(c.clip=!1);const u=d$({elements:e,exportingFrame:o,exportWithDarkMode:t.exportWithDarkMode,frameRendering:c});o&&(r=0);const[d,f,h,m]=B_(o?[o]:F9(u),r),{canvas:p,scale:b=1}=a(h,m),E=to(),{imageCache:y}=await aB({imageCache:new Map,fileIds:lB(u).map(v=>v.fileId),files:n});return c$({canvas:p,rc:Fc.canvas(p),elementsMap:Us(Se(u)),allElementsMap:Us(Se(Ya(e))),visibleElements:u,scale:b,appState:{...t,frameRendering:c,viewBackgroundColor:i?s:null,scrollX:-d+r,scrollY:-f+r,zoom:E.zoom,shouldCacheIgnoreZoom:!1,theme:t.exportWithDarkMode?xe.DARK:xe.LIGHT},renderConfig:{canvasBackgroundColor:s,imageCache:y,renderGrid:!1,isExporting:!0,embedsValidationStatus:new Map,elementsPendingErasure:new Set,pendingFlowchartNodes:null}}),p},m1=e=>document.createComment(` ${e} `),F_=async(e,t,n,i)=>{const r=u$((i==null?void 0:i.exportingFrame)??null,t.frameRendering??null);let{exportPadding:s=qh,exportWithDarkMode:o=!1,viewBackgroundColor:a,exportScale:l=1,exportEmbedScene:c}=t;const{exportingFrame:u=null}=i||{},d=d$({elements:e,exportingFrame:u,exportWithDarkMode:o,frameRendering:r});u&&(s=0);const[f,h,m,p]=B_(u?[u]:F9(d),s),b=-f+s,E=-h+s,y=document.createElementNS(at,"svg");y.setAttribute("version","1.1"),y.setAttribute("xmlns",at),y.setAttribute("viewBox",`0 0 ${m} ${p}`),y.setAttribute("width",`${m*l}`),y.setAttribute("height",`${p*l}`),o&&y.setAttribute("filter",l9);const v=y.ownerDocument.createElementNS(at,"defs"),_=y.ownerDocument.createElementNS(at,"metadata");if(y.appendChild(m1("svg-source:excalidraw")),y.appendChild(_),y.appendChild(v),c)try{Abe({metadataElement:_,payload:ag(e,t,n||{},"local")})}catch(R){console.error(R)}const S=P9(e);if(S.length){const R=Se(e);for(const D of S){const L=y.ownerDocument.createElementNS(at,"clipPath");L.setAttribute("id",D.id);const[G,V,H,$]=Ne(D,R),j=(H-G)/2-(D.x-G),X=($-V)/2-(D.y-V),K=y.ownerDocument.createElementNS(at,"rect");K.setAttribute("transform",`translate(${D.x+b} ${D.y+E}) rotate(${D.angle} ${j} ${X})`),K.setAttribute("width",`${D.width}`),K.setAttribute("height",`${D.height}`),u||(K.setAttribute("rx",`${sn.radius}`),K.setAttribute("ry",`${sn.radius}`)),L.appendChild(K),v.appendChild(L)}}const M=i!=null&&i.skipInliningFonts?[]:await Pa.generateFontFaceDeclarations(e),w=`
      `,T=y.ownerDocument.createElementNS(at,"style");if(T.classList.add("style-fonts"),T.appendChild(document.createTextNode(`${w}${M.join(w)}`)),v.appendChild(T),t.exportBackground&&a){const R=y.ownerDocument.createElementNS(at,"rect");R.setAttribute("x","0"),R.setAttribute("y","0"),R.setAttribute("width",`${m}`),R.setAttribute("height",`${p}`),R.setAttribute("fill",a),y.appendChild(R)}const A=Fc.svg(y),I=(i==null?void 0:i.renderEmbeddables)??!1;return Ibe(d,Us(Se(d)),A,y,n||{},{offsetX:b,offsetY:E,isExporting:!0,exportWithDarkMode:o,renderEmbeddables:I,frameRendering:r,canvasBackgroundColor:a,embedsValidationStatus:I?new Map(d.filter(R=>Ie(R)).map(R=>[R.id,!0])):new Map,reuseImages:(i==null?void 0:i.reuseImages)??!0}),y},Abe=({payload:e,metadataElement:t})=>{const n=WV(JSON.stringify(ZV({text:e})),!0);t.appendChild(m1(`payload-type:${be.excalidraw}`)),t.appendChild(m1("payload-version:2")),t.appendChild(m1("payload-start")),t.appendChild(document.createTextNode(n)),t.appendChild(m1("payload-end"))},Mbe=({svg:e})=>{if(e.includes(`payload-type:${be.excalidraw}`)){const t=e.match(/<!-- payload-start -->\s*(.+?)\s*<!-- payload-end -->/);if(!t)throw new Error("INVALID");const n=e.match(/<!-- payload-version:(\d+) -->/),r=((n==null?void 0:n[1])||"1")!=="1";try{const s=KV(t[1],r),o=JSON.parse(s);if(!("encoded"in o)){if("type"in o&&o.type===ds.excalidraw)return s;throw new Error("FAILED")}return qV(o)}catch(s){throw console.error(s),new Error("FAILED")}}throw new Error("INVALID")},B_=(e,t)=>{const[n,i,r,s]=_t(e),o=Ni(n,r)+t*2,a=Ni(i,s)+t*2;return[n,i,o,a]},Rbe=(e,t,n)=>{const[,,i,r]=B_(e,t).map(s=>Math.trunc(s*n));return[i,r]},kbe={selection:!0,text:!0,rectangle:!0,diamond:!0,ellipse:!0,line:!0,image:!0,arrow:!0,freedraw:!0,eraser:!1,custom:!0,frame:!0,embeddable:!0,hand:!0,laser:!1,magicframe:!1},Lbe=e=>Object.keys(It).includes(e)?It[e]:Pc,qd=(e,t)=>{if(!t)return null;const n=t.focus||0;return fe(e)?mb(t)?{...t,focus:n,fixedPoint:Q6(t.fixedPoint??[0,0])}:null:{...t,focus:n}},bl=(e,t)=>{const n={type:t.type||e.type,version:e.version||1,versionNonce:e.versionNonce??0,index:e.index??null,isDeleted:e.isDeleted??!1,id:e.id||zr(),fillStyle:e.fillStyle||un.fillStyle,strokeWidth:e.strokeWidth||un.strokeWidth,strokeStyle:e.strokeStyle??un.strokeStyle,roughness:e.roughness??un.roughness,opacity:e.opacity==null?un.opacity:e.opacity,angle:e.angle||0,x:t.x??e.x??0,y:t.y??e.y??0,strokeColor:e.strokeColor||un.strokeColor,backgroundColor:e.backgroundColor||un.backgroundColor,width:e.width||0,height:e.height||0,seed:e.seed??1,groupIds:e.groupIds??[],frameId:e.frameId??null,roundness:e.roundness?e.roundness:e.strokeSharpness==="round"?{type:eg(e.type)?Nn.LEGACY:Nn.PROPORTIONAL_RADIUS}:null,boundElements:e.boundElementIds?e.boundElementIds.map(r=>({type:"arrow",id:r})):e.boundElements??[],updated:e.updated??Jh(),link:e.link?Pr(e.link):null,locked:e.locked??!1};("customData"in e||"customData"in t)&&(n.customData="customData"in t?t.customData:e.customData);const i={...e,...n,...gF(n),...t};return delete i.strokeSharpness,delete i.boundElementIds,i},Dbe=e=>{switch(e={...e},e.type){case"text":delete e.rawText;let t=e.fontSize,n=e.fontFamily;if("font"in e){const[u,d]=e.font.split(" ");t=parseFloat(u),n=Lbe(d)}const i=typeof e.text=="string"&&e.text||"",r=e.lineHeight||(e.height?nse(e):Ju(e.fontFamily));return e=bl(e,{fontSize:t,fontFamily:n,text:i,textAlign:e.textAlign||Dm,verticalAlign:e.verticalAlign||eb,containerId:e.containerId??null,originalText:e.originalText||i,autoResize:e.autoResize??!0,lineHeight:r}),!i&&!e.isDeleted&&(e={...e,originalText:i,isDeleted:!0},e=Gm(e)),e;case"freedraw":return bl(e,{points:e.points,lastCommittedPoint:null,simulatePressure:e.simulatePressure,pressures:e.pressures});case"image":return bl(e,{status:e.status||"pending",fileId:e.fileId,scale:e.scale||[1,1],crop:e.crop??null});case"line":case"draw":const{startArrowhead:s=null,endArrowhead:o=null}=e;let a=e.x,l=e.y,c=!Array.isArray(e.points)||e.points.length<2?[C(0,0),C(e.width,e.height)]:e.points;return(c[0][0]!==0||c[0][1]!==0)&&({points:c,x:a,y:l}=ce.getNormalizedPoints(e)),bl(e,{type:e.type==="draw"?"line":e.type,startBinding:qd(e,e.startBinding),endBinding:qd(e,e.endBinding),lastCommittedPoint:null,startArrowhead:s,endArrowhead:o,points:c,x:a,y:l,...Uh(c)});case"arrow":{const{startArrowhead:u=null,endArrowhead:d="arrow"}=e;let f=e.x,h=e.y,m=!Array.isArray(e.points)||e.points.length<2?[C(0,0),C(e.width,e.height)]:e.points;(m[0][0]!==0||m[0][1]!==0)&&({points:m,x:f,y:h}=ce.getNormalizedPoints(e));const p={type:e.type,startBinding:qd(e,e.startBinding),endBinding:qd(e,e.endBinding),lastCommittedPoint:null,startArrowhead:u,endArrowhead:d,points:m,x:f,y:h,elbowed:e.elbowed,...Uh(m)};return fe(e)?bl(e,{...p,elbowed:!0,startBinding:qd(e,e.startBinding),endBinding:qd(e,e.endBinding),fixedSegments:e.fixedSegments,startIsSpecial:e.startIsSpecial,endIsSpecial:e.endIsSpecial}):bl(e,p)}case"ellipse":case"rectangle":case"diamond":case"iframe":case"embeddable":return bl(e,{});case"magicframe":case"frame":return bl(e,{name:e.name??null})}return null},Nbe=(e,t)=>{if(e.boundElements){const n=e.boundElements.slice(),i=new Set;e.boundElements=n.reduce((r,s)=>{const o=t.get(s.id);if(o&&!i.has(s.id)){if(i.add(s.id),o.isDeleted)return r;r.push(s),ue(o)&&!o.containerId&&(o.containerId=e.id)}return r},[])}},Obe=(e,t)=>{const n=e.containerId?t.get(e.containerId):null;if(!n){e.containerId=null;return}if(!e.isDeleted&&n.boundElements&&!n.boundElements.find(i=>i.id===e.id)){const i=(n.boundElements||(n.boundElements=[])).slice();i.push({type:"text",id:e.id}),n.boundElements=i}},Pbe=(e,t)=>{e.frameId&&(t.get(e.frameId)||(e.frameId=null))},dd=(e,t,n)=>{const i=new Set,r=t?Se(t):null,s=Ya((e||[]).reduce((a,l)=>{if(l.type!=="selection"&&!id(l)){let c=Dbe(l);if(c){const u=r==null?void 0:r.get(l.id);u&&u.version>c.version&&(c=Gm(c,u.version)),i.has(c.id)&&(c={...c,id:zr()}),i.add(c.id),a.push(c)}}return a},[]));if(!(n!=null&&n.repairBindings))return s;const o=Se(s);for(const a of s)a.frameId&&Pbe(a,o),ue(a)&&a.containerId?Obe(a,o):a.boundElements&&Nbe(a,o),n.refreshDimensions&&ue(a)&&Object.assign(a,iB(a,ui(a,o),o)),ke(a)&&(a.startBinding&&(!o.has(a.startBinding.elementId)||!ze(a))&&(a.startBinding=null),a.endBinding&&(!o.has(a.endBinding.elementId)||!ze(a))&&(a.endBinding=null));return s.map(a=>{if(fe(a)&&a.startBinding==null&&a.endBinding==null&&!hF(a.points))return{...a,...tg(a,o,{points:[C(0,0),a.points[a.points.length-1]]}),index:a.index};if(fe(a)&&a.startBinding&&a.endBinding&&a.startBinding.elementId===a.endBinding.elementId&&a.points.length>1&&a.points.some(([l,c])=>Math.abs(l)>1e6||Math.abs(c)>1e6)){console.error("Fixing self-bound elbow arrow",a.id);const l=o.get(a.startBinding.elementId);return l?{...a,x:l.x+l.width/2,y:l.y-5,width:l.width,height:l.height,points:[C(0,0),C(0,-10),C(l.width/2+5,-10),C(l.width/2+5,l.height/2+5)]}:(console.error("Bound element not found",a.startBinding.elementId),a)}return a})},Fbe=(e,t,n)=>{const i=t[e];return i!==void 0?i:n[e]},zM={isSidebarDocked:(e,t)=>["defaultSidebarDockedPreference",e.isSidebarDocked??Fbe("defaultSidebarDockedPreference",e,t)]},h$=(e,t)=>{var r;e=e||{};const n=to(),i={};for(const s of Object.keys(zM))if(s in e){const[o,a]=zM[s](e,n);i[o]=a}for(const[s,o]of Object.entries(n)){const a=e[s],l=t?t[s]:void 0;i[s]=a!==void 0?a:l!==void 0?l:o}return{...i,cursorButton:(t==null?void 0:t.cursorButton)||"up",penDetected:(t==null?void 0:t.penDetected)??(e.penMode?e.penDetected??!1:!1),activeTool:{...Tn(n,i.activeTool.type&&kbe[i.activeTool.type]?i.activeTool:{type:"selection"}),lastActiveTool:null,locked:i.activeTool.locked??!1},zoom:{value:Aa(V1(e.zoom)?e.zoom:((r=e.zoom)==null?void 0:r.value)??n.zoom.value)},openSidebar:typeof e.openSidebar=="string"?{name:fs.name}:i.openSidebar,gridSize:Dle(V1(e.gridSize)?e.gridSize:nb),gridStep:gz(V1(e.gridStep)?e.gridStep:fP),editingFrame:null}},fd=(e,t,n,i)=>({elements:dd(e==null?void 0:e.elements,n,i),appState:h$(e==null?void 0:e.appState,t||null),files:(e==null?void 0:e.files)||{}}),HM=e=>{const t=dd(Nt(e.elements),null);return t.length?{...e,elements:t}:null},L5=(e=[],t)=>{const n=[];for(const i of e)if(Array.isArray(i)){const r=HM({status:t,elements:i,id:zr(),created:Date.now()});r&&n.push(r)}else{const r=i,s=HM({...r,id:r.id||zr(),status:r.status||t,created:r.created||Date.now()});s&&n.push(s)}return n},g$=async e=>{let t;if(e.type===be.png)try{return await(await Ue(()=>Promise.resolve().then(()=>z$),void 0)).decodePngMetadata(e)}catch(n){throw n.message==="INVALID"?new bu("Image doesn't contain scene","IMAGE_NOT_CONTAINS_SCENE_DATA"):new bu("Error: cannot restore image")}else if("text"in Blob?t=await e.text():t=await new Promise(n=>{const i=new FileReader;i.readAsText(e,"utf8"),i.onloadend=()=>{i.readyState===FileReader.DONE&&n(i.result)}}),e.type===be.svg)try{return Mbe({svg:t})}catch(n){throw n.message==="INVALID"?new bu("Image doesn't contain scene","IMAGE_NOT_CONTAINS_SCENE_DATA"):new bu("Error: cannot restore image")}return t},m$=e=>{var t;return e&&((t=e.name.match(/\.(json|excalidraw|png|svg)$/))==null?void 0:t[1])||null},Bbe=e=>e==="png"||e==="svg",z_=e=>{const t=m$(e);return t==="png"||t==="svg"},p$=e=>!!e&&Object.values(mh).includes(e),Fu=e=>{const{type:t}=e||{};return p$(t)},U$=async(e,t,n,i)=>{const r=await g$(e);let s;try{try{s=JSON.parse(r)}catch(o){throw Fu(e)?new bu("Image doesn't contain scene","IMAGE_NOT_CONTAINS_SCENE_DATA"):o}if(wbe(s))return{type:be.excalidraw,data:fd({elements:pF(s.elements||[]),appState:{theme:t==null?void 0:t.theme,fileHandle:i||e.handle||null,...pz(s.appState||{}),...t?H0(s.elements||[],t):{}},files:s.files},t,n,{repairBindings:!0,refreshDimensions:!1})};if(n$(s))return{type:be.excalidrawlib,data:s};throw new Error("Error: invalid file")}catch(o){throw o instanceof bu?o:new Error("Error: invalid file")}},H_=async(e,t,n,i)=>{const r=await U$(e,t,n,i);if(r.type!==be.excalidraw)throw new Error("Error: invalid file");return r.data},b$=(e,t="unpublished")=>{const n=JSON.parse(e);if(!n$(n))throw new Error("Invalid library");const i=n.libraryItems||n.library;return L5(i,t)},zbe=async(e,t="unpublished")=>b$(await g$(e),t),tm=async e=>new Promise(async(t,n)=>{try{Fm(e)&&(e=await e),e.toBlob(i=>{if(!i)return n(new kue("Error: Canvas too big","CANVAS_POSSIBLY_TOO_BIG"));t(i)})}catch(i){n(i)}}),Hbe=async e=>{try{const t=await window.crypto.subtle.digest("SHA-1",await $l(e));return AP(new Uint8Array(t))}catch(t){return console.error(t),XP(40)}},t4=async e=>new Promise((t,n)=>{const i=new FileReader;i.onload=()=>{const r=i.result;t(r)},i.onerror=r=>n(r),i.readAsDataURL(e)}),Vbe=(e,t)=>`data:${t};base64,${WV(Hb(e),!0)}`,$be=(e,t="")=>{const n=e.indexOf(","),i=atob(e.slice(n+1)),r=e.slice(0,n).split(":")[1].split(";")[0],s=new ArrayBuffer(i.length),o=new Uint8Array(s);for(let a=0;a<i.length;a++)o[a]=i.charCodeAt(a);return new File([s],t,{type:r})},Gbe=e=>KV(e.slice(e.indexOf(",")+1)),n4=async(e,t)=>{if(e.type===be.svg)return e;const[n,i]=await Promise.all([Ue(()=>import("./pica-D2f-msTZ.js").then(s=>s.p),__vite__mapDeps([2,3])).then(s=>s.default),Ue(()=>import("./image-blob-reduce.esm-B6b2_-a4.js"),__vite__mapDeps([])).then(s=>s.default)]),r=i({pica:n({features:["js","wasm"]})});if(t.outputType){const{outputType:s}=t;r._create_blob=function(o){return this.pica.toBlob(o.out_canvas,s,.8).then(a=>(o.out_blob=a,o))}}if(!Fu(e))throw new Error("Error: unsupported file type",{cause:"UNSUPPORTED"});return new File([await r.toBlob(e,{max:t.maxWidthOrHeight,alpha:!0})],e.name,{type:t.outputType||e.type})},VM=(e,t="")=>new File([new TextEncoder().encode(e)],t,{type:be.svg}),Xbe=async(e,t="")=>{let n;try{n=await fetch(e)}catch{throw new Error("Error: failed to fetch image",{cause:"FETCH_ERROR"})}if(!n.ok)throw new Error("Error: failed to fetch image",{cause:"FETCH_ERROR"});const i=await n.blob();if(i.type&&Fu(i)){const r=t||i.name||"";return new File([i],r,{type:i.type})}throw new Error("Error: unsupported file type",{cause:"UNSUPPORTED"})},jbe=async e=>{const t=e.dataTransfer.files.item(0),n=await Ybe(e);return{file:t?await V_(t):null,fileHandle:n}},Ybe=async e=>{if(Rd)try{return await e.dataTransfer.items[0].getAsFileSystemHandle()||null}catch(t){return console.warn(t.name,t.message),null}return null},$M=e=>{let t=null;const n=`${[...new Uint8Array(e).slice(0,8)].join(" ")} `,i={png:"137 80 78 71 13 10 26 10 ",jpg:"255 216 255 ",gif:"71 73 70 56 57 97 "};return n===i.png?t=be.png:n.startsWith(i.jpg)?t=be.jpg:n.startsWith(i.gif)&&(t=be.gif),t},p1=(e,t,n)=>new File([e],n||"",{type:t}),V_=async e=>{var t,n;if(e.type){if(Fu(e)){const i=await $l(e),r=$M(i);r&&r!==e.type&&(e=p1(i,r,e.name))}}else if((t=e==null?void 0:e.name)!=null&&t.endsWith(".excalidrawlib"))e=p1(await $l(e),be.excalidrawlib,e.name);else if((n=e==null?void 0:e.name)!=null&&n.endsWith(".excalidraw"))e=p1(await $l(e),be.excalidraw,e.name);else{const i=await $l(e),r=$M(i);r&&(e=p1(i,r,e.name))}return e},$l=e=>"arrayBuffer"in e?e.arrayBuffer():new Promise((t,n)=>{const i=new FileReader;i.onload=r=>{var s;if(!((s=r.target)!=null&&s.result))return n(new Error("Couldn't convert blob to ArrayBuffer"));t(r.target.result)},i.readAsArrayBuffer(e)}),Ds=32,Rt=12,oc=256,y$=50,cu="NOT_SPREADSHEET",nm="VALID_SPREADSHEET",U1=e=>{const t=/^([-+]?)[$€£¥₩]?([-+]?)([\d.,]+)[%]?$/.exec(e);return t?parseFloat(`${(t[1]||t[2])+t[3]}`.replace(/,/g,"")):null},l7=(e,t)=>e.slice(1).every(n=>U1(n[t])!==null),GM=e=>{const t=e[0].length;if(t>2)return{type:cu,reason:"More than 2 columns"};if(t===1){if(!l7(e,0))return{type:cu,reason:"Value is not numeric"};const l=U1(e[0][0])===null,c=(l?e.slice(1):e).map(u=>U1(u[0]));return c.length<2?{type:cu,reason:"Less than two rows"}:{type:nm,spreadsheet:{title:l?e[0][0]:null,labels:null,values:c}}}const n=l7(e,0),i=l7(e,1);if(!n&&!i)return{type:cu,reason:"Value is not numeric"};const[r,s]=i?[0,1]:[1,0],o=U1(e[0][s])===null,a=o?e.slice(1):e;return a.length<2?{type:cu,reason:"Less than 2 rows"}:{type:nm,spreadsheet:{title:o?e[0][s]:null,labels:a.map(l=>l[r]),values:a.map(l=>U1(l[s]))}}},Wbe=e=>{const t=[];for(let n=0;n<e[0].length;n++){const i=[];for(let r=0;r<e.length;r++)i.push(e[r][n]);t.push(i)}return t},Kbe=e=>{let t=e.trim().split(`
`).map(s=>s.trim().split("	"));if(t.length&&t[0].length!==2&&(t=e.trim().split(`
`).map(s=>s.trim().split(","))),t.length===0)return{type:cu,reason:"No values"};const n=t[0].length;if(!t.every(s=>s.length===n))return{type:cu,reason:"All rows don't have same number of columns"};const r=GM(t);if(r.type!==nm){const s=GM(Wbe(t));if(s.type===nm)return s}return r},Gb=wne(Ene),Ws={fillStyle:"hachure",fontFamily:Pc,fontSize:ul,opacity:100,roughness:1,strokeColor:Xe.black,roundness:null,strokeStyle:"solid",strokeWidth:1,verticalAlign:kr.MIDDLE,locked:!1},E$=e=>{const t=(Ds+Rt)*e.values.length+Rt,n=oc+Rt*2;return{chartWidth:t,chartHeight:n}},Zbe=(e,t,n,i,r)=>{var s;return((s=e.labels)==null?void 0:s.map((o,a)=>Hr({groupIds:[i],backgroundColor:r,...Ws,text:o.length>8?`${o.slice(0,5)}...`:o,x:t+a*(Ds+Rt)+Rt*2,y:n+Rt/2,width:Ds,angle:5.87,fontSize:16,textAlign:"center",verticalAlign:"top"})))||[]},qbe=(e,t,n,i,r)=>{const s=Hr({groupIds:[i],backgroundColor:r,...Ws,x:t-Rt,y:n-Rt,text:"0",textAlign:"right"}),o=Hr({groupIds:[i],backgroundColor:r,...Ws,x:t-Rt,y:n-oc-s.height/2,text:Math.max(...e.values).toLocaleString(),textAlign:"right"});return[s,o]},Qbe=(e,t,n,i,r)=>{const{chartWidth:s,chartHeight:o}=E$(e),a=Pu({backgroundColor:r,groupIds:[i],...Ws,type:"line",x:t,y:n,width:s,points:[C(0,0),C(s,0)]}),l=Pu({backgroundColor:r,groupIds:[i],...Ws,type:"line",x:t,y:n,height:o,points:[C(0,0),C(0,-280)]}),c=Pu({backgroundColor:r,groupIds:[i],...Ws,type:"line",x:t,y:n-oc-Rt,strokeStyle:"dotted",width:s,opacity:y$,points:[C(0,0),C(s,0)]});return[a,l,c]},v$=(e,t,n,i,r,s)=>{const{chartWidth:o}=E$(e),a=e.title?Hr({backgroundColor:r,groupIds:[i],...Ws,text:e.title,x:t+o/2,y:n-oc-Rt*2-ul,roundness:null,textAlign:"center"}):null;return[...a?[a]:[],...Zbe(e,t,n,i,r),...qbe(e,t,n,i,r),...Qbe(e,t,n,i,r)]},Jbe=(e,t,n)=>{const i=Math.max(...e.values),r=zr(),s=Gb[Math.floor(Math.random()*Gb.length)];return[...e.values.map((a,l)=>{const c=a/i*oc;return Za({backgroundColor:s,groupIds:[r],...Ws,type:"rectangle",x:t+l*(Ds+Rt)+Rt,y:n-c-Rt,width:Ds,height:c})}),...v$(e,t,n,r,s)]},e6e=(e,t,n)=>{const i=Math.max(...e.values),r=zr(),s=Gb[Math.floor(Math.random()*Gb.length)];let o=0;const a=[];for(const p of e.values){const b=o*(Ds+Rt),E=-(p/i)*oc;a.push([b,E]),o++}const l=Math.max(...a.map(p=>p[0])),c=Math.max(...a.map(p=>p[1])),u=Math.min(...a.map(p=>p[0])),d=Math.min(...a.map(p=>p[1])),f=Pu({backgroundColor:s,groupIds:[r],...Ws,type:"line",x:t+Rt+Ds/2,y:n-Rt,height:c-d,width:l-u,strokeWidth:2,points:a}),h=e.values.map((p,b)=>{const E=b*(Ds+Rt)+Rt/2,y=-(p/i)*oc+Rt/2;return Za({backgroundColor:s,groupIds:[r],...Ws,fillStyle:"solid",strokeWidth:2,type:"ellipse",x:t+E+Ds/2,y:n+y-Rt*2,width:Rt,height:Rt})}),m=e.values.map((p,b)=>{const E=b*(Ds+Rt)+Rt/2,y=p/i*oc+Rt/2+Rt;return Pu({backgroundColor:s,groupIds:[r],...Ws,type:"line",x:t+E+Ds/2+Rt/2,y:n-y,height:y,strokeStyle:"dotted",opacity:y$,points:[C(0,0),C(0,y)]})});return[...v$(e,t,n,r,s),f,...m,...h]},t6e=(e,t,n,i)=>e==="line"?e6e(t,n,i):Jbe(t,n,i),$_="clipboard"in navigator&&"writeText"in navigator.clipboard,G_="clipboard"in navigator&&"write"in navigator.clipboard&&"ClipboardItem"in window&&"toBlob"in HTMLCanvasElement.prototype,n6e=e=>!!([ds.excalidraw,ds.excalidrawClipboard,ds.excalidrawClipboardWithAPI].includes(e==null?void 0:e.type)&&Array.isArray(e.elements)),i6e=({types:e,files:t})=>{var i,r,s,o;!e&&!t&&console.warn("createPasteEvent: no types or files provided");const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});if(e)for(const[a,l]of Object.entries(e)){if(typeof l!="string"){t=t||[],t.push(l);continue}try{if((i=n.clipboardData)==null||i.setData(a,l),((r=n.clipboardData)==null?void 0:r.getData(a))!==l)throw new Error(`Failed to set "${a}" as clipboardData item`)}catch(c){throw new Error(c.message)}}if(t){let a=-1;for(const l of t){a++;try{if((s=n.clipboardData)==null||s.items.add(l),((o=n.clipboardData)==null?void 0:o.files[a])!==l)throw new Error(`Failed to set file "${l.name}" as clipboardData item`)}catch(c){throw new Error(c.message)}}}return n},r6e=({elements:e,files:t})=>{const n=Se(e),i=new Set(e.filter(a=>Ie(a)));let r=!1;const s=e.reduce((a,l)=>(In(l)&&(r=!0,t&&t[l.fileId]&&(a[l.fileId]=t[l.fileId])),a),{});r&&!t&&console.warn("copyToClipboard: attempting to file element(s) without providing associated `files` object.");const o={type:ds.excalidrawClipboard,elements:e.map(a=>{if(Ur(a,n)&&!i.has(Ur(a,n))){const l=xd(a);return ee(l,{frameId:null}),l}return a}),files:t?s:void 0};return JSON.stringify(o)},s6e=async(e,t,n)=>{await Hc(r6e({elements:e,files:t}),n)},o6e=e=>{const t=Kbe(e);return t.type===nm?{spreadsheet:t.spreadsheet}:null};function _$(e){var n;let t=[];for(const i of e.childNodes)if(i.nodeType===3){const r=(n=i.textContent)==null?void 0:n.trim();r&&t.push({type:"text",value:r})}else if(i instanceof HTMLImageElement){const r=i.getAttribute("src");r&&r.startsWith("http")&&t.push({type:"imageUrl",value:r})}else t=t.concat(_$(i));return t}const a6e=e=>{var n;const t=(n=e.clipboardData)==null?void 0:n.getData(be.html);if(!t)return null;try{const i=new DOMParser().parseFromString(t,be.html),r=_$(i.body);if(r.length)return{type:"mixedContent",value:r}}catch(i){console.error(`error in parseHTMLFromPaste: ${i.message}`)}return null},l6e=async()=>{var n,i,r,s;const e={};let t;try{t=await((n=navigator.clipboard)==null?void 0:n.read())}catch(o){try{if((i=navigator.clipboard)!=null&&i.readText){console.warn(`navigator.clipboard.readText() failed (${o.message}). Failling back to navigator.clipboard.read()`);const a=await((r=navigator.clipboard)==null?void 0:r.readText());if(a)return{[be.text]:a}}}catch(a){if((s=navigator.clipboard)!=null&&s.read)console.warn(`navigator.clipboard.readText() failed (${a.message}). Failling back to navigator.clipboard.read()`);else{if(a.name==="DataError")return console.warn(`navigator.clipboard.read() error, clipboard is probably empty: ${a.message}`),e;throw a}}throw o}for(const o of t)for(const a of o.types)if(RP(Pne,a))try{if(a===be.text||a===be.html)e[a]=await(await o.getType(a)).text();else if(p$(a)){const l=await o.getType(a),c=p1(l,a,void 0);e[a]=c}else throw new Hs(`Unsupported clipboard type: ${a}`)}catch(l){console.warn(l instanceof Hs?l.message:`Cannot retrieve ${a} from clipboardItem: ${l.message}`)}return Object.keys(e).length===0&&console.warn("No clipboard data found from clipboard.read()."),e},c6e=async(e,t=!1)=>{var n,i;try{const r=!t&&e&&a6e(e);return r?r.value.every(o=>o.type==="text")?{type:"text",value:((n=e.clipboardData)==null?void 0:n.getData(be.text))||r.value.map(o=>o.value).join(`
`).trim()}:r:{type:"text",value:(((i=e.clipboardData)==null?void 0:i.getData(be.text))||"").trim()}}catch{return{type:"text",value:""}}},w$=async(e,t=!1)=>{const n=await c6e(e,t);if(n.type==="mixedContent")return{mixedContent:n.value};try{const i=!t&&o6e(n.value);if(i)return i}catch(i){console.error(i)}try{const i=JSON.parse(n.value),r=i.type===ds.excalidrawClipboardWithAPI;if(n6e(i))return{elements:i.elements,files:i.files,text:t?JSON.stringify(i.elements,null,2):void 0,programmaticAPI:r}}catch{}return{text:n.value}},u6e=async e=>{try{await navigator.clipboard.write([new window.ClipboardItem({[be.png]:e})])}catch(t){if(Fm(e))await navigator.clipboard.write([new window.ClipboardItem({[be.png]:await e})]);else throw t}},Hc=async(e,t)=>{var n,i;if($_)try{await navigator.clipboard.writeText(e||"");return}catch(r){console.error(r)}try{if(t){if((n=t.clipboardData)==null||n.setData(be.text,e||""),((i=t.clipboardData)==null?void 0:i.getData(be.text))!==e)throw new Error("Failed to setData on clipboardEvent");return}}catch(r){console.error(r)}if(!d6e(e))throw new Error("Error copying to clipboard.")},d6e=e=>{e||(e=" ");const t=document.documentElement.getAttribute("dir")==="rtl",n=document.createElement("textarea");n.style.border="0",n.style.padding="0",n.style.margin="0",n.style.position="absolute",n.style[t?"right":"left"]="-9999px";const i=window.pageYOffset||document.documentElement.scrollTop;n.style.top=`${i}px`,n.style.fontSize="12pt",n.setAttribute("readonly",""),n.value=e,document.body.appendChild(n);let r=!1;try{n.select(),n.setSelectionRange(0,n.value.length),r=document.execCommand("copy")}catch(s){console.error(s)}return n.remove(),r},D5=(e,{selectedElementIds:t},n)=>{e=Nt(e);const i=n&&Fn(e,{selectedElementIds:t});let r=null,s=i?Be(e,{selectedElementIds:t},{includeBoundTextElement:!0}):e;return i&&(s.length===1&&Ie(s[0])?(r=s[0],s=B9(e,r)):s.length>1&&(s=Be(e,{selectedElementIds:t},{includeBoundTextElement:!0,includeElementsInFrames:!0}))),{exportingFrame:r,exportedElements:Na(s)}},N5=async(e,t,n,i,{exportBackground:r,exportPadding:s=qh,viewBackgroundColor:o,name:a=n.name||pP,fileHandle:l=null,exportingFrame:c=null})=>{if(t.length===0)throw new Error(k("alerts.cannotExportEmptyCanvas"));if(e==="svg"||e==="clipboard-svg"){const d=F_(t,{exportBackground:r,exportWithDarkMode:n.exportWithDarkMode,viewBackgroundColor:o,exportPadding:s,exportScale:n.exportScale,exportEmbedScene:n.exportEmbedScene&&e==="svg"},i,{exportingFrame:c});if(e==="svg")return $b(d.then(f=>new Blob([f.outerHTML],{type:be.svg})),{description:"Export to SVG",name:a,extension:n.exportEmbedScene?"excalidraw.svg":"svg",mimeTypes:[mh.svg],fileHandle:l});if(e==="clipboard-svg"){const f=await d.then(h=>h.outerHTML);try{await Hc(f)}catch{throw new Error(k("errors.copyToSystemClipboardFailed"))}return}}const u=f$(t,n,i,{exportBackground:r,viewBackgroundColor:o,exportPadding:s,exportingFrame:c});if(e==="png"){let d=tm(u);return n.exportEmbedScene&&(d=d.then(f=>Ue(()=>Promise.resolve().then(()=>z$),void 0).then(({encodePngMetadata:h})=>h({blob:f,metadata:ag(t,n,i,"local")})))),$b(d,{description:"Export to PNG",name:a,extension:n.exportEmbedScene?"excalidraw.png":"png",mimeTypes:[mh.png],fileHandle:l})}else if(e==="clipboard")try{const d=tm(u);await u6e(d)}catch(d){throw console.warn(d),d.name==="CANVAS_POSSIBLY_TOO_BIG"?new Error(k("canvasError.canvasTooBig")):C0&&d.name==="TypeError"?new Error(`${k("alerts.couldNotCopyToClipboard")}

${k("hints.firefox_clipboard_write")}`):new Error(k("alerts.couldNotCopyToClipboard"))}else throw new Error("Unsupported export type")},f6e=async(e,t,n,i)=>{const{exportBackground:r,viewBackgroundColor:s,fileHandle:o}=t,a=m$(o);if(!o||!Bbe(a))throw new Error("fileHandle should exist and should be of type svg or png when resaving");t={...t,exportEmbedScene:!0};const{exportedElements:l,exportingFrame:c}=D5(e,t,!1);return await N5(a,l,t,n,{exportBackground:r,viewBackgroundColor:s,name:i,fileHandle:o,exportingFrame:c}),{fileHandle:o}},h6e=oe({name:"changeProjectName",label:"labels.fileTitle",trackEvent:!1,perform:(e,t,n)=>({appState:{...t,name:n},captureUpdate:Z.EVENTUALLY}),PanelComponent:({appState:e,updateData:t,appProps:n,data:i,app:r})=>g(Ope,{label:k("labels.fileTitle"),value:r.getName(),onChange:s=>t(s),ignoreFocus:(i==null?void 0:i.ignoreFocus)??!1})}),g6e=oe({name:"changeExportScale",label:"imageExportDialog.scale",trackEvent:{category:"export",action:"scale"},perform:(e,t,n)=>({appState:{...t,exportScale:n},captureUpdate:Z.EVENTUALLY}),PanelComponent:({elements:e,appState:t,updateData:n})=>{const i=Nt(e),s=Fn(i,t)?Be(i,t):i;return g(ge,{children:c9.map(o=>{const[a,l]=Rbe(s,qh,o),c=`${k("imageExportDialog.label.scale")} ${o}x (${a}x${l})`;return g(Ze,{size:"small",type:"radio",icon:`${o}x`,name:"export-canvas-scale",title:c,"aria-label":c,id:"export-canvas-scale",checked:o===t.exportScale,onChange:()=>n(o)},o)})})}}),m6e=oe({name:"changeExportBackground",label:"imageExportDialog.label.withBackground",trackEvent:{category:"export",action:"toggleBackground"},perform:(e,t,n)=>({appState:{...t,exportBackground:n},captureUpdate:Z.EVENTUALLY}),PanelComponent:({appState:e,updateData:t})=>g(M_,{checked:e.exportBackground,onChange:n=>t(n),children:k("imageExportDialog.label.withBackground")})}),T$=oe({name:"changeExportEmbedScene",label:"imageExportDialog.tooltip.embedScene",trackEvent:{category:"export",action:"embedScene"},perform:(e,t,n)=>({appState:{...t,exportEmbedScene:n},captureUpdate:Z.EVENTUALLY}),PanelComponent:({appState:e,updateData:t})=>P(M_,{checked:e.exportEmbedScene,onChange:n=>t(n),children:[k("imageExportDialog.label.embedScene"),g(nl,{label:k("imageExportDialog.tooltip.embedScene"),long:!0,children:g("div",{className:"excalidraw-tooltip-icon",children:dce})})]})}),Xb=oe({name:"saveToActiveFile",label:"buttons.save",icon:c5,trackEvent:{category:"export"},predicate:(e,t,n,i)=>!!i.props.UIOptions.canvasActions.saveToActiveFile&&!!t.fileHandle&&!t.viewModeEnabled,perform:async(e,t,n,i)=>{const r=!!t.fileHandle;try{const{fileHandle:s}=z_(t.fileHandle)?await f6e(e,t,i.files,i.getName()):await t$(e,t,i.files,i.getName());return{captureUpdate:Z.EVENTUALLY,appState:{...t,fileHandle:s,toast:r?{message:s!=null&&s.name?k("toast.fileSavedToFilename").replace("{filename}",`"${s.name}"`):k("toast.fileSaved")}:null}}}catch(s){return(s==null?void 0:s.name)!=="AbortError"?console.error(s):console.warn(s),{captureUpdate:Z.EVENTUALLY}}},keyTest:e=>e.key===z.S&&e[z.CTRL_OR_CMD]&&!e.shiftKey}),S$=oe({name:"saveFileToDisk",label:"exportDialog.disk_title",icon:c5,viewMode:!0,trackEvent:{category:"export"},perform:async(e,t,n,i)=>{try{const{fileHandle:r}=await t$(e,{...t,fileHandle:null},i.files,i.getName());return{captureUpdate:Z.EVENTUALLY,appState:{...t,openDialog:null,fileHandle:r,toast:{message:k("toast.fileSaved")}}}}catch(r){return(r==null?void 0:r.name)!=="AbortError"?console.error(r):console.warn(r),{captureUpdate:Z.EVENTUALLY}}},keyTest:e=>e.key===z.S&&e.shiftKey&&e[z.CTRL_OR_CMD],PanelComponent:({updateData:e})=>g(Ze,{type:"button",icon:ace,title:k("buttons.saveAs"),"aria-label":k("buttons.saveAs"),showAriaLabel:qn().editor.isMobile,hidden:!Rd,onClick:()=>e(null),"data-testid":"save-as-button"})}),i4=oe({name:"loadScene",label:"buttons.load",trackEvent:{category:"export"},predicate:(e,t,n,i)=>!!i.props.UIOptions.canvasActions.loadScene&&!t.viewModeEnabled,perform:async(e,t,n,i)=>{try{const{elements:r,appState:s,files:o}=await _be(t,e);return{elements:r,appState:s,files:o,captureUpdate:Z.IMMEDIATELY}}catch(r){return(r==null?void 0:r.name)==="AbortError"?(console.warn(r),!1):{elements:e,appState:{...t,errorMessage:r.message},files:i.files,captureUpdate:Z.EVENTUALLY}}},keyTest:e=>e[z.CTRL_OR_CMD]&&e.key===z.O}),p6e=oe({name:"exportWithDarkMode",label:"imageExportDialog.label.darkMode",trackEvent:{category:"export",action:"toggleTheme"},perform:(e,t,n)=>({appState:{...t,exportWithDarkMode:n},captureUpdate:Z.EVENTUALLY}),PanelComponent:({appState:e,updateData:t})=>g("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"-45px",marginBottom:"10px"},children:g(Npe,{value:e.exportWithDarkMode?xe.DARK:xe.LIGHT,onChange:n=>{t(n===xe.DARK)},title:k("imageExportDialog.label.darkMode")})})});let I$="{}";const U6e=oe({name:"copyStyles",label:"labels.copyStyles",icon:Nz,trackEvent:{category:"element"},perform:(e,t,n,i)=>{const r=[],s=e.find(o=>t.selectedElementIds[o.id]);if(r.push(s),s&&ys(s)){const o=Pe(s,i.scene.getNonDeletedElementsMap());r.push(o)}return s&&(I$=JSON.stringify(r)),{appState:{...t,toast:{message:k("toast.copyStyles")}},captureUpdate:Z.EVENTUALLY}},keyTest:e=>e[z.CTRL_OR_CMD]&&e.altKey&&e.code===Je.C}),b6e=oe({name:"pasteStyles",label:"labels.pasteStyles",icon:Nz,trackEvent:{category:"element"},perform:(e,t,n,i)=>{const r=JSON.parse(I$),s=r[0],o=r[1];if(!WP(s))return{elements:e,captureUpdate:Z.EVENTUALLY};const a=Be(e,t,{includeBoundTextElement:!0}),l=a.map(c=>c.id);return{elements:e.map(c=>{if(l.includes(c.id)){let u=s;if(ue(c)&&c.containerId&&(u=o),!u)return c;let d=Ce(c,{backgroundColor:u==null?void 0:u.backgroundColor,strokeWidth:u==null?void 0:u.strokeWidth,strokeColor:u==null?void 0:u.strokeColor,strokeStyle:u==null?void 0:u.strokeStyle,fillStyle:u==null?void 0:u.fillStyle,opacity:u==null?void 0:u.opacity,roughness:u==null?void 0:u.roughness,roundness:u.roundness?$re(u.roundness.type,c)?u.roundness:Gre(c):null});if(ue(d)){const f=u.fontSize||ul,h=u.fontFamily||Pc;d=Ce(d,{fontSize:f,fontFamily:h,textAlign:u.textAlign||Dm,lineHeight:u.lineHeight||Ju(h)});let m=null;d.containerId&&(m=a.find(p=>ue(d)&&p.id===d.containerId)||null),Ji(d,m,i.scene.getNonDeletedElementsMap())}return d.type==="arrow"&&ze(u)&&(d=Ce(d,{startArrowhead:u.startArrowhead,endArrowhead:u.endArrowhead})),Ie(c)&&(d=Ce(d,{roundness:null,backgroundColor:"transparent"})),d}return c}),captureUpdate:Z.IMMEDIATELY}},keyTest:e=>e[z.CTRL_OR_CMD]&&e.altKey&&e.code===Je.V}),X_=(e,t)=>{var n;return!!(!e.viewModeEnabled&&((n=e.openDialog)==null?void 0:n.name)!=="elementLinkSelector"&&(e.activeTool.type!=="custom"&&(e.editingTextElement||e.activeTool.type!=="selection"&&e.activeTool.type!=="eraser"&&e.activeTool.type!=="hand"&&e.activeTool.type!=="laser")||Be(t,e).length))};oe({name:"toggleCanvasMenu",label:"buttons.menu",trackEvent:{category:"menu"},perform:(e,t)=>({appState:{...t,openMenu:t.openMenu==="canvas"?null:"canvas"},captureUpdate:Z.EVENTUALLY}),PanelComponent:({appState:e,updateData:t})=>g(Ze,{type:"button",icon:Ez,"aria-label":k("buttons.menu"),onClick:t,selected:e.openMenu==="canvas"})});oe({name:"toggleEditMenu",label:"buttons.edit",trackEvent:{category:"menu"},perform:(e,t)=>({appState:{...t,openMenu:t.openMenu==="shape"?null:"shape"},captureUpdate:Z.EVENTUALLY}),PanelComponent:({elements:e,appState:t,updateData:n})=>g(Ze,{visible:X_(t,Nt(e)),type:"button",icon:lce,"aria-label":k("buttons.edit"),onClick:n,selected:t.openMenu==="shape"})});const j_=oe({name:"toggleShortcuts",label:"welcomeScreen.defaults.helpHint",icon:rce,viewMode:!0,trackEvent:{category:"menu",action:"toggleHelpDialog"},perform:(e,t,n,{focusContainer:i})=>{var r,s;return((r=t.openDialog)==null?void 0:r.name)==="help"&&i(),{appState:{...t,openDialog:((s=t.openDialog)==null?void 0:s.name)==="help"?null:{name:"help"}},captureUpdate:Z.EVENTUALLY}},keyTest:e=>e.key===z.QUESTION_MARK}),y6e=e=>{if(e.length>=2){const t=e[0].groupIds;for(const n of t)if(e.reduce((i,r)=>i&&P0(r,n),!0))return!0}return!1},XM=(e,t,n)=>{const i=n.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0});return i.length>=2&&!y6e(i)&&!_F(i)},E6e=oe({name:"group",label:"labels.group",icon:e=>g(lA,{theme:e.theme}),trackEvent:{category:"element"},perform:(e,t,n,i)=>{const r=F9(i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0}));if(r.length<2)return{appState:t,elements:e,captureUpdate:Z.EVENTUALLY};const s=Ou(t);if(s.length===1){const b=s[0],E=new Set(Gt(e,b).map(_=>_.id)),y=new Set(r.map(_=>_.id));if(new Set([...Array.from(E),...Array.from(y)]).size===E.size)return{appState:t,elements:e,captureUpdate:Z.EVENTUALLY}}let o=[...e];new Set(r.map(b=>b.frameId)).size>1&&goe(r).forEach((E,y)=>{J6(E,i.scene.getNonDeletedElementsMap())});const l=zr(),c=Se(r);o=o.map(b=>c.get(b.id)?Ce(b,{groupIds:voe(b.groupIds,l,t.editingGroupId)}):b);const u=Gt(o,l),d=u[u.length-1],f=o.lastIndexOf(d),h=o.slice(f+1),m=o.slice(0,f).filter(b=>!P0(b,l)),p=Qs([...m,...u,...h],Se(u));return{appState:{...t,...SF(l,{...t,selectedGroupIds:{}},Nt(o))},elements:p,captureUpdate:Z.IMMEDIATELY}},predicate:(e,t,n,i)=>XM(e,t,i),keyTest:e=>!e.shiftKey&&e[z.CTRL_OR_CMD]&&e.key===z.G,PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(Ze,{hidden:!XM(e,t,i),type:"button",icon:g(lA,{theme:t.theme}),onClick:()=>n(null),title:`${k("labels.group")} — ${Q("CtrlOrCmd+G")}`,"aria-label":k("labels.group"),visible:Fn(Nt(e),t)})}),v6e=oe({name:"ungroup",label:"labels.ungroup",icon:e=>g(cA,{theme:e.theme}),trackEvent:{category:"element"},perform:(e,t,n,i)=>{const r=Ou(t),s=Se(e);if(r.length===0)return{appState:t,elements:e,captureUpdate:Z.EVENTUALLY};let o=[...e];const a=[];o=o.map(f=>{jt(f)&&a.push(f.id);const h=_oe(f.groupIds,t.selectedGroupIds);return h.length===f.groupIds.length?f:Ce(f,{groupIds:h})});const l=Wi(t,Nt(o),t,null),c=i.scene.getSelectedElements(t),u=new Set(c.filter(f=>f.frameId).map(f=>f.frameId));return P9(e).filter(f=>u.has(f.id)).forEach(f=>{f&&(o=EF(o,qU(o,f,t,s),f,i))}),l.selectedElementIds=Object.entries(l.selectedElementIds).reduce((f,[h,m])=>(m&&!a.includes(h)&&(f[h]=!0),f),{}),{appState:{...t,...l},elements:o,captureUpdate:Z.IMMEDIATELY}},keyTest:e=>e.shiftKey&&e[z.CTRL_OR_CMD]&&e.key===z.G.toUpperCase(),predicate:(e,t)=>Ou(t).length>0,PanelComponent:({elements:e,appState:t,updateData:n})=>g(Ze,{type:"button",hidden:Ou(t).length===0,icon:g(cA,{theme:t.theme}),onClick:()=>n(null),title:`${k("labels.ungroup")} — ${Q("CtrlOrCmd+Shift+G")}`,"aria-label":k("labels.ungroup"),visible:Fn(Nt(e),t)})}),x$=(e,t,n,i,r,s,o)=>{e.beginPath(),e.moveTo(t+s,n),e.lineTo(t+i-s,n),e.quadraticCurveTo(t+i,n,t+i,n+s),e.lineTo(t+i,n+r-s),e.quadraticCurveTo(t+i,n+r,t+i-s,n+r),e.lineTo(t+s,n+r),e.quadraticCurveTo(t,n+r,t,n+r-s),e.lineTo(t,n+s),e.quadraticCurveTo(t,n,t+s,n),e.closePath(),e.fill(),o&&(e.strokeStyle=o),e.stroke()};function _6e(e){let t=0;if(e.length===0)return t;for(let n=0;n<e.length;n++){const i=e.charCodeAt(n);t=(t<<5)-t+i}return t}const O5=(e,t)=>`hsl(${Math.abs(_6e((t==null?void 0:t.id)||e))%37*10}, 100%, 83%)`,w6e=e=>{var n;const t=(n=e==null?void 0:e.trim())==null?void 0:n.codePointAt(0);return(t?String.fromCodePoint(t):"?").toUpperCase()},T6e=({context:e,renderConfig:t,appState:n,normalizedWidth:i,normalizedHeight:r})=>{for(const[s,o]of t.remotePointerViewportCoords){let{x:a,y:l}=o;const c=n.collaborators.get(s);a-=n.offsetLeft,l-=n.offsetTop;const u=11,d=14,f=a<0||a>i-u||l<0||l>r-d;a=Math.max(a,0),a=Math.min(a,i-u),l=Math.max(l,0),l=Math.min(l,r-d);const h=O5(s,c);e.save(),e.strokeStyle=h,e.fillStyle=h;const m=t.remotePointerUserStates.get(s),p=f||m===gu.IDLE||m===gu.AWAY;p&&(e.globalAlpha=.3),t.remotePointerButton.get(s)==="down"&&(e.beginPath(),e.arc(a,l,15,0,2*Math.PI,!1),e.lineWidth=3,e.strokeStyle="#ffffff88",e.stroke(),e.closePath(),e.beginPath(),e.arc(a,l,15,0,2*Math.PI,!1),e.lineWidth=1,e.strokeStyle=h,e.stroke(),e.closePath());const b=n.theme===xe.DARK?"#2f6330":One,E=c==null?void 0:c.isSpeaking;E&&(e.fillStyle=b,e.strokeStyle=b,e.lineWidth=10,e.lineJoin="round",e.beginPath(),e.moveTo(a,l),e.lineTo(a+0,l+14),e.lineTo(a+4,l+9),e.lineTo(a+11,l+8),e.closePath(),e.stroke(),e.fill()),e.fillStyle=Wp,e.strokeStyle=Wp,e.lineWidth=6,e.lineJoin="round",e.beginPath(),e.moveTo(a,l),e.lineTo(a+0,l+14),e.lineTo(a+4,l+9),e.lineTo(a+11,l+8),e.closePath(),e.stroke(),e.fill(),e.fillStyle=h,e.strokeStyle=h,e.lineWidth=2,e.lineJoin="round",e.beginPath(),p?(e.moveTo(a-1,l-1),e.lineTo(a-1,l+15),e.lineTo(a+5,l+10),e.lineTo(a+12,l+9),e.closePath(),e.fill()):(e.moveTo(a,l),e.lineTo(a+0,l+14),e.lineTo(a+4,l+9),e.lineTo(a+11,l+8),e.closePath(),e.fill(),e.stroke());const y=t.remotePointerUsernames.get(s)||"";if(!f&&y){e.font="600 12px sans-serif";const v=(E?a+0:a)+u/2,_=(E?l+0:l)+d+2,S=5,M=3,w=e.measureText(y),T=w.actualBoundingBoxDescent+w.actualBoundingBoxAscent,A=Math.max(T,12),I=v-1,R=_-1,D=w.width+2+S*2+2,L=A+2+M*2+2;if(e.roundRect?(e.beginPath(),e.roundRect(I,R,D,L,8),e.fillStyle=h,e.fill(),e.strokeStyle=Wp,e.stroke(),E&&(e.beginPath(),e.roundRect(I-2,R-2,D+4,L+4,8),e.strokeStyle=b,e.stroke())):x$(e,I,R,D,L,8,Wp),e.fillStyle=Nne,e.fillText(y,v+S+1,_+M+w.actualBoundingBoxAscent+Math.floor((A-T)/2)+2),E){e.fillStyle=b;const G=8,V=8,H=5;e.fillRect(I+D+V,R+(L/2-G/2),2,G),e.fillRect(I+D+V+H,R+(L/2-G*2/2),2,G*2),e.fillRect(I+D+V+H*2,R+(L/2-G/2),2,G)}}e.restore(),e.closePath()}},jM=({color:e,onClick:t,name:n,src:i,className:r})=>{const s=w6e(n),[o,a]=N.useState(!1),l=!o&&i,c=l?void 0:{background:e};return g("div",{className:me("Avatar",r),style:c,onClick:t,children:l?g("img",{className:"Avatar-img",src:i,alt:s,referrerPolicy:"no-referrer",onError:()=>a(!0)}):s})};oe({name:"goToCollaborator",label:"Go to a collaborator",viewMode:!0,trackEvent:{category:"collab"},perform:(e,t,n)=>{var i;return!n.socketId||((i=t.userToFollow)==null?void 0:i.socketId)===n.socketId||n.isCurrentUser?{appState:{...t,userToFollow:null},captureUpdate:Z.EVENTUALLY}:{appState:{...t,userToFollow:{socketId:n.socketId,username:n.username||""},openMenu:t.openMenu==="canvas"?null:t.openMenu},captureUpdate:Z.EVENTUALLY}},PanelComponent:({updateData:e,data:t,appState:n})=>{const{socketId:i,collaborator:r,withName:s,isBeingFollowed:o}=t,a=O5(i,r),l=me({"is-followed":o,"is-current-user":r.isCurrentUser===!0,"is-speaking":r.isSpeaking,"is-in-call":r.isInCall,"is-muted":r.isMuted}),c=r.isInCall?r.isSpeaking?P("div",{className:"UserList__collaborator-status-icon-speaking-indicator",title:k("userList.hint.isSpeaking"),children:[g("div",{}),g("div",{}),g("div",{})]}):r.isMuted?g("div",{className:"UserList__collaborator-status-icon-microphone-muted",title:k("userList.hint.micMuted"),children:mue}):g("div",{title:k("userList.hint.inCall"),children:gue}):null;return s?P("div",{className:`dropdown-menu-item dropdown-menu-item-base UserList__collaborator ${l}`,style:{"--avatar-size":"1.5rem"},onClick:()=>e(r),children:[g(jM,{color:a,onClick:()=>{},name:r.username||"",src:r.avatarUrl,className:l}),g("div",{className:"UserList__collaborator-name",children:r.username}),P("div",{className:"UserList__collaborator-status-icons","aria-hidden":!0,children:[o&&g("div",{className:"UserList__collaborator-status-icon-is-followed",title:k("userList.hint.followStatus"),children:a_}),c]})]}):P("div",{className:`UserList__collaborator UserList__collaborator--avatar-only ${l}`,children:[g(jM,{color:a,onClick:()=>{e(r)},name:r.username||"",src:r.avatarUrl,className:l}),c&&g("div",{className:"UserList__collaborator-status-icon",children:c})]})}});const S6e=oe({name:"addToLibrary",trackEvent:{category:"element"},perform:(e,t,n,i)=>{const r=i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});for(const s of mP)if(r.some(o=>o.type===s))return{captureUpdate:Z.EVENTUALLY,appState:{...t,errorMessage:k(`errors.libraryElementTypeError.${s}`)}};return i.library.getLatestLibrary().then(s=>i.library.setLibrary([{id:zr(),status:"unpublished",elements:r.map(xd),created:Date.now()},...s])).then(()=>({captureUpdate:Z.EVENTUALLY,appState:{...t,toast:{message:k("toast.addedToLibrary")}}})).catch(s=>({captureUpdate:Z.EVENTUALLY,appState:{...t,errorMessage:s.message}}))},label:"labels.addToLibrary"}),I6e=(e,t,n,i)=>{const r=t5(e,t),s=Xs(e);return r.flatMap(o=>{const a=x6e(o,s,n);return o.map(l=>{const c=ee(l,{x:l.x+a.x,y:l.y+a.y});return pr(l,i.getNonDeletedElementsMap(),{simultaneouslyUpdated:o}),c})})},x6e=(e,t,{axis:n,position:i})=>{const r=Xs(e),[s,o]=n==="x"?["minX","maxX"]:["minY","maxY"],a={x:0,y:0};return i==="start"?{...a,[n]:t[s]-r[s]}:i==="end"?{...a,[n]:t[o]-r[o]}:{...a,[n]:(t[s]+t[o])/2-(r[s]+r[o])/2}},Vr=(e,t)=>{const n=t.scene.getSelectedElements(e);return n.length>1&&!n.some(i=>Ie(i))},lg=(e,t,n,i)=>{const r=n.scene.getSelectedElements(t),s=Se(e),o=I6e(r,s,i,n.scene),a=Se(o);return vh(e.map(l=>a.get(l.id)||l),t,n)};oe({name:"alignTop",label:"labels.alignTop",icon:nA,trackEvent:{category:"element"},predicate:(e,t,n,i)=>Vr(t,i),perform:(e,t,n,i)=>({appState:t,elements:lg(e,t,i,{position:"start",axis:"y"}),captureUpdate:Z.IMMEDIATELY}),keyTest:e=>e[z.CTRL_OR_CMD]&&e.shiftKey&&e.key===z.ARROW_UP,PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(Ze,{hidden:!Vr(t,i),type:"button",icon:nA,onClick:()=>n(null),title:`${k("labels.alignTop")} — ${Q("CtrlOrCmd+Shift+Up")}`,"aria-label":k("labels.alignTop"),visible:Fn(Nt(e),t)})});oe({name:"alignBottom",label:"labels.alignBottom",icon:iA,trackEvent:{category:"element"},predicate:(e,t,n,i)=>Vr(t,i),perform:(e,t,n,i)=>({appState:t,elements:lg(e,t,i,{position:"end",axis:"y"}),captureUpdate:Z.IMMEDIATELY}),keyTest:e=>e[z.CTRL_OR_CMD]&&e.shiftKey&&e.key===z.ARROW_DOWN,PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(Ze,{hidden:!Vr(t,i),type:"button",icon:iA,onClick:()=>n(null),title:`${k("labels.alignBottom")} — ${Q("CtrlOrCmd+Shift+Down")}`,"aria-label":k("labels.alignBottom"),visible:Fn(Nt(e),t)})});oe({name:"alignLeft",label:"labels.alignLeft",icon:rA,trackEvent:{category:"element"},predicate:(e,t,n,i)=>Vr(t,i),perform:(e,t,n,i)=>({appState:t,elements:lg(e,t,i,{position:"start",axis:"x"}),captureUpdate:Z.IMMEDIATELY}),keyTest:e=>e[z.CTRL_OR_CMD]&&e.shiftKey&&e.key===z.ARROW_LEFT,PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(Ze,{hidden:!Vr(t,i),type:"button",icon:rA,onClick:()=>n(null),title:`${k("labels.alignLeft")} — ${Q("CtrlOrCmd+Shift+Left")}`,"aria-label":k("labels.alignLeft"),visible:Fn(Nt(e),t)})});oe({name:"alignRight",label:"labels.alignRight",icon:sA,trackEvent:{category:"element"},predicate:(e,t,n,i)=>Vr(t,i),perform:(e,t,n,i)=>({appState:t,elements:lg(e,t,i,{position:"end",axis:"x"}),captureUpdate:Z.IMMEDIATELY}),keyTest:e=>e[z.CTRL_OR_CMD]&&e.shiftKey&&e.key===z.ARROW_RIGHT,PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(Ze,{hidden:!Vr(t,i),type:"button",icon:sA,onClick:()=>n(null),title:`${k("labels.alignRight")} — ${Q("CtrlOrCmd+Shift+Right")}`,"aria-label":k("labels.alignRight"),visible:Fn(Nt(e),t)})});oe({name:"alignVerticallyCentered",label:"labels.centerVertically",icon:oA,trackEvent:{category:"element"},predicate:(e,t,n,i)=>Vr(t,i),perform:(e,t,n,i)=>({appState:t,elements:lg(e,t,i,{position:"center",axis:"y"}),captureUpdate:Z.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(Ze,{hidden:!Vr(t,i),type:"button",icon:oA,onClick:()=>n(null),title:k("labels.centerVertically"),"aria-label":k("labels.centerVertically"),visible:Fn(Nt(e),t)})});oe({name:"alignHorizontallyCentered",label:"labels.centerHorizontally",icon:aA,trackEvent:{category:"element"},predicate:(e,t,n,i)=>Vr(t,i),perform:(e,t,n,i)=>({appState:t,elements:lg(e,t,i,{position:"center",axis:"x"}),captureUpdate:Z.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(Ze,{hidden:!Vr(t,i),type:"button",icon:aA,onClick:()=>n(null),title:k("labels.centerHorizontally"),"aria-label":k("labels.centerHorizontally"),visible:Fn(Nt(e),t)})});const C6e=(e,t,n)=>{const[i,r,s,o]=n.axis==="x"?["minX","midX","maxX","width"]:["minY","midY","maxY","height"],a=Xs(e),l=t5(e,t).map(f=>[f,Xs(f)]).sort((f,h)=>f[1][r]-h[1][r]);let c=0;for(const f of l)c+=f[1][o];const u=(a[o]-c)/(l.length-1);if(u<0){const f=l.findIndex(b=>b[1][i]===a[i]),h=l.findIndex(b=>b[1][s]===a[s]),m=(l[h][1][r]-l[f][1][r])/(l.length-1);let p=l[f][1][r];return l.flatMap(([b,E],y)=>{const v={x:0,y:0};return y!==f&&y!==h&&(p+=m,v[n.axis]=p-E[r]),b.map(_=>Ce(_,{x:_.x+v.x,y:_.y+v.y}))})}let d=a[i];return l.flatMap(([f,h])=>{const m={x:0,y:0};return m[n.axis]=d-h[i],d+=u,d+=h[o],f.map(p=>Ce(p,{x:p.x+m.x,y:p.y+m.y}))})},C$=(e,t)=>{const n=t.scene.getSelectedElements(e);return n.length>1&&!n.some(i=>Ie(i))},A$=(e,t,n,i)=>{const r=n.scene.getSelectedElements(t),s=C6e(r,n.scene.getNonDeletedElementsMap(),i),o=Se(s);return vh(e.map(a=>o.get(a.id)||a),t,n)};oe({name:"distributeHorizontally",label:"labels.distributeHorizontally",trackEvent:{category:"element"},perform:(e,t,n,i)=>({appState:t,elements:A$(e,t,i,{axis:"x"}),captureUpdate:Z.IMMEDIATELY}),keyTest:e=>!e[z.CTRL_OR_CMD]&&e.altKey&&e.code===Je.H,PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(Ze,{hidden:!C$(t,i),type:"button",icon:pce,onClick:()=>n(null),title:`${k("labels.distributeHorizontally")} — ${Q("Alt+H")}`,"aria-label":k("labels.distributeHorizontally"),visible:Fn(Nt(e),t)})});oe({name:"distributeVertically",label:"labels.distributeVertically",trackEvent:{category:"element"},perform:(e,t,n,i)=>({appState:t,elements:A$(e,t,i,{axis:"y"}),captureUpdate:Z.IMMEDIATELY}),keyTest:e=>!e[z.CTRL_OR_CMD]&&e.altKey&&e.code===Je.V,PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(Ze,{hidden:!C$(t,i),type:"button",icon:Uce,onClick:()=>n(null),title:`${k("labels.distributeVertically")} — ${Q("Alt+V")}`,"aria-label":k("labels.distributeVertically"),visible:Fn(Nt(e),t)})});const A6e=oe({name:"flipHorizontal",label:"labels.flipHorizontal",icon:yue,trackEvent:{category:"element"},perform:(e,t,n,i)=>({elements:vh(M$(e,i.scene.getNonDeletedElementsMap(),t,"horizontal",i),t,i),appState:t,captureUpdate:Z.IMMEDIATELY}),keyTest:e=>e.shiftKey&&e.code===Je.H}),M6e=oe({name:"flipVertical",label:"labels.flipVertical",icon:bue,trackEvent:{category:"element"},perform:(e,t,n,i)=>({elements:vh(M$(e,i.scene.getNonDeletedElementsMap(),t,"vertical",i),t,i),appState:t,captureUpdate:Z.IMMEDIATELY}),keyTest:e=>e.shiftKey&&e.code===Je.V&&!e[z.CTRL_OR_CMD]}),M$=(e,t,n,i,r)=>{const s=Be(Nt(e),n,{includeBoundTextElement:!0,includeElementsInFrames:!0}),o=R6e(s,t,n,i,r),a=Se(o);return e.map(l=>a.get(l.id)||l)},R6e=(e,t,n,i,r)=>{if(e.every(h=>ze(h)&&(h.startBinding||h.endBinding)))return e.map(h=>{const m=h;return Ce(m,{startArrowhead:m.endArrowhead,endArrowhead:m.startArrowhead})});const{midX:s,midY:o}=Xs(e);pB(e,t,"nw",r.scene,new Map(Array.from(t.values()).map(h=>[h.id,xd(h)])),{flipByX:i==="horizontal",flipByY:i==="vertical",shouldResizeFromCenter:!0,shouldMaintainAspectRatio:!0}),Ub(e.filter(ke),t,r.scene.getNonDeletedElements(),r.scene,pu(n),[],n.zoom);const{elbowArrows:a,otherElements:l}=e.reduce((h,m)=>fe(m)?{...h,elbowArrows:h.elbowArrows.concat(m)}:{...h,otherElements:h.otherElements.concat(m)},{elbowArrows:[],otherElements:[]}),{midX:c,midY:u}=Xs(e),[d,f]=[s-c,o-u];return l.forEach(h=>ee(h,{x:h.x+d,y:h.y+f})),a.forEach(h=>ee(h,{x:h.x+d,y:h.y+f})),e},h2=oe({name:"copy",label:"labels.copy",icon:NE,trackEvent:{category:"element"},perform:async(e,t,n,i)=>{const r=i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});try{await s6e(r,i.files,n)}catch(s){return{captureUpdate:Z.EVENTUALLY,appState:{...t,errorMessage:s.message}}}return{captureUpdate:Z.EVENTUALLY}},keyTest:void 0}),YM=oe({name:"paste",label:"labels.paste",trackEvent:{category:"element"},perform:async(e,t,n,i)=>{let r;try{r=await l6e()}catch(s){return s.name==="AbortError"||s.name==="NotAllowedError"?!1:(console.error(`actionPaste ${s.name}: ${s.message}`),C0?{captureUpdate:Z.EVENTUALLY,appState:{...t,errorMessage:k("hints.firefox_clipboard_write")}}:{captureUpdate:Z.EVENTUALLY,appState:{...t,errorMessage:k("errors.asyncPasteFailedOnRead")}})}try{i.pasteFromClipboard(i6e({types:r}))}catch(s){return console.error(s),{captureUpdate:Z.EVENTUALLY,appState:{...t,errorMessage:k("errors.asyncPasteFailedOnParse")}}}return{captureUpdate:Z.EVENTUALLY}},keyTest:void 0}),WM=oe({name:"cut",label:"labels.cut",icon:tue,trackEvent:{category:"element"},perform:(e,t,n,i)=>(h2.perform(e,t,n,i),Vz.perform(e,t,null,i)),keyTest:e=>e[z.CTRL_OR_CMD]&&e.key===z.X}),KM=oe({name:"copyAsSvg",label:"labels.copyAsSvg",icon:Eue,trackEvent:{category:"element"},perform:async(e,t,n,i)=>{if(!i.canvas)return{captureUpdate:Z.EVENTUALLY};const{exportedElements:r,exportingFrame:s}=D5(e,t,!0);try{await N5("clipboard-svg",r,t,i.files,{...t,exportingFrame:s,name:i.getName()});const o=i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});return{appState:{toast:{message:k("toast.copyToClipboardAsSvg",{exportSelection:o.length?k("toast.selection"):k("toast.canvas"),exportColorScheme:t.exportWithDarkMode?k("buttons.darkMode"):k("buttons.lightMode")})}},captureUpdate:Z.EVENTUALLY}}catch(o){return console.error(o),{appState:{errorMessage:o.message},captureUpdate:Z.EVENTUALLY}}},predicate:e=>$_&&e.length>0,keywords:["svg","clipboard","copy"]}),ZM=oe({name:"copyAsPng",label:"labels.copyAsPng",icon:vue,trackEvent:{category:"element"},perform:async(e,t,n,i)=>{if(!i.canvas)return{captureUpdate:Z.EVENTUALLY};const r=i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0}),{exportedElements:s,exportingFrame:o}=D5(e,t,!0);try{return await N5("clipboard",s,t,i.files,{...t,exportingFrame:o,name:i.getName()}),{appState:{...t,toast:{message:k("toast.copyToClipboardAsPng",{exportSelection:r.length?k("toast.selection"):k("toast.canvas"),exportColorScheme:t.exportWithDarkMode?k("buttons.darkMode"):k("buttons.lightMode")})}},captureUpdate:Z.EVENTUALLY}}catch(a){return console.error(a),{appState:{...t,errorMessage:a.message},captureUpdate:Z.EVENTUALLY}}},predicate:e=>G_&&e.length>0,keyTest:e=>e.code===Je.C&&e.altKey&&e.shiftKey,keywords:["png","clipboard","copy"]}),qM=oe({name:"copyText",label:"labels.copyText",trackEvent:{category:"element"},perform:(e,t,n,i)=>{const r=i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0});try{Hc(sF(r))}catch{throw new Error(k("errors.copyToSystemClipboardFailed"))}return{captureUpdate:Z.EVENTUALLY}},predicate:(e,t,n,i)=>$_&&i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0}).some(ue),keywords:["text","clipboard","copy"]}),QM=oe({name:"gridMode",icon:Sue,keywords:["snap"],label:"labels.toggleGrid",viewMode:!0,trackEvent:{category:"canvas",predicate:e=>e.gridModeEnabled},perform(e,t){return{appState:{...t,gridModeEnabled:!this.checked(t),objectsSnapModeEnabled:!1},captureUpdate:Z.EVENTUALLY}},checked:e=>e.gridModeEnabled,predicate:(e,t,n)=>n.gridModeEnabled===void 0,keyTest:e=>e[z.CTRL_OR_CMD]&&e.code===Je.QUOTE}),r4=oe({name:"zenMode",label:"buttons.zenMode",icon:wue,paletteName:"Toggle zen mode",viewMode:!0,trackEvent:{category:"canvas",predicate:e=>!e.zenModeEnabled},perform(e,t){return{appState:{...t,zenModeEnabled:!this.checked(t)},captureUpdate:Z.EVENTUALLY}},checked:e=>e.zenModeEnabled,predicate:(e,t,n)=>typeof n.zenModeEnabled>"u",keyTest:e=>!e[z.CTRL_OR_CMD]&&e.altKey&&e.code===Je.Z}),k6e=oe({name:"objectsSnapMode",label:"buttons.objectsSnapMode",icon:_ue,viewMode:!1,trackEvent:{category:"canvas",predicate:e=>!e.objectsSnapModeEnabled},perform(e,t){return{appState:{...t,objectsSnapModeEnabled:!this.checked(t),gridModeEnabled:!1},captureUpdate:Z.EVENTUALLY}},checked:e=>e.objectsSnapModeEnabled,predicate:(e,t,n)=>typeof n.objectsSnapModeEnabled>"u",keyTest:e=>!e[z.CTRL_OR_CMD]&&e.altKey&&e.code===Je.S}),s4=oe({name:"stats",label:"stats.fullTitle",icon:Uue,paletteName:"Toggle stats",viewMode:!0,trackEvent:{category:"menu"},keywords:["edit","attributes","customize"],perform(e,t){return{appState:{...t,stats:{...t.stats,open:!this.checked(t)}},captureUpdate:Z.EVENTUALLY}},checked:e=>e.stats.open,keyTest:e=>!e[z.CTRL_OR_CMD]&&e.altKey&&e.code===Je.SLASH}),L6e=oe({name:"unbindText",label:"labels.unbindText",trackEvent:{category:"element"},predicate:(e,t,n,i)=>i.scene.getSelectedElements(t).some(s=>ys(s)),perform:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t),s=i.scene.getNonDeletedElementsMap();return r.forEach(o=>{var l;const a=Pe(o,s);if(a){const{width:c,height:u}=Hi(a.originalText,Ct(a),a.lineHeight),d=ese(o.id);tF(o.id);const{x:f,y:h}=K6(o,a,s);ee(a,{containerId:null,width:c,height:u,text:a.originalText,x:f,y:h}),ee(o,{boundElements:(l=o.boundElements)==null?void 0:l.filter(m=>m.id!==a.id),height:d||o.height})}}),{elements:e,appState:t,captureUpdate:Z.IMMEDIATELY}}}),D6e=oe({name:"bindText",label:"labels.bindText",trackEvent:{category:"element"},predicate:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t);if(r.length===2){const s=ue(r[0])||ue(r[1]);let o;if(Nu(r[0])?o=r[0]:Nu(r[1])&&(o=r[1]),s&&o&&Pe(o,i.scene.getNonDeletedElementsMap())===null)return!0}return!1},perform:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t);let s,o;ue(r[0])&&Nu(r[1])?(s=r[0],o=r[1]):(s=r[1],o=r[0]),ee(s,{containerId:o.id,verticalAlign:kr.MIDDLE,textAlign:M0.CENTER,autoResize:!0}),ee(o,{boundElements:(o.boundElements||[]).concat({type:"text",id:s.id})});const a=o.height;return Ji(s,o,i.scene.getNonDeletedElementsMap()),pb(o.id,a),{elements:N6e(e,o,s),appState:{...t,selectedElementIds:{[o.id]:!0}},captureUpdate:Z.IMMEDIATELY}}}),N6e=(e,t,n)=>{const i=e.slice(),r=i.findIndex(o=>o.id===n.id);i.splice(r,1);const s=i.findIndex(o=>o.id===t.id);return i.splice(s+1,0,n),Qs(i,Se([t,n])),i},O6e=(e,t,n)=>{const i=e.slice(),r=i.findIndex(o=>o.id===t.id);i.splice(r,1);const s=i.findIndex(o=>o.id===n.id);return i.splice(s,0,t),Qs(i,Se([t,n])),i},P6e=oe({name:"wrapTextInContainer",label:"labels.createContainerFromText",trackEvent:{category:"element"},predicate:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t),s=r.every(o=>ue(o));return r.length>0&&s},perform:(e,t,n,i)=>{var a;const r=i.scene.getSelectedElements(t);let s=e.slice();const o={};for(const l of r)if(ue(l)){const c=Za({type:"rectangle",backgroundColor:t.currentItemBackgroundColor,boundElements:[...l.boundElements||[],{id:l.id,type:"text"}],angle:l.angle,fillStyle:t.currentItemFillStyle,strokeColor:t.currentItemStrokeColor,roughness:t.currentItemRoughness,strokeWidth:t.currentItemStrokeWidth,strokeStyle:t.currentItemStrokeStyle,roundness:t.currentItemRoundness==="round"?{type:eg("rectangle")?Nn.ADAPTIVE_RADIUS:Nn.PROPORTIONAL_RADIUS}:null,opacity:100,locked:!1,x:l.x-Dn,y:l.y-Dn,width:nd(l.width,"rectangle"),height:nd(l.height,"rectangle"),groupIds:l.groupIds,frameId:l.frameId});if((a=l.boundElements)!=null&&a.length){const u=l.boundElements.filter(f=>f.type==="arrow").map(f=>f.id);s.filter(f=>u.includes(f.id)).forEach(f=>{let h=f.startBinding,m=f.endBinding;(h==null?void 0:h.elementId)===l.id&&(h={...h,elementId:c.id}),(m==null?void 0:m.elementId)===l.id&&(m={...m,elementId:c.id}),(h||m)&&ee(f,{startBinding:h,endBinding:m},!1)})}ee(l,{containerId:c.id,verticalAlign:kr.MIDDLE,boundElements:null,textAlign:M0.CENTER,autoResize:!0},!1),Ji(l,c,i.scene.getNonDeletedElementsMap()),s=O6e([...s,c],c,l),o[c.id]=!0}return{elements:s,appState:{...t,selectedElementIds:o},captureUpdate:Z.IMMEDIATELY}}}),Y_=380,F6e=42,o4=5,R$=85,B6e=500;let a4=!1;const UU=new Map,z6e=({element:e,elementsMap:t,setAppState:n,onLinkOpen:i,setToast:r,updateEmbedValidationStatus:s})=>{const o=np(),a=tp(),l=qn(),c=e.link||"",[u,d]=N.useState(c),f=N.useRef(null),h=o.showHyperlinkPopup==="editor",m=N.useCallback(()=>{var _;if(!f.current)return;const v=Pr(f.current.value)||null;if(!e.link&&v&&ct("hyperlink","create"),lr(e)){if(((_=o.activeEmbeddable)==null?void 0:_.element)===e&&n({activeEmbeddable:null}),!v){ee(e,{link:null}),s(e,!1);return}if(!JU(v,a.validateEmbeddable))v&&r({message:k("toast.unableToEmbed"),closable:!0}),e.link&&UU.set(e.id,e.link),ee(e,{link:v}),s(e,!1);else{const{width:S,height:M}=e,w=kf(v);(w==null?void 0:w.error)instanceof URIError&&r({message:k("toast.unrecognizedLinkFormat"),closable:!0});const T=w?w.intrinsicSize.w/w.intrinsicSize.h:1,A=UU.get(e.id)!==e.link;ee(e,{...A?{width:(w==null?void 0:w.type)==="video"?S>M?S:M*T:S,height:(w==null?void 0:w.type)==="video"&&S>M?S/T:M}:{},link:v}),s(e,!0),UU.has(e.id)&&UU.delete(e.id)}}else ee(e,{link:v})},[e,r,a.validateEmbeddable,o.activeEmbeddable,n,s]);N.useLayoutEffect(()=>()=>{m()},[m]),N.useEffect(()=>{h&&(f!=null&&f.current)&&!(l.viewport.isMobile||l.isTouchScreen)&&f.current.select()},[h,l.viewport.isMobile,l.isTouchScreen]),N.useEffect(()=>{let v=null;const _=S=>{if(h)return;v&&clearTimeout(v),$6e(e,t,o,C(S.clientX,S.clientY))&&(v=window.setTimeout(()=>{n({showHyperlinkPopup:!1})},B6e))};return window.addEventListener(te.POINTER_MOVE,_,!1),()=>{window.removeEventListener(te.POINTER_MOVE,_,!1),v&&clearTimeout(v)}},[o,e,h,n,t]);const p=N.useCallback(()=>{ct("hyperlink","delete"),ee(e,{link:null}),n({showHyperlinkPopup:!1})},[n,e]),b=()=>{ct("hyperlink","edit","popup-ui"),n({showHyperlinkPopup:"editor"})},{x:E,y}=k$(e,o,t);return o.contextMenu||o.selectedElementsAreBeingDragged||o.resizingElement||o.isRotating||o.openMenu||o.viewModeEnabled?null:P("div",{className:"excalidraw-hyperlinkContainer",style:{top:`${y}px`,left:`${E}px`,width:Y_,padding:o4},children:[h?g("input",{className:me("excalidraw-hyperlinkContainer-input"),placeholder:k("labels.link.hint"),ref:f,value:u,onChange:v=>d(v.target.value),autoFocus:!0,onKeyDown:v=>{v.stopPropagation(),v[z.CTRL_OR_CMD]&&v.key===z.K&&v.preventDefault(),(v.key===z.ENTER||v.key===z.ESCAPE)&&(m(),n({showHyperlinkPopup:"info"}))}}):e.link?g("a",{href:Pr(e.link||""),className:"excalidraw-hyperlinkContainer-link",target:DP(e.link)?"_self":"_blank",onClick:v=>{if(e.link&&i){const _=MP(te.EXCALIDRAW_LINK,v.nativeEvent);i({...e,link:Pr(e.link)},_),_.defaultPrevented&&v.preventDefault()}},rel:"noopener noreferrer",children:e.link}):g("div",{className:"excalidraw-hyperlinkContainer-link",children:k("labels.link.empty")}),P("div",{className:"excalidraw-hyperlinkContainer__buttons",children:[!h&&g(Ze,{type:"button",title:k("buttons.edit"),"aria-label":k("buttons.edit"),label:k("buttons.edit"),onClick:b,className:"excalidraw-hyperlinkContainer--edit",icon:l5}),g(Ze,{type:"button",title:k("labels.linkToElement"),"aria-label":k("labels.linkToElement"),label:k("labels.linkToElement"),onClick:()=>{n({openDialog:{name:"elementLinkSelector",sourceElementId:e.id}})},icon:Bz}),c&&!lr(e)&&g(Ze,{type:"button",title:k("buttons.remove"),"aria-label":k("buttons.remove"),label:k("buttons.remove"),onClick:p,className:"excalidraw-hyperlinkContainer--remove",icon:Tc})]})]})},k$=(e,t,n)=>{const[i,r]=Ne(e,n),{x:s,y:o}=Os({sceneX:i+e.width/2,sceneY:r},t),a=s-t.offsetLeft-Y_/2,l=o-t.offsetTop-R$;return{x:a,y:l}},JM=(e,t)=>{var r;const n=Be(e,t);return lr(n[0])?"labels.link.editEmbed":(r=n[0])!=null&&r.link?"labels.link.edit":"labels.link.create"};let t0=null;const H6e=(e,t,n)=>{t0&&clearTimeout(t0),t0=window.setTimeout(()=>V6e(e,t,n),Gne)},V6e=(e,t,n)=>{if(!e.link)return;const i=Z1();i.classList.add("excalidraw-tooltip--visible"),i.style.maxWidth="20rem",i.textContent=Yf(e.link)?k("labels.link.goToElement"):e.link;const[r,s,o,a]=Ne(e,n),[l,c,u,d]=P_([r,s,o,a],e.angle,t),f=Os({sceneX:l,sceneY:c},t);rV(i,{left:f.x,top:f.y,width:u,height:d},"top"),ct("hyperlink","tooltip","link-icon"),a4=!0},eR=()=>{t0&&clearTimeout(t0),a4&&(a4=!1,Z1().classList.remove("excalidraw-tooltip--visible"))},$6e=(e,t,n,[i,r])=>{const{x:s,y:o}=Pt({clientX:i,clientY:r},n),a=15/n.zoom.value;if(v9(s,o,e,t))return!1;const[l,c,u]=Ne(e,t);if(s>=l&&s<=u&&o>=c-R$&&o<=c)return!1;const{x:d,y:f}=k$(e,n,t);return!(i>=d-a&&i<=d+Y_+o4*2+a&&r>=f-a&&r<=f+a+o4*2+F6e)},L$=oe({name:"hyperlink",label:(e,t)=>JM(e,t),icon:Rb,perform:(e,t)=>t.showHyperlinkPopup==="editor"?!1:{elements:e,appState:{...t,showHyperlinkPopup:"editor",openMenu:null},captureUpdate:Z.IMMEDIATELY},trackEvent:{category:"hyperlink",action:"click"},keyTest:e=>e[z.CTRL_OR_CMD]&&e.key===z.K,predicate:(e,t)=>Be(e,t).length===1,PanelComponent:({elements:e,appState:t,updateData:n})=>{const i=Be(e,t);return g(Ze,{type:"button",icon:Rb,"aria-label":k(JM(e,t)),title:`${lr(e[0])?k("labels.link.labelEmbed"):k("labels.link.label")} - ${Q("CtrlOrCmd+K")}`,onClick:()=>n(null),selected:i.length===1&&!!i[0].link})}}),c7=e=>e.every(t=>!t.locked),G6e=oe({name:"toggleElementLock",label:(e,t,n)=>{const i=n.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!1});return i.length===1&&!Ie(i[0])?i[0].locked?"labels.elementLock.unlock":"labels.elementLock.lock":c7(i)?"labels.elementLock.lockAll":"labels.elementLock.unlockAll"},icon:(e,t)=>{const n=Be(t,e);return c7(n)?t_:a5},trackEvent:{category:"element"},predicate:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t);return r.length>0&&!r.some(s=>s.locked&&s.frameId)},perform:(e,t,n,i)=>{const r=i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});if(!r.length)return!1;const s=c7(r),o=Se(r);return{elements:e.map(a=>o.has(a.id)?Ce(a,{locked:s}):a),appState:{...t,selectedLinearElement:s?null:t.selectedLinearElement},captureUpdate:Z.IMMEDIATELY}},keyTest:(e,t,n,i)=>e.key.toLocaleLowerCase()===z.L&&e[z.CTRL_OR_CMD]&&e.shiftKey&&i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!1}).length>0}),X6e=oe({name:"unlockAllElements",paletteName:"Unlock all elements",trackEvent:{category:"canvas"},viewMode:!1,icon:a5,predicate:(e,t)=>Be(e,t).length===0&&e.some(i=>i.locked),perform:(e,t)=>{const n=e.filter(i=>i.locked);return{elements:e.map(i=>i.locked?Ce(i,{locked:!1}):i),appState:{...t,selectedElementIds:Object.fromEntries(n.map(i=>[i.id,!0]))},captureUpdate:Z.IMMEDIATELY}},label:"labels.elementLock.unlockAll"});var D$={exports:{}};(function(e,t){(function(){var n={};e.exports=n,n.simpleFilter=function(i,r){return r.filter(function(s){return n.test(i,s)})},n.test=function(i,r){return n.match(i,r)!==null},n.match=function(i,r,s){s=s||{};var o=0,a=[],l=r.length,c=0,u=0,d=s.pre||"",f=s.post||"",h=s.caseSensitive&&r||r.toLowerCase(),m;i=s.caseSensitive&&i||i.toLowerCase();for(var p=0;p<l;p++)m=r[p],h[p]===i[o]?(m=d+m+f,o+=1,u+=1+u):u=0,c+=u,a[a.length]=m;return o===i.length?(c=h===i?1/0:c,{rendered:a.join(""),score:c}):null},n.filter=function(i,r,s){return!r||r.length===0?[]:typeof i!="string"?r:(s=s||{},r.reduce(function(o,a,l,c){var u=a;s.extract&&(u=s.extract(a));var d=n.match(i,u,s);return d!=null&&(o[o.length]={string:d.rendered,score:d.score,index:l,original:a}),o},[]).sort(function(o,a){var l=a.score-o.score;return l||o.index-a.index}))}})()})(D$);var j6e=D$.exports;const Y6e=al(j6e),N$=oe({name:"copyElementLink",label:"labels.copyElementLink",icon:Ym,trackEvent:{category:"element"},perform:async(e,t,n,i)=>{const r=Be(e,t);try{if(window.location){const s=mB(r,t);return s?(await Hc(i.props.generateLinkForSelection?i.props.generateLinkForSelection(s.id,s.type):gB(s.id,s.type)),{appState:{toast:{message:k("toast.elementLinkCopied"),closable:!0}},captureUpdate:Z.EVENTUALLY}):{appState:t,elements:e,app:i,captureUpdate:Z.EVENTUALLY}}}catch(s){console.error(s)}return{appState:t,elements:e,app:i,captureUpdate:Z.EVENTUALLY}},predicate:(e,t)=>xb(Be(e,t))}),W6e=oe({name:"linkToElement",label:"labels.linkToElement",icon:Bz,perform:(e,t,n,i)=>{const r=Be(e,t);return r.length!==1||!xb(r)?{elements:e,appState:t,app:i,captureUpdate:Z.EVENTUALLY}:{appState:{...t,openDialog:{name:"elementLinkSelector",sourceElementId:Be(e,t)[0].id}},captureUpdate:Z.IMMEDIATELY}},predicate:(e,t,n,i)=>{var s;const r=Be(e,t);return((s=t.openDialog)==null?void 0:s.name)!=="elementLinkSelector"&&r.length===1&&xb(r)},trackEvent:!1}),K6e={toggleTheme:[Q("Shift+Alt+D")],saveScene:[Q("CtrlOrCmd+S")],loadScene:[Q("CtrlOrCmd+O")],clearCanvas:[Q("CtrlOrCmd+Delete")],imageExport:[Q("CtrlOrCmd+Shift+E")],commandPalette:[Q("CtrlOrCmd+/"),Q("CtrlOrCmd+Shift+P")],cut:[Q("CtrlOrCmd+X")],copy:[Q("CtrlOrCmd+C")],paste:[Q("CtrlOrCmd+V")],copyStyles:[Q("CtrlOrCmd+Alt+C")],pasteStyles:[Q("CtrlOrCmd+Alt+V")],selectAll:[Q("CtrlOrCmd+A")],deleteSelectedElements:[Q("Delete")],duplicateSelection:[Q("CtrlOrCmd+D"),Q(`Alt+${k("helpDialog.drag")}`)],sendBackward:[Q("CtrlOrCmd+[")],bringForward:[Q("CtrlOrCmd+]")],sendToBack:[Q(zo?"CtrlOrCmd+Alt+[":"CtrlOrCmd+Shift+[")],bringToFront:[Q(zo?"CtrlOrCmd+Alt+]":"CtrlOrCmd+Shift+]")],copyAsPng:[Q("Shift+Alt+C")],group:[Q("CtrlOrCmd+G")],ungroup:[Q("CtrlOrCmd+Shift+G")],gridMode:[Q("CtrlOrCmd+'")],zenMode:[Q("Alt+Z")],objectsSnapMode:[Q("Alt+S")],stats:[Q("Alt+/")],addToLibrary:[],flipHorizontal:[Q("Shift+H")],flipVertical:[Q("Shift+V")],viewMode:[Q("Alt+R")],hyperlink:[Q("CtrlOrCmd+K")],toggleElementLock:[Q("CtrlOrCmd+Shift+L")],resetZoom:[Q("CtrlOrCmd+0")],zoomOut:[Q("CtrlOrCmd+-")],zoomIn:[Q("CtrlOrCmd++")],zoomToFitSelection:[Q("Shift+3")],zoomToFit:[Q("Shift+1")],zoomToFitSelectionInViewport:[Q("Shift+2")],toggleEraserTool:[Q("E")],toggleHandTool:[Q("H")],setFrameAsActiveTool:[Q("F")],saveFileToDisk:[Q("CtrlOrCmd+S")],saveToActiveFile:[Q("CtrlOrCmd+S")],toggleShortcuts:[Q("?")],searchMenu:[Q("CtrlOrCmd+F")],wrapSelectionInFrame:[]},zi=(e,t=0)=>{const n=K6e[e];return n&&n.length>0?n[t]||n[0]:""},Z6e="\\u0300-\\u036f",q6e="\\ufe20-\\ufe2f",Q6e="\\u20d0-\\u20ff",J6e=Z6e+q6e+Q6e,e5e=`[${J6e}]`,t5e=RegExp(e5e,"g"),n5e=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,i5e={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"E",æ:"e",Þ:"T",þ:"t",ß:"s",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"I",ĳ:"i",Œ:"E",œ:"e",ŉ:"n",ſ:"s"},tR=e=>e.replace(n5e,t=>i5e[t]||t).replace(t5e,""),O$=()=>{const[e,t]=N.useState(null),n=N.useCallback(i=>t(i),[]);return[e,n]};var P5={},r5e=s5e;function s5e(e,t){if(e=String(e),t=String(t),!/^[\x00-\xFF]+$/.test(e)||!/^[\x00-\xFF]+$/.test(t))throw new Error("Only Latin-1 characters are permitted in PNG tEXt chunks. You might want to consider base64 encoding and/or zEXt compression");if(e.length>=80)throw new Error('Keyword "'+e+'" is longer than the 79-character limit imposed by the PNG specification');for(var n=e.length+t.length+1,i=new Uint8Array(n),r=0,s,o=0;o<e.length;o++){if(!(s=e.charCodeAt(o)))throw new Error("0x00 character is not permitted in tEXt keywords");i[r++]=s}i[r++]=0;for(var a=0;a<t.length;a++){if(!(s=t.charCodeAt(a)))throw new Error("0x00 character is not permitted in tEXt content");i[r++]=s}return{name:"tEXt",data:i}}var o5e=a5e;function a5e(e){e.data&&e.name&&(e=e.data);for(var t=!0,n="",i="",r=0;r<e.length;r++){var s=e[r];if(t)s?i+=String.fromCharCode(s):t=!1;else if(s)n+=String.fromCharCode(s);else throw new Error("Invalid NULL character found. 0x00 character is not permitted in tEXt content")}return{keyword:i,text:n}}P5.encode=r5e;P5.decode=o5e;var l5e=function(e,t,n){var i=[],r=e.length;if(r===0)return i;var s=t<0?Math.max(0,t+r):t||0;for(n!==void 0&&(r=n<0?n+r:n);r-- >s;)i[r-s]=e[r];return i},W_={};(function(e){(function(t){t(typeof DO_NOT_EXPORT_CRC>"u"?e:{})})(function(t){t.version="0.3.0";function n(){for(var c=0,u=new Array(256),d=0;d!=256;++d)c=d,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,u[d]=c;return typeof Int32Array<"u"?new Int32Array(u):u}var i=n(),r=typeof Buffer<"u";function s(c){if(c.length>32768&&r)return a(new Buffer(c));for(var u=-1,d=c.length-1,f=0;f<d;)u=i[(u^c.charCodeAt(f++))&255]^u>>>8,u=i[(u^c.charCodeAt(f++))&255]^u>>>8;return f===d&&(u=u>>>8^i[(u^c.charCodeAt(f))&255]),u^-1}function o(c){if(c.length>1e4)return a(c);for(var u=-1,d=0,f=c.length-3;d<f;)u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255];for(;d<f+3;)u=u>>>8^i[(u^c[d++])&255];return u^-1}function a(c){for(var u=-1,d=0,f=c.length-7;d<f;)u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255];for(;d<f+7;)u=u>>>8^i[(u^c[d++])&255];return u^-1}function l(c){for(var u=-1,d=0,f=c.length,h,m;d<f;)h=c.charCodeAt(d++),h<128?u=u>>>8^i[(u^h)&255]:h<2048?(u=u>>>8^i[(u^(192|h>>6&31))&255],u=u>>>8^i[(u^(128|h&63))&255]):h>=55296&&h<57344?(h=(h&1023)+64,m=c.charCodeAt(d++)&1023,u=u>>>8^i[(u^(240|h>>8&7))&255],u=u>>>8^i[(u^(128|h>>2&63))&255],u=u>>>8^i[(u^(128|m>>6&15|h&3))&255],u=u>>>8^i[(u^(128|m&63))&255]):(u=u>>>8^i[(u^(224|h>>12&15))&255],u=u>>>8^i[(u^(128|h>>6&63))&255],u=u>>>8^i[(u^(128|h&63))&255]);return u^-1}t.table=i,t.bstr=s,t.buf=o,t.str=l})})(W_);var c5e=l5e,u5e=W_,d5e=g5e,Uo=new Uint8Array(4),f5e=new Int32Array(Uo.buffer),h5e=new Uint32Array(Uo.buffer);function g5e(e){var t=8,n=t,i;for(i=0;i<e.length;i++)t+=e[i].data.length,t+=12;var r=new Uint8Array(t);for(r[0]=137,r[1]=80,r[2]=78,r[3]=71,r[4]=13,r[5]=10,r[6]=26,r[7]=10,i=0;i<e.length;i++){var s=e[i],o=s.name,a=s.data,l=a.length,c=[o.charCodeAt(0),o.charCodeAt(1),o.charCodeAt(2),o.charCodeAt(3)];h5e[0]=l,r[n++]=Uo[3],r[n++]=Uo[2],r[n++]=Uo[1],r[n++]=Uo[0],r[n++]=c[0],r[n++]=c[1],r[n++]=c[2],r[n++]=c[3];for(var u=0;u<l;)r[n++]=a[u++];var d=c.concat(c5e(a)),f=u5e.buf(d);f5e[0]=f,r[n++]=Uo[3],r[n++]=Uo[2],r[n++]=Uo[1],r[n++]=Uo[0]}return r}const m5e=al(d5e);var p5e=W_,U5e=E5e,bo=new Uint8Array(4),b5e=new Int32Array(bo.buffer),y5e=new Uint32Array(bo.buffer);function E5e(e){if(e[0]!==137)throw new Error("Invalid .png file header");if(e[1]!==80)throw new Error("Invalid .png file header");if(e[2]!==78)throw new Error("Invalid .png file header");if(e[3]!==71)throw new Error("Invalid .png file header");if(e[4]!==13)throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");if(e[5]!==10)throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");if(e[6]!==26)throw new Error("Invalid .png file header");if(e[7]!==10)throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");for(var t=!1,n=[],i=8;i<e.length;){bo[3]=e[i++],bo[2]=e[i++],bo[1]=e[i++],bo[0]=e[i++];var r=y5e[0]+4,s=new Uint8Array(r);s[0]=e[i++],s[1]=e[i++],s[2]=e[i++],s[3]=e[i++];var o=String.fromCharCode(s[0])+String.fromCharCode(s[1])+String.fromCharCode(s[2])+String.fromCharCode(s[3]);if(!n.length&&o!=="IHDR")throw new Error("IHDR header missing");if(o==="IEND"){t=!0,n.push({name:o,data:new Uint8Array(0)});break}for(var a=4;a<r;a++)s[a]=e[i++];bo[3]=e[i++],bo[2]=e[i++],bo[1]=e[i++],bo[0]=e[i++];var l=b5e[0],c=p5e.buf(s);if(c!==l)throw new Error("CRC values for "+o+" header do not match, PNG file is likely corrupted");var u=new Uint8Array(s.buffer.slice(4));n.push({name:o,data:u})}if(!t)throw new Error(".png file ended prematurely: no IEND header was found");return n}const P$=al(U5e),F$=async e=>{const n=P$(new Uint8Array(await $l(e))).find(i=>i.name==="tEXt");return n?P5.decode(n.data):null},B$=async({blob:e,metadata:t})=>{const n=P$(new Uint8Array(await $l(e))),i=P5.encode(be.excalidraw,JSON.stringify(ZV({text:t,compress:!0})));return n.splice(-1,0,i),new Blob([m5e(n)],{type:be.png})},v5e=async e=>{const t=await F$(e);if((t==null?void 0:t.keyword)===be.excalidraw)try{const n=JSON.parse(t.text);if(!("encoded"in n)){if("type"in n&&n.type===ds.excalidraw)return t.text;throw new Error("FAILED")}return qV(n)}catch(n){throw console.error(n),new Error("FAILED")}throw new Error("INVALID")},z$=Object.freeze(Object.defineProperty({__proto__:null,decodePngMetadata:v5e,encodePngMetadata:B$,getTEXtChunk:F$},Symbol.toStringTag,{value:"Module"})),F5=({elements:e,appState:t,files:n,maxWidthOrHeight:i,getDimensions:r,exportPadding:s,exportingFrame:o})=>{const{elements:a,appState:l}=fd({elements:e,appState:t},null,null),{exportBackground:c,viewBackgroundColor:u}=l;return f$(a,{...l,offsetTop:0,offsetLeft:0,width:0,height:0},n||{},{exportBackground:c,exportPadding:s,viewBackgroundColor:u,exportingFrame:o},(d,f)=>{const h=document.createElement("canvas");if(i){typeof r=="function"&&console.warn("`getDimensions()` is ignored when `maxWidthOrHeight` is supplied.");const p=Math.max(d,f),b=i<p?i/p:(t==null?void 0:t.exportScale)??1;return h.width=d*b,h.height=f*b,{canvas:h,scale:b}}const m=(r==null?void 0:r(d,f))||{width:d,height:f};return h.width=m.width,h.height=m.height,{canvas:h,scale:m.scale??1}})},_5e=async e=>{var r;let{mimeType:t=be.png,quality:n}=e;t===be.png&&typeof n=="number"&&console.warn(`"quality" will be ignored for "${be.png}" mimeType`),t==="image/jpg"&&(t=be.jpg),t===be.jpg&&!((r=e.appState)!=null&&r.exportBackground)&&(console.warn(`Defaulting "exportBackground" to "true" for "${be.jpg}" mimeType`),e={...e,appState:{...e.appState,exportBackground:!0}});const i=await F5(e);return n=n||(/image\/jpe?g/.test(t)?.92:.8),new Promise((s,o)=>{i.toBlob(async a=>{var l;if(!a)return o(new Error("couldn't export to blob"));a&&t===be.png&&((l=e.appState)!=null&&l.exportEmbedScene)&&(a=await B$({blob:a,metadata:ag(e.elements,e.appState,e.files||{},"local")})),s(a)},t,n)})},H$=async({elements:e,appState:t=to(),files:n={},exportPadding:i,renderEmbeddables:r,exportingFrame:s,skipInliningFonts:o,reuseImages:a})=>{const{elements:l,appState:c}=fd({elements:e,appState:t},null,null),u={...c,exportPadding:i};return F_(l,u,n,{exportingFrame:s,renderEmbeddables:r,skipInliningFonts:o,reuseImages:a})},V$=Jt(new Map),nR=async e=>await H$({elements:e,appState:{exportBackground:!1,viewBackgroundColor:Xe.white},files:null,renderEmbeddables:!1,skipInliningFonts:!0}),w5e=(e,t,n)=>{const[i,r]=N.useState();return N.useEffect(()=>{if(t)if(e){const s=n.get(e);s?r(s):(async()=>{var a;const o=await nR(t);(a=o.querySelector(".style-fonts"))==null||a.remove(),o&&(n.set(e,o),r(o))})()}else(async()=>{const s=await nR(t);r(s)})()},[e,t,n,r]),i},$$=()=>{const[e]=hn(V$);return{clearLibraryCache:()=>e.clear(),deleteItemsFromLibraryCache:i=>{i.forEach(r=>e.delete(r))},svgCache:e}},T5e=["excalidraw.com","raw.githubusercontent.com/excalidraw/excalidraw-libraries"],G$=new vo,im=Jt({status:"loaded",isInitialized:!1,libraryItems:[]}),Yg=e=>Na(e),S5e=(e,t)=>!e.find(n=>n.elements.length!==t.elements.length?!1:n.elements.every((i,r)=>i.id===t.elements[r].id&&i.versionNonce===t.elements[r].versionNonce)),I5e=(e,t)=>{const n=[];for(const i of t)S5e(e,i)&&n.push(i);return[...n,...e]},X$=(e,t)=>{const n=Se(t),i={deletedItems:new Map,addedItems:new Map};for(const s of e)n.has(s.id)||i.deletedItems.set(s.id,s);const r=Se(e);for(const s of t)r.has(s.id)||i.addedItems.set(s.id,s);return i};class x5e{constructor(t){this.currLibraryItems=[],this.prevLibraryItems=Yg(this.currLibraryItems),this.updateQueue=[],this.getLastUpdateTask=()=>this.updateQueue[this.updateQueue.length-1],this.notifyListeners=()=>{var n,i;if(this.updateQueue.length>0)zs.set(im,r=>({status:"loading",libraryItems:this.currLibraryItems,isInitialized:r.isInitialized}));else{zs.set(im,{status:"loaded",libraryItems:this.currLibraryItems,isInitialized:!0});try{const r=this.prevLibraryItems;this.prevLibraryItems=Yg(this.currLibraryItems);const s=Yg(this.currLibraryItems);(i=(n=this.app.props).onLibraryChange)==null||i.call(n,s),G$.trigger(X$(r,s),s)}catch(r){console.error(r)}}},this.destroy=()=>{this.updateQueue=[],this.currLibraryItems=[],zs.set(V$,new Map)},this.resetLibrary=()=>this.setLibrary([]),this.getLatestLibrary=()=>new Promise(async n=>{try{const i=await(this.getLastUpdateTask()||this.currLibraryItems);this.updateQueue.length>0?n(this.getLatestLibrary()):n(Yg(i))}catch{return n(this.currLibraryItems)}}),this.updateLibrary=async({libraryItems:n,prompt:i=!1,merge:r=!1,openLibraryMenu:s=!1,defaultStatus:o="unpublished"})=>(s&&this.app.setState({openSidebar:{name:fs.name,tab:ib}}),this.setLibrary(()=>new Promise(async(a,l)=>{try{const c=await(typeof n=="function"&&!(n instanceof Blob)?n(this.currLibraryItems):n);let u;c instanceof Blob?u=await zbe(c,o):u=L5(c,o),!i||window.confirm(k("alerts.confirmAddLibrary",{numShapes:u.length}))?(i&&this.app.focusContainer(),a(r?I5e(this.currLibraryItems,u):u)):l(new xh)}catch(c){l(c)}}))),this.setLibrary=n=>{const i=new Promise(async(r,s)=>{try{await this.getLastUpdateTask(),typeof n=="function"&&(n=n(this.currLibraryItems)),this.currLibraryItems=Yg(await n),r(this.currLibraryItems)}catch(o){s(o)}}).catch(r=>{if(r.name==="AbortError")return console.warn("Library update aborted by user"),this.currLibraryItems;throw r}).finally(()=>{this.updateQueue=this.updateQueue.filter(r=>r!==i),this.notifyListeners()});return this.updateQueue.push(i),this.notifyListeners(),i},this.app=t}}const j$=e=>{const n=Math.ceil(Math.sqrt(e.length)),i=[],r=h=>e.slice(h*n,h*n+n).reduce((p,b)=>{const{height:E}=Xs(b.elements);return Math.max(p,E)},0),s=h=>{let m=0,p=0,b=0;for(const E of e){if(m%n===0&&(p=0),p===h){const{width:y}=Xs(E.elements);b=Math.max(b,y)}m++,p++}return b};let o=0,a=0,l=0,c=0,u=0,d=0,f=0;for(const h of e){u&&u%n===0&&(a+=l+50,o=0,d=0,f++),d===0&&(l=r(f)),c=s(d);const{minX:m,minY:p,width:b,height:E}=Xs(h.elements),y=(c-b)/2,v=(l-E)/2;i.push(...h.elements.map(_=>({..._,x:_.x+o+y-m,y:_.y+a+v-p}))),o+=c+50,u++,d++}return i},C5e=(e,t=T5e)=>{if(typeof t=="function"?t(e):t.some(n=>{const i=new URL(`https://${n.replace(/^https?:\/\//,"")}`),{hostname:r,pathname:s}=new URL(e);return new RegExp(`(^|\\.)${i.hostname}$`).test(r)&&new RegExp(`^${i.pathname.replace(/\/+$/,"")}(/+|$)`).test(s)}))return!0;throw new Error(`Invalid or disallowed library URL: "${e}"`)},l4=()=>{const e=new URLSearchParams(window.location.hash.slice(1)).get(q3.addLibrary)||new URLSearchParams(window.location.search).get(Z3.addLibrary),t=e?new URLSearchParams(window.location.hash.slice(1)).get("token"):null;return e?{libraryUrl:e,idToken:t}:null},Al=class Al{static async getLibraryItems(t,n,i=!0){const r=()=>new Promise(async(s,o)=>{try{const a=await t.load({source:n});s(L5((a==null?void 0:a.libraryItems)||[],"published"))}catch(a){o(a)}});return i?Al.queue.push(r):r()}constructor(t){this.adapter=t}getLibraryItems(t){return Al.getLibraryItems(this.adapter,t,!1)}};Al.queue=new eie,Al.run=async(t,n)=>{const i=new Al(t);return Al.queue.push(()=>n(i))};let Qf=Al,n0=0,jb=0;const c4=e=>mF(e.map(t=>`${t.id}:${noe(t.elements)}`).sort().join()),iR=async(e,t)=>{try{return jb++,await Qf.run(e,async n=>{const i=Se(await n.getLibraryItems("save"));for(const[a]of t.deletedItems)i.delete(a);const r=[];for(const[a,l]of t.addedItems)i.has(a)?i.set(a,l):r.push(l);const s=r.concat(Array.from(i.values())),o=c4(s);return o!==n0&&await e.save({libraryItems:s}),n0=o,s})}finally{jb--}},A5e=e=>{const{excalidrawAPI:t}=e,n=N.useRef(e);n.current=e;const i=N.useRef(!1);N.useEffect(()=>{if(!t)return;i.current=!1;const r=async({libraryUrl:a,idToken:l})=>{const c=new Promise(async(d,f)=>{try{a=decodeURIComponent(a),a=p9(a),C5e(a,n.current.validateLibraryUrl);const m=await(await fetch(a)).blob();d(m)}catch(h){f(h)}}),u=l!==t.id;await(u&&document.hidden?new Promise(d=>{window.addEventListener("focus",()=>d(),{once:!0})}):null);try{await t.updateLibrary({libraryItems:c,prompt:u,merge:!0,defaultStatus:"published",openLibraryMenu:!0})}catch(d){throw t.updateScene({appState:{errorMessage:d.message}}),d}finally{if(window.location.hash.includes(q3.addLibrary)){const d=new URLSearchParams(window.location.hash.slice(1));d.delete(q3.addLibrary),window.history.replaceState({},La,`#${d.toString()}`)}else if(window.location.search.includes(Z3.addLibrary)){const d=new URLSearchParams(window.location.search);d.delete(Z3.addLibrary),window.history.replaceState({},La,`?${d.toString()}`)}}},s=a=>{a.preventDefault();const l=l4();l&&(a.stopImmediatePropagation(),window.history.replaceState({},"",a.oldURL),r(l))},o=l4();if(o&&r(o),"getInitialLibraryItems"in n.current&&n.current.getInitialLibraryItems&&(console.warn("useHandleLibrar `opts.getInitialLibraryItems` is deprecated. Use `opts.adapter` instead."),Promise.resolve(n.current.getInitialLibraryItems()).then(a=>{t.updateLibrary({libraryItems:a,merge:!0})}).catch(a=>{console.error(`UseHandeLibrary getInitialLibraryItems failed: ${a==null?void 0:a.message}`)})),"adapter"in n.current&&n.current.adapter){const a=n.current.adapter,l=n.current.migrationAdapter,c=G6();l?c.resolve(vc(l.load).then(async u=>{let d=null;try{if(!u)return Qf.getLibraryItems(a,"load");d=L5(u.libraryItems||[],"published");const f=await iR(a,X$([],d));try{await l.clear()}catch(h){console.error(`couldn't delete legacy library data: ${h.message}`)}return f}catch(f){return console.error(`couldn't migrate legacy library data: ${f.message}`),d}}).catch(u=>(console.error(`error during library migration: ${u.message}`),Qf.getLibraryItems(a,"load")))):c.resolve(vc(Qf.getLibraryItems,a,"load")),t.updateLibrary({libraryItems:c.then(u=>{const d=u||[];return n0=c4(d),d}),merge:!0}).finally(()=>{i.current=!0})}return window.addEventListener(te.HASHCHANGE,s),()=>{window.removeEventListener(te.HASHCHANGE,s)}},[t]),N.useEffect(()=>{const r=G$.on(async(o,a)=>{const l=i.current,c="adapter"in n.current&&n.current.adapter||null;try{c&&n0!==c4(a)&&await iR(c,o)}catch(u){console.error(`couldn't persist library update: ${u.message}`,o),l&&n.current.excalidrawAPI&&n.current.excalidrawAPI.updateScene({appState:{errorMessage:k("errors.saveLibraryError")}})}}),s=o=>{jb&&h9(o)};return window.addEventListener(te.BEFORE_UNLOAD,s),()=>{window.removeEventListener(te.BEFORE_UNLOAD,s),r(),n0=0,jb=0}},[])},M5e=({theme:e,id:t,libraryReturnUrl:n})=>{const i=n||window.location.origin+window.location.pathname;return g("a",{className:"library-menu-browse-button",href:`https://libraries.excalidraw.com?target=${window.name||"_blank"}&referrer=${i}&useHash=true&token=${t}&theme=${e}&version=${$6.excalidrawLibrary}`,target:"_excalidraw_libraries",children:k("labels.libraries")})},Y$=({libraryReturnUrl:e,theme:t,id:n,style:i,children:r,className:s})=>P("div",{className:me("library-menu-control-buttons",s),style:i,children:[g(M5e,{id:n,libraryReturnUrl:e,theme:t}),r]}),R5e=Jt(0),k5e=e=>{const[t,n]=hn(R5e);return N.useEffect(()=>{const{current:i}=e;if(!i)return;const r=Mo(()=>{const{scrollTop:s}=i;n(s)},200);return i.addEventListener("scroll",r),()=>{r.cancel(),i.removeEventListener("scroll",r)}},[e,n]),t},Mh=({label:e,onClick:t,className:n,children:i,actionType:r,type:s="button",isLoading:o,...a})=>{const l=r?`Dialog__action-button--${r}`:"";return P("button",{className:me("Dialog__action-button",l,n),type:s,"aria-label":e,onClick:t,...a,children:[i&&g("div",{style:o?{visibility:"hidden"}:{},children:i}),g("div",{style:o?{visibility:"hidden"}:{},children:e}),o&&g("div",{style:{position:"absolute",inset:0},children:g(Qa,{})})]})},W$=e=>{const{onConfirm:t,onCancel:n,children:i,confirmText:r=k("buttons.confirm"),cancelText:s=k("buttons.cancel"),className:o="",...a}=e,l=zn(),c=s5(K_),{container:u}=Zo();return P($r,{onCloseRequest:n,size:"small",...a,className:`confirm-dialog ${o}`,children:[i,P("div",{className:"confirm-dialog-buttons",children:[g(Mh,{label:s,onClick:()=>{l({openMenu:null}),c(!1),ii.flushSync(()=>{n()}),u==null||u.focus()}}),g(Mh,{label:r,onClick:()=>{l({openMenu:null}),c(!1),ii.flushSync(()=>{t()}),u==null||u.focus()},actionType:"danger"})]})]})};class Bu{static has(t){try{return!!window.localStorage.getItem(t)}catch(n){return console.warn(`localStorage.getItem error: ${n.message}`),!1}}static get(t){try{const n=window.localStorage.getItem(t);return n?JSON.parse(n):null}catch(n){return console.warn(`localStorage.getItem error: ${n.message}`),null}}}F(Bu,"set",(t,n)=>{try{return window.localStorage.setItem(t,JSON.stringify(n)),!0}catch(i){return console.warn(`localStorage.setItem error: ${i.message}`),!1}}),F(Bu,"delete",t=>{try{window.localStorage.removeItem(t)}catch(n){console.warn(`localStorage.removeItem error: ${n.message}`)}});const L5e=/({{[\w-]+}})|(<[\w-]+>)|(<\/[\w-]+>)/g,D5e=/{{([\w-]+)}}/,N5e=/<([\w-]+)>/,O5e=/<\/([\w-]+)>/,P5e=(e,t)=>{const n=[{name:"",children:[]}];return e.split(L5e).filter(Boolean).forEach(i=>{const r=i.match(N5e),s=i.match(O5e),o=i.match(D5e);if(r!==null){const a=r[1];t.hasOwnProperty(a)?n.push({name:a,children:[]}):console.warn(`Trans: missed to pass in prop ${a} for interpolating ${e}`)}else if(s!==null)if(s[1]===n[n.length-1].name){const l=n.pop(),c=se.createElement(se.Fragment,{},...l.children),u=t[l.name];typeof u=="function"&&n[n.length-1].children.push(u(c))}else console.warn(`Trans: unexpected end tag ${i} for interpolating ${e}`);else if(o!==null){const a=o[1];t.hasOwnProperty(a)?n[n.length-1].children.push(t[a]):console.warn(`Trans: key ${a} not in props for interpolating ${e}`)}else n[n.length-1].children.push(i)}),n.length!==1&&console.warn(`Trans: stack not empty for interpolating ${e}`),n[0].children},gr=({i18nKey:e,children:t,...n})=>{const{t:i}=gn();return se.createElement(se.Fragment,{},...P5e(i(e),n))},F5e=async e=>{const i=Math.round(8),r=Math.max(Math.round(128/64),2),s=_ie(e,6),o=document.createElement("canvas");o.width=s[0].length*128+(s[0].length+1)*(i*2)-i*2,o.height=s.length*128+(s.length+1)*(i*2)-i*2;const a=o.getContext("2d");a.fillStyle=ai.white,a.fillRect(0,0,o.width,o.height);for(const[l,c]of e.entries()){const u=await F5({elements:c.elements,files:null,maxWidthOrHeight:128}),{width:d,height:f}=u,h=Math.floor(l/6)*(128+i*2),m=l%6*(128+i*2);a.drawImage(u,m+(128-d)/2+i,h+(128-f)/2+i),a.lineWidth=r,a.strokeStyle=ai.gray[4],a.strokeRect(m+i/2,h+i/2,128+i,128+i)}return await n4(new File([await tm(o)],"preview",{type:be.png}),{outputType:be.jpg,maxWidthOrHeight:5e3})},B5e=({libItem:e,appState:t,index:n,onChange:i,onRemove:r})=>{const s=N.useRef(null),o=N.useRef(null);return N.useEffect(()=>{const a=s.current;a&&(async()=>{const l=await H$({elements:e.elements,appState:{...t,viewBackgroundColor:ai.white,exportBackground:!0},files:null,skipInliningFonts:!0});a.innerHTML=l.outerHTML})()},[e.elements,t]),P("div",{className:"single-library-item",children:[e.status==="published"&&g("span",{className:"single-library-item-status",children:k("labels.statusPublished")}),g("div",{ref:s,className:"single-library-item__svg"}),g(Ze,{"aria-label":k("buttons.remove"),type:"button",icon:Ad,className:"single-library-item--remove",onClick:r.bind(null,e.id),title:k("buttons.remove")}),P("div",{style:{display:"flex",margin:"0.8rem 0",width:"100%",fontSize:"14px",fontWeight:500,flexDirection:"column"},children:[P("label",{style:{display:"flex",justifyContent:"space-between",flexDirection:"column"},children:[P("div",{style:{padding:"0.5em 0"},children:[g("span",{style:{fontWeight:500,color:ai.gray[6]},children:k("publishDialog.itemName")}),g("span",{"aria-hidden":"true",className:"required",children:"*"})]}),g("input",{type:"text",ref:o,style:{width:"80%",padding:"0.2rem"},defaultValue:e.name,placeholder:"Item name",onChange:a=>{i(a.target.value,n)}})]}),g("span",{className:"error",children:e.error})]})]})},z5e=({onClose:e,libraryItems:t,appState:n,onSuccess:i,onError:r,updateItemsInStorage:s,onRemove:o})=>{const[a,l]=N.useState({authorName:"",githubHandle:"",name:"",description:"",twitterHandle:"",website:""}),[c,u]=N.useState(!1);N.useEffect(()=>{const v=Bu.get(z1.PUBLISH_LIBRARY);v&&l(v)},[]);const[d,f]=N.useState(t.slice());N.useEffect(()=>{f(t.slice())},[t]);const h=v=>{l({...a,[v.target.name]:v.target.value})},m=async v=>{v.preventDefault(),u(!0);const _=[];let S=!1;if(d.forEach(R=>{let D="";R.name||(D=k("publishDialog.errors.required"),S=!0),_.push({...R,error:D})}),S){f(_),u(!1);return}const M=await F5e(d),w={type:ds.excalidrawLibrary,version:$6.excalidrawLibrary,source:s9,libraryItems:d},T=JSON.stringify(w,null,2),A=new Blob([T],{type:"application/json"}),I=new FormData;I.append("excalidrawLib",A),I.append("previewImage",M),I.append("previewImageType",M.type),I.append("title",a.name),I.append("authorName",a.authorName),I.append("githubHandle",a.githubHandle),I.append("name",a.name),I.append("description",a.description),I.append("twitterHandle",a.twitterHandle),I.append("website",a.website),fetch("https://us-central1-excalidraw-room-persistence.cloudfunctions.net/libraries/submit",{method:"post",body:I}).then(R=>R.ok?R.json().then(({url:D})=>{Bu.delete(z1.PUBLISH_LIBRARY),i({url:D,authorName:a.authorName,items:d})}):R.json().catch(()=>{throw new Error(R.statusText||"something went wrong")}).then(D=>{throw new Error(D.message||R.statusText||"something went wrong")}),R=>{console.error(R),r(R),u(!1)}).catch(R=>{console.error(R),r(R),u(!1)})},p=()=>{const v=[];return d.forEach((_,S)=>{v.push(g("div",{className:"single-library-item-wrapper",children:g(B5e,{libItem:_,appState:n,index:S,onChange:(M,w)=>{const T=d.slice();T[w].name=M,f(T)},onRemove:o})},S))}),g("div",{className:"selected-library-items",children:v})},b=N.useCallback(()=>{s(d),Bu.set(z1.PUBLISH_LIBRARY,a),e()},[d,e,s,a]),E=!!t.length,y=t.some(v=>v.status==="published");return g($r,{onCloseRequest:b,title:k("publishDialog.title"),className:"publish-library",children:E?P("form",{onSubmit:m,children:[g("div",{className:"publish-library-note",children:g(gr,{i18nKey:"publishDialog.noteDescription",link:v=>g("a",{href:"https://libraries.excalidraw.com",target:"_blank",rel:"noopener noreferrer",children:v})})}),g("span",{className:"publish-library-note",children:g(gr,{i18nKey:"publishDialog.noteGuidelines",link:v=>g("a",{href:"https://github.com/excalidraw/excalidraw-libraries#guidelines",target:"_blank",rel:"noopener noreferrer",children:v})})}),g("div",{className:"publish-library-note",children:k("publishDialog.noteItems")}),y&&g("span",{className:"publish-library-note publish-library-warning",children:k("publishDialog.republishWarning")}),p(),P("div",{className:"publish-library__fields",children:[P("label",{children:[P("div",{children:[g("span",{children:k("publishDialog.libraryName")}),g("span",{"aria-hidden":"true",className:"required",children:"*"})]}),g("input",{type:"text",name:"name",required:!0,value:a.name,onChange:h,placeholder:k("publishDialog.placeholder.libraryName")})]}),P("label",{style:{alignItems:"flex-start"},children:[P("div",{children:[g("span",{children:k("publishDialog.libraryDesc")}),g("span",{"aria-hidden":"true",className:"required",children:"*"})]}),g("textarea",{name:"description",rows:4,required:!0,value:a.description,onChange:h,placeholder:k("publishDialog.placeholder.libraryDesc")})]}),P("label",{children:[P("div",{children:[g("span",{children:k("publishDialog.authorName")}),g("span",{"aria-hidden":"true",className:"required",children:"*"})]}),g("input",{type:"text",name:"authorName",required:!0,value:a.authorName,onChange:h,placeholder:k("publishDialog.placeholder.authorName")})]}),P("label",{children:[g("span",{children:k("publishDialog.githubUsername")}),g("input",{type:"text",name:"githubHandle",value:a.githubHandle,onChange:h,placeholder:k("publishDialog.placeholder.githubHandle")})]}),P("label",{children:[g("span",{children:k("publishDialog.twitterUsername")}),g("input",{type:"text",name:"twitterHandle",value:a.twitterHandle,onChange:h,placeholder:k("publishDialog.placeholder.twitterHandle")})]}),P("label",{children:[g("span",{children:k("publishDialog.website")}),g("input",{type:"text",name:"website",pattern:"https?://.+",title:k("publishDialog.errors.website"),value:a.website,onChange:h,placeholder:k("publishDialog.placeholder.website")})]}),g("span",{className:"publish-library-note",children:g(gr,{i18nKey:"publishDialog.noteLicense",link:v=>g("a",{href:"https://github.com/excalidraw/excalidraw-libraries/blob/main/LICENSE",target:"_blank",rel:"noopener noreferrer",children:v})})})]}),P("div",{className:"publish-library__buttons",children:[g(Mh,{label:k("buttons.cancel"),onClick:b,"data-testid":"cancel-clear-canvas-button"}),g(Mh,{type:"submit",label:k("buttons.submit"),actionType:"primary",isLoading:c})]})]}):g("p",{style:{padding:"1em",textAlign:"center",fontWeight:500},children:k("publishDialog.atleastOneLibItem")})})},H5e=N.forwardRef(({children:e,gap:t,align:n,justifyContent:i,className:r,style:s},o)=>g("div",{className:me("Stack Stack_horizontal",r),style:{"--gap":t,alignItems:n,justifyContent:i,...s},ref:o,children:e})),V5e=N.forwardRef(({children:e,gap:t,align:n,justifyContent:i,className:r,style:s},o)=>g("div",{className:me("Stack Stack_vertical",r),style:{"--gap":t,justifyItems:n,justifyContent:i,...s},ref:o,children:e})),ls={Row:H5e,Col:V5e},K$=({children:e,onClickOutside:t,className:n="",onSelect:i,style:r})=>{const s=qn(),o=N.useRef(null),a=b5({onClickOutside:t});w_(o,()=>{var c;(c=a.onClickOutside)==null||c.call(a)}),N.useEffect(()=>{const c=d=>{var f;d.key===z.ESCAPE&&(d.stopImmediatePropagation(),(f=a.onClickOutside)==null||f.call(a))},u={capture:!0};return document.addEventListener(te.KEYDOWN,c,u),()=>{document.removeEventListener(te.KEYDOWN,c,u)}},[a]);const l=me(`dropdown-menu ${n}`,{"dropdown-menu--mobile":s.editor.isMobile}).trim();return g(JH.Provider,{value:{onSelect:i},children:g("div",{ref:o,className:l,style:r,"data-testid":"dropdown-menu",children:s.editor.isMobile?g(ls.Col,{className:"dropdown-menu-container",children:e}):g(js,{className:"dropdown-menu-container",padding:2,style:{zIndex:2},children:e})})})};K$.displayName="DropdownMenuContent";const $5e=({children:e,className:t="",selected:n,...i})=>g("div",{...i,className:`dropdown-menu-item-base dropdown-menu-item-custom ${t} ${n?"dropdown-menu-item--selected":""}`.trim(),children:e}),i0=({icon:e,shortcut:t,href:n,children:i,onSelect:r,className:s="",selected:o,rel:a="noreferrer",...l})=>{const c=tV(l.onClick,r);return g("a",{...l,href:n,target:"_blank",rel:"noreferrer",className:eV(s,o),title:l.title??l["aria-label"],onClick:c,children:g(QH,{icon:e,shortcut:t,children:i})})};i0.displayName="DropdownMenuItemLink";const Z$=()=>g("div",{style:{height:"1px",backgroundColor:"var(--default-border-color)",margin:".5rem 0"}});Z$.displayName="DropdownMenuSeparator";const q$=({className:e="",children:t,onToggle:n,title:i,...r})=>{const s=qn(),o=me(`dropdown-menu-button ${e}`,"zen-mode-transition",{"dropdown-menu-button--mobile":s.editor.isMobile}).trim();return g("button",{"data-prevent-outside-click":!0,className:o,onClick:n,type:"button","data-testid":"dropdown-menu-button",title:i,...r,children:t})};q$.displayName="DropdownMenuTrigger";const G5e=e=>{const t=se.Children.toArray(e).find(n=>se.isValidElement(n)&&typeof n.type!="string"&&(n==null?void 0:n.type.displayName)&&n.type.displayName==="DropdownMenuTrigger");return t||null},X5e=e=>{const t=se.Children.toArray(e).find(n=>se.isValidElement(n)&&typeof n.type!="string"&&(n==null?void 0:n.type.displayName)&&n.type.displayName==="DropdownMenuContent");return t||null},rt=({children:e,open:t})=>{const n=G5e(e),i=X5e(e);return P(ge,{children:[n,t&&i]})};rt.Trigger=q$;rt.Content=K$;rt.Item=Er;rt.ItemLink=i0;rt.ItemCustom=$5e;rt.Group=Ob;rt.Separator=Z$;rt.displayName="DropdownMenu";const j5e=(e,t)=>e.filter(n=>t.includes(n.id)),Y5e=({setAppState:e,selectedItems:t,library:n,onRemoveFromLibrary:i,resetLibrary:r,onSelectItems:s,appState:o,className:a})=>{const[l]=hn(im),[c,u]=hn(K_),d=()=>{const I=t.length?k("alerts.removeItemsFromsLibrary",{count:t.length}):k("alerts.resetLibrary"),R=t.length?k("confirmDialog.removeItemsFromLib"):k("confirmDialog.resetLibrary");return g(W$,{onConfirm:()=>{t.length?i():r(),h(!1)},onCancel:()=>{h(!1)},title:R,children:g("p",{children:I})})},[f,h]=N.useState(!1),m=!!t.length,p=m?l.libraryItems.filter(I=>t.includes(I.id)):l.libraryItems,b=k(m?"buttons.remove":"buttons.resetLibrary"),[E,y]=N.useState(!1),[v,_]=N.useState(null),S=N.useCallback(()=>P($r,{onCloseRequest:()=>_(null),title:k("publishSuccessDialog.title"),className:"publish-library-success",size:"small",children:[g("p",{children:g(gr,{i18nKey:"publishSuccessDialog.content",authorName:v.authorName,link:I=>g("a",{href:v==null?void 0:v.url,target:"_blank",rel:"noopener noreferrer",children:I})})}),g(Ze,{type:"button",title:k("buttons.close"),"aria-label":k("buttons.close"),label:k("buttons.close"),onClick:()=>_(null),"data-testid":"publish-library-success-close",className:"publish-library-success-close"})]}),[_,v]),M=(I,R)=>{y(!1),_({url:I.url,authorName:I.authorName});const D=R.slice();D.forEach(L=>{t.includes(L.id)&&(L.status="published")}),n.setLibrary(D)},w=async()=>{try{await n.updateLibrary({libraryItems:O_({description:"Excalidraw library files"}),merge:!0,openLibraryMenu:!0})}catch(I){if((I==null?void 0:I.name)==="AbortError"){console.warn(I);return}e({errorMessage:k("errors.importLibraryError")})}},T=async()=>{const I=m?p:await n.getLatestLibrary();Tbe(I).catch(xP).catch(R=>{e({errorMessage:R.message})})},A=()=>P(rt,{open:c,children:[g(rt.Trigger,{onToggle:()=>u(!c),children:Vle}),P(rt.Content,{onClickOutside:()=>u(!1),onSelect:()=>u(!1),className:"library-menu",children:[!m&&g(rt.Item,{onSelect:w,icon:r_,"data-testid":"lib-dropdown--load",children:k("buttons.load")}),!!p.length&&g(rt.Item,{onSelect:T,icon:c5,"data-testid":"lib-dropdown--export",children:k("buttons.export")}),!!p.length&&g(rt.Item,{onSelect:()=>h(!0),icon:Tc,children:b}),m&&g(rt.Item,{icon:eue,onSelect:()=>y(!0),"data-testid":"lib-dropdown--remove",children:k("buttons.publishLibrary")})]})]});return P("div",{className:me("library-menu-dropdown-container",a),children:[A(),t.length>0&&g("div",{className:"library-actions-counter",children:t.length}),f&&d(),E&&g(z5e,{onClose:()=>y(!1),libraryItems:j5e(l.libraryItems,t),appState:o,onSuccess:I=>M(I,l.libraryItems),onError:I=>window.alert(I),updateItemsInStorage:()=>n.setLibrary(l.libraryItems),onRemove:I=>s(t.filter(R=>R!==I))}),v&&S()]})},rR=({selectedItems:e,onSelectItems:t,className:n})=>{const{library:i}=ao(),{clearLibraryCache:r,deleteItemsFromLibraryCache:s}=$$(),o=fi(),a=zn(),[l]=hn(im),c=async d=>{const f=d.filter(h=>!e.includes(h.id));i.setLibrary(f).catch(()=>{a({errorMessage:k("alerts.errorRemovingFromLibrary")})}),s(e),t([])};return g(Y5e,{appState:o,setAppState:a,selectedItems:e,onSelectItems:t,library:i,onRemoveFromLibrary:()=>c(l.libraryItems),resetLibrary:()=>{i.resetLibrary(),r()},className:n})};function W5e(){return[!1,N.useCallback(t=>t(),[])]}const K5e=se.useTransition||W5e,Z5e=N.memo(({id:e,elements:t,isPending:n,onClick:i,selected:r,onToggle:s,onDrag:o,svgCache:a})=>{const l=N.useRef(null),c=w5e(e,t,a);N.useEffect(()=>{const m=l.current;if(m)return c&&(m.innerHTML=c.outerHTML),()=>{m.innerHTML=""}},[c]);const[u,d]=N.useState(!1),f=qn().editor.isMobile,h=n&&g("div",{className:"library-unit__adder",children:Hle});return P("div",{className:me("library-unit",{"library-unit__active":t,"library-unit--hover":t&&u,"library-unit--selected":r,"library-unit--skeleton":!c}),onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),children:[g("div",{className:me("library-unit__dragger",{"library-unit__pulse":!!n}),ref:l,draggable:!!t,onClick:t||n?m=>{e&&m.shiftKey?s(e,m):i(e)}:void 0,onDragStart:m=>{if(!e){m.preventDefault();return}d(!1),o(e,m)}}),h,e&&t&&(u||f||r)&&g(M_,{checked:r,onChange:(m,p)=>s(e,p),className:"library-unit__checkbox"})]})}),q5e=()=>g("div",{className:"library-unit library-unit--skeleton"}),sR=({children:e})=>g("div",{className:"library-menu-items-container__grid",children:e}),u7=N.memo(({items:e,onItemSelectToggle:t,onItemDrag:n,isItemSelected:i,onClick:r,svgCache:s,itemsRenderedPerBatch:o})=>{const[,a]=K5e(),[l,c]=N.useState(0);return N.useEffect(()=>{l<e.length&&a(()=>{c(l+o)})},[l,e.length,a,o]),g(ge,{children:e.map((u,d)=>d<l?g(Z5e,{elements:u==null?void 0:u.elements,isPending:!(u!=null&&u.id)&&!!(u!=null&&u.elements),onClick:r,svgCache:s,id:u==null?void 0:u.id,selected:i(u.id),onToggle:t,onDrag:n},(u==null?void 0:u.id)??d):g(q5e,{},d))})}),Q5e=17,J5e=64;function eye({isLoading:e,libraryItems:t,onAddToLibrary:n,onInsertLibraryItems:i,pendingElements:r,theme:s,id:o,libraryReturnUrl:a,onSelectItems:l,selectedItems:c}){const u=N.useRef(null),d=k5e(u);N.useEffect(()=>{var I;d>0&&((I=u.current)==null||I.scrollTo(0,d))},[]);const{svgCache:f}=$$(),h=N.useMemo(()=>t.filter(I=>I.status!=="published"),[t]),m=N.useMemo(()=>t.filter(I=>I.status==="published"),[t]),p=!t.length&&!r.length,b=!r.length&&!h.length&&!m.length,[E,y]=N.useState(null),v=N.useCallback((I,R)=>{const D=!c.includes(I),L=[...h,...m];if(D){if(R.shiftKey&&E){const G=L.findIndex(j=>j.id===E),V=L.findIndex(j=>j.id===I);if(G===-1||V===-1){l([...c,I]);return}const H=Se(c),$=L.reduce((j,X,K)=>((K>=G&&K<=V||H.has(X.id))&&j.push(X.id),j),[]);l($)}else l([...c,I]);y(I)}else y(null),l(c.filter(G=>G!==I))},[E,l,m,c,h]),_=N.useCallback(I=>{let R;return c.includes(I)?R=t.filter(D=>c.includes(D.id)):R=t.filter(D=>D.id===I),R.map(D=>({...D,elements:Ib({type:"everything",elements:D.elements,randomizeSeed:!0}).newElements}))},[t,c]),S=N.useCallback((I,R)=>{R.dataTransfer.setData(be.excalidrawlib,i$(_(I)))},[_]),M=N.useCallback(I=>I?c.includes(I):!1,[c]),w=N.useCallback(()=>{n(r)},[r,n]),T=N.useCallback(I=>{I&&i(_(I))},[_,i]),A=f.size>=t.length?J5e:Q5e;return P("div",{className:"library-menu-items-container",style:r.length||h.length||m.length?{justifyContent:"flex-start"}:{borderBottom:0},children:[!b&&g(rR,{selectedItems:c,onSelectItems:l,className:"library-menu-dropdown-container--in-heading"}),P(ls.Col,{className:"library-menu-items-container__items",align:"start",gap:1,style:{flex:m.length>0?1:"0 1 auto",marginBottom:0},ref:u,children:[P(ge,{children:[!b&&g("div",{className:"library-menu-items-container__header",children:k("labels.personalLib")}),e&&g("div",{style:{position:"absolute",top:"var(--container-padding-y)",right:"var(--container-padding-x)",transform:"translateY(50%)"},children:g(Qa,{})}),!r.length&&!h.length?P("div",{className:"library-menu-items__no-items",children:[g("div",{className:"library-menu-items__no-items__label",children:k("library.noItems")}),g("div",{className:"library-menu-items__no-items__hint",children:m.length>0?k("library.hint_emptyPrivateLibrary"):k("library.hint_emptyLibrary")})]}):P(sR,{children:[r.length>0&&g(u7,{itemsRenderedPerBatch:A,items:[{id:null,elements:r}],onItemSelectToggle:v,onItemDrag:S,onClick:w,isItemSelected:M,svgCache:f}),g(u7,{itemsRenderedPerBatch:A,items:h,onItemSelectToggle:v,onItemDrag:S,onClick:T,isItemSelected:M,svgCache:f})]})]}),P(ge,{children:[(m.length>0||r.length>0||h.length>0)&&g("div",{className:"library-menu-items-container__header library-menu-items-container__header--excal",children:k("labels.excalidrawLib")}),m.length>0?g(sR,{children:g(u7,{itemsRenderedPerBatch:A,items:m,onItemSelectToggle:v,onItemDrag:S,onClick:T,isItemSelected:M,svgCache:f})}):h.length>0?g("div",{style:{margin:"1rem 0",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",fontSize:".9rem"},children:k("library.noItems")}):null]}),p&&g(Y$,{style:{padding:"16px 0",width:"100%"},id:o,libraryReturnUrl:a,theme:s,children:g(rR,{selectedItems:c,onSelectItems:l})})]})]})}const K_=Jt(!1),oR=({children:e})=>g("div",{className:"layer-ui__library",children:e}),tye=N.memo(({onInsertLibraryItems:e,pendingElements:t,onAddToLibrary:n,setAppState:i,libraryReturnUrl:r,library:s,id:o,theme:a,selectedItems:l,onSelectItems:c})=>{const[u]=hn(im),d=N.useCallback(m=>{(async(b,E)=>{ct("element","addToLibrary","ui");for(const v of mP)if(b.some(_=>_.type===v))return i({errorMessage:k(`errors.libraryElementTypeError.${v}`)});const y=[{status:"unpublished",elements:b,id:zr(),created:Date.now()},...E];n(),s.setLibrary(y).catch(()=>{i({errorMessage:k("alerts.errorAddingToLibrary")})})})(m,u.libraryItems)},[n,s,i,u.libraryItems]),f=N.useMemo(()=>u.libraryItems,[u]);if(u.status==="loading"&&!u.isInitialized)return g(oR,{children:g("div",{className:"layer-ui__library-message",children:P("div",{children:[g(Qa,{size:"2em"}),g("span",{children:k("labels.libraryLoadingMessage")})]})})});const h=u.libraryItems.length>0||t.length>0;return P(oR,{children:[g(eye,{isLoading:u.status==="loading",libraryItems:f,onAddToLibrary:d,onInsertLibraryItems:e,pendingElements:t,id:o,libraryReturnUrl:r,theme:a,onSelectItems:c,selectedItems:l}),h&&g(Y$,{className:"library-menu-control-buttons--at-bottom",style:{padding:"16px 12px 0 12px"},id:o,libraryReturnUrl:r,theme:a})]})}),d7=(e,t)=>({elements:e,pending:Be(e,{selectedElementIds:t},{includeBoundTextElement:!0,includeElementsInFrames:!0}),selectedElementIds:t}),nye=(e,t)=>{const n=$5(),[i,r]=N.useState(()=>d7(n,e.selectedElementIds)),s=N.useRef(new Map);return N.useEffect(()=>{for(const o of i.pending)s.current.set(o.id,o.version)},[i.pending]),N.useEffect(()=>{t.state.cursorButton==="up"&&t.state.activeTool.type==="selection"&&r(o=>{var l;if(!_i(o.selectedElementIds,e.selectedElementIds))return s.current.clear(),d7(n,e.selectedElementIds);const a=t.scene.getNonDeletedElementsMap();for(const c of Object.keys(e.selectedElementIds)){const u=(l=a.get(c))==null?void 0:l.version;if(u&&u!==s.current.get(c))return d7(n,e.selectedElementIds)}return o})},[t,t.state.cursorButton,t.state.activeTool.type,e.selectedElementIds,n]),i.pending},iye=N.memo(()=>{const e=ao(),{onInsertElements:t}=e,n=tp(),i=fi(),r=zn(),[s,o]=N.useState([]),a=N.useMemo(()=>e.library,[e.library]),l=nye(i,e),c=N.useCallback(d=>{t(j$(d))},[t]),u=N.useCallback(()=>{r({selectedElementIds:{},selectedGroupIds:{},activeEmbeddable:null})},[r]);return g(tye,{pendingElements:l,onInsertLibraryItems:c,onAddToLibrary:u,setAppState:r,libraryReturnUrl:n.libraryReturnUrl,library:a,id:e.id,theme:i.theme,selectedItems:s,onSelectItems:o})}),rye=e=>{const{closeOnClickOutside:t=!0}=e,n=YH({className:"excalidraw-modal-container"}),i=N.useRef(document.body.classList.contains("excalidraw-animations-disabled"));if(!n)return null;const r=s=>{s.key===z.ESCAPE&&(s.nativeEvent.stopImmediatePropagation(),s.stopPropagation(),e.onCloseRequest())};return ii.createPortal(P("div",{className:me("Modal",e.className,{"animations-disabled":i.current}),role:"dialog","aria-modal":"true",onKeyDown:r,"aria-labelledby":e.labelledBy,"data-prevent-outside-click":!0,children:[g("div",{className:"Modal__background",onClick:t?e.onCloseRequest:void 0}),g("div",{className:"Modal__content",style:{"--max-width":`${e.maxWidth}px`},tabIndex:0,children:e.children})]}),n)};function sye(e){if(e&&typeof e=="number")return e;switch(e){case"small":return 550;case"wide":return 1024;case"regular":default:return 800}}const $r=e=>{const[t,n]=O$(),[i]=N.useState(document.activeElement),{id:r}=Zo(),s=qn().viewport.isMobile;N.useEffect(()=>{if(!t)return;const c=iE(t);setTimeout(()=>{c.length>0&&e.autofocus!==!1&&(c[1]||c[0]).focus()});const u=d=>{if(d.key===z.TAB){const f=iE(t),{activeElement:h}=document,m=f.findIndex(p=>p===h);m===0&&d.shiftKey?(f[f.length-1].focus(),d.preventDefault()):m===f.length-1&&!d.shiftKey&&(f[0].focus(),d.preventDefault())}};return t.addEventListener("keydown",u),()=>t.removeEventListener("keydown",u)},[t,e.autofocus]);const o=zn(),a=s5(K_),l=()=>{o({openMenu:null}),a(!1),i.focus(),e.onCloseRequest()};return g(rye,{className:me("Dialog",e.className,{"Dialog--fullscreen":s}),labelledBy:"dialog-title",maxWidth:sye(e.size),onCloseRequest:l,closeOnClickOutside:e.closeOnClickOutside,children:P(js,{ref:n,children:[e.title&&g("h2",{id:`${r}-dialog-title`,className:"Dialog__title",children:g("span",{className:"Dialog__titleContent",children:e.title})}),s&&g("button",{className:"Dialog__close",onClick:l,title:k("buttons.close"),"aria-label":k("buttons.close"),type:"button",children:Ad}),g("div",{className:"Dialog__content",children:e.children})]})})},hd=({type:e="button",onSelect:t,selected:n,children:i,className:r="",...s})=>g("button",{onClick:X6(s.onClick,o=>{t()}),type:e,className:me("excalidraw-button",r,{selected:n}),...s,children:i}),Rh=N.forwardRef(({onChange:e,label:t,fullWidth:n,placeholder:i,readonly:r,selectOnRender:s,onKeyDown:o,isRedacted:a=!1,icon:l,className:c,...u},d)=>{const f=N.useRef(null);N.useImperativeHandle(d,()=>f.current),N.useLayoutEffect(()=>{var p,b;s&&((p=f.current)==null||p.focus(),(b=f.current)==null||b.select())},[s]);const[h,m]=N.useState(!1);return P("div",{className:me("ExcTextField",c,{"ExcTextField--fullWidth":n,"ExcTextField--hasIcon":!!l}),onClick:()=>{var p;(p=f.current)==null||p.focus()},children:[l,t&&g("div",{className:"ExcTextField__label",children:t}),P("div",{className:me("ExcTextField__input",{"ExcTextField__input--readonly":r}),children:[g("input",{className:me({"is-redacted":"value"in u&&u.value&&a&&!h}),readOnly:r,value:"value"in u?u.value:void 0,defaultValue:"defaultValue"in u?u.defaultValue:void 0,placeholder:i,ref:f,onChange:p=>e==null?void 0:e(p.target.value),onKeyDown:o}),a&&g(hd,{onSelect:()=>m(!h),style:{border:0,userSelect:"none"},children:h?uue:a_})]})]})}),Z_=[{icon:Yle,value:"selection",key:z.V,numericKey:z[1],fillable:!0},{icon:Wle,value:"rectangle",key:z.R,numericKey:z[2],fillable:!0},{icon:Kle,value:"diamond",key:z.D,numericKey:z[3],fillable:!0},{icon:Zle,value:"ellipse",key:z.O,numericKey:z[4],fillable:!0},{icon:qle,value:"arrow",key:z.A,numericKey:z[5],fillable:!0},{icon:Qle,value:"line",key:z.L,numericKey:z[6],fillable:!0},{icon:l5,value:"freedraw",key:[z.P,z.X],numericKey:z[7],fillable:!1},{icon:yz,value:"text",key:z.T,numericKey:z[8],fillable:!1},{icon:ece,value:"image",key:null,numericKey:z[9],fillable:!1},{icon:tce,value:"eraser",key:z.E,numericKey:z[0],fillable:!1}],oye=e=>{const t=Z_.find((n,i)=>n.numericKey!=null&&e===n.numericKey.toString()||n.key&&(typeof n.key=="string"?n.key===e:n.key.includes(e)));return(t==null?void 0:t.value)||null};var aye={};const aR=e=>{let t;const n=new Set,i=(u,d)=>{const f=typeof u=="function"?u(t):u;if(!Object.is(f,t)){const h=t;t=d??(typeof f!="object"||f===null)?f:Object.assign({},t,f),n.forEach(m=>m(t,h))}},r=()=>t,l={setState:i,getState:r,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{(aye?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=t=e(i,r,l);return l},lye=e=>e?aR(e):aR;var Q$={exports:{}},J$={},eG={exports:{}},tG={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kh=N;function cye(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var uye=typeof Object.is=="function"?Object.is:cye,dye=kh.useState,fye=kh.useEffect,hye=kh.useLayoutEffect,gye=kh.useDebugValue;function mye(e,t){var n=t(),i=dye({inst:{value:n,getSnapshot:t}}),r=i[0].inst,s=i[1];return hye(function(){r.value=n,r.getSnapshot=t,f7(r)&&s({inst:r})},[e,n,t]),fye(function(){return f7(r)&&s({inst:r}),e(function(){f7(r)&&s({inst:r})})},[e]),gye(n),n}function f7(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!uye(e,n)}catch{return!0}}function pye(e,t){return t()}var Uye=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?pye:mye;tG.useSyncExternalStore=kh.useSyncExternalStore!==void 0?kh.useSyncExternalStore:Uye;eG.exports=tG;var bye=eG.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B5=N,yye=bye;function Eye(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var vye=typeof Object.is=="function"?Object.is:Eye,_ye=yye.useSyncExternalStore,wye=B5.useRef,Tye=B5.useEffect,Sye=B5.useMemo,Iye=B5.useDebugValue;J$.useSyncExternalStoreWithSelector=function(e,t,n,i,r){var s=wye(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=Sye(function(){function l(h){if(!c){if(c=!0,u=h,h=i(h),r!==void 0&&o.hasValue){var m=o.value;if(r(m,h))return d=m}return d=h}if(m=d,vye(u,h))return m;var p=i(h);return r!==void 0&&r(m,p)?(u=h,m):(u=h,d=p)}var c=!1,u,d,f=n===void 0?null:n;return[function(){return l(t())},f===null?void 0:function(){return l(f())}]},[t,n,i,r]);var a=_ye(e,s[0],s[1]);return Tye(function(){o.hasValue=!0,o.value=a},[a]),Iye(a),a};Q$.exports=J$;var xye=Q$.exports;const Cye=al(xye);var nG={};const{useDebugValue:Aye}=se,{useSyncExternalStoreWithSelector:Mye}=Cye;let lR=!1;const Rye=e=>e;function kye(e,t=Rye,n){(nG?"production":void 0)!=="production"&&n&&!lR&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),lR=!0);const i=Mye(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Aye(i),i}const cR=e=>{(nG?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?lye(e):e,n=(i,r)=>kye(t,i,r);return Object.assign(n,t),n},Lye=e=>e?cR(e):cR;var uR,dR;const fR=typeof window<"u"&&((uR=window.document)!=null&&uR.createElement||((dR=window.navigator)==null?void 0:dR.product)==="ReactNative")?se.useLayoutEffect:se.useEffect;function mo(){const e=Lye(t=>({current:new Array,version:0,set:t}));return{In:({children:t})=>{const n=e(r=>r.set),i=e(r=>r.version);return fR(()=>{n(r=>({version:r.version+1}))},[]),fR(()=>(n(({current:r})=>({current:[...r,t]})),()=>n(({current:r})=>({current:r.filter(s=>s!==t)}))),[t,i]),null},Out:()=>{const t=e(n=>n.current);return se.createElement(se.Fragment,null,t)}}}const iG=se.createContext(null),rr=()=>se.useContext(iG),Dye=wB(),Nye=()=>se.useMemo(()=>({MainMenuTunnel:mo(),WelcomeScreenMenuHintTunnel:mo(),WelcomeScreenToolbarHintTunnel:mo(),WelcomeScreenHelpHintTunnel:mo(),WelcomeScreenCenterTunnel:mo(),FooterCenterTunnel:mo(),DefaultSidebarTriggerTunnel:mo(),DefaultSidebarTabTriggersTunnel:mo(),OverwriteConfirmDialogTunnel:mo(),TTDDialogTriggerTunnel:mo(),tunnelsJotai:Dye}),[]),rG=(e,t)=>{var i;let n=((i=t[0])==null?void 0:i.type)||null;for(const r of t)if(r.type!==n){n=null;break}return UE(e.activeTool.type)&&e.activeTool.type!=="image"&&n!=="image"&&n!=="frame"&&n!=="magicframe"||t.some(r=>UE(r.type))},sG=(e,t)=>Th(e.activeTool.type)||t.some(n=>Th(n.type)),oG=({appState:e,elementsMap:t,renderAction:n,app:i})=>{const r=TF(t,e);let s=!1;r.length===2&&(ys(r[0])||ys(r[1]))&&(s=!0);const o=!!(e.editingTextElement||e.newElement),a=qn(),l=document.documentElement.getAttribute("dir")==="rtl",c=Th(e.activeTool.type)&&!Fs(e.currentItemBackgroundColor)||r.some(m=>Th(m.type)&&!Fs(m.backgroundColor)),u=r.length===1||s,d=!e.editingLinearElement&&r.length===1&&ke(r[0])&&!fe(r[0]),f=!e.croppingElementId&&r.length===1&&it(r[0]),h=!s&&Vr(e,i);return P("div",{className:"panelColumn",children:[g("div",{children:rG(e,r)&&n("changeStrokeColor")}),sG(e,r)&&g("div",{children:n("changeBackgroundColor")}),c&&n("changeFillStyle"),(lC(e.activeTool.type)||r.some(m=>lC(m.type)))&&n("changeStrokeWidth"),(e.activeTool.type==="freedraw"||r.some(m=>m.type==="freedraw"))&&n("changeStrokeShape"),(cC(e.activeTool.type)||r.some(m=>cC(m.type)))&&P(ge,{children:[n("changeStrokeStyle"),n("changeSloppiness")]}),(bE(e.activeTool.type)||r.some(m=>bE(m.type)))&&g(ge,{children:n("changeRoundness")}),(uC(e.activeTool.type)||r.some(m=>uC(m.type)))&&g(ge,{children:n("changeArrowType")}),(e.activeTool.type==="text"||r.some(ue))&&P(ge,{children:[n("changeFontFamily"),n("changeFontSize"),(e.activeTool.type==="text"||yse(r,t))&&n("changeTextAlign")]}),bse(r,t)&&n("changeVerticalAlign"),(Tb(e.activeTool.type)||r.some(m=>Tb(m.type)))&&g(ge,{children:n("changeArrowhead")}),n("changeOpacity"),P("fieldset",{children:[g("legend",{children:k("labels.layers")}),P("div",{className:"buttonList",children:[n("sendToBack"),n("sendBackward"),n("bringForward"),n("bringToFront")]})]}),h&&!s&&P("fieldset",{children:[g("legend",{children:k("labels.align")}),P("div",{className:"buttonList",children:[l?P(ge,{children:[n("alignRight"),n("alignHorizontallyCentered"),n("alignLeft")]}):P(ge,{children:[n("alignLeft"),n("alignHorizontallyCentered"),n("alignRight")]}),r.length>2&&n("distributeHorizontally"),g("div",{style:{flexBasis:"100%",height:0}}),P("div",{style:{display:"flex",flexWrap:"wrap",gap:".5rem",marginTop:"-0.5rem"},children:[n("alignTop"),n("alignVerticallyCentered"),n("alignBottom"),r.length>2&&n("distributeVertically")]})]})]}),!o&&r.length>0&&P("fieldset",{children:[g("legend",{children:k("labels.actions")}),P("div",{className:"buttonList",children:[!a.editor.isMobile&&n("duplicateSelection"),!a.editor.isMobile&&n("deleteSelectedElements"),n("group"),n("ungroup"),u&&n("hyperlink"),f&&n("cropEditor"),d&&n("toggleLinearEditor")]})]})]})},aG=({activeTool:e,appState:t,app:n,UIOptions:i})=>{const[r,s]=N.useState(!1),o=e.type==="frame",a=e.type==="laser",l=e.type==="embeddable",{TTDDialogTriggerTunnel:c}=rr();return P(ge,{children:[Z_.map(({value:u,icon:d,key:f,numericKey:h,fillable:m},p)=>{var v;if(((v=i.tools)==null?void 0:v[u])===!1)return null;const b=k(`toolBar.${u}`),E=f&&G1(typeof f=="string"?f:f[0]),y=E?`${E} ${k("helpDialog.or")} ${h}`:`${h}`;return g(Ze,{className:me("Shape",{fillable:m}),type:"radio",icon:d,checked:e.type===u,name:"editor-current-shape",title:`${G1(b)} — ${y}`,keyBindingLabel:h||E,"aria-label":G1(b),"aria-keyshortcuts":y,"data-testid":`toolbar-${u}`,onPointerDown:({pointerType:_})=>{!t.penDetected&&_==="pen"&&n.togglePenMode(!0)},onChange:({pointerType:_})=>{t.activeTool.type!==u&&ct("toolbar",u,"ui"),u==="image"?n.setActiveTool({type:u,insertOnCanvasDirectly:_!=="mouse"}):n.setActiveTool({type:u})}},u)}),g("div",{className:"App-toolbar__divider"}),P(rt,{open:r,children:[g(rt.Trigger,{className:me("App-toolbar__extra-tools-trigger",{"App-toolbar__extra-tools-trigger--selected":o||l||a&&!n.props.isCollaborating}),onToggle:()=>s(!r),title:k("toolBar.extraTools"),children:lue}),P(rt.Content,{onClickOutside:()=>s(!1),onSelect:()=>s(!1),className:"App-toolbar__extra-tools-dropdown",children:[g(rt.Item,{onSelect:()=>n.setActiveTool({type:"frame"}),icon:Mz,shortcut:z.F.toLocaleUpperCase(),"data-testid":"toolbar-frame",selected:o,children:k("toolBar.frame")}),g(rt.Item,{onSelect:()=>n.setActiveTool({type:"embeddable"}),icon:ice,"data-testid":"toolbar-embeddable",selected:l,children:k("toolBar.embeddable")}),g(rt.Item,{onSelect:()=>n.setActiveTool({type:"laser"}),icon:kz,"data-testid":"toolbar-laser",selected:a,shortcut:z.K.toLocaleUpperCase(),children:k("toolBar.laser")}),g("div",{style:{margin:"6px 0",fontSize:14,fontWeight:600},children:"Generate"}),n.props.aiEnabled!==!1&&g(c.Out,{}),g(rt.Item,{onSelect:()=>n.setOpenDialog({name:"ttd",tab:"mermaid"}),icon:Rz,"data-testid":"toolbar-embeddable",children:k("toolBar.mermaidToExcalidraw")}),n.props.aiEnabled!==!1&&n.plugins.diagramToCode&&g(ge,{children:P(rt.Item,{onSelect:()=>n.onMagicframeToolSelect(),icon:Lz,"data-testid":"toolbar-magicframe",children:[k("toolBar.magicframe"),g(rt.Item.Badge,{children:"AI"})]})})]})]})]})},Oye=({renderAction:e,zoom:t})=>g(ls.Col,{gap:1,className:gh.ZOOM_ACTIONS,children:P(ls.Row,{align:"center",children:[e("zoomOut"),e("resetZoom"),e("zoomIn")]})}),Pye=({renderAction:e,className:t})=>P("div",{className:`undo-redo-buttons ${t}`,children:[g("div",{className:"undo-button-container",children:g(nl,{label:k("buttons.undo"),children:e("undo")})}),g("div",{className:"redo-button-container",children:P(nl,{label:k("buttons.redo"),children:[" ",e("redo")]})})]}),Fye=({actionManager:e,showExitZenModeBtn:t})=>g("button",{type:"button",className:me("disable-zen-mode",{"disable-zen-mode--visible":t}),onClick:()=>e.executeAction(r4),children:k("buttons.exitZenMode")}),Bye=({renderAction:e,className:t})=>g("div",{className:`finalize-button ${t}`,children:e("finalize",{size:"small"})}),hR=e=>{const t=N.useRef({userFn:e});return t.current.userFn=e,t.current.stableFn||(t.current.stableFn=(...n)=>t.current.userFn(...n)),t.current.stableFn},z5=Jt(null),zye=()=>{const[e,t]=hn(z5),n=vr();return e&&e==="clearCanvas"?g(W$,{onConfirm:()=>{n.executeAction(q1),t(null)},onCancel:()=>t(null),title:k("clearCanvasDialog.title"),children:P("p",{className:"clear-canvas__content",children:[" ",k("alerts.clearReset")]})}):null},Hye={...Pb,category:"App",label:"Toggle theme",perform:({actionManager:e})=>{e.executeAction(Pb,"commandPalette")}},Vye=Object.freeze(Object.defineProperty({__proto__:null,toggleTheme:Hye},Symbol.toStringTag,{value:"Module"})),$ye=Jt(null),gt={app:"App",export:"Export",tools:"Tools",editor:"Editor",elements:"Elements",links:"Links"},Gye=e=>{switch(e){case gt.app:return 1;case gt.export:return 2;case gt.editor:return 3;case gt.tools:return 4;case gt.elements:return 5;case gt.links:return 6;default:return 10}},g2=({shortcut:e,className:t,children:n})=>{const i=e.replace("++","+$").split("+");return P("div",{className:me("shortcut",t),children:[i.map((r,s)=>g("div",{className:"shortcut-wrapper",children:g("div",{className:"shortcut-key",children:r==="$"?"+":r})},r)),g("div",{className:"shortcut-desc",children:n})]})},lG=e=>!e.altKey&&e[z.CTRL_OR_CMD]&&(e.shiftKey&&e.key.toLowerCase()===z.P||e.key===z.SLASH),gR=Object.assign(e=>{var i;const t=fi(),n=zn();return N.useEffect(()=>{const r=s=>{lG(s)&&(s.preventDefault(),s.stopPropagation(),n(o=>{var l;const a=((l=o.openDialog)==null?void 0:l.name)==="commandPalette"?null:{name:"commandPalette"};return a&&ct("command_palette","open","shortcut"),{openDialog:a}}))};return window.addEventListener(te.KEYDOWN,r,{capture:!0}),()=>window.removeEventListener(te.KEYDOWN,r,{capture:!0})},[n]),((i=t.openDialog)==null?void 0:i.name)!=="commandPalette"?null:g(Xye,{...e})},{defaultItems:Vye});function Xye({customCommandPaletteItems:e}){const t=ao(),n=fi(),i=zn(),r=tp(),s=vr(),[o,a]=hn($ye),[l,c]=N.useState(null),u=N.useRef(null),d=b5({uiAppState:n,customCommandPaletteItems:e,appProps:r});N.useEffect(()=>{const{uiAppState:M,customCommandPaletteItems:w,appProps:T}=d,A=L=>{let G="";return L.label&&(typeof L.label=="function"?G=k(L.label(t.scene.getNonDeletedElements(),M,t)):G=k(L.label)),G},I=L=>typeof L.icon=="function"?L.icon(M,t.scene.getNonDeletedElements()):L.icon;let R=[];const D=(L,G,V)=>{const H={label:A(L),icon:I(L),category:G,shortcut:zi(L.name),keywords:L.keywords,predicate:L.predicate,viewMode:L.viewMode,perform:()=>{s.executeAction(L,"commandPalette")}};return V?V(H,L):H};if(M&&t.scene&&s){const L=[s.actions.group,s.actions.ungroup,s.actions.cut,s.actions.copy,s.actions.deleteSelectedElements,s.actions.wrapSelectionInFrame,s.actions.copyStyles,s.actions.pasteStyles,s.actions.bringToFront,s.actions.bringForward,s.actions.sendBackward,s.actions.sendToBack,s.actions.alignTop,s.actions.alignBottom,s.actions.alignLeft,s.actions.alignRight,s.actions.alignVerticallyCentered,s.actions.alignHorizontallyCentered,s.actions.duplicateSelection,s.actions.flipHorizontal,s.actions.flipVertical,s.actions.zoomToFitSelection,s.actions.zoomToFitSelectionInViewport,s.actions.increaseFontSize,s.actions.decreaseFontSize,s.actions.toggleLinearEditor,s.actions.cropEditor,L$,N$,W6e].map(X=>D(X,gt.elements,(K,le)=>({...K,predicate:le.predicate?le.predicate:(we,he,Ve,Ye)=>Be(we,he).length>0}))),G=[s.actions.toggleHandTool,s.actions.setFrameAsActiveTool].map(X=>D(X,gt.tools)),V=[s.actions.undo,s.actions.redo,s.actions.zoomIn,s.actions.zoomOut,s.actions.resetZoom,s.actions.zoomToFit,s.actions.zenMode,s.actions.viewMode,s.actions.gridMode,s.actions.objectsSnapMode,s.actions.toggleShortcuts,s.actions.selectAll,s.actions.toggleElementLock,s.actions.unlockAllElements,s.actions.stats].map(X=>D(X,gt.editor)),H=[s.actions.saveToActiveFile,s.actions.saveFileToDisk,s.actions.copyAsPng,s.actions.copyAsSvg].map(X=>D(X,gt.export));R=[...L,...V,{label:A(q1),icon:I(q1),shortcut:zi(q1.name),category:gt.editor,keywords:["delete","destroy"],viewMode:!1,perform:()=>{zs.set(z5,"clearCanvas")}},{label:k("buttons.exportImage"),category:gt.export,icon:wz,shortcut:zi("imageExport"),keywords:["export","image","png","jpeg","svg","clipboard","picture"],perform:()=>{i({openDialog:{name:"imageExport"}})}},...H];const $=[{label:k("toolBar.library"),category:gt.app,icon:e_,viewMode:!1,perform:()=>{M.openSidebar?i({openSidebar:null}):i({openSidebar:{name:fs.name,tab:fs.defaultTab}})}},{label:k("search.title"),category:gt.app,icon:rd,viewMode:!0,perform:()=>{s.executeAction(cG)}},{label:k("labels.changeStroke"),keywords:["color","outline"],category:gt.elements,icon:R8,viewMode:!1,predicate:(X,K)=>{const le=Be(X,K);return le.length>0&&rG(K,le)},perform:()=>{i(X=>({openMenu:X.openMenu==="shape"?null:"shape",openPopup:"elementStroke"}))}},{label:k("labels.changeBackground"),keywords:["color","fill"],icon:R8,category:gt.elements,viewMode:!1,predicate:(X,K)=>{const le=Be(X,K);return le.length>0&&sG(K,le)},perform:()=>{i(X=>({openMenu:X.openMenu==="shape"?null:"shape",openPopup:"elementBackground"}))}},{label:k("labels.canvasBackground"),keywords:["color"],icon:R8,category:gt.editor,viewMode:!1,perform:()=>{i(X=>({openMenu:X.openMenu==="canvas"?null:"canvas",openPopup:"canvasBackground"}))}},...Z_.reduce((X,K)=>{var zt;const{value:le,icon:we,key:he,numericKey:Ve}=K;if(((zt=T.UIOptions.tools)==null?void 0:zt[le])===!1)return X;const wt=he&&G1(typeof he=="string"?he:he[0])||Ve,st={label:k(`toolBar.${le}`),category:gt.tools,shortcut:wt,icon:we,keywords:["toolbar"],viewMode:!1,perform:({event:en})=>{le==="image"?t.setActiveTool({type:le,insertOnCanvasDirectly:en.type===te.KEYDOWN}):t.setActiveTool({type:le})}};return X.push(st),X},[]),...G,{label:k("toolBar.lock"),category:gt.tools,icon:M.activeTool.locked?t_:a5,shortcut:z.Q.toLocaleUpperCase(),viewMode:!1,perform:()=>{t.toggleLock()}},{label:`${k("labels.textToDiagram")}...`,category:gt.tools,icon:fue,viewMode:!1,predicate:T.aiEnabled,perform:()=>{i(X=>({...X,openDialog:{name:"ttd",tab:"text-to-diagram"}}))}},{label:`${k("toolBar.mermaidToExcalidraw")}...`,category:gt.tools,icon:Rz,viewMode:!1,predicate:T.aiEnabled,perform:()=>{i(X=>({...X,openDialog:{name:"ttd",tab:"mermaid"}}))}}],j=[...R,...$,...w||[]].map(X=>{var K;return{...X,icon:X.icon||Dz,order:X.order??Gye(X.category),haystack:`${tR(X.label.toLocaleLowerCase())} ${((K=X.keywords)==null?void 0:K.join(" "))||""}`}});c(j),a(j.find(X=>X.label===(o==null?void 0:o.label))??null)}},[d,t,s,c,o==null?void 0:o.label,a,i]);const[f,h]=N.useState(""),[m,p]=N.useState(null),[b,E]=N.useState({}),y=M=>{i({openDialog:null},M),h("")},v=(M,w)=>{var T;((T=n.openDialog)==null?void 0:T.name)==="commandPalette"&&(w.stopPropagation(),w.preventDefault(),document.body.classList.add("excalidraw-animations-disabled"),y(()=>{M.perform({actionManager:s,event:w}),a(M),requestAnimationFrame(()=>{document.body.classList.remove("excalidraw-animations-disabled")})}))},_=hR(M=>M.viewMode===!1&&n.viewModeEnabled?!1:typeof M.predicate=="function"?M.predicate(t.scene.getNonDeletedElements(),n,r,t):M.predicate===void 0||M.predicate),S=hR(M=>{var I;const w=au(M.target)||lG(M)||M.key===z.ESCAPE;if(w&&M.key!==z.ARROW_UP&&M.key!==z.ARROW_DOWN&&M.key!==z.ENTER)return;const T=Object.values(b).flat(),A=o&&!f&&_(o);if(M.key===z.ARROW_UP){M.preventDefault();const R=T.findIndex(G=>G.label===(m==null?void 0:m.label));if(A){if(R===0){p(o);return}if(m===o){const G=T[T.length-1];G&&p(G);return}}let D;R===-1?D=T.length-1:D=R===0?T.length-1:(R-1)%T.length;const L=T[D];L&&p(L);return}if(M.key===z.ARROW_DOWN){M.preventDefault();const R=T.findIndex(G=>G.label===(m==null?void 0:m.label));if(A){if(!m||R===T.length-1){p(o);return}if(m===o){const G=T[0];G&&p(G);return}}const D=(R+1)%T.length,L=T[D];L&&p(L);return}if(M.key===z.ENTER&&m&&setTimeout(()=>{v(m,M)}),!w){if(M.stopPropagation(),/^[a-zA-Z0-9]$/.test(M.key)){(I=u==null?void 0:u.current)==null||I.focus();return}M.preventDefault()}});return N.useEffect(()=>(window.addEventListener(te.KEYDOWN,S,{capture:!0}),()=>window.removeEventListener(te.KEYDOWN,S,{capture:!0})),[S]),N.useEffect(()=>{if(!l)return;const M=I=>{const R={};for(const D of I)R[D.category]?R[D.category].push(D):R[D.category]=[D];return R};let w=l.filter(_).sort((I,R)=>I.order-R.order);const T=!f&&o&&_(o);if(!f){E(M(T?w.filter(I=>I.label!==(o==null?void 0:o.label)):w)),p(T?o:w[0]||null);return}const A=tR(f.toLocaleLowerCase().replace(/[<>_| -]/g,""));w=Y6e.filter(A,w,{extract:I=>I.haystack}).sort((I,R)=>R.score-I.score).map(I=>I.original),E(M(w)),p(w[0]??null)},[f,l,_,o]),P($r,{onCloseRequest:()=>y(),closeOnClickOutside:!0,title:!1,size:720,autofocus:!0,className:"command-palette-dialog",children:[g(Rh,{value:f,placeholder:k("commandPalette.search.placeholder"),onChange:M=>{h(M)},selectOnRender:!0,ref:u}),!t.device.viewport.isMobile&&P("div",{className:"shortcuts-wrapper",children:[g(g2,{shortcut:"↑↓",children:k("commandPalette.shortcuts.select")}),g(g2,{shortcut:"↵",children:k("commandPalette.shortcuts.confirm")}),g(g2,{shortcut:Q("Esc"),children:k("commandPalette.shortcuts.close")})]}),P("div",{className:"commands",children:[o&&!f&&P("div",{className:"command-category",children:[P("div",{className:"command-category-title",children:[k("commandPalette.recents"),g("div",{className:"icon",style:{marginLeft:"6px"},children:hue})]}),g(mR,{command:o,isSelected:o.label===(m==null?void 0:m.label),onClick:M=>v(o,M),disabled:!_(o),onMouseMove:()=>p(o),showShortcut:!t.device.viewport.isMobile,appState:n})]}),Object.keys(b).length>0?Object.keys(b).map((M,w)=>P("div",{className:"command-category",children:[g("div",{className:"command-category-title",children:M}),b[M].map(T=>g(mR,{command:T,isSelected:T.label===(m==null?void 0:m.label),onClick:A=>v(T,A),onMouseMove:()=>p(T),showShortcut:!t.device.viewport.isMobile,appState:n},T.label))]},M)):l?P("div",{className:"no-match",children:[g("div",{className:"icon",children:rd})," ",k("commandPalette.search.noMatch")]}):null]})]})}const mR=({command:e,isSelected:t,disabled:n,onMouseMove:i,onClick:r,showShortcut:s,appState:o})=>{const a=()=>{};return P("div",{className:me("command-item",{"item-selected":t,"item-disabled":n}),ref:l=>{var c;t&&!n&&((c=l==null?void 0:l.scrollIntoView)==null||c.call(l,{block:"nearest"}))},onClick:n?a:r,onMouseMove:n?a:i,title:n?k("commandPalette.itemNotAvailable"):"",children:[P("div",{className:"name",children:[e.icon&&g(v5,{icon:typeof e.icon=="function"?e.icon(o):e.icon}),e.label]}),s&&e.shortcut&&g(g2,{shortcut:e.shortcut})]})},jye=oe({name:"toggleLinearEditor",category:gt.elements,label:(e,t,n)=>{const i=n.scene.getSelectedElements({selectedElementIds:t.selectedElementIds})[0];return(i==null?void 0:i.type)==="arrow"?"labels.lineEditor.editArrow":"labels.lineEditor.edit"},keywords:["line"],trackEvent:{category:"element"},predicate:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t);return!!(!t.editingLinearElement&&r.length===1&&ke(r[0])&&!fe(r[0]))},perform(e,t,n,i){var o;const r=i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0})[0],s=((o=t.editingLinearElement)==null?void 0:o.elementId)===r.id?null:new ce(r);return{appState:{...t,editingLinearElement:s},captureUpdate:Z.IMMEDIATELY}},PanelComponent:({appState:e,updateData:t,app:n})=>{const i=n.scene.getSelectedElements({selectedElementIds:e.selectedElementIds})[0],r=k(i.type==="arrow"?"labels.lineEditor.editArrow":"labels.lineEditor.edit");return g(Ze,{type:"button",icon:Iue,title:r,"aria-label":r,onClick:()=>t(null)})}}),cG=oe({name:"searchMenu",icon:rd,keywords:["search","find"],label:"search.title",viewMode:!0,trackEvent:{category:"search_menu",action:"toggle",predicate:e=>e.gridModeEnabled},perform(e,t,n,i){var r,s;if(((r=t.openSidebar)==null?void 0:r.name)===fs.name&&t.openSidebar.tab===ku){const o=(s=i.excalidrawContainerValue.container)==null?void 0:s.querySelector(`.${gh.SEARCH_MENU_INPUT_WRAPPER} input`);return o!=null&&o.matches(":focus")?{appState:{...t,openSidebar:null},captureUpdate:Z.EVENTUALLY}:(o==null||o.focus(),o==null||o.select(),!1)}return{appState:{...t,openSidebar:{name:fs.name,tab:ku},openDialog:null},captureUpdate:Z.EVENTUALLY}},checked:e=>e.gridModeEnabled,predicate:(e,t,n)=>n.gridModeEnabled===void 0,keyTest:e=>e[z.CTRL_OR_CMD]&&e.key===z.F}),Yye=oe({name:"cropEditor",label:"helpDialog.cropStart",icon:dA,viewMode:!0,trackEvent:{category:"menu"},keywords:["image","crop"],perform(e,t,n,i){const r=i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0})[0];return{appState:{...t,isCropping:!1,croppingElementId:r.id},captureUpdate:Z.IMMEDIATELY}},predicate:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t);return!!(!t.croppingElementId&&r.length===1&&it(r[0]))},PanelComponent:({appState:e,updateData:t,app:n})=>{const i=k("helpDialog.cropStart");return g(Ze,{type:"button",icon:dA,title:i,"aria-label":i,onClick:()=>t(null)})}}),uG=(e,t)=>{const n=t.scene.getSelectedElements(e);return n.length===1&&Ie(n[0])},Wye=oe({name:"selectAllElementsInFrame",label:"labels.selectAllElementsInFrame",trackEvent:{category:"canvas"},perform:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t).at(0)||null;if(Ie(r)){const s=Ho(Nt(e),r.id).filter(o=>!(o.type==="text"&&o.containerId));return{elements:e,appState:{...t,selectedElementIds:s.reduce((o,a)=>(o[a.id]=!0,o),{})},captureUpdate:Z.IMMEDIATELY}}return{elements:e,appState:t,captureUpdate:Z.EVENTUALLY}},predicate:(e,t,n,i)=>uG(t,i)}),Kye=oe({name:"removeAllElementsFromFrame",label:"labels.removeAllElementsFromFrame",trackEvent:{category:"history"},perform:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t).at(0)||null;return Ie(r)?{elements:yF(e,r),appState:{...t,selectedElementIds:{[r.id]:!0}},captureUpdate:Z.IMMEDIATELY}:{elements:e,appState:t,captureUpdate:Z.EVENTUALLY}},predicate:(e,t,n,i)=>uG(t,i)});oe({name:"updateFrameRendering",label:"labels.updateFrameRendering",viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t)=>({elements:e,appState:{...t,frameRendering:{...t.frameRendering,enabled:!t.frameRendering.enabled}},captureUpdate:Z.EVENTUALLY}),checked:e=>e.frameRendering.enabled});oe({name:"setFrameAsActiveTool",label:"toolBar.frame",trackEvent:{category:"toolbar"},icon:Mz,viewMode:!1,perform:(e,t,n,i)=>{const r=Tn(t,{type:"frame"});return po(i.interactiveCanvas,{...t,activeTool:r}),{elements:e,appState:{...t,activeTool:Tn(t,{type:"frame"})},captureUpdate:Z.EVENTUALLY}},keyTest:e=>!e[z.CTRL_OR_CMD]&&!e.shiftKey&&!e.altKey&&e.key.toLocaleLowerCase()===z.F});const Zye=oe({name:"wrapSelectionInFrame",label:"labels.wrapSelectionInFrame",trackEvent:{category:"element"},predicate:(e,t,n,i)=>{const r=Be(e,t);return r.length>0&&!r.some(s=>Ie(s))},perform:(e,t,n,i)=>{const r=Be(e,t),[s,o,a,l]=_t(r,i.scene.getNonDeletedElementsMap()),c=16,u=X9({x:s-c,y:o-c,width:a-s+c*2,height:l-o+c*2});if(t.editingGroupId){const f=Gt(r,t.editingGroupId);for(const h of f){const m=h.groupIds.indexOf(t.editingGroupId);ee(h,{groupIds:h.groupIds.slice(0,m)},!1)}}return{elements:j1([...i.scene.getElementsIncludingDeleted(),u],r,u,t),appState:{selectedElementIds:{[u.id]:!0}},captureUpdate:Z.IMMEDIATELY}}});class Yb{constructor(t=!0,n=!0){this.isUndoStackEmpty=t,this.isRedoStackEmpty=n}}class _u{constructor(){F(this,"onHistoryChangedEmitter",new vo);F(this,"undoStack",[]);F(this,"redoStack",[])}get isUndoStackEmpty(){return this.undoStack.length===0}get isRedoStackEmpty(){return this.redoStack.length===0}clear(){this.undoStack.length=0,this.redoStack.length=0}record(t,n){const i=r0.create(n,t);i.isEmpty()||(this.undoStack.push(i.inverse()),i.elementsChange.isEmpty()||(this.redoStack.length=0),this.onHistoryChangedEmitter.trigger(new Yb(this.isUndoStackEmpty,this.isRedoStackEmpty)))}undo(t,n,i){return this.perform(t,n,i,()=>_u.pop(this.undoStack),r=>_u.push(this.redoStack,r,t))}redo(t,n,i){return this.perform(t,n,i,()=>_u.pop(this.redoStack),r=>_u.push(this.undoStack,r,t))}perform(t,n,i,r,s){try{let o=r();if(o===null)return;let a=t,l=n,c=!1;for(;o;){try{[a,l,c]=o.applyTo(a,l,i)}finally{s(o)}if(c)break;o=r()}return[a,l]}finally{this.onHistoryChangedEmitter.trigger(new Yb(this.isUndoStackEmpty,this.isRedoStackEmpty))}}static pop(t){if(!t.length)return null;const n=t.pop();return n!==void 0?n:null}static push(t,n,i){const r=n.inverse().applyLatestChanges(i);return t.push(r)}}class r0{constructor(t,n){this.appStateChange=t,this.elementsChange=n}static create(t,n){return new r0(t,n)}inverse(){return new r0(this.appStateChange.inverse(),this.elementsChange.inverse())}applyTo(t,n,i){const[r,s]=this.elementsChange.applyTo(t,i.elements),[o,a]=this.appStateChange.applyTo(n,r);return[r,o,s||a]}applyLatestChanges(t){const n=this.elementsChange.applyLatestChanges(t);return r0.create(this.appStateChange,n)}isEmpty(){return this.appStateChange.isEmpty()&&this.elementsChange.isEmpty()}}const dG=(e,t)=>{const[n,i]=N.useState(t);return N.useEffect(()=>{const r=e.on(s=>{i(s)});return()=>{r()}},[e]),n},fG=(e,t,n)=>{if(!t.multiElement&&!t.resizingElement&&!t.editingTextElement&&!t.newElement&&!t.selectedElementsAreBeingDragged&&!t.selectionElement&&!e.flowChartCreator.isCreatingChart){const i=n();if(!i)return{captureUpdate:Z.EVENTUALLY};const[r,s]=i,o=Array.from(r.values());return{appState:s,elements:o,captureUpdate:Z.NEVER}}return{captureUpdate:Z.EVENTUALLY}},qye=(e,t)=>({name:"undo",label:"buttons.undo",icon:ZC,trackEvent:{category:"history"},viewMode:!1,perform:(n,i,r,s)=>fG(s,i,()=>e.undo(Se(n),i,t.snapshot)),keyTest:n=>n[z.CTRL_OR_CMD]&&Q3(n,z.Z)&&!n.shiftKey,PanelComponent:({updateData:n,data:i})=>{const{isUndoStackEmpty:r}=dG(e.onHistoryChangedEmitter,new Yb(e.isUndoStackEmpty,e.isRedoStackEmpty));return g(Ze,{type:"button",icon:ZC,"aria-label":k("buttons.undo"),onClick:n,size:(i==null?void 0:i.size)||"medium",disabled:r,"data-testid":"button-undo"})}}),Qye=(e,t)=>({name:"redo",label:"buttons.redo",icon:qC,trackEvent:{category:"history"},viewMode:!1,perform:(n,i,r,s)=>fG(s,i,()=>e.redo(Se(n),i,t.snapshot)),keyTest:n=>n[z.CTRL_OR_CMD]&&n.shiftKey&&Q3(n,z.Z)||aP&&n.ctrlKey&&!n.shiftKey&&Q3(n,z.Y),PanelComponent:({updateData:n,data:i})=>{const{isRedoStackEmpty:r}=dG(e.onHistoryChangedEmitter,new Yb(e.isUndoStackEmpty,e.isRedoStackEmpty));return g(Ze,{type:"button",icon:qC,"aria-label":k("buttons.redo"),onClick:n,size:(i==null?void 0:i.size)||"medium",disabled:r,"data-testid":"button-redo"})}}),Jye=oe({name:"autoResize",label:"labels.autoResize",icon:null,trackEvent:{category:"element"},predicate:(e,t,n,i)=>{const r=Be(e,t);return r.length===1&&ue(r[0])&&!r[0].autoResize},perform:(e,t,n,i)=>{const r=Be(e,t);return{appState:t,elements:e.map(s=>{if(s.id===r[0].id&&ue(s)){const o=Hi(s.originalText,Ct(s),s.lineHeight);return Ce(s,{autoResize:!0,width:o.width,height:o.height,text:s.originalText})}return s}),captureUpdate:Z.IMMEDIATELY}}}),pR=oe({name:"viewMode",label:"labels.viewMode",paletteName:"Toggle view mode",icon:a_,viewMode:!0,trackEvent:{category:"canvas",predicate:e=>!e.viewModeEnabled},perform(e,t){return{appState:{...t,viewModeEnabled:!this.checked(t)},captureUpdate:Z.EVENTUALLY}},checked:e=>e.viewModeEnabled,predicate:(e,t,n)=>typeof n.viewModeEnabled>"u",keyTest:e=>!e[z.CTRL_OR_CMD]&&e.altKey&&e.code===Je.R}),h7=(e,t,n,i,r,s)=>{if(e.trackEvent)try{typeof e.trackEvent=="object"&&(!e.trackEvent.predicate||e.trackEvent.predicate(n,i,s))&&ct(e.trackEvent.category,e.trackEvent.action||e.name,`${t} (${r.device.editor.isMobile?"mobile":"desktop"})`)}catch(o){console.error("error while logging action:",o)}};class e8e{constructor(t,n,i,r){F(this,"actions",{});F(this,"updater");F(this,"getAppState");F(this,"getElementsIncludingDeleted");F(this,"app");F(this,"renderAction",(t,n)=>{const i=this.app.props.UIOptions.canvasActions;if(this.actions[t]&&"PanelComponent"in this.actions[t]&&(!(t in i)||i[t])){const r=this.actions[t],s=r.PanelComponent;s.displayName="PanelComponent";const o=this.getElementsIncludingDeleted(),a=this.getAppState(),l=c=>{h7(r,"ui",a,o,this.app,c),this.updater(r.perform(this.getElementsIncludingDeleted(),this.getAppState(),c,this.app))};return g(s,{elements:this.getElementsIncludingDeleted(),appState:this.getAppState(),updateData:l,appProps:this.app.props,app:this.app,data:n})}return null});F(this,"isActionEnabled",t=>{const n=this.getElementsIncludingDeleted(),i=this.getAppState();return!t.predicate||t.predicate(n,i,this.app.props,this.app)});this.updater=s=>{if(Fm(s))s.then(o=>t(o));else return t(s)},this.getAppState=n,this.getElementsIncludingDeleted=i,this.app=r}registerAction(t){this.actions[t.name]=t}registerAll(t){t.forEach(n=>this.registerAction(n))}handleKeyDown(t){const n=this.app.props.UIOptions.canvasActions,i=Object.values(this.actions).sort((l,c)=>(c.keyPriority||0)-(l.keyPriority||0)).filter(l=>(l.name in n?n[l.name]:!0)&&l.keyTest&&l.keyTest(t,this.getAppState(),this.getElementsIncludingDeleted(),this.app));if(i.length!==1)return i.length>1&&console.warn("Canceling as multiple actions match this shortcut",i),!1;const r=i[0];if(this.getAppState().viewModeEnabled&&r.viewMode!==!0)return!1;const s=this.getElementsIncludingDeleted(),o=this.getAppState(),a=null;return h7(r,"keyboard",o,s,this.app,null),t.preventDefault(),t.stopPropagation(),this.updater(i[0].perform(s,o,a,this.app)),!0}executeAction(t,n="api",i=null){const r=this.getElementsIncludingDeleted(),s=this.getAppState();h7(t,n,s,r,this.app,i),this.updater(t.perform(r,s,i,this.app))}}class t8e{constructor(){F(this,"targets",new WeakMap);F(this,"rafIds",new WeakMap)}register(t,n){this.targets.set(t,{callback:n,stopped:!0})}start(t){const n=this.targets.get(t);n&&(this.rafIds.has(t)||(this.targets.set(t,{...n,stopped:!1}),this.scheduleFrame(t)))}stop(t){const n=this.targets.get(t);n&&!n.stopped&&this.targets.set(t,{...n,stopped:!0}),this.cancelFrame(t)}constructFrame(t){return n=>{const i=this.targets.get(t);if(!i)return;const r=this.onFrame(i,n);!i.stopped&&!r?this.scheduleFrame(t):this.cancelFrame(t)}}scheduleFrame(t){const n=requestAnimationFrame(this.constructFrame(t));this.rafIds.set(t,n)}cancelFrame(t){if(this.rafIds.has(t)){const n=this.rafIds.get(t);cancelAnimationFrame(n)}this.rafIds.delete(t)}onFrame(t,n){return t.callback(n)??!1}}const UR=e=>{const t=Array.from(e.values());return{x:yR(t,n=>n.x)/t.length,y:yR(t,n=>n.y)/t.length}},bR=([e,t])=>Math.hypot(e.x-t.x,e.y-t.y),yR=(e,t)=>e.reduce((n,i)=>n+t(i),0),n8e=8,ER=99999,H5=e=>n8e/e,ji=class ji{};F(ji,"referenceSnapPoints",null),F(ji,"visibleGaps",null),F(ji,"setReferenceSnapPoints",t=>{ji.referenceSnapPoints=t}),F(ji,"getReferenceSnapPoints",()=>ji.referenceSnapPoints),F(ji,"setVisibleGaps",t=>{ji.visibleGaps=t}),F(ji,"getVisibleGaps",()=>ji.visibleGaps),F(ji,"destroy",()=>{ji.referenceSnapPoints=null,ji.visibleGaps=null});let Rs=ji;const rm=e=>e.props.gridModeEnabled??e.state.gridModeEnabled,Cc=({event:e,app:t,selectedElements:n})=>e?t.state.objectsSnapModeEnabled&&!e[z.CTRL_OR_CMD]||!t.state.objectsSnapModeEnabled&&e[z.CTRL_OR_CMD]&&!rm(t):n.length===1&&n[0].type==="arrow"?!1:t.state.objectsSnapModeEnabled,i8e=(e,t,n=.01)=>Math.abs(e-t)<=n,sm=(e,t,{omitCenter:n,boundingBoxCorners:i,dragOffset:r}={omitCenter:!1,boundingBoxCorners:!1})=>{let s=[];if(e.length===1){const o=e[0];let[a,l,c,u,d,f]=Ne(o,t);r&&(a+=r.x,c+=r.x,d+=r.x,l+=r.y,u+=r.y,f+=r.y);const h=(c-a)/2,m=(u-l)/2;if((o.type==="diamond"||o.type==="ellipse")&&!i){const p=q(C(a,l+m),C(d,f),o.angle),b=q(C(a+h,l),C(d,f),o.angle),E=q(C(c,l+m),C(d,f),o.angle),y=q(C(a+h,u),C(d,f),o.angle),v=C(d,f);s=n?[p,b,E,y]:[p,b,E,y,v]}else{const p=q(C(a,l),C(d,f),o.angle),b=q(C(c,l),C(d,f),o.angle),E=q(C(a,u),C(d,f),o.angle),y=q(C(c,u),C(d,f),o.angle),v=C(d,f);s=n?[p,b,E,y]:[p,b,E,y,v]}}else if(e.length>1){const[o,a,l,c]=G9(e,r??{x:0,y:0}),u=l-o,d=c-a,f=C(o,a),h=C(l,a),m=C(o,c),p=C(l,c),b=C(o+u/2,a+d/2);s=n?[f,h,m,p]:[f,h,m,p,b]}return s.map(o=>C(on(o[0]),on(o[1])))},hG=(e,t,n,i)=>{const r=t.filter(s=>Ie(s)).map(s=>s.id);return wF(e,t,n,i).filter(s=>!(s.frameId&&r.includes(s.frameId)))},r8e=(e,t,n,i)=>{const r=hG(e,t,n,i),s=t5(r,i).filter(d=>!(d.length===1&&jt(d[0]))).map(d=>_t(d).map(f=>on(f))),o=s.sort((d,f)=>d[0]-f[0]),a=[];let l=0;e:for(let d=0;d<o.length;d++){const f=o[d];for(let h=d+1;h<o.length;h++){if(++l>ER)break e;const m=o[h],[,p,b,E]=f,[y,v,,_]=m;b<y&&lb(Li(p,E),Li(v,_))&&a.push({startBounds:f,endBounds:m,startSide:[C(b,p),C(b,E)],endSide:[C(y,v),C(y,_)],length:y-b,overlap:cb(Li(p,E),Li(v,_))})}}const c=s.sort((d,f)=>d[1]-f[1]),u=[];l=0;e:for(let d=0;d<c.length;d++){const f=c[d];for(let h=d+1;h<c.length;h++){if(++l>ER)break e;const m=c[h],[p,,b,E]=f,[y,v,_]=m;E<v&&lb(Li(p,b),Li(y,_))&&u.push({startBounds:f,endBounds:m,startSide:[C(p,E),C(b,E)],endSide:[C(y,v),C(_,v)],length:v-E,overlap:cb(Li(p,b),Li(y,_))})}}return{horizontalGaps:a,verticalGaps:u}},vR=(e,t,n,i,r,s,o)=>{if(!Cc({app:n,event:i,selectedElements:e}))return[];if(e.length===0)return[];const a=Rs.getVisibleGaps();if(a){const{horizontalGaps:l,verticalGaps:c}=a,[u,d,f,h]=G9(e,t).map(b=>on(b)),m=(u+f)/2,p=(d+h)/2;for(const b of l){if(!lb(Li(d,h),b.overlap))continue;const E=b.startSide[0][0]+b.length/2,y=on(E-m);if(b.length>f-u&&Math.abs(y)<=o.x){Math.abs(y)<o.x&&(r.length=0),o.x=Math.abs(y);const I={type:"gap",direction:"center_horizontal",gap:b,offset:y};r.push(I);continue}const[,,_]=b.endBounds,S=u-_,M=on(b.length-S);if(Math.abs(M)<=o.x){Math.abs(M)<o.x&&(r.length=0),o.x=Math.abs(M);const I={type:"gap",direction:"side_right",gap:b,offset:M};r.push(I);continue}const[w,,,]=b.startBounds,T=w-f,A=on(T-b.length);if(Math.abs(A)<=o.x){Math.abs(A)<o.x&&(r.length=0),o.x=Math.abs(A);const I={type:"gap",direction:"side_left",gap:b,offset:A};r.push(I);continue}}for(const b of c){if(!lb(Li(u,f),b.overlap))continue;const E=b.startSide[0][1]+b.length/2,y=on(E-p);if(b.length>h-d&&Math.abs(y)<=o.y){Math.abs(y)<o.y&&(s.length=0),o.y=Math.abs(y);const I={type:"gap",direction:"center_vertical",gap:b,offset:y};s.push(I);continue}const[,_,,]=b.startBounds,S=_-h,M=on(S-b.length);if(Math.abs(M)<=o.y){Math.abs(M)<o.y&&(s.length=0),o.y=Math.abs(M);const I={type:"gap",direction:"side_top",gap:b,offset:M};s.push(I);continue}const[,,,w]=b.endBounds,T=on(d-w),A=b.length-T;if(Math.abs(A)<=o.y){Math.abs(A)<o.y&&(s.length=0),o.y=Math.abs(A);const I={type:"gap",direction:"side_bottom",gap:b,offset:A};s.push(I);continue}}}},s8e=(e,t,n,i)=>{const r=hG(e,t,n,i);return t5(r,i).filter(s=>!(s.length===1&&jt(s[0]))).flatMap(s=>sm(s,i))},Lh=(e,t,n,i,r,s,o)=>{if(!Cc({app:n,event:i,selectedElements:e})||e.length===0&&t.length===0)return[];const a=Rs.getReferenceSnapPoints();if(a)for(const l of t)for(const c of a){const u=c[0]-l[0],d=c[1]-l[1];Math.abs(u)<=o.x&&(Math.abs(u)<o.x&&(r.length=0),r.push({type:"point",points:[l,c],offset:u}),o.x=Math.abs(u)),Math.abs(d)<=o.y&&(Math.abs(d)<o.y&&(s.length=0),s.push({type:"point",points:[l,c],offset:d}),o.y=Math.abs(d))}},o8e=(e,t,n,i,r)=>{var b,E;const s=n.state,o=Be(e,s);if(!Cc({app:n,event:i,selectedElements:o})||o.length===0)return{snapOffset:{x:0,y:0},snapLines:[]};t.x=on(t.x),t.y=on(t.y);const a=[],l=[],c=H5(s.zoom.value),u={x:c,y:c},d=sm(o,r,{dragOffset:t});Lh(o,d,n,i,a,l,u),vR(o,t,n,i,a,l,u);const f={x:((b=a[0])==null?void 0:b.offset)??0,y:((E=l[0])==null?void 0:E.offset)??0};u.x=0,u.y=0,a.length=0,l.length=0;const h={x:on(t.x+f.x),y:on(t.y+f.y)};Lh(o,sm(o,r,{dragOffset:h}),n,i,a,l,u),vR(o,h,n,i,a,l,u);const m=q_(a,l),p=l8e(o,h,[...a,...l].filter(y=>y.type==="gap"));return{snapOffset:f,snapLines:[...m,...p]}},on=e=>Math.round(e*10**6)/10**6,_R=e=>{const t=new Map;for(const n of e){const i=n.join(",");t.has(i)||t.set(i,n)}return Array.from(t.values())},q_=(e,t)=>{const n={},i={};if(e.length>0){for(const r of e)if(r.type==="point"){const s=on(r.points[0][0]);n[s]||(n[s]=[]),n[s].push(...r.points.map(o=>C(on(o[0]),on(o[1]))))}}if(t.length>0){for(const r of t)if(r.type==="point"){const s=on(r.points[0][1]);i[s]||(i[s]=[]),i[s].push(...r.points.map(o=>C(on(o[0]),on(o[1]))))}}return Object.entries(n).map(([r,s])=>({type:"points",points:_R(s.map(o=>C(Number(r),o[1])).sort((o,a)=>o[1]-a[1]))})).concat(Object.entries(i).map(([r,s])=>({type:"points",points:_R(s.map(o=>C(o[0],Number(r))).sort((o,a)=>o[0]-a[0]))})))},a8e=e=>{const t=new Map;for(const n of e){const i=n.points.flat().map(r=>[on(r)]).join(",");t.has(i)||t.set(i,n)}return Array.from(t.values())},l8e=(e,t,n)=>{const[i,r,s,o]=G9(e,t),a=[];for(const l of n){const[c,u,d,f]=l.gap.startBounds,[h,m,p,b]=l.gap.endBounds,E=cb(Li(r,o),l.gap.overlap),y=cb(Li(i,s),l.gap.overlap);switch(l.direction){case"center_horizontal":{if(E){const v=(E[0]+E[1])/2;a.push({type:"gap",direction:"horizontal",points:[C(l.gap.startSide[0][0],v),C(i,v)]},{type:"gap",direction:"horizontal",points:[C(s,v),C(l.gap.endSide[0][0],v)]})}break}case"center_vertical":{if(y){const v=(y[0]+y[1])/2;a.push({type:"gap",direction:"vertical",points:[C(v,l.gap.startSide[0][1]),C(v,r)]},{type:"gap",direction:"vertical",points:[C(v,o),C(v,l.gap.endSide[0][1])]})}break}case"side_right":{if(E){const v=(E[0]+E[1])/2;a.push({type:"gap",direction:"horizontal",points:[C(d,v),C(h,v)]},{type:"gap",direction:"horizontal",points:[C(p,v),C(i,v)]})}break}case"side_left":{if(E){const v=(E[0]+E[1])/2;a.push({type:"gap",direction:"horizontal",points:[C(s,v),C(c,v)]},{type:"gap",direction:"horizontal",points:[C(d,v),C(h,v)]})}break}case"side_top":{if(y){const v=(y[0]+y[1])/2;a.push({type:"gap",direction:"vertical",points:[C(v,o),C(v,u)]},{type:"gap",direction:"vertical",points:[C(v,f),C(v,m)]})}break}case"side_bottom":{if(y){const v=(y[0]+y[1])/2;a.push({type:"gap",direction:"vertical",points:[C(v,f),C(v,m)]},{type:"gap",direction:"vertical",points:[C(v,b),C(v,r)]})}break}}}return a8e(a.map(l=>({...l,points:l.points.map(c=>C(on(c[0]),on(c[1])))})))},wR=(e,t,n,i,r,s)=>{var M,w;if(!Cc({event:i,selectedElements:e,app:n})||e.length===0||e.length===1&&!i8e(e[0].angle,0))return{snapOffset:{x:0,y:0},snapLines:[]};let[o,a,l,c]=_t(t);s&&(s.includes("e")?l+=r.x:s.includes("w")&&(o+=r.x),s.includes("n")?a+=r.y:s.includes("s")&&(c+=r.y));const u=[];if(s)switch(s){case"e":{u.push(C(l,a),C(l,c));break}case"w":{u.push(C(o,a),C(o,c));break}case"n":{u.push(C(o,a),C(l,a));break}case"s":{u.push(C(o,c),C(l,c));break}case"ne":{u.push(C(l,a));break}case"nw":{u.push(C(o,a));break}case"se":{u.push(C(l,c));break}case"sw":{u.push(C(o,c));break}}const d=H5(n.state.zoom.value),f={x:d,y:d},h=[],m=[];Lh(t,u,n,i,h,m,f);const p={x:((M=h[0])==null?void 0:M.offset)??0,y:((w=m[0])==null?void 0:w.offset)??0};f.x=0,f.y=0,h.length=0,m.length=0;const[b,E,y,v]=_t(e).map(T=>on(T)),_=[C(b,E),C(b,v),C(y,E),C(y,v)];Lh(e,_,n,i,h,m,f);const S=q_(h,m);return{snapOffset:p,snapLines:S}},c8e=(e,t,n,i,r,s)=>{var m,p;if(!Cc({event:n,selectedElements:[e],app:t}))return{snapOffset:{x:0,y:0},snapLines:[]};const o=[C(i.x+r.x,i.y+r.y)],a=H5(t.state.zoom.value),l={x:a,y:a},c=[],u=[];Lh([e],o,t,n,c,u,l);const d={x:((m=c[0])==null?void 0:m.offset)??0,y:((p=u[0])==null?void 0:p.offset)??0};l.x=0,l.y=0,c.length=0,u.length=0;const f=sm([e],s,{boundingBoxCorners:!0,omitCenter:!0});Lh([e],f,t,n,c,u,l);const h=q_(c,u);return{snapOffset:d,snapLines:h}},u8e=(e,t,n,i,r)=>{if(!Cc({event:i,selectedElements:[],app:t}))return{originOffset:{x:0,y:0},snapLines:[]};const s=wF(e,[],t.state,r),o=H5(t.state.zoom.value),a={x:o,y:o},l=[],c=[];for(const u of s){const d=sm([u],r);for(const f of d){const h=f[0]-n.x;Math.abs(h)<=Math.abs(a.x)&&(Math.abs(h)<Math.abs(a.x)&&(c.length=0),c.push({type:"pointer",points:[f,C(f[0],n.y)],direction:"vertical"}),a.x=h);const m=f[1]-n.y;Math.abs(m)<=Math.abs(a.y)&&(Math.abs(m)<Math.abs(a.y)&&(l.length=0),l.push({type:"pointer",points:[f,C(n.x,f[1])],direction:"horizontal"}),a.y=m)}}return{originOffset:{x:c.length>0?c[0].points[0][0]-n.x:0,y:l.length>0?l[0].points[0][1]-n.y:0},snapLines:[...c,...l]}},d8e=e=>e===Gn.rectangle||e===Gn.ellipse||e===Gn.diamond||e===Gn.frame||e===Gn.magicframe||e===Gn.image||e===Gn.text,bU={width:100,height:0},Gl=100,f8e=(e,t,n)=>{const i=Hr({x:0,y:0,textAlign:M0.CENTER,verticalAlign:kr.MIDDLE,...t,containerId:e.id,strokeColor:t.strokeColor||e.strokeColor});return Object.assign(e,{boundElements:(e.boundElements||[]).concat({type:"text",id:i.id})}),Ji(i,e,n),[e,i]},TR=(e,t,n,i,r)=>{let s,o;if(Object.assign(e,{startBinding:(e==null?void 0:e.startBinding)||null,endBinding:e.endBinding||null}),t){const u=(t==null?void 0:t.width)??Gl,d=(t==null?void 0:t.height)??Gl;let f;t.id&&(f=i.getElement(t.id),f||console.error(`No element for start binding with id ${t.id} found`));const h=t.x||e.x-u,m=t.y||e.y-d/2,p=f?f.type:t.type;if(p){if(p==="text"){let b="";f&&f.type==="text"?b=f.text:t.type==="text"&&(b=t.text),b||console.error(`No text found for start binding text element for ${e.id}`),s=Hr({x:h,y:m,type:"text",...f,...t,text:b}),Object.assign(s,{x:t.x||e.x-s.width,y:t.y||e.y-s.height/2})}else switch(p){case"rectangle":case"ellipse":case"diamond":{s=Za({x:h,y:m,width:u,height:d,...f,...t,type:p});break}default:Ec(e,`Unhandled element start type "${t.type}"`,!0)}as(e,s,"start",r)}}if(n){const u=(n==null?void 0:n.height)??Gl,d=(n==null?void 0:n.width)??Gl;let f;n.id&&(f=i.getElement(n.id),f||console.error(`No element for end binding with id ${n.id} found`));const h=n.x||e.x+e.width,m=n.y||e.y-u/2,p=f?f.type:n.type;if(p){if(p==="text"){let b="";f&&f.type==="text"?b=f.text:n.type==="text"&&(b=n.text),b||console.error(`No text found for end binding text element for ${e.id}`),o=Hr({x:h,y:m,type:"text",...f,...n,text:b}),Object.assign(o,{y:n.y||e.y-o.height/2})}else switch(p){case"rectangle":case"ellipse":case"diamond":{o=Za({x:h,y:m,width:d,height:u,...f,...n,type:p});break}default:Ec(e,`Unhandled element end type "${p}"`,!0)}as(e,o,"end",r)}}if(e.points.length<2)return{linearElement:e,startBoundElement:s,endBoundElement:o};const a=e.points.length-1,l=.5,c=Na(e.points);return e.points[a][0]>e.points[a-1][0]&&(c[0][0]=l,c[a][0]-=l),e.points[a][0]<e.points[a-1][0]&&(c[0][0]=-.5,c[a][0]+=l),e.points[a][1]>e.points[a-1][1]&&(c[0][1]=l,c[a][1]-=l),e.points[a][1]<e.points[a-1][1]&&(c[0][1]=-.5,c[a][1]+=l),Object.assign(e,ce.getNormalizedPoints({...e,points:c})),{linearElement:e,startBoundElement:s,endBoundElement:o}};class h8e{constructor(){F(this,"excalidrawElements",new Map);F(this,"add",t=>{t&&this.excalidrawElements.set(t.id,t)});F(this,"getElements",()=>Ya(Array.from(this.excalidrawElements.values())));F(this,"getElementsMap",()=>Us(Se(this.getElements())));F(this,"getElement",t=>this.excalidrawElements.get(t))}}const u4=(e,t)=>{var a,l,c;if(!e)return[];const n=Na(e),i=new h8e,r=new Map,s=new Map;for(const u of n){let d;const f=u.id;switch((t==null?void 0:t.regenerateIds)!==!1&&Object.assign(u,{id:zr()}),u.type){case"rectangle":case"ellipse":case"diamond":{const m=(a=u==null?void 0:u.label)!=null&&a.text&&u.width===void 0?0:(u==null?void 0:u.width)||Gl,p=(l=u==null?void 0:u.label)!=null&&l.text&&u.height===void 0?0:(u==null?void 0:u.height)||Gl;d=Za({...u,width:m,height:p});break}case"line":{const m=u.width||bU.width,p=u.height||bU.height;d=Pu({width:m,height:p,points:[C(0,0),C(m,p)],...u});break}case"arrow":{const m=u.width||bU.width,p=u.height||bU.height;d=j9({width:m,height:p,endArrowhead:"arrow",points:[C(0,0),C(m,p)],...u,type:"arrow"}),Object.assign(d,Uh(d.points));break}case"text":{const m=(u==null?void 0:u.fontFamily)||Pc,p=(u==null?void 0:u.fontSize)||ul,b=(u==null?void 0:u.lineHeight)||Ju(m),E=u.text??"",y=Eh(E),v=Hi(y,Ct({fontFamily:m,fontSize:p}),b);d=Hr({width:v.width,height:v.height,fontFamily:m,fontSize:p,...u});break}case"image":{d=rB({width:(u==null?void 0:u.width)||Gl,height:(u==null?void 0:u.height)||Gl,...u});break}case"frame":{d=X9({x:0,y:0,...u});break}case"magicframe":{d=wE({x:0,y:0,...u});break}case"freedraw":case"iframe":case"embeddable":{d=u;break}default:d=u,Ec(u,`Unhandled element type "${u.type}"`,!0)}i.getElement(d.id)?console.error(`Duplicate id found for ${d.id}`):(i.add(d),r.set(d.id,u),f&&s.set(f,d.id))}const o=i.getElementsMap();for(const[u,d]of r){const f=i.getElement(u);switch(d.type){case"rectangle":case"ellipse":case"diamond":case"arrow":{if((c=d.label)!=null&&c.text){let[h,m]=f8e(f,d==null?void 0:d.label,o);if(i.add(h),i.add(m),ze(h)){const p=d.type==="arrow"?d==null?void 0:d.start:void 0,b=d.type==="arrow"?d==null?void 0:d.end:void 0;if(p&&p.id){const _=s.get(p.id);_&&Object.assign(p,{id:_})}if(b&&b.id){const _=s.get(b.id);_&&Object.assign(b,{id:_})}const{linearElement:E,startBoundElement:y,endBoundElement:v}=TR(h,p,b,i,o);h=E,i.add(E),i.add(y),i.add(v)}}else switch(d.type){case"arrow":{const{start:h,end:m}=d;if(h&&h.id){const y=s.get(h.id);Object.assign(h,{id:y})}if(m&&m.id){const y=s.get(m.id);Object.assign(m,{id:y})}const{linearElement:p,startBoundElement:b,endBoundElement:E}=TR(f,h,m,i,o);i.add(p),i.add(b),i.add(E);break}}break}}}for(const[u,d]of r){if(d.type!=="frame"&&d.type!=="magicframe")continue;const f=i.getElement(u);if(!f)throw new Error(`Excalidraw element with id ${u} doesn't exist`);const h=[];d.children.forEach(w=>{var I;const T=s.get(w);if(!T)throw new Error(`Element with ${w} wasn't mapped correctly`);const A=i.getElement(T);if(!A)throw new Error(`Frame element with id ${T} doesn't exist`);Object.assign(A,{frameId:f.id}),(I=A==null?void 0:A.boundElements)==null||I.forEach(R=>{const D=i.getElement(R.id);if(!D)throw new Error(`Bound element with id ${R.id} doesn't exist`);Object.assign(D,{frameId:f.id}),h.push(D)}),h.push(A)});let[m,p,b,E]=_t(h);const y=10;m=m-y,p=p-y,b=b+y,E=E+y;const v=(f==null?void 0:f.x)||m,_=(f==null?void 0:f.y)||p,S=(f==null?void 0:f.width)||b-m,M=(f==null?void 0:f.height)||E-p;Object.assign(f,{x:v,y:_,width:S,height:M})}return i.getElements()},g8e="#ff6b6b",m8e="#ff0000",SR=1,IR=2,p8e=(e,t)=>{if(!t.snapLines.length)return;const n=t.theme===xe.LIGHT||t.zenModeEnabled?g8e:m8e,i=(t.zenModeEnabled?SR*1.5:SR)/t.zoom.value;e.save(),e.translate(t.scrollX,t.scrollY);for(const r of t.snapLines)r.type==="pointer"?(e.lineWidth=i,e.strokeStyle=n,b8e(r,e,t)):r.type==="gap"?(e.lineWidth=i,e.strokeStyle=n,y8e(r.points[0],r.points[1],r.direction,t,e)):r.type==="points"&&(e.lineWidth=i,e.strokeStyle=n,U8e(r,e,t));e.restore()},U8e=(e,t,n)=>{if(!n.zenModeEnabled){const i=e.points[0],r=e.points[e.points.length-1];Wr(i,r,t)}for(const i of e.points)gG(i,n,t)},b8e=(e,t,n)=>{gG(e.points[0],n,t),n.zenModeEnabled||Wr(e.points[0],e.points[1],t)},gG=([e,t],n,i)=>{i.save();const r=(n.zenModeEnabled?IR*1.5:IR)/n.zoom.value;i.beginPath(),i.moveTo(e-r,t-r),i.lineTo(e+r,t+r),i.moveTo(e+r,t-r),i.lineTo(e-r,t+r),i.stroke(),i.restore()},Wr=(e,t,n)=>{n.beginPath(),n.lineTo(e[0],e[1]),n.lineTo(t[0],t[1]),n.stroke()},y8e=(e,t,n,i,r)=>{const s=8/i.zoom.value,o=s/2,a=s/4;if(n==="horizontal"){const l=[(e[0]+t[0])/2,e[1]];i.zenModeEnabled||Wr(C(e[0],e[1]-s),C(e[0],e[1]+s),r),Wr(C(l[0]-a,l[1]-o),C(l[0]-a,l[1]+o),r),Wr(C(l[0]+a,l[1]-o),C(l[0]+a,l[1]+o),r),i.zenModeEnabled||(Wr(C(t[0],t[1]-s),C(t[0],t[1]+s),r),Wr(e,t,r))}else{const l=[e[0],(e[1]+t[1])/2];i.zenModeEnabled||Wr(C(e[0]-s,e[1]),C(e[0]+s,e[1]),r),Wr(C(l[0]-o,l[1]-a),C(l[0]+o,l[1]-a),r),Wr(C(l[0]-o,l[1]+a),C(l[0]+o,l[1]+a),r),i.zenModeEnabled||(Wr(C(t[0]-s,t[1]),C(t[0]+s,t[1]),r),Wr(e,t,r))}},_o=4,Xl=6,E8e="rgba(0,0,0,0.3)",v8e=(e,t,n,i)=>{if(!e.length)return{horizontal:null,vertical:null};const[r,s,o,a]=_t(e),l=t/i.zoom.value,c=n/i.zoom.value,u=t-l,d=n-c,f={top:parseInt(qp("sat"))||0,bottom:parseInt(qp("sab"))||0,left:parseInt(qp("sal"))||0,right:parseInt(qp("sar"))||0},h=z0().rtl,m=-i.scrollX+u/2+f.left,p=-i.scrollY+d/2+f.top,b=m+l-f.right,E=p+c-f.bottom,y=Math.min(r,m),v=Math.min(s,p),_=Math.max(o,b),S=Math.max(a,E);return{horizontal:m===y&&b===_?null:{x:Math.max(f.left,_o)+(m-y)/(_-y)*t,y:n-Xl-Math.max(_o,f.bottom),width:(b-m)/(_-y)*t-Math.max(_o*2,f.left+f.right),height:Xl},vertical:p===v&&E===S?null:{x:h?Math.max(f.left,_o):t-Xl-Math.max(f.right,_o),y:(p-v)/(S-v)*n+Math.max(f.top,_o),width:Xl,height:(E-p)/(S-v)*n-Math.max(_o*2,f.top+f.bottom)}}},xR=(e,t,n)=>{const[i,r]=[e.horizontal,e.vertical].map(o=>o!=null&&o.x<=t&&t<=o.x+o.width&&o.y<=n&&n<=o.y+o.height);return{isOverEither:i||r,isOverHorizontal:i,isOverVertical:r}},_8e=(e,t)=>{mr(t.selectedLinearElement,"selectedLinearElement is null");const{segmentMidPointHoveredCoords:n}=t.selectedLinearElement;mr(n,"midPointCoords is null"),e.save(),e.translate(t.scrollX,t.scrollY),mG(n,e,t),e.restore()},w8e=(e,t,n)=>{var a,l;const{elementId:i,hoverPointIndex:r}=t.selectedLinearElement;if((l=(a=t.editingLinearElement)==null?void 0:a.selectedPointsIndices)!=null&&l.includes(r))return;const s=ce.getElement(i,n);if(!s)return;const o=ce.getPointAtIndexGlobalCoordinates(s,r,n);e.save(),e.translate(t.scrollX,t.scrollY),mG(o,e,t),e.restore()},mG=(e,t,n)=>{t.fillStyle="rgba(105, 101, 219, 0.4)",M5(t,e[0],e[1],ce.POINT_HANDLE_SIZE/n.zoom.value,!1)},Jm=(e,t,n,i,r,s,o,a,l=!1,c=0)=>{e.save(),e.translate(s,o),e.rotate(a),l&&e.fillRect(t-s,n-o,i,r),c&&e.roundRect?(e.beginPath(),e.roundRect(t-s,n-o,i,r,c),e.stroke(),e.closePath()):e.strokeRect(t-s,n-o,i,r),e.restore()},T8e=(e,t,n,i,r,s)=>{e.save(),e.translate(i,r),e.rotate(s),e.beginPath(),e.moveTo(0,n/2),e.lineTo(t/2,0),e.lineTo(0,-n/2),e.lineTo(-t/2,0),e.closePath(),e.stroke(),e.restore()},g7=(e,t,n,i,r,s=!1)=>{e.strokeStyle="#5e5ad8",e.setLineDash([]),e.fillStyle="rgba(255, 255, 255, 0.9)",r?e.fillStyle="rgba(134, 131, 226, 0.9)":s&&(e.fillStyle="rgba(177, 151, 252, 0.7)"),M5(e,n[0],n[1],i/t.zoom.value,!s)},S8e=(e,t,n,i,r,s)=>{e.beginPath(),e.ellipse(i,r,t/2,n/2,s,0,Math.PI*2),e.stroke()},I8e=(e,t,n,i)=>{const[r,s,o,a]=Ne(t,n),l=o-r,c=a-s;e.strokeStyle="rgba(0,0,0,.05)";const u=i.value<1?i.value:1;e.lineWidth=x9/u;const d=e.lineWidth/2+C9,f=Gs(Math.min(t.width,t.height),t);switch(t.type){case"rectangle":case"text":case"image":case"iframe":case"embeddable":case"frame":case"magicframe":Jm(e,r-d,s-d,l+d*2,c+d*2,r+l/2,s+c/2,t.angle,void 0,f);break;case"diamond":const h=Math.hypot(l,c),m=d*h/c,p=d*h/l;T8e(e,l+m*2,c+p*2,r+l/2,s+c/2,t.angle);break;case"ellipse":S8e(e,l+d*2,c+d*2,r+l/2,s+c/2,t.angle);break}},x8e=(e,t,n,i)=>{const[r,s,o]=t,a=$m(o,o.width,o.height,i);e.strokeStyle="rgba(0,0,0,0)",e.fillStyle="rgba(0,0,0,.05)",(s==="both"?[0,-1]:s==="start"?[0]:[-1]).forEach(c=>{const[u,d]=ce.getPointAtIndexGlobalCoordinates(r,c,n);M5(e,u,d,a)})},pG=(e,t,n)=>{const{angle:i,x1:r,y1:s,x2:o,y2:a,selectionColors:l,cx:c,cy:u,dashed:d,activeEmbeddable:f}=n,h=o-r,m=a-s,b=(n.padding??Qu*2)/t.zoom.value,E=8/t.zoom.value,y=4/t.zoom.value;e.save(),e.translate(t.scrollX,t.scrollY),e.lineWidth=(f?4:1)/t.zoom.value;const v=l.length;for(let _=0;_<v;++_)e.strokeStyle=l[_],d&&e.setLineDash([E,y+(E+y)*(v-1)]),e.lineDashOffset=(E+y)*_,Jm(e,r-b,s-b,h+b*2,m+b*2,c,u,i);e.restore()},C8e=(e,t,n,i)=>{const r=Array.isArray(n)?x8e:I8e;e.save(),e.translate(t.scrollX,t.scrollY),r(e,n,i,t.zoom),e.restore()},A8e=(e,t,n,i)=>{const[r,s,o,a]=Ne(n,i),l=o-r,c=a-s;e.strokeStyle="rgb(0,118,255)",e.lineWidth=sn.strokeWidth/t.zoom.value,e.save(),e.translate(t.scrollX,t.scrollY),Jm(e,r,s,l,c,r+l/2,s+c/2,n.angle,!1,sn.radius/t.zoom.value),e.restore()},M8e=(e,t,n)=>{const i=n.filter(a=>a.groupIds.length===0),r=n.filter(a=>a.groupIds.length>0),s=a=>{const[l,c,u,d]=_t(a);return{angle:0,x1:l,x2:u,y1:c,y2:d,selectionColors:["rgb(0,118,255)"],dashed:!1,cx:l+(u-l)/2,cy:c+(d-c)/2,activeEmbeddable:!1}},o=a=>{const l=Gt(n,a);return s(l)};Object.entries(CF(r,t)).filter(([a,l])=>l).map(([a,l])=>a).map(a=>o(a)).concat(i.map(a=>s([a]))).forEach(a=>pG(e,t,a))},m7=(e,t,n,i)=>{var a;if(!t.selectedLinearElement)return;e.save(),e.translate(t.scrollX,t.scrollY),e.lineWidth=1/t.zoom.value;const r=ce.getPointsGlobalCoordinates(n,i),{POINT_HANDLE_SIZE:s}=ce,o=t.editingLinearElement?s:s/2;if(r.forEach((l,c)=>{var d,f;if(fe(n)&&c!==0&&c!==r.length-1)return;const u=!!((f=(d=t.editingLinearElement)==null?void 0:d.selectedPointsIndices)!=null&&f.includes(c));g7(e,t,l,o,u)}),fe(n)){const l=((a=n.fixedSegments)==null?void 0:a.map(c=>c.index))||[];r.slice(0,-1).forEach((c,u)=>{ce.isSegmentTooShort(n,r[u+1],r[u],u,t.zoom)||g7(e,t,C((c[0]+r[u+1][0])/2,(c[1]+r[u+1][1])/2),s/2,!1,!l.includes(u+1))})}else ce.getEditorMidPoints(n,i,t).filter((c,u,d)=>c!==null&&!(fe(n)&&(u===0||u===d.length-1))).forEach(c=>{(t.editingLinearElement||r.length===2)&&g7(e,t,c,s/2,!1,!0)});e.restore()},CR=(e,t,n,i,r)=>{Object.keys(i).forEach(s=>{const o=i[s];if(o!==void 0){const[a,l,c,u]=o;e.save(),e.lineWidth=1/n.zoom.value,t.selectionColor&&(e.strokeStyle=t.selectionColor),s==="rotation"?M5(e,a+c/2,l+u/2,c/2):e.roundRect?(e.beginPath(),e.roundRect(a,l,c,u,2/n.zoom.value),e.fill(),e.stroke()):Jm(e,a,l,c,u,a+c/2,l+u/2,r,!0),e.restore()}})},R8e=(e,t,n,i,r)=>{const[s,o,,,a,l]=Ne(i,r),c=3,u=20,d=c/n.zoom.value,f=d/2,h=a-s+d,m=l-o+d,p=Math.min(u/n.zoom.value,h),b=Math.min(u/n.zoom.value,m);e.save(),e.fillStyle=t.selectionColor,e.strokeStyle=t.selectionColor,e.lineWidth=d,[[[-h,-m],[0,f],[p,f],[f,0],[f,b]],[[h-f,-m],[f,f],[-p+f,f],[0,0],[0,b]],[[-h,m],[0,-f],[p,-f],[f,0],[f,-b]],[[h-f,m],[f,-f],[-p+f,-f],[0,0],[0,-b]]].forEach(y=>{const[[v,_],[S,M],[w,T],[A,I],[R,D]]=y;e.save(),e.translate(a,l),e.rotate(i.angle),e.beginPath(),e.moveTo(v+S,_+M),e.lineTo(v+w,_+T),e.stroke(),e.beginPath(),e.moveTo(v+A,_+I),e.lineTo(v+R,_+D),e.stroke(),e.restore()}),e.restore()},k8e=(e,t,n,i)=>{t.save();const r=Qu*2/n.zoom.value,s=e.width+r*2,o=e.height+r*2,a=e.x+s/2,l=e.y+o/2,c=-(s/2+r),u=-(o/2+r);t.translate(a+n.scrollX,l+n.scrollY),t.rotate(e.angle),t.lineWidth=1/n.zoom.value,t.strokeStyle=i,t.strokeRect(c,u,s,o),t.restore()},UG=({canvas:e,elementsMap:t,visibleElements:n,selectedElements:i,allElementsMap:r,scale:s,appState:o,renderConfig:a,device:l})=>{var p,b,E;if(e===null)return{atLeastOneVisibleElement:!1,elementsMap:t};const[c,u]=R5(e,s),d=k5({canvas:e,scale:s,normalizedWidth:c,normalizedHeight:u});d.save(),d.scale(o.zoom.value,o.zoom.value);let f;if(n.forEach(y=>{var v;((v=o.editingLinearElement)==null?void 0:v.elementId)===y.id&&y&&(f=y)}),f&&m7(d,o,f,t),o.selectionElement&&!o.isCropping)try{Joe(o.selectionElement,d,o,a.selectionColor)}catch(y){console.error(y)}if(o.editingTextElement&&ue(o.editingTextElement)){const y=r.get(o.editingTextElement.id);y&&!y.autoResize&&k8e(y,d,o,a.selectionColor)}o.isBindingEnabled&&o.suggestedBindings.filter(y=>y!=null).forEach(y=>{C8e(d,o,y,t)}),o.frameToHighlight&&A8e(d,o,o.frameToHighlight,t),o.elementsToHighlight&&M8e(d,o,o.elementsToHighlight);const h=i.some(y=>Ie(y));if(i.length===1&&((p=o.editingLinearElement)==null?void 0:p.elementId)===i[0].id&&m7(d,o,i[0],t),o.selectedLinearElement){const y=o.selectedLinearElement,v=i.find(_=>_.id===y.elementId);y.segmentMidPointHoveredCoords?_8e(d,o):(fe(v)?y.hoverPointIndex===0||y.hoverPointIndex===v.points.length-1:y.hoverPointIndex>=0)&&w8e(d,o,t)}if(!o.multiElement&&!o.editingLinearElement){const y=dB(i,o),v=i.length===1&&ke(i[0]);v&&((b=o.selectedLinearElement)==null?void 0:b.elementId)===i[0].id&&!i[0].locked&&m7(d,o,i[0],t);const _=a.selectionColor||ai.black;if(y){const S=Se(i),M=[];for(const T of t.values()){const A=[],I=a.remoteSelectedElementIds.get(T.id);if(v&&fe(T)&&(T.startBinding||T.endBinding)||(S.has(T.id)&&!IF(o,T)&&A.push(_),I&&A.push(...I.map(R=>O5(R,o.collaborators.get(R))))),A.length){const[R,D,L,G,V,H]=Ne(T,t,!0);M.push({angle:T.angle,x1:R,y1:D,x2:L,y2:G,selectionColors:A,dashed:!!I,cx:V,cy:H,activeEmbeddable:((E=o.activeEmbeddable)==null?void 0:E.element)===T&&o.activeEmbeddable.state==="active",padding:T.id===o.croppingElementId||it(T)?0:void 0})}}const w=T=>{const A=Gt(t,T),[I,R,D,L]=_t(A);M.push({angle:0,x1:I,x2:D,y1:R,y2:L,selectionColors:[ai.black],dashed:!0,cx:I+(D-I)/2,cy:R+(L-R)/2,activeEmbeddable:!1})};for(const T of Ou(o))w(T);o.editingGroupId&&w(o.editingGroupId),M.forEach(T=>pG(d,o,T))}if(d.save(),d.translate(o.scrollX,o.scrollY),i.length===1){d.fillStyle=ai.white;const S=uB(i[0],o.zoom,t,"mouse",W1(l));if(!o.viewModeEnabled&&y&&!ue(o.editingTextElement)&&!o.croppingElementId&&CR(d,a,o,S,i[0].angle),o.croppingElementId&&!o.isCropping){const M=t.get(o.croppingElementId);M&&it(M)&&R8e(d,a,o,M,t)}}else if(i.length>1&&!o.isRotating){const S=Qu*2/o.zoom.value;d.fillStyle=ai.white;const[M,w,T,A]=_t(i,t),I=d.getLineDash();d.setLineDash([2/o.zoom.value]);const R=d.lineWidth;d.lineWidth=1/o.zoom.value,d.strokeStyle=_,Jm(d,M-S,w-S,T-M+S*2,A-w+S*2,(M+T)/2,(w+A)/2,0),d.lineWidth=R,d.setLineDash(I);const D=W9([M,w,T,A,(M+T)/2,(w+A)/2],0,o.zoom,"mouse",h?{...W1(l),rotation:!0}:W1(l));i.some(L=>!L.locked)&&CR(d,a,o,D,0)}d.restore()}o.searchMatches.forEach(({id:y,focus:v,matchedLines:_})=>{const S=t.get(y);if(S&&ue(S)){const[M,w,,,T,A]=Ne(S,t,!0);d.save(),o.theme===xe.LIGHT?v?d.fillStyle="rgba(255, 124, 0, 0.4)":d.fillStyle="rgba(255, 226, 0, 0.4)":v?d.fillStyle="rgba(229, 82, 0, 0.4)":d.fillStyle="rgba(99, 52, 0, 0.4)",d.translate(o.scrollX,o.scrollY),d.translate(T,A),d.rotate(S.angle),_.forEach(I=>{d.fillRect(M+I.offsetX-T,w+I.offsetY-A,I.width,I.height)}),d.restore()}}),p8e(d,o),d.restore(),T6e({context:d,renderConfig:a,appState:o,normalizedWidth:c,normalizedHeight:u});let m;return a.renderScrollbars&&(m=v8e(n,c,u,o),d.save(),d.fillStyle=E8e,d.strokeStyle="rgba(255,255,255,0.8)",[m.horizontal,m.vertical].forEach(y=>{y&&x$(d,y.x,y.y,y.width,y.height,Xl/2)}),d.restore()),{scrollBars:m,atLeastOneVisibleElement:n.length>0,elementsMap:t}},bG=Qh(e=>{var n;const t=UG(e);(n=e.callback)==null||n.call(e,t)},{trailing:!0}),L8e=(e,t)=>{if(t){bG(e);return}const n=UG(e);return e.callback(n),n};class AR{constructor(t){F(this,"scene");F(this,"getRenderableElements",(()=>{const t=({elementsMap:i,zoom:r,offsetLeft:s,offsetTop:o,scrollX:a,scrollY:l,height:c,width:u})=>{const d=[];for(const f of i.values())_b(f,u,c,{zoom:r,offsetLeft:s,offsetTop:o,scrollX:a,scrollY:l},i)&&d.push(f);return d},n=({elements:i,editingTextElement:r,newElementId:s,pendingImageElementId:o})=>{const a=Us(new Map);for(const l of i)it(l)&&o===l.id||s!==l.id&&(!r||r.type!=="text"||l.id!==r.id)&&a.set(l.id,l);return a};return Lie(({zoom:i,offsetLeft:r,offsetTop:s,scrollX:o,scrollY:a,height:l,width:c,editingTextElement:u,newElementId:d,pendingImageElementId:f,sceneNonce:h})=>{const m=this.scene.getNonDeletedElements(),p=n({elements:m,editingTextElement:u,newElementId:d,pendingImageElementId:f}),b=t({elementsMap:p,zoom:i,offsetLeft:r,offsetTop:s,scrollX:o,scrollY:a,height:l,width:c});return{elementsMap:p,visibleElements:b}})})());this.scene=t}destroy(){bG.cancel(),l$.cancel(),this.getRenderableElements.clear()}}const D8e=5,N8e=(e,t,n)=>{const[i,r]=Ne(e,n),{x:s,y:o}=Os({sceneX:i+e.width,sceneY:r},t),a=s-t.offsetLeft+10,l=o-t.offsetTop;return{x:a,y:l}},MR=({children:e,element:t,elementsMap:n})=>{const i=np();if(i.contextMenu||i.newElement||i.resizingElement||i.isRotating||i.openMenu||i.viewModeEnabled)return null;const{x:r,y:s}=N8e(t,i,n);return g("div",{className:"excalidraw-canvas-buttons",style:{top:`${s}px`,left:`${r}px`,padding:D8e},children:e})};function O8e(e,t,n,i){Object.defineProperty(e,t,{get:n,set:i,enumerable:!0,configurable:!0})}var P8e={};O8e(P8e,"LaserPointer",()=>Kb);function pn([e,t,n],[i,r,s]){return[e+i,t+r,n+s]}function b1([e,t,n],[i,r,s]){return[e-i,t-r,n-s]}function An([e,t,n],i){return[e*i,t*i,n*i]}function Qd([e,t,n]){return[e/Math.sqrt(e**2+t**2),t/Math.sqrt(e**2+t**2),n]}function Ai([e,t,n],i){return[Math.cos(i)*e-Math.sin(i)*t,Math.sin(i)*e+Math.cos(i)*t,n]}function F8e(e,t,n){return pn(e,An(b1(t,e),n))}function RR(e,t,n){return Math.atan2(n[1]-e[1],n[0]-e[0])-Math.atan2(t[1]-e[1],t[0]-e[0])}function kR(e){return Math.atan2(Math.sin(e),Math.cos(e))}function LR([e,t]){return Math.sqrt(e**2+t**2)}function Jf([e,t],[n,i]){return Math.sqrt((n-e)**2+(i-t)**2)}function B8e(e){if(e.length<2)return 0;let t=0;for(let n=1;n<=e.length-1;n++)t+=Jf(e[n-1],e[n]);return t+=Jf(e[e.length-2],e[e.length-1]),t}const z8e=(e,t,n)=>Math.max(t,Math.min(n,e));function H8e(e,t,n){const i=Jf(t,n);if(i===0)return Jf(e,t);const r=z8e(((e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1]))/i**2,0,1),s=[t[0]+r*(n[0]-t[0]),t[1]+r*(n[1]-t[1]),e[2]];return Jf(s,e)}function Wb(e,t){if(t===0||e.length<=2)return e;const n=e[0],i=e[e.length-1],[r,s]=e.reduce(([o,a],l,c)=>{const u=H8e(l,n,i);return u>o?[u,c]:[o,a]},[0,-1]);if(r>=t){const o=e[s];return[...Wb([n,...e.slice(1,s),o],t).slice(0,-1),o,...Wb([o,...e.slice(s,-1),i],t).slice(1)]}else return[n,i]}const Ml=class Ml{constructor(t){this.originalPoints=[],this.stablePoints=[],this.tailPoints=[],this.isFresh=!0,this.options=Object.assign({},Ml.defaults,t)}get lastPoint(){return this.tailPoints[this.tailPoints.length-1]??this.stablePoints[this.stablePoints.length-1]}addPoint(t){const n=this.originalPoints[this.originalPoints.length-1];if(!(n&&n[0]===t[0]&&n[1]===t[1])){if(this.originalPoints.push(t),this.isFresh){this.isFresh=!1,this.stablePoints.push(t);return}this.options.streamline>0&&(t=F8e(this.lastPoint,t,1-this.options.streamline)),this.tailPoints.push(t),B8e(this.tailPoints)>Ml.constants.maxTailLength&&this.stabilizeTail()}}close(){this.stabilizeTail()}stabilizeTail(){if(this.options.simplify>0&&this.options.simplifyPhase=="tail")throw new Error("Not implemented yet");this.stablePoints.push(...this.tailPoints),this.tailPoints=[]}getSize(t,n,i,r,s){return(t??this.options.size)*this.options.sizeMapping({pressure:n,runningLength:s,currentIndex:i,totalLength:r})}getStrokeOutline(t){if(this.isFresh)return[];let n=[...this.stablePoints,...this.tailPoints];this.options.simplify>0&&this.options.simplifyPhase==="input"&&(n=Wb(n,this.options.simplify));const i=n.length;if(i===0)return[];if(i===1){const w=n[0],T=this.getSize(t,w[2],0,i,0);if(T<.5)return[];const A=[];for(let I=0;I<=Math.PI*2;I+=Math.PI/16)A.push(pn(w,An(Ai([1,0,0],I),T)));return A.push(pn(w,An([1,0,0],this.getSize(t,w[2],0,i,0)))),A}if(i===2){const w=n[0],T=n[1],A=this.getSize(t,w[2],0,i,0),I=this.getSize(t,T[2],0,i,0);if(A<.5||I<.5)return[];const R=[],D=RR(w,[w[0],w[1]-100,w[2]],T);for(let L=D;L<=Math.PI+D;L+=Math.PI/16)R.push(pn(w,An(Ai([1,0,0],L),A)));for(let L=Math.PI+D;L<=Math.PI*2+D;L+=Math.PI/16)R.push(pn(T,An(Ai([1,0,0],L),I)));return R.push(R[0]),R}const r=[],s=[];let o=0,a=0,l=0,c=0;for(let w=1;w<i-1;w++){const T=n[w-1],A=n[w],I=n[w+1];let R=A[2];const D=Jf(T,A);c+=D,o=a+(D-a)*.2;const L=this.getSize(t,R,w,i,c);if(L===0){l=w+1;continue}const G=Qd(b1(T,A)),V=Qd(b1(I,A)),H=Ai(G,Math.PI/2),$=Ai(G,-Math.PI/2),j=Ai(V,Math.PI/2),X=Ai(V,-Math.PI/2),K=pn(A,An(H,L)),le=pn(A,An($,L)),we=pn(A,An(j,L)),he=pn(A,An(X,L)),Ve=pn(H,X),Ye=pn($,j),wt=pn(A,An(LR(Ve)===0?G:Qd(Ve),L)),st=pn(A,An(LR(Ye)===0?V:Qd(Ye),L)),zt=kR(RR(A,T,I)),en=Ml.constants.cornerDetectionMaxAngle/180*Math.PI*Ml.constants.cornerDetectionVariance(o);if(Math.abs(zt)<en){const Ae=Math.abs(kR(Math.PI-zt));if(Ae===0)continue;if(zt<0){s.push(le,st);for(let $e=0;$e<=Ae;$e+=Ae/4)r.push(pn(A,Ai(An(H,L),$e)));for(let $e=Ae;$e>=0;$e-=Ae/4)s.push(pn(A,Ai(An(H,L),$e)));s.push(st,we)}else{r.push(K,wt);for(let $e=0;$e<=Ae;$e+=Ae/4)s.push(pn(A,Ai(An(H,-L),-$e)));for(let $e=Ae;$e>=0;$e-=Ae/4)r.push(pn(A,Ai(An(H,-L),-$e)));r.push(wt,he)}}else r.push(wt),s.push(st);a=o}if(l>=i-2)if(this.options.keepHead){const w=n[i-1],T=[];for(let A=0;A<=Math.PI*2;A+=Math.PI/16)T.push(pn(w,An(Ai([1,0,0],A),this.options.size)));return T.push(pn(w,An([1,0,0],this.options.size))),T}else return[];const u=n[l],d=n[l+1],f=n[i-2],h=n[i-1],m=Qd(b1(d,u)),p=Qd(b1(f,h)),b=Ai(m,-Math.PI/2),E=Ai(p,Math.PI/2),y=this.getSize(t,u[2],0,i,0),v=[],_=this.options.keepHead?this.options.size:this.getSize(t,f[2],i-2,i,c),S=[];if(y>1){for(let w=0;w<=Math.PI;w+=Math.PI/16)v.unshift(pn(u,Ai(An(b,y),-w)));v.unshift(pn(u,An(b,-y)))}else v.push(u);for(let w=0;w<=Math.PI*3;w+=Math.PI/16)S.push(pn(h,Ai(An(E,-_),-w)));const M=[...v,...r,...S.reverse(),...s.reverse()];return v.length>0&&M.push(v[0]),this.options.simplify>0&&this.options.simplifyPhase==="output"?Wb(M,this.options.simplify):M}};Ml.defaults={size:2,streamline:.45,simplify:.1,simplifyPhase:"output",keepHead:!1,sizeMapping:()=>1},Ml.constants={cornerDetectionMaxAngle:75,cornerDetectionVariance:t=>t>35?.5:1,maxTailLength:50};let Kb=Ml;class d4{constructor(t,n,i){F(this,"currentTrail");F(this,"pastTrails",[]);F(this,"container");F(this,"trailElement");this.animationFrameHandler=t,this.app=n,this.options=i,this.animationFrameHandler.register(this,this.onFrame.bind(this)),this.trailElement=document.createElementNS(at,"path")}get hasCurrentTrail(){return!!this.currentTrail}hasLastPoint(t,n){if(this.currentTrail){const i=this.currentTrail.originalPoints.length;return this.currentTrail.originalPoints[i-1][0]===t&&this.currentTrail.originalPoints[i-1][1]===n}return!1}start(t){t&&(this.container=t),this.trailElement.parentNode!==this.container&&this.container&&this.container.appendChild(this.trailElement),this.animationFrameHandler.start(this)}stop(){var t;this.animationFrameHandler.stop(this),this.trailElement.parentNode===this.container&&((t=this.container)==null||t.removeChild(this.trailElement))}startPath(t,n){this.currentTrail=new Kb(this.options),this.currentTrail.addPoint([t,n,performance.now()]),this.update()}addPointToPath(t,n){this.currentTrail&&(this.currentTrail.addPoint([t,n,performance.now()]),this.update())}endPath(){this.currentTrail&&(this.currentTrail.close(),this.currentTrail.options.keepHead=!1,this.pastTrails.push(this.currentTrail),this.currentTrail=void 0,this.update())}update(){this.start()}onFrame(){const t=[];for(const i of this.pastTrails)t.push(this.drawTrail(i,this.app.state));if(this.currentTrail){const i=this.drawTrail(this.currentTrail,this.app.state);t.push(i)}this.pastTrails=this.pastTrails.filter(i=>i.getStrokeOutline().length!==0),t.length===0&&this.stop();const n=t.join(" ").trim();this.trailElement.setAttribute("d",n),this.trailElement.setAttribute("fill",(this.options.fill??(()=>"black"))(this))}drawTrail(t,n){const i=t.getStrokeOutline(t.options.size/n.zoom.value).map(([r,s])=>{const o=Os({sceneX:r,sceneY:s},n);return[o.x,o.y]});return Die(i,!0)}}class V8e{constructor(t,n){F(this,"localTrail");F(this,"collabTrails",new Map);F(this,"container");this.animationFrameHandler=t,this.app=n,this.animationFrameHandler.register(this,this.onFrame.bind(this)),this.localTrail=new d4(t,n,{...this.getTrailOptions(),fill:()=>kne})}getTrailOptions(){return{simplify:0,streamline:.4,sizeMapping:t=>{const r=Math.max(0,1-(performance.now()-t.pressure)/1e3),s=(50-Math.min(50,t.totalLength-t.currentIndex))/50;return Math.min(Du(s),Du(r))}}}startPath(t,n){this.localTrail.startPath(t,n)}addPointToPath(t,n){this.localTrail.addPointToPath(t,n)}endPath(){this.localTrail.endPath()}start(t){this.container=t,this.animationFrameHandler.start(this),this.localTrail.start(t)}stop(){this.animationFrameHandler.stop(this),this.localTrail.stop()}onFrame(){this.updateCollabTrails()}updateCollabTrails(){if(!(!this.container||this.app.state.collaborators.size===0)){for(const[t,n]of this.app.state.collaborators.entries()){let i;this.collabTrails.has(t)?i=this.collabTrails.get(t):(i=new d4(this.animationFrameHandler,this.app,{...this.getTrailOptions(),fill:()=>{var r;return((r=n.pointer)==null?void 0:r.laserColor)||O5(t,n)}}),i.start(this.container),this.collabTrails.set(t,i)),n.pointer&&n.pointer.tool==="laser"&&(n.button==="down"&&!i.hasCurrentTrail&&i.startPath(n.pointer.x,n.pointer.y),n.button==="down"&&i.hasCurrentTrail&&!i.hasLastPoint(n.pointer.x,n.pointer.y)&&i.addPointToPath(n.pointer.x,n.pointer.y),n.button==="up"&&i.hasCurrentTrail&&(i.addPointToPath(n.pointer.x,n.pointer.y),i.endPath()))}for(const t of this.collabTrails.keys())this.app.state.collaborators.has(t)||(this.collabTrails.get(t).stop(),this.collabTrails.delete(t))}}}const rn=e=>t=>{ii.unstable_batchedUpdates(e,t)},p7=e=>Qh(t=>{ii.unstable_batchedUpdates(e,t)}),Q_=(()=>{let e;try{const n=N.version.split(".");e=Number(n[0])>17}catch{e=!1}let t=!1;return()=>window.EXCALIDRAW_THROTTLE_RENDER===!0?e?!0:(t||(t=!0,console.warn("Excalidraw: render throttling is disabled on React versions < 18.")),!1):!1})(),$8e=(e,t,n,i,r,s)=>{const{zoom:o}=i,a=180*n/Math.PI;let l=e*(o.value-1)/2,c=t*(o.value-1)/2;return e>r&&o.value!==1&&(l=r*(o.value-1)/2),t>s&&o.value!==1&&(c=s*(o.value-1)/2),`translate(${l}px, ${c}px) scale(${o.value}) rotate(${a}deg)`},G8e=({id:e,onChange:t,onSubmit:n,getViewportCoords:i,element:r,canvas:s,excalidrawContainer:o,app:a,autoSelect:l=!0})=>{const c=(V,H)=>{if(!H.style.fontFamily||!H.style.fontSize)return!1;const $=H.style.fontFamily.replace(/"/g,"");return Om({fontFamily:V.fontFamily})!==$||`${V.fontSize}px`!==H.style.fontSize},u=()=>{var K;const V=a.state,H=(K=Vo.getScene(r))==null?void 0:K.getElement(e);if(!H)return;const{textAlign:$,verticalAlign:j}=H,X=a.scene.getNonDeletedElementsMap();if(H&&ue(H)){let le=H.x,we=H.y;const he=ui(H,a.scene.getNonDeletedElementsMap());let Ve=H.width,Ye=H.height,wt=H.width,st=H.height;if(he&&H.containerId){if(ze(he)){const Gr=ce.getBoundTextElementPosition(he,H,X);le=Gr.x,we=Gr.y}const co=c(H,d);let uo;if(co?uo=pb(he.id,he.height):(uo=yh[he.id],uo||(uo=pb(he.id,he.height))),wt=ja(he,H),st=Z6(he,H),!ze(he)&&Ye>st){const Gr=nd(Ye,he.type);ee(he,{height:Gr});return}else if(!ze(he)&&he.height>uo.height&&Ye<st){const Gr=nd(Ye,he.type);ee(he,{height:Gr})}else{const{y:Gr}=K6(he,H,X);we=Gr}}const[zt,en]=i(le,we),Ae=d.selectionStart,$e=d.selectionEnd,Ht=d.value.length;if(Ae===$e&&$e!==Ht){const co=Ht-$e;d.selectionStart=d.value.length-co,d.selectionEnd=d.value.length-co}he?Ve+=.5:(wt=(V.width-8-zt)/V.zoom.value,Ve=Math.min(Ve,wt)),Ye*=1.05;const vs=Ct(H),qo=(V.height-en)/V.zoom.value;Object.assign(d.style,{font:vs,lineHeight:H.lineHeight,width:`${Ve}px`,height:`${Ye}px`,left:`${zt}px`,top:`${en}px`,transform:$8e(Ve,Ye,Use(H,he),V,wt,qo),textAlign:$,verticalAlign:j,color:H.strokeColor,opacity:H.opacity/100,filter:"var(--theme-filter)",maxHeight:`${qo}px`}),d.scrollTop=0,ee(H,{x:le,y:we})}},d=document.createElement("textarea");d.dir="auto",d.tabIndex=0,d.dataset.type="wysiwyg",d.wrap="off",d.classList.add("excalidraw-wysiwyg");let f="pre",h="normal";(jt(r)||!r.autoResize)&&(f="pre-wrap",h="break-word"),Object.assign(d.style,{position:"absolute",display:"inline-block",minHeight:"1em",backfaceVisibility:"hidden",margin:0,padding:0,border:0,outline:0,resize:"none",background:"transparent",overflow:"hidden",zIndex:"var(--zIndex-wysiwyg)",wordBreak:h,whiteSpace:f,overflowWrap:"break-word",boxSizing:"content-box"}),d.value=r.originalText,u(),t&&(d.onpaste=async V=>{const H=await w$(V,!0);if(!H.text)return;const $=Eh(H.text);if(!$)return;const j=ui(r,a.scene.getNonDeletedElementsMap()),X=Ct({fontSize:a.state.currentItemFontSize,fontFamily:a.state.currentItemFontFamily});if(j){const K=Pe(j,a.scene.getNonDeletedElementsMap()),le=Id(`${d.value}${$}`,X,ja(j,K)),we=S9(le,X);d.style.width=`${we}px`}},d.oninput=()=>{const V=Eh(d.value);if(d.value!==V){const H=d.selectionStart;d.value=V,d.selectionStart=H,d.selectionEnd=H}t(d.value)}),d.onkeydown=V=>{if(!V.shiftKey&&$A.keyTest(V))V.preventDefault(),a.actionManager.executeAction($A),u();else if(!V.shiftKey&&GA.keyTest(V))V.preventDefault(),a.actionManager.executeAction(GA),u();else if(!V.shiftKey&&XA.keyTest(V))V.preventDefault(),a.actionManager.executeAction(XA),u();else if(BA.keyTest(V))a.actionManager.executeAction(BA);else if(zA.keyTest(V))a.actionManager.executeAction(zA);else if(V.key===z.ESCAPE)V.preventDefault(),S=!0,M();else if(Xb.keyTest(V))V.preventDefault(),M(),a.actionManager.executeAction(Xb);else if(V.key===z.ENTER&&V[z.CTRL_OR_CMD]){if(V.preventDefault(),V.isComposing||V.keyCode===229)return;S=!0,M()}else if(V.key===z.TAB||V[z.CTRL_OR_CMD]&&(V.code===Je.BRACKET_LEFT||V.code===Je.BRACKET_RIGHT)){if(V.preventDefault(),V.isComposing)return;V.shiftKey||V.code===Je.BRACKET_LEFT?y():E(),d.dispatchEvent(new Event("input"))}};const m=4,p=" ".repeat(m),b=new RegExp(`^ {1,${m}}`),E=()=>{const{selectionStart:V,selectionEnd:H}=d,$=v();let j=d.value;$.forEach(X=>{const K=j.slice(0,X),le=j.slice(X);j=`${K}${p}${le}`}),d.value=j,d.selectionStart=V+m,d.selectionEnd=H+m*$.length},y=()=>{const{selectionStart:V,selectionEnd:H}=d,$=v(),j=[];let X=d.value;$.forEach(K=>{const le=X.slice(K,K+m).match(b);if(le){const we=X.slice(0,K),he=X.slice(K+le[0].length);X=`${we}${he}`,j.push(K)}}),d.value=X,j.length&&(V>j[j.length-1]?d.selectionStart=Math.max(V-m,j[j.length-1]):d.selectionStart=V,d.selectionEnd=Math.max(d.selectionStart,H-m*j.length))},v=()=>{let{selectionStart:V,selectionEnd:H,value:$}=d;const j=$.slice(0,V).match(/[^\n]*$/)[0].length;return V=V-j,$.slice(V,H).split(`
`).reduce((K,le,we,he)=>K.concat(we?K[we-1]+he[we-1].length+1:V),[]).reverse()},_=V=>{V.target instanceof HTMLCanvasElement&&(V.preventDefault(),V.stopPropagation())};let S=!1;const M=()=>{var $,j;if(L)return;L=!0,w();const V=($=Vo.getScene(r))==null?void 0:$.getElement(r.id);if(!V)return;const H=ui(V,a.scene.getNonDeletedElementsMap());if(H){if(d.value.trim()){const X=_c(H);!X||X!==r.id?ee(H,{boundElements:(H.boundElements||[]).concat({type:"text",id:r.id})}):ze(H)&&Gm(H)}else ee(H,{boundElements:(j=H.boundElements)==null?void 0:j.filter(X=>!ue(X))});Ji(V,H,a.scene.getNonDeletedElementsMap())}n({viaKeyboard:S,nextOriginalText:d.value})},w=()=>{d.onblur=null,d.oninput=null,d.onkeydown=null,G&&G.disconnect(),window.removeEventListener("resize",u),window.removeEventListener("wheel",_,!0),window.removeEventListener("pointerdown",I),window.removeEventListener("pointerup",T),window.removeEventListener("blur",M),window.removeEventListener("beforeunload",M),R(),D(),d.remove()},T=V=>{window.removeEventListener("pointerup",T);const H=V==null?void 0:V.target,$=H instanceof HTMLElement&&H.classList.contains("properties-trigger");setTimeout(()=>{d.onblur=M,$||d.focus()})},A=()=>{d.onblur=null,window.addEventListener("pointerup",T),window.addEventListener("blur",M)},I=V=>{const H=V==null?void 0:V.target;if(V.button===vl.WHEEL){H instanceof HTMLTextAreaElement&&(V.preventDefault(),a.handleCanvasPanUsingWheelOrSpaceDrag(V)),A();return}const $=H instanceof HTMLElement&&H.classList.contains("properties-trigger");(V.target instanceof HTMLElement||V.target instanceof SVGElement)&&V.target.closest(`.${gh.SHAPE_ACTIONS_MENU}, .${gh.ZOOM_ACTIONS}`)&&!au(V.target)||$?A():V.target instanceof HTMLCanvasElement&&requestAnimationFrame(()=>{M()})},R=a.scene.onUpdate(()=>{var H;u(),!!((H=document.activeElement)!=null&&H.closest(".properties-content"))||d.focus()}),D=a.onScrollChangeEmitter.on(()=>{u()});let L=!1;l&&d.select(),T();let G=null;s&&"ResizeObserver"in window?(G=new window.ResizeObserver(()=>{u()}),G.observe(s)):window.addEventListener("resize",u),d.onpointerdown=V=>V.stopPropagation(),requestAnimationFrame(()=>{window.addEventListener("pointerdown",I,{capture:!0})}),window.addEventListener("beforeunload",M),o==null||o.querySelector(".excalidraw-textEditorContainer").appendChild(d)},X8e=e=>{const t=["flowchart","graph","sequenceDiagram","classDiagram","stateDiagram","stateDiagram-v2","erDiagram","journey","gantt","pie","quadrantChart","requirementDiagram","gitGraph","C4Context","mindmap","timeline","zenuml","sankey","xychart","block"];return new RegExp(`^(?:%%{.*?}%%[\\s\\n]*)?\\b(?:${t.map(i=>`\\s*${i}(-beta)?`).join("|")})\\b`).test(e.trim())},j8e=()=>P("div",{"data-testid":"brave-measure-text-error",children:[g("p",{children:g(gr,{i18nKey:"errors.brave_measure_text_error.line1",bold:e=>g("span",{style:{fontWeight:600},children:e})})}),g("p",{children:g(gr,{i18nKey:"errors.brave_measure_text_error.line2",bold:e=>g("span",{style:{fontWeight:600},children:e})})}),g("p",{children:g(gr,{i18nKey:"errors.brave_measure_text_error.line3",link:e=>g("a",{href:"http://docs.excalidraw.com/docs/@excalidraw/excalidraw/faq#turning-off-aggresive-block-fingerprinting-in-brave-browser",children:e})})}),g("p",{children:g(gr,{i18nKey:"errors.brave_measure_text_error.line4",issueLink:e=>g("a",{href:"https://github.com/excalidraw/excalidraw/issues/new",children:e}),discordLink:e=>P("a",{href:"https://discord.gg/UexuTaE",children:[e,"."]})})})]}),Y8e=({children:e,left:t,top:n,onCloseRequest:i,fitInViewport:r=!1,offsetLeft:s=0,offsetTop:o=0,viewportWidth:a=window.innerWidth,viewportHeight:l=window.innerHeight})=>{const c=N.useRef(null);N.useEffect(()=>{const d=c.current;if(!d)return;d.contains(document.activeElement)||d.focus();const f=h=>{var m,p,b;if(h.key===z.TAB){const E=iE(d),{activeElement:y}=document,v=E.findIndex(_=>_===y);y===d?(h.shiftKey?(m=E[E.length-1])==null||m.focus():E[0].focus(),h.preventDefault(),h.stopImmediatePropagation()):v===0&&h.shiftKey?((p=E[E.length-1])==null||p.focus(),h.preventDefault(),h.stopImmediatePropagation()):v===E.length-1&&!h.shiftKey&&((b=E[0])==null||b.focus(),h.preventDefault(),h.stopImmediatePropagation())}};return d.addEventListener("keydown",f),()=>d.removeEventListener("keydown",f)},[]);const u=N.useRef(null);return N.useLayoutEffect(()=>{var d,f;if(r&&c.current&&n!=null&&t!=null){const h=c.current,{width:m,height:p}=h.getBoundingClientRect();if(((d=u.current)==null?void 0:d.top)===n&&((f=u.current)==null?void 0:f.left)===t)return;u.current={top:n,left:t},m>=a?(h.style.width=`${a}px`,h.style.left="0px",h.style.overflowX="scroll"):t+m-s>a?h.style.left=`${a-m-10}px`:h.style.left=`${t}px`,p>=l?(h.style.height=`${l-20}px`,h.style.top="10px",h.style.overflowY="scroll"):n+p-o>l?h.style.top=`${l-p}px`:h.style.top=`${n}px`}},[n,t,r,a,l,s,o]),N.useEffect(()=>{if(i){const d=f=>{var h;(h=c.current)!=null&&h.contains(f.target)||ii.unstable_batchedUpdates(()=>i(f))};return document.addEventListener("pointerdown",d,!1),()=>document.removeEventListener("pointerdown",d,!1)}},[i]),g("div",{className:"popover",ref:c,tabIndex:-1,children:e})},Vn="separator",W8e=se.memo(({actionManager:e,items:t,top:n,left:i,onClose:r})=>{const s=np(),o=$5(),a=t.reduce((l,c)=>(c&&(c===Vn||!c.predicate||c.predicate(o,s,e.app.props,e.app))&&l.push(c),l),[]);return g(Y8e,{onCloseRequest:()=>{r()},top:n,left:i,fitInViewport:!0,offsetLeft:s.offsetLeft,offsetTop:s.offsetTop,viewportWidth:s.width,viewportHeight:s.height,children:g("ul",{className:"context-menu",onContextMenu:l=>l.preventDefault(),children:a.map((l,c)=>{var f;if(l===Vn)return!a[c-1]||a[c-1]===Vn?null:g("hr",{className:"context-menu-item-separator"},c);const u=l.name;let d="";return l.label&&(typeof l.label=="function"?d=k(l.label(o,s,e.app)):d=k(l.label)),g("li",{"data-testid":u,onClick:()=>{r(()=>{e.executeAction(l,"contextMenu")})},children:P("button",{type:"button",className:me("context-menu-item",{dangerous:u==="deleteSelectedElements",checkmark:(f=l.checked)==null?void 0:f.call(l,s)}),children:[g("div",{className:"context-menu-item__label",children:d}),g("kbd",{className:"context-menu-item__shortcut",children:u?zi(u):""})]})},c)})})})}),K8e=({height:e,width:t,userToFollow:n,onDisconnect:i})=>g("div",{className:"follow-mode",style:{width:t,height:e},children:P("div",{className:"follow-mode__badge",children:[P("div",{className:"follow-mode__badge__label",children:["Following"," ",g("span",{className:"follow-mode__badge__username",title:n.username,children:n.username})]}),g("button",{type:"button",onClick:i,className:"follow-mode__disconnect-btn",children:Ad})]})}),yG=({delay:e,theme:t})=>{const[n,i]=N.useState(!!e);return N.useEffect(()=>{if(!e)return;const r=setTimeout(()=>{i(!1)},e);return()=>clearTimeout(r)},[e]),n?null:P("div",{className:me("LoadingMessage",{"LoadingMessage--dark":t===xe.DARK}),children:[g("div",{children:g(Qa,{})}),g("div",{className:"LoadingMessage-text",children:k("labels.loadingScene")})]})},Z8e="medium",DR={CHECKED:t_,UNCHECKED:a5},EG=e=>P("label",{className:me("ToolIcon ToolIcon__lock",`ToolIcon_size_${Z8e}`,{"is-mobile":e.isMobile}),title:`${e.title} — Q`,children:[g("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:e.name,onChange:e.onChange,checked:e.checked,"aria-label":e.title,"data-testid":"toolbar-lock"}),g("div",{className:"ToolIcon__icon",children:e.checked?DR.CHECKED:DR.UNCHECKED})]}),vG=({children:e,side:t,className:n})=>g("div",{className:me("FixedSideContainer",`FixedSideContainer_side_${t}`,n),children:e}),_G=e=>g(Ze,{className:me("Shape",{fillable:!1}),type:"radio",icon:Az,name:"editor-current-shape",checked:e.checked,title:`${e.title} — H`,keyBindingLabel:e.isMobile?void 0:z.H.toLocaleUpperCase(),"aria-label":`${e.title} — H`,"aria-keyshortcuts":z.H,"data-testid":"toolbar-hand",onChange:()=>{var t;return(t=e.onChange)==null?void 0:t.call(e)}}),q8e=({appState:e,isMobile:t,device:n,app:i})=>{var u,d;const{activeTool:r,isResizing:s,isRotating:o,lastPointerDownWith:a}=e,l=e.multiElement!==null;if(((u=e.openSidebar)==null?void 0:u.name)===fs.name&&e.openSidebar.tab===ku&&((d=e.searchMatches)!=null&&d.length))return k("hints.dismissSearch");if(e.openSidebar&&!n.editor.canFitSidebar)return null;if(Eo(e))return k("hints.eraserRevert");if(r.type==="arrow"||r.type==="line")return l?k("hints.linearElementMulti"):r.type==="arrow"?k("hints.arrowTool",{arrowShortcut:Q("A")}):k("hints.linearElement");if(r.type==="freedraw")return k("hints.freeDraw");if(r.type==="text")return k("hints.text");if(r.type==="embeddable")return k("hints.embeddable");if(e.activeTool.type==="image"&&e.pendingImageElementId)return k("hints.placeImage");const c=i.scene.getSelectedElements(e);if(s&&a==="mouse"&&c.length===1){const f=c[0];return ke(f)&&f.points.length===2?k("hints.lockAngle"):it(f)?k("hints.resizeImage"):k("hints.resize")}if(o&&a==="mouse")return k("hints.rotate");if(c.length===1&&ue(c[0]))return k("hints.text_selected");if(e.editingTextElement)return k("hints.text_editing");if(e.croppingElementId)return k("hints.leaveCropEditor");if(c.length===1&&it(c[0]))return k("hints.enterCropEditor");if(r.type==="selection"){if(e.selectionElement&&!c.length&&!e.editingTextElement&&!e.editingLinearElement)return k("hints.deepBoxSelect");if(rm(i)&&e.selectedElementsAreBeingDragged)return k("hints.disableSnapping");if(!c.length&&!t)return k("hints.canvasPanning");if(c.length===1){if(ke(c[0]))return e.editingLinearElement?e.editingLinearElement.selectedPointsIndices?k("hints.lineEditor_pointSelected"):k("hints.lineEditor_nothingSelected"):k("hints.lineEditor_info");if(!e.newElement&&!e.selectedElementsAreBeingDragged&&Nu(c[0]))return Y6(c[0])?Qae(c[0],i.scene.getNonDeletedElementsMap())?[k("hints.bindTextToElement"),k("hints.createFlowchart")]:[k("hints.bindTextToElement"),k("hints.createFlowchart")]:k("hints.bindTextToElement")}}return null},wG=({appState:e,isMobile:t,device:n,app:i})=>{const r=q8e({appState:e,isMobile:t,device:n,app:i});if(!r)return null;const s=Array.isArray(r)?r.map(o=>Q(o).replace(/\. ?$/,"")).join(". "):Q(r);return g("div",{className:"HintViewer",children:g("span",{children:s})})},Q8e="medium",TG=e=>e.penDetected?P("label",{className:me("ToolIcon ToolIcon__penMode",`ToolIcon_size_${Q8e}`,{"is-mobile":e.isMobile}),title:`${e.title}`,children:[g("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:e.name,onChange:e.onChange,checked:e.checked,"aria-label":e.title}),g("div",{className:"ToolIcon__icon",children:Jle})]}):null,om=({heading:e,children:t,...n})=>{const{id:i}=Zo(),r=g("h2",{className:"visually-hidden",id:`${i}-${e}-title`,children:k(`headings.${e}`)});return g("section",{...n,"aria-labelledby":`${i}-${e}-title`,children:typeof t=="function"?t(r):P(ge,{children:[r,t]})})},J8e=({appState:e,elements:t,actionManager:n,setAppState:i,onLockToggle:r,onHandToolToggle:s,onPenModeToggle:o,renderTopRightUI:a,renderCustomStats:l,renderSidebars:c,device:u,renderWelcomeScreen:d,UIOptions:f,app:h})=>{var v,_;const{WelcomeScreenCenterTunnel:m,MainMenuTunnel:p,DefaultSidebarTriggerTunnel:b}=rr(),E=()=>P(vG,{side:"top",className:"App-top-bar",children:[d&&g(m.Out,{}),g(om,{heading:"shapes",children:S=>{var M;return g(ls.Col,{gap:4,align:"center",children:P(ls.Row,{gap:1,className:"App-toolbar-container",children:[P(js,{padding:1,className:"App-toolbar App-toolbar--mobile",children:[S,g(ls.Row,{gap:1,children:g(aG,{appState:e,activeTool:e.activeTool,UIOptions:f,app:h})})]}),a&&a(!0,e),P("div",{className:"mobile-misc-tools-container",children:[!e.viewModeEnabled&&((M=e.openDialog)==null?void 0:M.name)!=="elementLinkSelector"&&g(b.Out,{}),g(TG,{checked:e.penMode,onChange:()=>o(null),title:k("toolBar.penMode"),isMobile:!0,penDetected:e.penDetected}),g(EG,{checked:e.activeTool.locked,onChange:r,title:k("toolBar.lock"),isMobile:!0}),g(_G,{checked:Ih(e),onChange:()=>s(),title:k("toolBar.hand"),isMobile:!0})]})]})})}}),g(wG,{appState:e,isMobile:!0,device:u,app:h})]}),y=()=>{var S;return e.viewModeEnabled||((S=e.openDialog)==null?void 0:S.name)==="elementLinkSelector"?g("div",{className:"App-toolbar-content",children:g(p.Out,{})}):P("div",{className:"App-toolbar-content",children:[g(p.Out,{}),n.renderAction("toggleEditMenu"),n.renderAction(e.multiElement?"finalize":"duplicateSelection"),n.renderAction("deleteSelectedElements"),P("div",{children:[n.renderAction("undo"),n.renderAction("redo")]})]})};return P(ge,{children:[c(),!e.viewModeEnabled&&((v=e.openDialog)==null?void 0:v.name)!=="elementLinkSelector"&&E(),g("div",{className:"App-bottom-bar",style:{marginBottom:Xl+_o*2,marginLeft:Xl+_o*2,marginRight:Xl+_o*2},children:P(js,{padding:0,children:[e.openMenu==="shape"&&!e.viewModeEnabled&&((_=e.openDialog)==null?void 0:_.name)!=="elementLinkSelector"&&X_(e,t)?g(om,{className:"App-mobile-menu",heading:"selectedShapeActions",children:g(oG,{appState:e,elementsMap:h.scene.getNonDeletedElementsMap(),renderAction:n.renderAction,app:h})}):null,P("footer",{className:"App-toolbar",children:[y(),e.scrolledOutside&&!e.openMenu&&!e.openSidebar&&g("button",{type:"button",className:"scroll-back-to-content",onClick:()=>{i(S=>({...H0(t,S)}))},children:k("buttons.scrollBackToContent")})]})]})})]})},NR=e=>{const t=N.useRef(null),[n,i]=N.useState(null);return N.useLayoutEffect(()=>{if(!e.spreadsheet)return;const r=t6e(e.chartType,e.spreadsheet,0,0);i(r);let s;const o=t.current;return(async()=>{var a;s=await F_(r,{exportBackground:!1,viewBackgroundColor:ai.white},null,{skipInliningFonts:!0}),(a=s.querySelector(".style-fonts"))==null||a.remove(),o.replaceChildren(),o.appendChild(s),e.selected&&o.parentNode.focus()})(),()=>{o.replaceChildren()}},[e.spreadsheet,e.chartType,e.selected]),g("button",{type:"button",className:"ChartPreview",onClick:()=>{n&&e.onClick(e.chartType,n)},children:g("div",{ref:t})})},e7e=({setAppState:e,appState:t,onClose:n})=>{const{onInsertElements:i}=ao(),r=se.useCallback(()=>{n&&n()},[n]),s=(o,a)=>{i(a),ct("paste","chart",o),e({currentChartType:o,pasteDialog:{shown:!1,data:null}})};return g($r,{size:"small",onCloseRequest:r,title:k("labels.pasteCharts"),className:"PasteChartDialog",autofocus:!1,children:P("div",{className:"container",children:[g(NR,{chartType:"bar",spreadsheet:t.pasteDialog.data,selected:t.currentChartType==="bar",onClick:s}),g(NR,{chartType:"line",spreadsheet:t.pasteDialog.data,selected:t.currentChartType==="line",onClick:s})]})})},t7e=4,n7e=8,i7e=({shouldWrap:e,children:t,username:n})=>e?g(nl,{label:n||"Unknown user",children:t}):g(ge,{children:t}),U7=({actionManager:e,collaborator:t,socketId:n,withName:i=!1,shouldWrapWithTooltip:r=!1,isBeingFollowed:s})=>{const o={socketId:n,collaborator:t,withName:i,isBeingFollowed:s},a=e.renderAction("goToCollaborator",o);return g(i7e,{username:t.username,shouldWrap:r,children:a},n)},r7e=["avatarUrl","id","socketId","username","isInCall","isSpeaking","isMuted"],SG=se.memo(({className:e,mobile:t,collaborators:n,userToFollow:i})=>{const r=vr(),s=new Map;n.forEach((p,b)=>{const E=p.id||b;s.set(E,{...p,socketId:b})});const o=Array.from(s.values()).filter(p=>{var b;return(b=p.username)==null?void 0:b.trim()}),[a,l]=se.useState(""),c=o.filter(p=>{var b;return(b=p.username)==null?void 0:b.toLowerCase().includes(a)}),u=se.useRef(null);N.useLayoutEffect(()=>{if(u.current){const p=E=>{const y=Math.max(1,Math.min(8,Math.floor(E/38)));f(y)};if(p(u.current.clientWidth),!K3)return;const b=new ResizeObserver(E=>{for(const y of E){const{width:v}=y.contentRect;p(v)}});return b.observe(u.current),()=>{b.disconnect()}}},[]);const[d,f]=se.useState(t7e),m=o.slice(0,d-1).map(p=>U7({actionManager:r,collaborator:p,socketId:p.socketId,shouldWrapWithTooltip:!0,isBeingFollowed:p.socketId===i}));return t?g("div",{className:me("UserList UserList_mobile",e),children:o.map(p=>U7({actionManager:r,collaborator:p,socketId:p.socketId,shouldWrapWithTooltip:!0,isBeingFollowed:p.socketId===i}))}):g("div",{className:"UserList__wrapper",ref:u,children:P("div",{className:me("UserList",e),style:{"--max-avatars":d},children:[m,o.length>d-1&&P(p5,{children:[P(U5,{className:"UserList__more",children:["+",o.length-d+1]}),g(__,{style:{zIndex:2,width:"15rem",textAlign:"left"},align:"end",sideOffset:10,children:P(js,{padding:2,children:[o.length>=n7e&&g(ZH,{placeholder:k("quickSearch.placeholder"),onChange:l}),g(qH,{className:"dropdown-menu UserList__collaborators",placeholder:k("userList.empty"),children:c.length>0?[g("div",{className:"hint",children:k("userList.hint.text")}),c.map(p=>U7({actionManager:r,collaborator:p,socketId:p.socketId,withName:!0,isBeingFollowed:p.socketId===i}))]:[]}),g(GH,{width:20,height:10,style:{fill:"var(--popup-bg-color)",filter:"drop-shadow(rgba(0, 0, 0, 0.05) 0px 3px 2px)"}})]})})]})]})})},(e,t)=>{if(e.collaborators.size!==t.collaborators.size||e.mobile!==t.mobile||e.className!==t.className||e.userToFollow!==t.userToFollow)return!1;const n=t.collaborators.keys();for(const[i,r]of e.collaborators){const s=t.collaborators.get(i);if(!s||i!==n.next().value||!_i(r,s,r7e))return!1}return!0}),s7e=e=>g("button",{className:"help-icon",onClick:e.onClick,type:"button",title:`${k("helpDialog.title")} — ?`,"aria-label":k("helpDialog.title"),children:n_}),IG=({appState:e,actionManager:t,showExitZenModeBtn:n,renderWelcomeScreen:i})=>{const{FooterCenterTunnel:r,WelcomeScreenHelpHintTunnel:s}=rr(),o=qn(),a=!e.viewModeEnabled&&e.multiElement&&o.isTouchScreen;return P("footer",{role:"contentinfo",className:"layer-ui__wrapper__footer App-menu App-menu_bottom",children:[g("div",{className:me("layer-ui__wrapper__footer-left zen-mode-transition",{"layer-ui__wrapper__footer-left--transition-left":e.zenModeEnabled}),children:g(ls.Col,{gap:2,children:P(om,{heading:"canvasActions",children:[g(Oye,{renderAction:t.renderAction,zoom:e.zoom}),!e.viewModeEnabled&&g(Pye,{renderAction:t.renderAction,className:me("zen-mode-transition",{"layer-ui__wrapper__footer-left--transition-bottom":e.zenModeEnabled})}),a&&g(Bye,{renderAction:t.renderAction,className:me("zen-mode-transition",{"layer-ui__wrapper__footer-left--transition-left":e.zenModeEnabled})})]})})}),g(r.Out,{}),g("div",{className:me("layer-ui__wrapper__footer-right zen-mode-transition",{"transition-right":e.zenModeEnabled}),children:P("div",{style:{position:"relative"},children:[i&&g(s.Out,{}),g(s7e,{onClick:()=>t.executeAction(j_)})]})}),g(Fye,{actionManager:t,showExitZenModeBtn:n})]})};IG.displayName="Footer";const xG=se.createContext({}),CG=({children:e,className:t})=>{const n=qn(),i=N.useContext(xG),r=!!(n.editor.canFitSidebar&&i.shouldRenderDockButton);return P("div",{className:me("sidebar__header",t),"data-testid":"sidebar-header",children:[e,P("div",{className:"sidebar__header__buttons",children:[r&&g(nl,{label:k("labels.sidebarLock"),children:g(hd,{onSelect:()=>{var s;return(s=i.onDock)==null?void 0:s.call(i,!i.docked)},selected:!!i.docked,className:"sidebar__dock","data-testid":"sidebar-dock","aria-label":k("labels.sidebarLock"),children:$le})}),g(hd,{"data-testid":"sidebar-close",className:"sidebar__close",onSelect:i.onCloseRequest,"aria-label":k("buttons.close"),children:Ad})]})]})};CG.displayName="SidebarHeader";function o7e(e){const t=e+"CollectionProvider",[n,i]=Wm(t),[r,s]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=h=>{const{scope:m,children:p}=h,b=se.useRef(null),E=se.useRef(new Map).current;return g(r,{scope:m,itemMap:E,collectionRef:b,children:p})};o.displayName=t;const a=e+"CollectionSlot",l=se.forwardRef((h,m)=>{const{scope:p,children:b}=h,E=s(a,p),y=no(m,E.collectionRef);return g($0,{ref:y,children:b})});l.displayName=a;const c=e+"CollectionItemSlot",u="data-radix-collection-item",d=se.forwardRef((h,m)=>{const{scope:p,children:b,...E}=h,y=se.useRef(null),v=no(m,y),_=s(c,p);return se.useEffect(()=>(_.itemMap.set(y,{ref:y,...E}),()=>void _.itemMap.delete(y))),g($0,{[u]:"",ref:v,children:b})});d.displayName=c;function f(h){const m=s(e+"CollectionConsumer",h);return se.useCallback(()=>{const b=m.collectionRef.current;if(!b)return[];const E=Array.from(b.querySelectorAll(`[${u}]`));return Array.from(m.itemMap.values()).sort((_,S)=>E.indexOf(_.ref.current)-E.indexOf(S.ref.current))},[m.collectionRef,m.itemMap])}return[{Provider:o,Slot:l,ItemSlot:d},f,i]}var a7e=N.createContext(void 0);function AG(e){const t=N.useContext(a7e);return e||t||"ltr"}var b7="rovingFocusGroup.onEntryFocus",l7e={bubbles:!1,cancelable:!0},V5="RovingFocusGroup",[f4,MG,c7e]=o7e(V5),[u7e,RG]=Wm(V5,[c7e]),[d7e,f7e]=u7e(V5),kG=N.forwardRef((e,t)=>g(f4.Provider,{scope:e.__scopeRovingFocusGroup,children:g(f4.Slot,{scope:e.__scopeRovingFocusGroup,children:g(h7e,{...e,ref:t})})}));kG.displayName=V5;var h7e=N.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:i,loop:r=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=e,f=N.useRef(null),h=no(t,f),m=AG(s),[p=null,b]=y_({prop:o,defaultProp:a,onChange:l}),[E,y]=N.useState(!1),v=Ja(c),_=MG(n),S=N.useRef(!1),[M,w]=N.useState(0);return N.useEffect(()=>{const T=f.current;if(T)return T.addEventListener(b7,v),()=>T.removeEventListener(b7,v)},[v]),g(d7e,{scope:n,orientation:i,dir:m,loop:r,currentTabStopId:p,onItemFocus:N.useCallback(T=>b(T),[b]),onItemShiftTab:N.useCallback(()=>y(!0),[]),onFocusableItemAdd:N.useCallback(()=>w(T=>T+1),[]),onFocusableItemRemove:N.useCallback(()=>w(T=>T-1),[]),children:g(ir.div,{tabIndex:E||M===0?-1:0,"data-orientation":i,...d,ref:h,style:{outline:"none",...e.style},onMouseDown:Ti(e.onMouseDown,()=>{S.current=!0}),onFocus:Ti(e.onFocus,T=>{const A=!S.current;if(T.target===T.currentTarget&&A&&!E){const I=new CustomEvent(b7,l7e);if(T.currentTarget.dispatchEvent(I),!I.defaultPrevented){const R=_().filter(H=>H.focusable),D=R.find(H=>H.active),L=R.find(H=>H.id===p),V=[D,L,...R].filter(Boolean).map(H=>H.ref.current);NG(V,u)}}S.current=!1}),onBlur:Ti(e.onBlur,()=>y(!1))})})}),LG="RovingFocusGroupItem",DG=N.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:i=!0,active:r=!1,tabStopId:s,...o}=e,a=c_(),l=s||a,c=f7e(LG,n),u=c.currentTabStopId===l,d=MG(n),{onFocusableItemAdd:f,onFocusableItemRemove:h}=c;return N.useEffect(()=>{if(i)return f(),()=>h()},[i,f,h]),g(f4.ItemSlot,{scope:n,id:l,focusable:i,active:r,children:g(ir.span,{tabIndex:u?0:-1,"data-orientation":c.orientation,...o,ref:t,onMouseDown:Ti(e.onMouseDown,m=>{i?c.onItemFocus(l):m.preventDefault()}),onFocus:Ti(e.onFocus,()=>c.onItemFocus(l)),onKeyDown:Ti(e.onKeyDown,m=>{if(m.key==="Tab"&&m.shiftKey){c.onItemShiftTab();return}if(m.target!==m.currentTarget)return;const p=p7e(m,c.orientation,c.dir);if(p!==void 0){if(m.metaKey||m.ctrlKey||m.altKey||m.shiftKey)return;m.preventDefault();let E=d().filter(y=>y.focusable).map(y=>y.ref.current);if(p==="last")E.reverse();else if(p==="prev"||p==="next"){p==="prev"&&E.reverse();const y=E.indexOf(m.currentTarget);E=c.loop?U7e(E,y+1):E.slice(y+1)}setTimeout(()=>NG(E))}})})})});DG.displayName=LG;var g7e={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function m7e(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function p7e(e,t,n){const i=m7e(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return g7e[i]}function NG(e,t=!1){const n=document.activeElement;for(const i of e)if(i===n||(i.focus({preventScroll:t}),document.activeElement!==n))return}function U7e(e,t){return e.map((n,i)=>e[(t+i)%e.length])}var b7e=kG,y7e=DG,J_="Tabs",[E7e,dIe]=Wm(J_,[RG]),OG=RG(),[v7e,ew]=E7e(J_),PG=N.forwardRef((e,t)=>{const{__scopeTabs:n,value:i,onValueChange:r,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=e,u=AG(a),[d,f]=y_({prop:i,onChange:r,defaultProp:s});return g(v7e,{scope:n,baseId:c_(),value:d,onValueChange:f,orientation:o,dir:u,activationMode:l,children:g(ir.div,{dir:u,"data-orientation":o,...c,ref:t})})});PG.displayName=J_;var FG="TabsList",BG=N.forwardRef((e,t)=>{const{__scopeTabs:n,loop:i=!0,...r}=e,s=ew(FG,n),o=OG(n);return g(b7e,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:i,children:g(ir.div,{role:"tablist","aria-orientation":s.orientation,...r,ref:t})})});BG.displayName=FG;var zG="TabsTrigger",HG=N.forwardRef((e,t)=>{const{__scopeTabs:n,value:i,disabled:r=!1,...s}=e,o=ew(zG,n),a=OG(n),l=GG(o.baseId,i),c=XG(o.baseId,i),u=i===o.value;return g(y7e,{asChild:!0,...a,focusable:!r,active:u,children:g(ir.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:l,...s,ref:t,onMouseDown:Ti(e.onMouseDown,d=>{!r&&d.button===0&&d.ctrlKey===!1?o.onValueChange(i):d.preventDefault()}),onKeyDown:Ti(e.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&o.onValueChange(i)}),onFocus:Ti(e.onFocus,()=>{const d=o.activationMode!=="manual";!u&&!r&&d&&o.onValueChange(i)})})})});HG.displayName=zG;var VG="TabsContent",$G=N.forwardRef((e,t)=>{const{__scopeTabs:n,value:i,forceMount:r,children:s,...o}=e,a=ew(VG,n),l=GG(a.baseId,i),c=XG(a.baseId,i),u=i===a.value,d=N.useRef(u);return N.useEffect(()=>{const f=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(f)},[]),g(g5,{present:r||u,children:({present:f})=>g(ir.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!f,id:c,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:d.current?"0s":void 0},children:f&&s})})});$G.displayName=VG;function GG(e,t){return`${e}-trigger-${t}`}function XG(e,t){return`${e}-content-${t}`}var jG=PG,YG=BG,WG=HG,KG=$G;const ZG=({children:e,tab:t,onSelect:n,...i})=>g(WG,{value:t,asChild:!0,onSelect:n,children:g("button",{type:"button",className:"excalidraw-button sidebar-tab-trigger",...i,children:e})});ZG.displayName="SidebarTabTrigger";const qG=({children:e,...t})=>g(YG,{className:"sidebar-triggers",...t,children:e});qG.displayName="SidebarTabTriggers";const QG=({name:e,tab:t,icon:n,title:i,children:r,onToggle:s,className:o,style:a})=>{var u;const l=zn(),c=fi();return P("label",{title:i,className:"sidebar-trigger__label-element",children:[g("input",{className:"ToolIcon_type_checkbox",type:"checkbox",onChange:d=>{var h;(h=document.querySelector(".layer-ui__wrapper"))==null||h.classList.remove("animate");const f=d.target.checked;l({openSidebar:f?{name:e,tab:t}:null}),s==null||s(f)},checked:((u=c.openSidebar)==null?void 0:u.name)===e,"aria-label":i,"aria-keyshortcuts":"0"}),P("div",{className:me("sidebar-trigger",o),style:a,children:[n&&g("div",{children:n}),r&&g("div",{className:"sidebar-trigger__label",children:r})]})]})};QG.displayName="SidebarTrigger";const JG=({children:e,...t})=>{const n=fi(),i=zn();if(!n.openSidebar)return null;const{name:r}=n.openSidebar;return g(jG,{className:"sidebar-tabs-root",value:n.openSidebar.tab,onValueChange:s=>i(o=>({...o,openSidebar:{...o.openSidebar,name:r,tab:s}})),...t,children:e})};JG.displayName="SidebarTabs";const eX=({tab:e,children:t,...n})=>g(KG,{...n,value:e,"data-testid":e,children:t});eX.displayName="SidebarTab";const tw=Jt(!1),tX=N.forwardRef(({name:e,children:t,onDock:n,docked:i,className:r,...s},o)=>{const a=zn(),l=s5(tw);N.useLayoutEffect(()=>(l(!!i),()=>{l(!1)}),[l,i]);const c=N.useRef({});c.current.onCloseRequest=()=>{a({openSidebar:null})},c.current.onDock=h=>n==null?void 0:n(h),c.current=GU(c.current,{docked:i,shouldRenderDockButton:!!n&&i!=null});const u=N.useRef(null);N.useImperativeHandle(o,()=>u.current);const d=qn(),f=N.useCallback(()=>{document.querySelector(".Dialog")||a({openSidebar:null})},[a]);return w_(u,N.useCallback(h=>{h.target.closest(".sidebar-trigger")||(!i||!d.editor.canFitSidebar)&&f()},[f,i,d.editor.canFitSidebar])),N.useEffect(()=>{const h=m=>{m.key===z.ESCAPE&&(!i||!d.editor.canFitSidebar)&&f()};return document.addEventListener(te.KEYDOWN,h),()=>{document.removeEventListener(te.KEYDOWN,h)}},[f,i,d.editor.canFitSidebar]),g(js,{...s,className:me("sidebar",{"sidebar--docked":i},r),ref:u,children:g(xG.Provider,{value:c.current,children:t})})});tX.displayName="SidebarInner";const yo=Object.assign(N.forwardRef((e,t)=>{var l;const n=fi(),{onStateChange:i}=e,r=N.useRef(n.openSidebar);N.useEffect(()=>{var c,u,d,f,h;(!n.openSidebar&&((c=r==null?void 0:r.current)==null?void 0:c.name)===e.name||((u=n.openSidebar)==null?void 0:u.name)===e.name&&((d=r==null?void 0:r.current)==null?void 0:d.name)!==e.name||((f=r.current)==null?void 0:f.name)===e.name)&&n.openSidebar!==r.current&&(i==null||i(((h=n.openSidebar)==null?void 0:h.name)!==e.name?null:n.openSidebar)),r.current=n.openSidebar},[n.openSidebar,i,e.name]);const[s,o]=N.useState(!1);return N.useLayoutEffect(()=>(o(!0),()=>o(!1)),[]),s&&((l=n.openSidebar)==null?void 0:l.name)===e.name?N.createElement(tX,{...e,ref:t,key:e.name}):null}),{Header:CG,TabTriggers:qG,TabTrigger:ZG,Tabs:JG,Tab:eX,Trigger:QG});yo.displayName="Sidebar";const ep=(e,t)=>{const n=Jt(0),i=r=>{const{tunnelsJotai:{useAtom:s}}=rr(),[,o]=s(n),a=N.useRef({preferHost:!1,counter:0});return N.useLayoutEffect(()=>{const l=a.current;return o(c=>{const u=c+1;return l.counter=u,u}),()=>{o(c=>{const u=c-1;return l.counter=u,u||(l.preferHost=!1),u})}},[o]),r.__fallback||(a.current.preferHost=!0),!a.current.counter&&r.__fallback&&a.current.preferHost||a.current.counter>1&&r.__fallback?null:g(t,{...r})};return i.displayName=e,i},nX=Jt({active:!1});async function h4({title:e,description:t,actionLabel:n,color:i}){return new Promise(r=>{zs.set(nX,{active:!0,onConfirm:()=>r(!0),onClose:()=>r(!1),onReject:()=>r(!1),title:e,description:t,actionLabel:n,color:i})})}const iX=function({onChange:e,value:t,choices:n,name:i}){return g("div",{className:"RadioGroup",children:n.map(r=>P("div",{className:me("RadioGroup__choice",{active:r.value===t}),title:r.ariaLabel,children:[g("input",{name:i,type:"radio",checked:r.value===t,onChange:()=>e(r.value),"aria-label":r.ariaLabel}),r.label]},String(r.value)))})},rX=({value:e,shortcut:t,onChange:n,choices:i,children:r,name:s})=>{const o=qn();return P(ge,{children:[P("div",{className:"dropdown-menu-item-base dropdown-menu-item-bare",children:[g("label",{className:"dropdown-menu-item__text",htmlFor:s,children:r}),g(iX,{name:s,value:e,onChange:n,choices:i})]}),t&&!o.editor.isMobile&&g("div",{className:"dropdown-menu-item__shortcut dropdown-menu-item__shortcut--orphaned",children:t})]})};rX.displayName="DropdownMenuItemContentRadio";const sX=()=>{const{t:e}=gn(),t=vr(),n=$5();return t.isActionEnabled(i4)?g(Er,{icon:r_,onSelect:async()=>{(!n.length||await h4({title:e("overwriteConfirm.modal.loadFromFile.title"),actionLabel:e("overwriteConfirm.modal.loadFromFile.button"),color:"warning",description:g(gr,{i18nKey:"overwriteConfirm.modal.loadFromFile.description",bold:r=>g("strong",{children:r}),br:()=>g("br",{})})}))&&t.executeAction(i4)},"data-testid":"load-button",shortcut:zi("loadScene"),"aria-label":e("buttons.load"),children:e("buttons.load")}):null};sX.displayName="LoadScene";const oX=()=>{const{t:e}=gn(),t=vr();return t.isActionEnabled(Xb)?g(Er,{shortcut:zi("saveScene"),"data-testid":"save-button",onSelect:()=>t.executeAction(Xb),icon:oce,"aria-label":`${e("buttons.save")}`,children:`${e("buttons.save")}`}):null};oX.displayName="SaveToActiveFile";const aX=()=>{const e=zn(),{t}=gn();return g(Er,{icon:wz,"data-testid":"image-export-button",onSelect:()=>e({openDialog:{name:"imageExport"}}),shortcut:zi("imageExport"),"aria-label":t("buttons.exportImage"),children:t("buttons.exportImage")})};aX.displayName="SaveAsImage";const lX=e=>{const t=zn(),{t:n}=gn();return g(Er,{icon:Dz,"data-testid":"command-palette-button",onSelect:()=>{ct("command_palette","open","menu"),t({openDialog:{name:"commandPalette"}})},shortcut:zi("commandPalette"),"aria-label":n("commandPalette.title"),className:e==null?void 0:e.className,children:n("commandPalette.title")})};lX.displayName="CommandPalette";const cX=e=>{const{t}=gn(),n=vr();return g(Er,{icon:rd,"data-testid":"search-menu-button",onSelect:()=>{n.executeAction(cG)},shortcut:zi("searchMenu"),"aria-label":t("search.title"),className:e==null?void 0:e.className,children:t("search.title")})};cX.displayName="SearchMenu";const uX=()=>{const{t:e}=gn(),t=vr();return g(Er,{"data-testid":"help-menu-item",icon:n_,onSelect:()=>t.executeAction(j_),shortcut:"?","aria-label":e("helpDialog.title"),children:e("helpDialog.title")})};uX.displayName="Help";const dX=()=>{const{t:e}=gn(),t=s5(z5);return vr().isActionEnabled(q1)?g(Er,{icon:Tc,onSelect:()=>t("clearCanvas"),"data-testid":"clear-canvas-button","aria-label":e("buttons.clearReset"),children:e("buttons.clearReset")}):null};dX.displayName="ClearCanvas";const fX=e=>{const{t}=gn(),n=fi(),i=vr(),r=zi("toggleTheme");return i.isActionEnabled(Pb)?e!=null&&e.allowSystemTheme?g(rX,{name:"theme",value:e.theme,onChange:s=>e.onSelect(s),choices:[{value:xe.LIGHT,label:PE,ariaLabel:`${t("buttons.lightMode")} - ${r}`},{value:xe.DARK,label:OE,ariaLabel:`${t("buttons.darkMode")} - ${r}`},{value:"system",label:Tue,ariaLabel:t("buttons.systemMode")}],children:t("labels.theme")}):g(Er,{onSelect:s=>{if(s.preventDefault(),e!=null&&e.onSelect)e.onSelect(n.theme===xe.DARK?xe.LIGHT:xe.DARK);else return i.executeAction(Pb)},icon:n.theme===xe.DARK?PE:OE,"data-testid":"toggle-dark-mode",shortcut:r,"aria-label":n.theme===xe.DARK?t("buttons.lightMode"):t("buttons.darkMode"),children:n.theme===xe.DARK?t("buttons.lightMode"):t("buttons.darkMode")}):null};fX.displayName="ToggleTheme";const hX=()=>{const{t:e}=gn(),t=fi(),n=vr(),i=tp();return t.viewModeEnabled||!i.UIOptions.canvasActions.changeViewBackgroundColor?null:P("div",{style:{marginTop:"0.5rem"},children:[g("div",{"data-testid":"canvas-background-label",style:{fontSize:".75rem",marginBottom:".5rem"},children:e("labels.canvasBackground")}),g("div",{style:{padding:"0 0.625rem"},children:n.renderAction("changeViewBackgroundColor")})]})};hX.displayName="ChangeCanvasBackground";const gX=()=>{const{t:e}=gn(),t=zn();return g(Er,{icon:c5,onSelect:()=>{t({openDialog:{name:"jsonExport"}})},"data-testid":"json-export-button","aria-label":e("buttons.export"),children:e("buttons.export")})};gX.displayName="Export";const mX=()=>{const{t:e}=gn();return P(ge,{children:[g(i0,{icon:i_,href:"https://github.com/excalidraw/excalidraw","aria-label":"GitHub",children:"GitHub"}),g(i0,{icon:_z,href:"https://x.com/excalidraw","aria-label":"X",children:e("labels.followUs")}),g(i0,{icon:vz,href:"https://discord.gg/UexuTaE","aria-label":"Discord",children:e("labels.discordChat")})]})};mX.displayName="Socials";const pX=({onSelect:e,isCollaborating:t})=>{const{t:n}=gn();return g(Er,{"data-testid":"collab-button",icon:o_,className:me({"active-collab":t}),onSelect:e,children:n("labels.liveCollaboration")})};pX.displayName="LiveCollaborationTrigger";const _7e=Object.freeze(Object.defineProperty({__proto__:null,ChangeCanvasBackground:hX,ClearCanvas:dX,CommandPalette:lX,Export:gX,Help:uX,LiveCollaborationTrigger:pX,LoadScene:sX,SaveAsImage:aX,SaveToActiveFile:oX,SearchMenu:cX,Socials:mX,ToggleTheme:fX},Symbol.toStringTag,{value:"Module"})),Et=Object.assign(ep("MainMenu",({children:e,onSelect:t})=>{var a;const{MainMenuTunnel:n}=rr(),i=qn(),r=fi(),s=zn(),o=i.editor.isMobile?void 0:()=>s({openMenu:null});return g(n.In,{children:P(rt,{open:r.openMenu==="canvas",children:[g(rt.Trigger,{onToggle:()=>{s({openMenu:r.openMenu==="canvas"?null:"canvas"})},"data-testid":"main-menu-trigger",className:"main-menu-trigger",children:Ez}),P(rt.Content,{onClickOutside:o,onSelect:X6(t,()=>{s({openMenu:null})}),children:[e,i.editor.isMobile&&r.collaborators.size>0&&P("fieldset",{className:"UserList-Wrapper",children:[g("legend",{children:k("labels.collaborators")}),g(SG,{mobile:!0,collaborators:r.collaborators,userToFollow:((a=r.userToFollow)==null?void 0:a.socketId)||null})]})]})]})})}),{Trigger:rt.Trigger,Item:rt.Item,ItemLink:rt.ItemLink,ItemCustom:rt.ItemCustom,Group:rt.Group,Separator:rt.Separator,DefaultItems:_7e}),Ks=N.forwardRef(({children:e,icon:t,onClick:n,label:i,variant:r="filled",color:s="primary",size:o="medium",fullWidth:a,className:l,status:c},u)=>{const[d,f]=N.useState(!1),h=async p=>{const b=n==null?void 0:n(p);if(Fm(b)){const E=window.setTimeout(()=>{f(!0)},50);try{await b}catch(y){if(y instanceof xh)console.warn(y);else throw y}finally{clearTimeout(E),f(!1)}}},m=d?"loading":c;return s=m==="success"?"success":s,g("button",{className:me("ExcButton",`ExcButton--color-${s}`,`ExcButton--variant-${r}`,`ExcButton--size-${o}`,`ExcButton--status-${m}`,{"ExcButton--fullWidth":a},l),onClick:h,type:"button","aria-label":i,ref:u,disabled:m==="loading"||m==="success",children:P("div",{className:"ExcButton__contents",children:[m==="loading"?g(Qa,{className:"ExcButton__statusIcon"}):m==="success"&&g("div",{className:"ExcButton__statusIcon",children:sue}),t&&g("div",{className:"ExcButton__icon","aria-hidden":!0,children:t}),r!=="icon"&&(e??i)]})})}),nw=({title:e,children:t,actionLabel:n,onClick:i})=>P("div",{className:"OverwriteConfirm__Actions__Action",children:[g("h4",{children:e}),g("div",{className:"OverwriteConfirm__Actions__Action__content",children:t}),g(Ks,{variant:"outlined",color:"muted",label:n,size:"large",fullWidth:!0,onClick:i})]}),w7e=()=>{const{t:e}=gn(),t=vr(),n=zn();return g(nw,{title:e("overwriteConfirm.action.exportToImage.title"),actionLabel:e("overwriteConfirm.action.exportToImage.button"),onClick:()=>{t.executeAction(T$,"ui",!0),n({openDialog:{name:"imageExport"}})},children:e("overwriteConfirm.action.exportToImage.description")})},T7e=()=>{const{t:e}=gn(),t=vr();return g(nw,{title:e("overwriteConfirm.action.saveToDisk.title"),actionLabel:e("overwriteConfirm.action.saveToDisk.button"),onClick:()=>{t.executeAction(S$,"ui")},children:e("overwriteConfirm.action.saveToDisk.description")})},OR=Object.assign(({children:e})=>g("div",{className:"OverwriteConfirm__Actions",children:e}),{ExportToImage:w7e,SaveToDisk:T7e}),wu=Object.assign(ep("OverwriteConfirmDialog",({children:e})=>{const{OverwriteConfirmDialogTunnel:t}=rr(),[n,i]=hn(nX);if(!n.active)return null;const r=()=>{n.onClose(),i(o=>({...o,active:!1}))},s=()=>{n.onConfirm(),i(o=>({...o,active:!1}))};return g(t.In,{children:g($r,{onCloseRequest:r,title:!1,size:916,children:P("div",{className:"OverwriteConfirm",children:[g("h3",{children:n.title}),P("div",{className:`OverwriteConfirm__Description OverwriteConfirm__Description--color-${n.color}`,children:[g("div",{className:"OverwriteConfirm__Description__icon",children:oue}),g("div",{children:n.description}),g("div",{className:"OverwriteConfirm__Description__spacer"}),g(Ks,{color:n.color,size:"large",label:n.actionLabel,onClick:s})]}),g(OR,{children:e})]})})})}),{Actions:OR,Action:nw});var S7e="Expected a function",PR=NaN,I7e="[object Symbol]",x7e=/^\s+|\s+$/g,C7e=/^[-+]0x[0-9a-f]+$/i,A7e=/^0b[01]+$/i,M7e=/^0o[0-7]+$/i,R7e=parseInt,k7e=typeof _a=="object"&&_a&&_a.Object===Object&&_a,L7e=typeof self=="object"&&self&&self.Object===Object&&self,D7e=k7e||L7e||Function("return this")(),N7e=Object.prototype,O7e=N7e.toString,P7e=Math.max,F7e=Math.min,y7=function(){return D7e.Date.now()};function B7e(e,t,n){var i,r,s,o,a,l,c=0,u=!1,d=!1,f=!0;if(typeof e!="function")throw new TypeError(S7e);t=FR(t)||0,g4(n)&&(u=!!n.leading,d="maxWait"in n,s=d?P7e(FR(n.maxWait)||0,t):s,f="trailing"in n?!!n.trailing:f);function h(M){var w=i,T=r;return i=r=void 0,c=M,o=e.apply(T,w),o}function m(M){return c=M,a=setTimeout(E,t),u?h(M):o}function p(M){var w=M-l,T=M-c,A=t-w;return d?F7e(A,s-T):A}function b(M){var w=M-l,T=M-c;return l===void 0||w>=t||w<0||d&&T>=s}function E(){var M=y7();if(b(M))return y(M);a=setTimeout(E,p(M))}function y(M){return a=void 0,f&&i?h(M):(i=r=void 0,o)}function v(){a!==void 0&&clearTimeout(a),c=0,i=l=r=a=void 0}function _(){return a===void 0?o:y(y7())}function S(){var M=y7(),w=b(M);if(i=arguments,r=this,l=M,w){if(a===void 0)return m(l);if(d)return a=setTimeout(E,t),h(l)}return a===void 0&&(a=setTimeout(E,t)),o}return S.cancel=v,S.flush=_,S}function g4(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function z7e(e){return!!e&&typeof e=="object"}function H7e(e){return typeof e=="symbol"||z7e(e)&&O7e.call(e)==I7e}function FR(e){if(typeof e=="number")return e;if(H7e(e))return PR;if(g4(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=g4(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(x7e,"");var n=A7e.test(e);return n||M7e.test(e)?R7e(e.slice(2),n?2:8):C7e.test(e)?PR:+e}var V7e=B7e;const $7e=al(V7e),G7e=Jt(""),UX=Jt(null),X7e=350,j7e=()=>{const e=ao(),t=zn(),n=N.useRef(null),[i,r]=hn(G7e),s=i.trim(),[o,a]=N.useState(!1),[l,c]=N.useState({nonce:null,items:[]}),u=N.useRef(null),d=N.useRef(void 0),[f,h]=hn(UX),m=e.scene.getNonDeletedElementsMap();N.useEffect(()=>{o||(s!==u.current||e.scene.getSceneNonce()!==d.current)&&(u.current=null,BR(s,e,(v,_)=>{c({nonce:Ga(),items:v}),u.current=s,d.current=e.scene.getSceneNonce(),t({searchMatches:v.map(S=>({id:S.textElement.id,focus:!1,matchedLines:S.matchedLines}))})}))},[o,s,m,e,t,h,d]);const p=()=>{l.items.length>0&&h(v=>v===null?0:(v+1)%l.items.length)},b=()=>{l.items.length>0&&h(v=>v===null?0:v-1<0?l.items.length-1:v-1)};N.useEffect(()=>{t(v=>({searchMatches:v.searchMatches.map((_,S)=>S===f?{..._,focus:!0}:{..._,focus:!1})}))},[f,t]),N.useEffect(()=>{var v,_,S,M;if(l.items.length>0&&f!==null){const w=l.items[f];if(w){const T=e.state.zoom.value,A=Hr({text:w.searchQuery,x:w.textElement.x+(((v=w.matchedLines[0])==null?void 0:v.offsetX)??0),y:w.textElement.y+(((_=w.matchedLines[0])==null?void 0:_.offsetY)??0),width:(S=w.matchedLines[0])==null?void 0:S.width,height:(M=w.matchedLines[0])==null?void 0:M.height,fontSize:w.textElement.fontSize,fontFamily:w.textElement.fontFamily}),I=14,R=w.textElement.fontSize,D=R*T<I;if(!ZU([A],e.canvas.width/window.devicePixelRatio,e.canvas.height/window.devicePixelRatio,{offsetLeft:e.state.offsetLeft,offsetTop:e.state.offsetTop,scrollX:e.state.scrollX,scrollY:e.state.scrollY,zoom:e.state.zoom},e.scene.getNonDeletedElementsMap(),e.getEditorUIOffsets())||D){let L;D?R>=I?L={fitToContent:!0}:L={fitToViewport:!0,maxZoom:Da(I/R,1)}:L={fitToContent:!0},e.scrollToContent(A,{animate:!0,duration:300,...L,canvasOffsets:e.getEditorUIOffsets()})}}}},[f,l,e]),N.useEffect(()=>()=>{h(null),u.current=null,d.current=void 0,t({searchMatches:[]}),a(!1)},[t,h]);const E=b5({goToNextItem:p,goToPreviousItem:b,searchMatches:l});N.useEffect(()=>{const v=_=>{var S,M,w;if(_.key===z.ESCAPE&&!e.state.openDialog&&!e.state.openPopup){_.preventDefault(),_.stopPropagation(),t({openSidebar:null});return}_[z.CTRL_OR_CMD]&&_.key===z.F&&(_.preventDefault(),_.stopPropagation(),(S=n.current)!=null&&S.matches(":focus")?t({openSidebar:null}):(e.state.openDialog&&t({openDialog:null}),(M=n.current)==null||M.focus(),(w=n.current)==null||w.select())),_.target instanceof HTMLElement&&_.target.closest(".layer-ui__search")&&E.searchMatches.items.length&&(_.key===z.ENTER&&(_.stopPropagation(),E.goToNextItem()),_.key===z.ARROW_UP?(_.stopPropagation(),E.goToPreviousItem()):_.key===z.ARROW_DOWN&&(_.stopPropagation(),E.goToNextItem()))};return nn(window,te.KEYDOWN,v,{capture:!0,passive:!1})},[t,E,e]);const y=`${l.items.length} ${l.items.length===1?k("search.singleResult"):k("search.multipleResults")}`;return P("div",{className:"layer-ui__search",children:[g("div",{className:"layer-ui__search-header",children:g(Rh,{className:gh.SEARCH_MENU_INPUT_WRAPPER,value:i,ref:n,placeholder:k("search.placeholder"),icon:rd,onChange:v=>{r(v),a(!0);const _=v.trim();BR(_,e,(S,M)=>{c({nonce:Ga(),items:S}),h(M),u.current=_,d.current=e.scene.getSceneNonce(),t({searchMatches:S.map(w=>({id:w.textElement.id,focus:!1,matchedLines:w.matchedLines}))}),a(!1)})},selectOnRender:!0})}),P("div",{className:"layer-ui__search-count",children:[l.items.length>0&&P(ge,{children:[f!==null&&f>-1?P("div",{children:[f+1," / ",y]}):g("div",{children:y}),P("div",{className:"result-nav",children:[g(hd,{onSelect:()=>{p()},className:"result-nav-btn",children:Fz}),g(hd,{onSelect:()=>{b()},className:"result-nav-btn",children:Rue})]})]}),l.items.length===0&&s&&u.current&&g("div",{style:{margin:"1rem auto"},children:k("search.noMatch")})]}),g(Z7e,{matches:l,onItemClick:h,focusIndex:f,searchQuery:s})]})},Y7e=e=>{const t=[e.preview.moreBefore?"...":"",e.preview.previewText.slice(0,e.preview.indexInSearchQuery),e.preview.previewText.slice(e.preview.indexInSearchQuery,e.preview.indexInSearchQuery+e.searchQuery.length),e.preview.previewText.slice(e.preview.indexInSearchQuery+e.searchQuery.length),e.preview.moreAfter?"...":""];return g("div",{tabIndex:-1,className:me("layer-ui__result-item",{active:e.highlighted}),onClick:e.onClick,ref:n=>{e.highlighted&&(n==null||n.scrollIntoView({behavior:"auto",block:"nearest"}))},children:g("div",{className:"preview-text",children:t.flatMap((n,i)=>g(N.Fragment,{children:i===2?g("b",{children:n}):n},i))})})},W7e=e=>g("div",{className:"layer-ui__search-result-container",children:e.matches.items.map((t,n)=>g(Y7e,{searchQuery:e.searchQuery,preview:t.preview,highlighted:n===e.focusIndex,onClick:()=>e.onItemClick(n)},t.textElement.id+t.index))}),K7e=(e,t)=>e.matches.nonce===t.matches.nonce&&e.focusIndex===t.focusIndex,Z7e=N.memo(W7e,K7e),q7e=(e,t,n)=>{const s=e.slice(0,t),o=s.split(/\s+/),a=s.endsWith(" "),l=o.length-2-1-(a?0:1);let c=o.slice(l<=0?0:l).join(" ")+(a?" ":"");c=c.length>20?c.slice(-20):c;const d=e.slice(t+n.length),f=d.split(/\s+/),h=!d.startsWith(" "),m=h?6:5,p=(h?"":" ")+f.slice(0,m).join(" ");return{indexInSearchQuery:c.length,previewText:c+n+p,moreBefore:l>0,moreAfter:f.length>m}},Q7e=(e,t)=>{const n=e.split(`
`),i=[];let r=0;for(let s=0;s<n.length;s++){let o=n[s];const a=n[s+1];if(a){const l=t.indexOf(a,r);if(l>o.length+r){let c=l-(o.length+r);for(;c>0;)o+=" ",c--}}i.push(o),r=r+o.length}return i.join(`
`)},J7e=(e,t,n)=>{const r=Q7e(e.text,e.originalText).split(`
`),s=[];let o=0,a=0;for(const d of r){const f=o,h=f+d.length-1;s.push({line:d,startIndex:f,endIndex:h,lineNumber:a}),o=h+1,a++}let l=n,c=e.originalText.slice(n,n+t.length);const u=[];for(const d of s){if(c==="")break;if(l>=d.startIndex&&l<=d.endIndex){const f=d.endIndex+1-l,h=d.line.slice(0,l-d.startIndex),m=c.slice(0,f);c=c.slice(f);const p=Hi(h,Ct(e),e.lineHeight);if(h===""&&(p.width=0),e.textAlign!=="left"&&d.line.length>0){const _=Hi(d.line,Ct(e),e.lineHeight),S=e.textAlign==="center"?(e.width-_.width)/2:e.width-_.width;p.width+=S}const{width:b,height:E}=Hi(m,Ct(e),e.lineHeight),y=p.width,v=d.lineNumber*p.height;u.push({offsetX:y,offsetY:v,width:b,height:E}),l+=f}}return u},e3e=e=>e.replace(/[.*+?^${}()|[\]\\-]/g,"\\$&"),BR=$7e((e,t,n)=>{if(!e||e===""){n([],null);return}const r=t.scene.getNonDeletedElements().filter(c=>ue(c));r.sort((c,u)=>c.y-u.y);const s=[],o=new RegExp(e3e(e),"gi");for(const c of r){let u=null;const d=c.originalText;for(;(u=o.exec(d))!==null;){const f=q7e(d,u.index,e),h=J7e(c,e,u.index);h.length>0&&s.push({textElement:c,searchQuery:e,preview:f,index:u.index,matchedLines:h})}}const a=new Set(t.visibleElements.map(c=>c.id)),l=s.findIndex(c=>a.has(c.textElement.id))??null;n(s,l)},X7e),bX=ep("DefaultSidebarTrigger",e=>{const{DefaultSidebarTriggerTunnel:t}=rr();return g(t.In,{children:g(yo.Trigger,{...e,className:"default-sidebar-trigger",name:fs.name})})});bX.displayName="DefaultSidebarTrigger";const yX=({children:e})=>{const{DefaultSidebarTabTriggersTunnel:t}=rr();return g(t.In,{children:e})};yX.displayName="DefaultTabTriggers";const zR=Object.assign(ep("DefaultSidebar",({children:e,className:t,onDock:n,docked:i,...r})=>{var c;const s=fi(),o=zn(),{DefaultSidebarTabTriggersTunnel:a}=rr(),l=((c=s.openSidebar)==null?void 0:c.tab)===ku;return N.createElement(yo,{...r,name:"default",key:"default",className:me("default-sidebar",t),docked:l||(i??s.defaultSidebarDockedPreference),onDock:l||n===!1||!n&&i!=null?void 0:X6(n,u=>{o({defaultSidebarDockedPreference:u})})},P(yo.Tabs,{children:[g(yo.Header,{children:P(yo.TabTriggers,{children:[g(yo.TabTrigger,{tab:ku,children:rd}),g(yo.TabTrigger,{tab:ib,children:e_}),g(a.Out,{})]})}),g(yo.Tab,{tab:ib,children:g(iye,{})}),g(yo.Tab,{tab:ku,children:g(j7e,{})}),e]}))}),{Trigger:bX,TabTriggers:yX}),EX=({input:e,placeholder:t,onChange:n,onKeyboardSubmit:i})=>{const r=N.useRef(null),s=N.useRef(i);return s.current=i,N.useEffect(()=>{if(!s.current)return;const o=r.current;if(o){const a=l=>{var c;l[z.CTRL_OR_CMD]&&l.key===z.ENTER&&(l.preventDefault(),(c=s.current)==null||c.call(s))};return o.addEventListener(te.KEYDOWN,a),()=>{o.removeEventListener(te.KEYDOWN,a)}}},[]),g("textarea",{className:"ttd-dialog-input",onChange:n,value:e,placeholder:t,autoFocus:!0,ref:r})},t3e=({error:e})=>P("div",{"data-testid":"ttd-dialog-output-error",className:"ttd-dialog-output-error",children:["Error! ",g("p",{children:e})]}),vX=({error:e,canvasRef:t,loaded:n})=>P("div",{className:"ttd-dialog-output-wrapper",children:[e&&g(t3e,{error:e.message}),n?g("div",{ref:t,style:{opacity:e?"0.15":1},className:"ttd-dialog-output-canvas-container"}):g(Qa,{size:"2rem"})]}),Zb=({label:e,children:t,panelAction:n,panelActionDisabled:i=!1,onTextSubmitInProgess:r,renderTopRight:s,renderSubmitShortcut:o,renderBottomRight:a})=>P("div",{className:"ttd-dialog-panel",children:[P("div",{className:"ttd-dialog-panel__header",children:[g("label",{children:e}),s==null?void 0:s()]}),t,P("div",{className:me("ttd-dialog-panel-button-container",{invisible:!n}),style:{display:"flex",alignItems:"center"},children:[P(hd,{className:"ttd-dialog-panel-button",onSelect:n?n.action:()=>{},disabled:i||r,children:[P("div",{className:me({invisible:r}),children:[n==null?void 0:n.label,(n==null?void 0:n.icon)&&g("span",{children:n.icon})]}),r&&g(Qa,{})]}),!i&&!r&&(o==null?void 0:o()),a==null?void 0:a()]})]}),_X=({children:e})=>g("div",{className:"ttd-dialog-panels",children:e}),wX=()=>P("div",{className:"ttd-dialog-submit-shortcut",children:[g("div",{className:"ttd-dialog-submit-shortcut__key",children:Q("CtrlOrCmd")}),g("div",{className:"ttd-dialog-submit-shortcut__key",children:Q("Enter")})]}),n3e=({canvasRef:e,setError:t})=>{const n=e.current;if(!n)return;const i=n.parentElement;i&&(i.style.background="",t(null),n.replaceChildren())},TX=async({canvasRef:e,mermaidToExcalidrawLib:t,mermaidDefinition:n,setError:i,data:r})=>{const s=e.current,o=s==null?void 0:s.parentElement;if(!(!s||!o)){if(!n){n3e({canvasRef:e,setError:i});return}try{const a=await t.api;let l;try{l=await a.parseMermaidToExcalidraw(n)}catch{l=await a.parseMermaidToExcalidraw(n.replace(/"/g,"'"))}const{elements:c,files:u}=l;i(null),r.current={elements:u4(c,{regenerateIds:!0}),files:u};const d=await F5({elements:r.current.elements,files:r.current.files,exportPadding:qh,maxWidthOrHeight:Math.max(o.offsetWidth,o.offsetHeight)*window.devicePixelRatio});try{await tm(d)}catch(f){throw f.name==="CANVAS_POSSIBLY_TOO_BIG"?new Error(k("canvasError.canvasTooBig")):f}o.style.background="var(--default-bg-color)",s.replaceChildren(d)}catch(a){throw o.style.background="var(--default-bg-color)",n&&i(a),a}}},iw=e=>{Bu.set(z1.MERMAID_TO_EXCALIDRAW,e)},SX=({app:e,data:t,text:n,shouldSaveMermaidDataToStorage:i})=>{const{elements:r,files:s}=t.current;r.length&&(e.addElementsFromPasteOrLibrary({elements:r,files:s,position:"center",fitToContent:!0}),e.setOpenDialog(null),i&&n&&iw(n))},i3e=`flowchart TD
 A[Christmas] -->|Get money| B(Go shopping)
 B --> C{Let me think}
 C -->|One| D[Laptop]
 C -->|Two| E[iPhone]
 C -->|Three| F[Car]`,HR=$a(iw,300),r3e=({mermaidToExcalidrawLib:e})=>{const[t,n]=N.useState(()=>Bu.get(z1.MERMAID_TO_EXCALIDRAW)||i3e),i=N.useDeferredValue(t.trim()),[r,s]=N.useState(null),o=N.useRef(null),a=N.useRef({elements:[],files:null}),l=ao();N.useEffect(()=>{TX({canvasRef:o,data:a,mermaidToExcalidrawLib:e,setError:s,mermaidDefinition:i}).catch(u=>{}),HR(i)},[i,e]),N.useEffect(()=>()=>{HR.flush()},[]);const c=()=>{SX({app:l,data:a,text:t,shouldSaveMermaidDataToStorage:!0})};return P(ge,{children:[g("div",{className:"ttd-dialog-desc",children:g(gr,{i18nKey:"mermaid.description",flowchartLink:u=>g("a",{href:"https://mermaid.js.org/syntax/flowchart.html",children:u}),sequenceLink:u=>g("a",{href:"https://mermaid.js.org/syntax/sequenceDiagram.html",children:u}),classLink:u=>g("a",{href:"https://mermaid.js.org/syntax/classDiagram.html",children:u})})}),P(_X,{children:[g(Zb,{label:k("mermaid.syntax"),children:g(EX,{input:t,placeholder:"Write Mermaid diagram defintion here...",onChange:u=>n(u.target.value),onKeyboardSubmit:()=>{c()}})}),g(Zb,{label:k("mermaid.preview"),panelAction:{action:()=>{c()},label:k("mermaid.button"),icon:t2},renderSubmitShortcut:()=>g(wX,{}),children:g(vX,{canvasRef:o,loaded:e.loaded,error:r})})]})]})},IX=e=>{const t=zn(),n=N.useRef(null),i=N.useRef(0);return g(jG,{ref:n,className:"ttd-dialog-tabs-root",value:e.tab,onValueChange:r=>{var o;if(!r)return;const s=(o=n.current)==null?void 0:o.closest(".Modal__content");if(s){const a=s.offsetHeight||0;a>i.current&&(i.current=a,s.style.minHeight=`min(${i.current}px, 100%)`)}e.dialog==="ttd"&&RP(["text-to-diagram","mermaid"],r)&&t({openDialog:{name:e.dialog,tab:r}})},children:e.children})};IX.displayName="TTDDialogTabs";const xX=({children:e,...t})=>g(YG,{className:"ttd-dialog-triggers",...t,children:e});xX.displayName="TTDDialogTabTriggers";const m4=({children:e,tab:t,onSelect:n,...i})=>g(WG,{value:t,asChild:!0,onSelect:n,children:g("button",{type:"button",className:"ttd-dialog-tab-trigger",...i,children:e})});m4.displayName="TTDDialogTabTrigger";const p4=({tab:e,children:t,...n})=>g(KG,{...n,value:e,children:t});p4.displayName="TTDDialogTab";const E7=3,Jd=1e3,s3e=Jt(null),o3e=Jt(null),CX=e=>{var n;const t=fi();return((n=t.openDialog)==null?void 0:n.name)!=="ttd"?null:g(a3e,{...e,tab:t.openDialog.tab})},a3e=ep("TTDDialogBase",({tab:e,...t})=>{const n=ao(),i=zn(),r=N.useRef(null),[s,o]=hn(o3e),[a,l]=N.useState((s==null?void 0:s.prompt)??""),c=a.trim(),u=M=>{l(M.target.value),o(w=>({generatedResponse:(w==null?void 0:w.generatedResponse)??null,prompt:M.target.value}))},[d,f]=N.useState(!1),[h,m]=hn(s3e),p=async()=>{if(c.length>Jd||c.length<E7||d||(h==null?void 0:h.rateLimitRemaining)===0||"__fallback"in t){c.length<E7&&S(new Error(`Prompt is too short (min ${E7} characters)`)),c.length>Jd&&S(new Error(`Prompt is too long (max ${Jd} characters)`));return}try{f(!0),ct("ai","generate","ttd");const{generatedResponse:M,error:w,rateLimit:T,rateLimitRemaining:A}=await t.onTextSubmit(c);if(typeof M=="string"&&o(I=>({generatedResponse:M,prompt:(I==null?void 0:I.prompt)??null})),V1(T)&&V1(A)&&m({rateLimit:T,rateLimitRemaining:A}),w){S(w);return}if(!M){S(new Error("Generation failed"));return}try{await TX({canvasRef:r,data:v,mermaidToExcalidrawLib:E,setError:S,mermaidDefinition:M}),ct("ai","mermaid parse success","ttd")}catch(I){console.info(`%cTTD mermaid render errror: ${I.message}`,"color: red"),console.info(`>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
TTD mermaid definition render errror: ${I.message}`,"color: yellow"),ct("ai","mermaid parse failed","ttd"),S(new Error("Generated an invalid diagram :(. You may also try a different prompt."))}}catch(M){let w=M.message;(!w||w==="Failed to fetch")&&(w="Request failed"),S(new Error(w))}finally{f(!1)}},b=N.useRef(p);b.current=p;const[E,y]=N.useState({loaded:!1,api:Ue(()=>import("./index-CZaFGi8-.js").then(M=>M.b6),__vite__mapDeps([]))});N.useEffect(()=>{(async()=>{await E.api,y(w=>({...w,loaded:!0}))})()},[E.api]);const v=N.useRef({elements:[],files:null}),[_,S]=N.useState(null);return g($r,{className:"ttd-dialog",onCloseRequest:()=>{n.setOpenDialog(null)},size:1200,title:!1,...t,autofocus:!1,children:P(IX,{dialog:"ttd",tab:e,children:["__fallback"in t&&t.__fallback?g("p",{className:"dialog-mermaid-title",children:k("mermaid.title")}):P(xX,{children:[g(m4,{tab:"text-to-diagram",children:P("div",{style:{display:"flex",alignItems:"center"},children:[k("labels.textToDiagram"),g("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"1px 6px",marginLeft:"10px",fontSize:10,borderRadius:"12px",background:"var(--color-promo)",color:"var(--color-surface-lowest)"},children:"AI Beta"})]})}),g(m4,{tab:"mermaid",children:"Mermaid"})]}),g(p4,{className:"ttd-dialog-content",tab:"mermaid",children:g(r3e,{mermaidToExcalidrawLib:E})}),!("__fallback"in t)&&P(p4,{className:"ttd-dialog-content",tab:"text-to-diagram",children:[g("div",{className:"ttd-dialog-desc",children:"Currently we use Mermaid as a middle step, so you'll get best results if you describe a diagram, workflow, flow chart, and similar."}),P(_X,{children:[g(Zb,{label:k("labels.prompt"),panelAction:{action:p,label:"Generate",icon:t2},onTextSubmitInProgess:d,panelActionDisabled:c.length>Jd||(h==null?void 0:h.rateLimitRemaining)===0,renderTopRight:()=>h?P("div",{className:"ttd-dialog-rate-limit",style:{fontSize:12,marginLeft:"auto",color:h.rateLimitRemaining===0?"var(--color-danger)":void 0},children:[h.rateLimitRemaining," requests left today"]}):null,renderSubmitShortcut:()=>g(wX,{}),renderBottomRight:()=>{if(typeof(s==null?void 0:s.generatedResponse)=="string")return P("div",{className:"excalidraw-link",style:{marginLeft:"auto",fontSize:14},onClick:()=>{typeof(s==null?void 0:s.generatedResponse)=="string"&&(iw(s.generatedResponse),i({openDialog:{name:"ttd",tab:"mermaid"}}))},children:["View as Mermaid",g(v5,{icon:t2})]});const M=c.length/Jd;return M>.8?P("div",{style:{marginLeft:"auto",fontSize:12,fontFamily:"monospace",color:M>1?"var(--color-danger)":void 0},children:["Length: ",c.length,"/",Jd]}):null},children:g(EX,{onChange:u,input:a,placeholder:"Describe what you want to see...",onKeyboardSubmit:()=>{b.current()}})}),g(Zb,{label:"Preview",panelAction:{action:()=>{console.info("Panel action clicked"),SX({app:n,data:v})},label:"Insert",icon:t2},children:g(vX,{canvasRef:r,error:_,loaded:E.loaded})})]})]})]})})}),l3e=.01,il=(e,t)=>!(t==="height"&&ue(e)||t==="width"&&ue(e)||t==="angle"&&Ie(e)),Oi=(e,t)=>{const n=e+t/2;return n-n%t},qb=(e,t,n)=>Object.keys(e).map(i=>({original:(n??t).get(i),latest:t.get(i)})).filter(i=>i.original!==void 0&&i.latest!==void 0),am=(e,t,n,i,r,s,o,a=!0)=>{const l=i.get(n.id);if(!l)return;const[c,u]=[n.x+n.width/2,n.y+n.height/2],[d,f]=q(C(n.x,n.y),C(c,u),n.angle),h=e-d,m=t-f,[p,b]=q(C(e,t),C(c+h,u+m),-n.angle);ee(l,{x:p,y:b},a),U4(l,i,r,s);const E=Pe(n,o);if(E){const y=i.get(E.id);y&&ee(y,{x:E.x+h,y:E.y+m},a)}},rw=(e,t)=>{const i=Ou(t).map(r=>Gt(e,r).reduce((s,o)=>(s[o.id]=!0,s),{}));return e.filter(r=>!_h(r)).forEach(r=>{i.push({[r.id]:!0})}),i},U4=(e,t,n,i,r)=>{ke(e)?Ub([e],t,n,i,!0,[],r==null?void 0:r.zoom):pr(e,t,r)},dl=({label:e,icon:t,dragInputCallback:n,value:i,elements:r,editable:s=!0,shouldKeepAspectRatio:o,property:a,scene:l,appState:c,sensitivity:u=1})=>{const d=ao(),f=N.useRef(null),h=N.useRef(null),[m,p]=N.useState(i.toString()),b=N.useRef(null);b.current||(b.current={originalAppState:Na(c),originalElements:r,lastUpdatedValue:m,updatePending:!1}),N.useEffect(()=>{const v=i.toString();p(v),b.current.lastUpdatedValue=v},[i]);const E=(v,_,S)=>{if(!b.current.updatePending)return!1;b.current.updatePending=!1;const M=Number(v);if(isNaN(M)){p(i.toString());return}const w=Number(M.toFixed(2)),T=Number(i);(isNaN(T)||Math.abs(w-T)>=l3e)&&(b.current.lastUpdatedValue=v,n({accumulatedChange:0,instantChange:0,originalElements:_,originalElementsMap:d.scene.getNonDeletedElementsMap(),shouldKeepAspectRatio:o,shouldChangeByStepSize:!1,scene:l,nextValue:w,property:a,originalAppState:S,setInputValue:A=>p(String(A))}),d.syncActionResult({captureUpdate:Z.IMMEDIATELY}))},y=N.useRef({});return y.current.handleInputValue=E,N.useEffect(()=>{const v=f.current,_=y.current;return()=>{var M;const S=v==null?void 0:v.value;S&&((M=_.handleInputValue)==null||M.call(_,S,b.current.originalElements,b.current.originalAppState)),window.removeEventListener(te.POINTER_MOVE,_.onPointerMove,!1),window.removeEventListener(te.POINTER_UP,_.onPointerUp,!1)}},[s]),s?P("div",{className:me("drag-input-container",!s&&"disabled"),"data-testid":e,children:[g("div",{className:"drag-input-label",ref:h,onPointerDown:v=>{if(f.current&&s){document.body.classList.add("excalidraw-cursor-resize"),Number(f.current.value);let _=null,S=d.scene.getNonDeletedElements().reduce((D,L)=>(D.set(L.id,xd(L)),D),new Map),M=r.map(D=>S.get(D.id));const w=Na(c);let T=0,A=0;const I=D=>{if(_&&S!==null&&M!==null){const L=D.clientX-_.x;L!==0&&(A+=L,Math.abs(A)>=u&&(A=Math.sign(A)*Math.floor(Math.abs(A)/u),T+=A,n({accumulatedChange:T,instantChange:A,originalElements:M,originalElementsMap:S,shouldKeepAspectRatio:o,shouldChangeByStepSize:D.shiftKey,property:a,scene:l,originalAppState:w,setInputValue:G=>p(String(G))}),A=0))}_={x:D.clientX,y:D.clientY}},R=()=>{window.removeEventListener(te.POINTER_MOVE,I,!1),d.syncActionResult({captureUpdate:Z.IMMEDIATELY}),_=null,T=0,A=0,M=null,S=null,document.body.classList.remove("excalidraw-cursor-resize"),window.removeEventListener(te.POINTER_UP,R,!1)};y.current.onPointerMove=I,y.current.onPointerUp=R,window.addEventListener(te.POINTER_MOVE,I,!1),window.addEventListener(te.POINTER_UP,R,!1)}},onPointerEnter:()=>{h.current&&(h.current.style.cursor="ew-resize")},children:t?g(v5,{icon:t}):e}),g("input",{className:"drag-input",autoComplete:"off",spellCheck:"false",onKeyDown:v=>{if(s){const _=v.target;_ instanceof HTMLInputElement&&v.key===z.ENTER&&(E(_.value,r,c),d.focusContainer())}},ref:f,value:m,onChange:v=>{b.current.updatePending=!0,p(v.target.value)},onFocus:v=>{v.target.select(),b.current.originalElements=r,b.current.originalAppState=Na(c)},onBlur:v=>{m?s&&E(v.target.value,b.current.originalElements,b.current.originalAppState):p(i.toString())},disabled:!s})]}):null},c3e=15,u3e=({accumulatedChange:e,originalElements:t,shouldChangeByStepSize:n,nextValue:i,scene:r})=>{const s=r.getNonDeletedElementsMap(),o=r.getNonDeletedElements(),a=t[0];if(a&&!fe(a)){const l=s.get(a.id);if(!l)return;if(i!==void 0){const m=Lu(i);ee(l,{angle:m}),U4(l,s,o,r);const p=Pe(l,s);p&&!ze(l)&&ee(p,{angle:m});return}const c=Math.round(Nm(a.angle)*100)/100,u=Math.round(e);let d=(c+u)%360;n&&(d=Oi(d,c3e)),d=d<0?d+360:d;const f=Lu(d);ee(l,{angle:f}),U4(l,s,o,r);const h=Pe(l,s);h&&!ze(l)&&ee(h,{angle:f})}},d3e=({element:e,scene:t,appState:n,property:i})=>g(dl,{label:"A",icon:Cz,value:Math.round(Nm(e.angle)%360*100)/100,elements:[e],dragInputCallback:u3e,editable:il(e,"angle"),scene:t,appState:n,property:i}),VR=5,f3e=({property:e,scene:t,appState:n,setAppState:i})=>g(dl,{label:"Grid step",sensitivity:8,elements:[],dragInputCallback:({nextValue:r,instantChange:s,shouldChangeByStepSize:o,setInputValue:a})=>{i(l=>{let c;return r?c=r:s&&(c=o?Oi(l.gridStep+VR*Math.sign(s),VR):l.gridStep+s),c?(c=gz(c),a(c),{gridStep:c}):(a(l.gridStep),null)})},scene:t,value:n.gridStep,property:e,appState:n}),$R=10,h3e=e=>e.type==="image",g3e=({accumulatedChange:e,originalElements:t,originalElementsMap:n,shouldKeepAspectRatio:i,shouldChangeByStepSize:r,nextValue:s,property:o,originalAppState:a,instantChange:l,scene:c})=>{const u=c.getNonDeletedElementsMap(),d=t[0],f=u.get(d.id);if(d&&f){const h=i||h3e(d),m=d.width/d.height;if(a.croppingElementId===d.id){const v=u.get(d.id);if(!v||!it(v)||!v.crop)return;const _=v.crop;let S={..._};const M=v.scale[0]===-1,w=v.scale[1]===-1,{width:T,height:A}=Ka(v),I=_.naturalWidth/T,R=_.naturalHeight/A,D=M?_.width+_.x:_.naturalWidth-_.x,L=w?_.height+_.y:_.naturalHeight-_.y,G=Qn*I,V=Qn*R;if(s!==void 0){if(o==="width"){const K=s*I,le=Ge(K,G,D);S={...S,width:le,x:M?_.x+_.width-le:_.x}}else if(o==="height"){const K=s*R,le=Ge(K,V,L);S={...S,height:le,y:w?_.y+_.height-le:_.y}}ee(v,{crop:S,width:S.width/(_.naturalWidth/T),height:S.height/(_.naturalHeight/A)});return}const H=o==="width"?l:0,$=o==="height"?l:0,j=Ge(_.width+H,G,D),X=Ge(_.height+$,G,L);S={..._,x:M?_.x+_.width-j:_.x,y:w?_.y+_.height-X:_.y,width:j,height:X},ee(v,{crop:S,width:S.width/(_.naturalWidth/T),height:S.height/(_.naturalHeight/A)});return}if(s!==void 0){const v=Math.max(o==="width"?s:h?s*m:d.width,qr),_=Math.max(o==="height"?s:h?s/m:d.height,qr);F0(v,_,f,d,u,n,o==="width"?"e":"s",{shouldMaintainAspectRatio:h});return}const p=o==="width"?e:0,b=o==="height"?e:0;let E=Math.max(0,d.width+p);o==="width"&&(r?E=Oi(E,$R):E=Math.round(E));let y=Math.max(0,d.height+b);o==="height"&&(r?y=Oi(y,$R):y=Math.round(y)),h&&(o==="width"?y=Math.round(E/m*100)/100:E=Math.round(y*m*100)/100),y=Math.max(qr,y),E=Math.max(qr,E),F0(E,y,f,d,u,n,o==="width"?"e":"s",{shouldMaintainAspectRatio:h})}},GR=({property:e,element:t,scene:n,appState:i})=>{let r=Da(e==="width"?t.width:t.height,2);if(i.croppingElementId&&i.croppingElementId===t.id&&it(t)&&t.crop){const{width:s,height:o}=Ka(t);if(e==="width"){const a=s/t.crop.naturalWidth;r=Da(t.crop.width*a,2)}if(e==="height"){const a=o/t.crop.naturalHeight;r=Da(t.crop.height*a,2)}}return g(dl,{label:e==="width"?"W":"H",elements:[t],dragInputCallback:g3e,value:r,editable:il(t,e),scene:n,appState:i,property:e})},XR=4,m3e=4,p3e=({accumulatedChange:e,originalElements:t,shouldChangeByStepSize:n,nextValue:i,scene:r})=>{const s=r.getNonDeletedElementsMap(),o=t[0];if(o){const a=s.get(o.id);if(!a||!ue(a))return;let l;if(i!==void 0)l=Math.max(Math.round(i),XR);else if(o.type==="text"){const c=Math.round(o.fontSize),u=Math.round(e);l=Math.max(c+u,XR),n&&(l=Oi(l,m3e))}l&&(ee(a,{fontSize:l}),Ji(a,r.getContainerElement(a),r.getNonDeletedElementsMap()))}},U3e=({element:e,scene:t,appState:n,property:i})=>{const r=ue(e)?e:ys(e)?Pe(e,t.getNonDeletedElementsMap()):null;return r?g(dl,{label:"F",value:Math.round(r.fontSize*10)/10,elements:[r],dragInputCallback:p3e,icon:u5,appState:n,scene:t,property:i}):null},b3e=15,y3e=({accumulatedChange:e,originalElements:t,shouldChangeByStepSize:n,nextValue:i,property:r,scene:s})=>{const o=s.getNonDeletedElementsMap(),a=t.map(c=>o.get(c.id)).filter(c=>c&&!_h(c)&&il(c,r)),l=t.filter(c=>!_h(c)&&il(c,r));if(i!==void 0){const c=Lu(i);for(const u of a){if(!u)continue;ee(u,{angle:c},!1);const d=Pe(u,o);d&&!ze(u)&&ee(d,{angle:c},!1)}s.triggerUpdate();return}for(let c=0;c<a.length;c++){const u=a[c];if(!u)continue;const d=l[c],f=Math.round(Nm(d.angle)*100)/100,h=Math.round(e);let m=(f+h)%360;n&&(m=Oi(m,b3e)),m=m<0?m+360:m;const p=Lu(m);ee(u,{angle:p},!1);const b=Pe(u,o);b&&!ze(u)&&ee(b,{angle:p},!1)}s.triggerUpdate()},E3e=({elements:e,scene:t,appState:n,property:i})=>{const r=e.filter(l=>!_h(l)&&il(l,"angle")),s=r.map(l=>Math.round(Nm(l.angle)%360*100)/100),o=new Set(s).size===1?s[0]:"Mixed",a=r.some(l=>il(l,"angle"));return g(dl,{label:"A",icon:Cz,value:o,elements:e,dragInputCallback:y3e,editable:a,appState:n,scene:t,property:i})},ef=10,v3e=(e,t,n,i)=>{const r=i.x-e,s=i.y-t,o=i.width*n,a=i.height*n,l=e+r*n,c=t+s*n;return{width:o,height:a,x:l,y:c,...K9(i,o,a,!1),...ue(i)?{fontSize:i.fontSize*n}:{}}},_3e=(e,t,n,i,r,s,o,a)=>{const l=v3e(e,t,i,s);ee(r,l,!1);const c=Pe(s,a);if(c){const u=c.fontSize*i;pr(r,o,{newSize:{width:l.width,height:l.height}});const d=o.get(c.id);d&&ue(d)&&(ee(d,{fontSize:u},!1),Vm(r,o,n==="width"?"e":"s",!0))}},jR=(e,t,n,i,r,s,o,a,l,c)=>{s==="width"?t=Math.round(e/i*100)/100:e=Math.round(t*i*100)/100;const u=t/n;for(let d=0;d<a.length;d++){const f=a[d],h=o[d];_3e(r[0],r[1],s,u,h,f,l,c)}},w3e=({accumulatedChange:e,originalElements:t,originalElementsMap:n,originalAppState:i,shouldChangeByStepSize:r,nextValue:s,scene:o,property:a})=>{const l=o.getNonDeletedElementsMap(),c=rw(t,i);if(s!==void 0){for(const f of c){const h=qb(f,l,n);if(h.length>1){const m=h.map(A=>A.latest),p=h.map(A=>A.original),[b,E,y,v]=_t(p),_=y-b,S=v-E,M=_/S,w=Math.max(qr,a==="width"?Math.max(0,s):_),T=Math.max(qr,a==="height"?Math.max(0,s):S);jR(w,T,S,M,C(b,E),a,m,p,l,n)}else{const[m]=h,p=m==null?void 0:m.latest,b=m==null?void 0:m.original;if(p&&b&&il(p,a)){let E=a==="width"?Math.max(0,s):p.width;a==="width"&&(r?E=Oi(E,ef):E=Math.round(E));let y=a==="height"?Math.max(0,s):p.height;a==="height"&&(r?y=Oi(y,ef):y=Math.round(y)),E=Math.max(qr,E),y=Math.max(qr,y),F0(E,y,p,b,l,n,a==="width"?"e":"s",{shouldInformMutation:!1})}}}o.triggerUpdate();return}const u=a==="width"?e:0,d=a==="height"?e:0;for(const f of c){const h=qb(f,l,n);if(h.length>1){const m=h.map(A=>A.latest),p=h.map(A=>A.original),[b,E,y,v]=_t(p),_=y-b,S=v-E,M=_/S;let w=Math.max(0,_+u);a==="width"&&(r?w=Oi(w,ef):w=Math.round(w));let T=Math.max(0,S+d);a==="height"&&(r?T=Oi(T,ef):T=Math.round(T)),w=Math.max(qr,w),T=Math.max(qr,T),jR(w,T,S,M,C(b,E),a,m,p,l,n)}else{const[m]=h,p=m==null?void 0:m.latest,b=m==null?void 0:m.original;if(p&&b&&il(p,a)){let E=Math.max(0,b.width+u);a==="width"&&(r?E=Oi(E,ef):E=Math.round(E));let y=Math.max(0,b.height+d);a==="height"&&(r?y=Oi(y,ef):y=Math.round(y)),E=Math.max(qr,E),y=Math.max(qr,y),F0(E,y,p,b,l,n,a==="width"?"e":"s",{shouldInformMutation:!1})}}}o.triggerUpdate()},YR=({property:e,elements:t,elementsMap:n,atomicUnits:i,scene:r,appState:s})=>{const o=N.useMemo(()=>i.map(c=>{const u=qb(c,n);if(u.length>1){const[f,h,m,p]=_t(u.map(b=>b.latest));return Math.round((e==="width"?m-f:p-h)*100)/100}const[d]=u;return Math.round((e==="width"?d.latest.width:d.latest.height)*100)/100}),[n,i,e]),a=new Set(o).size===1?Math.round(o[0]*100)/100:"Mixed",l=o.length>0;return g(dl,{label:e==="width"?"W":"H",elements:t,dragInputCallback:w3e,value:a,editable:l,appState:s,property:e,scene:r})},WR=4,T3e=4,S3e=(e,t)=>e.reduce((n,i)=>{if(!i||_h(i))return n;if(ue(i))return n.push(i),n;if(ys(i)){const r=Pe(i,t);if(r)return n.push(r),n}return n},[]),I3e=({accumulatedChange:e,originalElements:t,shouldChangeByStepSize:n,nextValue:i,scene:r})=>{const s=r.getNonDeletedElementsMap(),o=t.map(l=>s.get(l.id));let a;if(i){a=Math.max(Math.round(i),WR);for(const l of o)ee(l,{fontSize:a},!1),Ji(l,r.getContainerElement(l),s,!1);r.triggerUpdate()}else{const l=t;for(let c=0;c<o.length;c++){const u=o[c],d=l[c],f=Math.round(d.fontSize),h=Math.round(e);let m=Math.max(f+h,WR);n&&(m=Oi(m,T3e)),ee(u,{fontSize:m},!1),Ji(u,r.getContainerElement(u),s,!1)}r.triggerUpdate()}},x3e=({elements:e,scene:t,appState:n,property:i,elementsMap:r})=>{const s=S3e(e,r);if(!s.length)return null;const o=s.map(c=>Math.round(c.fontSize*10)/10),a=new Set(o).size===1?o[0]:"Mixed",l=o.length>0;return g(dl,{label:"F",icon:u5,elements:s,dragInputCallback:I3e,value:a,editable:l,scene:t,property:i,appState:n})},C3e=10,A3e=(e,t,n,i,r,s,o,a)=>{for(let l=0;l<i.length;l++){const c=r[l],[u,d]=[c.x+c.width/2,c.y+c.height/2],[f,h]=q(C(c.x,c.y),C(u,d),c.angle),m=e==="x"?Math.round(f+t):f,p=e==="y"?Math.round(h+n):h;am(m,p,c,s,i,a,o,!1)}},M3e=(e,t,n,i,r,s,o)=>{const[a,l,,]=_t(n),c=e-a,u=t-l;for(let d=0;d<n.length;d++){const f=n[d],h=i.get(f.id);if(h&&(!ue(h)||!h.containerId)){const[m,p]=[h.x+h.width/2,h.y+h.height/2],[b,E]=q(C(h.x,h.y),C(m,p),h.angle);am(b+c,E+u,f,i,r,o,s,!1)}}},R3e=({accumulatedChange:e,originalElements:t,originalElementsMap:n,shouldChangeByStepSize:i,nextValue:r,property:s,scene:o,originalAppState:a})=>{var h,m;const l=o.getNonDeletedElementsMap(),c=o.getNonDeletedElements();if(r!==void 0){for(const p of rw(t,a)){const b=qb(p,l,n);if(b.length>1){const[E,y,,]=_t(b.map(S=>S.latest));M3e(s==="x"?r:E,s==="y"?r:y,b.map(S=>S.original),l,c,n,o)}else{const E=(h=b[0])==null?void 0:h.original,y=(m=b[0])==null?void 0:m.latest;if(E&&y&&il(y,s)){const[v,_]=[E.x+E.width/2,E.y+E.height/2],[S,M]=q(C(E.x,E.y),C(v,_),E.angle);am(s==="x"?r:S,s==="y"?r:M,E,l,c,o,n,!1)}}}o.triggerUpdate();return}const u=i?Oi(e,C3e):e;A3e(s,s==="x"?u:0,s==="y"?u:0,t,t,l,n,o),o.triggerUpdate()},KR=({property:e,elements:t,elementsMap:n,atomicUnits:i,scene:r,appState:s})=>{const o=N.useMemo(()=>i.map(l=>{const c=Object.keys(l).map(p=>n.get(p)).filter(p=>p!==void 0);if(c.length>1){const[p,b]=_t(c);return Math.round((e==="x"?p:b)*100)/100}const[u]=c,[d,f]=[u.x+u.width/2,u.y+u.height/2],[h,m]=q(C(u.x,u.y),C(d,f),u.angle);return Math.round((e==="x"?h:m)*100)/100}),[i,n,e]),a=new Set(o).size===1?o[0]:"Mixed";return g(dl,{label:e==="x"?"X":"Y",elements:t,dragInputCallback:R3e,value:a,property:e,scene:r,appState:s})},ZR=10,k3e=({accumulatedChange:e,instantChange:t,originalElements:n,originalElementsMap:i,shouldChangeByStepSize:r,nextValue:s,property:o,scene:a,originalAppState:l})=>{const c=a.getNonDeletedElementsMap(),u=a.getNonDeletedElements(),d=n[0],[f,h]=[d.x+d.width/2,d.y+d.height/2],[m,p]=q(C(d.x,d.y),C(f,h),d.angle);if(l.croppingElementId===d.id){const _=c.get(d.id);if(!_||!it(_)||!_.crop)return;const S=_.crop;let M=S;const w=_.scale[0]===-1,T=_.scale[1]===-1,{width:A,height:I}=Ka(_);if(s!==void 0){if(o==="x"){const L=s*(S.naturalWidth/A);w?M={...S,x:Ge(S.naturalWidth-L-S.width,0,S.naturalWidth-S.width)}:M={...S,x:Ge(s*(S.naturalWidth/A),0,S.naturalWidth-S.width)}}o==="y"&&(M={...S,y:Ge(s*(S.naturalHeight/I),0,S.naturalHeight-S.height)}),ee(_,{crop:M});return}const R=(o==="x"?t:0)*(w?-1:1),D=(o==="y"?t:0)*(T?-1:1);M={...S,x:Ge(S.x+R,0,S.naturalWidth-S.width),y:Ge(S.y+D,0,S.naturalHeight-S.height)},ee(_,{crop:M});return}if(s!==void 0){am(o==="x"?s:m,o==="y"?s:p,d,c,u,a,i);return}const b=o==="x"?e:0,E=o==="y"?e:0,y=o==="x"?Math.round(r?Oi(d.x+b,ZR):m+b):m,v=o==="y"?Math.round(r?Oi(d.y+E,ZR):p+E):p;am(y,v,d,c,u,a,i)},qR=({property:e,element:t,elementsMap:n,scene:i,appState:r})=>{const[s,o]=q(C(t.x,t.y),C(t.x+t.width/2,t.y+t.height/2),t.angle);let a=Da(e==="x"?s:o,2);if(r.croppingElementId===t.id&&it(t)&&t.crop){const l=Koe(t);l&&(a=Da(e==="x"?l.x:l.y,2))}return g(dl,{label:e==="x"?"X":"Y",elements:[t],dragInputCallback:k3e,scene:i,value:a,property:e,appState:r})},L3e=50,ma=e=>{const t=np(),n=e.app.scene.getSceneNonce()||1,i=e.app.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!1}),r=rm(e.app);return g(D3e,{...e,appState:t,sceneNonce:n,selectedElements:i,gridModeEnabled:r})},Vt=({children:e,columns:t=1,heading:n,style:i,...r})=>g("div",{className:me("exc-stats__row",{"exc-stats__row--heading":n}),style:{gridTemplateColumns:`repeat(${t}, 1fr)`,...i},...r,children:e});Vt.displayName="StatsRow";const Qb=({children:e,order:t,style:n,...i})=>g("div",{className:"exc-stats__rows",style:{order:t,...n},...i,children:e});Qb.displayName="StatsRows";ma.StatsRow=Vt;ma.StatsRows=Qb;const D3e=N.memo(({app:e,onClose:t,renderCustomStats:n,selectedElements:i,appState:r,sceneNonce:s,gridModeEnabled:o})=>{const a=e.scene,l=a.getNonDeletedElements(),c=a.getNonDeletedElementsMap(),u=zn(),d=i.length===1?i[0]:null,f=i.length>1?i:null,h=r.croppingElementId&&it(d),m=h?Ka(d):null,[p,b]=N.useState({width:0,height:0}),E=N.useMemo(()=>Mo(_=>{const S=_t(_);b({width:Math.round(S[2])-Math.round(S[0]),height:Math.round(S[3])-Math.round(S[1])})},L3e),[]);N.useEffect(()=>{E(l)},[s,l,E]),N.useEffect(()=>()=>E.cancel(),[E]);const y=N.useMemo(()=>rw(i,r),[i,r]),v=N.useMemo(()=>_F(i),[i]);return g("div",{className:"exc-stats",children:P(js,{padding:3,children:[P("div",{className:"title",children:[g("h2",{children:k("stats.title")}),g("div",{className:"close",onClick:t,children:Ad})]}),P(ZE,{label:g("h3",{children:k("stats.generalStats")}),open:!!(r.stats.panels&xf.generalStats),openTrigger:()=>u(_=>({stats:{open:!0,panels:_.stats.panels^xf.generalStats}})),children:[P(Qb,{children:[g(Vt,{heading:!0,children:k("stats.scene")}),P(Vt,{columns:2,children:[g("div",{children:k("stats.shapes")}),g("div",{children:l.length})]}),P(Vt,{columns:2,children:[g("div",{children:k("stats.width")}),g("div",{children:p.width})]}),P(Vt,{columns:2,children:[g("div",{children:k("stats.height")}),g("div",{children:p.height})]}),o&&P(ge,{children:[g(Vt,{heading:!0,children:"Canvas"}),g(Vt,{children:g(f3e,{property:"gridStep",scene:a,appState:r,setAppState:u})})]})]}),n==null?void 0:n(l,r)]}),!v&&i.length>0&&g("div",{id:"elementStats",style:{marginTop:12},children:g(ZE,{label:g("h3",{children:k("stats.elementProperties")}),open:!!(r.stats.panels&xf.elementProperties),openTrigger:()=>u(_=>({stats:{open:!0,panels:_.stats.panels^xf.elementProperties}})),children:P(Qb,{children:[d&&P(ge,{children:[h&&g(Vt,{heading:!0,children:k("labels.unCroppedDimension")}),r.croppingElementId&&it(d)&&m&&P(Vt,{columns:2,children:[g("div",{children:k("stats.width")}),g("div",{children:Da(m.width,2)})]}),r.croppingElementId&&it(d)&&m&&P(Vt,{columns:2,children:[g("div",{children:k("stats.height")}),g("div",{children:Da(m.height,2)})]}),g(Vt,{heading:!0,"data-testid":"stats-element-type",style:{margin:"0.3125rem 0"},children:r.croppingElementId?k("labels.imageCropping"):k(`element.${d.type}`)}),g(Vt,{children:g(qR,{element:d,property:"x",elementsMap:c,scene:a,appState:r})}),g(Vt,{children:g(qR,{element:d,property:"y",elementsMap:c,scene:a,appState:r})}),g(Vt,{children:g(GR,{property:"width",element:d,scene:a,appState:r})}),g(Vt,{children:g(GR,{property:"height",element:d,scene:a,appState:r})}),!fe(d)&&g(Vt,{children:g(d3e,{property:"angle",element:d,scene:a,appState:r})}),g(Vt,{children:g(U3e,{property:"fontSize",element:d,scene:a,appState:r})})]}),f&&P(ge,{children:[AF(f)&&g(Vt,{heading:!0,children:k("element.group")}),P(Vt,{columns:2,style:{margin:"0.3125rem 0"},children:[g("div",{children:k("stats.shapes")}),g("div",{children:i.length})]}),g(Vt,{children:g(KR,{property:"x",elements:f,elementsMap:c,atomicUnits:y,scene:a,appState:r})}),g(Vt,{children:g(KR,{property:"y",elements:f,elementsMap:c,atomicUnits:y,scene:a,appState:r})}),g(Vt,{children:g(YR,{property:"width",elements:f,elementsMap:c,atomicUnits:y,scene:a,appState:r})}),g(Vt,{children:g(YR,{property:"height",elements:f,elementsMap:c,atomicUnits:y,scene:a,appState:r})}),g(Vt,{children:g(E3e,{property:"angle",elements:f,scene:a,appState:r})}),g(Vt,{children:g(x3e,{property:"fontSize",elements:f,scene:a,appState:r,elementsMap:c})})]})]})})})]})})},(e,t)=>e.sceneNonce===t.sceneNonce&&e.selectedElements===t.selectedElements&&e.appState.stats.panels===t.appState.stats.panels&&e.gridModeEnabled===t.gridModeEnabled&&e.appState.gridStep===t.appState.gridStep&&e.appState.croppingElementId===t.appState.croppingElementId),N3e=({sourceElementId:e,onClose:t,elementsMap:n,appState:i,generateLinkForSelection:r=gB})=>{var d;const s=((d=n.get(e))==null?void 0:d.link)??null,[o,a]=N.useState(s),[l,c]=N.useState(!1);N.useEffect(()=>{const f=Be(n,i);let h=s;if(f.length>0&&r){const m=mB(f,i);m&&(h=Pr(r(m.id,m.type)))}a(h)},[n,i,i.selectedElementIds,s,r]);const u=N.useCallback(()=>{var f;if(o&&o!==((f=n.get(e))==null?void 0:f.link)){const h=n.get(e);h&&ee(h,{link:o})}if(!o&&l&&e){const h=n.get(e);h&&ee(h,{link:null})}t==null||t()},[e,o,n,l,t]);return N.useEffect(()=>{const f=h=>{var m,p;((m=i.openDialog)==null?void 0:m.name)==="elementLinkSelector"&&h.key===z.ENTER&&u(),((p=i.openDialog)==null?void 0:p.name)==="elementLinkSelector"&&h.key===z.ESCAPE&&(t==null||t())};return window.addEventListener("keydown",f),()=>{window.removeEventListener("keydown",f)}},[i,t,u]),P("div",{className:"ElementLinkDialog",children:[P("div",{className:"ElementLinkDialog__header",children:[g("h2",{children:k("elementLink.title")}),g("p",{children:k("elementLink.desc")})]}),P("div",{className:"ElementLinkDialog__input",children:[g(Rh,{value:o??"",onChange:f=>{l||c(!0),a(f)},onKeyDown:f=>{f.key===z.ENTER&&u()},className:"ElementLinkDialog__input-field",selectOnRender:!0}),s&&o&&g(Ze,{type:"button",title:k("buttons.remove"),"aria-label":k("buttons.remove"),label:k("buttons.remove"),onClick:()=>{a(null),c(!0)},className:"ElementLinkDialog__remove",icon:Tc})]}),P("div",{className:"ElementLinkDialog__actions",children:[g(Mh,{label:k("buttons.cancel"),onClick:()=>{t==null||t()},style:{marginRight:10}}),g(Mh,{label:k("buttons.confirm"),onClick:u,actionType:"primary"})]})]})},sw=({children:e,onClose:t})=>{const[n,i]=N.useState(!!e),{container:r}=Zo(),s=se.useCallback(()=>{i(!1),t&&t(),r==null||r.focus()},[t,r]);return g(ge,{children:n&&g($r,{size:"small",onCloseRequest:s,title:k("errorDialog.title"),children:g("div",{style:{whiteSpace:"pre-wrap"},children:e})})})},O3e=()=>P("div",{className:"HelpDialog__header",children:[P("a",{className:"HelpDialog__btn",href:"https://docs.excalidraw.com",target:"_blank",rel:"noopener noreferrer",children:[g("div",{className:"HelpDialog__link-icon",children:KC}),k("helpDialog.documentation")]}),P("a",{className:"HelpDialog__btn",href:"https://plus.excalidraw.com/blog",target:"_blank",rel:"noopener noreferrer",children:[g("div",{className:"HelpDialog__link-icon",children:KC}),k("helpDialog.blog")]}),P("a",{className:"HelpDialog__btn",href:"https://github.com/excalidraw/excalidraw/issues",target:"_blank",rel:"noopener noreferrer",children:[g("div",{className:"HelpDialog__link-icon",children:i_}),k("helpDialog.github")]}),P("a",{className:"HelpDialog__btn",href:"https://youtube.com/@excalidraw",target:"_blank",rel:"noopener noreferrer",children:[g("div",{className:"HelpDialog__link-icon",children:Pz}),"YouTube"]})]}),P3e=e=>P(ge,{children:[g("h3",{children:e.title}),g("div",{className:"HelpDialog__islands-container",children:e.children})]}),v7=e=>P("div",{className:`HelpDialog__island ${e.className}`,children:[g("h4",{className:"HelpDialog__island-title",children:e.caption}),g("div",{className:"HelpDialog__island-content",children:e.children})]});function*F3e(e,t){let n=!0;for(const i of e)n||(yield t),n=!1,yield i}const B3e=e=>e.replace(/\b[a-z]\b/,t=>t.toUpperCase()),pe=({label:e,shortcuts:t,isOr:n=!0})=>{const i=t.map(r=>(r.endsWith("++")?[...r.slice(0,-2).split("+"),"+"]:r.split("+")).map(o=>g(z3e,{children:B3e(o)},o)));return P("div",{className:"HelpDialog__shortcut",children:[g("div",{children:e}),g("div",{className:"HelpDialog__key-container",children:[...F3e(i,n?k("helpDialog.or"):null)]})]})},z3e=e=>g("kbd",{className:"HelpDialog__key",...e}),H3e=({onClose:e})=>{const t=se.useCallback(()=>{e&&e()},[e]);return g(ge,{children:P($r,{onCloseRequest:t,title:k("helpDialog.title"),className:"HelpDialog",children:[g(O3e,{}),P(P3e,{title:k("helpDialog.shortcuts"),children:[P(v7,{className:"HelpDialog__island--tools",caption:k("helpDialog.tools"),children:[g(pe,{label:k("toolBar.hand"),shortcuts:[z.H]}),g(pe,{label:k("toolBar.selection"),shortcuts:[z.V,z[1]]}),g(pe,{label:k("toolBar.rectangle"),shortcuts:[z.R,z[2]]}),g(pe,{label:k("toolBar.diamond"),shortcuts:[z.D,z[3]]}),g(pe,{label:k("toolBar.ellipse"),shortcuts:[z.O,z[4]]}),g(pe,{label:k("toolBar.arrow"),shortcuts:[z.A,z[5]]}),g(pe,{label:k("toolBar.line"),shortcuts:[z.L,z[6]]}),g(pe,{label:k("toolBar.freedraw"),shortcuts:[z.P,z[7]]}),g(pe,{label:k("toolBar.text"),shortcuts:[z.T,z[8]]}),g(pe,{label:k("toolBar.image"),shortcuts:[z[9]]}),g(pe,{label:k("toolBar.eraser"),shortcuts:[z.E,z[0]]}),g(pe,{label:k("toolBar.frame"),shortcuts:[z.F]}),g(pe,{label:k("toolBar.laser"),shortcuts:[z.K]}),g(pe,{label:k("labels.eyeDropper"),shortcuts:[z.I,"Shift+S","Shift+G"]}),g(pe,{label:k("helpDialog.editLineArrowPoints"),shortcuts:[Q("CtrlOrCmd+Enter")]}),g(pe,{label:k("helpDialog.editText"),shortcuts:[Q("Enter")]}),g(pe,{label:k("helpDialog.textNewLine"),shortcuts:[Q("Enter"),Q("Shift+Enter")]}),g(pe,{label:k("helpDialog.textFinish"),shortcuts:[Q("Esc"),Q("CtrlOrCmd+Enter")]}),g(pe,{label:k("helpDialog.curvedArrow"),shortcuts:["A",k("helpDialog.click"),k("helpDialog.click"),k("helpDialog.click")],isOr:!1}),g(pe,{label:k("helpDialog.curvedLine"),shortcuts:["L",k("helpDialog.click"),k("helpDialog.click"),k("helpDialog.click")],isOr:!1}),g(pe,{label:k("helpDialog.cropStart"),shortcuts:[k("helpDialog.doubleClick"),Q("Enter")],isOr:!0}),g(pe,{label:k("helpDialog.cropFinish"),shortcuts:[Q("Enter"),Q("Escape")],isOr:!0}),g(pe,{label:k("toolBar.lock"),shortcuts:[z.Q]}),g(pe,{label:k("helpDialog.preventBinding"),shortcuts:[Q("CtrlOrCmd")]}),g(pe,{label:k("toolBar.link"),shortcuts:[Q("CtrlOrCmd+K")]})]}),P(v7,{className:"HelpDialog__island--view",caption:k("helpDialog.view"),children:[g(pe,{label:k("buttons.zoomIn"),shortcuts:[Q("CtrlOrCmd++")]}),g(pe,{label:k("buttons.zoomOut"),shortcuts:[Q("CtrlOrCmd+-")]}),g(pe,{label:k("buttons.resetZoom"),shortcuts:[Q("CtrlOrCmd+0")]}),g(pe,{label:k("helpDialog.zoomToFit"),shortcuts:["Shift+1"]}),g(pe,{label:k("helpDialog.zoomToSelection"),shortcuts:["Shift+2"]}),g(pe,{label:k("helpDialog.movePageUpDown"),shortcuts:["PgUp/PgDn"]}),g(pe,{label:k("helpDialog.movePageLeftRight"),shortcuts:["Shift+PgUp/PgDn"]}),g(pe,{label:k("buttons.zenMode"),shortcuts:[Q("Alt+Z")]}),g(pe,{label:k("buttons.objectsSnapMode"),shortcuts:[Q("Alt+S")]}),g(pe,{label:k("labels.toggleGrid"),shortcuts:[Q("CtrlOrCmd+'")]}),g(pe,{label:k("labels.viewMode"),shortcuts:[Q("Alt+R")]}),g(pe,{label:k("labels.toggleTheme"),shortcuts:[Q("Alt+Shift+D")]}),g(pe,{label:k("stats.fullTitle"),shortcuts:[Q("Alt+/")]}),g(pe,{label:k("search.title"),shortcuts:[zi("searchMenu")]}),g(pe,{label:k("commandPalette.title"),shortcuts:C0?[zi("commandPalette")]:[zi("commandPalette"),zi("commandPalette",1)]})]}),P(v7,{className:"HelpDialog__island--editor",caption:k("helpDialog.editor"),children:[g(pe,{label:k("helpDialog.createFlowchart"),shortcuts:[Q("CtrlOrCmd+Arrow Key")],isOr:!0}),g(pe,{label:k("helpDialog.navigateFlowchart"),shortcuts:[Q("Alt+Arrow Key")],isOr:!0}),g(pe,{label:k("labels.moveCanvas"),shortcuts:[Q(`Space+${k("helpDialog.drag")}`),Q(`Wheel+${k("helpDialog.drag")}`)],isOr:!0}),g(pe,{label:k("buttons.clearReset"),shortcuts:[Q("CtrlOrCmd+Delete")]}),g(pe,{label:k("labels.delete"),shortcuts:[Q("Delete")]}),g(pe,{label:k("labels.cut"),shortcuts:[Q("CtrlOrCmd+X")]}),g(pe,{label:k("labels.copy"),shortcuts:[Q("CtrlOrCmd+C")]}),g(pe,{label:k("labels.paste"),shortcuts:[Q("CtrlOrCmd+V")]}),g(pe,{label:k("labels.pasteAsPlaintext"),shortcuts:[Q("CtrlOrCmd+Shift+V")]}),g(pe,{label:k("labels.selectAll"),shortcuts:[Q("CtrlOrCmd+A")]}),g(pe,{label:k("labels.multiSelect"),shortcuts:[Q(`Shift+${k("helpDialog.click")}`)]}),g(pe,{label:k("helpDialog.deepSelect"),shortcuts:[Q(`CtrlOrCmd+${k("helpDialog.click")}`)]}),g(pe,{label:k("helpDialog.deepBoxSelect"),shortcuts:[Q(`CtrlOrCmd+${k("helpDialog.drag")}`)]}),(G_||C0)&&g(pe,{label:k("labels.copyAsPng"),shortcuts:[Q("Shift+Alt+C")]}),g(pe,{label:k("labels.copyStyles"),shortcuts:[Q("CtrlOrCmd+Alt+C")]}),g(pe,{label:k("labels.pasteStyles"),shortcuts:[Q("CtrlOrCmd+Alt+V")]}),g(pe,{label:k("labels.sendToBack"),shortcuts:[Q(zo?"CtrlOrCmd+Alt+[":"CtrlOrCmd+Shift+[")]}),g(pe,{label:k("labels.bringToFront"),shortcuts:[Q(zo?"CtrlOrCmd+Alt+]":"CtrlOrCmd+Shift+]")]}),g(pe,{label:k("labels.sendBackward"),shortcuts:[Q("CtrlOrCmd+[")]}),g(pe,{label:k("labels.bringForward"),shortcuts:[Q("CtrlOrCmd+]")]}),g(pe,{label:k("labels.alignTop"),shortcuts:[Q("CtrlOrCmd+Shift+Up")]}),g(pe,{label:k("labels.alignBottom"),shortcuts:[Q("CtrlOrCmd+Shift+Down")]}),g(pe,{label:k("labels.alignLeft"),shortcuts:[Q("CtrlOrCmd+Shift+Left")]}),g(pe,{label:k("labels.alignRight"),shortcuts:[Q("CtrlOrCmd+Shift+Right")]}),g(pe,{label:k("labels.duplicateSelection"),shortcuts:[Q("CtrlOrCmd+D"),Q(`Alt+${k("helpDialog.drag")}`)]}),g(pe,{label:k("helpDialog.toggleElementLock"),shortcuts:[Q("CtrlOrCmd+Shift+L")]}),g(pe,{label:k("buttons.undo"),shortcuts:[Q("CtrlOrCmd+Z")]}),g(pe,{label:k("buttons.redo"),shortcuts:aP?[Q("CtrlOrCmd+Y"),Q("CtrlOrCmd+Shift+Z")]:[Q("CtrlOrCmd+Shift+Z")]}),g(pe,{label:k("labels.group"),shortcuts:[Q("CtrlOrCmd+G")]}),g(pe,{label:k("labels.ungroup"),shortcuts:[Q("CtrlOrCmd+Shift+G")]}),g(pe,{label:k("labels.flipHorizontal"),shortcuts:[Q("Shift+H")]}),g(pe,{label:k("labels.flipVertical"),shortcuts:[Q("Shift+V")]}),g(pe,{label:k("labels.showStroke"),shortcuts:[Q("S")]}),g(pe,{label:k("labels.showBackground"),shortcuts:[Q("G")]}),g(pe,{label:k("labels.showFonts"),shortcuts:[Q("Shift+F")]}),g(pe,{label:k("labels.decreaseFontSize"),shortcuts:[Q("CtrlOrCmd+Shift+<")]}),g(pe,{label:k("labels.increaseFontSize"),shortcuts:[Q("CtrlOrCmd+Shift+>")]})]})]})]})})},V3e=2e3,ow=()=>{const[e,t]=N.useState(null),n=N.useRef(0),i=()=>{clearTimeout(n.current),t("success"),n.current=window.setTimeout(()=>{t(null)},V3e)},r=N.useCallback(()=>{t(null)},[]);return{copyStatus:e,resetCopyStatus:r,onCopy:i}},yU=({title:e,name:t,checked:n,onChange:i,disabled:r=!1})=>g("div",{className:me("Switch",{toggled:n,disabled:r}),children:g("input",{name:t,id:t,title:e,type:"checkbox",checked:n,disabled:r,onChange:()=>i(!n),onKeyDown:s=>{s.key===" "&&i(!n)}})}),$3e="filter"in document.createElement("canvas").getContext("2d"),G3e=()=>P("div",{children:[g("h3",{children:k("canvasError.cannotShowPreview")}),g("p",{children:g("span",{children:k("canvasError.canvasTooBig")})}),P("em",{children:["(",k("canvasError.canvasTooBigTip"),")"]})]}),X3e=({appStateSnapshot:e,elementsSnapshot:t,files:n,actionManager:i,onExportImage:r,name:s})=>{const o=Fn(t,e),[a,l]=N.useState(s),[c,u]=N.useState(o),[d,f]=N.useState(e.exportBackground),[h,m]=N.useState(e.exportWithDarkMode),[p,b]=N.useState(e.exportEmbedScene),[E,y]=N.useState(e.exportScale),v=N.useRef(null),[_,S]=N.useState(null),{onCopy:M,copyStatus:w,resetCopyStatus:T}=ow();N.useEffect(()=>{T()},[a,d,h,E,p,T]);const{exportedElements:A,exportingFrame:I}=D5(t,e,c);return N.useEffect(()=>{const R=v.current;if(!R)return;const D=R.offsetWidth,L=R.offsetHeight;D&&F5({elements:A,appState:{...e,name:a,exportBackground:d,exportWithDarkMode:h,exportScale:E,exportEmbedScene:p},files:n,exportPadding:qh,maxWidthOrHeight:Math.max(D,L),exportingFrame:I}).then(G=>(S(null),tm(G).then(()=>{R.replaceChildren(G)}).catch(V=>{throw V.name==="CANVAS_POSSIBLY_TOO_BIG"?new Error(k("canvasError.canvasTooBig")):V}))).catch(G=>{console.error(G),S(G)})},[e,n,A,I,a,d,h,E,p]),P("div",{className:"ImageExportModal",children:[g("h3",{children:k("imageExportDialog.header")}),P("div",{className:"ImageExportModal__preview",children:[g("div",{className:"ImageExportModal__preview__canvas",ref:v,children:_&&g(G3e,{})}),g("div",{className:"ImageExportModal__preview__filename",children:!Rd&&g("input",{type:"text",className:"TextInput",value:a,style:{width:"30ch"},onChange:R=>{l(R.target.value),i.executeAction(h6e,"ui",R.target.value)}})})]}),P("div",{className:"ImageExportModal__settings",children:[g("h3",{children:k("imageExportDialog.header")}),o&&g(Wg,{label:k("imageExportDialog.label.onlySelected"),name:"exportOnlySelected",children:g(yU,{name:"exportOnlySelected",checked:c,onChange:R=>{u(R)}})}),g(Wg,{label:k("imageExportDialog.label.withBackground"),name:"exportBackgroundSwitch",children:g(yU,{name:"exportBackgroundSwitch",checked:d,onChange:R=>{f(R),i.executeAction(m6e,"ui",R)}})}),$3e&&g(Wg,{label:k("imageExportDialog.label.darkMode"),name:"exportDarkModeSwitch",children:g(yU,{name:"exportDarkModeSwitch",checked:h,onChange:R=>{m(R),i.executeAction(p6e,"ui",R)}})}),g(Wg,{label:k("imageExportDialog.label.embedScene"),tooltip:k("imageExportDialog.tooltip.embedScene"),name:"exportEmbedSwitch",children:g(yU,{name:"exportEmbedSwitch",checked:p,onChange:R=>{b(R),i.executeAction(T$,"ui",R)}})}),g(Wg,{label:k("imageExportDialog.label.scale"),name:"exportScale",children:g(iX,{name:"exportScale",value:E,onChange:R=>{y(R),i.executeAction(g6e,"ui",R)},choices:c9.map(R=>({value:R,label:`${R}×`}))})}),P("div",{className:"ImageExportModal__settings__buttons",children:[g(Ks,{className:"ImageExportModal__settings__buttons__button",label:k("imageExportDialog.title.exportToPng"),onClick:()=>r(d8.png,A,{exportingFrame:I}),icon:uA,children:k("imageExportDialog.button.exportToPng")}),g(Ks,{className:"ImageExportModal__settings__buttons__button",label:k("imageExportDialog.title.exportToSvg"),onClick:()=>r(d8.svg,A,{exportingFrame:I}),icon:uA,children:k("imageExportDialog.button.exportToSvg")}),(G_||C0)&&g(Ks,{className:"ImageExportModal__settings__buttons__button",label:k("imageExportDialog.title.copyPngToClipboard"),status:w,onClick:async()=>{await r(d8.clipboard,A,{exportingFrame:I}),M()},icon:Ym,children:k("imageExportDialog.button.copyPngToClipboard")})]})]})]})},Wg=({label:e,children:t,tooltip:n,name:i})=>P("div",{className:"ImageExportModal__settings__setting",title:e,children:[P("label",{htmlFor:i,className:"ImageExportModal__settings__setting__label",children:[e,n&&g(nl,{label:n,long:!0,children:nue})]}),g("div",{className:"ImageExportModal__settings__setting__content",children:t})]}),j3e=({elements:e,appState:t,files:n,actionManager:i,onExportImage:r,onCloseRequest:s,name:o})=>{const[{appStateSnapshot:a,elementsSnapshot:l}]=N.useState(()=>({appStateSnapshot:Na(t),elementsSnapshot:Na(e)}));return g($r,{onCloseRequest:s,size:"wide",title:!1,children:g(X3e,{elementsSnapshot:l,appStateSnapshot:a,files:n,actionManager:i,onExportImage:r,name:o})})},b4=({children:e,color:t})=>g("div",{className:"Card",style:{"--card-color":t==="primary"?"var(--color-primary)":ai[t][7],"--card-color-darker":t==="primary"?"var(--color-primary-darker)":ai[t][8],"--card-color-darkest":t==="primary"?"var(--color-primary-darkest)":ai[t][9]},children:e}),Y3e=({elements:e,appState:t,setAppState:n,files:i,actionManager:r,exportOpts:s,canvas:o,onCloseRequest:a})=>{const{onExportToBackend:l}=s;return g("div",{className:"ExportDialog ExportDialog--json",children:P("div",{className:"ExportDialog-cards",children:[s.saveFileToDisk&&P(b4,{color:"lime",children:[g("div",{className:"Card-icon",children:cce}),g("h2",{children:k("exportDialog.disk_title")}),P("div",{className:"Card-details",children:[k("exportDialog.disk_details"),!Rd&&r.renderAction("changeProjectName")]}),g(Ze,{className:"Card-button",type:"button",title:k("exportDialog.disk_button"),"aria-label":k("exportDialog.disk_button"),showAriaLabel:!0,onClick:()=>{r.executeAction(S$,"ui")}})]}),l&&P(b4,{color:"pink",children:[g("div",{className:"Card-icon",children:Rb}),g("h2",{children:k("exportDialog.link_title")}),g("div",{className:"Card-details",children:k("exportDialog.link_details")}),g(Ze,{className:"Card-button",type:"button",title:k("exportDialog.link_button"),"aria-label":k("exportDialog.link_button"),showAriaLabel:!0,onClick:async()=>{try{ct("export","link",`ui (${Pm()})`),await l(e,t,i),a()}catch(c){n({errorMessage:c.message})}}})]}),s.renderCustomUI&&s.renderCustomUI(e,t,i,o)]})})},W3e=({elements:e,appState:t,files:n,actionManager:i,exportOpts:r,canvas:s,setAppState:o})=>{var l;const a=se.useCallback(()=>{o({openDialog:null})},[o]);return g(ge,{children:((l=t.openDialog)==null?void 0:l.name)==="jsonExport"&&g($r,{onCloseRequest:a,title:k("buttons.export"),children:g(Y3e,{elements:e,appState:t,setAppState:o,files:n,actionManager:i,onCloseRequest:a,exportOpts:r,canvas:s})})})},K3e="small",Z3e=e=>P("label",{className:me("ToolIcon ToolIcon__LaserPointer",`ToolIcon_size_${K3e}`,{"is-mobile":e.isMobile}),title:`${e.title}`,children:[g("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:e.name,onChange:e.onChange,checked:e.checked,"aria-label":e.title,"data-testid":"toolbar-LaserPointer"}),g("div",{className:"ToolIcon__icon",children:kz})]}),q3e=({UIOptions:e})=>P(Et,{__fallback:!0,children:[g(Et.DefaultItems.LoadScene,{}),g(Et.DefaultItems.SaveToActiveFile,{}),e.canvasActions.export&&g(Et.DefaultItems.Export,{}),e.canvasActions.saveAsImage&&g(Et.DefaultItems.SaveAsImage,{}),g(Et.DefaultItems.SearchMenu,{}),g(Et.DefaultItems.Help,{}),g(Et.DefaultItems.ClearCanvas,{}),g(Et.Separator,{}),g(Et.Group,{title:"Excalidraw links",children:g(Et.DefaultItems.Socials,{})}),g(Et.Separator,{}),g(Et.DefaultItems.ToggleTheme,{}),g(Et.DefaultItems.ChangeCanvasBackground,{})]}),Q3e=()=>P(wu,{__fallback:!0,children:[g(wu.Actions.SaveToDisk,{}),g(wu.Actions.ExportToImage,{})]}),J3e=({actionManager:e,appState:t,files:n,setAppState:i,elements:r,canvas:s,onLockToggle:o,onHandToolToggle:a,onPenModeToggle:l,showExitZenModeBtn:c,renderTopRightUI:u,renderCustomStats:d,UIOptions:f,onExportImage:h,renderWelcomeScreen:m,children:p,app:b,isCollaborating:E,generateLinkForSelection:y})=>{var H,$,j;const v=qn(),_=Nye(),S=_.tunnelsJotai.Provider,[M,w]=hn(y5),T=()=>f.canvasActions.export?g(W3e,{elements:r,appState:t,files:n,actionManager:e,exportOpts:f.canvasActions.export,canvas:s,setAppState:i}):null,A=()=>{var X;return!f.canvasActions.saveAsImage||((X=t.openDialog)==null?void 0:X.name)!=="imageExport"?null:g(j3e,{elements:r,appState:t,files:n,actionManager:e,onExportImage:h,onCloseRequest:()=>i({openDialog:null}),name:b.getName()})},I=()=>P("div",{style:{position:"relative"},children:[g(_.MainMenuTunnel.Out,{}),m&&g(_.WelcomeScreenMenuHintTunnel.Out,{})]}),R=()=>g(om,{heading:"selectedShapeActions",className:me("selected-shape-actions zen-mode-transition",{"transition-left":t.zenModeEnabled}),children:g(js,{className:gh.SHAPE_ACTIONS_MENU,padding:2,style:{maxHeight:`${t.height-166}px`},children:g(oG,{appState:t,elementsMap:b.scene.getNonDeletedElementsMap(),renderAction:e.renderAction,app:b})})}),D=()=>{var le,we,he,Ve,Ye;const X=X_(t,r),K=t.stats.open&&!t.zenModeEnabled&&!t.viewModeEnabled&&((le=t.openDialog)==null?void 0:le.name)!=="elementLinkSelector";return g(vG,{side:"top",children:P("div",{className:"App-menu App-menu_top",children:[P(ls.Col,{gap:6,className:me("App-menu_top__left"),children:[I(),X&&R()]}),!t.viewModeEnabled&&((we=t.openDialog)==null?void 0:we.name)!=="elementLinkSelector"&&g(om,{heading:"shapes",className:"shapes-section",children:wt=>P("div",{style:{position:"relative"},children:[m&&g(_.WelcomeScreenToolbarHintTunnel.Out,{}),g(ls.Col,{gap:4,align:"start",children:P(ls.Row,{gap:1,className:me("App-toolbar-container",{"zen-mode":t.zenModeEnabled}),children:[P(js,{padding:1,className:me("App-toolbar",{"zen-mode":t.zenModeEnabled}),children:[g(wG,{appState:t,isMobile:v.editor.isMobile,device:v,app:b}),wt,P(ls.Row,{gap:1,children:[g(TG,{zenModeEnabled:t.zenModeEnabled,checked:t.penMode,onChange:()=>l(null),title:k("toolBar.penMode"),penDetected:t.penDetected}),g(EG,{checked:t.activeTool.locked,onChange:o,title:k("toolBar.lock")}),g("div",{className:"App-toolbar__divider"}),g(_G,{checked:Ih(t),onChange:()=>a(),title:k("toolBar.hand"),isMobile:!0}),g(aG,{appState:t,activeTool:t.activeTool,UIOptions:f,app:b})]})]}),E&&g(js,{style:{marginLeft:8,alignSelf:"center",height:"fit-content"},children:g(Z3e,{title:k("toolBar.laser"),checked:t.activeTool.type===Gn.laser,onChange:()=>b.setActiveTool({type:Gn.laser}),isMobile:!0})})]})})]})}),P("div",{className:me("layer-ui__wrapper__top-right zen-mode-transition",{"transition-right":t.zenModeEnabled}),children:[t.collaborators.size>0&&g(SG,{collaborators:t.collaborators,userToFollow:((he=t.userToFollow)==null?void 0:he.socketId)||null}),u==null?void 0:u(v.editor.isMobile,t),!t.viewModeEnabled&&((Ve=t.openDialog)==null?void 0:Ve.name)!=="elementLinkSelector"&&(!G||((Ye=t.openSidebar)==null?void 0:Ye.name)!==fs.name)&&g(_.DefaultSidebarTriggerTunnel.Out,{}),K&&g(ma,{app:b,onClose:()=>{e.executeAction(s4)},renderCustomStats:d})]})]})})},L=()=>g(zR,{__fallback:!0,onDock:X=>{ct("sidebar",`toggleDock (${X?"dock":"undock"})`,`(${v.editor.isMobile?"mobile":"desktop"})`)}}),G=SB(tw),V=P(ge,{children:[p,g(q3e,{UIOptions:f}),g(zR.Trigger,{__fallback:!0,icon:e_,title:G1(k("toolBar.library")),onToggle:X=>{X&&ct("sidebar",`${fs.name} (open)`,`button (${v.editor.isMobile?"mobile":"desktop"})`)},tab:fs.defaultTab,children:k("toolBar.library")}),g(Q3e,{}),((H=t.openDialog)==null?void 0:H.name)==="ttd"&&g(CX,{__fallback:!0}),t.isLoading&&g(yG,{delay:250}),t.errorMessage&&g(sw,{onClose:()=>i({errorMessage:null}),children:t.errorMessage}),M&&!v.editor.isMobile&&g(Mhe,{colorPickerType:M.colorPickerType,onCancel:()=>{w(null)},onChange:(X,K,le,{altKey:we})=>{var he;if(!(X!=="elementBackground"&&X!=="elementStroke"))if(le.length){for(const Ve of le)ee(Ve,{[we&&M.swapPreviewOnAlt?X==="elementBackground"?"strokeColor":"backgroundColor":X==="elementBackground"?"backgroundColor":"strokeColor"]:K},!1),Xt.delete(Ve);(he=Vo.getScene(le[0]))==null||he.triggerUpdate()}else i(X==="elementBackground"?{currentItemBackgroundColor:K}:{currentItemStrokeColor:K})},onSelect:(X,K)=>{var le;w(we=>we!=null&&we.keepOpenOnAlt&&K.altKey?we:null),(le=M==null?void 0:M.onSelect)==null||le.call(M,X,K)}}),(($=t.openDialog)==null?void 0:$.name)==="help"&&g(H3e,{onClose:()=>{i({openDialog:null})}}),g(zye,{}),((j=t.openDialog)==null?void 0:j.name)==="elementLinkSelector"&&g(N3e,{sourceElementId:t.openDialog.sourceElementId,onClose:()=>{i({openDialog:null})},elementsMap:b.scene.getNonDeletedElementsMap(),appState:t,generateLinkForSelection:y}),g(_.OverwriteConfirmDialogTunnel.Out,{}),A(),T(),t.pasteDialog.shown&&g(e7e,{setAppState:i,appState:t,onClose:()=>i({pasteDialog:{shown:!1,data:null}})}),v.editor.isMobile&&g(J8e,{app:b,appState:t,elements:r,actionManager:e,renderJSONExportDialog:T,renderImageExportDialog:A,setAppState:i,onLockToggle:o,onHandToolToggle:a,onPenModeToggle:l,renderTopRightUI:u,renderCustomStats:d,renderSidebars:L,device:v,renderWelcomeScreen:m,UIOptions:f}),!v.editor.isMobile&&P(ge,{children:[P("div",{className:"layer-ui__wrapper",style:t.openSidebar&&G&&v.editor.canFitSidebar?{width:"calc(100% - var(--right-sidebar-width))"}:{},children:[m&&g(_.WelcomeScreenCenterTunnel.Out,{}),D(),g(IG,{appState:t,actionManager:e,showExitZenModeBtn:c,renderWelcomeScreen:m}),t.scrolledOutside&&g("button",{type:"button",className:"scroll-back-to-content",onClick:()=>{i(X=>({...H0(r,X)}))},children:k("buttons.scrollBackToContent")})]}),L()]})]});return g(jH.Provider,{value:t,children:g(S,{children:g(iG.Provider,{value:_,children:V})})})},QR=e=>{const{suggestedBindings:t,startBoundElement:n,cursorButton:i,scrollX:r,scrollY:s,...o}=e;return o},eEe=(e,t)=>{if(e.children!==t.children)return!1;const{canvas:n,appState:i,...r}=e,{canvas:s,appState:o,...a}=t;return _i(QR(i),QR(o),{selectedElementIds:_i,selectedGroupIds:_i})&&_i(r,a)},tEe=se.memo(J3e,eEe),nEe="small",_7=e=>P("label",{className:me("ToolIcon ToolIcon__MagicButton",`ToolIcon_size_${nEe}`,{"is-mobile":e.isMobile}),title:`${e.title}`,children:[g("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:e.name,onChange:e.onChange,checked:e.checked,"aria-label":e.title}),g("div",{className:"ToolIcon__icon",children:e.icon})]}),iEe=({trails:e})=>{const t=N.useRef(null);return N.useEffect(()=>{if(t.current)for(const n of e)n.start(t.current);return()=>{for(const n of e)n.stop()}},e),g("div",{className:"SVGLayer",children:g("svg",{ref:t})})},rEe=e=>{const t=N.useRef(!1);return N.useEffect(()=>{var l;if(!t.current){t.current=!0;return}const n=new Map,i=new Map,r=new Map,s=new Map,o=new Map;e.appState.collaborators.forEach((c,u)=>{if(c.selectedElementIds)for(const d of Object.keys(c.selectedElementIds))r.has(d)||r.set(d,[]),r.get(d).push(u);!c.pointer||c.pointer.renderCursor===!1||(c.username&&s.set(u,c.username),c.userState&&o.set(u,c.userState),i.set(u,Os({sceneX:c.pointer.x,sceneY:c.pointer.y},e.appState)),n.set(u,c.button))});const a=((l=e.containerRef)==null?void 0:l.current)&&getComputedStyle(e.containerRef.current).getPropertyValue("--color-selection")||"#6965db";L8e({canvas:e.canvas,elementsMap:e.elementsMap,visibleElements:e.visibleElements,selectedElements:e.selectedElements,allElementsMap:e.allElementsMap,scale:window.devicePixelRatio,appState:e.appState,renderConfig:{remotePointerViewportCoords:i,remotePointerButton:n,remoteSelectedElementIds:r,remotePointerUsernames:s,remotePointerUserStates:o,selectionColor:a,renderScrollbars:!1},device:e.device,callback:e.renderInteractiveSceneCallback},Q_())}),g("canvas",{className:"excalidraw__canvas interactive",style:{width:e.appState.width,height:e.appState.height,cursor:e.appState.viewModeEnabled?Tt.GRAB:Tt.AUTO},width:e.appState.width*e.scale,height:e.appState.height*e.scale,ref:e.handleCanvasRef,onContextMenu:e.onContextMenu,onPointerMove:e.onPointerMove,onPointerUp:e.onPointerUp,onPointerCancel:e.onPointerCancel,onTouchMove:e.onTouchMove,onPointerDown:e.onPointerDown,onDoubleClick:e.appState.viewModeEnabled?void 0:e.onDoubleClick,children:k("labels.drawingCanvas")})},JR=e=>({zoom:e.zoom,scrollX:e.scrollX,scrollY:e.scrollY,width:e.width,height:e.height,viewModeEnabled:e.viewModeEnabled,openDialog:e.openDialog,editingGroupId:e.editingGroupId,editingLinearElement:e.editingLinearElement,selectedElementIds:e.selectedElementIds,frameToHighlight:e.frameToHighlight,offsetLeft:e.offsetLeft,offsetTop:e.offsetTop,theme:e.theme,pendingImageElementId:e.pendingImageElementId,selectionElement:e.selectionElement,selectedGroupIds:e.selectedGroupIds,selectedLinearElement:e.selectedLinearElement,multiElement:e.multiElement,isBindingEnabled:e.isBindingEnabled,suggestedBindings:e.suggestedBindings,isRotating:e.isRotating,elementsToHighlight:e.elementsToHighlight,collaborators:e.collaborators,activeEmbeddable:e.activeEmbeddable,snapLines:e.snapLines,zenModeEnabled:e.zenModeEnabled,editingTextElement:e.editingTextElement,isCropping:e.isCropping,croppingElementId:e.croppingElementId,searchMatches:e.searchMatches}),sEe=(e,t)=>e.selectionNonce!==t.selectionNonce||e.sceneNonce!==t.sceneNonce||e.scale!==t.scale||e.elementsMap!==t.elementsMap||e.visibleElements!==t.visibleElements||e.selectedElements!==t.selectedElements?!1:_i(JR(e.appState),JR(t.appState)),oEe=se.memo(rEe,sEe),aEe=e=>{const t=N.useRef(null),n=N.useRef(!1);return N.useEffect(()=>{const i=t.current;if(!i)return;const r=e.canvas;n.current||(n.current=!0,i.replaceChildren(r),r.classList.add("excalidraw__canvas","static"));const s=`${e.appState.width}px`,o=`${e.appState.height}px`;r.style.width!==s&&(r.style.width=s),r.style.height!==o&&(r.style.height=o);const a=e.appState.width*e.scale,l=e.appState.height*e.scale;r.width!==a&&(r.width=a),r.height!==l&&(r.height=l),c$({canvas:r,rc:e.rc,scale:e.scale,elementsMap:e.elementsMap,allElementsMap:e.allElementsMap,visibleElements:e.visibleElements,appState:e.appState,renderConfig:e.renderConfig},Q_())}),g("div",{className:"excalidraw__canvas-wrapper",ref:t})},ek=e=>({zoom:e.zoom,scrollX:e.scrollX,scrollY:e.scrollY,width:e.width,height:e.height,viewModeEnabled:e.viewModeEnabled,openDialog:e.openDialog,hoveredElementIds:e.hoveredElementIds,offsetLeft:e.offsetLeft,offsetTop:e.offsetTop,theme:e.theme,pendingImageElementId:e.pendingImageElementId,shouldCacheIgnoreZoom:e.shouldCacheIgnoreZoom,viewBackgroundColor:e.viewBackgroundColor,exportScale:e.exportScale,selectedElementsAreBeingDragged:e.selectedElementsAreBeingDragged,gridSize:e.gridSize,gridStep:e.gridStep,frameRendering:e.frameRendering,selectedElementIds:e.selectedElementIds,frameToHighlight:e.frameToHighlight,editingGroupId:e.editingGroupId,currentHoveredFontFamily:e.currentHoveredFontFamily,croppingElementId:e.croppingElementId}),lEe=(e,t)=>e.sceneNonce!==t.sceneNonce||e.scale!==t.scale||e.elementsMap!==t.elementsMap||e.visibleElements!==t.visibleElements?!1:_i(ek(e.appState),ek(t.appState))&&_i(e.renderConfig,t.renderConfig),cEe=se.memo(aEe,lEe),AX=({canvas:e,rc:t,newElement:n,elementsMap:i,allElementsMap:r,scale:s,appState:o,renderConfig:a})=>{if(e){const[l,c]=R5(e,s),u=k5({canvas:e,scale:s,normalizedWidth:l,normalizedHeight:c});u.save(),u.scale(o.zoom.value,o.zoom.value),n&&n.type!=="selection"?iu(n,i,r,t,u,a,o):u.clearRect(0,0,l,c)}},uEe=Qh(e=>{AX(e)},{trailing:!0}),dEe=(e,t)=>{if(t){uEe(e);return}AX(e)},fEe=e=>{const t=N.useRef(null);return N.useEffect(()=>{t.current&&dEe({canvas:t.current,scale:e.scale,newElement:e.appState.newElement,elementsMap:e.elementsMap,allElementsMap:e.allElementsMap,rc:e.rc,renderConfig:e.renderConfig,appState:e.appState},Q_())}),g("canvas",{className:"excalidraw__canvas",style:{width:e.appState.width,height:e.appState.height},width:e.appState.width*e.scale,height:e.appState.height*e.scale,ref:t})},hEe=5e3,gEe=({message:e,onClose:t,closable:n=!1,duration:i=hEe,style:r})=>{const s=N.useRef(0),o=i!==1/0,a=N.useCallback(()=>{o&&(s.current=window.setTimeout(()=>t(),i))},[t,i,o]);return N.useEffect(()=>{if(o)return a(),()=>clearTimeout(s.current)},[a,e,i,o]),P("div",{className:"Toast",onMouseEnter:o?()=>clearTimeout(s==null?void 0:s.current):void 0,onMouseLeave:o?a:void 0,style:r,children:[g("p",{className:"Toast__message",children:e}),n&&g(Ze,{icon:Ad,"aria-label":"close",type:"icon",onClick:t,className:"close"})]})},MX=se.createContext(null),RX=se.createContext(null),kX={viewport:{isMobile:!1,isLandscape:!1},editor:{isMobile:!1,canFitSidebar:!1},isTouchScreen:!1},aw=se.createContext(kX);aw.displayName="DeviceContext";const lw=se.createContext({container:null,id:null});lw.displayName="ExcalidrawContainerContext";const cw=se.createContext([]);cw.displayName="ExcalidrawElementsContext";const uw=se.createContext({...to(),width:0,height:0,offsetLeft:0,offsetTop:0});uw.displayName="ExcalidrawAppStateContext";const dw=se.createContext(()=>{console.warn("Uninitialized ExcalidrawSetAppStateContext context!")});dw.displayName="ExcalidrawSetAppStateContext";const fw=se.createContext(null);fw.displayName="ExcalidrawActionManagerContext";const ao=()=>N.useContext(MX),tp=()=>N.useContext(RX),qn=()=>N.useContext(aw),Zo=()=>N.useContext(lw),$5=()=>N.useContext(cw),np=()=>N.useContext(uw),zn=()=>N.useContext(dw),vr=()=>N.useContext(fw);let Kg=!1,w7=0,Zc=!1,Zg=!1,T7=!1,S7={horizontal:null,vertical:null},yl=0,qg=!1;const I7=new Map;let EU=!1,tk=0,nk=!1,qc=null;const ft={pointers:new Map,lastCenter:null,initialDistance:null,initialScale:null};class hw extends se.Component{constructor(n){super(n);F(this,"canvas");F(this,"interactiveCanvas",null);F(this,"rc");F(this,"unmounted",!1);F(this,"actionManager");F(this,"device",kX);F(this,"excalidrawContainerRef",se.createRef());F(this,"scene");F(this,"fonts");F(this,"renderer");F(this,"visibleElements");F(this,"resizeObserver");F(this,"nearestScrollableContainer");F(this,"library");F(this,"libraryItemsFromStorage");F(this,"id");F(this,"store");F(this,"history");F(this,"excalidrawContainerValue");F(this,"files",{});F(this,"imageCache",new Map);F(this,"iFrameRefs",new Map);F(this,"embedsValidationStatus",new Map);F(this,"initializedEmbeds",new Set);F(this,"elementsPendingErasure",new Set);F(this,"flowChartCreator",new qae);F(this,"flowChartNavigator",new Zae);F(this,"hitLinkElement");F(this,"lastPointerDownEvent",null);F(this,"lastPointerUpEvent",null);F(this,"lastPointerMoveEvent",null);F(this,"lastPointerMoveCoords",null);F(this,"lastViewportPosition",{x:0,y:0});F(this,"animationFrameHandler",new t8e);F(this,"laserTrails",new V8e(this.animationFrameHandler,this));F(this,"eraserTrail",new d4(this.animationFrameHandler,this,{streamline:.2,size:5,keepHead:!0,sizeMapping:n=>{const s=Math.max(0,1-(performance.now()-n.pressure)/200),o=(10-Math.min(10,n.totalLength-n.currentIndex))/10;return Math.min(Du(o),Du(s))},fill:()=>this.state.theme===xe.LIGHT?"rgba(0, 0, 0, 0.2)":"rgba(255, 255, 255, 0.2)"}));F(this,"onChangeEmitter",new vo);F(this,"onPointerDownEmitter",new vo);F(this,"onPointerUpEmitter",new vo);F(this,"onUserFollowEmitter",new vo);F(this,"onScrollChangeEmitter",new vo);F(this,"missingPointerEventCleanupEmitter",new vo);F(this,"onRemoveEventListenersEmitter",new vo);F(this,"getEffectiveGridSize",()=>rm(this)?this.state.gridSize:null);F(this,"updateEmbedValidationStatus",(n,i)=>{this.embedsValidationStatus.set(n.id,i),Xt.delete(n)});F(this,"updateEmbeddables",()=>{const n=new Set;let i=!1;this.scene.getNonDeletedElements().filter(r=>{if(lr(r)){if(n.add(r.id),!this.embedsValidationStatus.has(r.id)){i=!0;const s=JU(r.link,this.props.validateEmbeddable);this.updateEmbedValidationStatus(r,s)}}else Cl(r)&&n.add(r.id);return!1}),i&&this.scene.triggerUpdate(),this.iFrameRefs.forEach((r,s)=>{n.has(s)||this.iFrameRefs.delete(s)})});F(this,"getFrameNameDOMId",n=>`${this.id}-frame-name-${n.id}`);F(this,"frameNameBoundsCache",{get:n=>{let i=this.frameNameBoundsCache._cache.get(n.id);if(!i||i.zoom!==this.state.zoom.value||i.versionNonce!==n.versionNonce){const r=document.getElementById(this.getFrameNameDOMId(n));if(r){const s=r.getBoundingClientRect(),o=Pt({clientX:s.x,clientY:s.y},this.state),a=Pt({clientX:s.right,clientY:s.bottom},this.state);return i={x:o.x,y:o.y,width:a.x-o.x,height:a.y-o.y,angle:0,zoom:this.state.zoom.value,versionNonce:n.versionNonce},this.frameNameBoundsCache._cache.set(n.id,i),i}return null}return i},_cache:new Map});F(this,"resetEditingFrame",n=>{var i;n&&ee(n,{name:((i=n.name)==null?void 0:i.trim())||null}),this.setState({editingFrame:null})});F(this,"renderFrameNames",()=>{if(!this.state.frameRendering.enabled||!this.state.frameRendering.name)return this.state.editingFrame&&this.resetEditingFrame(null),null;const n=this.state.theme===xe.DARK;return this.scene.getNonDeletedFramesLikes().map(i=>{if(!_b(i,this.canvas.width/window.devicePixelRatio,this.canvas.height/window.devicePixelRatio,{offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,zoom:this.state.zoom},this.scene.getNonDeletedElementsMap()))return this.state.editingFrame===i.id&&this.resetEditingFrame(i),null;const{x:r,y:s}=Os({sceneX:i.x,sceneY:i.y},this.state),o=6;let a;const l=vF(i);if(i.id===this.state.editingFrame){const c=l;a=g("input",{autoFocus:!0,value:c,onChange:u=>{ee(i,{name:u.target.value})},onFocus:u=>u.target.select(),onBlur:()=>this.resetEditingFrame(i),onKeyDown:u=>{(u.key===z.ESCAPE||u.key===z.ENTER)&&this.resetEditingFrame(i)},style:{background:this.state.viewBackgroundColor,filter:n?l9:"none",zIndex:2,border:"none",display:"block",padding:`${o}px`,borderRadius:4,boxShadow:"inset 0 0 0 1px var(--color-primary)",fontFamily:"Assistant",fontSize:"14px",transform:`translate(-${o}px, ${o}px)`,color:"var(--color-gray-80)",overflow:"hidden",maxWidth:`${document.body.clientWidth-r-o}px`},size:c.length+1||1,dir:"auto",autoComplete:"off",autoCapitalize:"off",autoCorrect:"off"})}else a=l;return g("div",{id:this.getFrameNameDOMId(i),style:{position:"absolute",bottom:`${this.state.height+sn.nameOffsetY-s+this.state.offsetTop}px`,left:`${r-this.state.offsetLeft}px`,zIndex:2,fontSize:sn.nameFontSize,color:n?sn.nameColorDarkTheme:sn.nameColorLightTheme,lineHeight:sn.nameLineHeight,width:"max-content",maxWidth:`${i.width}px`,overflow:i.id===this.state.editingFrame?"visible":"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",cursor:Tt.MOVE,pointerEvents:this.state.viewModeEnabled?tu.disabled:tu.enabled},onPointerDown:c=>this.handleCanvasPointerDown(c),onWheel:c=>this.handleWheel(c),onContextMenu:this.handleCanvasContextMenu,onDoubleClick:()=>{this.setState({editingFrame:i.id})},children:a},i.id)})});F(this,"focusContainer",()=>{var n;(n=this.excalidrawContainerRef.current)==null||n.focus()});F(this,"getSceneElementsIncludingDeleted",()=>this.scene.getElementsIncludingDeleted());F(this,"getSceneElements",()=>this.scene.getNonDeletedElements());F(this,"onInsertElements",n=>{this.addElementsFromPasteOrLibrary({elements:n,position:"center",files:null})});F(this,"onExportImage",async(n,i,r)=>{ct("export",n,"ui");const s=await N5(n,i,this.state,this.files,{exportBackground:this.state.exportBackground,name:this.getName(),viewBackgroundColor:this.state.viewBackgroundColor,exportingFrame:r.exportingFrame}).catch(xP).catch(o=>{console.error(o),this.setState({errorMessage:o.message})});this.state.exportEmbedScene&&s&&z_(s)&&this.setState({fileHandle:s})});F(this,"magicGenerations",new Map);F(this,"updateMagicGeneration",({frameElement:n,data:i})=>{i.status==="pending"?ee(n,{customData:{generationData:void 0}},!1):ee(n,{customData:{generationData:i}},!1),this.magicGenerations.set(n.id,i),this.triggerRender()});F(this,"plugins",{});F(this,"onMagicframeToolSelect",()=>{const n=this.scene.getSelectedElements({selectedElementIds:this.state.selectedElementIds});if(n.length===0)this.setActiveTool({type:Gn.magicframe}),ct("ai","tool-select (empty-selection)","d2c");else{const i=n.length===1&&WU(n[0])&&n[0];if(!i&&n.some(s=>Ie(s)||s.frameId)){this.setActiveTool({type:Gn.magicframe});return}ct("ai","tool-select (existing selection)","d2c");let r;if(i)r=i;else{const[s,o,a,l]=_t(n),c=50;r=wE({...sn,x:s-c,y:o-c,width:a-s+c*2,height:l-o+c*2,opacity:100,locked:!1}),this.scene.insertElement(r);for(const u of n)ee(u,{frameId:r.id});this.setState({selectedElementIds:{[r.id]:!0}})}this.onMagicFrameGenerate(r,"upstream")}});F(this,"openEyeDropper",({type:n})=>{zs.set(y5,{swapPreviewOnAlt:!0,colorPickerType:n==="stroke"?"elementStroke":"elementBackground",onSelect:(i,r)=>{const s=n==="background"&&r.altKey||n==="stroke"&&!r.altKey;!this.scene.getSelectedElements(this.state).length||this.state.activeTool.type!=="selection"?s?this.syncActionResult({appState:{...this.state,currentItemStrokeColor:i},captureUpdate:Z.IMMEDIATELY}):this.syncActionResult({appState:{...this.state,currentItemBackgroundColor:i},captureUpdate:Z.IMMEDIATELY}):this.updateScene({elements:this.scene.getElementsIncludingDeleted().map(a=>this.state.selectedElementIds[a.id]?Ce(a,{[s?"strokeColor":"backgroundColor"]:i}):a),captureUpdate:Z.IMMEDIATELY})},keepOpenOnAlt:!1})});F(this,"dismissLinearEditor",()=>{setTimeout(()=>{this.setState({editingLinearElement:null})})});F(this,"syncActionResult",rn(n=>{var s,o,a,l,c,u;if(this.unmounted||n===!1)return;n.captureUpdate===Z.NEVER?this.store.shouldUpdateSnapshot():n.captureUpdate===Z.IMMEDIATELY&&this.store.shouldCaptureIncrement();let i=!1,r=null;if(n.elements&&(this.scene.replaceAllElements(n.elements),i=!0),n.files&&(this.addMissingFiles(n.files,n.replaceFiles),this.addNewImagesToImageCache()),n.appState||r||this.state.contextMenu){let d=((s=n==null?void 0:n.appState)==null?void 0:s.viewModeEnabled)||!1,f=((o=n==null?void 0:n.appState)==null?void 0:o.zenModeEnabled)||!1;const h=((a=n==null?void 0:n.appState)==null?void 0:a.theme)||this.props.theme||xe.LIGHT,m=((l=n==null?void 0:n.appState)==null?void 0:l.name)??this.state.name,p=((c=n==null?void 0:n.appState)==null?void 0:c.errorMessage)??this.state.errorMessage;typeof this.props.viewModeEnabled<"u"&&(d=this.props.viewModeEnabled),typeof this.props.zenModeEnabled<"u"&&(f=this.props.zenModeEnabled),r=((u=n.appState)==null?void 0:u.editingTextElement)||null,n.elements&&r&&n.elements.forEach(b=>{(r==null?void 0:r.id)===b.id&&r!==b&&hE(b)&&ue(b)&&(r=b)}),r!=null&&r.isDeleted&&(r=null),this.setState(b=>{const E=n.appState||{};return{...b,...E,contextMenu:null,editingTextElement:r,viewModeEnabled:d,zenModeEnabled:f,theme:h,name:m,errorMessage:p}}),i=!0}!i&&n.captureUpdate!==Z.EVENTUALLY&&this.scene.triggerUpdate()}));F(this,"onBlur",rn(()=>{Zc=!1,this.setState({isBindingEnabled:!0})}));F(this,"onUnload",()=>{this.onBlur()});F(this,"disableEvent",n=>{n.preventDefault()});F(this,"resetHistory",()=>{this.history.clear()});F(this,"resetStore",()=>{this.store.clear()});F(this,"resetScene",rn(n=>{this.scene.replaceAllElements([]),this.setState(i=>({...to(),isLoading:n!=null&&n.resetLoadingState?!1:i.isLoading,theme:this.state.theme})),this.resetStore(),this.resetHistory()}));F(this,"initializeScene",async()=>{var r;"launchQueue"in window&&"LaunchParams"in window&&window.launchQueue.setConsumer(async s=>{if(!s.files.length)return;const o=s.files[0],a=await o.getFile();this.loadFileToCanvas(new File([a],a.name||"",{type:a.type}),o)}),this.props.theme&&this.setState({theme:this.props.theme}),this.state.isLoading||this.setState({isLoading:!0});let n=null;try{typeof this.props.initialData=="function"?n=await this.props.initialData()||null:n=await this.props.initialData||null,n!=null&&n.libraryItems&&this.library.updateLibrary({libraryItems:n.libraryItems,merge:!0}).catch(s=>{console.error(s)})}catch(s){console.error(s),n={appState:{errorMessage:s.message||"Encountered an error during importing or restoring scene data"}}}const i=fd(n,null,null,{repairBindings:!0});i.appState={...i.appState,theme:this.props.theme||i.appState.theme,openSidebar:((r=i.appState)==null?void 0:r.openSidebar)||this.state.openSidebar,activeTool:i.appState.activeTool.type==="image"?{...i.appState.activeTool,type:"selection"}:i.appState.activeTool,isLoading:!1,toast:this.state.toast},n!=null&&n.scrollToContent&&(i.appState={...i.appState,...H0(i.elements,{...i.appState,width:this.state.width,height:this.state.height,offsetTop:this.state.offsetTop,offsetLeft:this.state.offsetLeft})}),this.resetStore(),this.resetHistory(),this.syncActionResult({...i,captureUpdate:Z.NEVER}),this.clearImageShapeCache(),this.fonts.loadSceneFonts().then(s=>{this.fonts.onLoaded(s)}),Yf(window.location.href)&&this.scrollToContent(window.location.href,{animate:!1})});F(this,"isMobileBreakpoint",(n,i)=>n<Xne||i<Yne&&n<jne);F(this,"refreshViewportBreakpoints",()=>{if(!this.excalidrawContainerRef.current)return;const{clientWidth:i,clientHeight:r}=document.body,s=this.device.viewport,o=GU(s,{isLandscape:i>r,isMobile:this.isMobileBreakpoint(i,r)});return s!==o?(this.device={...this.device,viewport:o},!0):!1});F(this,"refreshEditorBreakpoints",()=>{const n=this.excalidrawContainerRef.current;if(!n)return;const{width:i,height:r}=n.getBoundingClientRect(),s=this.props.UIOptions.dockedSidebarBreakpoint!=null?this.props.UIOptions.dockedSidebarBreakpoint:Wne,o=this.device.editor,a=GU(o,{isMobile:this.isMobileBreakpoint(i,r),canFitSidebar:i>s});return o!==a?(this.device={...this.device,editor:a},!0):!1});F(this,"onResize",rn(()=>{this.scene.getElementsIncludingDeleted().forEach(n=>Xt.delete(n)),this.refreshViewportBreakpoints(),this.updateDOMRect(),K3||this.refreshEditorBreakpoints(),this.setState({})}));F(this,"onFullscreenChange",()=>{var n;!document.fullscreenElement&&((n=this.state.activeEmbeddable)==null?void 0:n.state)==="active"&&this.setState({activeEmbeddable:null})});F(this,"renderInteractiveSceneCallback",({atLeastOneVisibleElement:n,scrollBars:i,elementsMap:r})=>{i&&(S7=i);const s=this.state.editingTextElement?!1:!n&&r.size>0;this.state.scrolledOutside!==s&&this.setState({scrolledOutside:s}),this.scheduleImageRefresh()});F(this,"onScroll",$a(()=>{const{offsetTop:n,offsetLeft:i}=this.getCanvasOffsets();this.setState(r=>r.offsetLeft===i&&r.offsetTop===n?null:{offsetTop:n,offsetLeft:i})},$ne));F(this,"onCut",rn(n=>{var r;!((r=this.excalidrawContainerRef.current)!=null&&r.contains(document.activeElement))||au(n.target)||(this.actionManager.executeAction(WM,"keyboard",n),n.preventDefault(),n.stopPropagation())}));F(this,"onCopy",rn(n=>{var r;!((r=this.excalidrawContainerRef.current)!=null&&r.contains(document.activeElement))||au(n.target)||(this.actionManager.executeAction(h2,"keyboard",n),n.preventDefault(),n.stopPropagation())}));F(this,"onTouchStart",n=>{if(lP&&n.preventDefault(),!Kg){Kg=!0,clearTimeout(w7),w7=window.setTimeout(hw.resetTapTwice,Bne);return}if(Kg&&n.touches.length===1){const i=n.touches[0];this.handleCanvasDoubleClick({clientX:i.clientX,clientY:i.clientY}),Kg=!1,clearTimeout(w7)}n.touches.length===2&&this.setState({selectedElementIds:ht({},this.state),activeEmbeddable:null})});F(this,"onTouchEnd",n=>{this.resetContextMenuTimer(),n.touches.length>0?this.setState({previousSelectedElementIds:{},selectedElementIds:ht(this.state.previousSelectedElementIds,this.state)}):ft.pointers.clear()});F(this,"pasteFromClipboard",rn(async n=>{var d,f;const i=!!EU,r=document.activeElement,s=(d=this.excalidrawContainerRef.current)==null?void 0:d.contains(r);if(n&&!s)return;const o=document.elementFromPoint(this.lastViewportPosition.x,this.lastViewportPosition.y);if(n&&(!(o instanceof HTMLCanvasElement)||au(r)))return;const{x:a,y:l}=Pt({clientX:this.lastViewportPosition.x,clientY:this.lastViewportPosition.y},this.state);let c=(f=n==null?void 0:n.clipboardData)==null?void 0:f.files[0];const u=await w$(n,i);if(!c&&!i){if(u.mixedContent)return this.addElementsFromMixedContentPaste(u.mixedContent,{isPlainPaste:i,sceneX:a,sceneY:l});if(u.text){const h=u.text.trim();h.startsWith("<svg")&&h.endsWith("</svg>")&&(c=VM(h))}}if(Fu(c)&&!u.spreadsheet){if(!this.isToolSupported("image")){this.setState({errorMessage:k("errors.imageToolNotSupported")});return}const h=this.createImageElement({sceneX:a,sceneY:l});this.insertImageElement(h,c),this.initializeImageDimensions(h),this.setState({selectedElementIds:ht({[h.id]:!0},this.state)});return}if(this.props.onPaste)try{if(await this.props.onPaste(u,n)===!1)return}catch(h){console.error(h)}if(u.errorMessage)this.setState({errorMessage:u.errorMessage});else if(u.spreadsheet&&!i)this.setState({pasteDialog:{data:u.spreadsheet,shown:!0}});else if(u.elements){const h=u.programmaticAPI?u4(u.elements):u.elements;this.addElementsFromPasteOrLibrary({elements:h,files:u.files||null,position:"cursor",retainSeed:i})}else if(u.text){if(u.text&&X8e(u.text)){const p=await Ue(()=>import("./index-CZaFGi8-.js").then(b=>b.b6),__vite__mapDeps([]));try{const{elements:b,files:E}=await p.parseMermaidToExcalidraw(u.text),y=u4(b,{regenerateIds:!0});this.addElementsFromPasteOrLibrary({elements:y,files:E,position:"cursor"});return}catch(b){console.warn(`parsing pasted text as mermaid definition failed: ${b.message}`)}}const h=kP(u.text).split(/\n+/).map(p=>p.trim()).filter(Boolean),m=h.map(p=>Gae(p)).filter(p=>{var b;return JU(p,this.props.validateEmbeddable)&&(/^(http|https):\/\/[^\s/$.?#].[^\s]*$/.test(p)||((b=kf(p))==null?void 0:b.type)==="video")});if(!EU&&m.length>0&&m.length===h.length){const p=[];for(const b of m){const E=p[p.length-1],y=this.insertEmbeddableElement({sceneX:E?E.x+E.width+20:a,sceneY:l,link:Pr(b)});y&&p.push(y)}p.length&&this.setState({selectedElementIds:Object.fromEntries(p.map(b=>[b.id,!0]))});return}this.addTextFromPaste(u.text,i)}this.setActiveTool({type:"selection"}),n==null||n.preventDefault()}));F(this,"addElementsFromPasteOrLibrary",n=>{var T,A;const i=dd(n.elements,null,void 0),[r,s,o,a]=_t(i),l=Ni(r,o)/2,c=Ni(s,a)/2,u=typeof n.position=="object"?n.position.clientX:n.position==="cursor"?this.lastViewportPosition.x:this.state.width/2+this.state.offsetLeft,d=typeof n.position=="object"?n.position.clientY:n.position==="cursor"?this.lastViewportPosition.y:this.state.height/2+this.state.offsetTop,{x:f,y:h}=Pt({clientX:u,clientY:d},this.state),m=f-l,p=h-c,[b,E]=Mn(m,p,this.getEffectiveGridSize()),{newElements:y}=Ib({type:"everything",elements:i.map(I=>Ce(I,{x:I.x+b-r,y:I.y+E-s})),randomizeSeed:!n.retainSeed}),v=this.scene.getElementsIncludingDeleted();let _=[...v,...y];_=((A=(T=this.props).onDuplicate)==null?void 0:A.call(T,_,v))||_,Qs(_,Se(y));const M=this.getTopLayerFrameAtSceneCoords({x:f,y:h});if(M){const I=Uoe(y,M);j1(_,I,M,this.state)}this.scene.replaceAllElements(_),y.forEach(I=>{if(ue(I)&&jt(I)){const R=ui(I,this.scene.getElementsMapIncludingDeleted());Ji(I,R,this.scene.getElementsMapIncludingDeleted())}}),xne&&Pa.loadElementsFonts(y).then(I=>{this.fonts.onLoaded(I)}),n.files&&this.addMissingFiles(n.files),this.store.shouldCaptureIncrement();const w=z9(y);this.setState({...this.state,openSidebar:this.state.openSidebar&&this.device.editor.canFitSidebar&&zs.get(tw)?this.state.openSidebar:null,...Wi({editingGroupId:null,selectedElementIds:w.reduce((I,R)=>(jt(R)||(I[R.id]=!0),I),{})},this.scene.getNonDeletedElements(),this.state,this)},()=>{n.files&&this.addNewImagesToImageCache()}),this.setActiveTool({type:"selection"}),n.fitToContent&&this.scrollToContent(y,{fitToContent:!0,canvasOffsets:this.getEditorUIOffsets()})});F(this,"setAppState",(n,i)=>{this.setState(n,i)});F(this,"removePointer",n=>{yl&&this.resetContextMenuTimer(),ft.pointers.delete(n.pointerId)});F(this,"toggleLock",(n="ui")=>{this.state.activeTool.locked||ct("toolbar","toggleLock",`${n} (${this.device.editor.isMobile?"mobile":"desktop"})`),this.setState(i=>({activeTool:{...i.activeTool,...Tn(this.state,i.activeTool.locked?{type:"selection"}:i.activeTool),locked:!i.activeTool.locked}}))});F(this,"updateFrameRendering",n=>{this.setState(i=>{const r=typeof n=="function"?n(i.frameRendering):n;return{frameRendering:{enabled:(r==null?void 0:r.enabled)??i.frameRendering.enabled,clip:(r==null?void 0:r.clip)??i.frameRendering.clip,name:(r==null?void 0:r.name)??i.frameRendering.name,outline:(r==null?void 0:r.outline)??i.frameRendering.outline}}})});F(this,"togglePenMode",n=>{this.setState(i=>({penMode:n??!i.penMode,penDetected:!0}))});F(this,"onHandToolToggle",()=>{this.actionManager.executeAction(Dpe)});F(this,"zoomCanvas",n=>{this.setState({...yu({viewportX:this.state.width/2+this.state.offsetLeft,viewportY:this.state.height/2+this.state.offsetTop,nextZoom:Aa(n)},this.state)})});F(this,"cancelInProgressAnimation",null);F(this,"scrollToContent",(n=this.scene.getNonDeletedElements(),i)=>{var l;if(typeof n=="string"){let c;if(Yf(n)?c=Jae(n):c=n,c){const u=this.scene.getElementsFromId(c);u!=null&&u.length?this.scrollToContent(u,{fitToContent:(i==null?void 0:i.fitToContent)??!0,animate:(i==null?void 0:i.animate)??!0}):Yf(n)&&this.setState({toast:{message:k("elementLink.notFound"),duration:3e3,closable:!0}})}return}(l=this.cancelInProgressAnimation)==null||l.call(this);const r=Array.isArray(n)?n:[n];let s=this.state.zoom,o=this.state.scrollX,a=this.state.scrollY;if(i!=null&&i.fitToContent||i!=null&&i.fitToViewport){const{appState:c}=_5({canvasOffsets:i.canvasOffsets,targetElements:r,appState:this.state,fitToViewport:!!(i!=null&&i.fitToViewport),viewportZoomFactor:i==null?void 0:i.viewportZoomFactor,minZoom:i==null?void 0:i.minZoom,maxZoom:i==null?void 0:i.maxZoom});s=c.zoom,o=c.scrollX,a=c.scrollY}else{const c=H0(r,this.state);o=c.scrollX,a=c.scrollY}if(i!=null&&i.animate){const c=this.state.scrollX,u=this.state.scrollY,d=this.state.zoom.value,f=vie({fromValues:{scrollX:c,scrollY:u,zoom:d},toValues:{scrollX:o,scrollY:a,zoom:s.value},interpolateValue:(h,m,p,b)=>{if(b==="zoom")return h*Math.pow(m/h,Du(p))},onStep:({scrollX:h,scrollY:m,zoom:p})=>{this.setState({scrollX:h,scrollY:m,zoom:{value:p}})},onStart:()=>{this.setState({shouldCacheIgnoreZoom:!0})},onEnd:()=>{this.setState({shouldCacheIgnoreZoom:!1})},onCancel:()=>{this.setState({shouldCacheIgnoreZoom:!1})},duration:(i==null?void 0:i.duration)??500});this.cancelInProgressAnimation=()=>{f(),this.cancelInProgressAnimation=null}}else this.setState({scrollX:o,scrollY:a,zoom:s})});F(this,"maybeUnfollowRemoteUser",()=>{this.state.userToFollow&&this.setState({userToFollow:null})});F(this,"translateCanvas",n=>{var i;(i=this.cancelInProgressAnimation)==null||i.call(this),this.maybeUnfollowRemoteUser(),this.setState(n)});F(this,"setToast",n=>{this.setState({toast:n})});F(this,"restoreFileFromShare",async()=>{try{const n=await caches.open("web-share-target"),i=await n.match("shared-file");if(i){const r=await i.blob(),s=new File([r],r.name||"",{type:r.type});this.loadFileToCanvas(s,null),await n.delete("shared-file"),window.history.replaceState(null,La,window.location.pathname)}}catch(n){this.setState({errorMessage:n.message})}});F(this,"addFiles",rn(n=>{const{addedFiles:i}=this.addMissingFiles(n);this.clearImageShapeCache(i),this.scene.triggerUpdate(),this.addNewImagesToImageCache()}));F(this,"addMissingFiles",(n,i=!1)=>{const r=i?{}:{...this.files},s={},o=Array.isArray(n)?n:Object.values(n);for(const a of o)if(!r[a.id]&&(s[a.id]=a,r[a.id]=a,a.mimeType===be.svg))try{const l=Vbe(RC(Gbe(a.dataURL)),be.svg);a.dataURL!==l&&(a.version=(a.version??1)+1,a.dataURL=l)}catch(l){console.error(l)}return this.files=r,{addedFiles:s}});F(this,"updateScene",rn(n=>{const i=Ya(n.elements??[]);if(n.captureUpdate&&n.captureUpdate!==Z.EVENTUALLY){const r=this.store.snapshot.appState,s=this.store.snapshot.elements,o=n.appState?Object.assign({},r,n.appState):r,a=n.elements?this.store.filterUncomittedElements(this.scene.getElementsMapIncludingDeleted(),Se(i)):s;n.captureUpdate===Z.IMMEDIATELY?this.store.captureIncrement(a,o):n.captureUpdate===Z.NEVER&&this.store.updateSnapshot(a,o)}n.appState&&this.setState(n.appState),n.elements&&this.scene.replaceAllElements(i),n.collaborators&&this.setState({collaborators:n.collaborators})}));F(this,"triggerRender",n=>{n===!0?this.scene.triggerUpdate():this.setState({})});F(this,"toggleSidebar",({name:n,tab:i,force:r})=>{var a,l;let s;r===void 0?s=((a=this.state.openSidebar)==null?void 0:a.name)===n&&((l=this.state.openSidebar)==null?void 0:l.tab)===i?null:n:s=r?n:null;const o=s?{name:s}:null;return o&&i&&(o.tab=i),this.setState({openSidebar:o}),!!s});F(this,"updateCurrentCursorPosition",rn(n=>{this.lastViewportPosition.x=n.clientX,this.lastViewportPosition.y=n.clientY}));F(this,"getEditorUIOffsets",()=>{var o,a,l,c,u,d,f,h,m,p;const n=((c=(l=(a=(o=this.excalidrawContainerRef)==null?void 0:o.current)==null?void 0:a.querySelector(".App-toolbar"))==null?void 0:l.getBoundingClientRect())==null?void 0:c.bottom)??0,i=(f=(d=(u=this.excalidrawContainerRef)==null?void 0:u.current)==null?void 0:d.querySelector(".sidebar"))==null?void 0:f.getBoundingClientRect(),r=(p=(m=(h=this.excalidrawContainerRef)==null?void 0:h.current)==null?void 0:m.querySelector(".App-menu__left"))==null?void 0:p.getBoundingClientRect(),s=16;return z0().rtl?{top:n+s,right:Math.max(this.state.width-((r==null?void 0:r.left)??this.state.width),0)+s,bottom:s,left:Math.max((i==null?void 0:i.right)??0,0)+s}:{top:n+s,right:Math.max(this.state.width-((i==null?void 0:i.left)??this.state.width)+s,0),bottom:s,left:Math.max((r==null?void 0:r.right)??0,0)+s}});F(this,"onKeyDown",rn(n=>{var o,a;if("Proxy"in window&&(!n.shiftKey&&/^[A-Z]$/.test(n.key)||n.shiftKey&&/^[a-z]$/.test(n.key))&&(n=new Proxy(n,{get(l,c){const u=l[c];return typeof u=="function"?u.bind(l):c==="key"?n.shiftKey?l.key.toUpperCase():l.key.toLowerCase():u}})),!tE(n.target)){if((n.key===z.ESCAPE||n.key===z.ENTER)&&this.state.croppingElementId){this.finishImageCropping();return}const l=Be(this.scene.getNonDeletedElementsMap(),this.state);if(l.length===1&&it(l[0])&&n.key===z.ENTER){this.startImageCropping(l[0]);return}if(n.key===z.ESCAPE&&this.flowChartCreator.isCreatingChart){this.flowChartCreator.clear(),this.triggerRender(!0);return}const c=c1(n.key);if(n[z.CTRL_OR_CMD]&&c&&!n.shiftKey){n.preventDefault();const u=Be(this.scene.getNonDeletedElementsMap(),this.state);u.length===1&&Y6(u[0])&&this.flowChartCreator.createNodes(u[0],this.scene.getNonDeletedElementsMap(),this.state,DC(n.key)),(o=this.flowChartCreator.pendingNodes)!=null&&o.length&&!ZU(this.flowChartCreator.pendingNodes,this.canvas.width/window.devicePixelRatio,this.canvas.height/window.devicePixelRatio,{offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,zoom:this.state.zoom},this.scene.getNonDeletedElementsMap(),this.getEditorUIOffsets())&&this.scrollToContent(this.flowChartCreator.pendingNodes,{animate:!0,duration:300,fitToContent:!0,canvasOffsets:this.getEditorUIOffsets()});return}if(n.altKey){const u=Be(this.scene.getNonDeletedElementsMap(),this.state);if(u.length===1&&c){n.preventDefault();const d=this.flowChartNavigator.exploreByDirection(u[0],this.scene.getNonDeletedElementsMap(),DC(n.key));if(d){this.setState(h=>({selectedElementIds:ht({[d]:!0},h)}));const f=this.scene.getNonDeletedElementsMap().get(d);f&&!ZU([f],this.canvas.width/window.devicePixelRatio,this.canvas.height/window.devicePixelRatio,{offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,zoom:this.state.zoom},this.scene.getNonDeletedElementsMap(),this.getEditorUIOffsets())&&this.scrollToContent(f,{animate:!0,duration:300,canvasOffsets:this.getEditorUIOffsets()})}return}}}if(n[z.CTRL_OR_CMD]&&n.key===z.P&&!n.shiftKey&&!n.altKey){this.setToast({message:k("commandPalette.shortcutHint",{shortcut:zi("commandPalette")})}),n.preventDefault();return}if(n[z.CTRL_OR_CMD]&&n.key.toLowerCase()===z.V&&(EU=n.shiftKey,clearTimeout(tk),tk=window.setTimeout(()=>{EU=!1},100)),n[z.CTRL_OR_CMD]&&au(n.target)&&(n.code===Je.MINUS||n.code===Je.EQUAL)){n.preventDefault();return}if(au(n.target)&&n.key!==z.ESCAPE||c1(n.key)&&tE(n.target))return;if(n.key===z.QUESTION_MARK){this.setState({openDialog:{name:"help"}});return}else if(n.key.toLowerCase()===z.E&&n.shiftKey&&n[z.CTRL_OR_CMD]){n.preventDefault(),this.setState({openDialog:{name:"imageExport"}});return}if(n.key===z.PAGE_UP||n.key===z.PAGE_DOWN){let l=(n.shiftKey?this.state.width:this.state.height)/this.state.zoom.value;n.key===z.PAGE_DOWN&&(l=-l),n.shiftKey?this.translateCanvas(c=>({scrollX:c.scrollX+l})):this.translateCanvas(c=>({scrollY:c.scrollY+l}))}if(((a=this.state.openDialog)==null?void 0:a.name)==="elementLinkSelector"||this.actionManager.handleKeyDown(n)||this.state.viewModeEnabled)return;if(n[z.CTRL_OR_CMD]&&this.state.isBindingEnabled&&this.setState({isBindingEnabled:!1}),c1(n.key)){let l=this.scene.getSelectedElements({selectedElementIds:this.state.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});const c=l.find(fe),u=new Set;l.filter(fe).filter(m=>{const p=m.startBinding&&!l.some(E=>{var y;return E.id===((y=m.startBinding)==null?void 0:y.elementId)}),b=m.endBinding&&!l.some(E=>{var y;return E.id===((y=m.endBinding)==null?void 0:y.elementId)});return p||b}).forEach(m=>u.add(m.id)),l=l.filter(m=>!u.has(m.id));const d=this.getEffectiveGridSize()&&(n.shiftKey?yx:this.getEffectiveGridSize())||(n.shiftKey?Mne:yx);let f=0,h=0;n.key===z.ARROW_LEFT?f=-d:n.key===z.ARROW_RIGHT?f=d:n.key===z.ARROW_UP?h=-d:n.key===z.ARROW_DOWN&&(h=d),l.forEach(m=>{ee(m,{x:m.x+f,y:m.y+h},!1),pr(m,this.scene.getNonDeletedElementsMap(),{simultaneouslyUpdated:l})}),this.setState({suggestedBindings:w8(l.filter(m=>m.id!==(c==null?void 0:c.id)||d!==0),this.scene.getNonDeletedElementsMap(),this.state.zoom)}),this.scene.triggerUpdate(),n.preventDefault()}else if(n.key===z.ENTER){const l=this.scene.getSelectedElements(this.state);if(l.length===1){const c=l[0];if(n[z.CTRL_OR_CMD])ke(c)&&(!this.state.editingLinearElement||this.state.editingLinearElement.elementId!==l[0].id)&&(this.store.shouldCaptureIncrement(),fe(c)||this.setState({editingLinearElement:new ce(c)}));else if(ue(c)||vse(c)){let u;ue(c)||(u=c);const d=_8(c,this.state,this.scene.getNonDeletedElementsMap()),f=d.x,h=d.y;this.startTextEditing({sceneX:f,sceneY:h,container:u}),n.preventDefault();return}else Ie(c)&&this.setState({editingFrame:c.id})}}else if(!n.ctrlKey&&!n.altKey&&!n.metaKey&&!this.state.newElement&&!this.state.selectionElement&&!this.state.selectedElementsAreBeingDragged){const l=oye(n.key);l?(this.state.activeTool.type!==l&&ct("toolbar",l,`keyboard (${this.device.editor.isMobile?"mobile":"desktop"})`),l==="arrow"&&this.state.activeTool.type==="arrow"&&this.setState(c=>({currentItemArrowType:c.currentItemArrowType===ei.sharp?ei.round:c.currentItemArrowType===ei.round?ei.elbow:ei.sharp})),this.setActiveTool({type:l}),n.stopPropagation()):n.key===z.Q&&(this.toggleLock("keyboard"),n.stopPropagation())}if(n.key===z.SPACE&&ft.pointers.size===0&&(Zc=!0,xt(this.interactiveCanvas,Tt.GRAB),n.preventDefault()),(n.key===z.G||n.key===z.S)&&!n.altKey&&!n[z.CTRL_OR_CMD]){const l=this.scene.getSelectedElements(this.state);if(this.state.activeTool.type==="selection"&&!l.length)return;n.key===z.G&&(Th(this.state.activeTool.type)||l.some(c=>Th(c.type)))&&(this.setState({openPopup:"elementBackground"}),n.stopPropagation()),n.key===z.S&&(this.setState({openPopup:"elementStroke"}),n.stopPropagation())}if(!n[z.CTRL_OR_CMD]&&n.shiftKey&&n.key.toLowerCase()===z.F){const l=this.scene.getSelectedElements(this.state);if(this.state.activeTool.type==="selection"&&!l.length)return;(this.state.activeTool.type==="text"||l.find(c=>ue(c)||Pe(c,this.scene.getNonDeletedElementsMap())))&&(n.preventDefault(),this.setState({openPopup:"fontFamily"}))}if(n.key===z.K&&!n.altKey&&!n[z.CTRL_OR_CMD]){this.state.activeTool.type==="laser"?this.setActiveTool({type:"selection"}):this.setActiveTool({type:"laser"});return}n[z.CTRL_OR_CMD]&&(n.key===z.BACKSPACE||n.key===z.DELETE)&&zs.set(z5,"clearCanvas");const i=n.key.toLocaleLowerCase(),r=i===z.S&&n.shiftKey,s=n.key===z.I||i===z.G&&n.shiftKey;(r||s)&&this.openEyeDropper({type:r?"stroke":"background"})}));F(this,"onKeyUp",rn(n=>{var i,r,s,o;if(n.key===z.SPACE&&(this.state.viewModeEnabled||((i=this.state.openDialog)==null?void 0:i.name)==="elementLinkSelector"?xt(this.interactiveCanvas,Tt.GRAB):this.state.activeTool.type==="selection"?xs(this.interactiveCanvas):(po(this.interactiveCanvas,this.state),this.setState({selectedElementIds:ht({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null})),Zc=!1),!n[z.CTRL_OR_CMD]&&!this.state.isBindingEnabled&&this.setState({isBindingEnabled:!0}),c1(n.key)&&(Ub(this.scene.getSelectedElements(this.state).filter(ke),this.scene.getNonDeletedElementsMap(),this.scene.getNonDeletedElements(),this.scene,pu(this.state),((r=this.state.selectedLinearElement)==null?void 0:r.selectedPointsIndices)??[],this.state.zoom),this.setState({suggestedBindings:[]})),n.altKey||this.flowChartNavigator.isExploring&&(this.flowChartNavigator.clear(),this.syncActionResult({captureUpdate:Z.IMMEDIATELY})),!n[z.CTRL_OR_CMD]&&this.flowChartCreator.isCreatingChart){(s=this.flowChartCreator.pendingNodes)!=null&&s.length&&this.scene.insertElements(this.flowChartCreator.pendingNodes);const a=(o=this.flowChartCreator.pendingNodes)==null?void 0:o[0];a&&(this.setState(l=>({selectedElementIds:ht({[a.id]:!0},l)})),ZU([a],this.canvas.width/window.devicePixelRatio,this.canvas.height/window.devicePixelRatio,{offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,zoom:this.state.zoom},this.scene.getNonDeletedElementsMap(),this.getEditorUIOffsets())||this.scrollToContent(a,{animate:!0,duration:300,canvasOffsets:this.getEditorUIOffsets()})),this.flowChartCreator.clear(),this.syncActionResult({captureUpdate:Z.IMMEDIATELY})}}));F(this,"isToolSupported",n=>{var i;return((i=this.props.UIOptions.tools)==null?void 0:i[n])!==!1});F(this,"setActiveTool",n=>{if(!this.isToolSupported(n.type)){console.warn(`"${n.type}" tool is disabled via "UIOptions.canvasActions.tools.${n.type}"`);return}const i=Tn(this.state,n);i.type==="hand"?xt(this.interactiveCanvas,Tt.GRAB):Zc||po(this.interactiveCanvas,{...this.state,activeTool:i}),yie(document.activeElement)&&this.focusContainer(),E9(i.type)||this.setState({suggestedBindings:[]}),i.type==="image"&&this.onImageAction({insertOnCanvasDirectly:(n.type==="image"&&n.insertOnCanvasDirectly)??!1}),this.setState(r=>{const s={snapLines:r.snapLines.length?[]:r.snapLines,originSnapOffset:null,activeEmbeddable:null};return i.type==="freedraw"&&this.store.shouldCaptureIncrement(),i.type!=="selection"?{...r,activeTool:i,selectedElementIds:ht({},r),selectedGroupIds:ht({},r),editingGroupId:null,multiElement:null,...s}:{...r,activeTool:i,...s}})});F(this,"setOpenDialog",n=>{this.setState({openDialog:n})});F(this,"setCursor",n=>{xt(this.interactiveCanvas,n)});F(this,"resetCursor",()=>{xs(this.interactiveCanvas)});F(this,"isTouchScreenMultiTouchGesture",()=>ft.pointers.size>=2);F(this,"getName",()=>this.state.name||this.props.name||`${k("labels.untitled")}-${Mx()}`);F(this,"onGestureStart",rn(n=>{n.preventDefault(),this.isTouchScreenMultiTouchGesture()&&this.setState({selectedElementIds:ht({},this.state),activeEmbeddable:null}),ft.initialScale=this.state.zoom.value}));F(this,"onGestureChange",rn(n=>{if(n.preventDefault(),this.isTouchScreenMultiTouchGesture())return;const i=ft.initialScale;i&&this.setState(r=>({...yu({viewportX:this.lastViewportPosition.x,viewportY:this.lastViewportPosition.y,nextZoom:Aa(i*n.scale)},r)}))}));F(this,"onGestureEnd",rn(n=>{n.preventDefault(),this.isTouchScreenMultiTouchGesture()&&this.setState({previousSelectedElementIds:{},selectedElementIds:ht(this.state.previousSelectedElementIds,this.state)}),ft.initialScale=null}));F(this,"startTextEditing",({sceneX:n,sceneY:i,insertAtParentCenter:r=!0,container:s,autoEdit:o=!0})=>{let a=!1,l=r&&this.getTextWysiwygSnappedToCenterPosition(n,i,this.state,s);s&&l&&(Pe(s,this.scene.getNonDeletedElementsMap())||(a=!0));let c=null;const u=this.scene.getSelectedElements(this.state);u.length===1?ue(u[0])?c=u[0]:s?c=Pe(u[0],this.scene.getNonDeletedElementsMap()):c=this.getTextElementAtPosition(n,i):c=this.getTextElementAtPosition(n,i);const d=(c==null?void 0:c.fontFamily)||this.state.currentItemFontFamily,f=(c==null?void 0:c.lineHeight)||Ju(d),h=this.state.currentItemFontSize;if(!c&&a&&s&&!ze(s)){const E=iF(Ct({fontSize:h,fontFamily:d}),f),y=rF(h,f),v=Math.max(s.height,y),_=Math.max(s.width,E);ee(s,{height:v,width:_}),n=s.x+_/2,i=s.y+v/2,l&&(l=this.getTextWysiwygSnappedToCenterPosition(n,i,this.state,s))}const m=this.getTopLayerFrameAtSceneCoords({x:n,y:i}),p=c||Hr({x:l?l.elementCenterX:n,y:l?l.elementCenterY:i,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,text:"",fontSize:h,fontFamily:d,textAlign:l?"center":this.state.currentItemTextAlign,verticalAlign:l?kr.MIDDLE:eb,containerId:a?s==null?void 0:s.id:void 0,groupIds:(s==null?void 0:s.groupIds)??[],lineHeight:f,angle:(s==null?void 0:s.angle)??0,frameId:m?m.id:null});if(!c&&a&&s&&ee(s,{boundElements:(s.boundElements||[]).concat({type:"text",id:p.id})}),this.setState({editingTextElement:p}),!c)if(s&&a){const b=this.scene.getElementIndex(s.id);this.scene.insertElementAtIndex(p,b+1)}else this.scene.insertElement(p);o||c||s?this.handleTextWysiwyg(p,{isExistingElement:!!c}):this.setState({newElement:p,multiElement:null})});F(this,"startImageCropping",n=>{this.store.shouldCaptureIncrement(),this.setState({croppingElementId:n.id})});F(this,"finishImageCropping",()=>{this.state.croppingElementId&&(this.store.shouldCaptureIncrement(),this.setState({croppingElementId:null}))});F(this,"handleCanvasDoubleClick",n=>{if(this.state.multiElement||this.state.activeTool.type!=="selection")return;const i=this.scene.getSelectedElements(this.state);let{x:r,y:s}=Pt(n,this.state);if(i.length===1&&ke(i[0])){if(n[z.CTRL_OR_CMD]&&(!this.state.editingLinearElement||this.state.editingLinearElement.elementId!==i[0].id)&&!fe(i[0])){this.store.shouldCaptureIncrement(),this.setState({editingLinearElement:new ce(i[0])});return}else if(this.state.selectedLinearElement&&fe(i[0])){const a=ce.getSegmentMidpointHitCoords(this.state.selectedLinearElement,{x:r,y:s},this.state,this.scene.getNonDeletedElementsMap()),l=a?ce.getSegmentMidPointIndex(this.state.selectedLinearElement,this.state,a,this.scene.getNonDeletedElementsMap()):-1;if(l&&l>-1){this.store.shouldCaptureIncrement(),ce.deleteFixedSegment(i[0],l);const c=ce.getSegmentMidpointHitCoords({...this.state.selectedLinearElement,segmentMidPointHoveredCoords:null},{x:r,y:s},this.state,this.scene.getNonDeletedElementsMap()),u=c?ce.getSegmentMidPointIndex(this.state.selectedLinearElement,this.state,c,this.scene.getNonDeletedElementsMap()):null;this.setState({selectedLinearElement:{...this.state.selectedLinearElement,pointerDownState:{...this.state.selectedLinearElement.pointerDownState,segmentMidpoint:{index:u,value:a,added:!1}},segmentMidPointHoveredCoords:c}});return}}}if(i.length===1&&it(i[0])){this.startImageCropping(i[0]);return}if(xs(this.interactiveCanvas),Ou(this.state).length>0){const a=this.getElementAtPosition(r,s),l=a&&Eoe(a,this.state.selectedGroupIds);if(l){this.store.shouldCaptureIncrement(),this.setState(c=>({...c,...Wi({editingGroupId:l,selectedElementIds:{[a.id]:!0}},this.scene.getNonDeletedElements(),c,this)}));return}}if(xs(this.interactiveCanvas),!n[z.CTRL_OR_CMD]&&!this.state.viewModeEnabled){const a=this.getElementAtPosition(r,s);if(is(a)){this.setState({activeEmbeddable:{element:a,state:"active"}});return}const l=this.getTextBindableContainerAtPosition(r,s);if(l&&(ys(l)||!Fs(l.backgroundColor)||lf({x:r,y:s,element:l,shape:fa(l,this.scene.getNonDeletedElementsMap()),threshold:this.getElementHitThreshold()}))){const c=_8(l,this.state,this.scene.getNonDeletedElementsMap());r=c.x,s=c.y}this.startTextEditing({sceneX:r,sceneY:s,insertAtParentCenter:!n.altKey,container:l})}});F(this,"getElementLinkAtPosition",(n,i)=>{const r=this.scene.getNonDeletedElements();let s=-1;for(let o=r.length-1;o>=0;o--){const a=r[o];if(i&&a.id===i.id&&(s=o),a.link&&o>=s&&a7(a,this.scene.getNonDeletedElementsMap(),this.state,C(n.x,n.y),this.device.editor.isMobile))return a}});F(this,"redirectToLink",(n,i)=>{const r=mt(C(this.lastPointerDownEvent.clientX,this.lastPointerDownEvent.clientY),C(this.lastPointerUpEvent.clientX,this.lastPointerUpEvent.clientY));if(!this.hitLinkElement||r>eu)return;const s=Pt(this.lastPointerDownEvent,this.state),o=this.scene.getNonDeletedElementsMap(),a=a7(this.hitLinkElement,o,this.state,C(s.x,s.y),this.device.editor.isMobile),l=Pt(this.lastPointerUpEvent,this.state),c=a7(this.hitLinkElement,o,this.state,C(l.x,l.y),this.device.editor.isMobile);if(a&&c){eR();let u=this.hitLinkElement.link;if(u){u=Pr(u);let d;if(this.props.onLinkOpen&&(d=MP(te.EXCALIDRAW_LINK,n.nativeEvent),this.props.onLinkOpen({...this.hitLinkElement,link:u},d)),!(d!=null&&d.defaultPrevented)){const f=DP(u)?"_self":"_blank",h=window.open(void 0,f);h&&(h.opener=null,h.location=u)}}}});F(this,"getTopLayerFrameAtSceneCoords",n=>{const i=this.scene.getNonDeletedElementsMap(),r=this.scene.getNonDeletedFramesLikes().filter(s=>tC(n,s,i));return r.length?r[r.length-1]:null});F(this,"handleCanvasPointerMove",n=>{var h,m,p,b,E,y;this.savePointer(n.clientX,n.clientY,this.state.cursorButton),this.lastPointerMoveEvent=n.nativeEvent,ft.pointers.has(n.pointerId)&&ft.pointers.set(n.pointerId,{x:n.clientX,y:n.clientY});const i=ft.initialScale;if(ft.pointers.size===2&&ft.lastCenter&&i&&ft.initialDistance){const v=UR(ft.pointers),_=v.x-ft.lastCenter.x,S=v.y-ft.lastCenter.y;ft.lastCenter=v;const M=bR(Array.from(ft.pointers.values())),w=this.state.activeTool.type==="freedraw"&&this.state.penMode?1:M/ft.initialDistance,T=w?Aa(i*w):this.state.zoom.value;this.setState(A=>{const I=yu({viewportX:v.x,viewportY:v.y,nextZoom:T},A);this.translateCanvas({zoom:I.zoom,scrollX:I.scrollX+2*(_/T),scrollY:I.scrollY+2*(S/T),shouldCacheIgnoreZoom:!0})}),this.resetShouldCacheIgnoreZoomDebounced()}else ft.lastCenter=ft.initialDistance=ft.initialScale=null;if(Zc||Zg||T7||Ih(this.state))return;const s=xR(S7,n.clientX-this.state.offsetLeft,n.clientY-this.state.offsetTop).isOverEither;!this.state.newElement&&!this.state.selectionElement&&!this.state.selectedElementsAreBeingDragged&&!this.state.multiElement&&(s?xs(this.interactiveCanvas):po(this.interactiveCanvas,this.state));const o=Pt(n,this.state),{x:a,y:l}=o;if(!this.state.newElement&&d8e(this.state.activeTool.type)){const{originOffset:v,snapLines:_}=u8e(this.scene.getNonDeletedElements(),this,{x:a,y:l},n,this.scene.getNonDeletedElementsMap());this.setState(S=>{const M=Og(S.snapLines,_),w=S.originSnapOffset?Og(S.originSnapOffset,v):v;return S.snapLines===M&&S.originSnapOffset===w?null:{snapLines:M,originSnapOffset:w}})}else!this.state.newElement&&!this.state.selectedElementsAreBeingDragged&&!this.state.selectionElement&&this.setState(v=>v.snapLines.length?{snapLines:[]}:null);if(this.state.editingLinearElement&&!this.state.editingLinearElement.isDragging){const v=ce.handlePointerMove(n,a,l,this,this.scene.getNonDeletedElementsMap());v&&v!==this.state.editingLinearElement&&ii.flushSync(()=>{this.setState({editingLinearElement:v})}),(v==null?void 0:v.lastUncommittedPoint)!=null?this.maybeSuggestBindingAtCursor(o,v.elbowed):ii.flushSync(()=>{this.setState({suggestedBindings:[]})})}if(YP(this.state.activeTool.type)){const{newElement:v}=this.state;Ea(v,!1)?this.maybeSuggestBindingsForLinearElementAtCoords(v,[o],this.state.startBoundElement):this.maybeSuggestBindingAtCursor(o,!1)}if(this.state.multiElement){const{multiElement:v}=this.state,{x:_,y:S}=v,{points:M,lastCommittedPoint:w}=v,T=M[M.length-1];if(po(this.interactiveCanvas,this.state),T===w)mt(C(a-_,l-S),T)>=$U?ee(v,{points:[...M,C(a-_,l-S)]},!1):xt(this.interactiveCanvas,Tt.POINTER);else if(M.length>2&&w&&mt(C(a-_,l-S),w)<$U)xt(this.interactiveCanvas,Tt.POINTER),ee(v,{points:M.slice(0,-1)},!1);else{const[A,I]=Mn(a,l,n[z.CTRL_OR_CMD]||fe(v)?null:this.getEffectiveGridSize()),[R,D]=(v==null?void 0:v.lastCommittedPoint)??[0,0];let L=A-_-R,G=I-S-D;H1(n)&&({width:L,height:G}=fE(R+_,D+S,A,I)),Wa(M,this.state.zoom.value)&&xt(this.interactiveCanvas,Tt.POINTER),ee(v,{points:[...M.slice(0,-1),C(R+L,D+G)]},!1,{isDragging:!0}),this.triggerRender(!1)}return}if(!!n.buttons||this.state.activeTool.type!=="selection"&&this.state.activeTool.type!=="text"&&this.state.activeTool.type!=="eraser")return;const u=this.scene.getNonDeletedElements(),d=this.scene.getSelectedElements(this.state);if(d.length===1&&!s&&!this.state.editingLinearElement){if(this.state.selectedLinearElement&&this.handleHoverSelectedLinearElement(this.state.selectedLinearElement,a,l),(!this.state.selectedLinearElement||this.state.selectedLinearElement.hoverPointIndex===-1)&&((h=this.state.openDialog)==null?void 0:h.name)!=="elementLinkSelector"&&!(d.length===1&&fe(d[0]))){const v=NC(u,this.state,a,l,this.state.zoom,n.pointerType,this.scene.getNonDeletedElementsMap(),this.device);if(v&&v.transformHandleType){xt(this.interactiveCanvas,PC(v));return}}}else if(d.length>1&&!s&&((m=this.state.openDialog)==null?void 0:m.name)!=="elementLinkSelector"){const v=OC(_t(d),a,l,this.state.zoom,n.pointerType,this.device);if(v){xt(this.interactiveCanvas,PC({transformHandleType:v}));return}}const f=this.getElementAtPosition(o.x,o.y);this.hitLinkElement=this.getElementLinkAtPosition(o,f),!Eo(this.state)&&(this.hitLinkElement&&!this.state.selectedElementIds[this.hitLinkElement.id]?(xt(this.interactiveCanvas,Tt.POINTER),H6e(this.hitLinkElement,this.state,this.scene.getNonDeletedElementsMap())):(eR(),f&&(f.link||lr(f))&&this.state.selectedElementIds[f.id]&&!this.state.contextMenu&&!this.state.showHyperlinkPopup?this.setState({showHyperlinkPopup:"info"}):this.state.activeTool.type==="text"?xt(this.interactiveCanvas,ue(f)?Tt.TEXT:Tt.CROSSHAIR):this.state.viewModeEnabled?xt(this.interactiveCanvas,Tt.GRAB):((p=this.state.openDialog)==null?void 0:p.name)==="elementLinkSelector"?xt(this.interactiveCanvas,Tt.AUTO):s?xt(this.interactiveCanvas,Tt.AUTO):this.state.selectedLinearElement?this.handleHoverSelectedLinearElement(this.state.selectedLinearElement,a,l):n[z.CTRL_OR_CMD]?xt(this.interactiveCanvas,Tt.AUTO):(f||this.isHittingCommonBoundingBoxOfSelectedElements(o,d))&&!(f!=null&&f.locked)&&(f&&is(f)&&this.isIframeLikeElementCenter(f,n,a,l)?(xt(this.interactiveCanvas,Tt.POINTER),this.setState({activeEmbeddable:{element:f,state:"hover"}})):(!f||!fe(f)||!(f.startBinding||f.endBinding))&&(xt(this.interactiveCanvas,Tt.MOVE),((b=this.state.activeEmbeddable)==null?void 0:b.state)==="hover"&&this.setState({activeEmbeddable:null})))),((E=this.state.openDialog)==null?void 0:E.name)==="elementLinkSelector"&&f?this.setState(v=>({hoveredElementIds:Og(v.hoveredElementIds,Wi({editingGroupId:v.editingGroupId,selectedElementIds:{[f.id]:!0}},this.scene.getNonDeletedElements(),v,this).selectedElementIds)})):((y=this.state.openDialog)==null?void 0:y.name)==="elementLinkSelector"&&!f&&this.setState(v=>({hoveredElementIds:Og(v.hoveredElementIds,{})})))});F(this,"handleEraser",(n,i,r)=>{this.eraserTrail.addPointToPath(r.x,r.y);let s=!1;const o=new Set,a=this.scene.getNonDeletedElements(),l=h=>{var m;for(const p of h){if(p.locked)return;if(n.altKey?this.elementsPendingErasure.delete(p.id)&&(s=!0):this.elementsPendingErasure.has(p.id)||(s=!0,this.elementsPendingErasure.add(p.id)),s&&((m=p.groupIds)!=null&&m.length)){const b=p.groupIds.at(-1);if(!o.has(b)){o.add(b);const E=Gt(a,b);for(const y of E)n.altKey?this.elementsPendingErasure.delete(y.id):this.elementsPendingErasure.add(y.id)}}}},c=mt(C(i.lastCoords.x,i.lastCoords.y),C(r.x,r.y)),u=this.getElementHitThreshold(),d={...i.lastCoords};let f=0;for(;f<=c;){const h=this.getElementsAtPosition(d.x,d.y);if(l(h),f===c)break;f=Math.min(f+u,c);const m=f/c,p=(1-m)*d.x+m*r.x,b=(1-m)*d.y+m*r.y;d.x=p,d.y=b}if(i.lastCoords.x=r.x,i.lastCoords.y=r.y,s){for(const h of this.scene.getNonDeletedElements())jt(h)&&(this.elementsPendingErasure.has(h.id)||this.elementsPendingErasure.has(h.containerId))&&(n.altKey?(this.elementsPendingErasure.delete(h.id),this.elementsPendingErasure.delete(h.containerId)):(this.elementsPendingErasure.add(h.id),this.elementsPendingErasure.add(h.containerId)));this.elementsPendingErasure=new Set(this.elementsPendingErasure),this.triggerRender()}});F(this,"handleTouchMove",n=>{qg=!0});F(this,"handleCanvasPointerDown",n=>{var d,f,h;const i=n.target;if(i.setPointerCapture&&i.setPointerCapture(n.pointerId),this.maybeCleanupAfterMissingPointerUp(n.nativeEvent),this.maybeUnfollowRemoteUser(),this.state.searchMatches&&(this.setState(m=>({searchMatches:m.searchMatches.map(p=>({...p,focus:!1}))})),zs.set(UX,null)),this.state.contextMenu&&this.setState({contextMenu:null}),this.state.snapLines&&this.setAppState({snapLines:[]}),this.updateGestureOnPointerDown(n),n.pointerType==="touch"&&this.state.newElement&&this.state.newElement.type==="freedraw"){const m=this.state.newElement;this.updateScene({...m.points.length<10?{elements:this.scene.getElementsIncludingDeleted().filter(p=>p.id!==m.id)}:{},appState:{newElement:null,editingTextElement:null,startBoundElement:null,suggestedBindings:[],selectedElementIds:ht(Object.keys(this.state.selectedElementIds).filter(p=>p!==m.id).reduce((p,b)=>(p[b]=this.state.selectedElementIds[b],p),{}),this.state)},captureUpdate:((d=this.state.openDialog)==null?void 0:d.name)==="elementLinkSelector"?Z.EVENTUALLY:Z.NEVER});return}const r=document.getSelection();if(r!=null&&r.anchorNode&&r.removeAllRanges(),this.maybeOpenContextMenuAfterPointerDownOnTouchDevices(n),!this.state.penDetected&&n.pointerType==="pen"&&this.setState(m=>({penMode:!0,penDetected:!0})),!this.device.isTouchScreen&&["pen","touch"].includes(n.pointerType)&&(this.device=GU(this.device,{isTouchScreen:!0})),Zg||(this.lastPointerDownEvent=n,this.handleCanvasPanUsingWheelOrSpaceDrag(n)))return;if(this.setState({lastPointerDownWith:n.pointerType,cursorButton:"down"}),this.savePointer(n.clientX,n.clientY,"down"),n.button===vl.ERASER&&this.state.activeTool.type!==Gn.eraser){this.setState({activeTool:Tn(this.state,{type:Gn.eraser,lastActiveToolBeforeEraser:this.state.activeTool})},()=>{this.handleCanvasPointerDown(n);const m=()=>{p(),b==null||b(),Eo(this.state)&&this.setState({activeTool:Tn(this.state,{...this.state.activeTool.lastActiveTool||{type:Gn.selection},lastActiveToolBeforeEraser:null})})},p=nn(window,te.POINTER_UP,m,{once:!0});let b;requestAnimationFrame(()=>{b=this.missingPointerEventCleanupEmitter.once(m)})});return}if(n.button!==vl.MAIN&&n.button!==vl.TOUCH&&n.button!==vl.ERASER||ft.pointers.size>1)return;const s=this.initialPointerDownState(n);if(this.setState({selectedElementsAreBeingDragged:!1}),this.handleDraggingScrollBar(n,s)||(this.clearSelectionIfNotUsingSelection(),this.updateBindingEnabledOnPointerMove(n),this.handleSelectionOnPointerDown(n,s))||!(!this.state.penMode||n.pointerType!=="touch"||this.state.activeTool.type==="selection"||this.state.activeTool.type==="text"||this.state.activeTool.type==="image"))return;if(this.state.activeTool.type==="text")this.handleTextOnPointerDown(n,s);else if(this.state.activeTool.type==="arrow"||this.state.activeTool.type==="line")this.handleLinearElementOnPointerDown(n,this.state.activeTool.type,s);else if(this.state.activeTool.type==="image"){xt(this.interactiveCanvas,Tt.CROSSHAIR);const m=this.state.pendingImageElementId&&this.scene.getElement(this.state.pendingImageElementId);if(!m)return;this.setState({newElement:m,pendingImageElementId:null,multiElement:null});const{x:p,y:b}=Pt(n,this.state),E=this.getTopLayerFrameAtSceneCoords({x:p,y:b});ee(m,{x:p,y:b,frameId:E?E.id:null})}else this.state.activeTool.type==="freedraw"?this.handleFreeDrawElementOnPointerDown(n,this.state.activeTool.type,s):this.state.activeTool.type==="custom"?po(this.interactiveCanvas,this.state):this.state.activeTool.type===Gn.frame||this.state.activeTool.type===Gn.magicframe?this.createFrameElementOnPointerDown(s,this.state.activeTool.type):this.state.activeTool.type==="laser"?this.laserTrails.startPath(s.lastCoords.x,s.lastCoords.y):this.state.activeTool.type!=="eraser"&&this.state.activeTool.type!=="hand"&&this.createGenericElementOnPointerDown(this.state.activeTool.type,s);(h=(f=this.props)==null?void 0:f.onPointerDown)==null||h.call(f,this.state.activeTool,s),this.onPointerDownEmitter.trigger(this.state.activeTool,s,n),this.state.activeTool.type==="eraser"&&this.eraserTrail.startPath(s.lastCoords.x,s.lastCoords.y);const a=this.onPointerMoveFromPointerDownHandler(s),l=this.onPointerUpFromPointerDownHandler(s),c=this.onKeyDownFromPointerDownHandler(s),u=this.onKeyUpFromPointerDownHandler(s);this.missingPointerEventCleanupEmitter.once(m=>l(m||n.nativeEvent)),(!this.state.viewModeEnabled||this.state.activeTool.type==="laser")&&(window.addEventListener(te.POINTER_MOVE,a),window.addEventListener(te.POINTER_UP,l),window.addEventListener(te.KEYDOWN,c),window.addEventListener(te.KEYUP,u),s.eventListeners.onMove=a,s.eventListeners.onUp=l,s.eventListeners.onKeyUp=u,s.eventListeners.onKeyDown=c)});F(this,"handleCanvasPointerUp",n=>{var s;this.removePointer(n),this.lastPointerUpEvent=n;const i=Pt({clientX:n.clientX,clientY:n.clientY},this.state),r=n.timeStamp-(((s=this.lastPointerDownEvent)==null?void 0:s.timeStamp)??0);if(this.device.editor.isMobile&&r<300){const o=this.getElementAtPosition(i.x,i.y);if(is(o)&&this.isIframeLikeElementCenter(o,n,i.x,i.y)){this.handleEmbeddableCenterClick(o);return}}if(this.device.isTouchScreen){const o=this.getElementAtPosition(i.x,i.y);this.hitLinkElement=this.getElementLinkAtPosition(i,o)}this.hitLinkElement&&!this.state.selectedElementIds[this.hitLinkElement.id]?r<300&&is(this.hitLinkElement)&&!o$(this.hitLinkElement,this.scene.getNonDeletedElementsMap(),this.state,C(i.x,i.y))?this.handleEmbeddableCenterClick(this.hitLinkElement):this.redirectToLink(n,this.device.isTouchScreen):this.state.viewModeEnabled&&this.setState({activeEmbeddable:null,selectedElementIds:{}})});F(this,"maybeOpenContextMenuAfterPointerDownOnTouchDevices",n=>{n.pointerType==="touch"&&(qg=!1,yl?qg=!0:yl=window.setTimeout(()=>{yl=0,qg||this.handleCanvasContextMenu(n)},zne))});F(this,"resetContextMenuTimer",()=>{clearTimeout(yl),yl=0,qg=!1});F(this,"maybeCleanupAfterMissingPointerUp",n=>{qc==null||qc(),this.missingPointerEventCleanupEmitter.trigger(n).clear()});F(this,"handleCanvasPanUsingWheelOrSpaceDrag",n=>{if(!(ft.pointers.size<=1&&(n.button===vl.WHEEL||n.button===vl.MAIN&&Zc||Ih(this.state)||this.state.viewModeEnabled)))return!1;Zg=!0,this.focusContainer(),this.state.editingTextElement||n.preventDefault();let i=!1;const r=typeof window===void 0?!1:/Linux/.test(window.navigator.platform);xt(this.interactiveCanvas,Tt.GRABBING);let{clientX:s,clientY:o}=n;const a=p7(c=>{const u=s-c.clientX,d=o-c.clientY;if(s=c.clientX,o=c.clientY,r&&!i&&(Math.abs(u)>1||Math.abs(d)>1)){i=!0;const f=m=>{document.body.removeEventListener(te.PASTE,f),m.stopPropagation()},h=()=>{setTimeout(()=>{document.body.removeEventListener(te.PASTE,f),window.removeEventListener(te.POINTER_UP,h)},100)};document.body.addEventListener(te.PASTE,f),window.addEventListener(te.POINTER_UP,h)}this.translateCanvas({scrollX:this.state.scrollX-u/this.state.zoom.value,scrollY:this.state.scrollY-d/this.state.zoom.value})}),l=rn(qc=()=>{qc=null,Zg=!1,Zc||(this.state.viewModeEnabled?xt(this.interactiveCanvas,Tt.GRAB):po(this.interactiveCanvas,this.state)),this.setState({cursorButton:"up"}),this.savePointer(n.clientX,n.clientY,"up"),window.removeEventListener(te.POINTER_MOVE,a),window.removeEventListener(te.POINTER_UP,l),window.removeEventListener(te.BLUR,l),a.flush()});return window.addEventListener(te.BLUR,l),window.addEventListener(te.POINTER_MOVE,a,{passive:!0}),window.addEventListener(te.POINTER_UP,l),!0});F(this,"clearSelectionIfNotUsingSelection",()=>{this.state.activeTool.type!=="selection"&&this.setState({selectedElementIds:ht({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null})});F(this,"handleSelectionOnPointerDown",(n,i)=>{var r;if(this.state.activeTool.type==="selection"){const s=this.scene.getNonDeletedElements(),o=this.scene.getNonDeletedElementsMap(),a=this.scene.getSelectedElements(this.state);if(a.length===1&&!this.state.editingLinearElement&&!fe(a[0])&&!(this.state.selectedLinearElement&&this.state.selectedLinearElement.hoverPointIndex!==-1)){const l=NC(s,this.state,i.origin.x,i.origin.y,this.state.zoom,n.pointerType,this.scene.getNonDeletedElementsMap(),this.device);l!=null&&(l.transformHandleType==="rotation"?(this.setState({resizingElement:l.element}),i.resize.handleType=l.transformHandleType):(this.state.croppingElementId||this.setState({resizingElement:l.element}),i.resize.handleType=l.transformHandleType))}else a.length>1&&(i.resize.handleType=OC(_t(a),i.origin.x,i.origin.y,this.state.zoom,n.pointerType,this.device));if(i.resize.handleType)i.resize.isResizing=!0,i.resize.offset=Ps(rle(i.resize.handleType,a,o,i.origin.x,i.origin.y)),a.length===1&&ke(a[0])&&a[0].points.length===2&&(i.resize.arrowDirection=sle(i.resize.handleType,a[0]));else{if(this.state.selectedLinearElement){const u=this.state.editingLinearElement||this.state.selectedLinearElement,d=ce.handlePointerDown(n,this,this.store,i.origin,u,this.scene);if(d.hitElement&&(i.hit.element=d.hitElement),d.linearElementEditor&&(this.setState({selectedLinearElement:d.linearElementEditor}),this.state.editingLinearElement&&this.setState({editingLinearElement:d.linearElementEditor})),d.didAddPoint)return!0}if(i.hit.element=i.hit.element??this.getElementAtPosition(i.origin.x,i.origin.y),this.hitLinkElement=this.getElementLinkAtPosition(i.origin,i.hit.element),this.hitLinkElement)return!0;if(this.state.croppingElementId&&((r=i.hit.element)==null?void 0:r.id)!==this.state.croppingElementId&&this.finishImageCropping(),i.hit.element&&this.getElementLinkAtPosition({x:i.origin.x,y:i.origin.y},i.hit.element))return!1;i.hit.allHitElements=this.getElementsAtPosition(i.origin.x,i.origin.y);const l=i.hit.element,c=i.hit.allHitElements.some(u=>this.isASelectedElement(u));if((l===null||!c)&&!n.shiftKey&&!i.hit.hasHitCommonBoundingBoxOfSelectedElements&&this.clearSelection(l),this.state.editingLinearElement)this.setState({selectedElementIds:ht({[this.state.editingLinearElement.elementId]:!0},this.state)});else if(l!=null){if(n[z.CTRL_OR_CMD])return this.state.selectedElementIds[l.id]||(i.hit.wasAddedToSelection=!0),this.setState(u=>({...yoe(u,l),previousSelectedElementIds:this.state.selectedElementIds})),!1;this.state.selectedElementIds[l.id]||(this.state.editingGroupId&&!P0(l,this.state.editingGroupId)&&this.setState({selectedElementIds:ht({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null}),!c&&!i.hit.hasHitCommonBoundingBoxOfSelectedElements&&(this.setState(u=>{var h;let d={...u.selectedElementIds,[l.id]:!0};const f=[];if(Object.keys(u.selectedElementIds).forEach(m=>{const p=this.scene.getElement(m);p&&f.push(p)}),Ie(l))Ho(f,l.id).forEach(m=>{delete d[m.id]});else if(l.frameId)d[l.frameId]&&delete d[l.id];else{const m=l.groupIds,p=new Set(m.flatMap(b=>Gt(this.scene.getNonDeletedElements(),b)).filter(b=>Ie(b)).map(b=>b.id));p.size>0&&f.forEach(b=>{b.frameId&&p.has(b.frameId)&&(delete d[b.id],b.groupIds.flatMap(E=>Gt(this.scene.getNonDeletedElements(),E)).forEach(E=>{delete d[E.id]}))})}return((h=u.openDialog)==null?void 0:h.name)==="elementLinkSelector"&&(l.groupIds.some(m=>u.selectedGroupIds[m])||(d={[l.id]:!0})),{...Wi({editingGroupId:u.editingGroupId,selectedElementIds:d},this.scene.getNonDeletedElements(),u,this),showHyperlinkPopup:l.link||lr(l)?"info":!1}}),i.hit.wasAddedToSelection=!0))}this.setState({previousSelectedElementIds:this.state.selectedElementIds})}}return!1});F(this,"handleTextOnPointerDown",(n,i)=>{if(this.state.editingTextElement)return;let r=i.origin.x,s=i.origin.y;const o=this.getElementAtPosition(r,s,{includeBoundTextElement:!0});let a=this.getTextBindableContainerAtPosition(r,s);ys(o)&&(a=o,r=o.x+o.width/2,s=o.y+o.height/2),this.startTextEditing({sceneX:r,sceneY:s,insertAtParentCenter:!n.altKey,container:a,autoEdit:!1}),xs(this.interactiveCanvas),this.state.activeTool.locked||this.setState({activeTool:Tn(this.state,{type:"selection"})})});F(this,"handleFreeDrawElementOnPointerDown",(n,i,r)=>{const[s,o]=Mn(r.origin.x,r.origin.y,null),a=this.getTopLayerFrameAtSceneCoords({x:s,y:o}),l=n.pressure===.5,c=Rae({type:i,x:s,y:o,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,roundness:null,simulatePressure:l,locked:!1,frameId:a?a.id:null,points:[C(0,0)],pressures:l?[]:[n.pressure]});this.scene.insertElement(c),this.setState(d=>{const f={...d.selectedElementIds};return delete f[c.id],{selectedElementIds:ht(f,d)}});const u=Bs(r.origin,this.scene.getNonDeletedElements(),this.scene.getNonDeletedElementsMap(),this.state.zoom);this.setState({newElement:c,startBoundElement:u,suggestedBindings:[]})});F(this,"insertIframeElement",({sceneX:n,sceneY:i,width:r,height:s})=>{var c;const[o,a]=Mn(n,i,(c=this.lastPointerDownEvent)!=null&&c[z.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),l=Cae({type:"iframe",x:o,y:a,strokeColor:"transparent",backgroundColor:"transparent",fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,roundness:this.getCurrentItemRoundness("iframe"),opacity:this.state.currentItemOpacity,locked:!1,width:r,height:s});return this.scene.insertElement(l),l});F(this,"insertEmbeddableElement",({sceneX:n,sceneY:i,link:r})=>{var c;const[s,o]=Mn(n,i,(c=this.lastPointerDownEvent)!=null&&c[z.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),a=kf(r);if(!a)return;a.error instanceof URIError&&this.setToast({message:k("toast.unrecognizedLinkFormat"),closable:!0});const l=SC({type:"embeddable",x:s,y:o,strokeColor:"transparent",backgroundColor:"transparent",fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,roundness:this.getCurrentItemRoundness("embeddable"),opacity:this.state.currentItemOpacity,locked:!1,width:a.intrinsicSize.w,height:a.intrinsicSize.h,link:r});return this.scene.insertElement(l),l});F(this,"createImageElement",({sceneX:n,sceneY:i,addToFrameUnderCursor:r=!0})=>{var c;const[s,o]=Mn(n,i,(c=this.lastPointerDownEvent)!=null&&c[z.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),a=r?this.getTopLayerFrameAtSceneCoords({x:s,y:o}):null;return rB({type:"image",x:s,y:o,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,roundness:null,opacity:this.state.currentItemOpacity,locked:!1,frameId:a?a.id:null})});F(this,"handleLinearElementOnPointerDown",(n,i,r)=>{if(this.state.multiElement){const{multiElement:s}=this.state;if(s.type==="line"&&Wa(s.points,this.state.zoom.value)){ee(s,{lastCommittedPoint:s.points[s.points.length-1]}),this.actionManager.executeAction(Ss);return}if(fe(s)&&s.points.length>1){ee(s,{lastCommittedPoint:s.points[s.points.length-1]}),this.actionManager.executeAction(Ss);return}const{x:o,y:a,lastCommittedPoint:l}=s;if(s.points.length>1&&l&&mt(C(r.origin.x-o,r.origin.y-a),l)<$U){this.actionManager.executeAction(Ss);return}this.setState(c=>({selectedElementIds:ht({...c.selectedElementIds,[s.id]:!0},c)})),ee(s,{lastCommittedPoint:s.points[s.points.length-1]}),xt(this.interactiveCanvas,Tt.POINTER)}else{const[s,o]=Mn(r.origin.x,r.origin.y,n[z.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),a=this.getTopLayerFrameAtSceneCoords({x:s,y:o}),{currentItemStartArrowhead:l,currentItemEndArrowhead:c}=this.state,[u,d]=i==="arrow"?[l,c]:[null,null],f=i==="arrow"?j9({type:i,x:s,y:o,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,roundness:this.state.currentItemArrowType===ei.round?{type:Nn.PROPORTIONAL_RADIUS}:null,startArrowhead:u,endArrowhead:d,locked:!1,frameId:a?a.id:null,elbowed:this.state.currentItemArrowType===ei.elbow,fixedSegments:this.state.currentItemArrowType===ei.elbow?[]:null}):Pu({type:i,x:s,y:o,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,roundness:this.state.currentItemRoundness==="round"?{type:Nn.PROPORTIONAL_RADIUS}:null,locked:!1,frameId:a?a.id:null});this.setState(m=>{const p={...m.selectedElementIds};return delete p[f.id],{selectedElementIds:ht(p,m)}}),ee(f,{points:[...f.points,C(0,0)]});const h=Bs(r.origin,this.scene.getNonDeletedElements(),this.scene.getNonDeletedElementsMap(),this.state.zoom,fe(f),fe(f));this.scene.insertElement(f),this.setState({newElement:f,startBoundElement:h,suggestedBindings:[]})}});F(this,"createGenericElementOnPointerDown",(n,i)=>{var c;const[r,s]=Mn(i.origin.x,i.origin.y,(c=this.lastPointerDownEvent)!=null&&c[z.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),o=this.getTopLayerFrameAtSceneCoords({x:r,y:s}),a={x:r,y:s,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,roundness:this.getCurrentItemRoundness(n),locked:!1,frameId:o?o.id:null};let l;n==="embeddable"?l=SC({type:"embeddable",...a}):l=Za({type:n,...a}),l.type==="selection"?this.setState({selectionElement:l}):(this.scene.insertElement(l),this.setState({multiElement:null,newElement:l}))});F(this,"createFrameElementOnPointerDown",(n,i)=>{var l;const[r,s]=Mn(n.origin.x,n.origin.y,(l=this.lastPointerDownEvent)!=null&&l[z.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),o={x:r,y:s,opacity:this.state.currentItemOpacity,locked:!1,...sn},a=i===Gn.magicframe?wE(o):X9(o);this.scene.insertElement(a),this.setState({multiElement:null,newElement:a})});F(this,"restoreReadyToEraseElements",()=>{this.elementsPendingErasure=new Set,this.triggerRender()});F(this,"eraseElements",()=>{let n=!1;const i=this.scene.getElementsIncludingDeleted().map(r=>this.elementsPendingErasure.has(r.id)||r.frameId&&this.elementsPendingErasure.has(r.frameId)||jt(r)&&this.elementsPendingErasure.has(r.containerId)?(n=!0,Ce(r,{isDeleted:!0})):r);this.elementsPendingErasure=new Set,n&&(this.store.shouldCaptureIncrement(),this.scene.replaceAllElements(i))});F(this,"initializeImage",async({imageFile:n,imageElement:i,showCursorImagePreview:r=!1})=>{var u,d,f,h;if(!Fu(n))throw new Error(k("errors.unsupportedFileType"));const s=n.type;if(xt(this.interactiveCanvas,"wait"),s===be.svg)try{n=VM(RC(await n.text()),n.name)}catch(m){throw console.warn(m),new Error(k("errors.svgImageInsertError"))}const o=await(((d=(u=this.props).generateIdForFile)==null?void 0:d.call(u,n))||Hbe(n));if(!o)throw console.warn("Couldn't generate file id or the supplied `generateIdForFile` didn't resolve to one."),new Error(k("errors.imageInsertError"));const a=this.files[o];if(!(a!=null&&a.dataURL)){try{n=await n4(n,{maxWidthOrHeight:Kne})}catch(m){console.error("Error trying to resizing image file on insertion",m)}if(n.size>wx)throw new Error(k("errors.fileTooBig",{maxSize:`${Math.trunc(wx/1024/1024)}MB`}))}if(r){const m=(f=this.files[o])==null?void 0:f.dataURL,p=m&&$be(m);this.setImagePreviewCursor(p||n)}const l=((h=this.files[o])==null?void 0:h.dataURL)||await t4(n),c=ee(i,{fileId:o},!1);return new Promise(async(m,p)=>{var b;try{this.addMissingFiles([{mimeType:s,id:o,dataURL:l,created:Date.now(),lastRetrieved:Date.now()}]);const E=this.imageCache.get(o);E||(this.addNewImagesToImageCache(),await this.updateImageCache([c])),(E==null?void 0:E.image)instanceof Promise&&await E.image,this.state.pendingImageElementId!==c.id&&((b=this.state.newElement)==null?void 0:b.id)!==c.id&&this.initializeImageDimensions(c,!0),m(c)}catch(E){console.error(E),p(new Error(k("errors.imageInsertError")))}finally{r||xs(this.interactiveCanvas)}})});F(this,"insertImageElement",async(n,i,r)=>{if(!this.isToolSupported("image")){this.setState({errorMessage:k("errors.imageToolNotSupported")});return}this.scene.insertElement(n);try{return await this.initializeImage({imageFile:i,imageElement:n,showCursorImagePreview:r})}catch(s){return ee(n,{isDeleted:!0}),this.actionManager.executeAction(Ss),this.setState({errorMessage:s.message||k("errors.imageInsertError")}),null}});F(this,"setImagePreviewCursor",async n=>{let r;try{r=await n4(n,{maxWidthOrHeight:96})}catch(o){throw o.cause==="UNSUPPORTED"?new Error(k("errors.unsupportedFileType")):o}let s=await t4(r);if(n.type===be.svg){const o=await oB(s);let a=Math.min(o.height,96),l=a*(o.width/o.height);l>96&&(l=96,a=l*(o.height/o.width));const c=document.createElement("canvas");c.height=a,c.width=l,c.getContext("2d").drawImage(o,0,0,l,a),s=c.toDataURL(be.svg)}this.state.pendingImageElementId&&xt(this.interactiveCanvas,`url(${s}) 4 4, auto`)});F(this,"onImageAction",async({insertOnCanvasDirectly:n})=>{try{const i=this.state.width/2+this.state.offsetLeft,r=this.state.height/2+this.state.offsetTop,{x:s,y:o}=Pt({clientX:i,clientY:r},this.state),a=await O_({description:"Image",extensions:Object.keys(mh)}),l=this.createImageElement({sceneX:s,sceneY:o,addToFrameUnderCursor:!1});n?(this.insertImageElement(l,a),this.initializeImageDimensions(l),this.setState({selectedElementIds:ht({[l.id]:!0},this.state)},()=>{this.actionManager.executeAction(Ss)})):this.setState({pendingImageElementId:l.id},()=>{this.insertImageElement(l,a,!0)})}catch(i){i.name!=="AbortError"?console.error(i):console.warn(i),this.setState({pendingImageElementId:null,newElement:null,activeTool:Tn(this.state,{type:"selection"})},()=>{this.actionManager.executeAction(Ss)})}});F(this,"initializeImageDimensions",(n,i=!1)=>{var s;const r=In(n)&&((s=this.imageCache.get(n.fileId))==null?void 0:s.image);if(!r||r instanceof Promise){if(n.width<eu/this.state.zoom.value&&n.height<eu/this.state.zoom.value){const o=100/this.state.zoom.value;ee(n,{x:n.x-o/2,y:n.y-o/2,width:o,height:o})}return}if(i||n.width<eu/this.state.zoom.value&&n.height<eu/this.state.zoom.value){const o=Math.max(this.state.height-120,160),a=Math.min(o,Math.floor(this.state.height*.5)/this.state.zoom.value),l=Math.min(r.naturalHeight,a),c=l*(r.naturalWidth/r.naturalHeight),u=n.x+n.width/2-c/2,d=n.y+n.height/2-l/2;ee(n,{x:u,y:d,width:c,height:l,crop:null})}});F(this,"updateImageCache",async(n,i=this.files)=>{const{updatedFiles:r,erroredFiles:s}=await aB({imageCache:this.imageCache,fileIds:n.map(o=>o.fileId),files:i});if(r.size||s.size)for(const o of n)r.has(o.fileId)&&Xt.delete(o);return s.size&&this.scene.replaceAllElements(this.scene.getElementsIncludingDeleted().map(o=>In(o)&&s.has(o.fileId)?Ce(o,{status:"error"}):o)),{updatedFiles:r,erroredFiles:s}});F(this,"addNewImagesToImageCache",async(n=lB(this.scene.getNonDeletedElements()),i=this.files)=>{const r=n.filter(s=>!s.isDeleted&&!this.imageCache.has(s.fileId));if(r.length){const{updatedFiles:s}=await this.updateImageCache(r,i);s.size&&this.scene.triggerUpdate()}});F(this,"scheduleImageRefresh",Mo(()=>{this.addNewImagesToImageCache()},Fne));F(this,"updateBindingEnabledOnPointerMove",n=>{const i=_se(n);this.state.isBindingEnabled!==i&&this.setState({isBindingEnabled:i})});F(this,"maybeSuggestBindingAtCursor",(n,i)=>{const r=Bs(n,this.scene.getNonDeletedElements(),this.scene.getNonDeletedElementsMap(),this.state.zoom,!1,i);this.setState({suggestedBindings:r!=null?[r]:[]})});F(this,"maybeSuggestBindingsForLinearElementAtCoords",(n,i,r)=>{if(!i.length)return;const s=i.reduce((o,a)=>{const l=Bs(a,this.scene.getNonDeletedElements(),this.scene.getNonDeletedElementsMap(),this.state.zoom,fe(n),fe(n));return l!=null&&!lF(n,r==null?void 0:r.id,l)&&o.push(l),o},[]);this.setState({suggestedBindings:s})});F(this,"handleInteractiveCanvasRef",n=>{var i,r;n!==null?(this.interactiveCanvas=n,this.interactiveCanvas.addEventListener(te.TOUCH_START,this.onTouchStart,{passive:!1}),this.interactiveCanvas.addEventListener(te.TOUCH_END,this.onTouchEnd)):((i=this.interactiveCanvas)==null||i.removeEventListener(te.TOUCH_START,this.onTouchStart),(r=this.interactiveCanvas)==null||r.removeEventListener(te.TOUCH_END,this.onTouchEnd))});F(this,"handleAppOnDrop",async n=>{var l,c,u,d;const{file:i,fileHandle:r}=await jbe(n),{x:s,y:o}=Pt(n,this.state);try{if(Fu(i)&&this.isToolSupported("image")){if((i==null?void 0:i.type)===be.png||(i==null?void 0:i.type)===be.svg)try{const h=await H_(i,this.state,this.scene.getElementsIncludingDeleted(),r);this.syncActionResult({...h,appState:{...h.appState||this.state,isLoading:!1},replaceFiles:!0,captureUpdate:Z.IMMEDIATELY});return}catch(h){if(h.name!=="EncodingError")throw new Error(k("alerts.couldNotLoadInvalidFile"))}const f=this.createImageElement({sceneX:s,sceneY:o});this.insertImageElement(f,i),this.initializeImageDimensions(f),this.setState({selectedElementIds:ht({[f.id]:!0},this.state)});return}}catch(f){return this.setState({isLoading:!1,errorMessage:f.message})}const a=n.dataTransfer.getData(be.excalidrawlib);if(a&&typeof a=="string"){try{const f=b$(a);this.addElementsFromPasteOrLibrary({elements:j$(f),position:n,files:null})}catch(f){this.setState({errorMessage:f.message})}return}if(i&&await this.loadFileToCanvas(i,r),(c=(l=n.dataTransfer)==null?void 0:l.types)!=null&&c.includes("text/plain")){const f=(u=n.dataTransfer)==null?void 0:u.getData("text");if(f&&JU(f,this.props.validateEmbeddable)&&(/^(http|https):\/\/[^\s/$.?#].[^\s]*$/.test(f)||((d=kf(f))==null?void 0:d.type)==="video")){const h=this.insertEmbeddableElement({sceneX:s,sceneY:o,link:Pr(f)});h&&this.setState({selectedElementIds:{[h.id]:!0}})}}});F(this,"loadFileToCanvas",async(n,i)=>{n=await V_(n);try{const r=this.scene.getElementsIncludingDeleted();let s;try{s=await U$(n,this.state,r,i)}catch(o){const a=o instanceof bu;if(a&&o.code==="IMAGE_NOT_CONTAINS_SCENE_DATA"&&!this.isToolSupported("image")){this.setState({isLoading:!1,errorMessage:k("errors.imageToolNotSupported")});return}const l=k(a?"alerts.cannotRestoreFromImage":"alerts.couldNotLoadInvalidFile");this.setState({isLoading:!1,errorMessage:l})}if(!s)return;s.type===be.excalidraw?(Ya(r.concat(s.data.elements)),this.store.updateSnapshot(Se(r),this.state),this.setState({isLoading:!0}),this.syncActionResult({...s.data,appState:{...s.data.appState||this.state,isLoading:!1},replaceFiles:!0,captureUpdate:Z.IMMEDIATELY})):s.type===be.excalidrawlib&&await this.library.updateLibrary({libraryItems:n,merge:!0,openLibraryMenu:!0}).catch(o=>{console.error(o),this.setState({errorMessage:k("errors.importLibraryError")})})}catch(r){this.setState({isLoading:!1,errorMessage:r.message})}});F(this,"handleCanvasContextMenu",n=>{if(n.preventDefault(),("pointerType"in n.nativeEvent&&n.nativeEvent.pointerType==="touch"||"pointerType"in n.nativeEvent&&n.nativeEvent.pointerType==="pen"&&n.button!==vl.SECONDARY)&&this.state.activeTool.type!=="selection")return;const{x:i,y:r}=Pt(n,this.state),s=this.getElementAtPosition(i,r,{preferSelected:!0,includeLockedElements:!0}),o=this.scene.getSelectedElements(this.state),a=this.isHittingCommonBoundingBoxOfSelectedElements({x:i,y:r},o),l=s||a?"element":"canvas",c=this.excalidrawContainerRef.current,{top:u,left:d}=c.getBoundingClientRect(),f=n.clientX-d,h=n.clientY-u;ct("contextMenu","openContextMenu",l),this.setState({...s&&!this.state.selectedElementIds[s.id]?{...this.state,...Wi({editingGroupId:this.state.editingGroupId,selectedElementIds:{[s.id]:!0}},this.scene.getNonDeletedElements(),this.state,this),selectedLinearElement:ke(s)?new ce(s):null}:this.state,showHyperlinkPopup:!1},()=>{this.setState({contextMenu:{top:h,left:f,items:this.getContextMenuItems(l)}})})});F(this,"maybeDragNewGenericElement",(n,i,r=!0)=>{var m,p,b;const s=this.state.selectionElement,o=n.lastCoords;if(s&&this.state.activeTool.type!=="eraser"){BC({newElement:s,elementType:this.state.activeTool.type,originX:n.origin.x,originY:n.origin.y,x:o.x,y:o.y,width:Ni(n.origin.x,o.x),height:Ni(n.origin.y,o.y),shouldMaintainAspectRatio:Ng(i),shouldResizeFromCenter:g8(i),zoom:this.state.zoom.value,informMutation:r});return}const a=this.state.newElement;if(!a)return;let[l,c]=Mn(o.x,o.y,i[z.CTRL_OR_CMD]?null:this.getEffectiveGridSize());const u=In(a)&&((m=this.imageCache.get(a.fileId))==null?void 0:m.image),d=u&&!(u instanceof Promise)?u.width/u.height:null;this.maybeCacheReferenceSnapPoints(i,[a]);const{snapOffset:f,snapLines:h}=c8e(a,this,i,{x:n.originInGrid.x+(((p=this.state.originSnapOffset)==null?void 0:p.x)??0),y:n.originInGrid.y+(((b=this.state.originSnapOffset)==null?void 0:b.y)??0)},{x:l-n.originInGrid.x,y:c-n.originInGrid.y},this.scene.getNonDeletedElementsMap());l+=f.x,c+=f.y,this.setState({snapLines:h}),BC({newElement:a,elementType:this.state.activeTool.type,originX:n.originInGrid.x,originY:n.originInGrid.y,x:l,y:c,width:Ni(n.originInGrid.x,l),height:Ni(n.originInGrid.y,c),shouldMaintainAspectRatio:it(a)?!Ng(i):Ng(i),shouldResizeFromCenter:g8(i),zoom:this.state.zoom.value,widthAspectRatio:d,originOffset:this.state.originSnapOffset,informMutation:r}),this.setState({newElement:a}),(this.state.activeTool.type===Gn.frame||this.state.activeTool.type===Gn.magicframe)&&this.setState({elementsToHighlight:qU(this.scene.getNonDeletedElements(),a,this.state,this.scene.getNonDeletedElementsMap())})});F(this,"maybeHandleCrop",(n,i)=>{var c;if(!this.state.croppingElementId)return!1;const r=n.resize.handleType,s=n.lastCoords,[o,a]=Mn(s.x-n.resize.offset.x,s.y-n.resize.offset.y,i[z.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),l=this.scene.getNonDeletedElementsMap().get(this.state.croppingElementId);if(r&&l&&it(l)){const u=n.originalElements.get(l.id),d=In(l)&&((c=this.imageCache.get(l.fileId))==null?void 0:c.image);if(u&&it(u)&&d&&!(d instanceof Promise)){const[f,h]=Mn(s.x,s.y,i[z.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),m={x:f-n.originInGrid.x,y:h-n.originInGrid.y};this.maybeCacheReferenceSnapPoints(i,[l]);const{snapOffset:p,snapLines:b}=wR([l],[u],this,i,m,r);ee(l,Xoe(l,r,d.naturalWidth,d.naturalHeight,o+p.x,a+p.y,i.shiftKey?u.width/u.height:void 0)),pr(l,this.scene.getNonDeletedElementsMap(),{newSize:{width:l.width,height:l.height}}),this.setState({isCropping:r&&r!=="rotation",snapLines:b})}return!0}return!1});F(this,"maybeHandleResize",(n,i)=>{const r=this.scene.getSelectedElements(this.state),s=r.filter(d=>Ie(d)),o=n.resize.handleType;if(s.length>0&&o==="rotation"||r.length===1&&fe(r[0])||this.state.croppingElementId)return!1;this.setState({isResizing:o&&o!=="rotation",isRotating:o==="rotation",activeEmbeddable:null});const a=n.lastCoords;let[l,c]=Mn(a.x-n.resize.offset.x,a.y-n.resize.offset.y,i[z.CTRL_OR_CMD]?null:this.getEffectiveGridSize());const u=new Map;if(s.forEach(d=>{Ho(this.scene.getNonDeletedElements(),d.id).forEach(h=>{u.set(d.id+h.id,{x:h.x-d.x,y:h.y-d.y})})}),!this.state.selectedElementsAreBeingDragged){const[d,f]=Mn(a.x,a.y,i[z.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),h={x:d-n.originInGrid.x,y:f-n.originInGrid.y},m=[...n.originalElements.values()];this.maybeCacheReferenceSnapPoints(i,r);const{snapOffset:p,snapLines:b}=wR(r,Be(m,this.state),this,i,h,o);l+=p.x,c+=p.y,this.setState({snapLines:b})}if(ele(n.originalElements,o,r,this.scene.getElementsMapIncludingDeleted(),this.scene,H1(i),g8(i),r.some(d=>it(d))?!Ng(i):Ng(i),l,c,n.resize.center.x,n.resize.center.y)){const d=w8(r,this.scene.getNonDeletedElementsMap(),this.state.zoom),f=new Set;return s.forEach(h=>{qU(this.scene.getNonDeletedElements(),h,this.state,this.scene.getNonDeletedElementsMap()).forEach(m=>f.add(m))}),this.setState({elementsToHighlight:[...f],suggestedBindings:d}),!0}return!1});F(this,"getContextMenuItems",n=>{const i=[];return i.push(ZM,KM),n==="canvas"?this.state.viewModeEnabled?[...i,QM,r4,pR,s4]:[YM,Vn,ZM,KM,qM,Vn,Xue,X6e,Vn,QM,k6e,r4,pR,s4]:(i.push(qM),this.state.viewModeEnabled?[h2,...i]:[Vn,WM,h2,YM,Vn,Wye,Kye,Zye,Vn,Yye,Vn,...i,Vn,U6e,b6e,Vn,E6e,Jye,L6e,D6e,P6e,v6e,Vn,S6e,Vn,Hue,Vue,$ue,Gue,Vn,A6e,M6e,Vn,jye,Vn,L$,N$,Vn,jue,G6e,Vn,Vz])});F(this,"handleWheel",rn(n=>{if(!(n.target instanceof HTMLCanvasElement||n.target instanceof HTMLTextAreaElement||n.target instanceof HTMLIFrameElement)){n[z.CTRL_OR_CMD]&&n.preventDefault();return}if(n.preventDefault(),Zg)return;const{deltaX:i,deltaY:r}=n;if(n.metaKey||n.ctrlKey){const s=Math.sign(r),o=V6*100,a=Math.abs(r);let l=r;a>o&&(l=o*s);let c=this.state.zoom.value-l/100;c+=Math.log10(Math.max(1,this.state.zoom.value))*-s*Math.min(1,a/20),this.translateCanvas(u=>({...yu({viewportX:this.lastViewportPosition.x,viewportY:this.lastViewportPosition.y,nextZoom:Aa(c)},u),shouldCacheIgnoreZoom:!0})),this.resetShouldCacheIgnoreZoomDebounced();return}if(n.shiftKey){this.translateCanvas(({zoom:s,scrollX:o})=>({scrollX:o-(r||i)/s.value}));return}this.translateCanvas(({zoom:s,scrollX:o,scrollY:a})=>({scrollX:o-i/s.value,scrollY:a-r/s.value}))}));F(this,"savePointer",(n,i,r)=>{var l,c;if(!n||!i)return;const{x:s,y:o}=Pt({clientX:n,clientY:i},this.state),a={x:s,y:o,tool:this.state.activeTool.type==="laser"?"laser":"pointer"};(c=(l=this.props).onPointerUpdate)==null||c.call(l,{pointer:a,button:r,pointersMap:ft.pointers})});F(this,"resetShouldCacheIgnoreZoomDebounced",$a(()=>{this.unmounted||this.setState({shouldCacheIgnoreZoom:!1})},300));F(this,"updateDOMRect",n=>{var i;if((i=this.excalidrawContainerRef)!=null&&i.current){const r=this.excalidrawContainerRef.current,{width:s,height:o,left:a,top:l}=r.getBoundingClientRect(),{width:c,height:u,offsetTop:d,offsetLeft:f}=this.state;if(s===c&&o===u&&a===f&&l===d){n&&n();return}this.setState({width:s,height:o,offsetLeft:a,offsetTop:l},()=>{n&&n()})}});F(this,"refresh",()=>{this.setState({...this.getCanvasOffsets()})});const i=to(),{excalidrawAPI:r,viewModeEnabled:s=!1,zenModeEnabled:o=!1,gridModeEnabled:a=!1,objectsSnapModeEnabled:l=!1,theme:c=i.theme,name:u=`${k("labels.untitled")}-${Mx()}`}=n;if(this.state={...i,theme:c,isLoading:!0,...this.getCanvasOffsets(),viewModeEnabled:s,zenModeEnabled:o,objectsSnapModeEnabled:l,gridModeEnabled:a??i.gridModeEnabled,name:u,width:window.innerWidth,height:window.innerHeight},this.id=XP(),this.library=new x5e(this),this.actionManager=new e8e(this.syncActionResult,()=>this.state,()=>this.scene.getElementsIncludingDeleted(),this),this.scene=new Vo,this.canvas=document.createElement("canvas"),this.rc=Fc.canvas(this.canvas),this.renderer=new AR(this.scene),this.visibleElements=[],this.store=new zle,this.history=new _u,r){const d={updateScene:this.updateScene,updateLibrary:this.library.updateLibrary,addFiles:this.addFiles,resetScene:this.resetScene,getSceneElementsIncludingDeleted:this.getSceneElementsIncludingDeleted,history:{clear:this.resetHistory},scrollToContent:this.scrollToContent,getSceneElements:this.getSceneElements,getAppState:()=>this.state,getFiles:()=>this.files,getName:this.getName,registerAction:f=>{this.actionManager.registerAction(f)},refresh:this.refresh,setToast:this.setToast,id:this.id,setActiveTool:this.setActiveTool,setCursor:this.setCursor,resetCursor:this.resetCursor,updateFrameRendering:this.updateFrameRendering,toggleSidebar:this.toggleSidebar,onChange:f=>this.onChangeEmitter.on(f),onPointerDown:f=>this.onPointerDownEmitter.on(f),onPointerUp:f=>this.onPointerUpEmitter.on(f),onScrollChange:f=>this.onScrollChangeEmitter.on(f),onUserFollow:f=>this.onUserFollowEmitter.on(f)};typeof r=="function"?r(d):console.error("excalidrawAPI should be a function!")}this.excalidrawContainerValue={container:this.excalidrawContainerRef.current,id:this.id},this.fonts=new Pa(this.scene),this.history=new _u,this.actionManager.registerAll(zE),this.actionManager.registerAction(qye(this.history,this.store)),this.actionManager.registerAction(Qye(this.history,this.store))}onWindowMessage(n){if(n.origin!=="https://player.vimeo.com"&&n.origin!=="https://www.youtube.com")return;let i=null;try{i=JSON.parse(n.data)}catch{}if(i)switch(n.origin){case"https://player.vimeo.com":if(i.method==="paused"){let r=null;const s=document.body.querySelectorAll("iframe.excalidraw__embeddable");if(!s)break;for(const o of s)o.contentWindow===n.source&&(r=o.contentWindow);r==null||r.postMessage(JSON.stringify({method:i.value?"play":"pause",value:!0}),"*")}break;case"https://www.youtube.com":if(i.event==="infoDelivery"&&i.info&&i.id&&typeof i.info.playerState=="number"){const r=i.id,s=i.info.playerState;Object.values(Yp).includes(s)&&I7.set(r,s)}break}}cacheEmbeddableRef(n,i){i&&this.iFrameRefs.set(n.id,i)}getHTMLIFrameElement(n){return this.iFrameRefs.get(n.id)}handleEmbeddableCenterClick(n){var r,s,o,a;if(((r=this.state.activeEmbeddable)==null?void 0:r.element)===n&&((s=this.state.activeEmbeddable)==null?void 0:s.state)==="active"||(setTimeout(()=>{this.setState({activeEmbeddable:{element:n,state:"active"},selectedElementIds:{[n.id]:!0},newElement:null,selectionElement:null})},100),Cl(n)))return;const i=this.getHTMLIFrameElement(n);if(i!=null&&i.contentWindow){if(i.src.includes("youtube")){const l=I7.get(n.id);switch(l||(I7.set(n.id,Yp.UNSTARTED),i.contentWindow.postMessage(JSON.stringify({event:"listening",id:n.id}),"*")),l){case Yp.PLAYING:case Yp.BUFFERING:(o=i.contentWindow)==null||o.postMessage(JSON.stringify({event:"command",func:"pauseVideo",args:""}),"*");break;default:(a=i.contentWindow)==null||a.postMessage(JSON.stringify({event:"command",func:"playVideo",args:""}),"*")}}i.src.includes("player.vimeo.com")&&i.contentWindow.postMessage(JSON.stringify({method:"paused"}),"*")}}isIframeLikeElementCenter(n,i,r,s){var o,a;return n&&!i.altKey&&!i.shiftKey&&!i.metaKey&&!i.ctrlKey&&(((o=this.state.activeEmbeddable)==null?void 0:o.element)!==n||((a=this.state.activeEmbeddable)==null?void 0:a.state)==="hover"||!this.state.activeEmbeddable)&&r>=n.x+n.width/3&&r<=n.x+2*n.width/3&&s>=n.y+n.height/3&&s<=n.y+2*n.height/3}renderEmbeddables(){const n=this.state.zoom.value,i=this.state.width,r=this.state.height,s=this.scene.getNonDeletedElements().filter(o=>lr(o)&&this.embedsValidationStatus.get(o.id)===!0||Cl(o));return g(ge,{children:s.map(o=>{var p,b,E,y,v,_,S,M,w;const{x:a,y:l}=Os({sceneX:o.x,sceneY:o.y},this.state),c=_b(o,i,r,this.state,this.scene.getNonDeletedElementsMap()),u=this.initializedEmbeds.has(o.id);if(c&&!u&&this.initializedEmbeds.add(o.id),!(c||u))return null;let f;if(Cl(o)){f=null;const T=(((p=o.customData)==null?void 0:p.generationData)??this.magicGenerations.get(o.id))||{status:"error",message:"No generation data",code:"ERR_NO_GENERATION_DATA"};if(T.status==="done"){const A=T.html;f={intrinsicSize:{w:o.width,h:o.height},type:"document",srcdoc:()=>A}}else if(T.status==="pending")f={intrinsicSize:{w:o.width,h:o.height},type:"document",srcdoc:()=>Y1(`
                    <style>
                      html, body {
                        width: 100%;
                        height: 100%;
                        color: ${this.state.theme===xe.DARK?"white":"black"};
                      }
                      body {
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        flex-direction: column;
                        gap: 1rem;
                      }

                      .Spinner {
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        margin-left: auto;
                        margin-right: auto;
                      }

                      .Spinner svg {
                        animation: rotate 1.6s linear infinite;
                        transform-origin: center center;
                        width: 40px;
                        height: 40px;
                      }

                      .Spinner circle {
                        stroke: currentColor;
                        animation: dash 1.6s linear 0s infinite;
                        stroke-linecap: round;
                      }

                      @keyframes rotate {
                        100% {
                          transform: rotate(360deg);
                        }
                      }

                      @keyframes dash {
                        0% {
                          stroke-dasharray: 1, 300;
                          stroke-dashoffset: 0;
                        }
                        50% {
                          stroke-dasharray: 150, 300;
                          stroke-dashoffset: -200;
                        }
                        100% {
                          stroke-dasharray: 1, 300;
                          stroke-dashoffset: -280;
                        }
                      }
                    </style>
                    <div class="Spinner">
                      <svg
                        viewBox="0 0 100 100"
                      >
                        <circle
                          cx="50"
                          cy="50"
                          r="46"
                          stroke-width="8"
                          fill="none"
                          stroke-miter-limit="10"
                        />
                      </svg>
                    </div>
                    <div>Generating...</div>
                  `)};else{let A;T.code==="ERR_GENERATION_INTERRUPTED"?A="Generation was interrupted...":A=T.message||"Generation failed",f={intrinsicSize:{w:o.width,h:o.height},type:"document",srcdoc:()=>Y1(`
                    <style>
                    html, body {
                      height: 100%;
                    }
                      body {
                        display: flex;
                        flex-direction: column;
                        align-items: center;
                        justify-content: center;
                        color: ${Xe.red[3]};
                      }
                      h1, h3 {
                        margin-top: 0;
                        margin-bottom: 0.5rem;
                      }
                    </style>
                    <h1>Error!</h1>
                    <h3>${A}</h3>
                  `)}}}else f=kf(p9(o.link||""));const h=((b=this.state.activeEmbeddable)==null?void 0:b.element)===o&&((E=this.state.activeEmbeddable)==null?void 0:E.state)==="active",m=((y=this.state.activeEmbeddable)==null?void 0:y.element)===o&&((v=this.state.activeEmbeddable)==null?void 0:v.state)==="hover";return g("div",{className:me("excalidraw__embeddable-container",{"is-hovered":m}),style:{transform:c?`translate(${a-this.state.offsetLeft}px, ${l-this.state.offsetTop}px) scale(${n})`:"none",display:c?"block":"none",opacity:$F(o,Ur(o,this.scene.getNonDeletedElementsMap()),this.elementsPendingErasure,null,((_=this.state.openDialog)==null?void 0:_.name)==="elementLinkSelector"?UP:1),"--embeddable-radius":`${Gs(Math.min(o.width,o.height),o)}px`},children:P("div",{className:"excalidraw__embeddable-container__inner",style:{width:c?`${o.width}px`:0,height:c?`${o.height}px`:0,transform:c?`rotate(${o.angle}rad)`:"none",pointerEvents:h?tu.enabled:tu.disabled},children:[m&&g("div",{className:"excalidraw__embeddable-hint",children:k("buttons.embeddableInteractionButton")}),g("div",{className:"excalidraw__embeddable__outer",style:{padding:`${o.strokeWidth}px`},children:(lr(o)?(M=(S=this.props).renderEmbeddable)==null?void 0:M.call(S,o,this.state):null)??g("iframe",{ref:T=>this.cacheEmbeddableRef(o,T),className:"excalidraw__embeddable",srcDoc:(f==null?void 0:f.type)==="document"?f.srcdoc(this.state.theme):void 0,src:(f==null?void 0:f.type)!=="document"?(f==null?void 0:f.link)??"":void 0,scrolling:"no",referrerPolicy:"no-referrer-when-downgrade",title:"Excalidraw Embedded Content",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,sandbox:`${(w=f==null?void 0:f.sandbox)!=null&&w.allowSameOrigin?"allow-same-origin":""} allow-scripts allow-forms allow-popups allow-popups-to-escape-sandbox allow-presentation allow-downloads`})})]})},o.id)})})}toggleOverscrollBehavior(n){document.documentElement.style.overscrollBehaviorX=n.type==="pointerenter"?"none":"auto"}render(){var d,f,h,m,p,b,E,y;const n=this.scene.getSelectedElements(this.state),{renderTopRightUI:i,renderCustomStats:r}=this.props,s=this.scene.getSceneNonce(),{elementsMap:o,visibleElements:a}=this.renderer.getRenderableElements({sceneNonce:s,zoom:this.state.zoom,offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,height:this.state.height,width:this.state.width,editingTextElement:this.state.editingTextElement,newElementId:(d=this.state.newElement)==null?void 0:d.id,pendingImageElementId:this.state.pendingImageElementId});this.visibleElements=a;const l=this.scene.getNonDeletedElementsMap(),c="setPointerCapture"in HTMLElement.prototype?!1:this.state.selectionElement||this.state.newElement||this.state.selectedElementsAreBeingDragged||this.state.resizingElement||this.state.activeTool.type==="laser"&&this.state.cursorButton==="down",u=n[0];return g("div",{className:me("excalidraw excalidraw-container",{"excalidraw--view-mode":this.state.viewModeEnabled||((f=this.state.openDialog)==null?void 0:f.name)==="elementLinkSelector","excalidraw--mobile":this.device.editor.isMobile}),style:{"--ui-pointerEvents":c?tu.disabled:tu.enabled,"--right-sidebar-width":"302px"},ref:this.excalidrawContainerRef,onDrop:this.handleAppOnDrop,tabIndex:0,onKeyDown:this.props.handleKeyboardGlobally?void 0:this.onKeyDown,onPointerEnter:this.toggleOverscrollBehavior,onPointerLeave:this.toggleOverscrollBehavior,children:g(MX.Provider,{value:this,children:g(RX.Provider,{value:this.props,children:g(lw.Provider,{value:this.excalidrawContainerValue,children:g(aw.Provider,{value:this.device,children:g(dw.Provider,{value:this.setAppState,children:g(uw.Provider,{value:this.state,children:P(cw.Provider,{value:this.scene.getNonDeletedElements(),children:[P(fw.Provider,{value:this.actionManager,children:[g(tEe,{canvas:this.canvas,appState:this.state,files:this.files,setAppState:this.setAppState,actionManager:this.actionManager,elements:this.scene.getNonDeletedElements(),onLockToggle:this.toggleLock,onPenModeToggle:this.togglePenMode,onHandToolToggle:this.onHandToolToggle,langCode:z0().code,renderTopRightUI:i,renderCustomStats:r,showExitZenModeBtn:typeof((h=this.props)==null?void 0:h.zenModeEnabled)>"u"&&this.state.zenModeEnabled,UIOptions:this.props.UIOptions,onExportImage:this.onExportImage,renderWelcomeScreen:!this.state.isLoading&&this.state.showWelcomeScreen&&this.state.activeTool.type==="selection"&&!this.state.zenModeEnabled&&!this.scene.getElementsIncludingDeleted().length,app:this,isCollaborating:this.props.isCollaborating,generateLinkForSelection:this.props.generateLinkForSelection,children:this.props.children}),g("div",{className:"excalidraw-textEditorContainer"}),g("div",{className:"excalidraw-contextMenuContainer"}),g("div",{className:"excalidraw-eye-dropper-container"}),g(iEe,{trails:[this.laserTrails,this.eraserTrail]}),n.length===1&&((m=this.state.openDialog)==null?void 0:m.name)!=="elementLinkSelector"&&this.state.showHyperlinkPopup&&g(z6e,{element:u,elementsMap:l,setAppState:this.setAppState,onLinkOpen:this.props.onLinkOpen,setToast:this.setToast,updateEmbedValidationStatus:this.updateEmbedValidationStatus},u.id),this.props.aiEnabled!==!1&&n.length===1&&WU(u)&&g(MR,{element:u,elementsMap:o,children:g(_7,{title:k("labels.convertToCode"),icon:Lz,checked:!1,onChange:()=>this.onMagicFrameGenerate(u,"button")})}),n.length===1&&Cl(u)&&((b=(p=u.customData)==null?void 0:p.generationData)==null?void 0:b.status)==="done"&&P(MR,{element:u,elementsMap:o,children:[g(_7,{title:k("labels.copySource"),icon:Ym,checked:!1,onChange:()=>this.onIframeSrcCopy(u)}),g(_7,{title:"Enter fullscreen",icon:cue,checked:!1,onChange:()=>{const v=this.getHTMLIFrameElement(u);if(v)try{v.requestFullscreen(),this.setState({activeEmbeddable:{element:u,state:"active"},selectedElementIds:{[u.id]:!0},newElement:null,selectionElement:null})}catch(_){console.warn(_),this.setState({errorMessage:"Couldn't enter fullscreen"})}}})]}),this.state.toast!==null&&g(gEe,{message:this.state.toast.message,onClose:()=>this.setToast(null),duration:this.state.toast.duration,closable:this.state.toast.closable}),this.state.contextMenu&&g(W8e,{items:this.state.contextMenu.items,top:this.state.contextMenu.top,left:this.state.contextMenu.left,actionManager:this.actionManager,onClose:v=>{this.setState({contextMenu:null},()=>{this.focusContainer(),v==null||v()})}}),g(cEe,{canvas:this.canvas,rc:this.rc,elementsMap:o,allElementsMap:l,visibleElements:a,sceneNonce:s,selectionNonce:(E=this.state.selectionElement)==null?void 0:E.versionNonce,scale:window.devicePixelRatio,appState:this.state,renderConfig:{imageCache:this.imageCache,isExporting:!1,renderGrid:rm(this),canvasBackgroundColor:this.state.viewBackgroundColor,embedsValidationStatus:this.embedsValidationStatus,elementsPendingErasure:this.elementsPendingErasure,pendingFlowchartNodes:this.flowChartCreator.pendingNodes}}),this.state.newElement&&g(fEe,{appState:this.state,scale:window.devicePixelRatio,rc:this.rc,elementsMap:o,allElementsMap:l,renderConfig:{imageCache:this.imageCache,isExporting:!1,renderGrid:!1,canvasBackgroundColor:this.state.viewBackgroundColor,embedsValidationStatus:this.embedsValidationStatus,elementsPendingErasure:this.elementsPendingErasure,pendingFlowchartNodes:null}}),g(oEe,{containerRef:this.excalidrawContainerRef,canvas:this.interactiveCanvas,elementsMap:o,visibleElements:a,allElementsMap:l,selectedElements:n,sceneNonce:s,selectionNonce:(y=this.state.selectionElement)==null?void 0:y.versionNonce,scale:window.devicePixelRatio,appState:this.state,device:this.device,renderInteractiveSceneCallback:this.renderInteractiveSceneCallback,handleCanvasRef:this.handleInteractiveCanvasRef,onContextMenu:this.handleCanvasContextMenu,onPointerMove:this.handleCanvasPointerMove,onPointerUp:this.handleCanvasPointerUp,onPointerCancel:this.removePointer,onTouchMove:this.handleTouchMove,onPointerDown:this.handleCanvasPointerDown,onDoubleClick:this.handleCanvasDoubleClick}),this.state.userToFollow&&g(K8e,{width:this.state.width,height:this.state.height,userToFollow:this.state.userToFollow,onDisconnect:this.maybeUnfollowRemoteUser}),this.renderFrameNames()]}),this.renderEmbeddables()]})})})})})})})})}setPlugins(n){Object.assign(this.plugins,n)}async onMagicFrameGenerate(n,i){var a;const r=(a=this.plugins.diagramToCode)==null?void 0:a.generate;if(!r){this.setState({errorMessage:"No diagram to code plugin found"});return}const s=B9(this.scene.getNonDeletedElements(),n).filter(l=>!WU(l));if(!s.length){i==="button"?(this.setState({errorMessage:"Cannot generate from an empty frame"}),ct("ai","generate (no-children)","d2c")):this.setActiveTool({type:"magicframe"});return}const o=this.insertIframeElement({sceneX:n.x+n.width+30,sceneY:n.y,width:n.width,height:n.height});if(o){this.updateMagicGeneration({frameElement:o,data:{status:"pending"}}),this.setState({selectedElementIds:{[o.id]:!0}}),ct("ai","generate (start)","d2c");try{const{html:l}=await r({frame:n,children:s});if(ct("ai","generate (success)","d2c"),!l.trim()){this.updateMagicGeneration({frameElement:o,data:{status:"error",code:"ERR_OAI",message:"Nothing genereated :("}});return}const c=l.includes("<!DOCTYPE html>")&&l.includes("</html>")?l.slice(l.indexOf("<!DOCTYPE html>"),l.indexOf("</html>")+7):l;this.updateMagicGeneration({frameElement:o,data:{status:"done",html:c}})}catch(l){ct("ai","generate (failed)","d2c"),this.updateMagicGeneration({frameElement:o,data:{status:"error",code:"ERR_OAI",message:l.message||"Unknown error during generation"}})}}}onIframeSrcCopy(n){var i,r;((r=(i=n.customData)==null?void 0:i.generationData)==null?void 0:r.status)==="done"&&(Hc(n.customData.generationData.html),this.setToast({message:"copied to clipboard",closable:!1,duration:1500}))}clearImageShapeCache(n){const i=n??this.files;this.scene.getNonDeletedElements().forEach(r=>{In(r)&&i[r.fileId]&&(this.imageCache.delete(r.fileId),Xt.delete(r))})}async componentDidMount(){var i;this.unmounted=!1,this.excalidrawContainerValue.container=this.excalidrawContainerRef.current,this.store.onStoreIncrementEmitter.on(r=>{this.history.record(r.elementsChange,r.appStateChange)}),this.scene.onUpdate(this.triggerRender),this.addEventListeners(),this.props.autoFocus&&this.excalidrawContainerRef.current&&this.focusContainer(),this.refreshViewportBreakpoints(),this.refreshEditorBreakpoints(),K3&&this.excalidrawContainerRef.current&&(this.resizeObserver=new ResizeObserver(()=>{this.refreshEditorBreakpoints(),this.updateDOMRect()}),(i=this.resizeObserver)==null||i.observe(this.excalidrawContainerRef.current)),new URLSearchParams(window.location.search.slice(1)).has("web-share-target")?this.restoreFileFromShare():this.updateDOMRect(this.initializeScene),Cne()&&!tse()&&this.setState({errorMessage:g(j8e,{})})}componentWillUnmount(){var n,i;(n=window.launchQueue)==null||n.setConsumer(()=>{}),this.renderer.destroy(),this.scene.destroy(),this.scene=new Vo,this.fonts=new Pa(this.scene),this.renderer=new AR(this.scene),this.files={},this.imageCache.clear(),(i=this.resizeObserver)==null||i.disconnect(),this.unmounted=!0,this.removeEventListeners(),this.library.destroy(),this.laserTrails.stop(),this.eraserTrail.stop(),this.onChangeEmitter.clear(),this.store.onStoreIncrementEmitter.clear(),Xt.destroy(),Rs.destroy(),clearTimeout(yl),Fn.clearCache(),Wi.clearCache(),yl=0,document.documentElement.style.overscrollBehaviorX=""}removeEventListeners(){this.onRemoveEventListenersEmitter.trigger()}addEventListeners(){this.removeEventListeners(),this.props.handleKeyboardGlobally&&this.onRemoveEventListenersEmitter.once(nn(document,te.KEYDOWN,this.onKeyDown,!1)),this.onRemoveEventListenersEmitter.once(nn(this.excalidrawContainerRef.current,te.WHEEL,this.handleWheel,{passive:!1}),nn(window,te.MESSAGE,this.onWindowMessage,!1),nn(document,te.POINTER_UP,this.removePointer,{passive:!1}),nn(document,te.COPY,this.onCopy,{passive:!1}),nn(document,te.KEYUP,this.onKeyUp,{passive:!0}),nn(document,te.POINTER_MOVE,this.updateCurrentCursorPosition,{passive:!1}),nn(document.fonts,"loadingdone",n=>{const i=n.fontfaces;this.fonts.onLoaded(i)},{passive:!1}),nn(document,te.GESTURE_START,this.onGestureStart,!1),nn(document,te.GESTURE_CHANGE,this.onGestureChange,!1),nn(document,te.GESTURE_END,this.onGestureEnd,!1),nn(window,te.FOCUS,()=>{this.maybeCleanupAfterMissingPointerUp(null),this.triggerRender(!0)},{passive:!1})),!this.state.viewModeEnabled&&(this.onRemoveEventListenersEmitter.once(nn(document,te.FULLSCREENCHANGE,this.onFullscreenChange,{passive:!1}),nn(document,te.PASTE,this.pasteFromClipboard,{passive:!1}),nn(document,te.CUT,this.onCut,{passive:!1}),nn(window,te.RESIZE,this.onResize,!1),nn(window,te.UNLOAD,this.onUnload,!1),nn(window,te.BLUR,this.onBlur,!1),nn(this.excalidrawContainerRef.current,te.WHEEL,this.handleWheel,{passive:!1}),nn(this.excalidrawContainerRef.current,te.DRAG_OVER,this.disableEvent,!1),nn(this.excalidrawContainerRef.current,te.DROP,this.disableEvent,!1)),this.props.detectScroll&&this.onRemoveEventListenersEmitter.once(nn(Iie(this.excalidrawContainerRef.current),te.SCROLL,this.onScroll,{passive:!1})))}componentDidUpdate(n,i){var c,u,d,f,h,m,p,b,E,y;this.updateEmbeddables();const r=this.scene.getElementsIncludingDeleted(),s=this.scene.getElementsMapIncludingDeleted(),o=this.scene.getNonDeletedElementsMap();!this.state.showWelcomeScreen&&!r.length&&this.setState({showWelcomeScreen:!0}),n.UIOptions.dockedSidebarBreakpoint!==this.props.UIOptions.dockedSidebarBreakpoint&&this.refreshEditorBreakpoints(),i.userToFollow&&!this.state.collaborators.has(i.userToFollow.socketId)&&this.maybeUnfollowRemoteUser(),(i.zoom.value!==this.state.zoom.value||i.scrollX!==this.state.scrollX||i.scrollY!==this.state.scrollY)&&((u=(c=this.props)==null?void 0:c.onScrollChange)==null||u.call(c,this.state.scrollX,this.state.scrollY,this.state.zoom),this.onScrollChangeEmitter.trigger(this.state.scrollX,this.state.scrollY,this.state.zoom)),i.userToFollow!==this.state.userToFollow&&(i.userToFollow&&this.onUserFollowEmitter.trigger({userToFollow:i.userToFollow,action:"UNFOLLOW"}),this.state.userToFollow&&this.onUserFollowEmitter.trigger({userToFollow:this.state.userToFollow,action:"FOLLOW"})),Object.keys(this.state.selectedElementIds).length&&Eo(this.state)&&this.setState({activeTool:Tn(this.state,{type:"selection"})}),this.state.activeTool.type==="eraser"&&i.theme!==this.state.theme&&aV(this.interactiveCanvas,this.state.theme),i.activeTool.type==="selection"&&this.state.activeTool.type!=="selection"&&this.state.showHyperlinkPopup&&this.setState({showHyperlinkPopup:!1}),n.langCode!==this.props.langCode&&this.updateLanguage(),Eo(i)&&!Eo(this.state)&&this.eraserTrail.endPath(),n.viewModeEnabled!==this.props.viewModeEnabled&&this.setState({viewModeEnabled:!!this.props.viewModeEnabled}),i.viewModeEnabled!==this.state.viewModeEnabled&&(this.addEventListeners(),this.deselectElements()),(((d=i.openDialog)==null?void 0:d.name)==="elementLinkSelector"||((f=this.state.openDialog)==null?void 0:f.name)==="elementLinkSelector")&&((h=i.openDialog)==null?void 0:h.name)!==((m=this.state.openDialog)==null?void 0:m.name)&&(this.deselectElements(),this.setState({hoveredElementIds:{}})),n.zenModeEnabled!==this.props.zenModeEnabled&&this.setState({zenModeEnabled:!!this.props.zenModeEnabled}),n.theme!==this.props.theme&&this.props.theme&&this.setState({theme:this.props.theme}),(p=this.excalidrawContainerRef.current)==null||p.classList.toggle("theme--dark",this.state.theme===xe.DARK),this.state.editingLinearElement&&!this.state.selectedElementIds[this.state.editingLinearElement.elementId]&&setTimeout(()=>{this.state.editingLinearElement&&this.actionManager.executeAction(Ss)}),(b=this.state.editingTextElement)!=null&&b.isDeleted&&this.setState({editingTextElement:null}),this.state.selectedLinearElement&&!this.state.selectedElementIds[this.state.selectedLinearElement.elementId]&&this.setState({selectedLinearElement:null});const{multiElement:l}=i;i.activeTool!==this.state.activeTool&&l!=null&&pu(this.state)&&Ea(l,!1)&&uE(l,this.state,Ps(ce.getPointAtIndexGlobalCoordinates(l,-1,o)),this.scene.getNonDeletedElementsMap(),this.scene.getNonDeletedElements()),this.store.commit(s,this.state),this.state.isLoading||((y=(E=this.props).onChange)==null||y.call(E,r,this.state,this.files),this.onChangeEmitter.trigger(r,this.state,this.files))}static resetTapTwice(){Kg=!1}async addElementsFromMixedContentPaste(n,{isPlainPaste:i,sceneX:r,sceneY:s}){if(!i&&n.some(o=>o.type==="imageUrl")&&this.isToolSupported("image")){const o=n.filter(f=>f.type==="imageUrl").map(f=>f.value),a=await Promise.all(o.map(async f=>{try{return{file:await Xbe(f)}}catch(h){let m=h.message;return h.cause==="FETCH_ERROR"?m=k("errors.failedToFetchImage"):h.cause==="UNSUPPORTED"&&(m=k("errors.unsupportedFileType")),{errorMessage:m}}}));let l=s,c=!1;const u={};for(const f of a)if(f.file){const h=this.createImageElement({sceneX:r,sceneY:l}),m=await this.insertImageElement(h,f.file);m&&(c||(c=!0,l-=m.height/2),ee(m,{y:l},!1),l=h.y+h.height+25,u[h.id]=!0)}this.setState({selectedElementIds:ht(u,this.state)});const d=a.find(f=>!!f.errorMessage);d&&d.errorMessage&&this.setState({errorMessage:d.errorMessage})}else{const o=n.filter(a=>a.type==="text");o.length&&this.addTextFromPaste(o.map(a=>a.value).join(`

`),i)}}addTextFromPaste(n,i=!1){const{x:r,y:s}=Pt({clientX:this.lastViewportPosition.x,clientY:this.lastViewportPosition.y},this.state),o={x:r,y:s,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roundness:null,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,text:n,fontSize:this.state.currentItemFontSize,fontFamily:this.state.currentItemFontFamily,textAlign:Dm,verticalAlign:eb,locked:!1},a=Ct({fontSize:o.fontSize,fontFamily:o.fontFamily}),l=Ju(o.fontFamily),[c,,u]=qF(this.state),d=Math.max(Math.min((u-c)*.5,800),200),f=10;let h=s;const m=i?[n]:n.split(`
`),p=m.reduce((b,E,y)=>{var _;const v=Eh(E).trim();if(v.length){const S=this.getTopLayerFrameAtSceneCoords({x:r,y:h});let M=Hi(v,a,l);const w=M.width>d,T=w?Id(v,a,d):v;M=w?Hi(T,a,l):M;const A=r-M.width/2,I=h-M.height/2,R=Hr({...o,x:A,y:I,text:T,originalText:v,lineHeight:l,autoResize:!w,frameId:S?S.id:null});b.push(R),h+=R.height+f}else((_=m[y-1])==null?void 0:_.trim())&&(h+=zm(o.fontSize,l)+f);return b},[]);p.length!==0&&(this.scene.insertElements(p),this.setState({selectedElementIds:ht(Object.fromEntries(p.map(b=>[b.id,!0])),this.state)}),!i&&p.length>1&&nk===!1&&!this.device.editor.isMobile&&(this.setToast({message:k("toast.pasteAsSingleElement",{shortcut:Q("CtrlOrCmd+Shift+V")}),duration:5e3}),nk=!0),this.store.shouldCaptureIncrement())}handleTextWysiwyg(n,{isExistingElement:i=!1}){const r=this.scene.getElementsMapIncludingDeleted(),s=(o,a)=>{this.scene.replaceAllElements([...this.scene.getElementsIncludingDeleted().map(l=>l.id===n.id&&ue(l)?Ce(l,{originalText:o,isDeleted:a??l.isDeleted,...iB(l,ui(l,r),r,o)}):l)])};G8e({id:n.id,canvas:this.canvas,getViewportCoords:(o,a)=>{const{x:l,y:c}=Os({sceneX:o,sceneY:a},this.state);return[l-this.state.offsetLeft,c-this.state.offsetTop]},onChange:rn(o=>{s(o,!1),hE(n)&&pr(n,this.scene.getNonDeletedElementsMap())}),onSubmit:rn(({viaKeyboard:o,nextOriginalText:a})=>{const l=!a.trim();if(s(a,l),!l&&o){const c=n.containerId?n.containerId:n.id;ii.flushSync(()=>{this.setState(u=>({selectedElementIds:ht({...u.selectedElementIds,[c]:!0},u)}))})}l&&dF(this.scene.getNonDeletedElements(),[n]),(!l||i)&&this.store.shouldCaptureIncrement(),ii.flushSync(()=>{this.setState({newElement:null,editingTextElement:null})}),this.state.activeTool.locked&&po(this.interactiveCanvas,this.state),this.focusContainer()}),element:n,excalidrawContainer:this.excalidrawContainerRef.current,app:this,autoSelect:!this.device.isTouchScreen}),this.deselectElements(),s(n.originalText,!1)}deselectElements(){this.setState({selectedElementIds:ht({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null})}getTextElementAtPosition(n,i){const r=this.getElementAtPosition(n,i,{includeBoundTextElement:!0});return r&&ue(r)&&!r.isDeleted?r:null}getElementAtPosition(n,i,r){const s=this.getElementsAtPosition(n,i,r==null?void 0:r.includeBoundTextElement,r==null?void 0:r.includeLockedElements);if(s.length>1){if(r!=null&&r.preferSelected){for(let a=s.length-1;a>-1;a--)if(this.state.selectedElementIds[s[a].id])return s[a]}const o=s[s.length-1];return lf({x:n,y:i,element:o,shape:fa(o,this.scene.getNonDeletedElementsMap()),threshold:this.getElementHitThreshold()/2,frameNameBound:Ie(o)?this.frameNameBoundsCache.get(o):null})?o:s[s.length-2]}return s.length===1?s[0]:null}getElementsAtPosition(n,i,r=!1,s=!1){const o=[],a=this.scene.getNonDeletedElementsMap();return(r&&s?this.scene.getNonDeletedElements():this.scene.getNonDeletedElements().filter(c=>(s||!c.locked)&&(r||!(ue(c)&&c.containerId)))).filter(c=>this.hitElement(n,i,c)).filter(c=>{const u=Ur(c,a);return u&&this.state.frameRendering.enabled&&this.state.frameRendering.clip?tC({x:n,y:i},u,a):!0}).filter(c=>Cl(c)?(o.push(c),!1):!0).concat(o)}getElementHitThreshold(){return Dne/this.state.zoom.value}hitElement(n,i,r,s=!0){if(s&&this.state.selectedElementIds[r.id]&&dB([r],this.state)){const a=pae(r,this.scene.getNonDeletedElementsMap(),it(r)?0:this.getElementHitThreshold());if(Sb(C(n,i),a))return!0}return JP(n,i,NF(r,this.scene.getNonDeletedElementsMap()))?!0:lf({x:n,y:i,element:r,shape:fa(r,this.scene.getNonDeletedElementsMap()),threshold:this.getElementHitThreshold(),frameNameBound:Ie(r)?this.frameNameBoundsCache.get(r):null})}getTextBindableContainerAtPosition(n,i){const r=this.scene.getNonDeletedElements(),s=this.scene.getSelectedElements(this.state);if(s.length===1)return Nu(s[0],!1)?s[0]:null;let o=null;for(let a=r.length-1;a>=0;--a){if(r[a].isDeleted)continue;const[l,c,u,d]=Ne(r[a],this.scene.getNonDeletedElementsMap());if(ze(r[a])&&lf({x:n,y:i,element:r[a],shape:fa(r[a],this.scene.getNonDeletedElementsMap()),threshold:this.getElementHitThreshold()})){o=r[a];break}else if(l<n&&n<u&&c<i&&i<d){o=r[a];break}}return Nu(o,!1)?o:null}handleHoverSelectedLinearElement(n,i,r){const s=this.scene.getNonDeletedElementsMap(),o=ce.getElement(n.elementId,s);if(o)if(this.state.selectedLinearElement){let a=-1,l=null;lf({x:i,y:r,element:o,shape:fa(o,this.scene.getNonDeletedElementsMap())})?(a=ce.getPointIndexUnderCursor(o,s,this.state.zoom,i,r),l=ce.getSegmentMidpointHitCoords(n,{x:i,y:r},this.state,this.scene.getNonDeletedElementsMap()),(fe(o)?a===0||a===o.points.length-1:a>=0)||l?xt(this.interactiveCanvas,Tt.POINTER):this.hitElement(i,r,o)&&(!fe(o)||!(o.startBinding||o.endBinding))&&xt(this.interactiveCanvas,Tt.MOVE)):this.hitElement(i,r,o)&&(!fe(o)||!(o.startBinding||o.endBinding))&&xt(this.interactiveCanvas,Tt.MOVE),this.state.selectedLinearElement.hoverPointIndex!==a&&this.setState({selectedLinearElement:{...this.state.selectedLinearElement,hoverPointIndex:a}}),ce.arePointsEqual(this.state.selectedLinearElement.segmentMidPointHoveredCoords,l)||this.setState({selectedLinearElement:{...this.state.selectedLinearElement,segmentMidPointHoveredCoords:l}})}else xt(this.interactiveCanvas,Tt.AUTO)}updateGestureOnPointerDown(n){ft.pointers.set(n.pointerId,{x:n.clientX,y:n.clientY}),ft.pointers.size===2&&(ft.lastCenter=UR(ft.pointers),ft.initialScale=this.state.zoom.value,ft.initialDistance=bR(Array.from(ft.pointers.values())))}initialPointerDownState(n){const i=Pt(n,this.state),r=this.scene.getSelectedElements(this.state),[s,o,a,l]=_t(r),c=r.findIndex(fe)===0;return{origin:i,withCmdOrCtrl:n[z.CTRL_OR_CMD],originInGrid:Ps(Mn(i.x,i.y,n[z.CTRL_OR_CMD]||c?null:this.getEffectiveGridSize())),scrollbars:xR(S7,n.clientX-this.state.offsetLeft,n.clientY-this.state.offsetTop),lastCoords:{...i},originalElements:this.scene.getNonDeletedElements().reduce((u,d)=>(u.set(d.id,xd(d)),u),new Map),resize:{handleType:!1,isResizing:!1,offset:{x:0,y:0},arrowDirection:"origin",center:{x:(a+s)/2,y:(l+o)/2}},hit:{element:null,allHitElements:[],wasAddedToSelection:!1,hasBeenDuplicated:!1,hasHitCommonBoundingBoxOfSelectedElements:this.isHittingCommonBoundingBoxOfSelectedElements(i,r)},drag:{hasOccurred:!1,offset:null},eventListeners:{onMove:null,onUp:null,onKeyUp:null,onKeyDown:null},boxSelection:{hasOccurred:!1}}}handleDraggingScrollBar(n,i){if(!(i.scrollbars.isOverEither&&!this.state.multiElement))return!1;T7=!0,i.lastCoords.x=n.clientX,i.lastCoords.y=n.clientY;const r=p7(o=>{o.target instanceof HTMLElement&&this.handlePointerMoveOverScrollbars(o,i)}),s=rn(()=>{qc=null,T7=!1,po(this.interactiveCanvas,this.state),this.setState({cursorButton:"up"}),this.savePointer(n.clientX,n.clientY,"up"),window.removeEventListener(te.POINTER_MOVE,r),window.removeEventListener(te.POINTER_UP,s),r.flush()});return qc=s,window.addEventListener(te.POINTER_MOVE,r),window.addEventListener(te.POINTER_UP,s),!0}isASelectedElement(n){return n!=null&&this.state.selectedElementIds[n.id]}isHittingCommonBoundingBoxOfSelectedElements(n,i){if(i.length<2)return!1;const r=this.getElementHitThreshold(),[s,o,a,l]=_t(i);return n.x>s-r&&n.x<a+r&&n.y>o-r&&n.y<l+r}getCurrentItemRoundness(n){return this.state.currentItemRoundness==="round"?{type:eg(n)?Nn.ADAPTIVE_RADIUS:Nn.PROPORTIONAL_RADIUS}:null}maybeCacheReferenceSnapPoints(n,i,r=!1){Cc({event:n,app:this,selectedElements:i})&&(r||!Rs.getReferenceSnapPoints())&&Rs.setReferenceSnapPoints(s8e(this.scene.getNonDeletedElements(),i,this.state,this.scene.getNonDeletedElementsMap()))}maybeCacheVisibleGaps(n,i,r=!1){Cc({event:n,app:this,selectedElements:i})&&(r||!Rs.getVisibleGaps())&&Rs.setVisibleGaps(r8e(this.scene.getNonDeletedElements(),i,this.state,this.scene.getNonDeletedElementsMap()))}onKeyDownFromPointerDownHandler(n){return rn(i=>{this.maybeHandleResize(n,i)||this.maybeDragNewGenericElement(n,i)})}onKeyUpFromPointerDownHandler(n){return rn(i=>{i.key===z.ALT&&i.preventDefault(),!this.maybeHandleResize(n,i)&&this.maybeDragNewGenericElement(n,i)})}onPointerMoveFromPointerDownHandler(n){return p7(i=>{var f,h,m,p,b,E;if(((f=this.state.openDialog)==null?void 0:f.name)==="elementLinkSelector")return;const r=Pt(i,this.state);if(this.state.selectedLinearElement&&this.state.selectedLinearElement.elbowed&&this.state.selectedLinearElement.pointerDownState.segmentMidpoint.index){const[y,v]=Mn(r.x,r.y,i[z.CTRL_OR_CMD]?null:this.getEffectiveGridSize());let _=this.state.selectedLinearElement.pointerDownState.segmentMidpoint.index;if(_<0){const M=ce.getSegmentMidpointHitCoords({...this.state.selectedLinearElement,segmentMidPointHoveredCoords:null},{x:y,y:v},this.state,this.scene.getNonDeletedElementsMap());_=M?ce.getSegmentMidPointIndex(this.state.selectedLinearElement,this.state,M,this.scene.getNonDeletedElementsMap()):-1}const S=ce.moveFixedSegment(this.state.selectedLinearElement,_,y,v,this.scene.getNonDeletedElementsMap());ii.flushSync(()=>{this.state.selectedLinearElement&&this.setState({selectedLinearElement:{...this.state.selectedLinearElement,segmentMidPointHoveredCoords:S.segmentMidPointHoveredCoords,pointerDownState:S.pointerDownState}})});return}const s=this.lastPointerMoveCoords??n.origin;if(this.lastPointerMoveCoords=r,n.drag.offset===null&&(n.drag.offset=Ps(gle(this.scene.getSelectedElements(this.state),n.origin.x,n.origin.y))),!(i.target instanceof HTMLElement)||this.handlePointerMoveOverScrollbars(i,n))return;if(Eo(this.state)){this.handleEraser(i,n,r);return}this.state.activeTool.type==="laser"&&this.laserTrails.addPointToPath(r.x,r.y);const[a,l]=Mn(r.x,r.y,i[z.CTRL_OR_CMD]?null:this.getEffectiveGridSize());if(!n.drag.hasOccurred&&(this.state.activeTool.type==="arrow"||this.state.activeTool.type==="line")&&mt(C(r.x,r.y),C(n.origin.x,n.origin.y))<eu)return;if(n.resize.isResizing&&(n.lastCoords.x=r.x,n.lastCoords.y=r.y,this.maybeHandleCrop(n,i)||this.maybeHandleResize(n,i)))return!0;const c=this.scene.getNonDeletedElementsMap();if(this.state.selectedLinearElement){const y=this.state.editingLinearElement||this.state.selectedLinearElement;if(ce.shouldAddMidpoint(this.state.selectedLinearElement,r,this.state,c)){const _=ce.addMidpoint(this.state.selectedLinearElement,r,this,!i[z.CTRL_OR_CMD],c);if(!_)return;ii.flushSync(()=>{this.state.selectedLinearElement&&this.setState({selectedLinearElement:{...this.state.selectedLinearElement,pointerDownState:_.pointerDownState,selectedPointsIndices:_.selectedPointsIndices,segmentMidPointHoveredCoords:null}}),this.state.editingLinearElement&&this.setState({editingLinearElement:{...this.state.editingLinearElement,pointerDownState:_.pointerDownState,selectedPointsIndices:_.selectedPointsIndices,segmentMidPointHoveredCoords:null}})});return}else if(y.pointerDownState.segmentMidpoint.value!==null&&!y.pointerDownState.segmentMidpoint.added)return;const v=ce.handlePointDragging(i,this,r.x,r.y,(_,S)=>{this.maybeSuggestBindingsForLinearElementAtCoords(_,S)},y,this.scene);if(v){n.lastCoords.x=r.x,n.lastCoords.y=r.y,n.drag.hasOccurred=!0,this.setState({editingLinearElement:this.state.editingLinearElement?v:null,selectedLinearElement:v});return}}const u=n.hit.allHitElements.some(y=>this.isASelectedElement(y)),d=this.state.editingLinearElement&&i.shiftKey&&this.state.editingLinearElement.elementId===((h=n.hit.element)==null?void 0:h.id);if((u||n.hit.hasHitCommonBoundingBoxOfSelectedElements)&&!d){const y=this.scene.getSelectedElements(this.state);if(y.every(M=>M.locked))return;const v=y.find(M=>Ie(M)),_=this.getTopLayerFrameAtSceneCoords(r),S=_&&!v?_:null;if(this.state.frameToHighlight!==S&&ii.flushSync(()=>{this.setState({frameToHighlight:S})}),n.drag.hasOccurred=!0,y.length>0&&!n.withCmdOrCtrl&&!this.state.editingTextElement&&((m=this.state.activeEmbeddable)==null?void 0:m.state)!=="active"){const M={x:r.x-n.origin.x,y:r.y-n.origin.y},w=[...n.originalElements.values()],T=i.shiftKey;if(T){const R=Math.abs(M.x),D=Math.abs(M.y),L=T&&R<D,G=T&&R>D;L&&(M.x=0),G&&(M.y=0)}if(this.state.croppingElementId){const R=this.scene.getNonDeletedElementsMap().get(this.state.croppingElementId);if(R&&it(R)&&R.crop!==null&&n.hit.element===R){const D=R.crop,L=In(R)&&((p=this.imageCache.get(R.fileId))==null?void 0:p.image);if(L&&!(L instanceof Promise)){const G=Zt(Ui(r.x-s.x,r.y-s.y),Math.max(this.state.zoom.value,2)),[V,H,$,j,X,K]=Ne(R,c),le=ve(q(C(V,H),C(X,K),R.angle)),we=ve(q(C($,H),C(X,K),R.angle)),he=ve(q(C(V,j),C(X,K),R.angle)),Ve=li(sb(we,le)),Ye=li(sb(he,le)),wt=Ui(Sx(G,Ve),Sx(G,Ye)),st={...D,x:Ge(D.x-wt[0]*Math.sign(R.scale[0]),0,L.naturalWidth-D.width),y:Ge(D.y-wt[1]*Math.sign(R.scale[1]),0,L.naturalHeight-D.height)};ee(R,{crop:st});return}}}this.maybeCacheVisibleGaps(i,y),this.maybeCacheReferenceSnapPoints(i,y);const{snapOffset:A,snapLines:I}=o8e(w,M,this,i,this.scene.getNonDeletedElementsMap());if(this.setState({snapLines:I}),this.state.editingFrame||fle(n,y,M,this.scene,A,i[z.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),this.setState({selectedElementsAreBeingDragged:!0,selectionElement:null}),(y.length!==1||!fe(y[0]))&&this.setState({suggestedBindings:w8(y,this.scene.getNonDeletedElementsMap(),this.state.zoom)}),i.altKey&&!n.hit.hasBeenDuplicated){n.hit.hasBeenDuplicated=!0;const R=this.scene.getElementsIncludingDeleted(),D=n.hit.element,L=this.scene.getSelectedElements({selectedElementIds:this.state.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});D&&!L.find(j=>j.id===D.id)&&L.push(D);const{newElements:G,elementsWithClones:V}=Ib({type:"in-place",elements:R,appState:this.state,randomizeSeed:!0,idsOfElementsToDuplicate:new Map(L.map(j=>[j.id,j])),overrides:j=>{const X=n.originalElements.get(j.id);return X?{x:X.x,y:X.y}:{}},reverseOrder:!0});G.forEach(j=>{n.originalElements.set(j.id,j)});const H=(E=(b=this.props).onDuplicate)==null?void 0:E.call(b,V,R),$=Qs(H||V,Se(G));this.scene.replaceAllElements($),this.maybeCacheVisibleGaps(i,L,!0),this.maybeCacheReferenceSnapPoints(i,L,!0)}return}}if(this.state.selectionElement)n.lastCoords.x=r.x,n.lastCoords.y=r.y,this.maybeDragNewGenericElement(n,i);else{const y=this.state.newElement;if(!y)return;if(y.type==="freedraw"){const v=y.points,_=r.x-y.x,S=r.y-y.y,M=v.length>0&&v[v.length-1];if(!(M&&M[0]===_&&M[1]===S)){const T=y.simulatePressure?y.pressures:[...y.pressures,i.pressure];ee(y,{points:[...v,C(_,S)],pressures:T},!1),this.setState({newElement:y})}}else if(ke(y)){n.drag.hasOccurred=!0;const v=y.points;let _=a-y.x,S=l-y.y;H1(i)&&v.length===2&&({width:_,height:S}=fE(y.x,y.y,r.x,r.y)),v.length===1?ee(y,{points:[...v,C(_,S)]},!1):(v.length===2||v.length>1&&fe(y))&&ee(y,{points:[...v.slice(0,-1),C(_,S)]},!1,{isDragging:!0}),this.setState({newElement:y}),Ea(y,!1)&&this.maybeSuggestBindingsForLinearElementAtCoords(y,[r],this.state.startBoundElement)}else n.lastCoords.x=r.x,n.lastCoords.y=r.y,this.maybeDragNewGenericElement(n,i,!1)}if(this.state.activeTool.type==="selection"){n.boxSelection.hasOccurred=!0;const y=this.scene.getNonDeletedElements();if(this.state.editingLinearElement)ce.handleBoxSelection(i,this.state,this.setState.bind(this),this.scene.getNonDeletedElementsMap());else{let v=!0;!i.shiftKey&&Fn(y,this.state)&&(n.withCmdOrCtrl&&n.hit.element?this.setState(S=>Wi({...S,selectedElementIds:{[n.hit.element.id]:!0}},this.scene.getNonDeletedElements(),S,this)):v=!1);const _=this.state.selectionElement?H9(y,this.state.selectionElement,this.scene.getNonDeletedElementsMap(),!1):[];this.setState(S=>{const M={...v&&S.selectedElementIds,..._.reduce((w,T)=>(w[T.id]=!0,w),{})};return n.hit.element&&(_.length?delete M[n.hit.element.id]:M[n.hit.element.id]=!0),S=v?S:{...S,selectedGroupIds:{},editingGroupId:null},{...Wi({editingGroupId:S.editingGroupId,selectedElementIds:M},this.scene.getNonDeletedElements(),S,this),selectedLinearElement:_.length===1&&ke(_[0])?new ce(_[0]):null,showHyperlinkPopup:_.length===1&&(_[0].link||lr(_[0]))?"info":!1}})}}})}handlePointerMoveOverScrollbars(n,i){if(i.scrollbars.isOverHorizontal){const r=n.clientX,s=r-i.lastCoords.x;return this.translateCanvas({scrollX:this.state.scrollX-s/this.state.zoom.value}),i.lastCoords.x=r,!0}if(i.scrollbars.isOverVertical){const r=n.clientY,s=r-i.lastCoords.y;return this.translateCanvas({scrollY:this.state.scrollY-s/this.state.zoom.value}),i.lastCoords.y=r,!0}return!1}onPointerUpFromPointerDownHandler(n){return rn(i=>{var b,E,y,v,_,S,M,w,T,A,I,R;this.removePointer(i),n.eventListeners.onMove&&n.eventListeners.onMove.flush();const{newElement:r,resizingElement:s,croppingElementId:o,multiElement:a,activeTool:l,isResizing:c,isRotating:u,isCropping:d}=this.state;this.setState(D=>({isResizing:!1,isRotating:!1,isCropping:!1,resizingElement:null,selectionElement:null,frameToHighlight:null,elementsToHighlight:null,cursorButton:"up",snapLines:Og(D.snapLines,[]),originSnapOffset:null})),this.lastPointerMoveCoords=null,Rs.setReferenceSnapPoints(null),Rs.setVisibleGaps(null),this.savePointer(i.clientX,i.clientY,"up"),this.setState({selectedElementsAreBeingDragged:!1});const f=this.scene.getNonDeletedElementsMap();if(n.drag.hasOccurred&&((E=(b=n.hit)==null?void 0:b.element)!=null&&E.id)){const D=f.get(n.hit.element.id);qs(D)&&((y=D.boundElements)==null||y.filter(L=>L.type==="arrow").map(L=>f.get(L.id)).filter(L=>fe(L)).forEach(L=>{L&&ee(L,{},!0)}))}if(this.state.editingLinearElement)if(!n.boxSelection.hasOccurred&&((_=(v=n.hit)==null?void 0:v.element)==null?void 0:_.id)!==this.state.editingLinearElement.elementId)this.actionManager.executeAction(Ss);else{const D=ce.handlePointerUp(i,this.state.editingLinearElement,this.state,this.scene);D!==this.state.editingLinearElement&&this.setState({editingLinearElement:D,suggestedBindings:[]})}else if(this.state.selectedLinearElement){if(this.state.selectedLinearElement.elbowed){const D=ce.getElement(this.state.selectedLinearElement.elementId,this.scene.getNonDeletedElementsMap());D&&ee(D,{},!0)}if(((M=(S=n.hit)==null?void 0:S.element)==null?void 0:M.id)!==this.state.selectedLinearElement.elementId)this.scene.getSelectedElements(this.state).length>1&&this.setState({selectedLinearElement:null});else{const D=ce.handlePointerUp(i,this.state.selectedLinearElement,this.state,this.scene),{startBindingElement:L,endBindingElement:G}=D,V=this.scene.getElement(D.elementId);Ea(V)&&q6(V,L,G,f,this.scene),D!==this.state.selectedLinearElement&&this.setState({selectedLinearElement:{...D,selectedPointsIndices:null},suggestedBindings:[]})}}if(this.missingPointerEventCleanupEmitter.clear(),window.removeEventListener(te.POINTER_MOVE,n.eventListeners.onMove),window.removeEventListener(te.POINTER_UP,n.eventListeners.onUp),window.removeEventListener(te.KEYDOWN,n.eventListeners.onKeyDown),window.removeEventListener(te.KEYUP,n.eventListeners.onKeyUp),this.state.pendingImageElementId&&this.setState({pendingImageElementId:null}),(T=(w=this.props)==null?void 0:w.onPointerUp)==null||T.call(w,l,n),this.onPointerUpEmitter.trigger(this.state.activeTool,n,i),(r==null?void 0:r.type)==="freedraw"){const D=Pt(i,this.state),L=r.points;let G=D.x-r.x,V=D.y-r.y;G===L[0][0]&&V===L[0][1]&&(V+=1e-4,G+=1e-4);const H=r.simulatePressure?[]:[...r.pressures,i.pressure];ee(r,{points:[...L,C(G,V)],pressures:H,lastCommittedPoint:C(G,V)}),this.actionManager.executeAction(Ss);return}if(it(r)){const D=r;try{this.initializeImageDimensions(D),this.setState({selectedElementIds:ht({[D.id]:!0},this.state)},()=>{this.actionManager.executeAction(Ss)})}catch(L){console.error(L),this.scene.replaceAllElements(this.scene.getElementsIncludingDeleted().filter(G=>G.id!==D.id)),this.actionManager.executeAction(Ss)}return}if(ke(r)){r.points.length>1&&this.store.shouldCaptureIncrement();const D=Pt(i,this.state);!n.drag.hasOccurred&&r&&!a?(ee(r,{points:[...r.points,C(D.x-r.x,D.y-r.y)]}),this.setState({multiElement:r,newElement:r})):n.drag.hasOccurred&&!a&&(pu(this.state)&&Ea(r,!1)&&uE(r,this.state,D,this.scene.getNonDeletedElementsMap(),this.scene.getNonDeletedElements()),this.setState({suggestedBindings:[],startBoundElement:null}),l.locked?this.setState(L=>({newElement:null})):(xs(this.interactiveCanvas),this.setState(L=>({newElement:null,activeTool:Tn(this.state,{type:"selection"}),selectedElementIds:ht({...L.selectedElementIds,[r.id]:!0},L),selectedLinearElement:new ce(r)}))),this.scene.triggerUpdate());return}if(ue(r)){const D=w9(Ct({fontSize:r.fontSize,fontFamily:r.fontFamily}),r.lineHeight);r.width<D&&ee(r,{autoResize:!0}),this.resetCursor(),this.handleTextWysiwyg(r,{isExistingElement:!0})}if(l.type!=="selection"&&r&&id(r)){this.updateScene({elements:this.scene.getElementsIncludingDeleted().filter(D=>D.id!==r.id),appState:{newElement:null},captureUpdate:Z.NEVER});return}if(Ie(r)){const D=moe(this.scene.getElementsIncludingDeleted(),r,this.scene.getNonDeletedElementsMap());this.scene.replaceAllElements(j1(this.scene.getElementsMapIncludingDeleted(),D,r,this.state))}if(r&&(ee(r,gF(r)),this.scene.triggerUpdate()),n.drag.hasOccurred){const D=Pt(i,this.state);if(this.state.selectedLinearElement&&this.state.selectedLinearElement.isDragging){const L=this.scene.getElement(this.state.selectedLinearElement.elementId);if(L!=null&&L.frameId){const G=Ur(L,f);G&&L&&(wc(L,G,this.scene.getNonDeletedElementsMap())||(ee(L,{groupIds:[]}),J6([L],this.scene.getNonDeletedElementsMap()),this.scene.triggerUpdate()))}}else{const L=this.getTopLayerFrameAtSceneCoords(D),G=this.scene.getSelectedElements(this.state);let V=this.scene.getElementsMapIncludingDeleted();const H=$=>{if($.length>0){for(const j of $){const X=j.groupIds.indexOf(this.state.editingGroupId);ee(j,{groupIds:j.groupIds.slice(0,X)},!1)}V.forEach(j=>{j.groupIds.length&&Gt(V,j.groupIds[j.groupIds.length-1]).length<2&&ee(j,{groupIds:[]},!1)}),this.setState({editingGroupId:null})}};if(L&&!this.state.selectedElementIds[L.id]){const $=G.filter(j=>j.frameId!==L.id&&wb(j,V,this.state));this.state.editingGroupId&&H($),V=j1(V,$,L,this.state)}else if(!L&&this.state.editingGroupId){const $=G.filter(j=>j.frameId&&!wb(j,V,this.state));H($)}V=vh(V,this.state,this),this.scene.replaceAllElements(V)}}if(s&&this.store.shouldCaptureIncrement(),s&&id(s)&&this.updateScene({elements:this.scene.getElementsIncludingDeleted().filter(D=>D.id!==s.id),captureUpdate:Z.NEVER}),n.resize.isResizing){let D=vh(this.scene.getElementsIncludingDeleted(),this.state,this);const L=this.scene.getSelectedElements(this.state).filter(G=>Ie(G));for(const G of L)D=EF(D,qU(this.scene.getElementsIncludingDeleted(),G,this.state,f),G,this);this.scene.replaceAllElements(D)}const h=n.hit.element;((A=this.state.selectedLinearElement)==null?void 0:A.elementId)!==(h==null?void 0:h.id)&&ke(h)&&this.scene.getSelectedElements(this.state).length===1&&this.setState({selectedLinearElement:new ce(h)}),(!o||o&&(!h&&!d||h&&h.id!==o))&&this.finishImageCropping();const m=this.lastPointerDownEvent,p=this.lastPointerUpEvent||this.lastPointerMoveEvent;if(Eo(this.state)&&m&&p){if(this.eraserTrail.endPath(),mt(C(m.clientX,m.clientY),C(p.clientX,p.clientY))===0){const L=Pt({clientX:p.clientX,clientY:p.clientY},this.state);this.getElementsAtPosition(L.x,L.y).forEach(V=>this.elementsPendingErasure.add(V.id))}this.eraseElements();return}else this.elementsPendingErasure.size&&this.restoreReadyToEraseElements();if(h&&!n.drag.hasOccurred&&!n.hit.wasAddedToSelection&&(!this.state.editingLinearElement||!n.boxSelection.hasOccurred)&&(i.shiftKey&&!this.state.editingLinearElement?this.state.selectedElementIds[h.id]?IF(this.state,h)?this.setState(D=>{const L={...D.selectedElementIds};for(const G of h.groupIds.flatMap(V=>Gt(this.scene.getNonDeletedElements(),V)))delete L[G.id];return{selectedGroupIds:{...D.selectedElementIds,...h.groupIds.map(G=>({[G]:!1})).reduce((G,V)=>({...G,...V}),{})},selectedElementIds:ht(L,D)}}):(I=this.state.selectedLinearElement)!=null&&I.isDragging||this.setState(D=>{const L={...D.selectedElementIds};delete L[h.id];const G=Be(this.scene.getNonDeletedElements(),{selectedElementIds:L});return{...Wi({editingGroupId:D.editingGroupId,selectedElementIds:L},this.scene.getNonDeletedElements(),D,this),selectedLinearElement:G.length===1&&ke(G[0])?new ce(G[0]):D.selectedLinearElement}}):h.frameId&&this.state.selectedElementIds[h.frameId]?this.setState(D=>{var G;const L={...D.selectedElementIds,[h.id]:!0};return delete L[h.frameId],(((G=this.scene.getElement(h.frameId))==null?void 0:G.groupIds)??[]).flatMap(V=>Gt(this.scene.getNonDeletedElements(),V)).forEach(V=>{delete L[V.id]}),{...Wi({editingGroupId:D.editingGroupId,selectedElementIds:L},this.scene.getNonDeletedElements(),D,this),showHyperlinkPopup:h.link||lr(h)?"info":!1}}):this.setState(D=>({selectedElementIds:ht({...D.selectedElementIds,[h.id]:!0},D)})):this.setState(D=>{var L;return{...Wi({editingGroupId:D.editingGroupId,selectedElementIds:{[h.id]:!0}},this.scene.getNonDeletedElements(),D,this),selectedLinearElement:ke(h)&&((L=D.selectedLinearElement)==null?void 0:L.elementId)!==h.id?new ce(h):D.selectedLinearElement}})),!(h&&fe(h))&&!n.drag.hasOccurred&&!this.state.isResizing&&(h&&Yre({x:n.origin.x,y:n.origin.y,element:h,shape:fa(h,this.scene.getNonDeletedElementsMap()),threshold:this.getElementHitThreshold(),frameNameBound:Ie(h)?this.frameNameBoundsCache.get(h):null},f)||!h&&n.hit.hasHitCommonBoundingBoxOfSelectedElements)){this.state.editingLinearElement?this.setState({editingLinearElement:null}):this.setState({selectedElementIds:ht({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null}),xt(this.interactiveCanvas,Tt.AUTO);return}if(!l.locked&&l.type!=="freedraw"&&r&&this.setState(D=>({selectedElementIds:ht({...D.selectedElementIds,[r.id]:!0},D),showHyperlinkPopup:lr(r)&&!r.link?"editor":D.showHyperlinkPopup})),(l.type!=="selection"||Fn(this.scene.getNonDeletedElements(),this.state)||!_i(this.state.previousSelectedElementIds,this.state.selectedElementIds))&&this.store.shouldCaptureIncrement(),n.drag.hasOccurred||c||u||d){const D=this.scene.getSelectedElements(this.state).filter(ke);Ub(D,this.scene.getNonDeletedElementsMap(),this.scene.getNonDeletedElements(),this.scene,pu(this.state),((R=this.state.selectedLinearElement)==null?void 0:R.selectedPointsIndices)??[],this.state.zoom)}if(l.type==="laser"){this.laserTrails.endPath();return}!l.locked&&l.type!=="freedraw"?(xs(this.interactiveCanvas),this.setState({newElement:null,suggestedBindings:[],activeTool:Tn(this.state,{type:"selection"})})):this.setState({newElement:null,suggestedBindings:[]}),h&&this.lastPointerUpEvent&&this.lastPointerDownEvent&&this.lastPointerUpEvent.timeStamp-this.lastPointerDownEvent.timeStamp<300&&ft.pointers.size<=1&&is(h)&&this.isIframeLikeElementCenter(h,this.lastPointerUpEvent,n.origin.x,n.origin.y)&&this.handleEmbeddableCenterClick(h)})}clearSelection(n){this.setState(i=>({selectedElementIds:ht({},i),activeEmbeddable:null,selectedGroupIds:{},editingGroupId:i.editingGroupId&&n!=null&&P0(n,i.editingGroupId)?i.editingGroupId:null})),this.setState({selectedElementIds:ht({},this.state),activeEmbeddable:null,previousSelectedElementIds:this.state.selectedElementIds})}getTextWysiwygSnappedToCenterPosition(n,i,r,s){if(s){let o=s.x+s.width/2,a=s.y+s.height/2;const l=_8(s,r,this.scene.getNonDeletedElementsMap());if(l&&(o=l.x,a=l.y),Math.hypot(n-o,i-a)<Rne){const{x:d,y:f}=Os({sceneX:o,sceneY:a},r);return{viewportX:d,viewportY:f,elementCenterX:o,elementCenterY:a}}}}getCanvasOffsets(){var n;if((n=this.excalidrawContainerRef)!=null&&n.current){const i=this.excalidrawContainerRef.current,{left:r,top:s}=i.getBoundingClientRect();return{offsetLeft:r,offsetTop:s}}return{offsetLeft:0,offsetTop:0}}async updateLanguage(){const n=o5.find(i=>i.code===this.props.langCode)||Cd;await dz(n),this.setAppState({})}}const mEe=e=>{const[t,n]=N.useState(!0);return N.useEffect(()=>{const i=async()=>{await dz(r),n(!1)},r=o5.find(s=>s.code===e.langCode)||Cd;i()},[e.langCode]),t?g(yG,{theme:e.theme}):e.children},LX=({children:e})=>{const{FooterCenterTunnel:t}=rr(),n=fi();return g(t.In,{children:g("div",{className:me("footer-center zen-mode-transition",{"layer-ui__wrapper__footer-left--transition-bottom":n.zenModeEnabled}),children:e})})};LX.displayName="FooterCenter";const DX=({isCollaborating:e,onSelect:t,...n})=>{const i=fi(),r=i.width<830;return P(hd,{...n,className:me("collab-button",{active:e}),type:"button",onSelect:t,style:{position:"relative",width:r?void 0:"auto"},title:k("labels.liveCollaboration"),children:[r?s_:k("labels.share"),i.collaborators.size>0&&g("div",{className:"CollabButton-collaborators",children:i.collaborators.size})]})};DX.displayName="LiveCollaborationTrigger";const pEe=()=>g("svg",{viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"ExcalidrawLogo-icon",children:g("path",{d:"M39.9 32.889a.326.326 0 0 0-.279-.056c-2.094-3.083-4.774-6-7.343-8.833l-.419-.472a.212.212 0 0 0-.056-.139.586.586 0 0 0-.167-.111l-.084-.083-.056-.056c-.084-.167-.28-.278-.475-.167-.782.39-1.507.973-2.206 1.528-.92.722-1.842 1.445-2.708 2.25a8.405 8.405 0 0 0-.977 1.028c-.14.194-.028.361.14.444-.615.611-1.23 1.223-1.843 1.861a.315.315 0 0 0-.084.223c0 .083.056.166.111.194l1.09.833v.028c1.535 1.528 4.244 3.611 7.12 5.861.418.334.865.667 1.284 1 .195.223.39.473.558.695.084.11.28.139.391.055.056.056.14.111.196.167a.398.398 0 0 0 .167.056.255.255 0 0 0 .224-.111.394.394 0 0 0 .055-.167c.029 0 .028.028.056.028a.318.318 0 0 0 .224-.084l5.082-5.528a.309.309 0 0 0 0-.444Zm-14.63-1.917a.485.485 0 0 0 .111.14c.586.5 1.2 1 1.843 1.555l-2.569-1.945-.251-.166c-.056-.028-.112-.084-.168-.111l-.195-.167.056-.056.055-.055.112-.111c.866-.861 2.346-2.306 3.1-3.028-.81.805-2.43 3.167-2.095 3.944Zm8.767 6.89-2.122-1.612a44.713 44.713 0 0 0-2.625-2.5c1.145.861 2.122 1.611 2.262 1.75 1.117.972 1.06.806 1.815 1.445l.921.666a1.06 1.06 0 0 1-.251.25Zm.558.416-.056-.028c.084-.055.168-.111.252-.194l-.196.222ZM1.089 5.75c.055.361.14.722.195 1.056.335 1.833.67 3.5 1.284 4.75l.252.944c.084.361.223.806.363.917 1.424 1.25 3.602 3.11 5.947 4.889a.295.295 0 0 0 .363 0s0 .027.028.027a.254.254 0 0 0 .196.084.318.318 0 0 0 .223-.084c2.988-3.305 5.221-6.027 6.813-8.305.112-.111.14-.278.14-.417.111-.111.195-.25.307-.333.111-.111.111-.306 0-.39l-.028-.027c0-.055-.028-.139-.084-.167-.698-.666-1.2-1.138-1.731-1.638-.922-.862-1.871-1.75-3.881-3.75l-.028-.028c-.028-.028-.056-.056-.112-.056-.558-.194-1.703-.389-3.127-.639C6.087 2.223 3.21 1.723.614.944c0 0-.168 0-.196.028l-.083.084c-.028.027-.056.055-.224.11h.056-.056c.028.167.028.278.084.473 0 .055.112.5.112.555l.782 3.556Zm15.496 3.278-.335-.334c.084.112.196.195.335.334Zm-3.546 4.666-.056.056c0-.028.028-.056.056-.056Zm-2.038-10c.168.167.866.834 1.033.973-.726-.334-2.54-1.167-3.379-1.445.838.167 1.983.334 2.346.472ZM1.424 2.306c.419.722.754 3.222 1.089 5.666-.196-.778-.335-1.555-.503-2.278-.251-1.277-.503-2.416-.838-3.416.056 0 .14 0 .252.028Zm-.168-.584c-.112 0-.223-.028-.307-.028 0-.027 0-.055-.028-.055.14 0 .223.028.335.083Zm-1.089.222c0-.027 0-.027 0 0ZM39.453 1.333c.028-.11-.558-.61-.363-.639.42-.027.42-.666 0-.666-.558.028-1.144.166-1.675.25-.977.194-1.982.389-2.96.61-2.205.473-4.383.973-6.561 1.557-.67.194-1.424.333-2.066.666-.224.111-.196.333-.084.472-.056.028-.084.028-.14.056-.195.028-.363.056-.558.083-.168.028-.252.167-.224.334 0 .027.028.083.028.11-1.173 1.556-2.485 3.195-3.909 4.945-1.396 1.611-2.876 3.306-4.356 5.056-4.719 5.5-10.052 11.75-15.943 17.25a.268.268 0 0 0 0 .389c.028.027.056.055.084.055-.084.084-.168.14-.252.222-.056.056-.084.111-.084.167a.605.605 0 0 0-.111.139c-.112.111-.112.305.028.389.111.11.307.11.39-.028.029-.028.029-.056.056-.056a.44.44 0 0 1 .615 0c.335.362.67.723.977 1.028l-.698-.583c-.112-.111-.307-.083-.39.028-.113.11-.085.305.027.389l7.427 6.194c.056.056.112.056.196.056s.14-.028.195-.084l.168-.166c.028.027.083.027.111.027.084 0 .14-.027.196-.083 10.052-10.055 18.15-17.639 27.42-24.417.083-.055.111-.166.111-.25.112 0 .196-.083.251-.194 1.704-5.194 2.039-9.806 2.15-12.083v-.028c0-.028.028-.056.028-.083.028-.056.028-.084.028-.084a1.626 1.626 0 0 0-.111-1.028ZM21.472 9.5c.446-.5.893-1.028 1.34-1.5-2.876 3.778-7.65 9.583-14.408 16.5 4.607-5.083 9.242-10.333 13.068-15ZM5.193 35.778h.084-.084Zm3.462 3.194c-.027-.028-.027-.028 0-.028v.028Zm4.16-3.583c.224-.25.448-.472.699-.722 0 0 0 .027.028.027-.252.223-.475.445-.726.695Zm1.146-1.111c.14-.14.279-.334.446-.5l.028-.028c1.648-1.694 3.351-3.389 5.082-5.111l.028-.028c.419-.333.921-.694 1.368-1.028a379.003 379.003 0 0 0-6.952 6.695ZM24.794 6.472c-.921 1.195-1.954 2.778-2.82 4.028-2.736 3.944-11.532 13.583-11.727 13.75a1976.983 1976.983 0 0 1-8.042 7.639l-.167.167c-.14-.167-.14-.417.028-.556C14.49 19.861 22.03 10.167 25.074 5.917c-.084.194-.14.36-.28.555Zm4.83 5.695c-1.116-.64-1.646-1.64-1.34-2.611l.084-.334c.028-.083.084-.194.14-.277.307-.5.754-.917 1.257-1.167.027 0 .055 0 .083-.028-.028-.056-.028-.139-.028-.222.028-.167.14-.278.335-.278.335 0 1.369.306 1.76.639.111.083.223.194.335.305.14.167.363.445.474.667.056.028.112.306.196.445.056.222.111.472.084.694-.028.028 0 .194-.028.194a2.668 2.668 0 0 1-.363 1.028c-.028.028-.028.056-.056.084l-.028.027c-.14.223-.335.417-.53.556-.643.444-1.369.583-2.095.389 0 0-.195-.084-.28-.111Zm8.154-.834a39.098 39.098 0 0 1-.893 3.167c0 .028-.028.083 0 .111-.056 0-.084.028-.14.056-2.206 1.61-4.356 3.305-6.506 5.028 1.843-1.64 3.686-3.306 5.613-4.945.558-.5.949-1.139 1.06-1.861l.28-1.667v-.055c.14-.334.67-.195.586.166Z",fill:"currentColor"})}),UEe=()=>P("svg",{viewBox:"0 0 450 55",xmlns:"http://www.w3.org/2000/svg",fill:"none",className:"ExcalidrawLogo-text",children:[g("path",{d:"M429.27 96.74c2.47-1.39 4.78-3.02 6.83-4.95 1.43-1.35 2.73-2.86 3.81-4.51-.66.9-1.4 1.77-2.23 2.59-2.91 2.84-5.72 5.09-8.42 6.87h.01ZM343.6 69.36c.33 3.13.58 6.27.79 9.4.09 1.37.18 2.75.25 4.12-.12-4.46-.27-8.93-.5-13.39-.11-2.08-.24-4.16-.4-6.24-.06 1.79-.11 3.85-.13 6.11h-.01ZM378.47 98.34c.01-.37.07-1.13.01-6.51-.11 1.9-.22 3.81-.31 5.71-.07 1.42-.22 2.91-.16 4.35.39.03.78.07 1.17.1-.92-.85-.76-2.01-.72-3.66l.01.01ZM344.09 86.12c-.09-2.41-.22-4.83-.39-7.24v12.21c.15-.05.32-.09.47-.14.05-1.61-.03-3.23-.09-4.83h.01ZM440.69 66.79c-.22-.34-.45-.67-.69-.99-3.71-4.87-9.91-7.14-15.65-8.55-1.05-.26-2.12-.49-3.18-.71 2.29.59 4.48 1.26 6.64 2.02 7.19 2.54 10.57 5.41 12.88 8.23ZM305.09 72.46l1.2 3.6c.84 2.53 1.67 5.06 2.46 7.61.24.78.5 1.57.73 2.36.22-.04.44-.08.67-.12a776.9 776.9 0 0 1-5.01-13.57c-.02.04-.03.09-.05.13v-.01ZM345.49 90.25v.31c1.48-.42 3.05-.83 4.66-1.2-1.56.25-3.12.52-4.66.89ZM371.02 90.22c0-.57-.04-1.14-.11-1.71-.06-.02-.12-.04-.19-.05-.21-.05-.43-.08-.65-.11.42.16.74.88.95 1.87ZM398.93 54.23c-.13 0-.27-.01-.4-.02l.03.4c.11-.15.23-.27.37-.38ZM401.57 62.28v-.15c-1.22-.24-2.86-.61-3.23-1.25-.09-.15-.18-.51-.27-.98-.09.37-.2.73-.33 1.09 1.24.56 2.52.98 3.83 1.29ZM421.73 88.68c-2.97 1.65-6.28 3.12-9.69 3.68v.18c4.72-.14 11.63-3.85 16.33-8.38-2.04 1.75-4.33 3.24-6.63 4.53l-.01-.01ZM411.28 80.92c-.05-1.2-.09-2.4-.15-3.6-.21 5.66-.46 11.38-.47 14.51.24-.02.48-.04.71-.07.15-3.61.05-7.23-.09-10.83v-.01Z",transform:"translate(-144.023 -51.76)"}),g("path",{d:"M425.38 67.41c-3.5-1.45-7.19-2.57-14.06-3.62.09 1.97.06 4.88-.03 8.12.03.04.06.09.06.15.19 1.36.28 2.73.37 4.1.25 3.77.39 7.55.41 11.33 0 1.38-.01 2.76-.07 4.13 1.4-.25 2.78-.65 4.12-1.15 4.07-1.5 7.94-3.78 11.28-6.54 2.33-1.92 5.13-4.49 5.88-7.58.63-3.53-2.45-6.68-7.97-8.96l.01.02ZM411.35 92.53v-.06l-.34.03c.11.01.22.03.34.03ZM314.26 64.06c-.23-.59-.47-1.17-.7-1.75.57 1.62 1.11 3.25 1.6 4.9l.15.54 2.35 6.05c.32.82.66 1.64.98 2.46-1.38-4.1-2.83-8.17-4.39-12.2h.01ZM156.82 103.07c-.18.13-.38.23-.58.33 1.32-.03 2.66-.2 3.93-.34.86-.09 1.72-.22 2.58-.33-2.12.1-4.12.17-5.94.34h.01ZM210.14 68.88s.03.04.05.07c.18-.31.39-.64.58-.96-.21.3-.42.6-.64.89h.01ZM201.65 82.8c-.5.77-1.02 1.56-1.49 2.37 1.11-1.55 2.21-3.1 3.2-4.59-.23.23-.49.51-.75.79-.32.47-.65.95-.96 1.43ZM194.03 98.66c-.33-.4-.65-.84-1.05-1.17-.24-.2-.07-.49.17-.56-.23-.26-.42-.5-.63-.75 1.51-2.55 3.93-5.87 6.4-9.28-.17-.08-.29-.28-.2-.49.04-.09.09-.17.13-.26-1.21 1.78-2.42 3.55-3.61 5.33-.87 1.31-1.74 2.64-2.54 4-.29.5-.63 1.04-.87 1.61.81.65 1.63 1.27 2.47 1.88-.09-.11-.18-.21-.27-.32v.01ZM307.79 82.93c-1-3.17-2.05-6.32-3.1-9.48-1.62 4.08-3.69 9.17-6.16 15.19 3.32-1.04 6.77-1.87 10.27-2.5-.32-1.08-.67-2.15-1.01-3.21ZM149.5 80.7c.05-1.71.04-3.43 0-5.14-.1 2.26-.16 4.51-.22 6.77-.02.73-.03 1.46-.04 2.19.14-1.27.2-2.55.24-3.82h.02ZM228.98 98.3c.39 1.25.91 3.03.94 3.91.06-.03.12-.07.17-.1.08-1.29-.55-2.65-1.11-3.81ZM307.72 53.36c.81.5 1.53 1.04 2.07 1.49-.38-.8-.78-1.58-1.21-2.35-.17.03-.34.06-.51.11-.43.12-.86.26-1.29.41.35-.01.53.1.94.34ZM283.69 96.14c3.91-7.25 6.89-13.35 8.88-18.15l1.1-2.66c-1.27 2.64-2.56 5.27-3.83 7.9-1.53 3.15-3.06 6.31-4.58 9.47-.87 1.81-1.76 3.62-2.54 5.47.04.02.07.04.11.07.05.05.1.09.15.14.05-.73.27-1.48.71-2.24ZM289.92 103.23s-.04.01-.05.03c0-.02.04-.03.05-.04.05-.05.11-.1.16-.15l.21-.21c-.55 0-1.5-.27-2.55-.72.4.26.8.51 1.22.74.24.13.48.26.73.37.05.02.1.03.14.05a.27.27 0 0 1 .08-.07h.01ZM269.23 68.49c-.39-.19-.82-.48-1.33-.87-3.06-1.56-6.31-2.78-9.36-2.35-3.5.49-5.7 1.11-7.74 2.44 5.71-2.6 12.82-2.07 18.44.79l-.01-.01ZM177.87 53.69l1.06.03c-.96-.22-2-.25-2.89-.3-4.95-.26-9.99.33-14.86 1.19-2.44.43-4.88.95-7.28 1.59 9.09-1.76 15.69-2.77 23.97-2.51ZM219.85 55.51c-.18.12-.36.27-.56.45-.45.53-.86 1.11-1.26 1.66-1.91 2.61-3.71 5.31-5.57 7.95l-.12.18 8.05-10.11c-.18-.05-.36-.1-.55-.13h.01ZM510.71 54.1c.12-.15.29-.3.53-.45.69-.4 3.72-.63 5.87-.74-.36-.02-.73-.04-1.09-.05-1.84-.03-3.67.09-5.49.35.05.3.12.59.18.88v.01ZM510.76 86.02c1.37-3.07 2.49-6.27 3.57-9.46.55-1.64 1.12-3.3 1.6-4.97-1.59 4.01-3.67 9.14-6.2 15.3.24-.08.5-.14.74-.22.1-.22.19-.44.29-.65ZM566.95 75.76c.11-.02.23.03.31.11-.05-.13-.09-.26-.14-.39-.05.09-.11.18-.17.28ZM511.33 86.41c3.08-.89 6.24-1.62 9.46-2.14-1.51-3.98-2.98-7.96-4.39-11.87-.05.15-.09.31-.14.46-1.02 3.32-2.15 6.61-3.39 9.85-.48 1.25-.98 2.49-1.53 3.7h-.01ZM578.24 74.45c.11-.44.23-.87.35-1.31-.31.7-.64 1.39-.97 2.08.09.21.19.4.28.61.12-.46.23-.92.35-1.38h-.01ZM520.62 53.11c-.09 0-.18-.01-.28-.02.38.34.29 1.08.93 2.53l6.65 17.15c2.2 5.68 4.69 11.36 7.41 16.87l1.06 2.17c-2.95-7.05-5.92-14.08-8.87-21.13-1.58-3.79-3.16-7.59-4.7-11.4-.78-1.92-1.73-3.89-2.25-5.91-.03-.1 0-.19.04-.26h.01ZM578.78 77.87c1.45-5.77 3.07-10.43 3.58-13.36.05-.34.16-.88.31-1.55-.67 1.79-1.37 3.56-2.08 5.33-.12.43-.23.86-.35 1.29-.65 2.43-1.29 4.86-1.9 7.3.14.33.29.65.43 1l.01-.01ZM545.3 94.66c.02-.44.03-.83.05-1.12.02-1.01.05-2.02.11-3.02.03-6.66-.46-14.33-1.46-22.8-.13-.42-.27-1.24-.56-2.89 0-.02 0-.04-.01-.06.62 6.61.95 13.25 1.32 19.87.17 3.08.33 6.16.52 9.23.02.25.03.52.04.78l-.01.01ZM580.77 102.81c.13.2.27.38.37.49.27-.11.53-.22.8-.32-.43.09-.82.05-1.17-.16v-.01ZM530.48 104.07h.33c-.36-.13-.71-.32-1.04-.56.14.24.3.47.45.7.06-.08.14-.13.26-.13v-.01ZM542.63 58.82c.06.23.11.47.15.71.14-.33.36-.62.7-.86-.28.05-.57.11-.85.15ZM583.81 57.87c.15-.7.29-1.41.42-2.11-.14.45-.28.9-.42 1.34-.46 1.44-.89 2.89-1.31 4.34.44-1.19.88-2.37 1.31-3.57ZM523.62 91.48c-4.66 1.17-9.05 2.89-14.02 5.27 4.65-1.84 9.48-3.29 14.28-4.63-.09-.22-.17-.41-.26-.64ZM460.64 78.3c-.04-2.9-.11-5.81-.28-8.71-.1-1.68-.17-3.43-.5-5.09-.07.02-.14.03-.2.05.3 6.54.45 12.17.51 17.12.17-.07.34-.14.51-.2 0-1.06-.01-2.11-.03-3.17h-.01ZM470.63 63.24c-3.38-.26-6.81.32-10.1 1.1.41 2.01.47 4.14.57 6.18.18 3.55.25 7.11.27 10.67 3.31-1.38 6.5-3.12 9.3-5.35 1.96-1.56 3.86-3.41 5.02-5.66.73-1.41 1.19-3.22.26-4.65-1.09-1.7-3.46-2.14-5.32-2.29ZM460.29 63.68c1-.24 2.01-.46 3.04-.65-1.15.16-2.37.38-3.71.69v.13c.07-.02.15-.04.22-.05.11-.13.3-.18.45-.11v-.01ZM457.24 100.96c.43-.03.86-.07 1.29-.11.14-.49.27-.99.38-1.49-.44.7-1 1.23-1.67 1.6ZM482.88 104.98c-.18.23-.36.38-.55.47.14.09.27.19.4.28a70.76 70.76 0 0 0 4.37-4.63c.76-.89 1.52-1.81 2.19-2.77-.3-.27-.61-.53-.92-.79-.07 1.94-4.62 6.32-5.49 7.45v-.01Z",transform:"translate(-144.023 -51.76)"}),g("path",{d:"M474.36 63.31c-.4-.16-.84-.27-1.29-.37 1.56.42 3.08 1.22 3.76 2.74.62 1.4.32 2.95-.28 4.32.7-1.22.94-2.34.74-3.47-.24-1.33-1.19-2.54-2.93-3.21v-.01ZM477.34 89.18c-1.2-.81-2.4-1.62-3.6-2.42-.14.1-.26.19-.4.29 1.4.67 2.73 1.39 4 2.13ZM465.88 93.85c.37.25.74.5 1.1.75.46.32.92.65 1.38.97-1.57-1.2-2.01-1.61-2.49-1.72h.01ZM574.92 90.06c-2.28-5.21-4.93-11.13-5.67-12.26-.1-.15-1.57-3.01-1.63-3.08 0 0-.01.02-.02.02.4 1.37 1.09 2.69 1.65 3.99 2.14 4.95 4.36 9.86 6.67 14.73.6 1.26 1.21 2.52 1.83 3.78-.75-2.01-1.64-4.45-2.83-7.18ZM448.73 65.29c.1.2.22.38.34.57.22-.02.43-.06.65-.08v-.08c-.14-.05-.25 0-.99-.41ZM460.16 94.81c-.02.31-.06.59-.1.89-.03 1.71-.33 3.43-.79 5.07.15-.02.3-.03.45-.05.01-.04.02-.08.03-.11.09-.34.15-.69.2-1.03.17-1.07.25-2.16.33-3.24.05-.69.08-1.39.12-2.08-.27.1-.27.26-.24.57v-.02Z",transform:"translate(-144.023 -51.76)"}),g("path",{d:"m328.67 98.12-3.22-6.58c-1.29-2.63-2.53-5.29-3.72-7.97-.25-.85-.52-1.69-.79-2.53-.81-2.57-1.67-5.12-2.55-7.67-1.92-5.53-3.9-11.08-6.32-16.41-.72-1.58-1.46-3.44-2.63-4.79-.03-.17-.16-.29-.34-.36a.282.282 0 0 0-.23-.04c-.06-.01-.12 0-.18.01-.74.06-1.5.38-2.19.61-2.22.77-4.4 1.64-6.63 2.38-.03-.08-.06-.16-.09-.25-.15-.42-.82-.24-.67.19.03.09.07.19.1.28l-.18.06c-.36.11-.28.6 0 .68.18 1.18.63 2.36.98 3.49.03.09.06.17.08.26-.08.23-.17.46-.24.64-.37.98-.79 1.94-1.21 2.9-1.27 2.89-2.62 5.75-3.98 8.6-3.18 6.67-6.44 13.31-9.64 19.97-1.08 2.25-2.2 4.5-3.15 6.81-.13.32.24.5.5.37 1.34 1.33 2.84 2.5 4.4 3.57.65.44 1.31.87 2.01 1.24.4.22.86.48 1.33.5.24.01.35-.19.33-.37.11-.1.21-.21.28-.28.41-.41.81-.84 1.2-1.26.85-.92 1.69-1.87 2.5-2.84 6.31-2.34 12.6-4.31 18.71-5.84 2.14 5.3 3.43 8.43 3.97 9.58.55 1.05 1.15 1.88 1.82 2.52 1.32.56 6.96-.03 9.23-1.96.87-1.28 1.19-2.67.93-4.15-.09-.5-.22-.95-.4-1.33l-.01-.03Zm-20.09-45.61c.43.77.83 1.56 1.21 2.35-.54-.45-1.27-.99-2.07-1.49-.42-.24-.6-.35-.94-.34.43-.15.85-.29 1.29-.41.17-.05.34-.08.51-.11Zm-25.86 45.66c.78-1.85 1.67-3.66 2.54-5.47 1.51-3.16 3.05-6.31 4.58-9.47 1.28-2.63 2.56-5.26 3.83-7.9l-1.1 2.66c-1.99 4.79-4.97 10.9-8.88 18.15-.43.76-.66 1.51-.71 2.24-.05-.05-.1-.09-.15-.14a.259.259 0 0 0-.11-.07Zm6.24 4.71c-.42-.23-.82-.48-1.22-.74 1.05.45 2 .72 2.55.72l-.21.21c-.05.05-.11.1-.16.15-.01.01-.04.03-.05.04 0-.02.03-.02.05-.03a.27.27 0 0 0-.08.07c-.05-.02-.1-.03-.14-.05-.25-.1-.49-.24-.73-.37h-.01Zm15.73-29.43c1.05 3.15 2.1 6.31 3.1 9.48.34 1.06.69 2.13 1.01 3.21-3.5.63-6.95 1.46-10.27 2.5 2.48-6.03 4.54-11.11 6.16-15.19Zm4.79 12.57c-.23-.79-.49-1.58-.73-2.36-.79-2.54-1.63-5.08-2.46-7.61l-1.2-3.6c.02-.04.04-.09.05-.13 1.6 4.45 3.28 9 5.01 13.57l-.67.12v.01Zm5.83-18.27-.15-.54c-.49-1.64-1.03-3.28-1.6-4.9.23.58.47 1.17.7 1.75 1.56 4.03 3.01 8.1 4.39 12.2-.33-.82-.67-1.64-.98-2.46l-2.35-6.05h-.01ZM390.43 79.37c-.13-10.43-.22-17.5-.24-19.97-.24-1.6.21-2.88-.65-3.65-.14-.13-.32-.23-.52-.32h.03c.45 0 .45-.69 0-.7-1.75-.03-3.5-.04-5.25-.14-1.38-.08-2.76-.21-4.15-.31-.07 0-.12.01-.17.04-.21-.07-.47.03-.45.31l.03.45c-.11.14-.19.3-.22.5-.21 1.26-.32 13.67-.36 23.59-.32 5.79-.67 11.57-.97 17.36-.09 1.73-.29 3.54-.21 5.3-.39.02-.38.64.04.69v.12c.05.44.74.45.7 0v-.06c1.1.09 2.2.21 3.3.3 1.14.19 2.44.2 3.29.17 1.73-.05 2.92-.05 3.8-.37.45-.05.9-.11 1.35-.17.44-.06.25-.73-.19-.67h-.01c.24-.32.45-.72.62-1.25.66-1.84.41-6.36.34-11.33l-.13-9.9.02.01Zm-12.26 18.17c.09-1.91.2-3.81.31-5.71.06 5.38 0 6.14-.01 6.51-.05 1.65-.21 2.81.72 3.66-.39-.04-.78-.07-1.17-.1-.06-1.44.09-2.93.16-4.35l-.01-.01ZM588.97 53.85c-2.06-.25-3.17-.51-3.76-.6a.3.3 0 0 1 .04-.08c.22-.39-.39-.75-.6-.35-.56 1.02-.9 2.19-1.26 3.29-.61 1.88-1.17 3.78-1.72 5.68-.63 2.19-1.24 4.39-1.83 6.59-.81 2.03-1.67 4.05-2.61 6.03-1.7-3.64-3.11-6.04-4.03-7.57-2.26-3.74-2.85-5.48-3.57-6.08l.31-.09c.43-.12.25-.8-.19-.67-1.06.3-2.12.6-3.17.95-.93.32-1.85.69-2.76 1.07-.13.05-.19.16-.22.27-.04.02-.08.05-.11.07-.04-.06-.07-.12-.11-.18a.354.354 0 0 0-.48-.12c-.16.09-.22.32-.13.48l.33.54c0 .09.02.18.06.28.51 1.16.78 1.38.72 1.47-2.42 3.44-5.41 7.86-6.2 9.1-1.27 1.97-2.01 3.14-2.45 3.84l-.91-6.56-.43-4.1c-.19-1.85-.37-3.23-.53-4.13-.19-1.1-.3-2.15-.45-3.16-.2-1.36-.29-2.06-.47-2.42h.04c.45.02.45-.68 0-.7-3.43-.16-6.81.94-10.17 1.48-.24-.22-.73-.04-.58.32.24.59.33 1.25.43 1.87.17 1.06.29 2.13.4 3.2.32 3.09.53 6.2.74 9.3.44 6.75.77 13.51 1.17 20.26.11 1.95.13 3.96.46 5.89.05.3.37.31.55.14.74 1.71 2.87 1.27 6.13 1.27 1.34 0 2.39.04 2.99-.11.02.32.48.53.63.18 3.61-8.26 7.41-16.46 12.05-24.2.03-.05.04-.1.05-.15.3.73.64 1.45.94 2.16.97 2.26 1.97 4.52 2.98 6.76 2.26 5.03 4.54 10.07 7.09 14.96.47.9.94 1.79 1.47 2.65.2.32.4.67.66.96-.18.25 0 .68.34.54.91-.38 1.82-.75 2.76-1.07 1.04-.35 2.11-.65 3.17-.95.39-.11.28-.66-.07-.68.62-.4.95-.96.87-1.91-.3-3.34.72-7.47.86-8.52l2.14-11.43c1.75-10.74 3.13-17.51 3.23-20.86.02-.49.08-2.84.13-3.24.17-1.25.48-1-4.96-1.65l.03-.02Zm-46.19 5.67c-.04-.24-.09-.48-.15-.71l.85-.15c-.34.24-.56.53-.7.86Zm1.95 25.12c-.36-6.63-.7-13.26-1.32-19.87 0 .02 0 .04.01.06.29 1.65.44 2.47.56 2.89 1 8.46 1.5 16.14 1.46 22.8-.06.99-.1 2-.11 3.02-.01.29-.03.68-.05 1.12-.01-.26-.03-.53-.04-.78-.19-3.08-.35-6.16-.52-9.23l.01-.01Zm36.4 18.66c-.11-.11-.24-.29-.37-.49.35.21.74.26 1.17.16-.27.11-.53.22-.8.32v.01Zm-.89-33.72c.12-.43.23-.86.35-1.29.71-1.77 1.41-3.55 2.08-5.33-.15.68-.26 1.22-.31 1.55-.5 2.94-2.13 7.59-3.58 13.36-.15-.35-.29-.66-.43-1 .61-2.44 1.25-4.87 1.9-7.3l-.01.01Zm3.56-12.48c.14-.44.28-.89.42-1.34-.13.7-.27 1.41-.42 2.11-.43 1.19-.86 2.38-1.31 3.57.42-1.45.85-2.9 1.31-4.34Zm-5.22 16.05c-.11.44-.23.87-.35 1.31-.12.46-.23.92-.35 1.38-.1-.22-.19-.4-.28-.61.34-.69.66-1.38.97-2.08h.01Zm-11.64 2.62c.06-.1.12-.19.17-.28.05.13.09.26.14.39a.398.398 0 0 0-.31-.11Zm2.3 2.98c-.56-1.3-1.25-2.63-1.65-3.99 0 0 .01-.02.02-.02.06.08 1.52 2.93 1.63 3.08.73 1.13 3.38 7.04 5.67 12.26 1.2 2.73 2.08 5.17 2.83 7.18-.62-1.25-1.23-2.51-1.83-3.78-2.31-4.87-4.53-9.78-6.67-14.73ZM275.92 87.03c-1.06-2.18-1.13-3.45-2.44-2.93-1.52.57-2.94 1.3-4.5 2.1-1.4.72-2.68 1.44-3.92 2.12.01-.25-.24-.5-.51-.34-4.8 2.93-12.41 4.7-17.28 1.31-1.98-1.77-3.32-4.15-3.97-5.78-.29-.95-.49-1.94-.63-2.93-.14-3.34 1.58-6.53 3.9-9.12.8-.79 1.68-1.51 2.66-2.12 3.7-2.3 8.22-3.07 12.51-2.51 2.71.35 5.32 1.24 7.71 2.55.39.22.75-.39.35-.6-.18-.1-.37-.18-.55-.27.56.27 1.03.33 1.51.19l-.48.39c-.15.11-.23.3-.13.48.09.15.33.24.48.13 1.3-.97 2.46-2.09 3.45-3.37.37-.29.64-.6.65-.97v-.02c.08-.33-.03-.7-.21-1.08-.31-.87-.98-2.01-2.19-3.26-2.43-2.52-3.79-3.45-5.68-4.26-1.14-.49-3.12-1.06-4.42-1.23-3.28-.42-10.64-1.21-18.18 4.11-7.74 5.46-11.94 12.3-12.23 20.61-.08 2.06.04 3.98.34 5.71.74 4.18 2.57 8 5.44 11.34 4.26 4.99 9.76 7.52 16.34 7.52 4.85 0 9.69-1.77 14.89-4.62.23-.12.45-.23.68-.35 2.19-1.1 4.37-2.23 6.46-3.5.49-.3 1.03-.61 1.5-.98 1.47-.87 1.11-1.12.49-2.95-.39-1.14-.76-2.7-2.06-5.36l.02-.01Zm-17.38-21.76c3.05-.42 6.31.79 9.36 2.35.51.39.94.68 1.33.87-5.61-2.86-12.72-3.39-18.44-.79 2.05-1.33 4.24-1.95 7.74-2.44l.01.01ZM443.67 72.67c-.4-2.2-1.15-4.33-2.37-6.22-1.49-2.32-3.58-4.19-5.91-5.64-6.17-3.81-13.75-5.11-20.83-6.01-3.23-.41-6.47-.69-9.72-.92l-1.39-.12c-.85-.07-1.52-.1-2.05-.1-1.08-.06-2.17-.12-3.25-.17-.08 0-.14.02-.19.05-.1.05-.18.14-.16.3.27 2.55-.01 5.12-.92 7.52-.15.38.4.56.62.28 1.32.59 2.68 1.05 4.08 1.37 0 2.78-.14 7.58-.33 12.91 0 0 0 .02-.01.03-.61 3.66-.79 7.42-1 11.12-.23 4.01-.43 8.03-.44 12.05 0 .64 0 1.28.03 1.93.02.31 0 .68.15.96.06.11.14.16.24.17-.2.17-.21.54.11.59 3.83.67 7.78.71 11.68.25 2.3-.19 4.87-.65 7.65-1.56 1.85-.54 3.67-1.18 5.43-1.91 7.2-3.02 14.31-8.07 17.35-15.53.76-1.86 1.17-3.8 1.31-5.75.3-1.93.28-3.82-.09-5.58l.01-.02Zm-19.32-15.42c5.74 1.41 11.94 3.68 15.65 8.55.25.32.47.65.69.99-2.3-2.82-5.68-5.69-12.88-8.23-2.16-.76-4.35-1.43-6.64-2.02 1.06.21 2.13.45 3.18.71Zm-25.82-3.04c.13 0 .27.01.4.02-.14.1-.26.23-.37.38 0-.13-.02-.26-.03-.4Zm34.82 22.17c-.75 3.09-3.55 5.66-5.88 7.58-3.35 2.76-7.21 5.03-11.28 6.54-1.33.49-2.71.9-4.12 1.15.06-1.38.08-2.76.07-4.13-.02-3.78-.16-7.56-.41-11.33-.09-1.37-.18-2.74-.37-4.1 0-.06-.03-.11-.06-.15.09-3.25.12-6.16.03-8.12 6.86 1.05 10.56 2.17 14.06 3.62 5.52 2.28 8.59 5.44 7.97 8.96l-.01-.02Zm-22 16.15c-.12 0-.23-.02-.34-.03l.34-.03v.06Zm-.69-.7c0-3.13.26-8.84.47-14.51.06 1.2.11 2.41.15 3.6.15 3.6.25 7.23.09 10.83-.24.03-.48.05-.71.07v.01Zm-12.33-30.94c.37.63 2.01 1.01 3.23 1.25v.15c-1.31-.31-2.59-.73-3.83-1.29.12-.36.23-.72.33-1.09.08.48.18.84.27.98Zm13.7 31.65v-.18c3.41-.56 6.71-2.02 9.69-3.68 2.31-1.28 4.59-2.78 6.63-4.53-4.69 4.53-11.61 8.24-16.33 8.38l.01.01Zm24.07-.75c-2.05 1.93-4.37 3.56-6.83 4.95 2.7-1.78 5.52-4.03 8.42-6.87.82-.82 1.56-1.69 2.23-2.59-1.08 1.65-2.38 3.16-3.81 4.51h-.01ZM187.16 92.14c-.79-2.47-2.1-7.12-3.1-6.87-.19-.01-2.09.77-4.08 1.54-3.06 1.18-5.91 2.13-10.09 2.82-2.74.42-5.87 1.01-10.61 1.06.04-3.34.05-6.01.05-7.99 7.97-.65 12.33-2.11 16.37-3.55 1.11-.39 2.69-1.01 2.63-1.8-.08-.35-.55-1.39-1.17-2.61-.47-1.16-.98-2.31-1.61-3.38-.42-.71-1.04-1.69-1.86-2.06-.11-.08-.22-.13-.29-.12-.02 0-.04 0-.07.01-.19-.04-.39-.05-.6-.01-.17.03-.24.15-.25.28-.04.02-.09.04-.14.05-4.33 1.48-8.85 2.33-13.24 3.61a499.1 499.1 0 0 0-.31-8.19c4.51-.99 8.88-1.38 13.11-1.82 3.68-.38 6.28.12 7.47.34.59.11.9.16 1.16.18h.1c-.1.37.44.66.62.28.02-.04.03-.08.05-.13.15.2.53.22.62-.1.17-.58.19-1.21.21-1.81v-.36c.03-.15.05-.3.07-.45.52-2.47.33-5.09-.64-7.44-.11-.27-.44-.28-.6-.14-.08-.21-.15-.42-.24-.62-.19-.41-.79-.05-.6.35.03.07.05.15.09.22-.98-.42-2.15-.54-3.17-.63-2.17-.19-4.37-.14-6.54 0-5.7.35-11.4 1.3-16.91 2.79-2.08.56-4.13 1.22-6.14 2-4.54 1.05-3.79 1.51-2.17 6.07.18.51.46 1.68.54 1.94.82 2.47 1.08 2.13 3.1 2.13s0 .05 0 .08h.52c-.48 2.66-.51 5.45-.62 8.13-.15 3.48-.22 6.96-.28 10.45 0 .41-.01.82-.02 1.23-.16.29-.33.57-.51.85-.05.38-.09.77-.14 1.18-.42 3.52-.59 6.48-.52 8.8v.34c.02.47.05.76.06.87.16 1.57-.26 3.47 1.35 3.79 1.61.32 3.5.55 4.85.55.11 0 .22-.02.33-.02 1.79.24 3.67.05 5.45-.12 2.85-.28 5.69-.7 8.51-1.19 3.03-.53 6.05-1.14 9.04-1.86 2.4-.58 4.82-1.19 7.13-2.06.51-.19 1.73-.57 2.46-1.14 1.81-.68 2.18-1 1.57-2.67-.23-.62-.48-1.49-.91-2.78l-.03-.02Zm-11.12-38.71c.89.05 1.93.08 2.89.3-.33 0-.68-.02-1.06-.03-8.28-.26-14.88.75-23.97 2.51 2.41-.64 4.85-1.16 7.28-1.59 4.87-.86 9.91-1.45 14.86-1.19Zm-26.53 22.13c.03 1.71.04 3.43 0 5.14-.04 1.27-.11 2.55-.24 3.82 0-.73.02-1.46.04-2.19.05-2.26.12-4.51.22-6.77h-.02Zm6.73 27.85c.2-.1.4-.21.58-.33 1.82-.17 3.82-.24 5.94-.34-.86.11-1.72.24-2.58.33-1.27.14-2.61.31-3.93.34h-.01ZM534.48 85.44c-3.52-8.38-7.07-16.75-10.5-25.17-.63-1.54-1.25-3.09-1.86-4.65-.31-.8-.65-1.6-.87-2.43-.04-.17-.17-.24-.31-.25.1-.2 0-.51-.29-.53-1.59-.08-3.18-.22-4.78-.25-1.96-.03-3.91.13-5.84.42-.31.05-.31.38-.13.56-.03.06-.05.14-.04.22.23 1.54.63 3.06 1.16 4.53.13.35.27.7.41 1.06l-2.68 6.18c-.11.03-.2.09-.25.22-.67 1.9-1.52 3.73-2.34 5.56a536.85 536.85 0 0 1-3.9 8.45c-2.64 5.64-5.34 11.25-7.91 16.93-.44.97-.88 1.94-1.29 2.93-.2.48-.47 1-.55 1.52v.05c-.02.12.02.26.16.34 1.19.73 2.41 1.41 3.66 2.05 1.2.62 2.45 1.25 3.76 1.61.43.12.62-.55.19-.67-1.13-.31-2.2-.83-3.24-1.36 1.09.36 2.1.69 2.75.93 2.82 1.01 2.38 1.1 4.3-3.75 2.1-1.09 4.34-1.96 6.53-2.79 4.35-1.64 8.8-3.03 13.27-4.29.82 2.01 1.77 3.97 2.72 5.92.35.83.62 1.45.79 1.82.22.42.45.8.69 1.15.17.33.33.67.5 1 .42.8.84 1.63 1.4 2.35.23.29.6 0 .55-.31 1.53-.02 3.06-.07 4.58-.27.92-.12 1.82-.32 2.71-.54 1.39-.27 3.85-1.11 3.74-1.42-.67-1.96-1.55-3.87-2.34-5.78-1.57-3.78-3.16-7.56-4.75-11.33v-.01Zm-11.65-26.16c1.54 3.81 3.12 7.6 4.7 11.4 2.94 7.05 5.91 14.09 8.87 21.13l-1.06-2.17c-2.71-5.51-5.2-11.19-7.41-16.87l-6.65-17.15c-.65-1.45-.55-2.19-.93-2.53.09 0 .18.01.28.02a.29.29 0 0 0-.04.26c.52 2.02 1.47 3.98 2.25 5.91h-.01Zm-6.58 13.58c.05-.15.09-.31.14-.46 1.41 3.92 2.88 7.9 4.39 11.87-3.22.52-6.38 1.25-9.46 2.14.55-1.22 1.05-2.46 1.53-3.7 1.24-3.24 2.37-6.53 3.39-9.85h.01Zm-.23-20c.36 0 .73.03 1.09.05-2.15.1-5.18.33-5.87.74-.24.15-.41.3-.53.45-.06-.29-.13-.58-.18-.88 1.82-.26 3.65-.39 5.49-.35v-.01Zm-.09 18.72c-.49 1.67-1.05 3.33-1.6 4.97-1.07 3.19-2.19 6.38-3.57 9.46-.09.21-.19.43-.29.65-.25.07-.5.14-.74.22 2.53-6.16 4.61-11.29 6.2-15.3Zm-6.34 25.16c4.97-2.38 9.37-4.1 14.02-5.27l.26.64c-4.8 1.35-9.63 2.8-14.28 4.63Zm20.17 6.76c.33.23.68.42 1.04.56h-.33c-.12 0-.21.06-.26.13-.15-.23-.31-.45-.45-.7v.01ZM226.57 91.75c-3.55-4.74-6.68-9.11-9.31-12.99 9.2-15.25 10.05-17.81 10.35-18.38.17-.34 1.09-2.27.64-2.53-1.13-.65-1.03-.65-2.97-1.71-1.19-.65-3.04-1.61-4.53-2.12-1.71-.59-1.24-.36-3 2.77-.06.1-.11.2-.17.3-.75 1.02-1.48 2.05-2.2 3.09-1.88 2.71-3.73 5.45-5.69 8.1-3.68-4.91-6.88-8.76-9.51-11.43-.15-.15-.3-.29-.46-.42-1.27-1.28-7.24 3.53-7.93 5.58-.09.09-.19.16-.28.25-.27.26.03.64.33.58.19.65.5 1.29.94 1.91 3.85 5.06 7.19 9.76 9.94 14-1.23 2.61-3.06 5-4.67 7.38l-2.28 3.33c-.5.66-.93 1.23-1.29 1.69-.67.93-2.09 2.61-2.3 3.87-.51.85-1.16 1.84-1.29 2.83-.06.44.61.63.67.19.01-.08.04-.15.06-.22 1.36 1.08 2.76 2.11 4.19 3.11 1.3.91 2.62 1.85 4.04 2.56.21.1.4 0 .48-.17.24.07.48.14.72.2.44.1.62-.57.19-.67-2.02-.48-3.77-1.57-5.23-3.02-.47-.46-.9-.96-1.32-1.46 1.74 1.35 4.2 2.89 5.89 4.14 1.39 1.03 2.85-2.27 4.22-4.2 1.86-2.64 3.96-5.86 5.52-8.29l10.39 14.51c.67.81 1.14 1.21 1.57 1.36-.05.24.12.51.41.4 1.53-.58 3.05-1.19 4.54-1.87 1.52-.69 3.06-1.45 4.36-2.5a.28.28 0 0 0 .12-.23c1.66-1.1.81-1.74-1.41-4.91-1.13-1.58-1.71-2.36-3.7-5.01l-.03-.02Zm2.41 6.54c.56 1.15 1.19 2.52 1.11 3.81-.06.04-.12.07-.17.1-.03-.88-.55-2.66-.94-3.91Zm-16.51-32.73c1.86-2.65 3.65-5.35 5.57-7.95.4-.55.81-1.13 1.26-1.66.19-.18.38-.33.56-.45.18.03.36.08.55.13l-8.05 10.11.12-.18h-.01ZM192.7 95.48c.79-1.37 1.66-2.69 2.54-4 1.19-1.79 2.4-3.56 3.61-5.33-.04.09-.09.17-.13.26-.1.22.03.41.2.49-2.47 3.42-4.89 6.73-6.4 9.28.21.24.4.48.63.75-.24.07-.4.36-.17.56.4.33.72.77 1.05 1.17.09.11.18.21.27.32-.84-.61-1.66-1.24-2.47-1.88.24-.57.58-1.11.87-1.61v-.01Zm7.46-10.32c.47-.81.98-1.59 1.49-2.37.31-.48.64-.95.96-1.43.26-.29.52-.56.75-.79-.99 1.48-2.09 3.03-3.2 4.59Zm10.03-16.22s-.03-.05-.05-.07c.22-.29.43-.59.64-.89-.2.32-.4.65-.58.96h-.01ZM371.54 87.96c-.01-.08-.01-.16-.03-.23-.06-.38-.58-.29-.66.03-.3-.05-.6-.08-.81-.11-1.14-.15-2.29-.19-3.44-.2 1.04-.09 2.09-.18 3.14-.23.45-.02.45-.72 0-.7-6.57.35-13.14 1.23-19.65 2.11-1.53.21-3.05.42-4.57.68-.01 0-.02.01-.04.01-.04-3.33-.13-6.66-.24-9.99-.19-5.7-.4-11.41-.88-17.1-.13-1.51-.23-3.07-.49-4.58 0-.25 0-.48-.02-.68-.06-1.19-.04-2.61-.68-2.78-.16-.07-.72-.16-1.5-.24.22-.17.16-.62-.2-.63-1.19-.04-2.39.09-3.57.23-1.2.14-2.41.32-3.59.6-.16-.1-.41-.06-.5.12-.06.02-.13.03-.19.05-.35.1-.29.55-.03.66-.26.6-.19 2.27-.21 3-.02.66-.66 33.73-.9 40.3-.03.65.06 1.12.04 1.45-.16 3.05.87 4.96 6.34 3.93 1.09-.08 2.75-.77 5.36-1.43 4.13-1.04 5.78-1.52 6.2-1.65 6.43-1.69 6.78-1.97 11.72-2.43.55-.05 4.8-.38 6.03-.3.64.04 1.19.07 1.65.1.09 0 .16-.03.24-.05.1.27.56.33.66-.02.39-1.32.61-2.71.78-4.08.2-1.61.29-3.24.15-4.86.24.03.52-.23.38-.53-.09-.2-.27-.33-.49-.43v-.02Zm-.63.56c.07.57.11 1.14.11 1.71-.21-.99-.53-1.71-.95-1.87.22.03.44.06.65.11.06.01.12.04.19.05Zm-25.41 1.73c1.54-.36 3.1-.64 4.66-.89-1.61.37-3.18.77-4.66 1.2v-.31Zm-.86-7.37c-.07-1.37-.16-2.75-.25-4.12-.21-3.13-.45-6.27-.79-9.4.02-2.25.08-4.31.13-6.11.16 2.08.29 4.16.4 6.24.23 4.46.38 8.93.5 13.39h.01Zm-.94-4c.16 2.41.29 4.83.39 7.24.06 1.6.14 3.22.09 4.83-.15.05-.32.09-.47.14V78.88h-.01ZM483.72 92.83c-3.05-2.28-6.22-4.4-9.38-6.51 8.86-6.49 13.49-12.95 13.73-19.23.04-.76 0-1.5-.13-2.2-.67-3.82-3.5-6.68-8.39-8.48.13.04.27.08.4.13 3.92 1.39 7.74 4.23 8.5 8.56.34 1.95-.05 3.96-.98 5.69-.21.4.39.75.6.35 1.86-3.46 1.46-7.55-.97-10.63-3.53-4.47-9.76-5.88-15.16-6.16-2.32-.12-4.64-.04-6.95.19-6 .32-12.71 1.68-17.63 3.21-.37.11-.67.23-.92.35-.2-.17-.62.02-.57.37v.03c-.64.68-.18 1.64.48 3.21.38.91.67 1.89 1.15 2.58.32.76.68 1.51 1.13 2.19.14.21.38.19.53.07.19-.02.38-.05.57-.08v1.57c-.06.06-.1.13-.11.23-.27 4.18-.34 8.38-.48 12.57l-.3 9.03c-.24 3.91-.44 6.77-.46 7.26-.05.88-.11 1.95.07 2.81-.01.22-.02.43-.04.65 0 .11-.02.23-.03.35 0 .05-.03.27-.01.16-.05.4.5.59.64.28.05.04.12.08.2.08 1.75.13 3.5.28 5.25.3 1.69.02 3.38-.12 5.06-.32.08.23.36.39.55.15.06-.08.11-.17.16-.26.18-.09.24-.32.18-.48.05-.2.1-.4.13-.6.16-.86.25-1.74.33-2.62.11-1.17.17-2.34.23-3.51.15-.01.32-.03.52-.04.36-.03 1.73-.15 2.06-.15.39 0 .7-.02.95-.04 1.76 1.11 3.45 2.35 5.14 3.55 2.83 2.01 5.64 4.04 8.47 6.04 1.42 1 2.85 2 4.29 2.97.1.06.19.07.27.04.08 0 .17-.02.25-.1 1.61-1.56 3.15-3.18 4.6-4.88.75-.88 1.49-1.78 2.15-2.73.01.01.03.02.04.03.34.3.83-.2.49-.49-2.16-1.9-4.34-3.76-6.64-5.48l.03-.01Zm-6.38-3.65a55.72 55.72 0 0 0-4-2.13c.14-.1.26-.19.4-.29 1.2.81 2.4 1.61 3.6 2.42Zm-20.1 11.78c.67-.37 1.23-.91 1.67-1.6-.11.5-.24 1-.38 1.49-.43.04-.86.08-1.29.11Zm2.38-37.24c1.34-.31 2.56-.52 3.71-.69-1.03.19-2.04.41-3.04.65-.14-.07-.34-.02-.45.11-.07.02-.15.04-.22.05v-.13.01Zm.04.84c.07-.02.14-.03.2-.05.34 1.66.41 3.41.5 5.09.17 2.9.24 5.81.28 8.71l.03 3.17c-.17.07-.34.14-.51.2-.06-4.96-.21-10.58-.51-17.12h.01Zm16.04 5.62c-1.16 2.25-3.06 4.1-5.02 5.66-2.8 2.23-5.99 3.97-9.3 5.35-.01-3.56-.09-7.12-.27-10.67-.1-2.04-.16-4.16-.57-6.18 3.3-.78 6.72-1.36 10.1-1.1 1.85.14 4.23.59 5.32 2.29.92 1.43.46 3.24-.26 4.65Zm.85-.18c.6-1.37.9-2.92.28-4.32-.67-1.52-2.2-2.32-3.76-2.74.46.1.89.21 1.29.37 1.74.67 2.69 1.88 2.93 3.21.2 1.13-.05 2.25-.74 3.47V70Zm-27.47-4.14c-.12-.19-.23-.38-.34-.57.74.42.85.36.99.41v.08c-.22.03-.43.06-.65.08Zm11.21 30.46c-.08 1.08-.16 2.17-.33 3.24-.05.35-.11.69-.2 1.03 0 .04-.02.07-.03.11-.15.02-.3.04-.45.05.45-1.64.76-3.36.79-5.07.03-.29.08-.57.1-.89-.03-.31-.03-.47.24-.57-.04.69-.07 1.39-.12 2.08v.02Zm5.6-2.47c.48.11.92.52 2.49 1.72-.46-.32-.92-.65-1.38-.97-.37-.25-.73-.5-1.1-.75h-.01Zm21.23 7.24a70.76 70.76 0 0 1-4.37 4.63c-.14-.09-.27-.19-.4-.28.19-.09.37-.24.55-.47.87-1.14 5.43-5.51 5.49-7.45.31.26.62.53.92.79-.67.97-1.42 1.88-2.19 2.77v.01Z",fill:"currentColor",transform:"translate(-144.023 -51.76)"})]}),NX=({style:e,size:t="small",withText:n})=>P("div",{className:`ExcalidrawLogo is-${t}`,style:e,children:[g(pEe,{}),n&&g(UEe,{})]}),gw=({icon:e,shortcut:t,children:n})=>{const i=qn();return P(ge,{children:[g("div",{className:"welcome-screen-menu-item__icon",children:e}),g("div",{className:"welcome-screen-menu-item__text",children:n}),t&&!i.editor.isMobile&&g("div",{className:"welcome-screen-menu-item__shortcut",children:t})]})};gw.displayName="WelcomeScreenMenuItemContent";const ip=({onSelect:e,children:t,icon:n,shortcut:i,className:r="",...s})=>g("button",{...s,type:"button",className:`welcome-screen-menu-item ${r}`,onClick:e,children:g(gw,{icon:n,shortcut:i,children:t})});ip.displayName="WelcomeScreenMenuItem";const OX=({children:e,href:t,icon:n,shortcut:i,className:r="",...s})=>g("a",{...s,className:`welcome-screen-menu-item ${r}`,href:t,target:"_blank",rel:"noreferrer",children:g(gw,{icon:n,shortcut:i,children:e})});OX.displayName="WelcomeScreenMenuItemLink";const lo=({children:e})=>{const{WelcomeScreenCenterTunnel:t}=rr();return g(t.In,{children:g("div",{className:"welcome-screen-center",children:e||P(ge,{children:[g(mw,{}),g(pw,{children:k("welcomeScreen.defaults.center_heading")}),P(Uw,{children:[g(yw,{}),g(bw,{})]})]})})})};lo.displayName="Center";const mw=({children:e})=>g("div",{className:"welcome-screen-center__logo excalifont welcome-screen-decor",children:e||g(NX,{withText:!0})});mw.displayName="Logo";const pw=({children:e})=>g("div",{className:"welcome-screen-center__heading welcome-screen-decor excalifont",children:e});pw.displayName="Heading";const Uw=({children:e})=>g("div",{className:"welcome-screen-menu",children:e});Uw.displayName="Menu";const bw=()=>{const e=vr();return g(ip,{onSelect:()=>e.executeAction(j_),shortcut:"?",icon:n_,children:k("helpDialog.title")})};bw.displayName="MenuItemHelp";const yw=()=>{const e=fi(),t=vr();return e.viewModeEnabled?null:g(ip,{onSelect:()=>t.executeAction(i4),shortcut:zi("loadScene"),icon:r_,children:k("buttons.load")})};yw.displayName="MenuItemLoadScene";const PX=({onSelect:e})=>{const{t}=gn();return g(ip,{shortcut:null,onSelect:e,icon:o_,children:t("labels.liveCollaboration")})};PX.displayName="MenuItemLiveCollaborationTrigger";lo.Logo=mw;lo.Heading=pw;lo.Menu=Uw;lo.MenuItem=ip;lo.MenuItemLink=OX;lo.MenuItemHelp=bw;lo.MenuItemLoadScene=yw;lo.MenuItemLiveCollaborationTrigger=PX;const Ew=({children:e})=>{const{WelcomeScreenMenuHintTunnel:t}=rr();return g(t.In,{children:P("div",{className:"excalifont welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--menu",children:[Gle,g("div",{className:"welcome-screen-decor-hint__label",children:e||k("welcomeScreen.defaults.menuHint")})]})})};Ew.displayName="MenuHint";const vw=({children:e})=>{const{WelcomeScreenToolbarHintTunnel:t}=rr();return g(t.In,{children:P("div",{className:"excalifont welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--toolbar",children:[g("div",{className:"welcome-screen-decor-hint__label",children:e||k("welcomeScreen.defaults.toolbarHint")}),jle]})})};vw.displayName="ToolbarHint";const _w=({children:e})=>{const{WelcomeScreenHelpHintTunnel:t}=rr();return g(t.In,{children:P("div",{className:"excalifont welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--help",children:[g("div",{children:e||k("welcomeScreen.defaults.helpHint")}),Xle]})})};_w.displayName="HelpHint";const Yi=e=>g(ge,{children:e.children||P(ge,{children:[g(lo,{}),g(Ew,{}),g(vw,{}),g(_w,{})]})});Yi.displayName="WelcomeScreen";Yi.Center=lo;Yi.Hints={MenuHint:Ew,ToolbarHint:vw,HelpHint:_w};const FX=()=>{Array.prototype.at||Object.defineProperty(Array.prototype,"at",{value:function(e){if(e=Math.trunc(e)||0,e<0&&(e+=this.length),!(e<0||e>=this.length))return this[e]},writable:!0,enumerable:!1,configurable:!0}),Element.prototype.replaceChildren||(Element.prototype.replaceChildren=function(...e){this.innerHTML="",this.append(...e)})},bEe=(e,t,n)=>{var i,r,s;return!!(t&&(t.id===((i=e.editingTextElement)==null?void 0:i.id)||t.id===((r=e.resizingElement)==null?void 0:r.id)||t.id===((s=e.newElement)==null?void 0:s.id)||t.version>n.version||t.version===n.version&&t.versionNonce<n.versionNonce))},yEe=Mo((e,t,n)=>{if(window!=null&&window.DEBUG_FRACTIONAL_INDICES){const i=Ya(e.map(r=>({...r})));V9(i,{shouldThrow:g9(),includeBoundTextValidation:!0,reconciliationContext:{localElements:t,remoteElements:n}})}},1e3*60,{leading:!0,trailing:!1}),ww=(e,t,n)=>{const i=Se(e),r=[],s=new Set;for(const a of t)if(!s.has(a.id)){const l=i.get(a.id),c=bEe(n,l,a);l&&c?(r.push(l),s.add(l.id)):(r.push(a),s.add(a.id))}for(const a of e)s.has(a.id)||(r.push(a),s.add(a.id));const o=LF(r);return yEe(o,e,t),Ya(o),o},BX=({children:e,icon:t})=>{const{TTDDialogTriggerTunnel:n}=rr(),i=zn();return g(n.In,{children:P(rt.Item,{onSelect:()=>{ct("ai","dialog open","ttd"),i({openDialog:{name:"ttd",tab:"text-to-diagram"}})},icon:t??due,children:[e??k("labels.textToDiagram"),g(rt.Item.Badge,{children:"AI"})]})})};BX.displayName="TTDDialogTrigger";const EEe=e=>{const t=ao();return N.useLayoutEffect(()=>{t.setPlugins({diagramToCode:{generate:e.generate}})},[t,e.generate]),null};FX();const vEe=e=>{var j,X,K,le;const{onChange:t,initialData:n,excalidrawAPI:i,isCollaborating:r=!1,onPointerUpdate:s,renderTopRightUI:o,langCode:a=Cd.code,viewModeEnabled:l,zenModeEnabled:c,gridModeEnabled:u,libraryReturnUrl:d,theme:f,name:h,renderCustomStats:m,onPaste:p,detectScroll:b=!0,handleKeyboardGlobally:E=!1,onLibraryChange:y,autoFocus:v=!1,generateIdForFile:_,onLinkOpen:S,generateLinkForSelection:M,onPointerDown:w,onPointerUp:T,onScrollChange:A,onDuplicate:I,children:R,validateEmbeddable:D,renderEmbeddable:L,aiEnabled:G,showDeprecatedFonts:V}=e,H=(j=e.UIOptions)==null?void 0:j.canvasActions,$={...e.UIOptions,canvasActions:{..._x.canvasActions,...H},tools:{image:((K=(X=e.UIOptions)==null?void 0:X.tools)==null?void 0:K.image)??!0}};return H!=null&&H.export&&($.canvasActions.export.saveFileToDisk=((le=H.export)==null?void 0:le.saveFileToDisk)??_x.canvasActions.export.saveFileToDisk),$.canvasActions.toggleTheme===null&&typeof f>"u"&&($.canvasActions.toggleTheme=!0),N.useEffect(()=>{(async()=>{await Ue(()=>import("./roundRect-0PYZxl1G.js"),__vite__mapDeps([]))})();const he=Ve=>{typeof Ve.scale=="number"&&Ve.scale!==1&&Ve.preventDefault()};return document.addEventListener("touchmove",he,{passive:!1}),()=>{document.removeEventListener("touchmove",he)}},[]),g(Ale,{store:zs,children:g(mEe,{langCode:a,theme:f,children:g(hw,{onChange:t,initialData:n,excalidrawAPI:i,isCollaborating:r,onPointerUpdate:s,renderTopRightUI:o,langCode:a,viewModeEnabled:l,zenModeEnabled:c,gridModeEnabled:u,libraryReturnUrl:d,theme:f,name:h,renderCustomStats:m,UIOptions:$,onPaste:p,detectScroll:b,handleKeyboardGlobally:E,onLibraryChange:y,autoFocus:v,generateIdForFile:_,onLinkOpen:S,generateLinkForSelection:M,onPointerDown:w,onPointerUp:T,onScrollChange:A,onDuplicate:I,validateEmbeddable:D,renderEmbeddable:L,aiEnabled:G!==!1,showDeprecatedFonts:V,children:R})})})},_Ee=(e,t)=>{if(e.children!==t.children)return!1;const{initialData:n,UIOptions:i={},...r}=e,{initialData:s,UIOptions:o={},...a}=t,l=Object.keys(i),c=Object.keys(o);return l.length!==c.length?!1:l.every(d=>d==="canvasActions"?Object.keys(i.canvasActions).every(h=>{var m,p,b,E;return h==="export"&&((m=i==null?void 0:i.canvasActions)!=null&&m.export)&&((p=o==null?void 0:o.canvasActions)!=null&&p.export)?i.canvasActions.export.saveFileToDisk===o.canvasActions.export.saveFileToDisk:((b=i==null?void 0:i.canvasActions)==null?void 0:b[h])===((E=o==null?void 0:o.canvasActions)==null?void 0:E[h])}):i[d]===o[d])&&_i(r,a)},zX=se.memo(vEe,_Ee);zX.displayName="Excalidraw";const wEe=({link:e,onCloseRequest:t,setErrorMessage:n})=>{const{t:i}=gn(),[,r]=N.useState(!1),s=N.useRef(0),o=N.useRef(null),a=async()=>{var u;try{await Hc(e)}catch{n(i("errors.copyToSystemClipboardFailed"))}r(!0),s.current&&window.clearTimeout(s.current),s.current=window.setTimeout(()=>{r(!1)},3e3),(u=o.current)==null||u.select()},{onCopy:l,copyStatus:c}=ow();return g($r,{onCloseRequest:t,title:!1,size:"small",children:P("div",{className:"ShareableLinkDialog",children:[g("h3",{children:"Shareable link"}),P("div",{className:"ShareableLinkDialog__linkRow",children:[g(Rh,{ref:o,label:"Link",readonly:!0,fullWidth:!0,value:e,selectOnRender:!0}),g(Ks,{size:"large",label:i("buttons.copyLink"),icon:Ym,status:c,onClick:()=>{l(),a()}})]}),P("div",{className:"ShareableLinkDialog__description",children:["🔒 ",i("alerts.uploadedSecurly")]})]})})},TEe=300,SEe=5e3,IEe=300,xEe=500,ik=2e4,CEe=50,AEe=33,MEe=24*60*60*1e3,Tw=3*1024*1024,REe=31536e3,m2={SERVER_VOLATILE:"server-volatile-broadcast",SERVER:"server-broadcast",USER_FOLLOW_CHANGE:"user-follow",USER_FOLLOW_ROOM_CHANGE:"user-follow-room-change"};var Ki=(e=>(e.INVALID_RESPONSE="INVALID_RESPONSE",e.INIT="SCENE_INIT",e.UPDATE="SCENE_UPDATE",e.MOUSE_LOCATION="MOUSE_LOCATION",e.IDLE_STATUS="IDLE_STATUS",e.USER_VISIBLE_SCENE_BOUNDS="USER_VISIBLE_SCENE_BOUNDS",e))(Ki||{});const HX={shareLinkFiles:"/files/shareLinks",collabFiles:"/files/rooms"},kEe=10,vn={LOCAL_STORAGE_ELEMENTS:"excalidraw",LOCAL_STORAGE_APP_STATE:"excalidraw-state",LOCAL_STORAGE_COLLAB:"excalidraw-collab",LOCAL_STORAGE_THEME:"excalidraw-theme",LOCAL_STORAGE_DEBUG:"excalidraw-debug",VERSION_DATA_STATE:"version-dataState",VERSION_FILES:"version-files",IDB_LIBRARY:"excalidraw-library",__LEGACY_LOCAL_STORAGE_LIBRARY:"excalidraw-library"},LEe={AUTH_STATE_COOKIE:"excplus-auth"},gd=document.cookie.includes(LEe.AUTH_STATE_COOKIE),DEe=e=>{try{localStorage.setItem(vn.LOCAL_STORAGE_COLLAB,JSON.stringify({username:e}))}catch(t){console.error(t)}},VX=()=>{try{const e=localStorage.getItem(vn.LOCAL_STORAGE_COLLAB);if(e)return JSON.parse(e).username}catch(e){console.error(e)}return null},$X=()=>{let e=null,t=null;try{e=localStorage.getItem(vn.LOCAL_STORAGE_ELEMENTS),t=localStorage.getItem(vn.LOCAL_STORAGE_APP_STATE)}catch(r){console.error(r)}let n=[];if(e)try{n=UF(JSON.parse(e))}catch(r){console.error(r)}let i=null;if(t)try{i={...to(),...mz(JSON.parse(t))}}catch(r){console.error(r)}return{elements:n,appState:i}},GX=()=>{try{const e=localStorage.getItem(vn.LOCAL_STORAGE_ELEMENTS);return(e==null?void 0:e.length)||0}catch(e){return console.error(e),0}},NEe=()=>{try{const e=localStorage.getItem(vn.LOCAL_STORAGE_APP_STATE),t=localStorage.getItem(vn.LOCAL_STORAGE_COLLAB),n=(e==null?void 0:e.length)||0,i=(t==null?void 0:t.length)||0;return n+i+GX()}catch(e){return console.error(e),0}},OEe=500,rk=$a(e=>{e({scene:GX(),total:NEe()})},OEe),PEe=e=>{const[t,n]=N.useState({scene:0,total:0});N.useEffect(()=>{rk(o=>{n(o)})},[e.elements,e.appState]),N.useEffect(()=>()=>rk.cancel(),[]);const i=nE();let r,s;return i!==dP?(s=i.slice(0,16).replace("T"," "),r=i.slice(21)):s=k("stats.versionNotAvailable"),P(ma.StatsRows,{order:-1,children:[g(ma.StatsRow,{heading:!0,children:k("stats.version")}),P(ma.StatsRow,{style:{textAlign:"center",cursor:"pointer"},onClick:async()=>{try{await Hc(nE()),e.setToast(k("toast.copyToClipboard"))}catch{}},title:k("stats.versionCopy"),children:[s,g("br",{}),r]}),g(ma.StatsRow,{heading:!0,children:k("stats.storage")}),P(ma.StatsRow,{columns:2,children:[g("div",{children:k("stats.scene")}),g("div",{children:kx(t.scene,1)})]}),P(ma.StatsRow,{columns:2,children:[g("div",{children:k("stats.total")}),g("div",{children:kx(t.total,1)})]})]})},Tl=jm(),FEe=(e,t)=>{const[n,i]=Sh(e);return N.useLayoutEffect(()=>{i(typeof t=="function"?t():t)},[]),[n,i]};class XX{constructor({getFiles:t,saveFiles:n}){F(this,"fetchingFiles",new Map);F(this,"erroredFiles_fetch",new Map);F(this,"savingFiles",new Map);F(this,"savedFiles",new Map);F(this,"erroredFiles_save",new Map);F(this,"_getFiles");F(this,"_saveFiles");F(this,"isFileTracked",t=>this.savedFiles.has(t)||this.savingFiles.has(t)||this.fetchingFiles.has(t)||this.erroredFiles_fetch.has(t)||this.erroredFiles_save.has(t));F(this,"isFileSavedOrBeingSaved",t=>{const n=this.getFileVersion(t);return this.savedFiles.get(t.id)===n||this.savingFiles.get(t.id)===n});F(this,"getFileVersion",t=>t.version??1);F(this,"saveFiles",async({elements:t,files:n})=>{const i=new Map;for(const r of t){const s=In(r)&&n[r.fileId];s&&!this.isFileSavedOrBeingSaved(s)&&(i.set(r.fileId,n[r.fileId]),this.savingFiles.set(r.fileId,this.getFileVersion(s)))}try{const{savedFiles:r,erroredFiles:s}=await this._saveFiles({addedFiles:i});for(const[o,a]of r)this.savedFiles.set(o,this.getFileVersion(a));for(const[o,a]of s)this.erroredFiles_save.set(o,this.getFileVersion(a));return{savedFiles:r,erroredFiles:s}}finally{for(const[r]of i)this.savingFiles.delete(r)}});F(this,"getFiles",async t=>{if(!t.length)return{loadedFiles:[],erroredFiles:new Map};for(const n of t)this.fetchingFiles.set(n,!0);try{const{loadedFiles:n,erroredFiles:i}=await this._getFiles(t);for(const r of n)this.savedFiles.set(r.id,this.getFileVersion(r));for(const[r]of i)this.erroredFiles_fetch.set(r,!0);return{loadedFiles:n,erroredFiles:i}}finally{for(const n of t)this.fetchingFiles.delete(n)}});F(this,"shouldPreventUnload",t=>t.some(n=>In(n)&&!n.isDeleted&&this.savingFiles.has(n.fileId)));F(this,"shouldUpdateImageElementStatus",t=>In(t)&&this.savedFiles.has(t.fileId)&&t.status==="pending");this._getFiles=t,this._saveFiles=n}reset(){this.fetchingFiles.clear(),this.savingFiles.clear(),this.savedFiles.clear(),this.erroredFiles_fetch.clear(),this.erroredFiles_save.clear()}}const Sw=async({files:e,maxBytes:t,encryptionKey:n})=>{const i=[];for(const[r,s]of e){const o=new TextEncoder().encode(s.dataURL),a=await JV(o,{encryptionKey:n,metadata:{id:r,mimeType:s.mimeType,created:Date.now(),lastRetrieved:Date.now()}});if(o.byteLength>t)throw new Error(k("errors.fileTooBig",{maxSize:`${Math.trunc(t/1024/1024)}MB`}));i.push({id:r,buffer:a})}return i},y1=e=>{e.erroredFiles.size&&e.excalidrawAPI.updateScene({elements:e.excalidrawAPI.getSceneElementsIncludingDeleted().map(t=>In(t)&&e.erroredFiles.has(t.fileId)?Ce(t,{status:"error"}):t),captureUpdate:Z.NEVER})};var sk={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jX=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=r&63|128):(r&64512)===55296&&i+1<e.length&&(e.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(e.charCodeAt(++i)&1023),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=r&63|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=r&63|128)}return t},BEe=function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[n++];t[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=e[n++],o=e[n++],a=e[n++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[i++]=String.fromCharCode(55296+(l>>10)),t[i++]=String.fromCharCode(56320+(l&1023))}else{const s=e[n++],o=e[n++];t[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return t.join("")},YX={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<e.length;r+=3){const s=e[r],o=r+1<e.length,a=o?e[r+1]:0,l=r+2<e.length,c=l?e[r+2]:0,u=s>>2,d=(s&3)<<4|a>>4;let f=(a&15)<<2|c>>6,h=c&63;l||(h=64,o||(f=64)),i.push(n[u],n[d],n[f],n[h])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(jX(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):BEe(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<e.length;){const s=n[e.charAt(r++)],a=r<e.length?n[e.charAt(r)]:0;++r;const c=r<e.length?n[e.charAt(r)]:64;++r;const d=r<e.length?n[e.charAt(r)]:64;if(++r,s==null||a==null||c==null||d==null)throw new zEe;const f=s<<2|a>>4;if(i.push(f),c!==64){const h=a<<4&240|c>>2;if(i.push(h),d!==64){const m=c<<6&192|d;i.push(m)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class zEe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const HEe=function(e){const t=jX(e);return YX.encodeByteArray(t,!0)},Jb=function(e){return HEe(e).replace(/\./g,"")},VEe=function(e){try{return YX.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $Ee(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GEe=()=>$Ee().__FIREBASE_DEFAULTS__,XEe=()=>{if(typeof process>"u"||typeof sk>"u")return;const e=sk.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},jEe=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&VEe(e[1]);return t&&JSON.parse(t)},Iw=()=>{try{return GEe()||XEe()||jEe()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},YEe=e=>{var t,n;return(n=(t=Iw())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},WX=e=>{const t=YEe(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),i]:[t.substring(0,n),i]},KX=()=>{var e;return(e=Iw())===null||e===void 0?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WEe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZX(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Jb(JSON.stringify(n)),Jb(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KEe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ZEe(){var e;const t=(e=Iw())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function qEe(){return!ZEe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function QEe(){try{return typeof indexedDB=="object"}catch{return!1}}function JEe(){return new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;t(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e4e="FirebaseError";class kd extends Error{constructor(t,n,i){super(n),this.code=t,this.customData=i,this.name=e4e,Object.setPrototypeOf(this,kd.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qX.prototype.create)}}class qX{constructor(t,n,i){this.service=t,this.serviceName=n,this.errors=i}create(t,...n){const i=n[0]||{},r=`${this.service}/${t}`,s=this.errors[t],o=s?t4e(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new kd(r,a,i)}}function t4e(e,t){return e.replace(n4e,(n,i)=>{const r=t[i];return r!=null?String(r):`<${i}?>`})}const n4e=/\{\$([^}]+)}/g;function y4(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const s=e[r],o=t[r];if(ok(s)&&ok(o)){if(!y4(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function ok(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function so(e){return e&&e._delegate?e._delegate:e}class Dh{constructor(t,n,i){this.name=t,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ru="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4e{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const i=new WEe;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const i=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),r=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(s4e(t))try{this.getOrInitializeService({instanceIdentifier:ru})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(t=ru){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=ru){return this.instances.has(t)}getOptions(t=ru){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(t,n){var i;const r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(t),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&t(o,r),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:r4e(t),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=ru){return this.component?this.component.multipleInstances?t:ru:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function r4e(e){return e===ru?void 0:e}function s4e(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o4e{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new i4e(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lt;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(lt||(lt={}));const a4e={debug:lt.DEBUG,verbose:lt.VERBOSE,info:lt.INFO,warn:lt.WARN,error:lt.ERROR,silent:lt.SILENT},l4e=lt.INFO,c4e={[lt.DEBUG]:"log",[lt.VERBOSE]:"log",[lt.INFO]:"info",[lt.WARN]:"warn",[lt.ERROR]:"error"},u4e=(e,t,...n)=>{if(t<e.logLevel)return;const i=new Date().toISOString(),r=c4e[t];if(r)console[r](`[${i}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class QX{constructor(t){this.name=t,this._logLevel=l4e,this._logHandler=u4e,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in lt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?a4e[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,lt.DEBUG,...t),this._logHandler(this,lt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,lt.VERBOSE,...t),this._logHandler(this,lt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,lt.INFO,...t),this._logHandler(this,lt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,lt.WARN,...t),this._logHandler(this,lt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,lt.ERROR,...t),this._logHandler(this,lt.ERROR,...t)}}const d4e=(e,t)=>t.some(n=>e instanceof n);let ak,lk;function f4e(){return ak||(ak=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function h4e(){return lk||(lk=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const JX=new WeakMap,E4=new WeakMap,ej=new WeakMap,x7=new WeakMap,xw=new WeakMap;function g4e(e){const t=new Promise((n,i)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(ac(e.result)),r()},o=()=>{i(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&JX.set(n,e)}).catch(()=>{}),xw.set(t,e),t}function m4e(e){if(E4.has(e))return;const t=new Promise((n,i)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),r()},o=()=>{i(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});E4.set(e,t)}let v4={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return E4.get(e);if(t==="objectStoreNames")return e.objectStoreNames||ej.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ac(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function p4e(e){v4=e(v4)}function U4e(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const i=e.call(C7(this),t,...n);return ej.set(i,t.sort?t.sort():[t]),ac(i)}:h4e().includes(e)?function(...t){return e.apply(C7(this),t),ac(JX.get(this))}:function(...t){return ac(e.apply(C7(this),t))}}function b4e(e){return typeof e=="function"?U4e(e):(e instanceof IDBTransaction&&m4e(e),d4e(e,f4e())?new Proxy(e,v4):e)}function ac(e){if(e instanceof IDBRequest)return g4e(e);if(x7.has(e))return x7.get(e);const t=b4e(e);return t!==e&&(x7.set(e,t),xw.set(t,e)),t}const C7=e=>xw.get(e);function y4e(e,t,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(e,t),a=ac(o);return i&&o.addEventListener("upgradeneeded",l=>{i(ac(o.result),l.oldVersion,l.newVersion,ac(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const E4e=["get","getKey","getAll","getAllKeys","count"],v4e=["put","add","delete","clear"],A7=new Map;function ck(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(A7.get(t))return A7.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=v4e.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||E4e.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),r&&l.done]))[0]};return A7.set(t,s),s}p4e(e=>({...e,get:(t,n,i)=>ck(t,n)||e.get(t,n,i),has:(t,n)=>!!ck(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4e{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(w4e(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function w4e(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const _4="@firebase/app",uk="0.11.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rl=new QX("@firebase/app"),T4e="@firebase/app-compat",S4e="@firebase/analytics-compat",I4e="@firebase/analytics",x4e="@firebase/app-check-compat",C4e="@firebase/app-check",A4e="@firebase/auth",M4e="@firebase/auth-compat",R4e="@firebase/database",k4e="@firebase/data-connect",L4e="@firebase/database-compat",D4e="@firebase/functions",N4e="@firebase/functions-compat",O4e="@firebase/installations",P4e="@firebase/installations-compat",F4e="@firebase/messaging",B4e="@firebase/messaging-compat",z4e="@firebase/performance",H4e="@firebase/performance-compat",V4e="@firebase/remote-config",$4e="@firebase/remote-config-compat",G4e="@firebase/storage",X4e="@firebase/storage-compat",j4e="@firebase/firestore",Y4e="@firebase/vertexai",W4e="@firebase/firestore-compat",K4e="firebase",Z4e="11.3.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w4="[DEFAULT]",q4e={[_4]:"fire-core",[T4e]:"fire-core-compat",[I4e]:"fire-analytics",[S4e]:"fire-analytics-compat",[C4e]:"fire-app-check",[x4e]:"fire-app-check-compat",[A4e]:"fire-auth",[M4e]:"fire-auth-compat",[R4e]:"fire-rtdb",[k4e]:"fire-data-connect",[L4e]:"fire-rtdb-compat",[D4e]:"fire-fn",[N4e]:"fire-fn-compat",[O4e]:"fire-iid",[P4e]:"fire-iid-compat",[F4e]:"fire-fcm",[B4e]:"fire-fcm-compat",[z4e]:"fire-perf",[H4e]:"fire-perf-compat",[V4e]:"fire-rc",[$4e]:"fire-rc-compat",[G4e]:"fire-gcs",[X4e]:"fire-gcs-compat",[j4e]:"fire-fst",[W4e]:"fire-fst-compat",[Y4e]:"fire-vertex","fire-js":"fire-js",[K4e]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e6=new Map,Q4e=new Map,T4=new Map;function dk(e,t){try{e.container.addComponent(t)}catch(n){rl.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function lm(e){const t=e.name;if(T4.has(t))return rl.debug(`There were multiple attempts to register component ${t}.`),!1;T4.set(t,e);for(const n of e6.values())dk(n,e);for(const n of Q4e.values())dk(n,e);return!0}function tj(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function nj(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J4e={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},lc=new qX("app","Firebase",J4e);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eve{constructor(t,n,i){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Dh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw lc.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ij=Z4e;function rj(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const i=Object.assign({name:w4,automaticDataCollectionEnabled:!1},t),r=i.name;if(typeof r!="string"||!r)throw lc.create("bad-app-name",{appName:String(r)});if(n||(n=KX()),!n)throw lc.create("no-options");const s=e6.get(r);if(s){if(y4(n,s.options)&&y4(i,s.config))return s;throw lc.create("duplicate-app",{appName:r})}const o=new o4e(r);for(const l of T4.values())o.addComponent(l);const a=new eve(n,i,o);return e6.set(r,a),a}function sj(e=w4){const t=e6.get(e);if(!t&&e===w4&&KX())return rj();if(!t)throw lc.create("no-app",{appName:e});return t}function cc(e,t,n){var i;let r=(i=q4e[e])!==null&&i!==void 0?i:e;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${t}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),rl.warn(a.join(" "));return}lm(new Dh(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tve="firebase-heartbeat-database",nve=1,cm="firebase-heartbeat-store";let M7=null;function oj(){return M7||(M7=y4e(tve,nve,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(cm)}catch(n){console.warn(n)}}}}).catch(e=>{throw lc.create("idb-open",{originalErrorMessage:e.message})})),M7}async function ive(e){try{const n=(await oj()).transaction(cm),i=await n.objectStore(cm).get(aj(e));return await n.done,i}catch(t){if(t instanceof kd)rl.warn(t.message);else{const n=lc.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});rl.warn(n.message)}}}async function fk(e,t){try{const i=(await oj()).transaction(cm,"readwrite");await i.objectStore(cm).put(t,aj(e)),await i.done}catch(n){if(n instanceof kd)rl.warn(n.message);else{const i=lc.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});rl.warn(i.message)}}}function aj(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rve=1024,sve=30;class ove{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new lve(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=hk();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>sve){const o=cve(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){rl.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=hk(),{heartbeatsToSend:i,unsentEntries:r}=ave(this._heartbeatsCache.heartbeats),s=Jb(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return rl.warn(n),""}}}function hk(){return new Date().toISOString().substring(0,10)}function ave(e,t=rve){const n=[];let i=e.slice();for(const r of e){const s=n.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),gk(n)>t){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),gk(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class lve{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return QEe()?JEe().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await ive(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return fk(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return fk(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function gk(e){return Jb(JSON.stringify({version:2,heartbeats:e})).length}function cve(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let i=1;i<e.length;i++)e[i].date<n&&(n=e[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uve(e){lm(new Dh("platform-logger",t=>new _4e(t),"PRIVATE")),lm(new Dh("heartbeat",t=>new ove(t),"PRIVATE")),cc(_4,uk,e),cc(_4,uk,"esm2017"),cc("fire-js","")}uve("");var dve="firebase",fve="11.3.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cc(dve,fve,"app");var mk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var uc,lj;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(w,T){function A(){}A.prototype=T.prototype,w.D=T.prototype,w.prototype=new A,w.prototype.constructor=w,w.C=function(I,R,D){for(var L=Array(arguments.length-2),G=2;G<arguments.length;G++)L[G-2]=arguments[G];return T.prototype[R].apply(I,L)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(w,T,A){A||(A=0);var I=Array(16);if(typeof T=="string")for(var R=0;16>R;++R)I[R]=T.charCodeAt(A++)|T.charCodeAt(A++)<<8|T.charCodeAt(A++)<<16|T.charCodeAt(A++)<<24;else for(R=0;16>R;++R)I[R]=T[A++]|T[A++]<<8|T[A++]<<16|T[A++]<<24;T=w.g[0],A=w.g[1],R=w.g[2];var D=w.g[3],L=T+(D^A&(R^D))+I[0]+3614090360&4294967295;T=A+(L<<7&4294967295|L>>>25),L=D+(R^T&(A^R))+I[1]+3905402710&4294967295,D=T+(L<<12&4294967295|L>>>20),L=R+(A^D&(T^A))+I[2]+606105819&4294967295,R=D+(L<<17&4294967295|L>>>15),L=A+(T^R&(D^T))+I[3]+3250441966&4294967295,A=R+(L<<22&4294967295|L>>>10),L=T+(D^A&(R^D))+I[4]+4118548399&4294967295,T=A+(L<<7&4294967295|L>>>25),L=D+(R^T&(A^R))+I[5]+1200080426&4294967295,D=T+(L<<12&4294967295|L>>>20),L=R+(A^D&(T^A))+I[6]+2821735955&4294967295,R=D+(L<<17&4294967295|L>>>15),L=A+(T^R&(D^T))+I[7]+4249261313&4294967295,A=R+(L<<22&4294967295|L>>>10),L=T+(D^A&(R^D))+I[8]+1770035416&4294967295,T=A+(L<<7&4294967295|L>>>25),L=D+(R^T&(A^R))+I[9]+2336552879&4294967295,D=T+(L<<12&4294967295|L>>>20),L=R+(A^D&(T^A))+I[10]+4294925233&4294967295,R=D+(L<<17&4294967295|L>>>15),L=A+(T^R&(D^T))+I[11]+2304563134&4294967295,A=R+(L<<22&4294967295|L>>>10),L=T+(D^A&(R^D))+I[12]+1804603682&4294967295,T=A+(L<<7&4294967295|L>>>25),L=D+(R^T&(A^R))+I[13]+4254626195&4294967295,D=T+(L<<12&4294967295|L>>>20),L=R+(A^D&(T^A))+I[14]+2792965006&4294967295,R=D+(L<<17&4294967295|L>>>15),L=A+(T^R&(D^T))+I[15]+1236535329&4294967295,A=R+(L<<22&4294967295|L>>>10),L=T+(R^D&(A^R))+I[1]+4129170786&4294967295,T=A+(L<<5&4294967295|L>>>27),L=D+(A^R&(T^A))+I[6]+3225465664&4294967295,D=T+(L<<9&4294967295|L>>>23),L=R+(T^A&(D^T))+I[11]+643717713&4294967295,R=D+(L<<14&4294967295|L>>>18),L=A+(D^T&(R^D))+I[0]+3921069994&4294967295,A=R+(L<<20&4294967295|L>>>12),L=T+(R^D&(A^R))+I[5]+3593408605&4294967295,T=A+(L<<5&4294967295|L>>>27),L=D+(A^R&(T^A))+I[10]+38016083&4294967295,D=T+(L<<9&4294967295|L>>>23),L=R+(T^A&(D^T))+I[15]+3634488961&4294967295,R=D+(L<<14&4294967295|L>>>18),L=A+(D^T&(R^D))+I[4]+3889429448&4294967295,A=R+(L<<20&4294967295|L>>>12),L=T+(R^D&(A^R))+I[9]+568446438&4294967295,T=A+(L<<5&4294967295|L>>>27),L=D+(A^R&(T^A))+I[14]+3275163606&4294967295,D=T+(L<<9&4294967295|L>>>23),L=R+(T^A&(D^T))+I[3]+4107603335&4294967295,R=D+(L<<14&4294967295|L>>>18),L=A+(D^T&(R^D))+I[8]+1163531501&4294967295,A=R+(L<<20&4294967295|L>>>12),L=T+(R^D&(A^R))+I[13]+2850285829&4294967295,T=A+(L<<5&4294967295|L>>>27),L=D+(A^R&(T^A))+I[2]+4243563512&4294967295,D=T+(L<<9&4294967295|L>>>23),L=R+(T^A&(D^T))+I[7]+1735328473&4294967295,R=D+(L<<14&4294967295|L>>>18),L=A+(D^T&(R^D))+I[12]+2368359562&4294967295,A=R+(L<<20&4294967295|L>>>12),L=T+(A^R^D)+I[5]+4294588738&4294967295,T=A+(L<<4&4294967295|L>>>28),L=D+(T^A^R)+I[8]+2272392833&4294967295,D=T+(L<<11&4294967295|L>>>21),L=R+(D^T^A)+I[11]+1839030562&4294967295,R=D+(L<<16&4294967295|L>>>16),L=A+(R^D^T)+I[14]+4259657740&4294967295,A=R+(L<<23&4294967295|L>>>9),L=T+(A^R^D)+I[1]+2763975236&4294967295,T=A+(L<<4&4294967295|L>>>28),L=D+(T^A^R)+I[4]+1272893353&4294967295,D=T+(L<<11&4294967295|L>>>21),L=R+(D^T^A)+I[7]+4139469664&4294967295,R=D+(L<<16&4294967295|L>>>16),L=A+(R^D^T)+I[10]+3200236656&4294967295,A=R+(L<<23&4294967295|L>>>9),L=T+(A^R^D)+I[13]+681279174&4294967295,T=A+(L<<4&4294967295|L>>>28),L=D+(T^A^R)+I[0]+3936430074&4294967295,D=T+(L<<11&4294967295|L>>>21),L=R+(D^T^A)+I[3]+3572445317&4294967295,R=D+(L<<16&4294967295|L>>>16),L=A+(R^D^T)+I[6]+76029189&4294967295,A=R+(L<<23&4294967295|L>>>9),L=T+(A^R^D)+I[9]+3654602809&4294967295,T=A+(L<<4&4294967295|L>>>28),L=D+(T^A^R)+I[12]+3873151461&4294967295,D=T+(L<<11&4294967295|L>>>21),L=R+(D^T^A)+I[15]+530742520&4294967295,R=D+(L<<16&4294967295|L>>>16),L=A+(R^D^T)+I[2]+3299628645&4294967295,A=R+(L<<23&4294967295|L>>>9),L=T+(R^(A|~D))+I[0]+4096336452&4294967295,T=A+(L<<6&4294967295|L>>>26),L=D+(A^(T|~R))+I[7]+1126891415&4294967295,D=T+(L<<10&4294967295|L>>>22),L=R+(T^(D|~A))+I[14]+2878612391&4294967295,R=D+(L<<15&4294967295|L>>>17),L=A+(D^(R|~T))+I[5]+4237533241&4294967295,A=R+(L<<21&4294967295|L>>>11),L=T+(R^(A|~D))+I[12]+1700485571&4294967295,T=A+(L<<6&4294967295|L>>>26),L=D+(A^(T|~R))+I[3]+2399980690&4294967295,D=T+(L<<10&4294967295|L>>>22),L=R+(T^(D|~A))+I[10]+4293915773&4294967295,R=D+(L<<15&4294967295|L>>>17),L=A+(D^(R|~T))+I[1]+2240044497&4294967295,A=R+(L<<21&4294967295|L>>>11),L=T+(R^(A|~D))+I[8]+1873313359&4294967295,T=A+(L<<6&4294967295|L>>>26),L=D+(A^(T|~R))+I[15]+4264355552&4294967295,D=T+(L<<10&4294967295|L>>>22),L=R+(T^(D|~A))+I[6]+2734768916&4294967295,R=D+(L<<15&4294967295|L>>>17),L=A+(D^(R|~T))+I[13]+1309151649&4294967295,A=R+(L<<21&4294967295|L>>>11),L=T+(R^(A|~D))+I[4]+4149444226&4294967295,T=A+(L<<6&4294967295|L>>>26),L=D+(A^(T|~R))+I[11]+3174756917&4294967295,D=T+(L<<10&4294967295|L>>>22),L=R+(T^(D|~A))+I[2]+718787259&4294967295,R=D+(L<<15&4294967295|L>>>17),L=A+(D^(R|~T))+I[9]+3951481745&4294967295,w.g[0]=w.g[0]+T&4294967295,w.g[1]=w.g[1]+(R+(L<<21&4294967295|L>>>11))&4294967295,w.g[2]=w.g[2]+R&4294967295,w.g[3]=w.g[3]+D&4294967295}i.prototype.u=function(w,T){T===void 0&&(T=w.length);for(var A=T-this.blockSize,I=this.B,R=this.h,D=0;D<T;){if(R==0)for(;D<=A;)r(this,w,D),D+=this.blockSize;if(typeof w=="string"){for(;D<T;)if(I[R++]=w.charCodeAt(D++),R==this.blockSize){r(this,I),R=0;break}}else for(;D<T;)if(I[R++]=w[D++],R==this.blockSize){r(this,I),R=0;break}}this.h=R,this.o+=T},i.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var T=1;T<w.length-8;++T)w[T]=0;var A=8*this.o;for(T=w.length-8;T<w.length;++T)w[T]=A&255,A/=256;for(this.u(w),w=Array(16),T=A=0;4>T;++T)for(var I=0;32>I;I+=8)w[A++]=this.g[T]>>>I&255;return w};function s(w,T){var A=a;return Object.prototype.hasOwnProperty.call(A,w)?A[w]:A[w]=T(w)}function o(w,T){this.h=T;for(var A=[],I=!0,R=w.length-1;0<=R;R--){var D=w[R]|0;I&&D==T||(A[R]=D,I=!1)}this.g=A}var a={};function l(w){return-128<=w&&128>w?s(w,function(T){return new o([T|0],0>T?-1:0)}):new o([w|0],0>w?-1:0)}function c(w){if(isNaN(w)||!isFinite(w))return d;if(0>w)return b(c(-w));for(var T=[],A=1,I=0;w>=A;I++)T[I]=w/A|0,A*=4294967296;return new o(T,0)}function u(w,T){if(w.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(w.charAt(0)=="-")return b(u(w.substring(1),T));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=c(Math.pow(T,8)),I=d,R=0;R<w.length;R+=8){var D=Math.min(8,w.length-R),L=parseInt(w.substring(R,R+D),T);8>D?(D=c(Math.pow(T,D)),I=I.j(D).add(c(L))):(I=I.j(A),I=I.add(c(L)))}return I}var d=l(0),f=l(1),h=l(16777216);e=o.prototype,e.m=function(){if(p(this))return-b(this).m();for(var w=0,T=1,A=0;A<this.g.length;A++){var I=this.i(A);w+=(0<=I?I:4294967296+I)*T,T*=4294967296}return w},e.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(m(this))return"0";if(p(this))return"-"+b(this).toString(w);for(var T=c(Math.pow(w,6)),A=this,I="";;){var R=_(A,T).g;A=E(A,R.j(T));var D=((0<A.g.length?A.g[0]:A.h)>>>0).toString(w);if(A=R,m(A))return D+I;for(;6>D.length;)D="0"+D;I=D+I}},e.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function m(w){if(w.h!=0)return!1;for(var T=0;T<w.g.length;T++)if(w.g[T]!=0)return!1;return!0}function p(w){return w.h==-1}e.l=function(w){return w=E(this,w),p(w)?-1:m(w)?0:1};function b(w){for(var T=w.g.length,A=[],I=0;I<T;I++)A[I]=~w.g[I];return new o(A,~w.h).add(f)}e.abs=function(){return p(this)?b(this):this},e.add=function(w){for(var T=Math.max(this.g.length,w.g.length),A=[],I=0,R=0;R<=T;R++){var D=I+(this.i(R)&65535)+(w.i(R)&65535),L=(D>>>16)+(this.i(R)>>>16)+(w.i(R)>>>16);I=L>>>16,D&=65535,L&=65535,A[R]=L<<16|D}return new o(A,A[A.length-1]&-2147483648?-1:0)};function E(w,T){return w.add(b(T))}e.j=function(w){if(m(this)||m(w))return d;if(p(this))return p(w)?b(this).j(b(w)):b(b(this).j(w));if(p(w))return b(this.j(b(w)));if(0>this.l(h)&&0>w.l(h))return c(this.m()*w.m());for(var T=this.g.length+w.g.length,A=[],I=0;I<2*T;I++)A[I]=0;for(I=0;I<this.g.length;I++)for(var R=0;R<w.g.length;R++){var D=this.i(I)>>>16,L=this.i(I)&65535,G=w.i(R)>>>16,V=w.i(R)&65535;A[2*I+2*R]+=L*V,y(A,2*I+2*R),A[2*I+2*R+1]+=D*V,y(A,2*I+2*R+1),A[2*I+2*R+1]+=L*G,y(A,2*I+2*R+1),A[2*I+2*R+2]+=D*G,y(A,2*I+2*R+2)}for(I=0;I<T;I++)A[I]=A[2*I+1]<<16|A[2*I];for(I=T;I<2*T;I++)A[I]=0;return new o(A,0)};function y(w,T){for(;(w[T]&65535)!=w[T];)w[T+1]+=w[T]>>>16,w[T]&=65535,T++}function v(w,T){this.g=w,this.h=T}function _(w,T){if(m(T))throw Error("division by zero");if(m(w))return new v(d,d);if(p(w))return T=_(b(w),T),new v(b(T.g),b(T.h));if(p(T))return T=_(w,b(T)),new v(b(T.g),T.h);if(30<w.g.length){if(p(w)||p(T))throw Error("slowDivide_ only works with positive integers.");for(var A=f,I=T;0>=I.l(w);)A=S(A),I=S(I);var R=M(A,1),D=M(I,1);for(I=M(I,2),A=M(A,2);!m(I);){var L=D.add(I);0>=L.l(w)&&(R=R.add(A),D=L),I=M(I,1),A=M(A,1)}return T=E(w,R.j(T)),new v(R,T)}for(R=d;0<=w.l(T);){for(A=Math.max(1,Math.floor(w.m()/T.m())),I=Math.ceil(Math.log(A)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),D=c(A),L=D.j(T);p(L)||0<L.l(w);)A-=I,D=c(A),L=D.j(T);m(D)&&(D=f),R=R.add(D),w=E(w,L)}return new v(R,w)}e.A=function(w){return _(this,w).h},e.and=function(w){for(var T=Math.max(this.g.length,w.g.length),A=[],I=0;I<T;I++)A[I]=this.i(I)&w.i(I);return new o(A,this.h&w.h)},e.or=function(w){for(var T=Math.max(this.g.length,w.g.length),A=[],I=0;I<T;I++)A[I]=this.i(I)|w.i(I);return new o(A,this.h|w.h)},e.xor=function(w){for(var T=Math.max(this.g.length,w.g.length),A=[],I=0;I<T;I++)A[I]=this.i(I)^w.i(I);return new o(A,this.h^w.h)};function S(w){for(var T=w.g.length+1,A=[],I=0;I<T;I++)A[I]=w.i(I)<<1|w.i(I-1)>>>31;return new o(A,w.h)}function M(w,T){var A=T>>5;T%=32;for(var I=w.g.length-A,R=[],D=0;D<I;D++)R[D]=0<T?w.i(D+A)>>>T|w.i(D+A+1)<<32-T:w.i(D+A);return new o(R,w.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,lj=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,uc=o}).apply(typeof mk<"u"?mk:typeof self<"u"?self:typeof window<"u"?window:{});var vU=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var cj,E1,uj,p2,S4,dj,fj,hj;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(U,x,O){return U==Array.prototype||U==Object.prototype||(U[x]=O.value),U};function n(U){U=[typeof globalThis=="object"&&globalThis,U,typeof window=="object"&&window,typeof self=="object"&&self,typeof vU=="object"&&vU];for(var x=0;x<U.length;++x){var O=U[x];if(O&&O.Math==Math)return O}throw Error("Cannot find global object")}var i=n(this);function r(U,x){if(x)e:{var O=i;U=U.split(".");for(var B=0;B<U.length-1;B++){var W=U[B];if(!(W in O))break e;O=O[W]}U=U[U.length-1],B=O[U],x=x(B),x!=B&&x!=null&&t(O,U,{configurable:!0,writable:!0,value:x})}}function s(U,x){U instanceof String&&(U+="");var O=0,B=!1,W={next:function(){if(!B&&O<U.length){var J=O++;return{value:x(J,U[J]),done:!1}}return B=!0,{done:!0,value:void 0}}};return W[Symbol.iterator]=function(){return W},W}r("Array.prototype.values",function(U){return U||function(){return s(this,function(x,O){return O})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(U){var x=typeof U;return x=x!="object"?x:U?Array.isArray(U)?"array":x:"null",x=="array"||x=="object"&&typeof U.length=="number"}function c(U){var x=typeof U;return x=="object"&&U!=null||x=="function"}function u(U,x,O){return U.call.apply(U.bind,arguments)}function d(U,x,O){if(!U)throw Error();if(2<arguments.length){var B=Array.prototype.slice.call(arguments,2);return function(){var W=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(W,B),U.apply(x,W)}}return function(){return U.apply(x,arguments)}}function f(U,x,O){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:d,f.apply(null,arguments)}function h(U,x){var O=Array.prototype.slice.call(arguments,1);return function(){var B=O.slice();return B.push.apply(B,arguments),U.apply(this,B)}}function m(U,x){function O(){}O.prototype=x.prototype,U.aa=x.prototype,U.prototype=new O,U.prototype.constructor=U,U.Qb=function(B,W,J){for(var de=Array(arguments.length-2),Ot=2;Ot<arguments.length;Ot++)de[Ot-2]=arguments[Ot];return x.prototype[W].apply(B,de)}}function p(U){const x=U.length;if(0<x){const O=Array(x);for(let B=0;B<x;B++)O[B]=U[B];return O}return[]}function b(U,x){for(let O=1;O<arguments.length;O++){const B=arguments[O];if(l(B)){const W=U.length||0,J=B.length||0;U.length=W+J;for(let de=0;de<J;de++)U[W+de]=B[de]}else U.push(B)}}class E{constructor(x,O){this.i=x,this.j=O,this.h=0,this.g=null}get(){let x;return 0<this.h?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function y(U){return/^[\s\xa0]*$/.test(U)}function v(){var U=a.navigator;return U&&(U=U.userAgent)?U:""}function _(U){return _[" "](U),U}_[" "]=function(){};var S=v().indexOf("Gecko")!=-1&&!(v().toLowerCase().indexOf("webkit")!=-1&&v().indexOf("Edge")==-1)&&!(v().indexOf("Trident")!=-1||v().indexOf("MSIE")!=-1)&&v().indexOf("Edge")==-1;function M(U,x,O){for(const B in U)x.call(O,U[B],B,U)}function w(U,x){for(const O in U)x.call(void 0,U[O],O,U)}function T(U){const x={};for(const O in U)x[O]=U[O];return x}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(U,x){let O,B;for(let W=1;W<arguments.length;W++){B=arguments[W];for(O in B)U[O]=B[O];for(let J=0;J<A.length;J++)O=A[J],Object.prototype.hasOwnProperty.call(B,O)&&(U[O]=B[O])}}function R(U){var x=1;U=U.split(":");const O=[];for(;0<x&&U.length;)O.push(U.shift()),x--;return U.length&&O.push(U.join(":")),O}function D(U){a.setTimeout(()=>{throw U},0)}function L(){var U=X;let x=null;return U.g&&(x=U.g,U.g=U.g.next,U.g||(U.h=null),x.next=null),x}class G{constructor(){this.h=this.g=null}add(x,O){const B=V.get();B.set(x,O),this.h?this.h.next=B:this.g=B,this.h=B}}var V=new E(()=>new H,U=>U.reset());class H{constructor(){this.next=this.g=this.h=null}set(x,O){this.h=x,this.g=O,this.next=null}reset(){this.next=this.g=this.h=null}}let $,j=!1,X=new G,K=()=>{const U=a.Promise.resolve(void 0);$=()=>{U.then(le)}};var le=()=>{for(var U;U=L();){try{U.h.call(U.g)}catch(O){D(O)}var x=V;x.j(U),100>x.h&&(x.h++,U.next=x.g,x.g=U)}j=!1};function we(){this.s=this.s,this.C=this.C}we.prototype.s=!1,we.prototype.ma=function(){this.s||(this.s=!0,this.N())},we.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function he(U,x){this.type=U,this.g=this.target=x,this.defaultPrevented=!1}he.prototype.h=function(){this.defaultPrevented=!0};var Ve=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var U=!1,x=Object.defineProperty({},"passive",{get:function(){U=!0}});try{const O=()=>{};a.addEventListener("test",O,x),a.removeEventListener("test",O,x)}catch{}return U}();function Ye(U,x){if(he.call(this,U?U.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,U){var O=this.type=U.type,B=U.changedTouches&&U.changedTouches.length?U.changedTouches[0]:null;if(this.target=U.target||U.srcElement,this.g=x,x=U.relatedTarget){if(S){e:{try{_(x.nodeName);var W=!0;break e}catch{}W=!1}W||(x=null)}}else O=="mouseover"?x=U.fromElement:O=="mouseout"&&(x=U.toElement);this.relatedTarget=x,B?(this.clientX=B.clientX!==void 0?B.clientX:B.pageX,this.clientY=B.clientY!==void 0?B.clientY:B.pageY,this.screenX=B.screenX||0,this.screenY=B.screenY||0):(this.clientX=U.clientX!==void 0?U.clientX:U.pageX,this.clientY=U.clientY!==void 0?U.clientY:U.pageY,this.screenX=U.screenX||0,this.screenY=U.screenY||0),this.button=U.button,this.key=U.key||"",this.ctrlKey=U.ctrlKey,this.altKey=U.altKey,this.shiftKey=U.shiftKey,this.metaKey=U.metaKey,this.pointerId=U.pointerId||0,this.pointerType=typeof U.pointerType=="string"?U.pointerType:wt[U.pointerType]||"",this.state=U.state,this.i=U,U.defaultPrevented&&Ye.aa.h.call(this)}}m(Ye,he);var wt={2:"touch",3:"pen",4:"mouse"};Ye.prototype.h=function(){Ye.aa.h.call(this);var U=this.i;U.preventDefault?U.preventDefault():U.returnValue=!1};var st="closure_listenable_"+(1e6*Math.random()|0),zt=0;function en(U,x,O,B,W){this.listener=U,this.proxy=null,this.src=x,this.type=O,this.capture=!!B,this.ha=W,this.key=++zt,this.da=this.fa=!1}function Ae(U){U.da=!0,U.listener=null,U.proxy=null,U.src=null,U.ha=null}function $e(U){this.src=U,this.g={},this.h=0}$e.prototype.add=function(U,x,O,B,W){var J=U.toString();U=this.g[J],U||(U=this.g[J]=[],this.h++);var de=vs(U,x,B,W);return-1<de?(x=U[de],O||(x.fa=!1)):(x=new en(x,this.src,J,!!B,W),x.fa=O,U.push(x)),x};function Ht(U,x){var O=x.type;if(O in U.g){var B=U.g[O],W=Array.prototype.indexOf.call(B,x,void 0),J;(J=0<=W)&&Array.prototype.splice.call(B,W,1),J&&(Ae(x),U.g[O].length==0&&(delete U.g[O],U.h--))}}function vs(U,x,O,B){for(var W=0;W<U.length;++W){var J=U[W];if(!J.da&&J.listener==x&&J.capture==!!O&&J.ha==B)return W}return-1}var qo="closure_lm_"+(1e6*Math.random()|0),co={};function uo(U,x,O,B,W){if(Array.isArray(x)){for(var J=0;J<x.length;J++)uo(U,x[J],O,B,W);return null}return O=mT(O),U&&U[st]?U.K(x,O,c(B)?!!B.capture:!1,W):Gr(U,x,O,!1,B,W)}function Gr(U,x,O,B,W,J){if(!x)throw Error("Invalid event type");var de=c(W)?!!W.capture:!!W,Ot=oy(U);if(Ot||(U[qo]=Ot=new $e(U)),O=Ot.add(x,O,B,de,J),O.proxy)return O;if(B=ry(),O.proxy=B,B.src=U,B.listener=O,U.addEventListener)Ve||(W=de),W===void 0&&(W=!1),U.addEventListener(x.toString(),B,W);else if(U.attachEvent)U.attachEvent(gT(x.toString()),B);else if(U.addListener&&U.removeListener)U.addListener(B);else throw Error("addEventListener and attachEvent are unavailable.");return O}function ry(){function U(O){return x.call(U.src,U.listener,O)}const x=sW;return U}function Vc(U,x,O,B,W){if(Array.isArray(x))for(var J=0;J<x.length;J++)Vc(U,x[J],O,B,W);else B=c(B)?!!B.capture:!!B,O=mT(O),U&&U[st]?(U=U.i,x=String(x).toString(),x in U.g&&(J=U.g[x],O=vs(J,O,B,W),-1<O&&(Ae(J[O]),Array.prototype.splice.call(J,O,1),J.length==0&&(delete U.g[x],U.h--)))):U&&(U=oy(U))&&(x=U.g[x.toString()],U=-1,x&&(U=vs(x,O,B,W)),(O=-1<U?x[U]:null)&&sy(O))}function sy(U){if(typeof U!="number"&&U&&!U.da){var x=U.src;if(x&&x[st])Ht(x.i,U);else{var O=U.type,B=U.proxy;x.removeEventListener?x.removeEventListener(O,B,U.capture):x.detachEvent?x.detachEvent(gT(O),B):x.addListener&&x.removeListener&&x.removeListener(B),(O=oy(x))?(Ht(O,U),O.h==0&&(O.src=null,x[qo]=null)):Ae(U)}}}function gT(U){return U in co?co[U]:co[U]="on"+U}function sW(U,x){if(U.da)U=!0;else{x=new Ye(x,this);var O=U.listener,B=U.ha||U.src;U.fa&&sy(U),U=O.call(B,x)}return U}function oy(U){return U=U[qo],U instanceof $e?U:null}var ay="__closure_events_fn_"+(1e9*Math.random()>>>0);function mT(U){return typeof U=="function"?U:(U[ay]||(U[ay]=function(x){return U.handleEvent(x)}),U[ay])}function Ii(){we.call(this),this.i=new $e(this),this.M=this,this.F=null}m(Ii,we),Ii.prototype[st]=!0,Ii.prototype.removeEventListener=function(U,x,O,B){Vc(this,U,x,O,B)};function $i(U,x){var O,B=U.F;if(B)for(O=[];B;B=B.F)O.push(B);if(U=U.M,B=x.type||x,typeof x=="string")x=new he(x,U);else if(x instanceof he)x.target=x.target||U;else{var W=x;x=new he(B,U),I(x,W)}if(W=!0,O)for(var J=O.length-1;0<=J;J--){var de=x.g=O[J];W=cp(de,B,!0,x)&&W}if(de=x.g=U,W=cp(de,B,!0,x)&&W,W=cp(de,B,!1,x)&&W,O)for(J=0;J<O.length;J++)de=x.g=O[J],W=cp(de,B,!1,x)&&W}Ii.prototype.N=function(){if(Ii.aa.N.call(this),this.i){var U=this.i,x;for(x in U.g){for(var O=U.g[x],B=0;B<O.length;B++)Ae(O[B]);delete U.g[x],U.h--}}this.F=null},Ii.prototype.K=function(U,x,O,B){return this.i.add(String(U),x,!1,O,B)},Ii.prototype.L=function(U,x,O,B){return this.i.add(String(U),x,!0,O,B)};function cp(U,x,O,B){if(x=U.i.g[String(x)],!x)return!0;x=x.concat();for(var W=!0,J=0;J<x.length;++J){var de=x[J];if(de&&!de.da&&de.capture==O){var Ot=de.listener,hi=de.ha||de.src;de.fa&&Ht(U.i,de),W=Ot.call(hi,B)!==!1&&W}}return W&&!B.defaultPrevented}function pT(U,x,O){if(typeof U=="function")O&&(U=f(U,O));else if(U&&typeof U.handleEvent=="function")U=f(U.handleEvent,U);else throw Error("Invalid listener argument");return 2147483647<Number(x)?-1:a.setTimeout(U,x||0)}function UT(U){U.g=pT(()=>{U.g=null,U.i&&(U.i=!1,UT(U))},U.l);const x=U.h;U.h=null,U.m.apply(null,x)}class oW extends we{constructor(x,O){super(),this.m=x,this.l=O,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:UT(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function hg(U){we.call(this),this.h=U,this.g={}}m(hg,we);var bT=[];function yT(U){M(U.g,function(x,O){this.g.hasOwnProperty(O)&&sy(x)},U),U.g={}}hg.prototype.N=function(){hg.aa.N.call(this),yT(this)},hg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ly=a.JSON.stringify,aW=a.JSON.parse,lW=class{stringify(U){return a.JSON.stringify(U,void 0)}parse(U){return a.JSON.parse(U,void 0)}};function cy(){}cy.prototype.h=null;function ET(U){return U.h||(U.h=U.i())}function vT(){}var gg={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function uy(){he.call(this,"d")}m(uy,he);function dy(){he.call(this,"c")}m(dy,he);var $c={},_T=null;function up(){return _T=_T||new Ii}$c.La="serverreachability";function wT(U){he.call(this,$c.La,U)}m(wT,he);function mg(U){const x=up();$i(x,new wT(x))}$c.STAT_EVENT="statevent";function TT(U,x){he.call(this,$c.STAT_EVENT,U),this.stat=x}m(TT,he);function Gi(U){const x=up();$i(x,new TT(x,U))}$c.Ma="timingevent";function ST(U,x){he.call(this,$c.Ma,U),this.size=x}m(ST,he);function pg(U,x){if(typeof U!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){U()},x)}function Ug(){this.g=!0}Ug.prototype.xa=function(){this.g=!1};function cW(U,x,O,B,W,J){U.info(function(){if(U.g)if(J)for(var de="",Ot=J.split("&"),hi=0;hi<Ot.length;hi++){var Ut=Ot[hi].split("=");if(1<Ut.length){var xi=Ut[0];Ut=Ut[1];var Ci=xi.split("_");de=2<=Ci.length&&Ci[1]=="type"?de+(xi+"="+Ut+"&"):de+(xi+"=redacted&")}}else de=null;else de=J;return"XMLHTTP REQ ("+B+") [attempt "+W+"]: "+x+`
`+O+`
`+de})}function uW(U,x,O,B,W,J,de){U.info(function(){return"XMLHTTP RESP ("+B+") [ attempt "+W+"]: "+x+`
`+O+`
`+J+" "+de})}function Pd(U,x,O,B){U.info(function(){return"XMLHTTP TEXT ("+x+"): "+fW(U,O)+(B?" "+B:"")})}function dW(U,x){U.info(function(){return"TIMEOUT: "+x})}Ug.prototype.info=function(){};function fW(U,x){if(!U.g)return x;if(!x)return null;try{var O=JSON.parse(x);if(O){for(U=0;U<O.length;U++)if(Array.isArray(O[U])){var B=O[U];if(!(2>B.length)){var W=B[1];if(Array.isArray(W)&&!(1>W.length)){var J=W[0];if(J!="noop"&&J!="stop"&&J!="close")for(var de=1;de<W.length;de++)W[de]=""}}}}return ly(O)}catch{return x}}var dp={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},IT={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},fy;function fp(){}m(fp,cy),fp.prototype.g=function(){return new XMLHttpRequest},fp.prototype.i=function(){return{}},fy=new fp;function fl(U,x,O,B){this.j=U,this.i=x,this.l=O,this.R=B||1,this.U=new hg(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new xT}function xT(){this.i=null,this.g="",this.h=!1}var CT={},hy={};function gy(U,x,O){U.L=1,U.v=pp(Qo(x)),U.m=O,U.P=!0,AT(U,null)}function AT(U,x){U.F=Date.now(),hp(U),U.A=Qo(U.v);var O=U.A,B=U.R;Array.isArray(B)||(B=[String(B)]),$T(O.i,"t",B),U.C=0,O=U.j.J,U.h=new xT,U.g=aS(U.j,O?x:null,!U.m),0<U.O&&(U.M=new oW(f(U.Y,U,U.g),U.O)),x=U.U,O=U.g,B=U.ca;var W="readystatechange";Array.isArray(W)||(W&&(bT[0]=W.toString()),W=bT);for(var J=0;J<W.length;J++){var de=uo(O,W[J],B||x.handleEvent,!1,x.h||x);if(!de)break;x.g[de.key]=de}x=U.H?T(U.H):{},U.m?(U.u||(U.u="POST"),x["Content-Type"]="application/x-www-form-urlencoded",U.g.ea(U.A,U.u,U.m,x)):(U.u="GET",U.g.ea(U.A,U.u,null,x)),mg(),cW(U.i,U.u,U.A,U.l,U.R,U.m)}fl.prototype.ca=function(U){U=U.target;const x=this.M;x&&Jo(U)==3?x.j():this.Y(U)},fl.prototype.Y=function(U){try{if(U==this.g)e:{const Ci=Jo(this.g);var x=this.g.Ba();const zd=this.g.Z();if(!(3>Ci)&&(Ci!=3||this.g&&(this.h.h||this.g.oa()||ZT(this.g)))){this.J||Ci!=4||x==7||(x==8||0>=zd?mg(3):mg(2)),my(this);var O=this.g.Z();this.X=O;t:if(MT(this)){var B=ZT(this.g);U="";var W=B.length,J=Jo(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Gc(this),bg(this);var de="";break t}this.h.i=new a.TextDecoder}for(x=0;x<W;x++)this.h.h=!0,U+=this.h.i.decode(B[x],{stream:!(J&&x==W-1)});B.length=0,this.h.g+=U,this.C=0,de=this.h.g}else de=this.g.oa();if(this.o=O==200,uW(this.i,this.u,this.A,this.l,this.R,Ci,O),this.o){if(this.T&&!this.K){t:{if(this.g){var Ot,hi=this.g;if((Ot=hi.g?hi.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(Ot)){var Ut=Ot;break t}}Ut=null}if(O=Ut)Pd(this.i,this.l,O,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,py(this,O);else{this.o=!1,this.s=3,Gi(12),Gc(this),bg(this);break e}}if(this.P){O=!0;let _s;for(;!this.J&&this.C<de.length;)if(_s=hW(this,de),_s==hy){Ci==4&&(this.s=4,Gi(14),O=!1),Pd(this.i,this.l,null,"[Incomplete Response]");break}else if(_s==CT){this.s=4,Gi(15),Pd(this.i,this.l,de,"[Invalid Chunk]"),O=!1;break}else Pd(this.i,this.l,_s,null),py(this,_s);if(MT(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ci!=4||de.length!=0||this.h.h||(this.s=1,Gi(16),O=!1),this.o=this.o&&O,!O)Pd(this.i,this.l,de,"[Invalid Chunked Response]"),Gc(this),bg(this);else if(0<de.length&&!this.W){this.W=!0;var xi=this.j;xi.g==this&&xi.ba&&!xi.M&&(xi.j.info("Great, no buffering proxy detected. Bytes received: "+de.length),_y(xi),xi.M=!0,Gi(11))}}else Pd(this.i,this.l,de,null),py(this,de);Ci==4&&Gc(this),this.o&&!this.J&&(Ci==4?iS(this.j,this):(this.o=!1,hp(this)))}else MW(this.g),O==400&&0<de.indexOf("Unknown SID")?(this.s=3,Gi(12)):(this.s=0,Gi(13)),Gc(this),bg(this)}}}catch{}finally{}};function MT(U){return U.g?U.u=="GET"&&U.L!=2&&U.j.Ca:!1}function hW(U,x){var O=U.C,B=x.indexOf(`
`,O);return B==-1?hy:(O=Number(x.substring(O,B)),isNaN(O)?CT:(B+=1,B+O>x.length?hy:(x=x.slice(B,B+O),U.C=B+O,x)))}fl.prototype.cancel=function(){this.J=!0,Gc(this)};function hp(U){U.S=Date.now()+U.I,RT(U,U.I)}function RT(U,x){if(U.B!=null)throw Error("WatchDog timer not null");U.B=pg(f(U.ba,U),x)}function my(U){U.B&&(a.clearTimeout(U.B),U.B=null)}fl.prototype.ba=function(){this.B=null;const U=Date.now();0<=U-this.S?(dW(this.i,this.A),this.L!=2&&(mg(),Gi(17)),Gc(this),this.s=2,bg(this)):RT(this,this.S-U)};function bg(U){U.j.G==0||U.J||iS(U.j,U)}function Gc(U){my(U);var x=U.M;x&&typeof x.ma=="function"&&x.ma(),U.M=null,yT(U.U),U.g&&(x=U.g,U.g=null,x.abort(),x.ma())}function py(U,x){try{var O=U.j;if(O.G!=0&&(O.g==U||Uy(O.h,U))){if(!U.K&&Uy(O.h,U)&&O.G==3){try{var B=O.Da.g.parse(x)}catch{B=null}if(Array.isArray(B)&&B.length==3){var W=B;if(W[0]==0){e:if(!O.u){if(O.g)if(O.g.F+3e3<U.F)_p(O),Ep(O);else break e;vy(O),Gi(18)}}else O.za=W[1],0<O.za-O.T&&37500>W[2]&&O.F&&O.v==0&&!O.C&&(O.C=pg(f(O.Za,O),6e3));if(1>=DT(O.h)&&O.ca){try{O.ca()}catch{}O.ca=void 0}}else jc(O,11)}else if((U.K||O.g==U)&&_p(O),!y(x))for(W=O.Da.g.parse(x),x=0;x<W.length;x++){let Ut=W[x];if(O.T=Ut[0],Ut=Ut[1],O.G==2)if(Ut[0]=="c"){O.K=Ut[1],O.ia=Ut[2];const xi=Ut[3];xi!=null&&(O.la=xi,O.j.info("VER="+O.la));const Ci=Ut[4];Ci!=null&&(O.Aa=Ci,O.j.info("SVER="+O.Aa));const zd=Ut[5];zd!=null&&typeof zd=="number"&&0<zd&&(B=1.5*zd,O.L=B,O.j.info("backChannelRequestTimeoutMs_="+B)),B=O;const _s=U.g;if(_s){const Tp=_s.g?_s.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Tp){var J=B.h;J.g||Tp.indexOf("spdy")==-1&&Tp.indexOf("quic")==-1&&Tp.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(by(J,J.h),J.h=null))}if(B.D){const wy=_s.g?_s.g.getResponseHeader("X-HTTP-Session-Id"):null;wy&&(B.ya=wy,Wt(B.I,B.D,wy))}}O.G=3,O.l&&O.l.ua(),O.ba&&(O.R=Date.now()-U.F,O.j.info("Handshake RTT: "+O.R+"ms")),B=O;var de=U;if(B.qa=oS(B,B.J?B.ia:null,B.W),de.K){NT(B.h,de);var Ot=de,hi=B.L;hi&&(Ot.I=hi),Ot.B&&(my(Ot),hp(Ot)),B.g=de}else tS(B);0<O.i.length&&vp(O)}else Ut[0]!="stop"&&Ut[0]!="close"||jc(O,7);else O.G==3&&(Ut[0]=="stop"||Ut[0]=="close"?Ut[0]=="stop"?jc(O,7):Ey(O):Ut[0]!="noop"&&O.l&&O.l.ta(Ut),O.v=0)}}mg(4)}catch{}}var gW=class{constructor(U,x){this.g=U,this.map=x}};function kT(U){this.l=U||10,a.PerformanceNavigationTiming?(U=a.performance.getEntriesByType("navigation"),U=0<U.length&&(U[0].nextHopProtocol=="hq"||U[0].nextHopProtocol=="h2")):U=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=U?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function LT(U){return U.h?!0:U.g?U.g.size>=U.j:!1}function DT(U){return U.h?1:U.g?U.g.size:0}function Uy(U,x){return U.h?U.h==x:U.g?U.g.has(x):!1}function by(U,x){U.g?U.g.add(x):U.h=x}function NT(U,x){U.h&&U.h==x?U.h=null:U.g&&U.g.has(x)&&U.g.delete(x)}kT.prototype.cancel=function(){if(this.i=OT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const U of this.g.values())U.cancel();this.g.clear()}};function OT(U){if(U.h!=null)return U.i.concat(U.h.D);if(U.g!=null&&U.g.size!==0){let x=U.i;for(const O of U.g.values())x=x.concat(O.D);return x}return p(U.i)}function mW(U){if(U.V&&typeof U.V=="function")return U.V();if(typeof Map<"u"&&U instanceof Map||typeof Set<"u"&&U instanceof Set)return Array.from(U.values());if(typeof U=="string")return U.split("");if(l(U)){for(var x=[],O=U.length,B=0;B<O;B++)x.push(U[B]);return x}x=[],O=0;for(B in U)x[O++]=U[B];return x}function pW(U){if(U.na&&typeof U.na=="function")return U.na();if(!U.V||typeof U.V!="function"){if(typeof Map<"u"&&U instanceof Map)return Array.from(U.keys());if(!(typeof Set<"u"&&U instanceof Set)){if(l(U)||typeof U=="string"){var x=[];U=U.length;for(var O=0;O<U;O++)x.push(O);return x}x=[],O=0;for(const B in U)x[O++]=B;return x}}}function PT(U,x){if(U.forEach&&typeof U.forEach=="function")U.forEach(x,void 0);else if(l(U)||typeof U=="string")Array.prototype.forEach.call(U,x,void 0);else for(var O=pW(U),B=mW(U),W=B.length,J=0;J<W;J++)x.call(void 0,B[J],O&&O[J],U)}var FT=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function UW(U,x){if(U){U=U.split("&");for(var O=0;O<U.length;O++){var B=U[O].indexOf("="),W=null;if(0<=B){var J=U[O].substring(0,B);W=U[O].substring(B+1)}else J=U[O];x(J,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function Xc(U){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,U instanceof Xc){this.h=U.h,gp(this,U.j),this.o=U.o,this.g=U.g,mp(this,U.s),this.l=U.l;var x=U.i,O=new vg;O.i=x.i,x.g&&(O.g=new Map(x.g),O.h=x.h),BT(this,O),this.m=U.m}else U&&(x=String(U).match(FT))?(this.h=!1,gp(this,x[1]||"",!0),this.o=yg(x[2]||""),this.g=yg(x[3]||"",!0),mp(this,x[4]),this.l=yg(x[5]||"",!0),BT(this,x[6]||"",!0),this.m=yg(x[7]||"")):(this.h=!1,this.i=new vg(null,this.h))}Xc.prototype.toString=function(){var U=[],x=this.j;x&&U.push(Eg(x,zT,!0),":");var O=this.g;return(O||x=="file")&&(U.push("//"),(x=this.o)&&U.push(Eg(x,zT,!0),"@"),U.push(encodeURIComponent(String(O)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),O=this.s,O!=null&&U.push(":",String(O))),(O=this.l)&&(this.g&&O.charAt(0)!="/"&&U.push("/"),U.push(Eg(O,O.charAt(0)=="/"?EW:yW,!0))),(O=this.i.toString())&&U.push("?",O),(O=this.m)&&U.push("#",Eg(O,_W)),U.join("")};function Qo(U){return new Xc(U)}function gp(U,x,O){U.j=O?yg(x,!0):x,U.j&&(U.j=U.j.replace(/:$/,""))}function mp(U,x){if(x){if(x=Number(x),isNaN(x)||0>x)throw Error("Bad port number "+x);U.s=x}else U.s=null}function BT(U,x,O){x instanceof vg?(U.i=x,wW(U.i,U.h)):(O||(x=Eg(x,vW)),U.i=new vg(x,U.h))}function Wt(U,x,O){U.i.set(x,O)}function pp(U){return Wt(U,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),U}function yg(U,x){return U?x?decodeURI(U.replace(/%25/g,"%2525")):decodeURIComponent(U):""}function Eg(U,x,O){return typeof U=="string"?(U=encodeURI(U).replace(x,bW),O&&(U=U.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),U):null}function bW(U){return U=U.charCodeAt(0),"%"+(U>>4&15).toString(16)+(U&15).toString(16)}var zT=/[#\/\?@]/g,yW=/[#\?:]/g,EW=/[#\?]/g,vW=/[#\?@]/g,_W=/#/g;function vg(U,x){this.h=this.g=null,this.i=U||null,this.j=!!x}function hl(U){U.g||(U.g=new Map,U.h=0,U.i&&UW(U.i,function(x,O){U.add(decodeURIComponent(x.replace(/\+/g," ")),O)}))}e=vg.prototype,e.add=function(U,x){hl(this),this.i=null,U=Fd(this,U);var O=this.g.get(U);return O||this.g.set(U,O=[]),O.push(x),this.h+=1,this};function HT(U,x){hl(U),x=Fd(U,x),U.g.has(x)&&(U.i=null,U.h-=U.g.get(x).length,U.g.delete(x))}function VT(U,x){return hl(U),x=Fd(U,x),U.g.has(x)}e.forEach=function(U,x){hl(this),this.g.forEach(function(O,B){O.forEach(function(W){U.call(x,W,B,this)},this)},this)},e.na=function(){hl(this);const U=Array.from(this.g.values()),x=Array.from(this.g.keys()),O=[];for(let B=0;B<x.length;B++){const W=U[B];for(let J=0;J<W.length;J++)O.push(x[B])}return O},e.V=function(U){hl(this);let x=[];if(typeof U=="string")VT(this,U)&&(x=x.concat(this.g.get(Fd(this,U))));else{U=Array.from(this.g.values());for(let O=0;O<U.length;O++)x=x.concat(U[O])}return x},e.set=function(U,x){return hl(this),this.i=null,U=Fd(this,U),VT(this,U)&&(this.h-=this.g.get(U).length),this.g.set(U,[x]),this.h+=1,this},e.get=function(U,x){return U?(U=this.V(U),0<U.length?String(U[0]):x):x};function $T(U,x,O){HT(U,x),0<O.length&&(U.i=null,U.g.set(Fd(U,x),p(O)),U.h+=O.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const U=[],x=Array.from(this.g.keys());for(var O=0;O<x.length;O++){var B=x[O];const J=encodeURIComponent(String(B)),de=this.V(B);for(B=0;B<de.length;B++){var W=J;de[B]!==""&&(W+="="+encodeURIComponent(String(de[B]))),U.push(W)}}return this.i=U.join("&")};function Fd(U,x){return x=String(x),U.j&&(x=x.toLowerCase()),x}function wW(U,x){x&&!U.j&&(hl(U),U.i=null,U.g.forEach(function(O,B){var W=B.toLowerCase();B!=W&&(HT(this,B),$T(this,W,O))},U)),U.j=x}function TW(U,x){const O=new Ug;if(a.Image){const B=new Image;B.onload=h(gl,O,"TestLoadImage: loaded",!0,x,B),B.onerror=h(gl,O,"TestLoadImage: error",!1,x,B),B.onabort=h(gl,O,"TestLoadImage: abort",!1,x,B),B.ontimeout=h(gl,O,"TestLoadImage: timeout",!1,x,B),a.setTimeout(function(){B.ontimeout&&B.ontimeout()},1e4),B.src=U}else x(!1)}function SW(U,x){const O=new Ug,B=new AbortController,W=setTimeout(()=>{B.abort(),gl(O,"TestPingServer: timeout",!1,x)},1e4);fetch(U,{signal:B.signal}).then(J=>{clearTimeout(W),J.ok?gl(O,"TestPingServer: ok",!0,x):gl(O,"TestPingServer: server error",!1,x)}).catch(()=>{clearTimeout(W),gl(O,"TestPingServer: error",!1,x)})}function gl(U,x,O,B,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),B(O)}catch{}}function IW(){this.g=new lW}function xW(U,x,O){const B=O||"";try{PT(U,function(W,J){let de=W;c(W)&&(de=ly(W)),x.push(B+J+"="+encodeURIComponent(de))})}catch(W){throw x.push(B+"type="+encodeURIComponent("_badmap")),W}}function Up(U){this.l=U.Ub||null,this.j=U.eb||!1}m(Up,cy),Up.prototype.g=function(){return new bp(this.l,this.j)},Up.prototype.i=function(U){return function(){return U}}({});function bp(U,x){Ii.call(this),this.D=U,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}m(bp,Ii),e=bp.prototype,e.open=function(U,x){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=U,this.A=x,this.readyState=1,wg(this)},e.send=function(U){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const x={headers:this.u,method:this.B,credentials:this.m,cache:void 0};U&&(x.body=U),(this.D||a).fetch(new Request(this.A,x)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,_g(this)),this.readyState=0},e.Sa=function(U){if(this.g&&(this.l=U,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=U.headers,this.readyState=2,wg(this)),this.g&&(this.readyState=3,wg(this),this.g)))if(this.responseType==="arraybuffer")U.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in U){if(this.j=U.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;GT(this)}else U.text().then(this.Ra.bind(this),this.ga.bind(this))};function GT(U){U.j.read().then(U.Pa.bind(U)).catch(U.ga.bind(U))}e.Pa=function(U){if(this.g){if(this.o&&U.value)this.response.push(U.value);else if(!this.o){var x=U.value?U.value:new Uint8Array(0);(x=this.v.decode(x,{stream:!U.done}))&&(this.response=this.responseText+=x)}U.done?_g(this):wg(this),this.readyState==3&&GT(this)}},e.Ra=function(U){this.g&&(this.response=this.responseText=U,_g(this))},e.Qa=function(U){this.g&&(this.response=U,_g(this))},e.ga=function(){this.g&&_g(this)};function _g(U){U.readyState=4,U.l=null,U.j=null,U.v=null,wg(U)}e.setRequestHeader=function(U,x){this.u.append(U,x)},e.getResponseHeader=function(U){return this.h&&this.h.get(U.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const U=[],x=this.h.entries();for(var O=x.next();!O.done;)O=O.value,U.push(O[0]+": "+O[1]),O=x.next();return U.join(`\r
`)};function wg(U){U.onreadystatechange&&U.onreadystatechange.call(U)}Object.defineProperty(bp.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(U){this.m=U?"include":"same-origin"}});function XT(U){let x="";return M(U,function(O,B){x+=B,x+=":",x+=O,x+=`\r
`}),x}function yy(U,x,O){e:{for(B in O){var B=!1;break e}B=!0}B||(O=XT(O),typeof U=="string"?O!=null&&encodeURIComponent(String(O)):Wt(U,x,O))}function mn(U){Ii.call(this),this.headers=new Map,this.o=U||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}m(mn,Ii);var CW=/^https?$/i,AW=["POST","PUT"];e=mn.prototype,e.Ha=function(U){this.J=U},e.ea=function(U,x,O,B){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+U);x=x?x.toUpperCase():"GET",this.D=U,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():fy.g(),this.v=this.o?ET(this.o):ET(fy),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(x,String(U),!0),this.B=!1}catch(J){jT(this,J);return}if(U=O||"",O=new Map(this.headers),B)if(Object.getPrototypeOf(B)===Object.prototype)for(var W in B)O.set(W,B[W]);else if(typeof B.keys=="function"&&typeof B.get=="function")for(const J of B.keys())O.set(J,B.get(J));else throw Error("Unknown input type for opt_headers: "+String(B));B=Array.from(O.keys()).find(J=>J.toLowerCase()=="content-type"),W=a.FormData&&U instanceof a.FormData,!(0<=Array.prototype.indexOf.call(AW,x,void 0))||B||W||O.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,de]of O)this.g.setRequestHeader(J,de);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{KT(this),this.u=!0,this.g.send(U),this.u=!1}catch(J){jT(this,J)}};function jT(U,x){U.h=!1,U.g&&(U.j=!0,U.g.abort(),U.j=!1),U.l=x,U.m=5,YT(U),yp(U)}function YT(U){U.A||(U.A=!0,$i(U,"complete"),$i(U,"error"))}e.abort=function(U){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=U||7,$i(this,"complete"),$i(this,"abort"),yp(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),yp(this,!0)),mn.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?WT(this):this.bb())},e.bb=function(){WT(this)};function WT(U){if(U.h&&typeof o<"u"&&(!U.v[1]||Jo(U)!=4||U.Z()!=2)){if(U.u&&Jo(U)==4)pT(U.Ea,0,U);else if($i(U,"readystatechange"),Jo(U)==4){U.h=!1;try{const de=U.Z();e:switch(de){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var O;if(!(O=x)){var B;if(B=de===0){var W=String(U.D).match(FT)[1]||null;!W&&a.self&&a.self.location&&(W=a.self.location.protocol.slice(0,-1)),B=!CW.test(W?W.toLowerCase():"")}O=B}if(O)$i(U,"complete"),$i(U,"success");else{U.m=6;try{var J=2<Jo(U)?U.g.statusText:""}catch{J=""}U.l=J+" ["+U.Z()+"]",YT(U)}}finally{yp(U)}}}}function yp(U,x){if(U.g){KT(U);const O=U.g,B=U.v[0]?()=>{}:null;U.g=null,U.v=null,x||$i(U,"ready");try{O.onreadystatechange=B}catch{}}}function KT(U){U.I&&(a.clearTimeout(U.I),U.I=null)}e.isActive=function(){return!!this.g};function Jo(U){return U.g?U.g.readyState:0}e.Z=function(){try{return 2<Jo(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(U){if(this.g){var x=this.g.responseText;return U&&x.indexOf(U)==0&&(x=x.substring(U.length)),aW(x)}};function ZT(U){try{if(!U.g)return null;if("response"in U.g)return U.g.response;switch(U.H){case"":case"text":return U.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in U.g)return U.g.mozResponseArrayBuffer}return null}catch{return null}}function MW(U){const x={};U=(U.g&&2<=Jo(U)&&U.g.getAllResponseHeaders()||"").split(`\r
`);for(let B=0;B<U.length;B++){if(y(U[B]))continue;var O=R(U[B]);const W=O[0];if(O=O[1],typeof O!="string")continue;O=O.trim();const J=x[W]||[];x[W]=J,J.push(O)}w(x,function(B){return B.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Tg(U,x,O){return O&&O.internalChannelParams&&O.internalChannelParams[U]||x}function qT(U){this.Aa=0,this.i=[],this.j=new Ug,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Tg("failFast",!1,U),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Tg("baseRetryDelayMs",5e3,U),this.cb=Tg("retryDelaySeedMs",1e4,U),this.Wa=Tg("forwardChannelMaxRetries",2,U),this.wa=Tg("forwardChannelRequestTimeoutMs",2e4,U),this.pa=U&&U.xmlHttpFactory||void 0,this.Xa=U&&U.Tb||void 0,this.Ca=U&&U.useFetchStreams||!1,this.L=void 0,this.J=U&&U.supportsCrossDomainXhr||!1,this.K="",this.h=new kT(U&&U.concurrentRequestLimit),this.Da=new IW,this.P=U&&U.fastHandshake||!1,this.O=U&&U.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=U&&U.Rb||!1,U&&U.xa&&this.j.xa(),U&&U.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&U&&U.detectBufferingProxy||!1,this.ja=void 0,U&&U.longPollingTimeout&&0<U.longPollingTimeout&&(this.ja=U.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=qT.prototype,e.la=8,e.G=1,e.connect=function(U,x,O,B){Gi(0),this.W=U,this.H=x||{},O&&B!==void 0&&(this.H.OSID=O,this.H.OAID=B),this.F=this.X,this.I=oS(this,null,this.W),vp(this)};function Ey(U){if(QT(U),U.G==3){var x=U.U++,O=Qo(U.I);if(Wt(O,"SID",U.K),Wt(O,"RID",x),Wt(O,"TYPE","terminate"),Sg(U,O),x=new fl(U,U.j,x),x.L=2,x.v=pp(Qo(O)),O=!1,a.navigator&&a.navigator.sendBeacon)try{O=a.navigator.sendBeacon(x.v.toString(),"")}catch{}!O&&a.Image&&(new Image().src=x.v,O=!0),O||(x.g=aS(x.j,null),x.g.ea(x.v)),x.F=Date.now(),hp(x)}sS(U)}function Ep(U){U.g&&(_y(U),U.g.cancel(),U.g=null)}function QT(U){Ep(U),U.u&&(a.clearTimeout(U.u),U.u=null),_p(U),U.h.cancel(),U.s&&(typeof U.s=="number"&&a.clearTimeout(U.s),U.s=null)}function vp(U){if(!LT(U.h)&&!U.s){U.s=!0;var x=U.Ga;$||K(),j||($(),j=!0),X.add(x,U),U.B=0}}function RW(U,x){return DT(U.h)>=U.h.j-(U.s?1:0)?!1:U.s?(U.i=x.D.concat(U.i),!0):U.G==1||U.G==2||U.B>=(U.Va?0:U.Wa)?!1:(U.s=pg(f(U.Ga,U,x),rS(U,U.B)),U.B++,!0)}e.Ga=function(U){if(this.s)if(this.s=null,this.G==1){if(!U){this.U=Math.floor(1e5*Math.random()),U=this.U++;const W=new fl(this,this.j,U);let J=this.o;if(this.S&&(J?(J=T(J),I(J,this.S)):J=this.S),this.m!==null||this.O||(W.H=J,J=null),this.P)e:{for(var x=0,O=0;O<this.i.length;O++){t:{var B=this.i[O];if("__data__"in B.map&&(B=B.map.__data__,typeof B=="string")){B=B.length;break t}B=void 0}if(B===void 0)break;if(x+=B,4096<x){x=O;break e}if(x===4096||O===this.i.length-1){x=O+1;break e}}x=1e3}else x=1e3;x=eS(this,W,x),O=Qo(this.I),Wt(O,"RID",U),Wt(O,"CVER",22),this.D&&Wt(O,"X-HTTP-Session-Id",this.D),Sg(this,O),J&&(this.O?x="headers="+encodeURIComponent(String(XT(J)))+"&"+x:this.m&&yy(O,this.m,J)),by(this.h,W),this.Ua&&Wt(O,"TYPE","init"),this.P?(Wt(O,"$req",x),Wt(O,"SID","null"),W.T=!0,gy(W,O,null)):gy(W,O,x),this.G=2}}else this.G==3&&(U?JT(this,U):this.i.length==0||LT(this.h)||JT(this))};function JT(U,x){var O;x?O=x.l:O=U.U++;const B=Qo(U.I);Wt(B,"SID",U.K),Wt(B,"RID",O),Wt(B,"AID",U.T),Sg(U,B),U.m&&U.o&&yy(B,U.m,U.o),O=new fl(U,U.j,O,U.B+1),U.m===null&&(O.H=U.o),x&&(U.i=x.D.concat(U.i)),x=eS(U,O,1e3),O.I=Math.round(.5*U.wa)+Math.round(.5*U.wa*Math.random()),by(U.h,O),gy(O,B,x)}function Sg(U,x){U.H&&M(U.H,function(O,B){Wt(x,B,O)}),U.l&&PT({},function(O,B){Wt(x,B,O)})}function eS(U,x,O){O=Math.min(U.i.length,O);var B=U.l?f(U.l.Na,U.l,U):null;e:{var W=U.i;let J=-1;for(;;){const de=["count="+O];J==-1?0<O?(J=W[0].g,de.push("ofs="+J)):J=0:de.push("ofs="+J);let Ot=!0;for(let hi=0;hi<O;hi++){let Ut=W[hi].g;const xi=W[hi].map;if(Ut-=J,0>Ut)J=Math.max(0,W[hi].g-100),Ot=!1;else try{xW(xi,de,"req"+Ut+"_")}catch{B&&B(xi)}}if(Ot){B=de.join("&");break e}}}return U=U.i.splice(0,O),x.D=U,B}function tS(U){if(!U.g&&!U.u){U.Y=1;var x=U.Fa;$||K(),j||($(),j=!0),X.add(x,U),U.v=0}}function vy(U){return U.g||U.u||3<=U.v?!1:(U.Y++,U.u=pg(f(U.Fa,U),rS(U,U.v)),U.v++,!0)}e.Fa=function(){if(this.u=null,nS(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var U=2*this.R;this.j.info("BP detection timer enabled: "+U),this.A=pg(f(this.ab,this),U)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Gi(10),Ep(this),nS(this))};function _y(U){U.A!=null&&(a.clearTimeout(U.A),U.A=null)}function nS(U){U.g=new fl(U,U.j,"rpc",U.Y),U.m===null&&(U.g.H=U.o),U.g.O=0;var x=Qo(U.qa);Wt(x,"RID","rpc"),Wt(x,"SID",U.K),Wt(x,"AID",U.T),Wt(x,"CI",U.F?"0":"1"),!U.F&&U.ja&&Wt(x,"TO",U.ja),Wt(x,"TYPE","xmlhttp"),Sg(U,x),U.m&&U.o&&yy(x,U.m,U.o),U.L&&(U.g.I=U.L);var O=U.g;U=U.ia,O.L=1,O.v=pp(Qo(x)),O.m=null,O.P=!0,AT(O,U)}e.Za=function(){this.C!=null&&(this.C=null,Ep(this),vy(this),Gi(19))};function _p(U){U.C!=null&&(a.clearTimeout(U.C),U.C=null)}function iS(U,x){var O=null;if(U.g==x){_p(U),_y(U),U.g=null;var B=2}else if(Uy(U.h,x))O=x.D,NT(U.h,x),B=1;else return;if(U.G!=0){if(x.o)if(B==1){O=x.m?x.m.length:0,x=Date.now()-x.F;var W=U.B;B=up(),$i(B,new ST(B,O)),vp(U)}else tS(U);else if(W=x.s,W==3||W==0&&0<x.X||!(B==1&&RW(U,x)||B==2&&vy(U)))switch(O&&0<O.length&&(x=U.h,x.i=x.i.concat(O)),W){case 1:jc(U,5);break;case 4:jc(U,10);break;case 3:jc(U,6);break;default:jc(U,2)}}}function rS(U,x){let O=U.Ta+Math.floor(Math.random()*U.cb);return U.isActive()||(O*=2),O*x}function jc(U,x){if(U.j.info("Error code "+x),x==2){var O=f(U.fb,U),B=U.Xa;const W=!B;B=new Xc(B||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||gp(B,"https"),pp(B),W?TW(B.toString(),O):SW(B.toString(),O)}else Gi(2);U.G=0,U.l&&U.l.sa(x),sS(U),QT(U)}e.fb=function(U){U?(this.j.info("Successfully pinged google.com"),Gi(2)):(this.j.info("Failed to ping google.com"),Gi(1))};function sS(U){if(U.G=0,U.ka=[],U.l){const x=OT(U.h);(x.length!=0||U.i.length!=0)&&(b(U.ka,x),b(U.ka,U.i),U.h.i.length=0,p(U.i),U.i.length=0),U.l.ra()}}function oS(U,x,O){var B=O instanceof Xc?Qo(O):new Xc(O);if(B.g!="")x&&(B.g=x+"."+B.g),mp(B,B.s);else{var W=a.location;B=W.protocol,x=x?x+"."+W.hostname:W.hostname,W=+W.port;var J=new Xc(null);B&&gp(J,B),x&&(J.g=x),W&&mp(J,W),O&&(J.l=O),B=J}return O=U.D,x=U.ya,O&&x&&Wt(B,O,x),Wt(B,"VER",U.la),Sg(U,B),B}function aS(U,x,O){if(x&&!U.J)throw Error("Can't create secondary domain capable XhrIo object.");return x=U.Ca&&!U.pa?new mn(new Up({eb:O})):new mn(U.pa),x.Ha(U.J),x}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function lS(){}e=lS.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function wp(){}wp.prototype.g=function(U,x){return new _r(U,x)};function _r(U,x){Ii.call(this),this.g=new qT(x),this.l=U,this.h=x&&x.messageUrlParams||null,U=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(U?U["X-Client-Protocol"]="webchannel":U={"X-Client-Protocol":"webchannel"}),this.g.o=U,U=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(U?U["X-WebChannel-Content-Type"]=x.messageContentType:U={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.va&&(U?U["X-WebChannel-Client-Profile"]=x.va:U={"X-WebChannel-Client-Profile":x.va}),this.g.S=U,(U=x&&x.Sb)&&!y(U)&&(this.g.m=U),this.v=x&&x.supportsCrossDomainXhr||!1,this.u=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!y(x)&&(this.g.D=x,U=this.h,U!==null&&x in U&&(U=this.h,x in U&&delete U[x])),this.j=new Bd(this)}m(_r,Ii),_r.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_r.prototype.close=function(){Ey(this.g)},_r.prototype.o=function(U){var x=this.g;if(typeof U=="string"){var O={};O.__data__=U,U=O}else this.u&&(O={},O.__data__=ly(U),U=O);x.i.push(new gW(x.Ya++,U)),x.G==3&&vp(x)},_r.prototype.N=function(){this.g.l=null,delete this.j,Ey(this.g),delete this.g,_r.aa.N.call(this)};function cS(U){uy.call(this),U.__headers__&&(this.headers=U.__headers__,this.statusCode=U.__status__,delete U.__headers__,delete U.__status__);var x=U.__sm__;if(x){e:{for(const O in x){U=O;break e}U=void 0}(this.i=U)&&(U=this.i,x=x!==null&&U in x?x[U]:void 0),this.data=x}else this.data=U}m(cS,uy);function uS(){dy.call(this),this.status=1}m(uS,dy);function Bd(U){this.g=U}m(Bd,lS),Bd.prototype.ua=function(){$i(this.g,"a")},Bd.prototype.ta=function(U){$i(this.g,new cS(U))},Bd.prototype.sa=function(U){$i(this.g,new uS)},Bd.prototype.ra=function(){$i(this.g,"b")},wp.prototype.createWebChannel=wp.prototype.g,_r.prototype.send=_r.prototype.o,_r.prototype.open=_r.prototype.m,_r.prototype.close=_r.prototype.close,hj=function(){return new wp},fj=function(){return up()},dj=$c,S4={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},dp.NO_ERROR=0,dp.TIMEOUT=8,dp.HTTP_ERROR=6,p2=dp,IT.COMPLETE="complete",uj=IT,vT.EventType=gg,gg.OPEN="a",gg.CLOSE="b",gg.ERROR="c",gg.MESSAGE="d",Ii.prototype.listen=Ii.prototype.K,E1=vT,mn.prototype.listenOnce=mn.prototype.L,mn.prototype.getLastError=mn.prototype.Ka,mn.prototype.getLastErrorCode=mn.prototype.Ba,mn.prototype.getStatus=mn.prototype.Z,mn.prototype.getResponseJson=mn.prototype.Oa,mn.prototype.getResponseText=mn.prototype.oa,mn.prototype.send=mn.prototype.ea,mn.prototype.setWithCredentials=mn.prototype.Ha,cj=mn}).apply(typeof vU<"u"?vU:typeof self<"u"?self:typeof window<"u"?window:{});const pk="@firebase/firestore",Uk="4.7.8";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Di.UNAUTHENTICATED=new Di(null),Di.GOOGLE_CREDENTIALS=new Di("google-credentials-uid"),Di.FIRST_PARTY=new Di("first-party-uid"),Di.MOCK_USER=new Di("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cg="11.3.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const md=new QX("@firebase/firestore");function cf(){return md.logLevel}function Ee(e,...t){if(md.logLevel<=lt.DEBUG){const n=t.map(Cw);md.debug(`Firestore (${cg}): ${e}`,...n)}}function sl(e,...t){if(md.logLevel<=lt.ERROR){const n=t.map(Cw);md.error(`Firestore (${cg}): ${e}`,...n)}}function Nh(e,...t){if(md.logLevel<=lt.WARN){const n=t.map(Cw);md.warn(`Firestore (${cg}): ${e}`,...n)}}function Cw(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(e="Unexpected state"){const t=`FIRESTORE (${cg}) INTERNAL ASSERTION FAILED: `+e;throw sl(t),new Error(t)}function Bt(e,t){e||Me()}function et(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Te extends kd{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class hve{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Di.UNAUTHENTICATED))}shutdown(){}}class gve{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class mve{constructor(t){this.t=t,this.currentUser=Di.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Bt(this.o===void 0);let i=this.i;const r=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let s=new dc;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new dc,t.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=s;t.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{Ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new dc)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==t?(Ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Bt(typeof i.accessToken=="string"),new gj(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Bt(t===null||typeof t=="string"),new Di(t)}}class pve{constructor(t,n,i){this.l=t,this.h=n,this.P=i,this.type="FirstParty",this.user=Di.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class Uve{constructor(t,n,i){this.l=t,this.h=n,this.P=i}getToken(){return Promise.resolve(new pve(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(Di.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class bk{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class bve{constructor(t,n){this.A=n,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,nj(t)&&t.settings.appCheckToken&&(this.V=t.settings.appCheckToken)}start(t,n){Bt(this.o===void 0);const i=s=>{s.error!=null&&Ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Ee("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};const r=s=>{Ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):Ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new bk(this.V));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Bt(typeof n.token=="string"),this.R=n.token,new bk(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yve(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=yve(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=t.charAt(r[s]%62))}return i}}function ut(e,t){return e<t?-1:e>t?1:0}function Oh(e,t,n){return e.length===t.length&&e.every((i,r)=>n(i,t[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yk=-62135596800,Ek=1e6;class di{static now(){return di.fromMillis(Date.now())}static fromDate(t){return di.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),i=Math.floor((t-1e3*n)*Ek);return new di(n,i)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Te(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Te(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<yk)throw new Te(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Te(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ek}_compareTo(t){return this.seconds===t.seconds?ut(this.nanoseconds,t.nanoseconds):ut(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-yk;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{static fromTimestamp(t){return new De(t)}static min(){return new De(new di(0,0))}static max(){return new De(new di(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk="__name__";class wo{constructor(t,n,i){n===void 0?n=0:n>t.length&&Me(),i===void 0?i=t.length-n:i>t.length-n&&Me(),this.segments=t,this.offset=n,this.len=i}get length(){return this.len}isEqual(t){return wo.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof wo?t.forEach(i=>{n.push(i)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,i=this.limit();n<i;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const i=Math.min(t.length,n.length);for(let r=0;r<i;r++){const s=wo.compareSegments(t.get(r),n.get(r));if(s!==0)return s}return Math.sign(t.length-n.length)}static compareSegments(t,n){const i=wo.isNumericId(t),r=wo.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?wo.extractNumericId(t).compare(wo.extractNumericId(n)):t<n?-1:t>n?1:0}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return uc.fromString(t.substring(4,t.length-2))}}class an extends wo{construct(t,n,i){return new an(t,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const i of t){if(i.indexOf("//")>=0)throw new Te(re.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new an(n)}static emptyPath(){return new an([])}}const Eve=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pi extends wo{construct(t,n,i){return new Pi(t,n,i)}static isValidIdentifier(t){return Eve.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pi.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===vk}static keyField(){return new Pi([vk])}static fromServerFormat(t){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new Te(re.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let o=!1;for(;r<t.length;){const a=t[r];if(a==="\\"){if(r+1===t.length)throw new Te(re.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Te(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new Te(re.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Pi(n)}static emptyPath(){return new Pi([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(t){this.path=t}static fromPath(t){return new Re(an.fromString(t))}static fromName(t){return new Re(an.fromString(t).popFirst(5))}static empty(){return new Re(an.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&an.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return an.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Re(new an(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const um=-1;function vve(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,r=De.fromTimestamp(i===1e9?new di(n+1,0):new di(n,i));return new Ac(r,Re.empty(),t)}function _ve(e){return new Ac(e.readTime,e.key,um)}class Ac{constructor(t,n,i){this.readTime=t,this.documentKey=n,this.largestBatchId=i}static min(){return new Ac(De.min(),Re.empty(),um)}static max(){return new Ac(De.max(),Re.empty(),um)}}function wve(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Re.comparator(e.documentKey,t.documentKey),n!==0?n:ut(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tve="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Sve{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G5(e){if(e.code!==re.FAILED_PRECONDITION||e.message!==Tve)throw e;Ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Me(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new ie((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof ie?n:ie.resolve(n)}catch(n){return ie.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):ie.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):ie.reject(n)}static resolve(t){return new ie((n,i)=>{n(t)})}static reject(t){return new ie((n,i)=>{i(t)})}static waitFor(t){return new ie((n,i)=>{let r=0,s=0,o=!1;t.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&n()},l=>i(l))}),o=!0,s===r&&n()})}static or(t){let n=ie.resolve(!1);for(const i of t)n=n.next(r=>r?ie.resolve(r):i());return n}static forEach(t,n){const i=[];return t.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(t,n){return new ie((i,r)=>{const s=t.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(t[c]).next(u=>{o[c]=u,++a,a===s&&i(o)},u=>r(u))}})}static doWhile(t,n){return new ie((i,r)=>{const s=()=>{t()===!0?n().next(()=>{s()},r):i()};s()})}}function Ive(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ug(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X5{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=i=>this.oe(i),this._e=i=>n.writeSequenceNumber(i))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this._e&&this._e(t),t}}X5.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xve=-1;function rp(e){return e==null}function t6(e){return e===0&&1/e==-1/0}function Cve(e){return typeof e=="number"&&Number.isInteger(e)&&!t6(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pj="";function Ave(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=_k(t)),t=Mve(e.get(n),t);return _k(t)}function Mve(e,t){let n=t;const i=e.length;for(let r=0;r<i;r++){const s=e.charAt(r);switch(s){case"\0":n+="";break;case pj:n+="";break;default:n+=s}}return n}function _k(e){return e+pj+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wk(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ld(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Uj(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(t,n){this.comparator=t,this.root=n||bi.EMPTY}insert(t,n){return new Cn(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,bi.BLACK,null,null))}remove(t){return new Cn(this.comparator,this.root.remove(t,this.comparator).copy(null,null,bi.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(t){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,i)=>(t(n,i),!1))}toString(){const t=[];return this.inorderTraversal((n,i)=>(t.push(`${n}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new _U(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new _U(this.root,t,this.comparator,!1)}getReverseIterator(){return new _U(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new _U(this.root,t,this.comparator,!0)}}class _U{constructor(t,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?i(t.key,n):1,n&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class bi{constructor(t,n,i,r,s){this.key=t,this.value=n,this.color=i??bi.RED,this.left=r??bi.EMPTY,this.right=s??bi.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,i,r,s){return new bi(t??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let r=this;const s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(t,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return bi.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let i,r=this;if(n(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(t,r.key)===0){if(r.right.isEmpty())return bi.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,bi.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,bi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Me();const t=this.left.check();if(t!==this.right.check())throw Me();return t+(this.isRed()?0:1)}}bi.EMPTY=null,bi.RED=!0,bi.BLACK=!1;bi.EMPTY=new class{constructor(){this.size=0}get key(){throw Me()}get value(){throw Me()}get color(){throw Me()}get left(){throw Me()}get right(){throw Me()}copy(t,n,i,r,s){return this}insert(t,n,i){return new bi(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(t){this.comparator=t,this.data=new Cn(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,i)=>(t(n),!1))}forEachInRange(t,n){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;n(r.key)}}forEachWhile(t,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Tk(this.data.getIterator())}getIteratorFrom(t){return new Tk(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(i=>{n=n.add(i)}),n}isEqual(t){if(!(t instanceof Kn)||this.size!==t.size)return!1;const n=this.data.getIterator(),i=t.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Kn(this.comparator);return n.data=t,n}}class Tk{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(t){this.fields=t,t.sort(Pi.comparator)}static empty(){return new cs([])}unionWith(t){let n=new Kn(Pi.comparator);for(const i of this.fields)n=n.add(i);for(const i of t)n=n.add(i);return new cs(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Oh(this.fields,t.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new bj("Invalid base64 string: "+s):s}}(t);return new Si(n)}static fromUint8Array(t){const n=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(t);return new Si(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return ut(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Si.EMPTY_BYTE_STRING=new Si("");const Rve=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Mc(e){if(Bt(!!e),typeof e=="string"){let t=0;const n=Rve.exec(e);if(Bt(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Sn(e.seconds),nanos:Sn(e.nanos)}}function Sn(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Rc(e){return typeof e=="string"?Si.fromBase64String(e):Si.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yj="server_timestamp",Ej="__type__",vj="__previous_value__",_j="__local_write_time__";function Aw(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[Ej])===null||n===void 0?void 0:n.stringValue)===yj}function j5(e){const t=e.mapValue.fields[vj];return Aw(t)?j5(t):t}function dm(e){const t=Mc(e.mapValue.fields[_j].timestampValue);return new di(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kve{constructor(t,n,i,r,s,o,a,l,c){this.databaseId=t,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}const n6="(default)";class fm{constructor(t,n){this.projectId=t,this.database=n||n6}static empty(){return new fm("","")}get isDefaultDatabase(){return this.database===n6}isEqual(t){return t instanceof fm&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wj="__type__",Lve="__max__",wU={mapValue:{}},Tj="__vector__",i6="value";function kc(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Aw(e)?4:Nve(e)?9007199254740991:Dve(e)?10:11:Me()}function Go(e,t){if(e===t)return!0;const n=kc(e);if(n!==kc(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return dm(e).isEqual(dm(t));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const o=Mc(r.timestampValue),a=Mc(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(r,s){return Rc(r.bytesValue).isEqual(Rc(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(r,s){return Sn(r.geoPointValue.latitude)===Sn(s.geoPointValue.latitude)&&Sn(r.geoPointValue.longitude)===Sn(s.geoPointValue.longitude)}(e,t);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Sn(r.integerValue)===Sn(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const o=Sn(r.doubleValue),a=Sn(s.doubleValue);return o===a?t6(o)===t6(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return Oh(e.arrayValue.values||[],t.arrayValue.values||[],Go);case 10:case 11:return function(r,s){const o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(wk(o)!==wk(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Go(o[l],a[l])))return!1;return!0}(e,t);default:return Me()}}function hm(e,t){return(e.values||[]).find(n=>Go(n,t))!==void 0}function Ph(e,t){if(e===t)return 0;const n=kc(e),i=kc(t);if(n!==i)return ut(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return ut(e.booleanValue,t.booleanValue);case 2:return function(s,o){const a=Sn(s.integerValue||s.doubleValue),l=Sn(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(e,t);case 3:return Sk(e.timestampValue,t.timestampValue);case 4:return Sk(dm(e),dm(t));case 5:return ut(e.stringValue,t.stringValue);case 6:return function(s,o){const a=Rc(s),l=Rc(o);return a.compareTo(l)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=ut(a[c],l[c]);if(u!==0)return u}return ut(a.length,l.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const a=ut(Sn(s.latitude),Sn(o.latitude));return a!==0?a:ut(Sn(s.longitude),Sn(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Ik(e.arrayValue,t.arrayValue);case 10:return function(s,o){var a,l,c,u;const d=s.fields||{},f=o.fields||{},h=(a=d[i6])===null||a===void 0?void 0:a.arrayValue,m=(l=f[i6])===null||l===void 0?void 0:l.arrayValue,p=ut(((c=h==null?void 0:h.values)===null||c===void 0?void 0:c.length)||0,((u=m==null?void 0:m.values)===null||u===void 0?void 0:u.length)||0);return p!==0?p:Ik(h,m)}(e.mapValue,t.mapValue);case 11:return function(s,o){if(s===wU.mapValue&&o===wU.mapValue)return 0;if(s===wU.mapValue)return 1;if(o===wU.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let d=0;d<l.length&&d<u.length;++d){const f=ut(l[d],u[d]);if(f!==0)return f;const h=Ph(a[l[d]],c[u[d]]);if(h!==0)return h}return ut(l.length,u.length)}(e.mapValue,t.mapValue);default:throw Me()}}function Sk(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return ut(e,t);const n=Mc(e),i=Mc(t),r=ut(n.seconds,i.seconds);return r!==0?r:ut(n.nanos,i.nanos)}function Ik(e,t){const n=e.values||[],i=t.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=Ph(n[r],i[r]);if(s)return s}return ut(n.length,i.length)}function Fh(e){return I4(e)}function I4(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const i=Mc(n);return`time(${i.seconds},${i.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return Rc(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Re.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=I4(s);return i+"]"}(e.arrayValue):"mapValue"in e?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const o of i)s?s=!1:r+=",",r+=`${o}:${I4(n.fields[o])}`;return r+"}"}(e.mapValue):Me()}function U2(e){switch(kc(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=j5(e);return t?16+U2(t):16;case 5:return 2*e.stringValue.length;case 6:return Rc(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,s)=>r+U2(s),0)}(e.arrayValue);case 10:case 11:return function(i){let r=0;return Ld(i.fields,(s,o)=>{r+=s.length+U2(o)}),r}(e.mapValue);default:throw Me()}}function x4(e){return!!e&&"integerValue"in e}function Mw(e){return!!e&&"arrayValue"in e}function xk(e){return!!e&&"nullValue"in e}function Ck(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function R7(e){return!!e&&"mapValue"in e}function Dve(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[wj])===null||n===void 0?void 0:n.stringValue)===Tj}function s0(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Ld(e.mapValue.fields,(n,i)=>t.mapValue.fields[n]=s0(i)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=s0(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Nve(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Lve}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(t){this.value=t}static empty(){return new dr({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let i=0;i<t.length-1;++i)if(n=(n.mapValue.fields||{})[t.get(i)],!R7(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=s0(n)}setAll(t){let n=Pi.emptyPath(),i={},r=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,i,r),i={},r=[],n=a.popLast()}o?i[a.lastSegment()]=s0(o):r.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(t){const n=this.field(t.popLast());R7(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Go(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=n.mapValue.fields[t.get(i)];R7(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[t.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(t,n,i){Ld(n,(r,s)=>t[r]=s);for(const r of i)delete t[r]}clone(){return new dr(s0(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(t,n,i,r,s,o,a){this.key=t,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new si(t,0,De.min(),De.min(),De.min(),dr.empty(),0)}static newFoundDocument(t,n,i,r){return new si(t,1,n,De.min(),i,r,0)}static newNoDocument(t,n){return new si(t,2,n,De.min(),De.min(),dr.empty(),0)}static newUnknownDocument(t,n){return new si(t,3,n,De.min(),De.min(),dr.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=dr.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=dr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof si&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new si(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r6{constructor(t,n){this.position=t,this.inclusive=n}}function Ak(e,t,n){let i=0;for(let r=0;r<e.position.length;r++){const s=t[r],o=e.position[r];if(s.field.isKeyField()?i=Re.comparator(Re.fromName(o.referenceValue),n.key):i=Ph(o,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function Mk(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Go(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s6{constructor(t,n="asc"){this.field=t,this.dir=n}}function Ove(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sj{}class Wn extends Sj{constructor(t,n,i){super(),this.field=t,this.op=n,this.value=i}static create(t,n,i){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,i):new Fve(t,n,i):n==="array-contains"?new Hve(t,i):n==="in"?new Vve(t,i):n==="not-in"?new $ve(t,i):n==="array-contains-any"?new Gve(t,i):new Wn(t,n,i)}static createKeyFieldInFilter(t,n,i){return n==="in"?new Bve(t,i):new zve(t,i)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ph(n,this.value)):n!==null&&kc(this.value)===kc(n)&&this.matchesComparison(Ph(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Me()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Xo extends Sj{constructor(t,n){super(),this.filters=t,this.op=n,this.ce=null}static create(t,n){return new Xo(t,n)}matches(t){return Ij(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function Ij(e){return e.op==="and"}function xj(e){return Pve(e)&&Ij(e)}function Pve(e){for(const t of e.filters)if(t instanceof Xo)return!1;return!0}function C4(e){if(e instanceof Wn)return e.field.canonicalString()+e.op.toString()+Fh(e.value);if(xj(e))return e.filters.map(t=>C4(t)).join(",");{const t=e.filters.map(n=>C4(n)).join(",");return`${e.op}(${t})`}}function Cj(e,t){return e instanceof Wn?function(i,r){return r instanceof Wn&&i.op===r.op&&i.field.isEqual(r.field)&&Go(i.value,r.value)}(e,t):e instanceof Xo?function(i,r){return r instanceof Xo&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&Cj(o,r.filters[a]),!0):!1}(e,t):void Me()}function Aj(e){return e instanceof Wn?function(n){return`${n.field.canonicalString()} ${n.op} ${Fh(n.value)}`}(e):e instanceof Xo?function(n){return n.op.toString()+" {"+n.getFilters().map(Aj).join(" ,")+"}"}(e):"Filter"}class Fve extends Wn{constructor(t,n,i){super(t,n,i),this.key=Re.fromName(i.referenceValue)}matches(t){const n=Re.comparator(t.key,this.key);return this.matchesComparison(n)}}class Bve extends Wn{constructor(t,n){super(t,"in",n),this.keys=Mj("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class zve extends Wn{constructor(t,n){super(t,"not-in",n),this.keys=Mj("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function Mj(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>Re.fromName(i.referenceValue))}class Hve extends Wn{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Mw(n)&&hm(n.arrayValue,this.value)}}class Vve extends Wn{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&hm(this.value.arrayValue,n)}}class $ve extends Wn{constructor(t,n){super(t,"not-in",n)}matches(t){if(hm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!hm(this.value.arrayValue,n)}}class Gve extends Wn{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Mw(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>hm(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xve{constructor(t,n=null,i=[],r=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.le=null}}function Rk(e,t=null,n=[],i=[],r=null,s=null,o=null){return new Xve(e,t,n,i,r,s,o)}function Rw(e){const t=et(e);if(t.le===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(i=>C4(i)).join(","),n+="|ob:",n+=t.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),rp(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>Fh(i)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>Fh(i)).join(",")),t.le=n}return t.le}function kw(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Ove(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Cj(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Mk(e.startAt,t.startAt)&&Mk(e.endAt,t.endAt)}function A4(e){return Re.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y5{constructor(t,n=null,i=[],r=[],s=null,o="F",a=null,l=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function jve(e,t,n,i,r,s,o,a){return new Y5(e,t,n,i,r,s,o,a)}function Lw(e){return new Y5(e)}function kk(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function Yve(e){return e.collectionGroup!==null}function o0(e){const t=et(e);if(t.he===null){t.he=[];const n=new Set;for(const s of t.explicitOrderBy)t.he.push(s),n.add(s.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Kn(Pi.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.he.push(new s6(s,i))}),n.has(Pi.keyField().canonicalString())||t.he.push(new s6(Pi.keyField(),i))}return t.he}function Po(e){const t=et(e);return t.Pe||(t.Pe=Wve(t,o0(e))),t.Pe}function Wve(e,t){if(e.limitType==="F")return Rk(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new s6(r.field,s)});const n=e.endAt?new r6(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new r6(e.startAt.position,e.startAt.inclusive):null;return Rk(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function M4(e,t,n){return new Y5(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function W5(e,t){return kw(Po(e),Po(t))&&e.limitType===t.limitType}function Rj(e){return`${Rw(Po(e))}|lt:${e.limitType}`}function uf(e){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>Aj(r)).join(", ")}]`),rp(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Fh(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Fh(r)).join(",")),`Target(${i})`}(Po(e))}; limitType=${e.limitType})`}function K5(e,t){return t.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):Re.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(e,t)&&function(i,r){for(const s of o0(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(e,t)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(e,t)&&function(i,r){return!(i.startAt&&!function(o,a,l){const c=Ak(o,a,l);return o.inclusive?c<=0:c<0}(i.startAt,o0(i),r)||i.endAt&&!function(o,a,l){const c=Ak(o,a,l);return o.inclusive?c>=0:c>0}(i.endAt,o0(i),r))}(e,t)}function Kve(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function kj(e){return(t,n)=>{let i=!1;for(const r of o0(e)){const s=Zve(r,t,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function Zve(e,t,n){const i=e.field.isKeyField()?Re.comparator(t.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Ph(l,c):Me()}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return Me()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,n]);r.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Ld(this.inner,(n,i)=>{for(const[r,s]of i)t(r,s)})}isEmpty(){return Uj(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qve=new Cn(Re.comparator);function Lc(){return qve}const Lj=new Cn(Re.comparator);function v1(...e){let t=Lj;for(const n of e)t=t.insert(n.key,n);return t}function Qve(e){let t=Lj;return e.forEach((n,i)=>t=t.insert(n,i.overlayedDocument)),t}function Tu(){return a0()}function Dj(){return a0()}function a0(){return new Dd(e=>e.toString(),(e,t)=>e.isEqual(t))}const Jve=new Kn(Re.comparator);function pt(...e){let t=Jve;for(const n of e)t=t.add(n);return t}const e9e=new Kn(ut);function t9e(){return e9e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dw(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:t6(t)?"-0":t}}function Nj(e){return{integerValue:""+e}}function n9e(e,t){return Cve(t)?Nj(t):Dw(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z5{constructor(){this._=void 0}}function i9e(e,t,n){return e instanceof o6?function(r,s){const o={fields:{[Ej]:{stringValue:yj},[_j]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&Aw(s)&&(s=j5(s)),s&&(o.fields[vj]=s),{mapValue:o}}(n,t):e instanceof gm?Oj(e,t):e instanceof mm?Pj(e,t):function(r,s){const o=s9e(r,s),a=Lk(o)+Lk(r.Ie);return x4(o)&&x4(r.Ie)?Nj(a):Dw(r.serializer,a)}(e,t)}function r9e(e,t,n){return e instanceof gm?Oj(e,t):e instanceof mm?Pj(e,t):n}function s9e(e,t){return e instanceof a6?function(i){return x4(i)||function(s){return!!s&&"doubleValue"in s}(i)}(t)?t:{integerValue:0}:null}class o6 extends Z5{}class gm extends Z5{constructor(t){super(),this.elements=t}}function Oj(e,t){const n=Fj(t);for(const i of e.elements)n.some(r=>Go(r,i))||n.push(i);return{arrayValue:{values:n}}}class mm extends Z5{constructor(t){super(),this.elements=t}}function Pj(e,t){let n=Fj(t);for(const i of e.elements)n=n.filter(r=>!Go(r,i));return{arrayValue:{values:n}}}class a6 extends Z5{constructor(t,n){super(),this.serializer=t,this.Ie=n}}function Lk(e){return Sn(e.integerValue||e.doubleValue)}function Fj(e){return Mw(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function o9e(e,t){return e.field.isEqual(t.field)&&function(i,r){return i instanceof gm&&r instanceof gm||i instanceof mm&&r instanceof mm?Oh(i.elements,r.elements,Go):i instanceof a6&&r instanceof a6?Go(i.Ie,r.Ie):i instanceof o6&&r instanceof o6}(e.transform,t.transform)}class rs{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new rs}static exists(t){return new rs(void 0,t)}static updateTime(t){return new rs(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function b2(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class q5{}function Bj(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Nw(e.key,rs.none()):new sp(e.key,e.data,rs.none());{const n=e.data,i=dr.empty();let r=new Kn(Pi.comparator);for(let s of t.fields)if(!r.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new Nd(e.key,i,new cs(r.toArray()),rs.none())}}function a9e(e,t,n){e instanceof sp?function(r,s,o){const a=r.value.clone(),l=Nk(r.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof Nd?function(r,s,o){if(!b2(r.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Nk(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(zj(r)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(e,t,n):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function l0(e,t,n,i){return e instanceof sp?function(s,o,a,l){if(!b2(s.precondition,o))return a;const c=s.value.clone(),u=Ok(s.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(e,t,n,i):e instanceof Nd?function(s,o,a,l){if(!b2(s.precondition,o))return a;const c=Ok(s.fieldTransforms,l,o),u=o.data;return u.setAll(zj(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(e,t,n,i):function(s,o,a){return b2(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function Dk(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Oh(i,r,(s,o)=>o9e(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class sp extends q5{constructor(t,n,i,r=[]){super(),this.key=t,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Nd extends q5{constructor(t,n,i,r,s=[]){super(),this.key=t,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function zj(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}}),t}function Nk(e,t,n){const i=new Map;Bt(e.length===n.length);for(let r=0;r<n.length;r++){const s=e[r],o=s.transform,a=t.data.field(s.field);i.set(s.field,r9e(o,a,n[r]))}return i}function Ok(e,t,n){const i=new Map;for(const r of e){const s=r.transform,o=n.data.field(r.field);i.set(r.field,i9e(s,o,t))}return i}class Nw extends q5{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Hj extends q5{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l9e{constructor(t,n,i,r){this.batchId=t,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(t.key)&&a9e(s,t,i[r])}}applyToLocalView(t,n){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(n=l0(i,t,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(n=l0(i,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const i=Dj();return this.mutations.forEach(r=>{const s=t.get(r.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(r.key)?null:a;const l=Bj(o,a);l!==null&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(De.min())}),i}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),pt())}isEqual(t){return this.batchId===t.batchId&&Oh(this.mutations,t.mutations,(n,i)=>Dk(n,i))&&Oh(this.baseMutations,t.baseMutations,(n,i)=>Dk(n,i))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c9e{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u9e{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rn,ot;function d9e(e){switch(e){case re.OK:return Me();case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return Me()}}function Vj(e){if(e===void 0)return sl("GRPC error has no .code"),re.UNKNOWN;switch(e){case Rn.OK:return re.OK;case Rn.CANCELLED:return re.CANCELLED;case Rn.UNKNOWN:return re.UNKNOWN;case Rn.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case Rn.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case Rn.INTERNAL:return re.INTERNAL;case Rn.UNAVAILABLE:return re.UNAVAILABLE;case Rn.UNAUTHENTICATED:return re.UNAUTHENTICATED;case Rn.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case Rn.NOT_FOUND:return re.NOT_FOUND;case Rn.ALREADY_EXISTS:return re.ALREADY_EXISTS;case Rn.PERMISSION_DENIED:return re.PERMISSION_DENIED;case Rn.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case Rn.ABORTED:return re.ABORTED;case Rn.OUT_OF_RANGE:return re.OUT_OF_RANGE;case Rn.UNIMPLEMENTED:return re.UNIMPLEMENTED;case Rn.DATA_LOSS:return re.DATA_LOSS;default:return Me()}}(ot=Rn||(Rn={}))[ot.OK=0]="OK",ot[ot.CANCELLED=1]="CANCELLED",ot[ot.UNKNOWN=2]="UNKNOWN",ot[ot.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ot[ot.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ot[ot.NOT_FOUND=5]="NOT_FOUND",ot[ot.ALREADY_EXISTS=6]="ALREADY_EXISTS",ot[ot.PERMISSION_DENIED=7]="PERMISSION_DENIED",ot[ot.UNAUTHENTICATED=16]="UNAUTHENTICATED",ot[ot.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ot[ot.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ot[ot.ABORTED=10]="ABORTED",ot[ot.OUT_OF_RANGE=11]="OUT_OF_RANGE",ot[ot.UNIMPLEMENTED=12]="UNIMPLEMENTED",ot[ot.INTERNAL=13]="INTERNAL",ot[ot.UNAVAILABLE=14]="UNAVAILABLE",ot[ot.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f9e(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h9e=new uc([4294967295,4294967295],0);function Pk(e){const t=f9e().encode(e),n=new lj;return n.update(t),new Uint8Array(n.digest())}function Fk(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new uc([n,i],0),new uc([r,s],0)]}class Ow{constructor(t,n,i){if(this.bitmap=t,this.padding=n,this.hashCount=i,n<0||n>=8)throw new _1(`Invalid padding: ${n}`);if(i<0)throw new _1(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new _1(`Invalid hash count: ${i}`);if(t.length===0&&n!==0)throw new _1(`Invalid padding when bitmap length is 0: ${n}`);this.Ee=8*t.length-n,this.de=uc.fromNumber(this.Ee)}Ae(t,n,i){let r=t.add(n.multiply(uc.fromNumber(i)));return r.compare(h9e)===1&&(r=new uc([r.getBits(0),r.getBits(1)],0)),r.modulo(this.de).toNumber()}Re(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.Ee===0)return!1;const n=Pk(t),[i,r]=Fk(n);for(let s=0;s<this.hashCount;s++){const o=this.Ae(i,r,s);if(!this.Re(o))return!1}return!0}static create(t,n,i){const r=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new Ow(s,r,n);return i.forEach(a=>o.insert(a)),o}insert(t){if(this.Ee===0)return;const n=Pk(t),[i,r]=Fk(n);for(let s=0;s<this.hashCount;s++){const o=this.Ae(i,r,s);this.Ve(o)}}Ve(t){const n=Math.floor(t/8),i=t%8;this.bitmap[n]|=1<<i}}class _1 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q5{constructor(t,n,i,r,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,i){const r=new Map;return r.set(t,op.createSynthesizedTargetChangeForCurrentChange(t,n,i)),new Q5(De.min(),r,new Cn(ut),Lc(),pt())}}class op{constructor(t,n,i,r,s){this.resumeToken=t,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,i){return new op(i,n,pt(),pt(),pt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(t,n,i,r){this.me=t,this.removedTargetIds=n,this.key=i,this.fe=r}}class $j{constructor(t,n){this.targetId=t,this.ge=n}}class Gj{constructor(t,n,i=Si.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=n,this.resumeToken=i,this.cause=r}}class Bk{constructor(){this.pe=0,this.ye=zk(),this.we=Si.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(t){t.approximateByteSize()>0&&(this.be=!0,this.we=t)}Fe(){let t=pt(),n=pt(),i=pt();return this.ye.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:Me()}}),new op(this.we,this.Se,t,n,i)}Me(){this.be=!1,this.ye=zk()}xe(t,n){this.be=!0,this.ye=this.ye.insert(t,n)}Oe(t){this.be=!0,this.ye=this.ye.remove(t)}Ne(){this.pe+=1}Be(){this.pe-=1,Bt(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class g9e{constructor(t){this.ke=t,this.qe=new Map,this.Qe=Lc(),this.$e=TU(),this.Ke=TU(),this.Ue=new Cn(ut)}We(t){for(const n of t.me)t.fe&&t.fe.isFoundDocument()?this.Ge(n,t.fe):this.ze(n,t.key,t.fe);for(const n of t.removedTargetIds)this.ze(n,t.key,t.fe)}je(t){this.forEachTarget(t,n=>{const i=this.He(n);switch(t.state){case 0:this.Je(n)&&i.Ce(t.resumeToken);break;case 1:i.Be(),i.De||i.Me(),i.Ce(t.resumeToken);break;case 2:i.Be(),i.De||this.removeTarget(n);break;case 3:this.Je(n)&&(i.Le(),i.Ce(t.resumeToken));break;case 4:this.Je(n)&&(this.Ye(n),i.Ce(t.resumeToken));break;default:Me()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.qe.forEach((i,r)=>{this.Je(r)&&n(r)})}Ze(t){const n=t.targetId,i=t.ge.count,r=this.Xe(n);if(r){const s=r.target;if(A4(s))if(i===0){const o=new Re(s.path);this.ze(n,o,si.newNoDocument(o,De.min()))}else Bt(i===1);else{const o=this.et(n);if(o!==i){const a=this.tt(t),l=a?this.nt(a,t,o):1;if(l!==0){this.Ye(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(n,c)}}}}}tt(t){const n=t.ge.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let o,a;try{o=Rc(i).toUint8Array()}catch(l){if(l instanceof bj)return Nh("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Ow(o,r,s)}catch(l){return Nh(l instanceof _1?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ee===0?null:a}nt(t,n,i){return n.ge.count===i-this.st(t,n.targetId)?0:2}st(t,n){const i=this.ke.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const o=this.ke.it(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.ze(n,s,null),r++)}),r}ot(t){const n=new Map;this.qe.forEach((s,o)=>{const a=this.Xe(o);if(a){if(s.current&&A4(a.target)){const l=new Re(a.target.path);this._t(l).has(o)||this.ut(o,l)||this.ze(o,l,si.newNoDocument(l,t))}s.ve&&(n.set(o,s.Fe()),s.Me())}});let i=pt();this.Ke.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Xe(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.Qe.forEach((s,o)=>o.setReadTime(t));const r=new Q5(t,n,this.Ue,this.Qe,i);return this.Qe=Lc(),this.$e=TU(),this.Ke=TU(),this.Ue=new Cn(ut),r}Ge(t,n){if(!this.Je(t))return;const i=this.ut(t,n.key)?2:0;this.He(t).xe(n.key,i),this.Qe=this.Qe.insert(n.key,n),this.$e=this.$e.insert(n.key,this._t(n.key).add(t)),this.Ke=this.Ke.insert(n.key,this.ct(n.key).add(t))}ze(t,n,i){if(!this.Je(t))return;const r=this.He(t);this.ut(t,n)?r.xe(n,1):r.Oe(n),this.Ke=this.Ke.insert(n,this.ct(n).delete(t)),this.Ke=this.Ke.insert(n,this.ct(n).add(t)),i&&(this.Qe=this.Qe.insert(n,i))}removeTarget(t){this.qe.delete(t)}et(t){const n=this.He(t).Fe();return this.ke.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ne(t){this.He(t).Ne()}He(t){let n=this.qe.get(t);return n||(n=new Bk,this.qe.set(t,n)),n}ct(t){let n=this.Ke.get(t);return n||(n=new Kn(ut),this.Ke=this.Ke.insert(t,n)),n}_t(t){let n=this.$e.get(t);return n||(n=new Kn(ut),this.$e=this.$e.insert(t,n)),n}Je(t){const n=this.Xe(t)!==null;return n||Ee("WatchChangeAggregator","Detected inactive target",t),n}Xe(t){const n=this.qe.get(t);return n&&n.De?null:this.ke.lt(t)}Ye(t){this.qe.set(t,new Bk),this.ke.getRemoteKeysForTarget(t).forEach(n=>{this.ze(t,n,null)})}ut(t,n){return this.ke.getRemoteKeysForTarget(t).has(n)}}function TU(){return new Cn(Re.comparator)}function zk(){return new Cn(Re.comparator)}const m9e={asc:"ASCENDING",desc:"DESCENDING"},p9e={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},U9e={and:"AND",or:"OR"};class b9e{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function R4(e,t){return e.useProto3Json||rp(t)?t:{value:t}}function l6(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Xj(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function y9e(e,t){return l6(e,t.toTimestamp())}function Fa(e){return Bt(!!e),De.fromTimestamp(function(n){const i=Mc(n);return new di(i.seconds,i.nanos)}(e))}function Pw(e,t){return k4(e,t).canonicalString()}function k4(e,t){const n=function(r){return new an(["projects",r.projectId,"databases",r.database])}(e).child("documents");return t===void 0?n:n.child(t)}function jj(e){const t=an.fromString(e);return Bt(qj(t)),t}function c6(e,t){return Pw(e.databaseId,t.path)}function c0(e,t){const n=jj(t);if(n.get(1)!==e.databaseId.projectId)throw new Te(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Te(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Re(Wj(n))}function Yj(e,t){return Pw(e.databaseId,t)}function E9e(e){const t=jj(e);return t.length===4?an.emptyPath():Wj(t)}function Hk(e){return new an(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Wj(e){return Bt(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function Vk(e,t,n){return{name:c6(e,t),fields:n.value.mapValue.fields}}function v9e(e,t){return"found"in t?function(i,r){Bt(!!r.found),r.found.name,r.found.updateTime;const s=c0(i,r.found.name),o=Fa(r.found.updateTime),a=r.found.createTime?Fa(r.found.createTime):De.min(),l=new dr({mapValue:{fields:r.found.fields}});return si.newFoundDocument(s,o,a,l)}(e,t):"missing"in t?function(i,r){Bt(!!r.missing),Bt(!!r.readTime);const s=c0(i,r.missing),o=Fa(r.readTime);return si.newNoDocument(s,o)}(e,t):Me()}function _9e(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Me()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(Bt(u===void 0||typeof u=="string"),Si.fromBase64String(u||"")):(Bt(u===void 0||u instanceof Buffer||u instanceof Uint8Array),Si.fromUint8Array(u||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(c){const u=c.code===void 0?re.UNKNOWN:Vj(c.code);return new Te(u,c.message||"")}(o);n=new Gj(i,r,s,a||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const r=c0(e,i.document.name),s=Fa(i.document.updateTime),o=i.document.createTime?Fa(i.document.createTime):De.min(),a=new dr({mapValue:{fields:i.document.fields}}),l=si.newFoundDocument(r,s,o,a),c=i.targetIds||[],u=i.removedTargetIds||[];n=new y2(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const r=c0(e,i.document),s=i.readTime?Fa(i.readTime):De.min(),o=si.newNoDocument(r,s),a=i.removedTargetIds||[];n=new y2([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const r=c0(e,i.document),s=i.removedTargetIds||[];n=new y2([],s,r,null)}else{if(!("filter"in t))return Me();{t.filter;const i=t.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,o=new u9e(r,s),a=i.targetId;n=new $j(a,o)}}return n}function w9e(e,t){let n;if(t instanceof sp)n={update:Vk(e,t.key,t.value)};else if(t instanceof Nw)n={delete:c6(e,t.key)};else if(t instanceof Nd)n={update:Vk(e,t.key,t.data),updateMask:R9e(t.fieldMask)};else{if(!(t instanceof Hj))return Me();n={verify:c6(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(i=>function(s,o){const a=o.transform;if(a instanceof o6)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof gm)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof mm)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof a6)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw Me()}(0,i))),t.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:y9e(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Me()}(e,t.precondition)),n}function T9e(e,t){return{documents:[Yj(e,t.path)]}}function S9e(e,t){const n={structuredQuery:{}},i=t.path;let r;t.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=Yj(e,r);const s=function(c){if(c.length!==0)return Zj(Xo.create(c,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(u=>function(f){return{field:df(f.field),direction:C9e(f.dir)}}(u))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=R4(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(t.endAt)),{ht:n,parent:r}}function I9e(e){let t=E9e(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Bt(i===1);const u=n.from[0];u.allDescendants?r=u.collectionId:t=t.child(u.collectionId)}let s=[];n.where&&(s=function(d){const f=Kj(d);return f instanceof Xo&&xj(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(m){return new s6(ff(m.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,rp(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,h=d.values||[];return new r6(h,f)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const f=!d.before,h=d.values||[];return new r6(h,f)}(n.endAt)),jve(t,r,o,s,a,"F",l,c)}function x9e(e,t){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Me()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function Kj(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=ff(n.unaryFilter.field);return Wn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=ff(n.unaryFilter.field);return Wn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ff(n.unaryFilter.field);return Wn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ff(n.unaryFilter.field);return Wn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Me()}}(e):e.fieldFilter!==void 0?function(n){return Wn.create(ff(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Me()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Xo.create(n.compositeFilter.filters.map(i=>Kj(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Me()}}(n.compositeFilter.op))}(e):Me()}function C9e(e){return m9e[e]}function A9e(e){return p9e[e]}function M9e(e){return U9e[e]}function df(e){return{fieldPath:e.canonicalString()}}function ff(e){return Pi.fromServerFormat(e.fieldPath)}function Zj(e){return e instanceof Wn?function(n){if(n.op==="=="){if(Ck(n.value))return{unaryFilter:{field:df(n.field),op:"IS_NAN"}};if(xk(n.value))return{unaryFilter:{field:df(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Ck(n.value))return{unaryFilter:{field:df(n.field),op:"IS_NOT_NAN"}};if(xk(n.value))return{unaryFilter:{field:df(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:df(n.field),op:A9e(n.op),value:n.value}}}(e):e instanceof Xo?function(n){const i=n.getFilters().map(r=>Zj(r));return i.length===1?i[0]:{compositeFilter:{op:M9e(n.op),filters:i}}}(e):Me()}function R9e(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function qj(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(t,n,i,r,s=De.min(),o=De.min(),a=Si.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(t){return new jl(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new jl(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new jl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new jl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k9e{constructor(t){this.Tt=t}}function L9e(e){const t=I9e({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?M4(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D9e{constructor(){this.Tn=new N9e}addToCollectionParentIndex(t,n){return this.Tn.add(n),ie.resolve()}getCollectionParents(t,n){return ie.resolve(this.Tn.getEntries(n))}addFieldIndex(t,n){return ie.resolve()}deleteFieldIndex(t,n){return ie.resolve()}deleteAllFieldIndexes(t){return ie.resolve()}createTargetIndexes(t,n){return ie.resolve()}getDocumentsMatchingTarget(t,n){return ie.resolve(null)}getIndexType(t,n){return ie.resolve(0)}getFieldIndexes(t,n){return ie.resolve([])}getNextCollectionGroupToUpdate(t){return ie.resolve(null)}getMinOffset(t,n){return ie.resolve(Ac.min())}getMinOffsetFromCollectionGroup(t,n){return ie.resolve(Ac.min())}updateCollectionGroup(t,n,i){return ie.resolve()}updateIndexEntries(t,n){return ie.resolve()}}class N9e{constructor(){this.index={}}add(t){const n=t.lastSegment(),i=t.popLast(),r=this.index[n]||new Kn(an.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(t){const n=t.lastSegment(),i=t.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(t){return(this.index[t]||new Kn(an.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Qj=41943040;class cr{static withCacheSize(t){return new cr(t,cr.DEFAULT_COLLECTION_PERCENTILE,cr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cr.DEFAULT_COLLECTION_PERCENTILE=10,cr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cr.DEFAULT=new cr(Qj,cr.DEFAULT_COLLECTION_PERCENTILE,cr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cr.DISABLED=new cr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(t){this.$n=t}next(){return this.$n+=2,this.$n}static Kn(){return new Bh(0)}static Un(){return new Bh(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gk="LruGarbageCollector",O9e=1048576;function Xk([e,t],[n,i]){const r=ut(e,n);return r===0?ut(t,i):r}class P9e{constructor(t){this.Hn=t,this.buffer=new Kn(Xk),this.Jn=0}Yn(){return++this.Jn}Zn(t){const n=[t,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();Xk(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class F9e{constructor(t,n,i){this.garbageCollector=t,this.asyncQueue=n,this.localStore=i,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(t){Ee(Gk,`Garbage collection scheduled in ${t}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ug(n)?Ee(Gk,"Ignoring IndexedDB error during garbage collection: ",n):await G5(n)}await this.er(3e5)})}}class B9e{constructor(t,n){this.tr=t,this.params=n}calculateTargetCount(t,n){return this.tr.nr(t).next(i=>Math.floor(n/100*i))}nthSequenceNumber(t,n){if(n===0)return ie.resolve(X5.ae);const i=new P9e(n);return this.tr.forEachTarget(t,r=>i.Zn(r.sequenceNumber)).next(()=>this.tr.rr(t,r=>i.Zn(r))).next(()=>i.maxValue)}removeTargets(t,n,i){return this.tr.removeTargets(t,n,i)}removeOrphanedDocuments(t,n){return this.tr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(Ee("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve($k)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(Ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$k):this.ir(t,n))}getCacheSize(t){return this.tr.getCacheSize(t)}ir(t,n){let i,r,s,o,a,l,c;const u=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(Ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),r=this.params.maximumSequenceNumbersToCollect):r=d,o=Date.now(),this.nthSequenceNumber(t,r))).next(d=>(i=d,a=Date.now(),this.removeTargets(t,i,n))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(t,i))).next(d=>(c=Date.now(),cf()<=lt.DEBUG&&Ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:d})))}}function z9e(e,t){return new B9e(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H9e{constructor(){this.changes=new Dd(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,si.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?ie.resolve(i):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V9e{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $9e{constructor(t,n,i,r){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,n){let i=null;return this.documentOverlayCache.getOverlay(t,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,n))).next(r=>(i!==null&&l0(i.mutation,r,cs.empty(),di.now()),r))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.getLocalViewOfDocuments(t,i,pt()).next(()=>i))}getLocalViewOfDocuments(t,n,i=pt()){const r=Tu();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,i).next(s=>{let o=v1();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const i=Tu();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,pt()))}populateOverlays(t,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,i,r){let s=Lc();const o=a0(),a=function(){return a0()}();return n.forEach((l,c)=>{const u=i.get(c.key);r.has(c.key)&&(u===void 0||u.mutation instanceof Nd)?s=s.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),l0(u.mutation,c,u.mutation.getFieldMask(),di.now())):o.set(c.key,cs.empty())}),this.recalculateAndSaveOverlays(t,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var d;return a.set(c,new V9e(u,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(t,n){const i=a0();let r=new Cn((o,a)=>o-a),s=pt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=i.get(l)||cs.empty();u=a.applyToLocalView(c,u),i.set(l,u);const d=(r.get(a.batchId)||pt()).add(l);r=r.insert(a.batchId,d)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,d=Dj();u.forEach(f=>{if(!s.has(f)){const h=Bj(n.get(f),i.get(f));h!==null&&d.set(f,h),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(t,c,d))}return ie.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,n,i,r){return function(o){return Re.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):Yve(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,i,r):this.getDocumentsMatchingCollectionQuery(t,n,i,r)}getNextDocuments(t,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,i.largestBatchId,r-s.size):ie.resolve(Tu());let a=um,l=s;return o.next(c=>ie.forEach(c,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(u)?ie.resolve():this.remoteDocumentCache.getEntry(t,u).next(f=>{l=l.insert(u,f)}))).next(()=>this.populateOverlays(t,c,s)).next(()=>this.computeViews(t,l,c,pt())).next(u=>({batchId:a,changes:Qve(u)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Re(n)).next(i=>{let r=v1();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,n,i,r){const s=n.collectionGroup;let o=v1();return this.indexManager.getCollectionParents(t,s).next(a=>ie.forEach(a,l=>{const c=function(d,f){return new Y5(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(t,c,i,r).next(u=>{u.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,i,s,r))).next(o=>{s.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,si.newInvalidDocument(u)))});let a=v1();return o.forEach((l,c)=>{const u=s.get(l);u!==void 0&&l0(u.mutation,c,cs.empty(),di.now()),K5(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G9e{constructor(t){this.serializer=t,this.dr=new Map,this.Ar=new Map}getBundleMetadata(t,n){return ie.resolve(this.dr.get(n))}saveBundleMetadata(t,n){return this.dr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Fa(r.createTime)}}(n)),ie.resolve()}getNamedQuery(t,n){return ie.resolve(this.Ar.get(n))}saveNamedQuery(t,n){return this.Ar.set(n.name,function(r){return{name:r.name,query:L9e(r.bundledQuery),readTime:Fa(r.readTime)}}(n)),ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X9e{constructor(){this.overlays=new Cn(Re.comparator),this.Rr=new Map}getOverlay(t,n){return ie.resolve(this.overlays.get(n))}getOverlays(t,n){const i=Tu();return ie.forEach(n,r=>this.getOverlay(t,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(t,n,i){return i.forEach((r,s)=>{this.Et(t,n,s)}),ie.resolve()}removeOverlaysForBatchId(t,n,i){const r=this.Rr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Rr.delete(i)),ie.resolve()}getOverlaysForCollection(t,n,i){const r=Tu(),s=n.length+1,o=new Re(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return ie.resolve(r)}getOverlaysForCollectionGroup(t,n,i,r){let s=new Cn((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>i){let u=s.get(c.largestBatchId);u===null&&(u=Tu(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Tu(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=r)););return ie.resolve(a)}Et(t,n,i){const r=this.overlays.get(i.key);if(r!==null){const o=this.Rr.get(r.largestBatchId).delete(i.key);this.Rr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new c9e(n,i));let s=this.Rr.get(n);s===void 0&&(s=pt(),this.Rr.set(n,s)),this.Rr.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j9e{constructor(){this.sessionToken=Si.EMPTY_BYTE_STRING}getSessionToken(t){return ie.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(){this.Vr=new Kn(ti.mr),this.gr=new Kn(ti.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(t,n){const i=new ti(t,n);this.Vr=this.Vr.add(i),this.gr=this.gr.add(i)}yr(t,n){t.forEach(i=>this.addReference(i,n))}removeReference(t,n){this.wr(new ti(t,n))}Sr(t,n){t.forEach(i=>this.removeReference(i,n))}br(t){const n=new Re(new an([])),i=new ti(n,t),r=new ti(n,t+1),s=[];return this.gr.forEachInRange([i,r],o=>{this.wr(o),s.push(o.key)}),s}Dr(){this.Vr.forEach(t=>this.wr(t))}wr(t){this.Vr=this.Vr.delete(t),this.gr=this.gr.delete(t)}vr(t){const n=new Re(new an([])),i=new ti(n,t),r=new ti(n,t+1);let s=pt();return this.gr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new ti(t,0),i=this.Vr.firstAfterOrEqual(n);return i!==null&&t.isEqual(i.key)}}class ti{constructor(t,n){this.key=t,this.Cr=n}static mr(t,n){return Re.comparator(t.key,n.key)||ut(t.Cr,n.Cr)}static pr(t,n){return ut(t.Cr,n.Cr)||Re.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y9e{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.Fr=1,this.Mr=new Kn(ti.mr)}checkEmpty(t){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,i,r){const s=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new l9e(s,n,i,r);this.mutationQueue.push(o);for(const a of r)this.Mr=this.Mr.add(new ti(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return ie.resolve(o)}lookupMutationBatch(t,n){return ie.resolve(this.Or(n))}getNextMutationBatchAfterBatchId(t,n){const i=n+1,r=this.Nr(i),s=r<0?0:r;return ie.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?xve:this.Fr-1)}getAllMutationBatches(t){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const i=new ti(n,0),r=new ti(n,Number.POSITIVE_INFINITY),s=[];return this.Mr.forEachInRange([i,r],o=>{const a=this.Or(o.Cr);s.push(a)}),ie.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new Kn(ut);return n.forEach(r=>{const s=new ti(r,0),o=new ti(r,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([s,o],a=>{i=i.add(a.Cr)})}),ie.resolve(this.Br(i))}getAllMutationBatchesAffectingQuery(t,n){const i=n.path,r=i.length+1;let s=i;Re.isDocumentKey(s)||(s=s.child(""));const o=new ti(new Re(s),0);let a=new Kn(ut);return this.Mr.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(a=a.add(l.Cr)),!0)},o),ie.resolve(this.Br(a))}Br(t){const n=[];return t.forEach(i=>{const r=this.Or(i);r!==null&&n.push(r)}),n}removeMutationBatch(t,n){Bt(this.Lr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.Mr;return ie.forEach(n.mutations,r=>{const s=new ti(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.Mr=i})}qn(t){}containsKey(t,n){const i=new ti(n,0),r=this.Mr.firstAfterOrEqual(i);return ie.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,ie.resolve()}Lr(t,n){return this.Nr(t)}Nr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Or(t){const n=this.Nr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W9e{constructor(t){this.kr=t,this.docs=function(){return new Cn(Re.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,o=this.kr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const i=this.docs.get(n);return ie.resolve(i?i.document.mutableCopy():si.newInvalidDocument(n))}getEntries(t,n){let i=Lc();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():si.newInvalidDocument(r))}),ie.resolve(i)}getDocumentsMatchingQuery(t,n,i,r){let s=Lc();const o=n.path,a=new Re(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||wve(_ve(u),i)<=0||(r.has(u.key)||K5(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return ie.resolve(s)}getAllFromCollectionGroup(t,n,i,r){Me()}qr(t,n){return ie.forEach(this.docs,i=>n(i))}newChangeBuffer(t){return new K9e(this)}getSize(t){return ie.resolve(this.size)}}class K9e extends H9e{constructor(t){super(),this.Ir=t}applyChanges(t){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Ir.addEntry(t,r)):this.Ir.removeEntry(i)}),ie.waitFor(n)}getFromCache(t,n){return this.Ir.getEntry(t,n)}getAllFromCache(t,n){return this.Ir.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z9e{constructor(t){this.persistence=t,this.Qr=new Dd(n=>Rw(n),kw),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.$r=0,this.Kr=new Fw,this.targetCount=0,this.Ur=Bh.Kn()}forEachTarget(t,n){return this.Qr.forEach((i,r)=>n(r)),ie.resolve()}getLastRemoteSnapshotVersion(t){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return ie.resolve(this.$r)}allocateTargetId(t){return this.highestTargetId=this.Ur.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(t,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.$r&&(this.$r=n),ie.resolve()}zn(t){this.Qr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Ur=new Bh(n),this.highestTargetId=n),t.sequenceNumber>this.$r&&(this.$r=t.sequenceNumber)}addTargetData(t,n){return this.zn(n),this.targetCount+=1,ie.resolve()}updateTargetData(t,n){return this.zn(n),ie.resolve()}removeTargetData(t,n){return this.Qr.delete(n.target),this.Kr.br(n.targetId),this.targetCount-=1,ie.resolve()}removeTargets(t,n,i){let r=0;const s=[];return this.Qr.forEach((o,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.Qr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),r++)}),ie.waitFor(s).next(()=>r)}getTargetCount(t){return ie.resolve(this.targetCount)}getTargetData(t,n){const i=this.Qr.get(n)||null;return ie.resolve(i)}addMatchingKeys(t,n,i){return this.Kr.yr(n,i),ie.resolve()}removeMatchingKeys(t,n,i){this.Kr.Sr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(o=>{s.push(r.markPotentiallyOrphaned(t,o))}),ie.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.Kr.br(n),ie.resolve()}getMatchingKeysForTargetId(t,n){const i=this.Kr.vr(n);return ie.resolve(i)}containsKey(t,n){return ie.resolve(this.Kr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jj{constructor(t,n){this.Wr={},this.overlays={},this.Gr=new X5(0),this.zr=!1,this.zr=!0,this.jr=new j9e,this.referenceDelegate=t(this),this.Hr=new Z9e(this),this.indexManager=new D9e,this.remoteDocumentCache=function(r){return new W9e(r)}(i=>this.referenceDelegate.Jr(i)),this.serializer=new k9e(n),this.Yr=new G9e(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new X9e,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let i=this.Wr[t.toKey()];return i||(i=new Y9e(n,this.referenceDelegate),this.Wr[t.toKey()]=i),i}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(t,n,i){Ee("MemoryPersistence","Starting transaction:",t);const r=new q9e(this.Gr.next());return this.referenceDelegate.Zr(),i(r).next(s=>this.referenceDelegate.Xr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}ei(t,n){return ie.or(Object.values(this.Wr).map(i=>()=>i.containsKey(t,n)))}}class q9e extends Sve{constructor(t){super(),this.currentSequenceNumber=t}}class Bw{constructor(t){this.persistence=t,this.ti=new Fw,this.ni=null}static ri(t){return new Bw(t)}get ii(){if(this.ni)return this.ni;throw Me()}addReference(t,n,i){return this.ti.addReference(i,n),this.ii.delete(i.toString()),ie.resolve()}removeReference(t,n,i){return this.ti.removeReference(i,n),this.ii.add(i.toString()),ie.resolve()}markPotentiallyOrphaned(t,n){return this.ii.add(n.toString()),ie.resolve()}removeTarget(t,n){this.ti.br(n.targetId).forEach(r=>this.ii.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next(r=>{r.forEach(s=>this.ii.add(s.toString()))}).next(()=>i.removeTargetData(t,n))}Zr(){this.ni=new Set}Xr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.ii,i=>{const r=Re.fromPath(i);return this.si(t,r).next(s=>{s||n.removeEntry(r,De.min())})}).next(()=>(this.ni=null,n.apply(t)))}updateLimboDocument(t,n){return this.si(t,n).next(i=>{i?this.ii.delete(n.toString()):this.ii.add(n.toString())})}Jr(t){return 0}si(t,n){return ie.or([()=>ie.resolve(this.ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.ei(t,n)])}}class u6{constructor(t,n){this.persistence=t,this.oi=new Dd(i=>Ave(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=z9e(this,n)}static ri(t,n){return new u6(t,n)}Zr(){}Xr(t){return ie.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}nr(t){const n=this.sr(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>n.next(r=>i+r))}sr(t){let n=0;return this.rr(t,i=>{n++}).next(()=>n)}rr(t,n){return ie.forEach(this.oi,(i,r)=>this.ar(t,i,r).next(s=>s?ie.resolve():n(r)))}removeTargets(t,n,i){return this.persistence.getTargetCache().removeTargets(t,n,i)}removeOrphanedDocuments(t,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.qr(t,o=>this.ar(t,o,n).next(a=>{a||(i++,s.removeEntry(o,De.min()))})).next(()=>s.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,n){return this.oi.set(n,t.currentSequenceNumber),ie.resolve()}removeTarget(t,n){const i=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,n,i){return this.oi.set(i,t.currentSequenceNumber),ie.resolve()}removeReference(t,n,i){return this.oi.set(i,t.currentSequenceNumber),ie.resolve()}updateLimboDocument(t,n){return this.oi.set(n,t.currentSequenceNumber),ie.resolve()}Jr(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=U2(t.data.value)),n}ar(t,n,i){return ie.or([()=>this.persistence.ei(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const r=this.oi.get(n);return ie.resolve(r!==void 0&&r>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(t,n,i,r){this.targetId=t,this.fromCache=n,this.Hi=i,this.Ji=r}static Yi(t,n){let i=pt(),r=pt();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new zw(t,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q9e{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J9e{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return qEe()?8:Ive(KEe())>0?6:4}()}initialize(t,n){this.ns=t,this.indexManager=n,this.Zi=!0}getDocumentsMatchingQuery(t,n,i,r){const s={result:null};return this.rs(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ss(t,n,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Q9e;return this._s(t,n,o).next(a=>{if(s.result=a,this.Xi)return this.us(t,n,o,a.size)})}).next(()=>s.result)}us(t,n,i,r){return i.documentReadCount<this.es?(cf()<=lt.DEBUG&&Ee("QueryEngine","SDK will not create cache indexes for query:",uf(n),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),ie.resolve()):(cf()<=lt.DEBUG&&Ee("QueryEngine","Query:",uf(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.ts*r?(cf()<=lt.DEBUG&&Ee("QueryEngine","The SDK decides to create cache indexes for query:",uf(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Po(n))):ie.resolve())}rs(t,n){if(kk(n))return ie.resolve(null);let i=Po(n);return this.indexManager.getIndexType(t,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=M4(n,null,"F"),i=Po(n)),this.indexManager.getDocumentsMatchingTarget(t,i).next(s=>{const o=pt(...s);return this.ns.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,i).next(l=>{const c=this.cs(n,a);return this.ls(n,c,o,l.readTime)?this.rs(t,M4(n,null,"F")):this.hs(t,c,n,l)}))})))}ss(t,n,i,r){return kk(n)||r.isEqual(De.min())?ie.resolve(null):this.ns.getDocuments(t,i).next(s=>{const o=this.cs(n,s);return this.ls(n,o,i,r)?ie.resolve(null):(cf()<=lt.DEBUG&&Ee("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),uf(n)),this.hs(t,o,n,vve(r,um)).next(a=>a))})}cs(t,n){let i=new Kn(kj(t));return n.forEach((r,s)=>{K5(t,s)&&(i=i.add(s))}),i}ls(t,n,i,r){if(t.limit===null)return!1;if(i.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}_s(t,n,i){return cf()<=lt.DEBUG&&Ee("QueryEngine","Using full collection scan to execute query:",uf(n)),this.ns.getDocumentsMatchingQuery(t,n,Ac.min(),i)}hs(t,n,i,r){return this.ns.getDocumentsMatchingQuery(t,i,r).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hw="LocalStore",e_e=3e8;class t_e{constructor(t,n,i,r){this.persistence=t,this.Ps=n,this.serializer=r,this.Ts=new Cn(ut),this.Is=new Dd(s=>Rw(s),kw),this.Es=new Map,this.ds=t.getRemoteDocumentCache(),this.Hr=t.getTargetCache(),this.Yr=t.getBundleCache(),this.As(i)}As(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new $9e(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Ts))}}function n_e(e,t,n,i){return new t_e(e,t,n,i)}async function eY(e,t){const n=et(e);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.As(t),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],a=[];let l=pt();for(const c of r){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(i,l).next(c=>({Rs:c,removedBatchIds:o,addedBatchIds:a}))})})}function tY(e){const t=et(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Hr.getLastRemoteSnapshotVersion(n))}function i_e(e,t){const n=et(e),i=t.snapshotVersion;let r=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.ds.newChangeBuffer({trackRemovals:!0});r=n.Ts;const a=[];t.targetChanges.forEach((u,d)=>{const f=r.get(d);if(!f)return;a.push(n.Hr.removeMatchingKeys(s,u.removedDocuments,d).next(()=>n.Hr.addMatchingKeys(s,u.addedDocuments,d)));let h=f.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(d)!==null?h=h.withResumeToken(Si.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):u.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(u.resumeToken,i)),r=r.insert(d,h),function(p,b,E){return p.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=e_e?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(f,h,u)&&a.push(n.Hr.updateTargetData(s,h))});let l=Lc(),c=pt();if(t.documentUpdates.forEach(u=>{t.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(r_e(s,o,t.documentUpdates).next(u=>{l=u.Vs,c=u.fs})),!i.isEqual(De.min())){const u=n.Hr.getLastRemoteSnapshotVersion(s).next(d=>n.Hr.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(u)}return ie.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.Ts=r,s))}function r_e(e,t,n){let i=pt(),r=pt();return n.forEach(s=>i=i.add(s)),t.getEntries(e,i).next(s=>{let o=Lc();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(De.min())?(t.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(t.addEntry(l),o=o.insert(a,l)):Ee(Hw,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Vs:o,fs:r}})}function s_e(e,t){const n=et(e);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Hr.getTargetData(i,t).next(s=>s?(r=s,ie.resolve(r)):n.Hr.allocateTargetId(i).next(o=>(r=new jl(t,o,"TargetPurposeListen",i.currentSequenceNumber),n.Hr.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Ts.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(i.targetId,i),n.Is.set(t,i.targetId)),i})}async function L4(e,t,n){const i=et(e),r=i.Ts.get(t),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!ug(o))throw o;Ee(Hw,`Failed to update sequence numbers for target ${t}: ${o}`)}i.Ts=i.Ts.remove(t),i.Is.delete(r.target)}function jk(e,t,n){const i=et(e);let r=De.min(),s=pt();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const d=et(l),f=d.Is.get(u);return f!==void 0?ie.resolve(d.Ts.get(f)):d.Hr.getTargetData(c,u)}(i,o,Po(t)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Hr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>i.Ps.getDocumentsMatchingQuery(o,t,n?r:De.min(),n?s:pt())).next(a=>(o_e(i,Kve(t),a),{documents:a,gs:s})))}function o_e(e,t,n){let i=e.Es.get(t)||De.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),e.Es.set(t,i)}class Yk{constructor(){this.activeTargetIds=t9e()}Ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}vs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}bs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class a_e{constructor(){this.ho=new Yk,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,i){}addLocalQueryTarget(t,n=!0){return n&&this.ho.Ds(t),this.Po[t]||"not-current"}updateQueryState(t,n,i){this.Po[t]=n}removeLocalQueryTarget(t){this.ho.vs(t)}isLocalQueryTarget(t){return this.ho.activeTargetIds.has(t)}clearQueryState(t){delete this.Po[t]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(t){return this.ho.activeTargetIds.has(t)}start(){return this.ho=new Yk,Promise.resolve()}handleUserChange(t,n,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_e{To(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk="ConnectivityMonitor";class Kk{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(t){this.Vo.push(t)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){Ee(Wk,"Network connectivity changed: AVAILABLE");for(const t of this.Vo)t(0)}Ro(){Ee(Wk,"Network connectivity changed: UNAVAILABLE");for(const t of this.Vo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let SU=null;function D4(){return SU===null?SU=function(){return 268435456+Math.round(2147483648*Math.random())}():SU++,"0x"+SU.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k7="RestConnection",c_e={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class u_e{get fo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.po=n+"://"+t.host,this.yo=`projects/${i}/databases/${r}`,this.wo=this.databaseId.database===n6?`project_id=${i}`:`project_id=${i}&database_id=${r}`}So(t,n,i,r,s){const o=D4(),a=this.bo(t,n.toUriEncodedString());Ee(k7,`Sending RPC '${t}' ${o}:`,a,i);const l={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(l,r,s),this.vo(t,a,l,i).then(c=>(Ee(k7,`Received RPC '${t}' ${o}: `,c),c),c=>{throw Nh(k7,`RPC '${t}' ${o} failed with error: `,c,"url: ",a,"request:",i),c})}Co(t,n,i,r,s,o){return this.So(t,n,i,r,s)}Do(t,n,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+cg}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,s)=>t[s]=r),i&&i.headers.forEach((r,s)=>t[s]=r)}bo(t,n){const i=c_e[t];return`${this.po}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_e{constructor(t){this.Fo=t.Fo,this.Mo=t.Mo}xo(t){this.Oo=t}No(t){this.Bo=t}Lo(t){this.ko=t}onMessage(t){this.qo=t}close(){this.Mo()}send(t){this.Fo(t)}Qo(){this.Oo()}$o(){this.Bo()}Ko(t){this.ko(t)}Uo(t){this.qo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi="WebChannelConnection";class f_e extends u_e{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}vo(t,n,i,r){const s=D4();return new Promise((o,a)=>{const l=new cj;l.setWithCredentials(!0),l.listenOnce(uj.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case p2.NO_ERROR:const u=l.getResponseJson();Ee(Mi,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(u)),o(u);break;case p2.TIMEOUT:Ee(Mi,`RPC '${t}' ${s} timed out`),a(new Te(re.DEADLINE_EXCEEDED,"Request time out"));break;case p2.HTTP_ERROR:const d=l.getStatus();if(Ee(Mi,`RPC '${t}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const h=f==null?void 0:f.error;if(h&&h.status&&h.message){const m=function(b){const E=b.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(E)>=0?E:re.UNKNOWN}(h.status);a(new Te(m,h.message))}else a(new Te(re.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Te(re.UNAVAILABLE,"Connection failed."));break;default:Me()}}finally{Ee(Mi,`RPC '${t}' ${s} completed.`)}});const c=JSON.stringify(r);Ee(Mi,`RPC '${t}' ${s} sending request:`,r),l.send(n,"POST",c,i,15)})}Wo(t,n,i){const r=D4(),s=[this.po,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=hj(),a=fj(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,n,i),l.encodeInitMessageHeaders=!0;const u=s.join("");Ee(Mi,`Creating RPC '${t}' stream ${r}: ${u}`,l);const d=o.createWebChannel(u,l);let f=!1,h=!1;const m=new d_e({Fo:b=>{h?Ee(Mi,`Not sending because RPC '${t}' stream ${r} is closed:`,b):(f||(Ee(Mi,`Opening RPC '${t}' stream ${r} transport.`),d.open(),f=!0),Ee(Mi,`RPC '${t}' stream ${r} sending:`,b),d.send(b))},Mo:()=>d.close()}),p=(b,E,y)=>{b.listen(E,v=>{try{y(v)}catch(_){setTimeout(()=>{throw _},0)}})};return p(d,E1.EventType.OPEN,()=>{h||(Ee(Mi,`RPC '${t}' stream ${r} transport opened.`),m.Qo())}),p(d,E1.EventType.CLOSE,()=>{h||(h=!0,Ee(Mi,`RPC '${t}' stream ${r} transport closed`),m.Ko())}),p(d,E1.EventType.ERROR,b=>{h||(h=!0,Nh(Mi,`RPC '${t}' stream ${r} transport errored:`,b),m.Ko(new Te(re.UNAVAILABLE,"The operation could not be completed")))}),p(d,E1.EventType.MESSAGE,b=>{var E;if(!h){const y=b.data[0];Bt(!!y);const v=y,_=(v==null?void 0:v.error)||((E=v[0])===null||E===void 0?void 0:E.error);if(_){Ee(Mi,`RPC '${t}' stream ${r} received error:`,_);const S=_.status;let M=function(A){const I=Rn[A];if(I!==void 0)return Vj(I)}(S),w=_.message;M===void 0&&(M=re.INTERNAL,w="Unknown error status: "+S+" with message "+_.message),h=!0,m.Ko(new Te(M,w)),d.close()}else Ee(Mi,`RPC '${t}' stream ${r} received:`,y),m.Uo(y)}}),p(a,dj.STAT_EVENT,b=>{b.stat===S4.PROXY?Ee(Mi,`RPC '${t}' stream ${r} detected buffering proxy`):b.stat===S4.NOPROXY&&Ee(Mi,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{m.$o()},0),m}}function L7(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J5(e){return new b9e(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{constructor(t,n,i=1e3,r=1.5,s=6e4){this.Ti=t,this.timerId=n,this.Go=i,this.zo=r,this.jo=s,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(t){this.cancel();const n=Math.floor(this.Ho+this.e_()),i=Math.max(0,Date.now()-this.Yo),r=Math.max(0,n-i);r>0&&Ee("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ho} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,r,()=>(this.Yo=Date.now(),t())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zk="PersistentStream";class h_e{constructor(t,n,i,r,s,o,a,l){this.Ti=t,this.n_=i,this.r_=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new Vw(t,n)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(t){this.E_(),this.stream.send(t)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(t,n){this.E_(),this.d_(),this.a_.cancel(),this.i_++,t!==4?this.a_.reset():n&&n.code===re.RESOURCE_EXHAUSTED?(sl(n.toString()),sl("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):n&&n.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Lo(n)}A_(){}auth(){this.state=1;const t=this.R_(this.i_),n=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.i_===n&&this.V_(i,r)},i=>{t(()=>{const r=new Te(re.UNKNOWN,"Fetching auth token failed: "+i.message);return this.m_(r)})})}V_(t,n){const i=this.R_(this.i_);this.stream=this.f_(t,n),this.stream.xo(()=>{i(()=>this.listener.xo())}),this.stream.No(()=>{i(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(r=>{i(()=>this.m_(r))}),this.stream.onMessage(r=>{i(()=>++this.__==1?this.g_(r):this.onNext(r))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(t){return Ee(Zk,`close with error: ${t}`),this.stream=null,this.close(4,t)}R_(t){return n=>{this.Ti.enqueueAndForget(()=>this.i_===t?n():(Ee(Zk,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class g_e extends h_e{constructor(t,n,i,r,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}f_(t,n){return this.connection.Wo("Listen",t,n)}g_(t){return this.onNext(t)}onNext(t){this.a_.reset();const n=_9e(this.serializer,t),i=function(s){if(!("targetChange"in s))return De.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?De.min():o.readTime?Fa(o.readTime):De.min()}(t);return this.listener.p_(n,i)}y_(t){const n={};n.database=Hk(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=A4(l)?{documents:T9e(s,l)}:{query:S9e(s,l).ht},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Xj(s,o.resumeToken);const c=R4(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(De.min())>0){a.readTime=l6(s,o.snapshotVersion.toTimestamp());const c=R4(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,t);const i=x9e(this.serializer,t);i&&(n.labels=i),this.I_(n)}w_(t){const n={};n.database=Hk(this.serializer),n.removeTarget=t,this.I_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_e{}class p_e extends m_e{constructor(t,n,i,r){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.F_=!1}M_(){if(this.F_)throw new Te(re.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,n,i,r){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(t,k4(n,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Te(re.UNKNOWN,s.toString())})}Co(t,n,i,r,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Co(t,k4(n,i),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Te(re.UNKNOWN,o.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class U_e{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(t){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.L_("Offline")))}set(t){this.Q_(),this.x_=0,t==="Online"&&(this.N_=!1),this.L_(t)}L_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}k_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(sl(n),this.N_=!1):Ee("OnlineStateTracker",n)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zh="RemoteStore";class b_e{constructor(t,n,i,r,s){this.localStore=t,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=s,this.z_.To(o=>{i.enqueueAndForget(async()=>{lp(this)&&(Ee(zh,"Restarting streams for network reachability change."),await async function(l){const c=et(l);c.W_.add(4),await ap(c),c.j_.set("Unknown"),c.W_.delete(4),await ey(c)}(this))})}),this.j_=new U_e(i,r)}}async function ey(e){if(lp(e))for(const t of e.G_)await t(!0)}async function ap(e){for(const t of e.G_)await t(!1)}function nY(e,t){const n=et(e);n.U_.has(t.targetId)||(n.U_.set(t.targetId,t),jw(n)?Xw(n):dg(n).c_()&&Gw(n,t))}function $w(e,t){const n=et(e),i=dg(n);n.U_.delete(t),i.c_()&&iY(n,t),n.U_.size===0&&(i.c_()?i.P_():lp(n)&&n.j_.set("Unknown"))}function Gw(e,t){if(e.H_.Ne(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(De.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}dg(e).y_(t)}function iY(e,t){e.H_.Ne(t),dg(e).w_(t)}function Xw(e){e.H_=new g9e({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),lt:t=>e.U_.get(t)||null,it:()=>e.datastore.serializer.databaseId}),dg(e).start(),e.j_.B_()}function jw(e){return lp(e)&&!dg(e).u_()&&e.U_.size>0}function lp(e){return et(e).W_.size===0}function rY(e){e.H_=void 0}async function y_e(e){e.j_.set("Online")}async function E_e(e){e.U_.forEach((t,n)=>{Gw(e,t)})}async function v_e(e,t){rY(e),jw(e)?(e.j_.q_(t),Xw(e)):e.j_.set("Unknown")}async function __e(e,t,n){if(e.j_.set("Online"),t instanceof Gj&&t.state===2&&t.cause)try{await async function(r,s){const o=s.cause;for(const a of s.targetIds)r.U_.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.U_.delete(a),r.H_.removeTarget(a))}(e,t)}catch(i){Ee(zh,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await qk(e,i)}else if(t instanceof y2?e.H_.We(t):t instanceof $j?e.H_.Ze(t):e.H_.je(t),!n.isEqual(De.min()))try{const i=await tY(e.localStore);n.compareTo(i)>=0&&await function(s,o){const a=s.H_.ot(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.U_.get(c);u&&s.U_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=s.U_.get(l);if(!u)return;s.U_.set(l,u.withResumeToken(Si.EMPTY_BYTE_STRING,u.snapshotVersion)),iY(s,l);const d=new jl(u.target,l,c,u.sequenceNumber);Gw(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(i){Ee(zh,"Failed to raise snapshot:",i),await qk(e,i)}}async function qk(e,t,n){if(!ug(t))throw t;e.W_.add(1),await ap(e),e.j_.set("Offline"),n||(n=()=>tY(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Ee(zh,"Retrying IndexedDB access"),await n(),e.W_.delete(1),await ey(e)})}async function Qk(e,t){const n=et(e);n.asyncQueue.verifyOperationInProgress(),Ee(zh,"RemoteStore received new credentials");const i=lp(n);n.W_.add(3),await ap(n),i&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.W_.delete(3),await ey(n)}async function w_e(e,t){const n=et(e);t?(n.W_.delete(2),await ey(n)):t||(n.W_.add(2),await ap(n),n.j_.set("Unknown"))}function dg(e){return e.J_||(e.J_=function(n,i,r){const s=et(n);return s.M_(),new g_e(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(e.datastore,e.asyncQueue,{xo:y_e.bind(null,e),No:E_e.bind(null,e),Lo:v_e.bind(null,e),p_:__e.bind(null,e)}),e.G_.push(async t=>{t?(e.J_.h_(),jw(e)?Xw(e):e.j_.set("Unknown")):(await e.J_.stop(),rY(e))})),e.J_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(t,n,i,r,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new dc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,i,r,s){const o=Date.now()+i,a=new Yw(t,n,o,r,s);return a.start(i),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Te(re.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sY(e,t){if(sl("AsyncQueue",`${t}: ${e}`),ug(e))return new Te(re.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{static emptySet(t){return new eh(t.comparator)}constructor(t){this.comparator=t?(n,i)=>t(n,i)||Re.comparator(n.key,i.key):(n,i)=>Re.comparator(n.key,i.key),this.keyedMap=v1(),this.sortedSet=new Cn(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,i)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof eh)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const i=new eh;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(){this.Z_=new Cn(Re.comparator)}track(t){const n=t.doc.key,i=this.Z_.get(n);i?t.type!==0&&i.type===3?this.Z_=this.Z_.insert(n,t):t.type===3&&i.type!==1?this.Z_=this.Z_.insert(n,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.Z_=this.Z_.insert(n,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.Z_=this.Z_.insert(n,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.Z_=this.Z_.remove(n):t.type===1&&i.type===2?this.Z_=this.Z_.insert(n,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.Z_=this.Z_.insert(n,{type:2,doc:t.doc}):Me():this.Z_=this.Z_.insert(n,t)}X_(){const t=[];return this.Z_.inorderTraversal((n,i)=>{t.push(i)}),t}}class Hh{constructor(t,n,i,r,s,o,a,l,c){this.query=t,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(t,n,i,r,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Hh(t,n,eh.emptySet(n),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&W5(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,i=t.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_e{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(t=>t.ra())}}class S_e{constructor(){this.queries=eL(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(n,i){const r=et(n),s=r.queries;r.queries=eL(),s.forEach((o,a)=>{for(const l of a.ta)l.onError(i)})})(this,new Te(re.ABORTED,"Firestore shutting down"))}}function eL(){return new Dd(e=>Rj(e),W5)}async function I_e(e,t){const n=et(e);let i=3;const r=t.query;let s=n.queries.get(r);s?!s.na()&&t.ra()&&(i=2):(s=new T_e,i=t.ra()?0:1);try{switch(i){case 0:s.ea=await n.onListen(r,!0);break;case 1:s.ea=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const a=sY(o,`Initialization of query '${uf(t.query)}' failed`);return void t.onError(a)}n.queries.set(r,s),s.ta.push(t),t.sa(n.onlineState),s.ea&&t.oa(s.ea)&&Ww(n)}async function x_e(e,t){const n=et(e),i=t.query;let r=3;const s=n.queries.get(i);if(s){const o=s.ta.indexOf(t);o>=0&&(s.ta.splice(o,1),s.ta.length===0?r=t.ra()?0:1:!s.na()&&t.ra()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function C_e(e,t){const n=et(e);let i=!1;for(const r of t){const s=r.query,o=n.queries.get(s);if(o){for(const a of o.ta)a.oa(r)&&(i=!0);o.ea=r}}i&&Ww(n)}function A_e(e,t,n){const i=et(e),r=i.queries.get(t);if(r)for(const s of r.ta)s.onError(n);i.queries.delete(t)}function Ww(e){e.ia.forEach(t=>{t.next()})}var N4,tL;(tL=N4||(N4={}))._a="default",tL.Cache="cache";class M_e{constructor(t,n,i){this.query=t,this.aa=n,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=i||{}}oa(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)r.type!==3&&i.push(r);t=new Hh(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.ua?this.la(t)&&(this.aa.next(t),n=!0):this.ha(t,this.onlineState)&&(this.Pa(t),n=!0),this.ca=t,n}onError(t){this.aa.error(t)}sa(t){this.onlineState=t;let n=!1;return this.ca&&!this.ua&&this.ha(this.ca,t)&&(this.Pa(this.ca),n=!0),n}ha(t,n){if(!t.fromCache||!this.ra())return!0;const i=n!=="Offline";return(!this.options.Ta||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}la(t){if(t.docChanges.length>0)return!0;const n=this.ca&&this.ca.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Pa(t){t=Hh.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ua=!0,this.aa.next(t)}ra(){return this.options.source!==N4.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oY{constructor(t){this.key=t}}class aY{constructor(t){this.key=t}}class R_e{constructor(t,n){this.query=t,this.fa=n,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=pt(),this.mutatedKeys=pt(),this.ya=kj(t),this.wa=new eh(this.ya)}get Sa(){return this.fa}ba(t,n){const i=n?n.Da:new Jk,r=n?n.wa:this.wa;let s=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((u,d)=>{const f=r.get(u),h=K5(this.query,d)?d:null,m=!!f&&this.mutatedKeys.has(f.key),p=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let b=!1;f&&h?f.data.isEqual(h.data)?m!==p&&(i.track({type:3,doc:h}),b=!0):this.va(f,h)||(i.track({type:2,doc:h}),b=!0,(l&&this.ya(h,l)>0||c&&this.ya(h,c)<0)&&(a=!0)):!f&&h?(i.track({type:0,doc:h}),b=!0):f&&!h&&(i.track({type:1,doc:f}),b=!0,(l||c)&&(a=!0)),b&&(h?(o=o.add(h),s=p?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),i.track({type:1,doc:u})}return{wa:o,Da:i,ls:a,mutatedKeys:s}}va(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,i,r){const s=this.wa;this.wa=t.wa,this.mutatedKeys=t.mutatedKeys;const o=t.Da.X_();o.sort((u,d)=>function(h,m){const p=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Me()}};return p(h)-p(m)}(u.type,d.type)||this.ya(u.doc,d.doc)),this.Ca(i),r=r!=null&&r;const a=n&&!r?this.Fa():[],l=this.pa.size===0&&this.current&&!r?1:0,c=l!==this.ga;return this.ga=l,o.length!==0||c?{snapshot:new Hh(this.query,t.wa,s,o,t.mutatedKeys,l===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ma:a}:{Ma:a}}sa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new Jk,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(t){return!this.fa.has(t)&&!!this.wa.has(t)&&!this.wa.get(t).hasLocalMutations}Ca(t){t&&(t.addedDocuments.forEach(n=>this.fa=this.fa.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.fa=this.fa.delete(n)),this.current=t.current)}Fa(){if(!this.current)return[];const t=this.pa;this.pa=pt(),this.wa.forEach(i=>{this.xa(i.key)&&(this.pa=this.pa.add(i.key))});const n=[];return t.forEach(i=>{this.pa.has(i)||n.push(new aY(i))}),this.pa.forEach(i=>{t.has(i)||n.push(new oY(i))}),n}Oa(t){this.fa=t.gs,this.pa=pt();const n=this.ba(t.documents);return this.applyChanges(n,!0)}Na(){return Hh.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Kw="SyncEngine";class k_e{constructor(t,n,i){this.query=t,this.targetId=n,this.view=i}}class L_e{constructor(t){this.key=t,this.Ba=!1}}class D_e{constructor(t,n,i,r,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.La={},this.ka=new Dd(a=>Rj(a),W5),this.qa=new Map,this.Qa=new Set,this.$a=new Cn(Re.comparator),this.Ka=new Map,this.Ua=new Fw,this.Wa={},this.Ga=new Map,this.za=Bh.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function N_e(e,t,n=!0){const i=fY(e);let r;const s=i.ka.get(t);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.Na()):r=await lY(i,t,n,!0),r}async function O_e(e,t){const n=fY(e);await lY(n,t,!0,!1)}async function lY(e,t,n,i){const r=await s_e(e.localStore,Po(t)),s=r.targetId,o=e.sharedClientState.addLocalQueryTarget(s,n);let a;return i&&(a=await P_e(e,t,s,o==="current",r.resumeToken)),e.isPrimaryClient&&n&&nY(e.remoteStore,r),a}async function P_e(e,t,n,i,r){e.Ha=(d,f,h)=>async function(p,b,E,y){let v=b.view.ba(E);v.ls&&(v=await jk(p.localStore,b.query,!1).then(({documents:w})=>b.view.ba(w,v)));const _=y&&y.targetChanges.get(b.targetId),S=y&&y.targetMismatches.get(b.targetId)!=null,M=b.view.applyChanges(v,p.isPrimaryClient,_,S);return iL(p,b.targetId,M.Ma),M.snapshot}(e,d,f,h);const s=await jk(e.localStore,t,!0),o=new R_e(t,s.gs),a=o.ba(s.documents),l=op.createSynthesizedTargetChangeForCurrentChange(n,i&&e.onlineState!=="Offline",r),c=o.applyChanges(a,e.isPrimaryClient,l);iL(e,n,c.Ma);const u=new k_e(t,n,o);return e.ka.set(t,u),e.qa.has(n)?e.qa.get(n).push(t):e.qa.set(n,[t]),c.snapshot}async function F_e(e,t,n){const i=et(e),r=i.ka.get(t),s=i.qa.get(r.targetId);if(s.length>1)return i.qa.set(r.targetId,s.filter(o=>!W5(o,t))),void i.ka.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await L4(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&$w(i.remoteStore,r.targetId),O4(i,r.targetId)}).catch(G5)):(O4(i,r.targetId),await L4(i.localStore,r.targetId,!0))}async function B_e(e,t){const n=et(e),i=n.ka.get(t),r=n.qa.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),$w(n.remoteStore,i.targetId))}async function cY(e,t){const n=et(e);try{const i=await i_e(n.localStore,t);t.targetChanges.forEach((r,s)=>{const o=n.Ka.get(s);o&&(Bt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.Ba=!0:r.modifiedDocuments.size>0?Bt(o.Ba):r.removedDocuments.size>0&&(Bt(o.Ba),o.Ba=!1))}),await dY(n,i,t)}catch(i){await G5(i)}}function nL(e,t,n){const i=et(e);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.ka.forEach((s,o)=>{const a=o.view.sa(t);a.snapshot&&r.push(a.snapshot)}),function(o,a){const l=et(o);l.onlineState=a;let c=!1;l.queries.forEach((u,d)=>{for(const f of d.ta)f.sa(a)&&(c=!0)}),c&&Ww(l)}(i.eventManager,t),r.length&&i.La.p_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function z_e(e,t,n){const i=et(e);i.sharedClientState.updateQueryState(t,"rejected",n);const r=i.Ka.get(t),s=r&&r.key;if(s){let o=new Cn(Re.comparator);o=o.insert(s,si.newNoDocument(s,De.min()));const a=pt().add(s),l=new Q5(De.min(),new Map,new Cn(ut),o,a);await cY(i,l),i.$a=i.$a.remove(s),i.Ka.delete(t),Zw(i)}else await L4(i.localStore,t,!1).then(()=>O4(i,t,n)).catch(G5)}function O4(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.qa.get(t))e.ka.delete(i),n&&e.La.Ja(i,n);e.qa.delete(t),e.isPrimaryClient&&e.Ua.br(t).forEach(i=>{e.Ua.containsKey(i)||uY(e,i)})}function uY(e,t){e.Qa.delete(t.path.canonicalString());const n=e.$a.get(t);n!==null&&($w(e.remoteStore,n),e.$a=e.$a.remove(t),e.Ka.delete(n),Zw(e))}function iL(e,t,n){for(const i of n)i instanceof oY?(e.Ua.addReference(i.key,t),H_e(e,i)):i instanceof aY?(Ee(Kw,"Document no longer in limbo: "+i.key),e.Ua.removeReference(i.key,t),e.Ua.containsKey(i.key)||uY(e,i.key)):Me()}function H_e(e,t){const n=t.key,i=n.path.canonicalString();e.$a.get(n)||e.Qa.has(i)||(Ee(Kw,"New document in limbo: "+n),e.Qa.add(i),Zw(e))}function Zw(e){for(;e.Qa.size>0&&e.$a.size<e.maxConcurrentLimboResolutions;){const t=e.Qa.values().next().value;e.Qa.delete(t);const n=new Re(an.fromString(t)),i=e.za.next();e.Ka.set(i,new L_e(n)),e.$a=e.$a.insert(n,i),nY(e.remoteStore,new jl(Po(Lw(n.path)),i,"TargetPurposeLimboResolution",X5.ae))}}async function dY(e,t,n){const i=et(e),r=[],s=[],o=[];i.ka.isEmpty()||(i.ka.forEach((a,l)=>{o.push(i.Ha(l,t,n).then(c=>{var u;if((c||n)&&i.isPrimaryClient){const d=c?!c.fromCache:(u=n==null?void 0:n.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;i.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){r.push(c);const d=zw.Yi(l.targetId,c);s.push(d)}}))}),await Promise.all(o),i.La.p_(r),await async function(l,c){const u=et(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>ie.forEach(c,f=>ie.forEach(f.Hi,h=>u.persistence.referenceDelegate.addReference(d,f.targetId,h)).next(()=>ie.forEach(f.Ji,h=>u.persistence.referenceDelegate.removeReference(d,f.targetId,h)))))}catch(d){if(!ug(d))throw d;Ee(Hw,"Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const h=u.Ts.get(f),m=h.snapshotVersion,p=h.withLastLimboFreeSnapshotVersion(m);u.Ts=u.Ts.insert(f,p)}}}(i.localStore,s))}async function V_e(e,t){const n=et(e);if(!n.currentUser.isEqual(t)){Ee(Kw,"User change. New user:",t.toKey());const i=await eY(n.localStore,t);n.currentUser=t,function(s,o){s.Ga.forEach(a=>{a.forEach(l=>{l.reject(new Te(re.CANCELLED,o))})}),s.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await dY(n,i.Rs)}}function $_e(e,t){const n=et(e),i=n.Ka.get(t);if(i&&i.Ba)return pt().add(i.key);{let r=pt();const s=n.qa.get(t);if(!s)return r;for(const o of s){const a=n.ka.get(o);r=r.unionWith(a.view.Sa)}return r}}function fY(e){const t=et(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=cY.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=$_e.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=z_e.bind(null,t),t.La.p_=C_e.bind(null,t.eventManager),t.La.Ja=A_e.bind(null,t.eventManager),t}class d6{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=J5(t.databaseInfo.databaseId),this.sharedClientState=this.Za(t),this.persistence=this.Xa(t),await this.persistence.start(),this.localStore=this.eu(t),this.gcScheduler=this.tu(t,this.localStore),this.indexBackfillerScheduler=this.nu(t,this.localStore)}tu(t,n){return null}nu(t,n){return null}eu(t){return n_e(this.persistence,new J9e,t.initialUser,this.serializer)}Xa(t){return new Jj(Bw.ri,this.serializer)}Za(t){return new a_e}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}d6.provider={build:()=>new d6};class G_e extends d6{constructor(t){super(),this.cacheSizeBytes=t}tu(t,n){Bt(this.persistence.referenceDelegate instanceof u6);const i=this.persistence.referenceDelegate.garbageCollector;return new F9e(i,t.asyncQueue,n)}Xa(t){const n=this.cacheSizeBytes!==void 0?cr.withCacheSize(this.cacheSizeBytes):cr.DEFAULT;return new Jj(i=>u6.ri(i,n),this.serializer)}}class P4{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>nL(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=V_e.bind(null,this.syncEngine),await w_e(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new S_e}()}createDatastore(t){const n=J5(t.databaseInfo.databaseId),i=function(s){return new f_e(s)}(t.databaseInfo);return function(s,o,a,l){return new p_e(s,o,a,l)}(t.authCredentials,t.appCheckCredentials,i,n)}createRemoteStore(t){return function(i,r,s,o,a){return new b_e(i,r,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>nL(this.syncEngine,n,0),function(){return Kk.D()?new Kk:new l_e}())}createSyncEngine(t,n){return function(r,s,o,a,l,c,u){const d=new D_e(r,s,o,a,l,c);return u&&(d.ja=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(r){const s=et(r);Ee(zh,"RemoteStore shutting down."),s.W_.add(5),await ap(s),s.z_.shutdown(),s.j_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}P4.provider={build:()=>new P4};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_e{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.iu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.iu(this.observer.error,t):sl("Uncaught Error in snapshot listener:",t.toString()))}su(){this.muted=!0}iu(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_e{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Te(re.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(r,s){const o=et(r),a={documents:s.map(d=>c6(o.serializer,d))},l=await o.Co("BatchGetDocuments",o.serializer.databaseId,an.emptyPath(),a,s.length),c=new Map;l.forEach(d=>{const f=v9e(o.serializer,d);c.set(f.key.toString(),f)});const u=[];return s.forEach(d=>{const f=c.get(d.toString());Bt(!!f),u.push(f)}),u}(this.datastore,t);return n.forEach(i=>this.recordVersion(i)),n}set(t,n){this.write(n.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,n){try{this.write(n.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new Nw(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach(n=>{t.delete(n.key.toString())}),t.forEach((n,i)=>{const r=Re.fromPath(i);this.mutations.push(new Hj(r,this.precondition(r)))}),await async function(i,r){const s=et(i),o={writes:r.map(a=>w9e(s.serializer,a))};await s.So("Commit",s.serializer.databaseId,an.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let n;if(t.isFoundDocument())n=t.version;else{if(!t.isNoDocument())throw Me();n=De.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!n.isEqual(i))throw new Te(re.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),n)}precondition(t){const n=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&n?n.isEqual(De.min())?rs.exists(!1):rs.updateTime(n):rs.none()}preconditionForUpdate(t){const n=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&n){if(n.isEqual(De.min()))throw new Te(re.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return rs.updateTime(n)}return rs.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_e{constructor(t,n,i,r,s){this.asyncQueue=t,this.datastore=n,this.options=i,this.updateFunction=r,this.deferred=s,this.Tu=i.maxAttempts,this.a_=new Vw(this.asyncQueue,"transaction_retry")}Iu(){this.Tu-=1,this.Eu()}Eu(){this.a_.Xo(async()=>{const t=new j_e(this.datastore),n=this.du(t);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.Au(r)}))}).catch(i=>{this.Au(i)})})}du(t){try{const n=this.updateFunction(t);return!rp(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Au(t){this.Tu>0&&this.Ru(t)?(this.Tu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Eu(),Promise.resolve()))):this.deferred.reject(t)}Ru(t){if(t.name==="FirebaseError"){const n=t.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!d9e(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dc="FirestoreClient";class W_e{constructor(t,n,i,r,s){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Di.UNAUTHENTICATED,this.clientId=mj.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async o=>{Ee(Dc,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(Ee(Dc,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new dc;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const i=sY(n,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function D7(e,t){e.asyncQueue.verifyOperationInProgress(),Ee(Dc,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener(async r=>{i.isEqual(r)||(await eY(t.localStore,r),i=r)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function rL(e,t){e.asyncQueue.verifyOperationInProgress();const n=await K_e(e);Ee(Dc,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(i=>Qk(t.remoteStore,i)),e.setAppCheckTokenChangeListener((i,r)=>Qk(t.remoteStore,r)),e._onlineComponents=t}async function K_e(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Ee(Dc,"Using user provided OfflineComponentProvider");try{await D7(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(r){return r.name==="FirebaseError"?r.code===re.FAILED_PRECONDITION||r.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Nh("Error using user provided cache. Falling back to memory cache: "+n),await D7(e,new d6)}}else Ee(Dc,"Using default OfflineComponentProvider"),await D7(e,new G_e(void 0));return e._offlineComponents}async function hY(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Ee(Dc,"Using user provided OnlineComponentProvider"),await rL(e,e._uninitializedComponentsProvider._online)):(Ee(Dc,"Using default OnlineComponentProvider"),await rL(e,new P4))),e._onlineComponents}function Z_e(e){return hY(e).then(t=>t.datastore)}async function q_e(e){const t=await hY(e),n=t.eventManager;return n.onListen=N_e.bind(null,t.syncEngine),n.onUnlisten=F_e.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=O_e.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=B_e.bind(null,t.syncEngine),n}function Q_e(e,t,n={}){const i=new dc;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new X_e({next:f=>{u.su(),o.enqueueAndForget(()=>x_e(s,d));const h=f.docs.has(a);!h&&f.fromCache?c.reject(new Te(re.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&f.fromCache&&l&&l.source==="server"?c.reject(new Te(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new M_e(Lw(a.path),u,{includeMetadataChanges:!0,Ta:!0});return I_e(s,d)}(await q_e(e),e.asyncQueue,t,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gY(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sL=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J_e(e,t,n){if(!n)throw new Te(re.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function ewe(e,t,n,i){if(t===!0&&i===!0)throw new Te(re.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function oL(e){if(!Re.isDocumentKey(e))throw new Te(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function qw(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Me()}function f6(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Te(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=qw(e);throw new Te(re.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mY="firestore.googleapis.com",aL=!0;class lL{constructor(t){var n,i;if(t.host===void 0){if(t.ssl!==void 0)throw new Te(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=mY,this.ssl=aL}else this.host=t.host,this.ssl=(n=t.ssl)!==null&&n!==void 0?n:aL;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=Qj;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<O9e)throw new Te(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}ewe("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gY((i=t.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Te(re.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Te(re.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Te(re.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Qw{constructor(t,n,i,r){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lL({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Te(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Te(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lL(t),t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new hve;switch(i.type){case"firstParty":return new Uve(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Te(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=sL.get(n);i&&(Ee("ComponentProvider","Removing Datastore"),sL.delete(n),i.terminate())}(this),Promise.resolve()}}function twe(e,t,n,i={}){var r;const s=(e=f6(e,Qw))._getSettings(),o=`${t}:${n}`;if(s.host!==mY&&s.host!==o&&Nh("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,l;if(typeof i.mockUserToken=="string")a=i.mockUserToken,l=Di.MOCK_USER;else{a=ZX(i.mockUserToken,(r=e._app)===null||r===void 0?void 0:r.options.projectId);const c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new Te(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Di(c)}e._authCredentials=new gve(new gj(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(t,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Jw(this.firestore,t,this._query)}}class gs{constructor(t,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new pm(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new gs(this.firestore,t,this._key)}}class pm extends Jw{constructor(t,n,i){super(t,n,Lw(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new gs(this.firestore,null,new Re(t))}withConverter(t){return new pm(this.firestore,t,this._path)}}function pY(e,t,...n){if(e=so(e),arguments.length===1&&(t=mj.newId()),J_e("doc","path",t),e instanceof Qw){const i=an.fromString(t,...n);return oL(i),new gs(e,null,new Re(i))}{if(!(e instanceof gs||e instanceof pm))throw new Te(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(an.fromString(t,...n));return oL(i),new gs(e.firestore,e instanceof pm?e.converter:null,new Re(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cL="AsyncQueue";class uL{constructor(t=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new Vw(this,"async_queue_retry"),this.Su=()=>{const i=L7();i&&Ee(cL,"Visibility state changed to "+i.visibilityState),this.a_.t_()},this.bu=t;const n=L7();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Du(),this.vu(t)}enterRestrictedMode(t){if(!this.mu){this.mu=!0,this.yu=t||!1;const n=L7();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Su)}}enqueue(t){if(this.Du(),this.mu)return new Promise(()=>{});const n=new dc;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Vu.push(t),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(t){if(!ug(t))throw t;Ee(cL,"Operation failed with retryable error: "+t)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(t){const n=this.bu.then(()=>(this.pu=!0,t().catch(i=>{this.gu=i,this.pu=!1;const r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw sl("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.pu=!1,i))));return this.bu=n,n}enqueueAfterDelay(t,n,i){this.Du(),this.wu.indexOf(t)>-1&&(n=0);const r=Yw.createAndSchedule(this,t,n,i,s=>this.Fu(s));return this.fu.push(r),r}Du(){this.gu&&Me()}verifyOperationInProgress(){}async Mu(){let t;do t=this.bu,await t;while(t!==this.bu)}xu(t){for(const n of this.fu)if(n.timerId===t)return!0;return!1}Ou(t){return this.Mu().then(()=>{this.fu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.fu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Mu()})}Nu(t){this.wu.push(t)}Fu(t){const n=this.fu.indexOf(t);this.fu.splice(n,1)}}class eT extends Qw{constructor(t,n,i,r){super(t,n,i,r),this.type="firestore",this._queue=new uL,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new uL(t),this._firestoreClient=void 0,await t}}}function nwe(e,t){const n=typeof e=="object"?e:sj(),i=typeof e=="string"?e:n6,r=tj(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=WX("firestore");s&&twe(r,...s)}return r}function UY(e){if(e._terminated)throw new Te(re.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||iwe(e),e._firestoreClient}function iwe(e){var t,n,i;const r=e._freezeSettings(),s=function(a,l,c,u){return new kve(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,gY(u.experimentalLongPollingOptions),u.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,r);e._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(e._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),e._firestoreClient=new W_e(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(t){this._byteString=t}static fromBase64String(t){try{return new ol(Si.fromBase64String(t))}catch(n){throw new Te(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new ol(Si.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Te(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pi(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Te(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Te(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return ut(this._lat,t._lat)||ut(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rwe=/^__.*__$/;class swe{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return this.fieldMask!==null?new Nd(t,this.data,this.fieldMask,n,this.fieldTransforms):new sp(t,this.data,n,this.fieldTransforms)}}class bY{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return new Nd(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function yY(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Me()}}class rT{constructor(t,n,i,r,s,o){this.settings=t,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Bu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(t){return new rT(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(t){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(t),r=this.ku({path:i,Qu:!1});return r.$u(t),r}Ku(t){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(t),r=this.ku({path:i,Qu:!1});return r.Bu(),r}Uu(t){return this.ku({path:void 0,Qu:!0})}Wu(t){return h6(t,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Bu(){if(this.path)for(let t=0;t<this.path.length;t++)this.$u(this.path.get(t))}$u(t){if(t.length===0)throw this.Wu("Document fields must not be empty");if(yY(this.Lu)&&rwe.test(t))throw this.Wu('Document fields cannot begin and end with "__"')}}class owe{constructor(t,n,i){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=i||J5(t)}ju(t,n,i,r=!1){return new rT({Lu:t,methodName:n,zu:i,path:Pi.emptyPath(),Qu:!1,Gu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function awe(e){const t=e._freezeSettings(),n=J5(e._databaseId);return new owe(e._databaseId,!!t.ignoreUndefinedProperties,n)}function lwe(e,t,n,i,r,s={}){const o=e.ju(s.merge||s.mergeFields?2:0,t,n,r);sT("Data must be an object, but it was:",o,i);const a=EY(i,o);let l,c;if(s.merge)l=new cs(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const d of s.mergeFields){const f=F4(t,d,n);if(!o.contains(f))throw new Te(re.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);_Y(u,f)||u.push(f)}l=new cs(u),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new swe(new dr(a),l,c)}class ny extends tT{_toFieldTransform(t){if(t.Lu!==2)throw t.Lu===1?t.Wu(`${this._methodName}() can only appear at the top level of your update data`):t.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof ny}}function cwe(e,t,n,i){const r=e.ju(1,t,n);sT("Data must be an object, but it was:",r,i);const s=[],o=dr.empty();Ld(i,(l,c)=>{const u=oT(t,l,n);c=so(c);const d=r.Ku(u);if(c instanceof ny)s.push(u);else{const f=iy(c,d);f!=null&&(s.push(u),o.set(u,f))}});const a=new cs(s);return new bY(o,a,r.fieldTransforms)}function uwe(e,t,n,i,r,s){const o=e.ju(1,t,n),a=[F4(t,i,n)],l=[r];if(s.length%2!=0)throw new Te(re.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(F4(t,s[f])),l.push(s[f+1]);const c=[],u=dr.empty();for(let f=a.length-1;f>=0;--f)if(!_Y(c,a[f])){const h=a[f];let m=l[f];m=so(m);const p=o.Ku(h);if(m instanceof ny)c.push(h);else{const b=iy(m,p);b!=null&&(c.push(h),u.set(h,b))}}const d=new cs(c);return new bY(u,d,o.fieldTransforms)}function iy(e,t){if(vY(e=so(e)))return sT("Unsupported field value:",t,e),EY(e,t);if(e instanceof tT)return function(i,r){if(!yY(r.Lu))throw r.Wu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Wu(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Qu&&t.Lu!==4)throw t.Wu("Nested arrays are not supported");return function(i,r){const s=[];let o=0;for(const a of i){let l=iy(a,r.Uu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(e,t)}return function(i,r){if((i=so(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return n9e(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=di.fromDate(i);return{timestampValue:l6(r.serializer,s)}}if(i instanceof di){const s=new di(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:l6(r.serializer,s)}}if(i instanceof nT)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ol)return{bytesValue:Xj(r.serializer,i._byteString)};if(i instanceof gs){const s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.Wu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Pw(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof iT)return function(o,a){return{mapValue:{fields:{[wj]:{stringValue:Tj},[i6]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Wu("VectorValues must only contain numeric values.");return Dw(a.serializer,c)})}}}}}}(i,r);throw r.Wu(`Unsupported field value: ${qw(i)}`)}(e,t)}function EY(e,t){const n={};return Uj(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ld(e,(i,r)=>{const s=iy(r,t.qu(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function vY(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof di||e instanceof nT||e instanceof ol||e instanceof gs||e instanceof tT||e instanceof iT)}function sT(e,t,n){if(!vY(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const i=qw(n);throw i==="an object"?t.Wu(e+" a custom object"):t.Wu(e+" "+i)}}function F4(e,t,n){if((t=so(t))instanceof ty)return t._internalPath;if(typeof t=="string")return oT(e,t);throw h6("Field path arguments must be of type string or ",e,!1,void 0,n)}const dwe=new RegExp("[~\\*/\\[\\]]");function oT(e,t,n){if(t.search(dwe)>=0)throw h6(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new ty(...t.split("."))._internalPath}catch{throw h6(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function h6(e,t,n,i,r){const s=i&&!i.isEmpty(),o=r!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new Te(re.INVALID_ARGUMENT,a+e+l)}function _Y(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g6{constructor(t,n,i,r,s){this._firestore=t,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new gs(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new fwe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(wY("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class fwe extends g6{data(){return super.data()}}function wY(e,t){return typeof t=="string"?oT(e,t):t instanceof ty?t._internalPath:t._delegate._internalPath}class TY{convertValue(t,n="none"){switch(kc(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Sn(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Rc(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Me()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const i={};return Ld(t,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(t){var n,i,r;const s=(r=(i=(n=t.fields)===null||n===void 0?void 0:n[i6].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(o=>Sn(o.doubleValue));return new iT(s)}convertGeoPoint(t){return new nT(Sn(t.latitude),Sn(t.longitude))}convertArray(t,n){return(t.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(t,n){switch(n){case"previous":const i=j5(t);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(dm(t));default:return null}}convertTimestamp(t){const n=Mc(t);return new di(n.seconds,n.nanos)}convertDocumentKey(t,n){const i=an.fromString(t);Bt(qj(i));const r=new fm(i.get(1),i.get(3)),s=new Re(i.popFirst(5));return r.isEqual(n)||sl(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hwe(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}class gwe extends TY{constructor(t){super(),this.firestore=t}convertBytes(t){return new ol(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new gs(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SY{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class aT extends g6{constructor(t,n,i,r,s,o){super(t,n,i,r,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new mwe(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const i=this._document.data.field(wY("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class mwe extends aT{data(t={}){return super.data(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pwe(e){e=f6(e,gs);const t=f6(e.firestore,eT);return Q_e(UY(t),e._key).then(n=>Uwe(t,e,n))}class IY extends TY{constructor(t){super(),this.firestore=t}convertBytes(t){return new ol(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new gs(this.firestore,null,n)}}function Uwe(e,t,n){const i=n.docs.get(t._key),r=new IY(e);return new aT(e,r,t._key,i,new SY(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bwe={maxAttempts:5};function w1(e,t){if((e=so(e)).firestore!==t)throw new Te(re.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ywe{constructor(t,n){this._firestore=t,this._transaction=n,this._dataReader=awe(t)}get(t){const n=w1(t,this._firestore),i=new gwe(this._firestore);return this._transaction.lookup([n._key]).then(r=>{if(!r||r.length!==1)return Me();const s=r[0];if(s.isFoundDocument())return new g6(this._firestore,i,s.key,s,n.converter);if(s.isNoDocument())return new g6(this._firestore,i,n._key,null,n.converter);throw Me()})}set(t,n,i){const r=w1(t,this._firestore),s=hwe(r.converter,n,i),o=lwe(this._dataReader,"Transaction.set",r._key,s,r.converter!==null,i);return this._transaction.set(r._key,o),this}update(t,n,i,...r){const s=w1(t,this._firestore);let o;return o=typeof(n=so(n))=="string"||n instanceof ty?uwe(this._dataReader,"Transaction.update",s._key,n,i,r):cwe(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,o),this}delete(t){const n=w1(t,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ewe extends ywe{constructor(t,n){super(t,n),this._firestore=t}get(t){const n=w1(t,this._firestore),i=new IY(this._firestore);return super.get(t).then(r=>new aT(this._firestore,i,n._key,r._document,new SY(!1,!1),n.converter))}}function vwe(e,t,n){e=f6(e,eT);const i=Object.assign(Object.assign({},bwe),n);return function(s){if(s.maxAttempts<1)throw new Te(re.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(s,o,a){const l=new dc;return s.asyncQueue.enqueueAndForget(async()=>{const c=await Z_e(s);new Y_e(s.asyncQueue,c,a,o,l).Iu()}),l.promise}(UY(e),r=>t(new Ewe(e,r)),i)}(function(t,n=!0){(function(r){cg=r})(ij),lm(new Dh("firestore",(i,{instanceIdentifier:r,options:s})=>{const o=i.getProvider("app").getImmediate(),a=new eT(new mve(i.getProvider("auth-internal")),new bve(o,i.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Te(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fm(c.options.projectId,u)}(o,r),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),cc(pk,Uk,t),cc(pk,Uk,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xY="firebasestorage.googleapis.com",CY="storageBucket",_we=2*60*1e3,wwe=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn extends kd{constructor(t,n,i=0){super(N7(t),`Firebase Storage: ${n} (${N7(t)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Hn.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return N7(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Bn;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Bn||(Bn={}));function N7(e){return"storage/"+e}function lT(){const e="An unknown error occurred, please check the error payload for server response.";return new Hn(Bn.UNKNOWN,e)}function Twe(e){return new Hn(Bn.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Swe(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Hn(Bn.UNAUTHENTICATED,e)}function Iwe(){return new Hn(Bn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function xwe(e){return new Hn(Bn.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function Cwe(){return new Hn(Bn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Awe(){return new Hn(Bn.CANCELED,"User canceled the upload/download.")}function Mwe(e){return new Hn(Bn.INVALID_URL,"Invalid URL '"+e+"'.")}function Rwe(e){return new Hn(Bn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function kwe(){return new Hn(Bn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+CY+"' property when initializing the app?")}function Lwe(){return new Hn(Bn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Dwe(e){return new Hn(Bn.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function B4(e){return new Hn(Bn.INVALID_ARGUMENT,e)}function AY(){return new Hn(Bn.APP_DELETED,"The Firebase app was deleted.")}function Nwe(e){return new Hn(Bn.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function u0(e,t){return new Hn(Bn.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Qg(e){throw new Hn(Bn.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let i;try{i=Lr.makeFromUrl(t,n)}catch{return new Lr(t,"")}if(i.path==="")return i;throw Rwe(t)}static makeFromUrl(t,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function s(_){_.path.charAt(_.path.length-1)==="/"&&(_.path_=_.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+r+o,"i"),l={bucket:1,path:3};function c(_){_.path_=decodeURIComponent(_.path)}const u="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",h=new RegExp(`^https?://${d}/${u}/b/${r}/o${f}`,"i"),m={bucket:1,path:3},p=n===xY?"(?:storage.googleapis.com|storage.cloud.google.com)":n,b="([^?#]*)",E=new RegExp(`^https?://${p}/${r}/${b}`,"i"),v=[{regex:a,indices:l,postModify:s},{regex:h,indices:m,postModify:c},{regex:E,indices:{bucket:1,path:2},postModify:c}];for(let _=0;_<v.length;_++){const S=v[_],M=S.regex.exec(t);if(M){const w=M[S.indices.bucket];let T=M[S.indices.path];T||(T=""),i=new Lr(w,T),S.postModify(i);break}}if(i==null)throw Mwe(t);return i}}class Owe{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pwe(e,t,n){let i=1,r=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...b){c||(c=!0,t.apply(null,b))}function d(b){r=setTimeout(()=>{r=null,e(h,l())},b)}function f(){s&&clearTimeout(s)}function h(b,...E){if(c){f();return}if(b){f(),u.call(null,b,...E);return}if(l()||o){f(),u.call(null,b,...E);return}i<64&&(i*=2);let v;a===1?(a=2,v=0):v=(i+Math.random())*1e3,d(v)}let m=!1;function p(b){m||(m=!0,f(),!c&&(r!==null?(b||(a=2),clearTimeout(r),d(0)):b||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,p(!0)},n),p}function Fwe(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bwe(e){return e!==void 0}function zwe(e){return typeof e=="object"&&!Array.isArray(e)}function MY(e){return typeof e=="string"||e instanceof String}function dL(e){return cT()&&e instanceof Blob}function cT(){return typeof Blob<"u"}function fL(e,t,n,i){if(i<t)throw B4(`Invalid value for '${e}'. Expected ${t} or greater.`);if(i>n)throw B4(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hwe(e,t,n){let i=t;return n==null&&(i=`https://${t}`),`${n}://${i}/v0${e}`}function Vwe(e){const t=encodeURIComponent;let n="?";for(const i in e)if(e.hasOwnProperty(i)){const r=t(i)+"="+t(e[i]);n=n+r+"&"}return n=n.slice(0,-1),n}var zu;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(zu||(zu={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $we(e,t){const n=e>=500&&e<600,r=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||r||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gwe{constructor(t,n,i,r,s,o,a,l,c,u,d,f=!0){this.url_=t,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=d,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,m)=>{this.resolve_=h,this.reject_=m,this.start_()})}start_(){const t=(i,r)=>{if(r){i(!1,new IU(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===zu.NO_ERROR,l=s.getStatus();if(!a||$we(l,this.additionalRetryCodes_)&&this.retry){const u=s.getErrorCode()===zu.ABORT;i(!1,new IU(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;i(!0,new IU(c,s))})},n=(i,r)=>{const s=this.resolve_,o=this.reject_,a=r.connection;if(r.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());Bwe(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=lT();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(r.canceled){const l=this.appDelete_?AY():Awe();o(l)}else{const l=Cwe();o(l)}};this.canceled_?n(!1,new IU(!1,null,!0)):this.backoffId_=Pwe(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&Fwe(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class IU{constructor(t,n,i){this.wasSuccessCode=t,this.connection=n,this.canceled=!!i}}function Xwe(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function jwe(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function Ywe(e,t){t&&(e["X-Firebase-GMPID"]=t)}function Wwe(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function Kwe(e,t,n,i,r,s,o=!0){const a=Vwe(e.urlParams),l=e.url+a,c=Object.assign({},e.headers);return Ywe(c,t),Xwe(c,n),jwe(c,s),Wwe(c,i),new Gwe(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,r,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zwe(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function qwe(...e){const t=Zwe();if(t!==void 0){const n=new t;for(let i=0;i<e.length;i++)n.append(e[i]);return n.getBlob()}else{if(cT())return new Blob(e);throw new Hn(Bn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Qwe(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jwe(e){if(typeof atob>"u")throw Dwe("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ko={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class O7{constructor(t,n){this.data=t,this.contentType=n||null}}function eTe(e,t){switch(e){case ko.RAW:return new O7(RY(t));case ko.BASE64:case ko.BASE64URL:return new O7(kY(e,t));case ko.DATA_URL:return new O7(nTe(t),iTe(t))}throw lT()}function RY(e){const t=[];for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);if(i<=127)t.push(i);else if(i<=2047)t.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const s=i,o=e.charCodeAt(++n);i=65536|(s&1023)<<10|o&1023,t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?t.push(239,191,189):t.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(t)}function tTe(e){let t;try{t=decodeURIComponent(e)}catch{throw u0(ko.DATA_URL,"Malformed data URL.")}return RY(t)}function kY(e,t){switch(e){case ko.BASE64:{const r=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(r||s)throw u0(e,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case ko.BASE64URL:{const r=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(r||s)throw u0(e,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Jwe(t)}catch(r){throw r.message.includes("polyfill")?r:u0(e,"Invalid character found")}const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}class LY{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw u0(ko.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=rTe(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=t.substring(t.indexOf(",")+1)}}function nTe(e){const t=new LY(e);return t.base64?kY(ko.BASE64,t.rest):tTe(t.rest)}function iTe(e){return new LY(e).contentType}function rTe(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(t,n){let i=0,r="";dL(t)?(this.data_=t,i=t.size,r=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),i=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),i=t.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(t,n){if(dL(this.data_)){const i=this.data_,r=Qwe(i,t,n);return r===null?null:new Pl(r)}else{const i=new Uint8Array(this.data_.buffer,t,n-t);return new Pl(i,!0)}}static getBlob(...t){if(cT()){const n=t.map(i=>i instanceof Pl?i.data_:i);return new Pl(qwe.apply(null,n))}else{const n=t.map(o=>MY(o)?eTe(ko.RAW,o).data:o.data_);let i=0;n.forEach(o=>{i+=o.byteLength});const r=new Uint8Array(i);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)r[s++]=o[a]}),new Pl(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sTe(e){let t;try{t=JSON.parse(e)}catch{return null}return zwe(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oTe(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function aTe(e,t){const n=t.split("/").filter(i=>i.length>0).join("/");return e.length===0?n:e+"/"+n}function DY(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lTe(e,t){return t}class Xi{constructor(t,n,i,r){this.server=t,this.local=n||t,this.writable=!!i,this.xform=r||lTe}}let xU=null;function cTe(e){return!MY(e)||e.length<2?e:DY(e)}function uTe(){if(xU)return xU;const e=[];e.push(new Xi("bucket")),e.push(new Xi("generation")),e.push(new Xi("metageneration")),e.push(new Xi("name","fullPath",!0));function t(s,o){return cTe(o)}const n=new Xi("name");n.xform=t,e.push(n);function i(s,o){return o!==void 0?Number(o):o}const r=new Xi("size");return r.xform=i,e.push(r),e.push(new Xi("timeCreated")),e.push(new Xi("updated")),e.push(new Xi("md5Hash",null,!0)),e.push(new Xi("cacheControl",null,!0)),e.push(new Xi("contentDisposition",null,!0)),e.push(new Xi("contentEncoding",null,!0)),e.push(new Xi("contentLanguage",null,!0)),e.push(new Xi("contentType",null,!0)),e.push(new Xi("metadata","customMetadata",!0)),xU=e,xU}function dTe(e,t){function n(){const i=e.bucket,r=e.fullPath,s=new Lr(i,r);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function fTe(e,t,n){const i={};i.type="file";const r=n.length;for(let s=0;s<r;s++){const o=n[s];i[o.local]=o.xform(i,t[o.server])}return dTe(i,e),i}function hTe(e,t,n){const i=sTe(t);return i===null?null:fTe(e,i,n)}function gTe(e,t){const n={},i=t.length;for(let r=0;r<i;r++){const s=t[r];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}class mTe{constructor(t,n,i,r){this.url=t,this.method=n,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pTe(e){if(!e)throw lT()}function UTe(e,t){function n(i,r){const s=hTe(e,r,t);return pTe(s!==null),s}return n}function bTe(e){function t(n,i){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=Iwe():r=Swe():n.getStatus()===402?r=Twe(e.bucket):n.getStatus()===403?r=xwe(e.path):r=i,r.status=n.getStatus(),r.serverResponse=i.serverResponse,r}return t}function yTe(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function ETe(e,t,n){const i=Object.assign({},n);return i.fullPath=e.path,i.size=t.size(),i.contentType||(i.contentType=yTe(null,t)),i}function vTe(e,t,n,i,r){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let v="";for(let _=0;_<2;_++)v=v+Math.random().toString().slice(2);return v}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=ETe(t,i,r),u=gTe(c,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+l+"--",h=Pl.getBlob(d,i,f);if(h===null)throw Lwe();const m={name:c.fullPath},p=Hwe(s,e.host,e._protocol),b="POST",E=e.maxUploadRetryTime,y=new mTe(p,b,UTe(e,n),E);return y.urlParams=m,y.headers=o,y.body=h.uploadData(),y.errorHandler=bTe(t),y}class _Te{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=zu.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=zu.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=zu.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,i,r){if(this.sent_)throw Qg("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),r!==void 0)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Qg("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Qg("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Qg("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Qg("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class wTe extends _Te{initXhr(){this.xhr_.responseType="text"}}function TTe(){return new wTe}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(t,n){this._service=t,n instanceof Lr?this._location=n:this._location=Lr.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new pd(t,n)}get root(){const t=new Lr(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return DY(this._location.path)}get storage(){return this._service}get parent(){const t=oTe(this._location.path);if(t===null)return null;const n=new Lr(this._location.bucket,t);return new pd(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw Nwe(t)}}function STe(e,t,n){e._throwIfRoot("uploadBytes");const i=vTe(e.storage,e._location,uTe(),new Pl(t,!0),n);return e.storage.makeRequestWithTokens(i,TTe).then(r=>({metadata:r,ref:e}))}function ITe(e,t){const n=aTe(e._location.path,t),i=new Lr(e._location.bucket,n);return new pd(e.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xTe(e){return/^[A-Za-z]+:\/\//.test(e)}function CTe(e,t){return new pd(e,t)}function NY(e,t){if(e instanceof uT){const n=e;if(n._bucket==null)throw kwe();const i=new pd(n,n._bucket);return t!=null?NY(i,t):i}else return t!==void 0?ITe(e,t):e}function ATe(e,t){if(t&&xTe(t)){if(e instanceof uT)return CTe(e,t);throw B4("To use ref(service, url), the first argument must be a Storage instance.")}else return NY(e,t)}function hL(e,t){const n=t==null?void 0:t[CY];return n==null?null:Lr.makeFromBucketSpec(n,e)}function MTe(e,t,n,i={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:r}=i;r&&(e._overrideAuthToken=typeof r=="string"?r:ZX(r,e.app.options.projectId))}class uT{constructor(t,n,i,r,s){this.app=t,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=xY,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=_we,this._maxUploadRetryTime=wwe,this._requests=new Set,r!=null?this._bucket=Lr.makeFromBucketSpec(r,this._host):this._bucket=hL(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Lr.makeFromBucketSpec(this._url,t):this._bucket=hL(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){fL("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){fL("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(nj(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new pd(this,t)}_makeRequest(t,n,i,r,s=!0){if(this._deleted)return new Owe(AY());{const o=Kwe(t,this._appId,i,r,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,i,r).getPromise()}}const gL="@firebase/storage",mL="0.13.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OY="storage";function PY(e,t,n){return e=so(e),STe(e,t,n)}function FY(e,t){return e=so(e),ATe(e,t)}function RTe(e=sj(),t){e=so(e);const i=tj(e,OY).getImmediate({identifier:t}),r=WX("storage");return r&&kTe(i,...r),i}function kTe(e,t,n,i={}){MTe(e,t,n,i)}function LTe(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),r=e.getProvider("app-check-internal");return new uT(n,i,r,t,ij)}function DTe(){lm(new Dh(OY,LTe,"PUBLIC").setMultipleInstances(!0)),cc(gL,mL,""),cc(gL,mL,"esm2017")}DTe();let m6;try{m6=JSON.parse('{"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}')}catch{console.warn('Error JSON parsing firebase config. Supplied value: {"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}'),m6={}}let P7=null,F7=null,B7=null;const BY=()=>(P7||(P7=rj(m6)),P7),zY=()=>(F7||(F7=nwe(BY())),F7),NTe=()=>(B7||(B7=RTe(BY())),B7),HY=async()=>NTe(),OTe=async(e,t)=>{const n=JSON.stringify(t),i=new TextEncoder().encode(n),{encryptedBuffer:r,iv:s}=await A5(e,i);return{ciphertext:r,iv:s}},z4=async(e,t)=>{const n=e.ciphertext.toUint8Array(),i=e.iv.toUint8Array(),r=await em(i,n,t),s=new TextDecoder("utf-8").decode(new Uint8Array(r));return JSON.parse(s)},du=class du{};F(du,"cache",new WeakMap),F(du,"get",t=>du.cache.get(t)),F(du,"set",(t,n)=>{du.cache.set(t,Nl(n))});let Um=du;const VY=(e,t)=>{if(e.socket&&e.roomId&&e.roomKey){const n=Nl(t);return Um.get(e.socket)===n}return!0},dT=async({prefix:e,files:t})=>{const n=await HY(),i=[],r=[];return await Promise.all(t.map(async({id:s,buffer:o})=>{try{const a=FY(n,`${e}/${s}`);await PY(a,o,{cacheControl:`public, max-age=${REe}`}),r.push(s)}catch{i.push(s)}})),{savedFiles:r,erroredFiles:i}},pL=async(e,t)=>{const n=Nl(e),{ciphertext:i,iv:r}=await OTe(t,e);return{sceneVersion:n,ciphertext:ol.fromUint8Array(new Uint8Array(i)),iv:ol.fromUint8Array(r)}},PTe=async(e,t,n)=>{const{roomId:i,roomKey:r,socket:s}=e;if(!i||!r||!s||VY(e,t))return null;const o=zY(),a=pY(o,"scenes",i),l=await vwe(o,async u=>{const d=await u.get(a);if(!d.exists()){const b=await pL(t,r);return u.set(a,b),b}const f=d.data(),h=Yl(dd(await z4(f,r),null)),m=Yl(ww(t,h,n)),p=await pL(m,r);return u.update(a,p),p}),c=Yl(dd(await z4(l,r),null));return Um.set(s,c),c},FTe=async(e,t,n)=>{const i=zY(),r=pY(i,"scenes",e),s=await pwe(r);if(!s.exists())return null;const o=s.data(),a=Yl(dd(await z4(o,t),null));return n&&Um.set(n,a),a},$Y=async(e,t,n)=>{const i=[],r=new Map;return await Promise.all([...new Set(n)].map(async s=>{try{const o=`https://firebasestorage.googleapis.com/v0/b/${m6.storageBucket}/o/${encodeURIComponent(e.replace(/^\//,""))}%2F${s}`,a=await fetch(`${o}?alt=media`);if(a.status<400){const l=await a.arrayBuffer(),{data:c,metadata:u}=await e$(new Uint8Array(l),{decryptionKey:t}),d=new TextDecoder().decode(c);i.push({mimeType:u.mimeType||be.binary,id:s,dataURL:d,created:(u==null?void 0:u.created)||Date.now(),lastRetrieved:(u==null?void 0:u.created)||Date.now()})}else r.set(s,!0)}catch(o){r.set(s,!0),console.error(o)}})),{loadedFiles:i,erroredFiles:r}},GY=e=>e.isDeleted?e.updated>Date.now()-MEe:!id(e),Yl=e=>e.filter(t=>GY(t)),BTe="https://json.excalidraw.com/api/v2/",zTe="https://json.excalidraw.com/api/v2/post/",HTe=async()=>{const e=new Uint8Array(kEe);return window.crypto.getRandomValues(e),AP(e)},XY=/^#room=([a-zA-Z0-9_-]+),([a-zA-Z0-9_-]+)$/,UL=e=>{const t=new URL(e).hash;return XY.test(t)},VTe=e=>{const n=new URL(e).hash.match(XY);return n&&n[2].length!==22?(window.alert(k("alerts.invalidEncryptionKey")),null):n?{roomId:n[1],roomKey:n[2]}:null},$Te=async()=>{const e=await HTe(),t=await N_();if(!t)throw new Error("Couldn't generate room key");return{roomId:e,roomKey:t}},GTe=e=>`${window.location.origin}${window.location.pathname}#room=${e.roomId},${e.roomKey}`,XTe=async({buffer:e,decryptionKey:t})=>{let n;try{const s=e.slice(0,u2),o=e.slice(u2,e.byteLength);n=await em(new Uint8Array(s),o,t)}catch{const o=new Uint8Array(u2);n=await em(o,e,t)}const i=new window.TextDecoder("utf-8").decode(new Uint8Array(n)),r=JSON.parse(i);return{elements:r.elements||null,appState:r.appState||null}},jTe=async(e,t)=>{try{const n=await fetch(`${BTe}${e}`);if(!n.ok)return window.alert(k("alerts.importBackendFailed")),{};const i=await n.arrayBuffer();try{const{data:r}=await e$(new Uint8Array(i),{decryptionKey:t}),s=JSON.parse(new TextDecoder().decode(r));return{elements:s.elements||null,appState:s.appState||null}}catch(r){return console.warn("error when decoding shareLink data using the new format:",r),XTe({buffer:i,decryptionKey:t})}}catch(n){return window.alert(k("alerts.importBackendFailed")),console.error(n),{}}},bL=async(e,t,n)=>{let i;return e!=null&&t!=null?i=fd(await jTe(e,t),n==null?void 0:n.appState,n==null?void 0:n.elements,{repairBindings:!0,refreshDimensions:!1}):i=fd(n||null,null,null,{repairBindings:!0}),{elements:i.elements,appState:i.appState,files:i.files}},YTe=async(e,t,n)=>{const i=await N_("string"),r=await JV(new TextEncoder().encode(ag(e,t,n,"database")),{encryptionKey:i});try{const s=new Map;for(const c of e)In(c)&&n[c.fileId]&&s.set(c.fileId,n[c.fileId]);const o=await Sw({files:s,encryptionKey:i,maxBytes:Tw}),l=await(await fetch(zTe,{method:"POST",body:r.buffer})).json();if(l.id){const c=new URL(window.location.href);c.hash=`json=${l.id},${i}`;const u=c.toString();return await dT({prefix:`/files/shareLinks/${l.id}`,files:o}),{url:u,errorMessage:null}}else if(l.error_class==="RequestTooLargeError")return{url:null,errorMessage:k("alerts.couldNotCreateShareableLinkTooBig")};return{url:null,errorMessage:k("alerts.couldNotCreateShareableLink")}}catch(s){return console.error(s),{url:null,errorMessage:k("alerts.couldNotCreateShareableLink")}}};function WTe(){var e=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!e||!indexedDB.databases)return Promise.resolve();var t;return new Promise(function(n){var i=function(){return indexedDB.databases().finally(n)};t=setInterval(i,100),i()}).finally(function(){return clearInterval(t)})}function Od(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function fT(e,t){const n=WTe().then(()=>{const i=indexedDB.open(e);return i.onupgradeneeded=()=>i.result.createObjectStore(t),Od(i)});return(i,r)=>n.then(s=>r(s.transaction(t,i).objectStore(t)))}let z7;function fg(){return z7||(z7=fT("keyval-store","keyval")),z7}function KTe(e,t=fg()){return t("readonly",n=>Od(n.get(e)))}function jY(e,t,n=fg()){return n("readwrite",i=>(i.put(t,e),Od(i.transaction)))}function ZTe(e,t=fg()){return t("readwrite",n=>(e.forEach(i=>n.put(i[1],i[0])),Od(n.transaction)))}function qTe(e,t=fg()){return t("readonly",n=>Promise.all(e.map(i=>Od(n.get(i)))))}function QTe(e,t=fg()){return t("readwrite",n=>(n.delete(e),Od(n.transaction)))}function JTe(e,t){return e("readonly",n=>(n.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},Od(n.transaction)))}function eSe(e=fg()){const t=[];return JTe(e,n=>t.push([n.key,n.value])).then(()=>t)}class tSe{constructor(){F(this,"locks",new Map);F(this,"lock",t=>{this.locks.set(t,!0)});F(this,"unlock",t=>(this.locks.delete(t),!this.isLocked()))}isLocked(t){return t?this.locks.has(t):!!this.locks.size}}const p6={[vn.VERSION_DATA_STATE]:-1,[vn.VERSION_FILES]:-1},yL=e=>JSON.parse(localStorage.getItem(e)||"-1")>p6[e],YY=e=>{const t=Date.now();try{localStorage.setItem(e,JSON.stringify(t)),p6[e]=t}catch(n){console.error("error while updating browser state verison",n)}},nSe=()=>{try{for(const e of Object.keys(p6))localStorage.setItem(e,JSON.stringify(-1)),p6[e]=-1}catch(e){console.error("error while resetting browser state verison",e)}},d0=fT("files-db","files-store");class iSe extends XX{constructor(){super(...arguments);F(this,"clearObsoleteFiles",async n=>{await eSe(d0).then(i=>{for(const[r,s]of i)(!s.lastRetrieved||Date.now()-s.lastRetrieved>24*3600*1e3)&&!n.currentFileIds.includes(r)&&QTe(r,d0)})})}}const rSe=(e,t)=>{var n;try{const i=mz(t);((n=i.openSidebar)==null?void 0:n.name)===fs.name&&i.openSidebar.tab===ku&&(i.openSidebar=null),localStorage.setItem(vn.LOCAL_STORAGE_ELEMENTS,JSON.stringify(UF(e))),localStorage.setItem(vn.LOCAL_STORAGE_APP_STATE,JSON.stringify(i)),YY(vn.VERSION_DATA_STATE)}catch(i){console.error(i)}},gi=class gi{};F(gi,"_save",$a(async(t,n,i,r)=>{rSe(t,n),await gi.fileStorage.saveFiles({elements:t,files:i}),r()},TEe)),F(gi,"save",(t,n,i,r)=>{gi.isSavePaused()||gi._save(t,n,i,r)}),F(gi,"flushSave",()=>{gi._save.flush()}),F(gi,"locker",new tSe),F(gi,"pauseSave",t=>{gi.locker.lock(t)}),F(gi,"resumeSave",t=>{gi.locker.unlock(t)}),F(gi,"isSavePaused",()=>document.hidden||gi.locker.isLocked()),F(gi,"fileStorage",new iSe({getFiles(t){return qTe(t,d0).then(async n=>{const i=[],r=new Map,s=[];n.forEach((o,a)=>{const l=t[a];if(o){const c={...o,lastRetrieved:Date.now()};s.push([l,c]),i.push(c)}else r.set(l,!0)});try{ZTe(s,d0)}catch(o){console.warn(o)}return{loadedFiles:i,erroredFiles:r}})},async saveFiles({addedFiles:t}){const n=new Map,i=new Map;return YY(vn.VERSION_FILES),await Promise.all([...t].map(async([r,s])=>{try{await jY(r,s,d0),n.set(r,s)}catch(o){console.error(o),i.set(r,s)}})),{savedFiles:n,erroredFiles:i}}}));let pi=gi;const Cs=class Cs{static async load(){return await KTe(Cs.key,Cs.store)||null}static save(t){return jY(Cs.key,t,Cs.store)}};F(Cs,"idb_name",vn.IDB_LIBRARY),F(Cs,"key","libraryData"),F(Cs,"store",fT(`${Cs.idb_name}-db`,`${Cs.idb_name}-store`));let U6=Cs;class sSe{static load(){const t=localStorage.getItem(vn.__LEGACY_LOCAL_STORAGE_LIBRARY);if(t!=null){const n=JSON.parse(t);if(n)return{libraryItems:n}}return null}static clear(){localStorage.removeItem(vn.__LEGACY_LOCAL_STORAGE_LIBRARY)}}const H4=Jt({message:null,nonce:0}),WY=({collabError:e})=>{const[t,n]=N.useState(!1),i=N.useRef(0);return N.useEffect(()=>(n(!0),i.current=window.setTimeout(()=>{n(!1)},1e3),()=>{window.clearTimeout(i.current)}),[e.message,e.nonce]),e.message?g(nl,{label:e.message,long:!0,children:g("div",{className:me("collab-errors-button",{"collab-errors-button-shake":t}),children:fce})}):null};WY.displayName="CollabError";class oSe{constructor(t){F(this,"collab");F(this,"socket",null);F(this,"socketInitialized",!1);F(this,"roomId",null);F(this,"roomKey",null);F(this,"broadcastedElementVersions",new Map);F(this,"queueFileUpload",Mo(async()=>{try{await this.collab.fileManager.saveFiles({elements:this.collab.excalidrawAPI.getSceneElementsIncludingDeleted(),files:this.collab.excalidrawAPI.getFiles()})}catch(i){i.name!=="AbortError"&&this.collab.excalidrawAPI.updateScene({appState:{errorMessage:i.message}})}let t=!1;const n=this.collab.excalidrawAPI.getSceneElementsIncludingDeleted().map(i=>this.collab.fileManager.shouldUpdateImageElementStatus(i)?(t=!0,Ce(i,{status:"saved"})):i);t&&this.collab.excalidrawAPI.updateScene({elements:n,captureUpdate:Z.NEVER})},IEe));F(this,"broadcastScene",async(t,n,i)=>{if(t===Ki.INIT&&!i)throw new Error("syncAll must be true when sending SCENE.INIT");const r=n.reduce((o,a)=>((i||!this.broadcastedElementVersions.has(a.id)||a.version>this.broadcastedElementVersions.get(a.id))&&GY(a)&&o.push(a),o),[]),s={type:t,payload:{elements:r}};for(const o of r)this.broadcastedElementVersions.set(o.id,o.version);this.queueFileUpload(),await this._broadcastSocketData(s)});F(this,"broadcastIdleChange",t=>{var n;if((n=this.socket)!=null&&n.id){const i={type:Ki.IDLE_STATUS,payload:{socketId:this.socket.id,userState:t,username:this.collab.state.username}};return this._broadcastSocketData(i,!0)}});F(this,"broadcastMouseLocation",t=>{var n;if((n=this.socket)!=null&&n.id){const i={type:Ki.MOUSE_LOCATION,payload:{socketId:this.socket.id,pointer:t.pointer,button:t.button||"up",selectedElementIds:this.collab.excalidrawAPI.getAppState().selectedElementIds,username:this.collab.state.username}};return this._broadcastSocketData(i,!0)}});F(this,"broadcastVisibleSceneBounds",(t,n)=>{var i;if((i=this.socket)!=null&&i.id){const r={type:Ki.USER_VISIBLE_SCENE_BOUNDS,payload:{socketId:this.socket.id,username:this.collab.state.username,sceneBounds:t.sceneBounds}};return this._broadcastSocketData(r,!0,n)}});F(this,"broadcastUserFollowed",t=>{var n;(n=this.socket)!=null&&n.id&&this.socket.emit(m2.USER_FOLLOW_CHANGE,t)});this.collab=t}open(t,n,i){return this.socket=t,this.roomId=n,this.roomKey=i,this.socket.on("init-room",()=>{this.socket&&(this.socket.emit("join-room",this.roomId),ct("share","room joined"))}),this.socket.on("new-user",async r=>{this.broadcastScene(Ki.INIT,this.collab.getSceneElementsIncludingDeleted(),!0)}),this.socket.on("room-user-change",r=>{this.collab.setCollaborators(r)}),t}close(){this.socket&&(this.queueFileUpload.flush(),this.socket.close(),this.socket=null,this.roomId=null,this.roomKey=null,this.socketInitialized=!1,this.broadcastedElementVersions=new Map)}isOpen(){return!!(this.socketInitialized&&this.socket&&this.roomId&&this.roomKey)}async _broadcastSocketData(t,n=!1,i){var r;if(this.isOpen()){const s=JSON.stringify(t),o=new TextEncoder().encode(s),{encryptedBuffer:a,iv:l}=await A5(this.roomKey,o);(r=this.socket)==null||r.emit(n?m2.SERVER_VOLATILE:m2.SERVER,i??this.roomId,a,l)}}}var aSe={};const KY=Jt(null),V4=Jt(!1),ZY=Jt(!1),qY=Jt(null);class lSe extends N.PureComponent{constructor(n){super(n);F(this,"portal");F(this,"fileManager");F(this,"excalidrawAPI");F(this,"activeIntervalId");F(this,"idleTimeoutId");F(this,"socketInitializationTimer");F(this,"lastBroadcastedOrReceivedSceneVersion",-1);F(this,"collaborators",new Map);F(this,"onUmmount",null);F(this,"onOfflineStatusToggle",()=>{Tl.set(ZY,!window.navigator.onLine)});F(this,"isCollaborating",()=>Tl.get(V4));F(this,"setIsCollaborating",n=>{Tl.set(V4,n)});F(this,"onUnload",()=>{this.destroySocketClient({isUnload:!0})});F(this,"beforeUnload",rn(n=>{const i=Yl(this.getSceneElementsIncludingDeleted());this.isCollaborating()&&(this.fileManager.shouldPreventUnload(i)||!VY(this.portal,i))&&(this.saveCollabRoomToFirebase(i),aSe.VITE_APP_DISABLE_PREVENT_UNLOAD!=="true"?h9(n):console.warn("preventing unload disabled (VITE_APP_DISABLE_PREVENT_UNLOAD)"))}));F(this,"saveCollabRoomToFirebase",async n=>{try{const i=await PTe(this.portal,n,this.excalidrawAPI.getAppState());this.resetErrorIndicator(),this.isCollaborating()&&i&&this.handleRemoteSceneUpdate(this._reconcileElements(i))}catch(i){const r=/is longer than.*?bytes/.test(i.message)?k("errors.collabSaveFailed_sizeExceeded"):k("errors.collabSaveFailed");(!this.state.dialogNotifiedErrors[r]||!this.isCollaborating())&&(this.setErrorDialog(r),this.setState({dialogNotifiedErrors:{...this.state.dialogNotifiedErrors,[r]:!0}})),this.isCollaborating()&&this.setErrorIndicator(r),console.error(i)}});F(this,"stopCollaboration",(n=!0)=>{if(this.queueBroadcastAllElements.cancel(),this.queueSaveToFirebase.cancel(),this.loadImageFiles.cancel(),this.resetErrorIndicator(!0),this.saveCollabRoomToFirebase(Yl(this.excalidrawAPI.getSceneElementsIncludingDeleted())),this.portal.socket&&this.fallbackInitializationHandler&&this.portal.socket.off("connect_error",this.fallbackInitializationHandler),!n)pi.fileStorage.reset(),this.destroySocketClient();else if(window.confirm(k("alerts.collabStopOverridePrompt"))){nSe(),window.history.pushState({},La,window.location.origin),this.destroySocketClient(),pi.fileStorage.reset();const i=this.excalidrawAPI.getSceneElementsIncludingDeleted().map(r=>it(r)&&r.status==="saved"?Ce(r,{status:"pending"}):r);this.excalidrawAPI.updateScene({elements:i,captureUpdate:Z.NEVER})}});F(this,"destroySocketClient",n=>{this.lastBroadcastedOrReceivedSceneVersion=-1,this.portal.close(),this.fileManager.reset(),n!=null&&n.isUnload||(this.setIsCollaborating(!1),this.setActiveRoomLink(null),this.collaborators=new Map,this.excalidrawAPI.updateScene({collaborators:this.collaborators}),pi.resumeSave("collaboration"))});F(this,"fetchImageFilesFromFirebase",async n=>{const i=n.elements.filter(r=>In(r)&&!this.fileManager.isFileTracked(r.fileId)&&!r.isDeleted&&(n.forceFetchFiles?r.status!=="pending"||Date.now()-r.updated>1e4:r.status==="saved")).map(r=>r.fileId);return await this.fileManager.getFiles(i)});F(this,"decryptPayload",async(n,i,r)=>{try{const s=await em(n,i,r),o=new TextDecoder("utf-8").decode(new Uint8Array(s));return JSON.parse(o)}catch(s){return window.alert(k("alerts.decryptFailed")),console.error(s),{type:Ki.INVALID_RESPONSE}}});F(this,"fallbackInitializationHandler",null);F(this,"startCollaboration",async n=>{if(this.state.username||Ue(()=>import("./random-username.esm-__vdrxyo.js"),__vite__mapDeps([])).then(({getRandomUsername:l})=>{const c=l();this.setUsername(c)}),this.portal.socket)return null;let i,r;n?{roomId:i,roomKey:r}=n:({roomId:i,roomKey:r}=await $Te(),window.history.pushState({},La,GTe({roomId:i,roomKey:r})));const s=G6();this.setIsCollaborating(!0),pi.pauseSave("collaboration");const{default:o}=await Ue(()=>import("./index-ChGp7972.js"),__vite__mapDeps([])),a=()=>{this.initializeRoom({roomLinkData:n,fetchScene:!0}).then(l=>{s.resolve(l)})};this.fallbackInitializationHandler=a;try{this.portal.socket=this.portal.open(o("https://oss-collab.excalidraw.com",{transports:["websocket","polling"]}),i,r),this.portal.socket.once("connect_error",a)}catch(l){return console.error(l),this.setErrorDialog(l.message),null}if(!n){const l=this.excalidrawAPI.getSceneElements().map(c=>it(c)&&c.status==="saved"?Ce(c,{status:"pending"}):c);this.excalidrawAPI.updateScene({elements:l,captureUpdate:Z.NEVER}),this.saveCollabRoomToFirebase(Yl(l))}return this.socketInitializationTimer=window.setTimeout(a,SEe),this.portal.socket.on("client-broadcast",async(l,c)=>{var d;if(!this.portal.roomKey)return;const u=await this.decryptPayload(c,l,this.portal.roomKey);switch(u.type){case Ki.INVALID_RESPONSE:return;case Ki.INIT:{if(!this.portal.socketInitialized){this.initializeRoom({fetchScene:!1});const f=u.payload.elements,h=this._reconcileElements(f);this.handleRemoteSceneUpdate(h),s.resolve({elements:h,scrollToContent:!0})}break}case Ki.UPDATE:this.handleRemoteSceneUpdate(this._reconcileElements(u.payload.elements));break;case Ki.MOUSE_LOCATION:{const{pointer:f,button:h,username:m,selectedElementIds:p}=u.payload,b=u.payload.socketId||u.payload.socketID;this.updateCollaborator(b,{pointer:f,button:h,selectedElementIds:p,username:m});break}case Ki.USER_VISIBLE_SCENE_BOUNDS:{const{sceneBounds:f,socketId:h}=u.payload,m=this.excalidrawAPI.getAppState();if(((d=m.userToFollow)==null?void 0:d.socketId)!==h){console.warn(`receiving remote client's (from ${h}) viewport bounds even though we're not subscribed to it!`);return}if(m.userToFollow&&m.followedBy.has(m.userToFollow.socketId))return;this.excalidrawAPI.updateScene({appState:lV({appState:m,bounds:f,fitToViewport:!0,viewportZoomFactor:1}).appState});break}case Ki.IDLE_STATUS:{const{userState:f,socketId:h,username:m}=u.payload;this.updateCollaborator(h,{userState:f,username:m});break}default:Ec(u,null)}}),this.portal.socket.on("first-in-room",async()=>{this.portal.socket&&this.portal.socket.off("first-in-room");const l=await this.initializeRoom({fetchScene:!0,roomLinkData:n});s.resolve(l)}),this.portal.socket.on(m2.USER_FOLLOW_ROOM_CHANGE,l=>{this.excalidrawAPI.updateScene({appState:{followedBy:new Set(l)}}),this.relayVisibleSceneBounds({force:!0})}),this.initializeIdleDetector(),this.setActiveRoomLink(window.location.href),s});F(this,"initializeRoom",async({fetchScene:n,roomLinkData:i})=>{if(clearTimeout(this.socketInitializationTimer),this.portal.socket&&this.fallbackInitializationHandler&&this.portal.socket.off("connect_error",this.fallbackInitializationHandler),n&&i&&this.portal.socket){this.excalidrawAPI.resetScene();try{const r=await FTe(i.roomId,i.roomKey,this.portal.socket);if(r)return this.setLastBroadcastedOrReceivedSceneVersion(Nl(r)),{elements:r,scrollToContent:!0}}catch(r){console.error(r)}finally{this.portal.socketInitialized=!0}}else this.portal.socketInitialized=!0;return null});F(this,"_reconcileElements",n=>{const i=this.getSceneElementsIncludingDeleted(),r=this.excalidrawAPI.getAppState(),s=dd(n,null),o=ww(i,s,r);return this.setLastBroadcastedOrReceivedSceneVersion(Nl(o)),o});F(this,"loadImageFiles",Mo(async()=>{const{loadedFiles:n,erroredFiles:i}=await this.fetchImageFilesFromFirebase({elements:this.excalidrawAPI.getSceneElementsIncludingDeleted()});this.excalidrawAPI.addFiles(n),y1({excalidrawAPI:this.excalidrawAPI,erroredFiles:i,elements:this.excalidrawAPI.getSceneElementsIncludingDeleted()})},xEe));F(this,"handleRemoteSceneUpdate",n=>{this.excalidrawAPI.updateScene({elements:n,captureUpdate:Z.NEVER}),this.loadImageFiles()});F(this,"onPointerMove",()=>{this.idleTimeoutId&&(window.clearTimeout(this.idleTimeoutId),this.idleTimeoutId=null),this.idleTimeoutId=window.setTimeout(this.reportIdle,Ex),this.activeIntervalId||(this.activeIntervalId=window.setInterval(this.reportActive,vx))});F(this,"onVisibilityChange",()=>{document.hidden?(this.idleTimeoutId&&(window.clearTimeout(this.idleTimeoutId),this.idleTimeoutId=null),this.activeIntervalId&&(window.clearInterval(this.activeIntervalId),this.activeIntervalId=null),this.onIdleStateChange(gu.AWAY)):(this.idleTimeoutId=window.setTimeout(this.reportIdle,Ex),this.activeIntervalId=window.setInterval(this.reportActive,vx),this.onIdleStateChange(gu.ACTIVE))});F(this,"reportIdle",()=>{this.onIdleStateChange(gu.IDLE),this.activeIntervalId&&(window.clearInterval(this.activeIntervalId),this.activeIntervalId=null)});F(this,"reportActive",()=>{this.onIdleStateChange(gu.ACTIVE)});F(this,"initializeIdleDetector",()=>{document.addEventListener(te.POINTER_MOVE,this.onPointerMove),document.addEventListener(te.VISIBILITY_CHANGE,this.onVisibilityChange)});F(this,"updateCollaborator",(n,i)=>{var o;const r=new Map(this.collaborators),s=Object.assign({},r.get(n),i,{isCurrentUser:n===((o=this.portal.socket)==null?void 0:o.id)});r.set(n,s),this.collaborators=r,this.excalidrawAPI.updateScene({collaborators:r})});F(this,"setLastBroadcastedOrReceivedSceneVersion",n=>{this.lastBroadcastedOrReceivedSceneVersion=n});F(this,"getLastBroadcastedOrReceivedSceneVersion",()=>this.lastBroadcastedOrReceivedSceneVersion);F(this,"getSceneElementsIncludingDeleted",()=>this.excalidrawAPI.getSceneElementsIncludingDeleted());F(this,"onPointerUpdate",Mo(n=>{n.pointersMap.size<2&&this.portal.socket&&this.portal.broadcastMouseLocation(n)},AEe));F(this,"relayVisibleSceneBounds",n=>{const i=this.excalidrawAPI.getAppState();this.portal.socket&&(i.followedBy.size>0||n!=null&&n.force)&&this.portal.broadcastVisibleSceneBounds({sceneBounds:qF(i)},`follow@${this.portal.socket.id}`)});F(this,"onIdleStateChange",n=>{this.portal.broadcastIdleChange(n)});F(this,"broadcastElements",n=>{Nl(n)>this.getLastBroadcastedOrReceivedSceneVersion()&&(this.portal.broadcastScene(Ki.UPDATE,n,!1),this.lastBroadcastedOrReceivedSceneVersion=Nl(n),this.queueBroadcastAllElements())});F(this,"syncElements",n=>{this.broadcastElements(n),this.queueSaveToFirebase()});F(this,"queueBroadcastAllElements",Mo(()=>{this.portal.broadcastScene(Ki.UPDATE,this.excalidrawAPI.getSceneElementsIncludingDeleted(),!0);const n=this.getLastBroadcastedOrReceivedSceneVersion(),i=Math.max(n,Nl(this.getSceneElementsIncludingDeleted()));this.setLastBroadcastedOrReceivedSceneVersion(i)},ik));F(this,"queueSaveToFirebase",Mo(()=>{this.portal.socketInitialized&&this.saveCollabRoomToFirebase(Yl(this.excalidrawAPI.getSceneElementsIncludingDeleted()))},ik,{leading:!1}));F(this,"setUsername",n=>{this.setState({username:n}),DEe(n)});F(this,"getUsername",()=>this.state.username);F(this,"setActiveRoomLink",n=>{this.setState({activeRoomLink:n}),Tl.set(qY,n)});F(this,"getActiveRoomLink",()=>this.state.activeRoomLink);F(this,"setErrorIndicator",n=>{Tl.set(H4,{message:n,nonce:Date.now()})});F(this,"resetErrorIndicator",(n=!1)=>{Tl.set(H4,{message:null,nonce:0}),n&&this.setState({dialogNotifiedErrors:{}})});F(this,"setErrorDialog",n=>{this.setState({errorMessage:n})});this.state={errorMessage:null,dialogNotifiedErrors:{},username:VX()||"",activeRoomLink:null},this.portal=new oSe(this),this.fileManager=new XX({getFiles:async i=>{const{roomId:r,roomKey:s}=this.portal;if(!r||!s)throw new xh;return $Y(`files/rooms/${r}`,s,i)},saveFiles:async({addedFiles:i})=>{const{roomId:r,roomKey:s}=this.portal;if(!r||!s)throw new xh;const{savedFiles:o,erroredFiles:a}=await dT({prefix:`${HX.collabFiles}/${r}`,files:await Sw({files:i,encryptionKey:s,maxBytes:Tw})});return{savedFiles:o.reduce((l,c)=>{const u=i.get(c);return u&&l.set(c,u),l},new Map),erroredFiles:a.reduce((l,c)=>{const u=i.get(c);return u&&l.set(c,u),l},new Map)}}}),this.excalidrawAPI=n.excalidrawAPI,this.activeIntervalId=null,this.idleTimeoutId=null}componentDidMount(){window.addEventListener(te.BEFORE_UNLOAD,this.beforeUnload),window.addEventListener("online",this.onOfflineStatusToggle),window.addEventListener("offline",this.onOfflineStatusToggle),window.addEventListener(te.UNLOAD,this.onUnload);const n=this.excalidrawAPI.onUserFollow(o=>{this.portal.socket&&this.portal.broadcastUserFollowed(o)}),i=Qh(this.relayVisibleSceneBounds),r=this.excalidrawAPI.onScrollChange(()=>i());this.onUmmount=()=>{n(),r()},this.onOfflineStatusToggle();const s={isCollaborating:this.isCollaborating,onPointerUpdate:this.onPointerUpdate,startCollaboration:this.startCollaboration,syncElements:this.syncElements,fetchImageFilesFromFirebase:this.fetchImageFilesFromFirebase,stopCollaboration:this.stopCollaboration,setUsername:this.setUsername,getUsername:this.getUsername,getActiveRoomLink:this.getActiveRoomLink,setCollabError:this.setErrorDialog};Tl.set(KY,s)}componentWillUnmount(){var n;window.removeEventListener("online",this.onOfflineStatusToggle),window.removeEventListener("offline",this.onOfflineStatusToggle),window.removeEventListener(te.BEFORE_UNLOAD,this.beforeUnload),window.removeEventListener(te.UNLOAD,this.onUnload),window.removeEventListener(te.POINTER_MOVE,this.onPointerMove),window.removeEventListener(te.VISIBILITY_CHANGE,this.onVisibilityChange),this.activeIntervalId&&(window.clearInterval(this.activeIntervalId),this.activeIntervalId=null),this.idleTimeoutId&&(window.clearTimeout(this.idleTimeoutId),this.idleTimeoutId=null),(n=this.onUmmount)==null||n.call(this)}setCollaborators(n){var r;const i=new Map;for(const s of n)i.set(s,Object.assign({},this.collaborators.get(s),{isCurrentUser:s===((r=this.portal.socket)==null?void 0:r.id)}));this.collaborators=i,this.excalidrawAPI.updateScene({collaborators:i})}render(){const{errorMessage:n}=this.state;return g(ge,{children:n!=null&&g(sw,{onClose:()=>this.setErrorDialog(null),children:n})})}}const cSe=(e,t,n,i)=>{e.save(),e.strokeStyle=i,e.beginPath(),e.moveTo(n[0][0]*t,n[0][1]*t),e.lineTo(n[1][0]*t,n[1][1]*t),e.stroke(),e.restore()},uSe=(e,t,[n,i,r,s],o)=>{e.save(),e.strokeStyle=o,e.beginPath(),e.moveTo(n[0]*t,n[1]*t),e.bezierCurveTo(i[0]*t,i[1]*t,r[0]*t,r[1]*t,s[0]*t,s[1]*t),e.stroke(),e.restore()},dSe=(e,t)=>{e.strokeStyle="#888",e.save(),e.beginPath(),e.moveTo(-10*t,-10*t),e.lineTo(10*t,10*t),e.moveTo(10*t,-10*t),e.lineTo(-10*t,10*t),e.stroke(),e.save()},EL=(e,t,n)=>{e.forEach(i=>{switch(!0){case lie(i.data):cSe(t,n.zoom.value,i.data,i.color);break;case fie(i.data):uSe(t,n.zoom.value,i.data,i.color);break;default:throw new Error(`Unknown element type ${JSON.stringify(i)}`)}})},fSe=(e,t,n,i)=>{var a,l,c,u;const[r,s]=R5(e,n);(t.height!==e.height||t.width!==e.width)&&i();const o=k5({canvas:e,scale:n,normalizedWidth:r,normalizedHeight:s,viewBackgroundColor:"transparent"});if(o.save(),o.translate(t.scrollX*t.zoom.value,t.scrollY*t.zoom.value),dSe(o,t.zoom.value),(a=window.visualDebug)!=null&&a.currentFrame&&((l=window.visualDebug)!=null&&l.data)&&window.visualDebug.data.length>0){const[d]=hSe();EL(window.visualDebug.data[d],o,t)}else(c=window.visualDebug)==null||c.data.forEach(d=>{EL(d,o,t)});window.visualDebug&&(window.visualDebug.data=((u=window.visualDebug)==null?void 0:u.data.map(d=>d.filter(f=>f.permanent)))??[])},hSe=()=>{var n,i,r;const e=((n=window.visualDebug)==null?void 0:n.currentFrame)??0,t=((i=window.visualDebug)==null?void 0:i.data.length)??0;return t>0?[e%t,((r=window.visualDebug)==null?void 0:r.currentFrame)??0]:[0,0]},gSe=Qh((e,t,n,i)=>{fSe(e,t,n,i)},{trailing:!0}),QY=()=>{var e;return Array.isArray((e=window.visualDebug)==null?void 0:e.data)},mSe=({onChange:e})=>{const t=N.useCallback(()=>{var s,o;(!((s=window.visualDebug)!=null&&s.currentFrame)||isNaN(((o=window.visualDebug)==null?void 0:o.currentFrame)??-1))&&(window.visualDebug.currentFrame=0),window.visualDebug.currentFrame+=1,e()},[e]),n=N.useCallback(()=>{var s,o,a;(!((s=window.visualDebug)!=null&&s.currentFrame)||isNaN(((o=window.visualDebug)==null?void 0:o.currentFrame)??-1)||((a=window.visualDebug)==null?void 0:a.currentFrame)<1)&&(window.visualDebug.currentFrame=1),window.visualDebug.currentFrame-=1,e()},[e]),i=N.useCallback(()=>{window.visualDebug.currentFrame=void 0,e()},[e]),r=N.useCallback(()=>{window.visualDebug&&(window.visualDebug.currentFrame=void 0,window.visualDebug.data=[]),e()},[e]);return P(ge,{children:[g("button",{className:"ToolIcon_type_button","data-testid":"debug-forward","aria-label":"Move forward",type:"button",onClick:r,children:g("div",{className:"ToolIcon__icon","aria-hidden":"true","aria-disabled":"false",children:Tc})}),g("button",{className:"ToolIcon_type_button","data-testid":"debug-forward","aria-label":"Move forward",type:"button",onClick:n,children:g("div",{className:"ToolIcon__icon","aria-hidden":"true","aria-disabled":"false",children:g(FE,{flip:!0})})}),g("button",{className:"ToolIcon_type_button","data-testid":"debug-forward","aria-label":"Move forward",type:"button",onClick:i,children:g("div",{className:"ToolIcon__icon","aria-hidden":"true","aria-disabled":"false",children:Ad})}),g("button",{className:"ToolIcon_type_button","data-testid":"debug-backward","aria-label":"Move backward",type:"button",onClick:t,children:g("div",{className:"ToolIcon__icon","aria-hidden":"true","aria-disabled":"false",children:g(FE,{})})})]})},pSe=({appState:e,scale:t,ref:n})=>{const{width:i,height:r}=e,s=N.useRef(null);return N.useImperativeHandle(n,()=>s.current,[s]),g("canvas",{style:{width:i,height:r,position:"absolute",zIndex:2,pointerEvents:"none"},width:i*t,height:r*t,ref:s,children:"Debug Canvas"})},USe=()=>{const{t:e}=gn();return g("a",{className:"encrypted-icon tooltip",href:"https://plus.excalidraw.com/blog/end-to-end-encryption",target:"_blank",rel:"noopener noreferrer","aria-label":e("encrypted.link"),children:g(nl,{label:e("encrypted.tooltip"),long:!0,children:bce})})},bSe=()=>gd?g("a",{href:"https://app.excalidraw.com?utm_source=excalidraw&utm_medium=app&utm_content=signedInUserRedirectButton#excalidraw-redirect",target:"_blank",rel:"noreferrer",className:"plus-button",children:"Go to Excalidraw+"}):null,ySe=se.memo(({onChange:e})=>g(LX,{children:P("div",{style:{display:"flex",gap:".5rem",alignItems:"center"},children:[QY()&&g(mSe,{onChange:e}),gd?g(bSe,{}):g(USe,{})]})}));function ESe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bm(e){"@babel/helpers - typeof";return bm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bm(e)}function vSe(e,t){if(bm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(bm(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function _Se(e){var t=vSe(e,"string");return bm(t)=="symbol"?t:t+""}function wSe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,_Se(i.key),i)}}function TSe(e,t,n){return t&&wSe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}var JY=[],SSe=JY.forEach,ISe=JY.slice;function xSe(e){return SSe.call(ISe.call(arguments,1),function(t){if(t)for(var n in t)e[n]===void 0&&(e[n]=t[n])}),e}var vL=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,CSe=function(t,n,i){var r=i||{};r.path=r.path||"/";var s=encodeURIComponent(n),o=t+"="+s;if(r.maxAge>0){var a=r.maxAge-0;if(isNaN(a))throw new Error("maxAge should be a Number");o+="; Max-Age="+Math.floor(a)}if(r.domain){if(!vL.test(r.domain))throw new TypeError("option domain is invalid");o+="; Domain="+r.domain}if(r.path){if(!vL.test(r.path))throw new TypeError("option path is invalid");o+="; Path="+r.path}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(o+="; HttpOnly"),r.secure&&(o+="; Secure"),r.sameSite){var l=typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite;switch(l){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return o},_L={create:function(t,n,i,r){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};i&&(s.expires=new Date,s.expires.setTime(s.expires.getTime()+i*60*1e3)),r&&(s.domain=r),document.cookie=CSe(t,encodeURIComponent(n),s)},read:function(t){for(var n=t+"=",i=document.cookie.split(";"),r=0;r<i.length;r++){for(var s=i[r];s.charAt(0)===" ";)s=s.substring(1,s.length);if(s.indexOf(n)===0)return s.substring(n.length,s.length)}return null},remove:function(t){this.create(t,"",-1)}},ASe={name:"cookie",lookup:function(t){var n;if(t.lookupCookie&&typeof document<"u"){var i=_L.read(t.lookupCookie);i&&(n=i)}return n},cacheUserLanguage:function(t,n){n.lookupCookie&&typeof document<"u"&&_L.create(n.lookupCookie,t,n.cookieMinutes,n.cookieDomain,n.cookieOptions)}},MSe={name:"querystring",lookup:function(t){var n;if(typeof window<"u"){var i=window.location.search;!window.location.search&&window.location.hash&&window.location.hash.indexOf("?")>-1&&(i=window.location.hash.substring(window.location.hash.indexOf("?")));for(var r=i.substring(1),s=r.split("&"),o=0;o<s.length;o++){var a=s[o].indexOf("=");if(a>0){var l=s[o].substring(0,a);l===t.lookupQuerystring&&(n=s[o].substring(a+1))}}}return n}},Jg=null,wL=function(){if(Jg!==null)return Jg;try{Jg=window!=="undefined"&&window.localStorage!==null;var t="i18next.translate.boo";window.localStorage.setItem(t,"foo"),window.localStorage.removeItem(t)}catch{Jg=!1}return Jg},RSe={name:"localStorage",lookup:function(t){var n;if(t.lookupLocalStorage&&wL()){var i=window.localStorage.getItem(t.lookupLocalStorage);i&&(n=i)}return n},cacheUserLanguage:function(t,n){n.lookupLocalStorage&&wL()&&window.localStorage.setItem(n.lookupLocalStorage,t)}},e1=null,TL=function(){if(e1!==null)return e1;try{e1=window!=="undefined"&&window.sessionStorage!==null;var t="i18next.translate.boo";window.sessionStorage.setItem(t,"foo"),window.sessionStorage.removeItem(t)}catch{e1=!1}return e1},kSe={name:"sessionStorage",lookup:function(t){var n;if(t.lookupSessionStorage&&TL()){var i=window.sessionStorage.getItem(t.lookupSessionStorage);i&&(n=i)}return n},cacheUserLanguage:function(t,n){n.lookupSessionStorage&&TL()&&window.sessionStorage.setItem(n.lookupSessionStorage,t)}},LSe={name:"navigator",lookup:function(t){var n=[];if(typeof navigator<"u"){if(navigator.languages)for(var i=0;i<navigator.languages.length;i++)n.push(navigator.languages[i]);navigator.userLanguage&&n.push(navigator.userLanguage),navigator.language&&n.push(navigator.language)}return n.length>0?n:void 0}},DSe={name:"htmlTag",lookup:function(t){var n,i=t.htmlTag||(typeof document<"u"?document.documentElement:null);return i&&typeof i.getAttribute=="function"&&(n=i.getAttribute("lang")),n}},NSe={name:"path",lookup:function(t){var n;if(typeof window<"u"){var i=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(i instanceof Array)if(typeof t.lookupFromPathIndex=="number"){if(typeof i[t.lookupFromPathIndex]!="string")return;n=i[t.lookupFromPathIndex].replace("/","")}else n=i[0].replace("/","")}return n}},OSe={name:"subdomain",lookup:function(t){var n;if(typeof window<"u"){var i=window.location.href.match(/(?:http[s]*\:\/\/)*(.*?)\.(?=[^\/]*\..{2,5})/gi);i instanceof Array&&(typeof t.lookupFromSubdomainIndex=="number"?n=i[t.lookupFromSubdomainIndex].replace("http://","").replace("https://","").replace(".",""):n=i[0].replace("http://","").replace("https://","").replace(".",""))}return n}};function PSe(){return{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"]}}var eW=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ESe(this,e),this.type="languageDetector",this.detectors={},this.init(t,n)}return TSe(e,[{key:"init",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=n,this.options=xSe(i,this.options||{},PSe()),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=r,this.addDetector(ASe),this.addDetector(MSe),this.addDetector(RSe),this.addDetector(kSe),this.addDetector(LSe),this.addDetector(DSe),this.addDetector(NSe),this.addDetector(OSe)}},{key:"addDetector",value:function(n){this.detectors[n.name]=n}},{key:"detect",value:function(n){var i=this;n||(n=this.options.order);var r=[];return n.forEach(function(s){if(i.detectors[s]){var o=i.detectors[s].lookup(i.options);o&&typeof o=="string"&&(o=[o]),o&&(r=r.concat(o))}}),this.services.languageUtils.getBestMatchFromCodes?r:r.length>0?r[0]:null}},{key:"cacheUserLanguage",value:function(n,i){var r=this;i||(i=this.options.caches),i&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(n)>-1||i.forEach(function(s){r.detectors[s]&&r.detectors[s].cacheUserLanguage(n,r.options)}))}}]),e}();eW.type="languageDetector";const hT=new eW;hT.init({languageUtils:{}});const tW=()=>{var i;const e=hT.detect(),t=Array.isArray(e)?e[0]:e;return(t?(i=o5.find(r=>r.code.startsWith(t)))==null?void 0:i.code:null)||Cd.code},nW=Jt(tW()),FSe=()=>{const[e,t]=Sh(nW);return N.useEffect(()=>{hT.cacheUserLanguage(e)},[e]),[e,t]},BSe=({style:e})=>{const{t,langCode:n}=gn(),i=q9(nW);return g("select",{className:"dropdown-select dropdown-select__language",onChange:({target:r})=>i(r.value),value:n,"aria-label":t("buttons.selectLanguage"),style:e,children:o5.map(r=>g("option",{value:r.code,children:r.label},r.code))})},zSe=se.memo(e=>P(Et,{children:[g(Et.DefaultItems.LoadScene,{}),g(Et.DefaultItems.SaveToActiveFile,{}),g(Et.DefaultItems.Export,{}),g(Et.DefaultItems.SaveAsImage,{}),e.isCollabEnabled&&g(Et.DefaultItems.LiveCollaborationTrigger,{isCollaborating:e.isCollaborating,onSelect:()=>e.onCollabDialogOpen()}),g(Et.DefaultItems.CommandPalette,{className:"highlighted"}),g(Et.DefaultItems.SearchMenu,{}),g(Et.DefaultItems.Help,{}),g(Et.DefaultItems.ClearCanvas,{}),g(Et.Separator,{}),g(Et.ItemLink,{icon:DE,href:"https://plus.excalidraw.com/plus?utm_source=excalidraw&utm_medium=app&utm_content=hamburger",className:"",children:"Excalidraw+"}),g(Et.DefaultItems.Socials,{}),g(Et.ItemLink,{icon:Oz,href:`https://app.excalidraw.com${gd?"":"/sign-up"}?utm_source=signin&utm_medium=app&utm_content=hamburger`,className:"highlighted",children:gd?"Sign in":"Sign up"}),g9(),g(Et.Separator,{}),g(Et.DefaultItems.ToggleTheme,{allowSystemTheme:!0,theme:e.theme,onSelect:e.setTheme}),g(Et.ItemCustom,{children:g(BSe,{style:{width:"100%"}})}),g(Et.DefaultItems.ChangeCanvasBackground,{})]})),HSe=se.memo(e=>{const{t}=gn();let n;return gd?n=t("welcomeScreen.app.center_heading_plus").split(/(Excalidraw\+)/).map((i,r)=>i==="Excalidraw+"?g("a",{style:{pointerEvents:tu.inheritFromUI},href:"https://app.excalidraw.com?utm_source=excalidraw&utm_medium=app&utm_content=welcomeScreenSignedInUser",children:"Excalidraw+"},r):i):n=t("welcomeScreen.app.center_heading"),P(Yi,{children:[g(Yi.Hints.MenuHint,{children:t("welcomeScreen.app.menuHint")}),g(Yi.Hints.ToolbarHint,{}),g(Yi.Hints.HelpHint,{}),P(Yi.Center,{children:[g(Yi.Center.Logo,{}),g(Yi.Center.Heading,{children:n}),P(Yi.Center.Menu,{children:[g(Yi.Center.MenuItemLoadScene,{}),g(Yi.Center.MenuItemHelp,{}),e.isCollabEnabled&&g(Yi.Center.MenuItemLiveCollaborationTrigger,{onSelect:()=>e.onCollabDialogOpen()}),!gd&&g(Yi.Center.MenuItemLink,{href:"https://plus.excalidraw.com/plus?utm_source=excalidraw&utm_medium=app&utm_content=welcomeScreenGuest",shortcut:null,icon:Oz,children:"Sign up"})]})]})]})}),$4=async(e,t,n,i)=>{const r=await HY(),s=`${TP(12)}`,o=await N_(),a=await A5(o,ag(e,t,n,"database")),l=new Blob([a.iv,new Uint8Array(a.encryptedBuffer)],{type:be.binary}),c=FY(r,`/migrations/scenes/${s}`);await PY(c,l,{customMetadata:{data:JSON.stringify({version:2,name:i}),created:Date.now().toString()}});const u=new Map;for(const d of e)In(d)&&n[d.fileId]&&u.set(d.fileId,n[d.fileId]);if(u.size){const d=await Sw({files:u,encryptionKey:o,maxBytes:Tw});await dT({prefix:`/migrations/files/scenes/${s}`,files:d})}window.open(`https://app.excalidraw.com/import?excalidraw=${s},${o}`)},VSe=({elements:e,appState:t,files:n,name:i,onError:r,onSuccess:s})=>{const{t:o}=gn();return P(b4,{color:"primary",children:[g("div",{className:"Card-icon",children:g(NX,{style:{"--color-logo-icon":"#fff",width:"2.8rem",height:"2.8rem"}})}),g("h2",{children:"Excalidraw+"}),g("div",{className:"Card-details",children:o("exportDialog.excalidrawplus_description")}),g(Ze,{className:"Card-button",type:"button",title:o("exportDialog.excalidrawplus_button"),"aria-label":o("exportDialog.excalidrawplus_button"),showAriaLabel:!0,onClick:async()=>{try{ct("export","eplus",`ui (${Pm()})`),await $4(e,t,n,i),s()}catch(a){console.error(a),a.name!=="AbortError"&&r(new Error(o("exportDialog.excalidrawplus_exportError")))}}})]})};class $Se extends se.Component{constructor(){super(...arguments);F(this,"state",{hasError:!1,sentryEventId:"",localStorage:""})}render(){return this.state.hasError?this.errorSplash():this.props.children}componentDidCatch(n,i){const r={};for(const[s,o]of Object.entries({...localStorage}))try{r[s]=JSON.parse(o)}catch{r[s]=o}Zv(s=>{s.setExtras(i);const o=e9(n);this.setState(a=>({hasError:!0,sentryEventId:o,localStorage:JSON.stringify(r)}))})}selectTextArea(n){n.target!==document.activeElement&&(n.preventDefault(),n.target.select())}async createGithubIssue(){let n="";try{const i=(await Ue(()=>import("./bug-issue-template-BID_ABWq.js"),__vite__mapDeps([]))).default;n=encodeURIComponent(i(this.state.sentryEventId))}catch(i){console.error(i)}window.open(`https://github.com/excalidraw/excalidraw/issues/new?body=${n}`,"_blank","noopener noreferrer")}errorSplash(){return g("div",{className:"ErrorSplash excalidraw",children:P("div",{className:"ErrorSplash-messageContainer",children:[g("div",{className:"ErrorSplash-paragraph bigger align-center",children:g(gr,{i18nKey:"errorSplash.headingMain",button:n=>g("button",{onClick:()=>window.location.reload(),children:n})})}),P("div",{className:"ErrorSplash-paragraph align-center",children:[g(gr,{i18nKey:"errorSplash.clearCanvasMessage",button:n=>g("button",{onClick:()=>{try{localStorage.clear(),window.location.reload()}catch(i){console.error(i)}},children:n})}),g("br",{}),P("div",{className:"smaller",children:[g("span",{role:"img","aria-label":"warning",children:"⚠️"}),k("errorSplash.clearCanvasCaveat"),g("span",{role:"img","aria-hidden":"true",children:"⚠️"})]})]}),P("div",{children:[g("div",{className:"ErrorSplash-paragraph",children:k("errorSplash.trackedToSentry",{eventId:this.state.sentryEventId})}),g("div",{className:"ErrorSplash-paragraph",children:g(gr,{i18nKey:"errorSplash.openIssueMessage",button:n=>g("button",{onClick:()=>this.createGithubIssue(),children:n})})}),g("div",{className:"ErrorSplash-paragraph",children:P("div",{className:"ErrorSplash-details",children:[g("label",{children:k("errorSplash.sceneContent")}),g("textarea",{rows:5,onPointerDown:this.selectTextArea,readOnly:!0,value:this.state.localStorage})]})})]})]})})}}const iW=Jt({isOpen:!1}),GSe=()=>{const e=window.navigator,t=/Apple/.test(e.vendor),n=e.appVersion.indexOf("Win")!==-1;return t?hce:n?mce:s_},XSe=({collabAPI:e,activeRoomLink:t,handleClose:n})=>{const{t:i}=gn(),[,r]=N.useState(!1),s=N.useRef(0),o=N.useRef(null),a="share"in navigator,{onCopy:l,copyStatus:c}=ow(),u=async()=>{var f;try{await Hc(t)}catch{e.setCollabError(i("errors.copyToSystemClipboardFailed"))}r(!0),s.current&&window.clearTimeout(s.current),s.current=window.setTimeout(()=>{r(!1)},3e3),(f=o.current)==null||f.select()},d=async()=>{try{await navigator.share({title:i("roomDialog.shareTitle"),text:i("roomDialog.shareTitle"),url:t})}catch{}};return P(ge,{children:[g("h3",{className:"ShareDialog__active__header",children:i("labels.liveCollaboration").replace(/\./g,"")}),g(Rh,{defaultValue:e.getUsername(),placeholder:"Your name",label:"Your name",onChange:e.setUsername,onKeyDown:f=>f.key===z.ENTER&&n()}),P("div",{className:"ShareDialog__active__linkRow",children:[g(Rh,{ref:o,label:"Link",readonly:!0,fullWidth:!0,value:t}),a&&g(Ks,{size:"large",variant:"icon",label:"Share",icon:GSe(),className:"ShareDialog__active__share",onClick:d}),g(Ks,{size:"large",label:i("buttons.copyLink"),icon:Ym,status:c,onClick:()=>{u(),l()}})]}),P("div",{className:"ShareDialog__active__description",children:[P("p",{children:[P("span",{role:"img","aria-hidden":"true",className:"ShareDialog__active__description__emoji",children:["🔒"," "]}),i("roomDialog.desc_privacy")]}),g("p",{children:i("roomDialog.desc_exitSession")})]}),g("div",{className:"ShareDialog__active__actions",children:g(Ks,{size:"large",variant:"outlined",color:"danger",label:i("roomDialog.button_stopSession"),icon:rue,onClick:()=>{ct("share","room closed"),e.stopCollaboration(),e.isCollaborating()||n()}})})]})},jSe=e=>{const{t}=gn(),{collabAPI:n}=e,i=n?P(ge,{children:[g("div",{className:"ShareDialog__picker__header",children:t("labels.liveCollaboration").replace(/\./g,"")}),P("div",{className:"ShareDialog__picker__description",children:[g("div",{style:{marginBottom:"1em"},children:t("roomDialog.desc_intro")}),t("roomDialog.desc_privacy")]}),g("div",{className:"ShareDialog__picker__button",children:g(Ks,{size:"large",label:t("roomDialog.button_startSession"),icon:iue,onClick:()=>{ct("share","room creation",`ui (${Pm()})`),n.startCollaboration(null)}})}),e.type==="share"&&g("div",{className:"ShareDialog__separator",children:g("span",{children:t("shareDialog.or")})})]}):null;return P(ge,{children:[i,e.type==="share"&&P(ge,{children:[g("div",{className:"ShareDialog__picker__header",children:t("exportDialog.link_title")}),g("div",{className:"ShareDialog__picker__description",children:t("exportDialog.link_details")}),g("div",{className:"ShareDialog__picker__button",children:g(Ks,{size:"large",label:t("exportDialog.link_button"),icon:Rb,onClick:async()=>{await e.onExportToBackend(),e.handleClose()}})})]})]})},YSe=e=>{const t=B0(qY);return g($r,{size:"small",onCloseRequest:e.handleClose,title:!1,children:g("div",{className:"ShareDialog",children:e.collabAPI&&t?g(XSe,{collabAPI:e.collabAPI,activeRoomLink:t,handleClose:e.handleClose}):g(jSe,{...e})})})},WSe=e=>{const[t,n]=Sh(iW),{openDialog:i}=fi();return N.useEffect(()=>{i&&n({isOpen:!1})},[i,n]),t.isOpen?g(YSe,{handleClose:()=>n({isOpen:!1}),collabAPI:e.collabAPI,onExportToBackend:e.onExportToBackend,type:t.type}):null},SL=()=>{var e;return(e=window.matchMedia)==null?void 0:e.call(window,"(prefers-color-scheme: dark)")},KSe=()=>{const[e,t]=N.useState(()=>localStorage.getItem(vn.LOCAL_STORAGE_THEME)||xe.LIGHT),[n,i]=N.useState(xe.LIGHT);return N.useEffect(()=>{const r=SL(),s=a=>{i(a.matches?xe.DARK:xe.LIGHT)};e==="system"&&(r==null||r.addEventListener("change",s));const o=a=>{!a[z.CTRL_OR_CMD]&&a.altKey&&a.shiftKey&&a.code===Je.D&&(a.preventDefault(),a.stopImmediatePropagation(),t(n===xe.DARK?xe.LIGHT:xe.DARK))};return document.addEventListener(te.KEYDOWN,o,{capture:!0}),()=>{r==null||r.removeEventListener("change",s),document.removeEventListener(te.KEYDOWN,o,{capture:!0})}},[e,n,t]),N.useLayoutEffect(()=>{var r;localStorage.setItem(vn.LOCAL_STORAGE_THEME,e),i(e==="system"?(r=SL())!=null&&r.matches?xe.DARK:xe.LIGHT:e)},[e]),{editorTheme:n,appTheme:e,setAppTheme:t}},ZSe=({excalidrawAPI:e})=>P(ge,{children:[g(EEe,{generate:async({frame:t,children:n})=>{const i=e.getAppState(),r=await _5e({elements:n,appState:{...i,exportBackground:!0,viewBackgroundColor:i.viewBackgroundColor},exportingFrame:t,files:e.getFiles(),mimeType:be.jpg}),s=await t4(r),o=sF(n),a=await fetch("https://oss-ai.excalidraw.com/v1/ai/diagram-to-code/generate",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({texts:o,image:s,theme:i.theme})});if(!a.ok){const l=await a.text(),c=Oie(l);if(!c)throw new Error(l);if(c.statusCode===429)return{html:`<html>
                <body style="margin: 0; text-align: center">
                <div style="display: flex; align-items: center; justify-content: center; flex-direction: column; height: 100vh; padding: 0 60px">
                  <div style="color:red">Too many requests today,</br>please try again tomorrow!</div>
                  </br>
                  </br>
                  <div>You can also try <a href="https://plus.excalidraw.com/plus?utm_source=excalidraw&utm_medium=app&utm_content=d2c" target="_blank" rel="noreferrer noopener">Excalidraw+</a> to get more requests.</div>
                </div>
                </body>
                </html>`};throw new Error(c.message||l)}try{const{html:l}=await a.json();if(!l)throw new Error("Generation failed (invalid response)");return{html:l}}catch{throw new Error("Generation failed (invalid response)")}}}),g(CX,{onTextSubmit:async t=>{try{const n=await fetch("https://oss-ai.excalidraw.com/v1/ai/text-to-diagram/generate",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({prompt:t})}),i=n.headers.has("X-Ratelimit-Limit")?parseInt(n.headers.get("X-Ratelimit-Limit")||"0",10):void 0,r=n.headers.has("X-Ratelimit-Remaining")?parseInt(n.headers.get("X-Ratelimit-Remaining")||"0",10):void 0,s=await n.json();if(!n.ok){if(n.status===429)return{rateLimit:i,rateLimitRemaining:r,error:new Error("Too many requests today, please try again tomorrow!")};throw new Error(s.message||"Generation failed...")}const o=s.generatedResponse;if(!o)throw new Error("Generation failed...");return{generatedResponse:o,rateLimit:i,rateLimitRemaining:r}}catch{throw new Error("Request failed")}}})]}),qSe="REQUEST_SCENE",CU="https://app.excalidraw.com",QSe=async({rawElementsString:e,rawAppStateString:t})=>{if(!e||!t)throw new Hs("Elements or appstate is missing.");try{const n=JSON.parse(e);if(!n.length)throw new Hs("Scene is empty, nothing to export.");const i=JSON.parse(t),r=n.reduce((o,a)=>("fileId"in a&&a.fileId&&o.push(a.fileId),o),[]),s=await pi.fileStorage.getFiles(r);return{type:"SCENE_DATA",elements:n,appState:i,files:s}}catch(n){throw n instanceof Hs?n:new Hs("Failed to parse scene data.")}},JSe=async({token:e,publicKey:t})=>{try{const[n,i,r]=e.split(".");if(!n||!i||!r)throw new Hs("Invalid JWT format");const s=LM(i),o=LM(r),a=`${n}.${i}`,l=Uint8Array.from(o,p=>p.charCodeAt(0)),c=t.replace(/-----\w+ PUBLIC KEY-----/g,""),u=Uint8Array.from(atob(c),p=>p.charCodeAt(0)),d=await crypto.subtle.importKey("spki",u,{name:"RSASSA-PKCS1-v1_5",hash:"SHA-256"},!0,["verify"]);if(!await crypto.subtle.verify("RSASSA-PKCS1-v1_5",d,l,new TextEncoder().encode(a)))throw new Error("Invalid JWT");const h=JSON.parse(s),m=Math.floor(Date.now()/1e3);if(h.exp&&h.exp<m)throw new Error("JWT has expired")}catch(n){throw console.error("Failed to verify JWT:",n),new Error(n instanceof Error?n.message:"Invalid JWT")}},eIe=()=>{const e=N.useRef(!1);return N.useLayoutEffect(()=>{const t=async n=>{if(n.origin!==CU)throw new Hs("Invalid origin");if(n.data.type===qSe){if(!n.data.jwt)throw new Hs("JWT is missing");try{try{await JSe({token:n.data.jwt,publicKey:`MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEApQ0jM9Qz8TdFLzcuAZZX
/WvuKSOJxiw6AR/ZcE3eFQWM/mbFdhQgyK8eHGkKQifKzH1xUZjCxyXcxW6ZO02t
kPOPxhz+nxUrIoWCD/V4NGmUA1lxwHuO21HN1gzKrN3xHg5EGjyouR9vibT9VDGF
gq6+4Ic/kJX+AD2MM7Yre2+FsOdysrmuW2Fu3ahuC1uQE7pOe1j0k7auNP0y1q53
PrB8Ts2LUpepWC1l7zIXFm4ViDULuyWXTEpUcHSsEH8vpd1tckjypxCwkipfZsXx
iPszy0o0Dx2iArPfWMXlFAI9mvyFCyFC3+nSvfyAUb2C4uZgCwAuyFh/ydPF4DEE
PQIDAQAB`})}catch(r){throw console.error(`Failed to verify JWT: ${r.message}`),new Hs("Failed to verify JWT")}const i=await QSe({rawAppStateString:localStorage.getItem(vn.LOCAL_STORAGE_APP_STATE),rawElementsString:localStorage.getItem(vn.LOCAL_STORAGE_ELEMENTS)});n.source.postMessage(i,{targetOrigin:CU})}catch(i){const r={type:"ERROR",message:i instanceof Hs?i.message:"Failed to export scene data"};n.source.postMessage(r,{targetOrigin:CU})}}};if(window.addEventListener("message",t),!e.current){e.current=!0;const n={type:"READY"};window.parent.postMessage(n,CU)}return()=>{window.removeEventListener("message",t)}},[]),null};var tIe={};FX();window.EXCALIDRAW_THROTTLE_RENDER=!0;let hf=null;window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),hf=e});let rW=!1;if(window.self!==window.top)try{const e=new URL(document.referrer),t=new URL(window.location.href);e.origin===t.origin&&(rW=!0)}catch{}const IL={title:k("overwriteConfirm.modal.shareableLink.title"),description:g(gr,{i18nKey:"overwriteConfirm.modal.shareableLink.description",bold:e=>g("strong",{children:e}),br:()=>g("br",{})}),actionLabel:k("overwriteConfirm.modal.shareableLink.button"),color:"danger"},G4=async e=>{var c,u;const n=new URLSearchParams(window.location.search).get("id"),i=window.location.hash.match(/^#json=([a-zA-Z0-9_-]+),([a-zA-Z0-9_-]+)$/),r=window.location.hash.match(/^#url=(.*)$/),s=$X();let o=await bL(null,null,s),a=VTe(window.location.href);const l=!!(n||i||a);if(l)if(!o.elements.length||a||await h4(IL))i&&(o=await bL(i[1],i[2],s)),o.scrollToContent=!0,a||window.history.replaceState({},La,window.location.origin);else{if(document.hidden)return new Promise((d,f)=>{window.addEventListener("focus",()=>G4(e).then(d).catch(f),{once:!0})});a=null,window.history.replaceState({},La,window.location.origin)}else if(r){window.history.replaceState({},La,window.location.origin);const d=r[1];try{const f=await fetch(window.decodeURIComponent(d)),h=await H_(await f.blob(),null,null);if(!o.elements.length||await h4(IL))return{scene:h,isExternalScene:l}}catch{return{scene:{appState:{errorMessage:k("alerts.invalidSceneUrl")}},isExternalScene:l}}}if(a&&e.collabAPI){const{excalidrawAPI:d}=e,f=await e.collabAPI.startCollaboration(a);return{scene:{...f,appState:{...h$({...f==null?void 0:f.appState,theme:((c=s==null?void 0:s.appState)==null?void 0:c.theme)||((u=f==null?void 0:f.appState)==null?void 0:u.theme)},d.getAppState()),isLoading:!1},elements:ww((f==null?void 0:f.elements)||[],d.getSceneElementsIncludingDeleted(),d.getAppState())},isExternalScene:!0,id:a.roomId,key:a.roomKey}}else if(o)return l&&i?{scene:o,isExternalScene:l,id:i[1],key:i[2]}:{scene:o,isExternalScene:!1};return{scene:null,isExternalScene:!1}},nIe=()=>{const[e,t]=N.useState(""),n=kie(),{editorTheme:i,appTheme:r,setAppTheme:s}=KSe(),[o,a]=FSe(),l=N.useRef({promise:null});l.current.promise||(l.current.promise=G6());const c=N.useRef(null);N.useEffect(()=>{ct("load","frame",Pm()),setTimeout(()=>{ct("load","version",nE())},Vne)},[]);const[u,d]=O$(),[,f]=Sh(iW),[h]=Sh(KY),[m]=FEe(V4,()=>UL(window.location.href)),p=B0(H4);A5e({excalidrawAPI:u,adapter:U6,migrationAdapter:sSe});const[,b]=N.useState(!1);N.useEffect(()=>{},[u]),N.useEffect(()=>{if(!u||!n&&!h)return;const I=(H,$=!1)=>{var j;if(H.scene)if(h!=null&&h.isCollaborating())H.scene.elements&&h.fetchImageFilesFromFirebase({elements:H.scene.elements,forceFetchFiles:!0}).then(({loadedFiles:X,erroredFiles:K})=>{u.addFiles(X),y1({excalidrawAPI:u,erroredFiles:K,elements:u.getSceneElementsIncludingDeleted()})});else{const X=((j=H.scene.elements)==null?void 0:j.reduce((K,le)=>In(le)?K.concat(le.fileId):K,[]))||[];H.isExternalScene?$Y(`${HX.shareLinkFiles}/${H.id}`,H.key,X).then(({loadedFiles:K,erroredFiles:le})=>{u.addFiles(K),y1({excalidrawAPI:u,erroredFiles:le,elements:u.getSceneElementsIncludingDeleted()})}):$&&(X.length&&pi.fileStorage.getFiles(X).then(({loadedFiles:K,erroredFiles:le})=>{K.length&&u.addFiles(K),y1({excalidrawAPI:u,erroredFiles:le,elements:u.getSceneElementsIncludingDeleted()})}),pi.fileStorage.clearObsoleteFiles({currentFileIds:X}))}};G4({collabAPI:h,excalidrawAPI:u}).then(async H=>{I(H,!0),l.current.promise.resolve(H.scene)});const R=async H=>{H.preventDefault(),l4()||(h!=null&&h.isCollaborating()&&!UL(window.location.href)&&h.stopCollaboration(!1),u.updateScene({appState:{isLoading:!0}}),G4({collabAPI:h,excalidrawAPI:u}).then(j=>{I(j),j.scene&&u.updateScene({...j.scene,...fd(j.scene,null,null,{repairBindings:!0}),captureUpdate:Z.IMMEDIATELY})}))},D=setTimeout(()=>document.title=La,Hne),L=$a(()=>{if(!document.hidden&&(h&&!h.isCollaborating()||n)){if(yL(vn.VERSION_DATA_STATE)){const H=$X(),$=VX();a(tW()),u.updateScene({...H,captureUpdate:Z.NEVER}),U6.load().then(j=>{j&&u.updateLibrary({libraryItems:j.libraryItems})}),h==null||h.setUsername($||"")}if(yL(vn.VERSION_FILES)){const H=u.getSceneElementsIncludingDeleted(),$=u.getFiles(),j=(H==null?void 0:H.reduce((X,K)=>In(K)&&!$[K.fileId]?X.concat(K.fileId):X,[]))||[];j.length&&pi.fileStorage.getFiles(j).then(({loadedFiles:X,erroredFiles:K})=>{X.length&&u.addFiles(X),y1({excalidrawAPI:u,erroredFiles:K,elements:u.getSceneElementsIncludingDeleted()})})}}},CEe),G=()=>{pi.flushSave()},V=H=>{(H.type===te.BLUR||document.hidden)&&pi.flushSave(),(H.type===te.VISIBILITY_CHANGE||H.type===te.FOCUS)&&L()};return window.addEventListener(te.HASHCHANGE,R,!1),window.addEventListener(te.UNLOAD,G,!1),window.addEventListener(te.BLUR,V,!1),document.addEventListener(te.VISIBILITY_CHANGE,V,!1),window.addEventListener(te.FOCUS,V,!1),()=>{window.removeEventListener(te.HASHCHANGE,R,!1),window.removeEventListener(te.UNLOAD,G,!1),window.removeEventListener(te.BLUR,V,!1),window.removeEventListener(te.FOCUS,V,!1),document.removeEventListener(te.VISIBILITY_CHANGE,V,!1),clearTimeout(D)}},[n,h,u,a]),N.useEffect(()=>{const I=R=>{pi.flushSave(),u&&pi.fileStorage.shouldPreventUnload(u.getSceneElements())&&(tIe.VITE_APP_DISABLE_PREVENT_UNLOAD!=="true"?h9(R):console.warn("preventing unload disabled (VITE_APP_DISABLE_PREVENT_UNLOAD)"))};return window.addEventListener(te.BEFORE_UNLOAD,I),()=>{window.removeEventListener(te.BEFORE_UNLOAD,I)}},[u]);const E=(I,R,D)=>{h!=null&&h.isCollaborating()&&h.syncElements(I),pi.isSavePaused()||pi.save(I,R,D,()=>{if(u){let L=!1;const G=u.getSceneElementsIncludingDeleted().map(V=>{if(pi.fileStorage.shouldUpdateImageElementStatus(V)){const H=Ce(V,{status:"saved"});return H!==V&&(L=!0),H}return V});L&&u.updateScene({elements:G,captureUpdate:Z.NEVER})}}),c.current&&u&&gSe(c.current,R,window.devicePixelRatio,()=>b(L=>!L))},[y,v]=N.useState(null),_=async(I,R,D)=>{if(I.length===0)throw new Error(k("alerts.cannotExportEmptyCanvas"));try{const{url:L,errorMessage:G}=await YTe(I,{...R,viewBackgroundColor:R.exportBackground?R.viewBackgroundColor:to().viewBackgroundColor},D);if(G)throw new Error(G);L&&v(L)}catch(L){if(L.name!=="AbortError"){const{width:G,height:V}=R;throw console.error(L,{width:G,height:V,devicePixelRatio:window.devicePixelRatio}),new Error(L.message)}}},S=(I,R)=>g(PEe,{setToast:D=>u.setToast({message:D}),appState:R,elements:I}),M=B0(ZY),w=N.useCallback(()=>f({isOpen:!0,type:"collaborationOnly"}),[f]);if(rW)return g("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",height:"100%"},children:g("h1",{children:"I'm not a pretzel!"})});const T={label:"Excalidraw+",category:gt.links,predicate:!0,icon:g("div",{style:{width:14},children:DE}),keywords:["plus","cloud","server"],perform:()=>{window.open("https://plus.excalidraw.com/plus?utm_source=excalidraw&utm_medium=app&utm_content=command_palette","_blank")}},A={label:"Sign up",category:gt.links,predicate:!0,icon:g("div",{style:{width:14},children:DE}),keywords:["excalidraw","plus","cloud","server","signin","login","signup"],perform:()=>{window.open("https://app.excalidraw.com?utm_source=excalidraw&utm_medium=app&utm_content=command_palette","_blank")}};return g("div",{style:{height:"100%"},className:me("excalidraw-app",{"is-collaborating":m}),children:P(zX,{excalidrawAPI:d,onChange:E,initialData:l.current.promise,isCollaborating:m,onPointerUpdate:h==null?void 0:h.onPointerUpdate,UIOptions:{canvasActions:{toggleTheme:!0,export:{onExportToBackend:_,renderCustomUI:u?(I,R,D)=>g(VSe,{elements:I,appState:R,files:D,name:u.getName(),onError:L=>{u==null||u.updateScene({appState:{errorMessage:L.message}})},onSuccess:()=>{u.updateScene({appState:{openDialog:null}})}}):void 0}}},langCode:o,renderCustomStats:S,detectScroll:!1,handleKeyboardGlobally:!0,autoFocus:!0,theme:i,renderTopRightUI:I=>I||!h||n?null:P("div",{className:"top-right-ui",children:[p.message&&g(WY,{collabError:p}),g(DX,{isCollaborating:m,onSelect:()=>f({isOpen:!0,type:"share"})})]}),onLinkOpen:(I,R)=>{I.link&&Yf(I.link)&&(R.preventDefault(),u==null||u.scrollToContent(I.link,{animate:!0}))},children:[g(zSe,{onCollabDialogOpen:w,isCollaborating:m,isCollabEnabled:!n,theme:r,setTheme:I=>s(I),refresh:()=>b(I=>!I)}),g(HSe,{onCollabDialogOpen:w,isCollabEnabled:!n}),P(wu,{children:[g(wu.Actions.ExportToImage,{}),g(wu.Actions.SaveToDisk,{}),u&&g(wu.Action,{title:k("overwriteConfirm.action.excalidrawPlus.title"),actionLabel:k("overwriteConfirm.action.excalidrawPlus.button"),onClick:()=>{$4(u.getSceneElements(),u.getAppState(),u.getFiles(),u.getName())},children:k("overwriteConfirm.action.excalidrawPlus.description")})]}),g(ySe,{onChange:()=>u==null?void 0:u.refresh()}),u&&g(ZSe,{excalidrawAPI:u}),g(BX,{}),m&&M&&g("div",{className:"collab-offline-warning",children:k("alerts.collabOfflineWarning")}),y&&g(wEe,{link:y,onCloseRequest:()=>v(null),setErrorMessage:t}),u&&!n&&g(lSe,{excalidrawAPI:u}),g(WSe,{collabAPI:h,onExportToBackend:async()=>{if(u)try{await _(u.getSceneElements(),u.getAppState(),u.getFiles())}catch(I){t(I.message)}}}),e&&g(sw,{onClose:()=>t(""),children:e}),g(gR,{customCommandPaletteItems:[{label:k("labels.liveCollaboration"),category:gt.app,keywords:["team","multiplayer","share","public","session","invite"],icon:o_,perform:()=>{f({isOpen:!0,type:"collaborationOnly"})}},{label:k("roomDialog.button_stopSession"),category:gt.app,predicate:()=>!!(h!=null&&h.isCollaborating()),keywords:["stop","session","end","leave","close","exit","collaboration"],perform:()=>{h&&(h.stopCollaboration(),h.isCollaborating()||f({isOpen:!1}))}},{label:k("labels.share"),category:gt.app,predicate:!0,icon:s_,keywords:["link","shareable","readonly","export","publish","snapshot","url","collaborate","invite"],perform:async()=>{f({isOpen:!0,type:"share"})}},{label:"GitHub",icon:i_,category:gt.links,predicate:!0,keywords:["issues","bugs","requests","report","features","social","community"],perform:()=>{window.open("https://github.com/excalidraw/excalidraw","_blank","noopener noreferrer")}},{label:k("labels.followUs"),icon:_z,category:gt.links,predicate:!0,keywords:["twitter","contact","social","community"],perform:()=>{window.open("https://x.com/excalidraw","_blank","noopener noreferrer")}},{label:k("labels.discordChat"),category:gt.links,predicate:!0,icon:vz,keywords:["chat","talk","contact","bugs","requests","report","feedback","suggestions","social","community"],perform:()=>{window.open("https://discord.gg/UexuTaE","_blank","noopener noreferrer")}},{label:"YouTube",icon:Pz,category:gt.links,predicate:!0,keywords:["features","tutorials","howto","help","community"],perform:()=>{window.open("https://youtube.com/@excalidraw","_blank","noopener noreferrer")}},...gd?[{...A,label:"Sign in / Go to Excalidraw+"}]:[T,A],{label:k("overwriteConfirm.action.excalidrawPlus.button"),category:gt.export,icon:gce,predicate:!0,keywords:["plus","export","save","backup"],perform:()=>{u&&$4(u.getSceneElements(),u.getAppState(),u.getFiles(),u.getName())}},{...gR.defaultItems.toggleTheme,perform:()=>{s(i===xe.DARK?xe.LIGHT:xe.DARK)}},{label:k("labels.installPWA"),category:gt.app,predicate:()=>!!hf,perform:()=>{hf&&(hf.prompt(),hf.userChoice.then(()=>{hf=null}))}}]}),QY()&&u&&g(pSe,{appState:u.getAppState(),scale:window.devicePixelRatio,ref:c})]})})},iIe=()=>window.location.pathname==="/excalidraw-plus-export"?g(eIe,{}):g($Se,{children:g(Sle,{store:Tl,children:g(nIe,{})})});window.__EXCALIDRAW_SHA__="";const rIe=document.getElementById("root"),sIe=kq.createRoot(rIe);Nq();sIe.render(g(N.StrictMode,{children:g(iIe,{})}));export{Ue as _,_a as c,al as g};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/subset-worker.chunk-CVR6pt27.js","assets/subset-shared.chunk-D3ioWSie.js","assets/pica-D2f-msTZ.js","assets/_commonjs-dynamic-modules-TDtrdbi3.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
//# sourceMappingURL=index-OnkOn20b.js.map
